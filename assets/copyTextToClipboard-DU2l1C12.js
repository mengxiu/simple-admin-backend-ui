var u=(t,a,e)=>new Promise((s,r)=>{var i=o=>{try{c(e.next(o))}catch(d){r(d)}},y=o=>{try{c(e.throw(o))}catch(d){r(d)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,y);c((e=e.apply(t,a)).next())});import{a3 as D,f}from"./vue-D0RdBkD6.js";import{a as n,b9 as M}from"./entry/index-BPNJPE-d-1727367563404.js";import{d as l}from"./antd-CnnxMtH0.js";const O=(t,a="notice")=>n.post({url:"/sys-api/dictionary_detail/list",params:t},{errorMessageMode:a}),v=(t,a="notice")=>n.post({url:"/sys-api/dictionary_detail/create",params:t},{errorMessageMode:a,successMessageMode:a}),J=(t,a="notice")=>n.post({url:"/sys-api/dictionary_detail/update",params:t},{errorMessageMode:a,successMessageMode:a}),_=(t,a="notice")=>n.post({url:"/sys-api/dictionary_detail/delete",params:t},{errorMessageMode:a,successMessageMode:a}),g=(t,a="notice")=>n.get({url:"/sys-api/dict/"+t.name},{errorMessageMode:a}),p=new Map,h=500,A=D({id:"app-dictionary",state:()=>({data:JSON.stringify(Array.from(new Map))}),actions:{getDictionary(t,a=!0){return u(this,null,function*(){const e=new Map(JSON.parse(this.data));if(a&&e.has(t))return e.get(t);{const s=p.get(t);if(s&&Date.now()-s.timestamp<h)return s.promise;const r=this.fetchDictionaryData(t);return p.set(t,{promise:r,timestamp:Date.now()}),setTimeout(()=>{p.delete(t)},500),r}})},fetchDictionaryData(t){return u(this,null,function*(){const a=new Map(JSON.parse(this.data)),e=yield g({name:t});if(e.code===0){const s=f([]);for(let i=0;i<e.data.total;i++)s.value.push({label:e.data.data[i].title,value:e.data.data[i].value,status:e.data.data[i].status});const r={data:s.value};return a.set(t,r),this.data=JSON.stringify(Array.from(a.entries())),r}else return null})},removeDictionary(t){const a=new Map(JSON.parse(this.data));a.has(t)&&a.delete(t),this.data=JSON.stringify(Array.from(a.entries()))},clear(){const t=new Map;this.data=JSON.stringify(Array.from(t.entries()))}},persist:{storage:sessionStorage,key:M}});function C(t,a="已成功复制到剪切板!"){navigator.clipboard.writeText(t).then(function(){a&&l.success(a)},function(e){l.error("复制失败!"+e.message)})}export{J as a,v as b,C as c,_ as d,O as g,A as u};
