var B=Object.defineProperty;var w=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var P=(o,t,n)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,I=(o,t)=>{for(var n in t||(t={}))A.call(t,n)&&P(o,n,t[n]);if(w)for(var n of w(t))D.call(t,n)&&P(o,n,t[n]);return o};var b=(o,t,n)=>new Promise((a,l)=>{var f=m=>{try{i(n.next(m))}catch(d){l(d)}},y=m=>{try{i(n.throw(m))}catch(d){l(d)}},i=m=>m.done?a(m.value):Promise.resolve(m.value).then(f,y);i((n=n.apply(o,t)).next())});import{b as F,c as N}from"./useForm-BzgFlAKs.js";import{b as G,m as L,as as q,bm as k,bk as h,v as U,bn as H,bo as $,ar as E,_ as C}from"./entry/index-BPNJPE-d-1727367563404.js";import{G as v}from"./antd-CnnxMtH0.js";import{l as g,d as O,f as T,c as j,u as r,S as z,U as K,X as Z,k as W,a0 as X}from"./vue-D0RdBkD6.js";import{a as Y,B as J}from"./index-CaWdKrxn.js";const{t:e}=G();e("sys.menu.paramType"),e("sys.menu.paramKey"),e("sys.menu.paramValue"),e("common.action");const re=[{title:e("sys.menu.menuName"),dataIndex:"trans",width:200,align:"left"},{title:e("sys.menu.icon"),width:50,customRender:({record:o})=>g(L,{icon:o.icon})},{title:e("sys.apis.serviceName"),dataIndex:"serviceName",width:100},{title:e("sys.menu.routePath"),dataIndex:"path",width:200},{title:e("sys.menu.order"),dataIndex:"sort",width:80},{title:e("common.status"),dataIndex:"disabled",width:80,customRender:({record:o})=>{const n=~~o.disabled===0,a=n?"green":"red",l=e(n?"common.on":"common.off");return g(v,{color:a},()=>l)}},{title:e("sys.menu.isHidden"),dataIndex:"hideMenu",width:80,customRender:({record:o})=>{const n=~~o.hideMenu===1,a=n?"green":"red",l=e(n?"common.yes":"common.no");return g(v,{color:a},()=>l)}},{title:e("common.createTime"),dataIndex:"createdAt",width:180,customRender:({record:o})=>q(o.createdAt)}],u=o=>o===1,c=o=>o===2,Q=[{field:"menuType",label:e("sys.menu.type"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:e("sys.menu.directory"),value:0},{label:e("sys.menu.menu"),value:1},{label:e("sys.menu.element"),value:2}]},colProps:{lg:24,md:24,sm:24}},{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:e("sys.menu.menuName"),component:"Input",required:!0,rules:[{max:50}],colProps:{lg:11,md:11,sm:11}},{field:"title",label:e("sys.menu.menuTitle"),component:"Input",required:!0,rules:[{max:50}],colProps:{lg:11,md:11,sm:11,offset:2}},{field:"parentId",label:e("sys.menu.menuParent"),component:"ApiTreeSelect",required:!0,componentProps:{api:k,resultField:"data.data",labelField:"trans",valueField:"id",defaultValue:{id:h.DEFAULT,parentId:-1,label:e("sys.menu.rootMenu"),value:h.DEFAULT}},defaultValue:h.DEFAULT,colProps:{lg:11,md:11,sm:11}},{field:"icon",label:e("sys.menu.icon"),component:"IconPicker",required:!0,colProps:{lg:11,md:11,sm:11,offset:2}},{field:"serviceName",label:e("sys.apis.serviceName"),component:"Input",defaultValue:"",rules:[{max:50}],colProps:{lg:24,md:24,sm:24},helpMessage:e("sys.apis.serviceNameHelpMessage")},{field:"path",label:e("sys.menu.routePath"),component:"Input",required:!0,helpMessage:e("sys.menu.pathHelp"),rules:[{pattern:/^(\/(\:)?[0-9A-Za-z_-]+)*$/gm,message:e("common.wrongFormat")}],colProps:{lg:24,md:24,sm:24},ifShow:({values:o})=>!c(o.menuType)},{field:"component",label:e("sys.menu.componentPath"),component:"Input",required:!0,helpMessage:e("sys.menu.componentHelp"),ifShow:({values:o})=>u(o.menuType),rules:[{pattern:/^(\/[0-9A-Za-z_-]+)*(LAYOUT|IFrame)?$/gm,message:e("common.wrongFormat")}],colProps:{lg:24,md:24,sm:24}},{field:"redirect",label:e("sys.menu.redirectPath"),component:"Input",defaultValue:"",ifShow:({values:o})=>u(o.menuType),rules:[{max:300}],colProps:{lg:24,md:24,sm:24}},{field:"frameSrc",label:e("sys.menu.frameSrc"),component:"Input",defaultValue:"",ifShow:({values:o})=>u(o.menuType),rules:[{max:300}],colProps:{lg:24,md:24,sm:24}},{field:"realPath",label:e("sys.menu.realPath"),component:"Input",defaultValue:"",ifShow:({values:o})=>u(o.menuType),rules:[{max:300}],colProps:{lg:24,md:24,sm:24}},{field:"sort",label:e("sys.menu.order"),component:"InputNumber",required:!0,componentProps:{max:1e4},colProps:{lg:11,md:11,sm:11}},{field:"permission",label:e("sys.menu.permission"),component:"Input",ifShow:({values:o})=>c(o.menuType),colProps:{lg:11,md:11,sm:11,offset:2},helpMessage:e("sys.menu.permissionHelp")},{field:"dynamicLevel",label:e("sys.menu.dynamicLevel"),component:"InputNumber",required:!0,componentProps:{max:20},colProps:{lg:11,md:11,sm:11,offset:2},ifShow:({values:o})=>!c(o.menuType)},{field:"disabled",label:e("common.status"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.on"),value:!1},{label:e("common.off"),value:!0}]},colProps:{lg:12,md:12,sm:12}},{field:"ignoreKeepAlive",label:e("sys.menu.isKeepAlive"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!1},{label:e("common.no"),value:!0}]},colProps:{lg:12,md:12,sm:12},ifShow:({values:o})=>u(o.menuType)},{field:"hideMenu",label:e("sys.menu.isHidden"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},colProps:{lg:12,md:12,sm:12},ifShow:({values:o})=>!c(o.menuType)},{field:"hideBreadcrumb",label:e("sys.menu.isBreadcrumbShown"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!1},{label:e("common.no"),value:!0}]},ifShow:({values:o})=>u(o.menuType),colProps:{lg:12,md:12,sm:12}},{field:"hideTab",label:e("sys.menu.hideTab"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},ifShow:({values:o})=>u(o.menuType),colProps:{lg:12,md:12,sm:12}},{field:"carryParam",label:e("sys.menu.carryParam"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},ifShow:({values:o})=>u(o.menuType),colProps:{lg:12,md:12,sm:12}},{field:"hideChildrenInMenu",label:e("sys.menu.hideChildrenInMenu"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},colProps:{lg:12,md:12,sm:12},ifShow:({values:o})=>!c(o.menuType)},{field:"affix",label:e("sys.menu.affix"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:e("common.yes"),value:!0},{label:e("common.no"),value:!1}]},ifShow:({values:o})=>u(o.menuType),colProps:{lg:12,md:12,sm:12}}],ee=O({__name:"MenuDrawer",emits:["success","register"],setup(o,{emit:t}){const n=t,a=T(!0),{t:l}=U.useI18n(),f=T(0),{createMessage:y}=E(),[i,{resetFields:m,setFieldsValue:d,validate:x}]=F({labelWidth:160,layout:"vertical",schemas:Q,showActionButtonGroup:!1}),[M,{setDrawerProps:p,closeDrawer:S}]=Y(s=>b(this,null,function*(){yield m(),p({confirmLoading:!1}),a.value=!!(s!=null&&s.isUpdate),r(a)&&(yield d(I({},s.record))),"record"in s&&(f.value=s.record.id)})),_=j(()=>r(a)?l("sys.menu.editMenu"):l("sys.menu.addMenu"));function V(){return b(this,null,function*(){const s=yield x();if(p({confirmLoading:!0}),s.parentId=s.parentId?Number(s.parentId):0,s.id=r(a)?Number(s.id):0,s.parentId===s.id&&r(a)){y.error(l("common.notAllowSameAsParentId")),p({confirmLoading:!1});return}(r(a)?yield H(s):yield $(s)).code===0&&(S(),n("success")),p({confirmLoading:!1})})}return(s,R)=>(z(),K(r(J),X(s.$attrs,{onRegister:r(M),showFooter:"",title:_.value,width:"50%",onOk:V}),{default:Z(()=>[W(r(N),{onRegister:r(i)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}}),oe=C(ee,[["__scopeId","data-v-7498d992"]]),ue=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"}));export{oe as M,ue as a,re as c};
