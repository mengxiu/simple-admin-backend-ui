var C=Object.defineProperty;var g=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var h=(e,a,n)=>a in e?C(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,y=(e,a)=>{for(var n in a||(a={}))v.call(a,n)&&h(e,n,a[n]);if(g)for(var n of g(a))S.call(a,n)&&h(e,n,a[n]);return e};var p=(e,a,n)=>new Promise((s,c)=>{var m=i=>{try{u(n.next(i))}catch(l){c(l)}},d=i=>{try{u(n.throw(i))}catch(l){c(l)}},u=i=>i.done?s(i.value):Promise.resolve(i.value).then(m,d);u((n=n.apply(e,a)).next())});import{b as x,c as D}from"./useForm-BzgFlAKs.js";import{b as R,bg as w,as as q,v as P,bh as B}from"./entry/index-BPNJPE-d-1727367563404.js";import{l as F,d as T,f as A,c as L,u as r,S as N,U,X as V,k as G,a0 as $}from"./vue-D0RdBkD6.js";import{Q as j}from"./antd-CnnxMtH0.js";import{a as O,B as Q}from"./index-CaWdKrxn.js";const{t}=R(),M=[{title:t("sys.configuration.name"),dataIndex:"name",width:100},{title:t("sys.configuration.key"),dataIndex:"key",width:100},{title:t("sys.configuration.category"),dataIndex:"category",width:100},{title:t("sys.configuration.remark"),dataIndex:"remark",width:100},{title:t("common.status"),dataIndex:"state",width:50,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),F(j,{checked:e.state===!0,checkedChildren:t("common.on"),unCheckedChildren:t("common.off"),loading:e.pendingStatus,onChange(a,n){e.pendingStatus=!0;const s=!!a;w({id:e.id,state:s}).then(()=>{e.state=s}).finally(()=>{e.pendingStatus=!1})}}))},{title:t("common.createTime"),dataIndex:"createdAt",width:70,customRender:({record:e})=>q(e.createdAt)}],Y=[{field:"name",label:t("sys.configuration.name"),component:"Input",colProps:{span:8}},{field:"key",label:t("sys.configuration.key"),component:"Input",colProps:{span:8}},{field:"category",label:t("sys.configuration.category"),component:"Input",required:!1,colProps:{span:8}}],W=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:t("sys.configuration.name"),component:"Input",required:!0},{field:"key",label:t("sys.configuration.key"),component:"Input",required:!0},{field:"value",label:t("sys.configuration.value"),component:"Input",required:!0},{field:"category",label:t("sys.configuration.category"),component:"Input",required:!0},{field:"remark",label:t("common.remark"),component:"Input",required:!1},{field:"sort",label:t("common.sort"),component:"InputNumber",required:!0},{field:"state",label:t("common.status"),component:"RadioButtonGroup",defaultValue:!0,componentProps:{options:[{label:t("common.on"),value:!0},{label:t("common.off"),value:!1}]}}],Z=T({__name:"ConfigurationDrawer",emits:["success","register"],setup(e,{emit:a}){const n=a,s=A(!0),{t:c}=P.useI18n(),[m,{resetFields:d,setFieldsValue:u,validate:i}]=x({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:W,showActionButtonGroup:!1}),[l,{setDrawerProps:f,closeDrawer:b}]=O(o=>p(this,null,function*(){yield d(),f({confirmLoading:!1}),s.value=!!(o!=null&&o.isUpdate),r(s)&&(yield u(y({},o.record)))})),I=L(()=>r(s)?c("sys.configuration.editConfiguration"):c("sys.configuration.addConfiguration"));function k(){return p(this,null,function*(){const o=yield i();f({confirmLoading:!0}),o.id=r(s)?Number(o.id):0,(r(s)?yield w(o):yield B(o)).code===0&&(b(),n("success")),f({confirmLoading:!1})})}return(o,_)=>(N(),U(r(Q),$(o.$attrs,{onRegister:r(l),showFooter:"",title:I.value,width:"35%",onOk:k}),{default:V(()=>[G(r(D),{onRegister:r(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Z as _,M as c,Y as s};
