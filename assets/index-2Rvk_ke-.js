var l=(h,t,a)=>new Promise((r,c)=>{var d=e=>{try{n(a.next(e))}catch(s){c(s)}},p=e=>{try{n(a.throw(e))}catch(s){c(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(d,p);n((a=a.apply(h,t)).next())});import{i as B}from"./index-D0CbPeO-.js";import{u as I,_ as T}from"./useTable-C1zHh-l8.js";import{a as E}from"./useForm-BzgFlAKs.js";import{v as N,aq as U}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as V}from"./index-CaWdKrxn.js";import{c as $,s as F,_ as L}from"./MemberRankDrawer.vue_vue_type_script_setup_true_lang-PxIzm8GK.js";import{g as O,d as k}from"./memberRank-DU1rEQy3.js";import{M as W}from"./antd-CnnxMtH0.js";import{d as j,f as C,ae as q,S as _,a8 as G,k as u,X as m,U as g,u as o,G as y,ac as w,Z as R}from"./vue-D0RdBkD6.js";import"./ExclamationCircleOutlined-m2nOMvaL.js";import"./index-LAC3wiAG.js";import"./isBoolean-Dou3jA6I.js";import"./index-BoOgNZ_b.js";import"./useWindowSizeFn-C71HDhub.js";import"./isDeepEqual-DIYWxe5x.js";import"./isNumber-j3SIk7av.js";import"./index-DDNUB-iW.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CyX9qi6i.js";import"./sortable.esm-BEDva30o.js";import"./index-DgmEQ_L6.js";import"./copyTextToClipboard-DU2l1C12.js";import"./useSortable-s3dauH_p.js";import"./index-BLETcaq3.js";import"./index-CBEN6l7B.js";const he=j({name:"MemberRankManagement",__name:"index",setup(h){const{t}=N.useI18n(),a=C(),r=C(!1),[c,{openDrawer:d}]=V(),[p,{reload:n}]=I({title:t("sys.memberRank.memberRankList"),api:O,columns:$,formConfig:{labelWidth:120,schemas:F},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:30,title:t("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",columnWidth:20,onChange:(i,f)=>{a.value=i,r.value=i.length>0}}});function e(){d(!0,{isUpdate:!1})}function s(i){d(!0,{record:i,isUpdate:!0})}function v(i){return l(this,null,function*(){(yield k({ids:[i.id]})).code===0&&(yield n())})}function x(){return l(this,null,function*(){W.confirm({title:t("common.deleteConfirm"),icon:u(B.ExclamationCircleOutlined),onOk(){return l(this,null,function*(){(yield k({ids:a.value})).code===0&&(r.value=!1,yield n())})},onCancel(){}})})}function S(){return l(this,null,function*(){yield n()})}return(i,f)=>{const D=q("a-button");return _(),G("div",null,[u(o(T),{onRegister:o(p)},{tableTitle:m(()=>[r.value?(_(),g(o(U),{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:x},{default:m(()=>[y(w(o(t)("common.delete")),1)]),_:1})):R("",!0)]),toolbar:m(()=>[u(D,{type:"primary",onClick:e},{default:m(()=>[y(w(o(t)("sys.memberRank.addMemberRank")),1)]),_:1})]),bodyCell:m(({column:M,record:b})=>[M.key==="action"?(_(),g(o(E),{key:0,actions:[{icon:"clarity:note-edit-line",onClick:s.bind(null,b)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:o(t)("common.deleteConfirm"),placement:"left",confirm:v.bind(null,b)}}]},null,8,["actions"])):R("",!0)]),_:1},8,["onRegister"]),u(L,{onRegister:o(c),onSuccess:S},null,8,["onRegister"])])}}});export{he as default};
