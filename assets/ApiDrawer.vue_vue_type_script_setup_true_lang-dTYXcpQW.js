var I=Object.defineProperty;var g=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var b=(a,e,t)=>e in a?I(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,y=(a,e)=>{for(var t in e||(e={}))x.call(e,t)&&b(a,t,e[t]);if(g)for(var t of g(e))M.call(e,t)&&b(a,t,e[t]);return a};var h=(a,e,t)=>new Promise((l,n)=>{var d=r=>{try{p(t.next(r))}catch(c){n(c)}},m=r=>{try{p(t.throw(r))}catch(c){n(c)}},p=r=>r.done?l(r.value):Promise.resolve(r.value).then(d,m);p((t=t.apply(a,e)).next())});import{b as E,c as A}from"./useForm-BzgFlAKs.js";import{b as D,as as R,a as u,v as _}from"./entry/index-BPNJPE-d-1727367563404.js";import{G as q}from"./antd-CnnxMtH0.js";import{l as S,d as N,f as L,c as C,u as i,S as G,U as H,X as U,k as B,a0 as F}from"./vue-D0RdBkD6.js";import{a as O,B as k}from"./index-CaWdKrxn.js";const{t:s}=D(),Y=[{title:s("sys.apis.path"),dataIndex:"path",width:50},{title:s("sys.apis.group"),dataIndex:"group",width:20},{title:s("sys.apis.serviceName"),dataIndex:"serviceName",width:20},{title:s("sys.apis.description"),dataIndex:"trans",width:80},{title:s("sys.apis.method"),dataIndex:"method",width:20},{title:s("common.required"),dataIndex:"isRequired",width:10,customRender:({record:a})=>{let e="";return a.isRequired===!0?e=s("common.yes"):e=s("common.no"),S(q,{color:a.isRequired===!0?"green":"red"},()=>e)}},{title:s("common.createTime"),dataIndex:"createdAt",width:30,customRender:({record:a})=>R(a.createdAt)}],Z=[{field:"path",label:s("sys.apis.path"),component:"Input",colProps:{span:8},rules:[{max:200}]},{field:"serviceName",label:s("sys.apis.serviceName"),component:"Input",colProps:{span:8},rules:[{max:20}]},{field:"group",label:s("sys.apis.group"),component:"Input",colProps:{span:8},rules:[{max:80}]},{field:"description",label:s("sys.apis.description"),component:"Input",colProps:{span:8},rules:[{max:100}]},{field:"method",label:s("sys.apis.method"),component:"Select",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}]},colProps:{span:8}}],V=[{field:"id",label:"ID",component:"Input",show:!1},{field:"path",label:s("sys.apis.path"),required:!0,component:"Input",rules:[{max:200}]},{field:"serviceName",label:s("sys.apis.serviceName"),component:"Input",helpMessage:s("sys.apis.serviceNameHelpMessage"),rules:[{max:20}]},{field:"group",label:s("sys.apis.group"),required:!0,component:"Input",rules:[{max:80}]},{field:"description",label:s("sys.apis.description"),required:!0,component:"Input",rules:[{max:100}]},{field:"method",label:s("sys.apis.method"),required:!0,component:"Select",componentProps:{options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"DELETE",value:"DELETE"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}]}},{field:"isRequired",label:s("common.required"),component:"RadioButtonGroup",defaultValue:!1,componentProps:{options:[{label:s("common.yes"),value:!0},{label:s("common.no"),value:!1}]},helpMessage:s("sys.apis.isRequiredHelpMessage")}],ee=(a,e="notice")=>u.post({url:"/sys-api/api/list",params:a},{errorMessageMode:e}),$=(a,e="notice")=>u.post({url:"/sys-api/api/create",params:a},{errorMessageMode:e,successMessageMode:e}),j=(a,e="notice")=>u.post({url:"/sys-api/api/update",params:a},{errorMessageMode:e,successMessageMode:e}),se=(a,e="notice")=>u.post({url:"/sys-api/api/delete",params:a},{errorMessageMode:e,successMessageMode:e}),ae=N({__name:"ApiDrawer",emits:["success","register"],setup(a,{emit:e}){const t=e,l=L(!0),{t:n}=_.useI18n(),[d,{resetFields:m,setFieldsValue:p,validate:r}]=E({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:V,showActionButtonGroup:!1}),[c,{setDrawerProps:f,closeDrawer:v}]=O(o=>h(this,null,function*(){yield m(),f({confirmLoading:!1}),l.value=!!(o!=null&&o.isUpdate),i(l)&&(yield p(y({},o.record)))})),T=C(()=>i(l)?n("sys.apis.editApi"):n("sys.apis.addApi"));function w(){return h(this,null,function*(){const o=yield r();f({confirmLoading:!0}),o.id=i(l)?Number(o.id):0,(i(l)?yield j(o):yield $(o)).code===0&&(v(),t("success")),f({confirmLoading:!1})})}return(o,P)=>(G(),H(i(k),F(o.$attrs,{onRegister:i(c),showFooter:"",title:T.value,width:"35%",onOk:w}),{default:U(()=>[B(i(A),{onRegister:i(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ae as _,Y as c,se as d,ee as g,Z as s};
