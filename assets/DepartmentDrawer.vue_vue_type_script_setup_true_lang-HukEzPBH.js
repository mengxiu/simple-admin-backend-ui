var _=Object.defineProperty;var b=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var g=(e,s,a)=>s in e?_(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,I=(e,s)=>{for(var a in s||(s={}))v.call(s,a)&&g(e,a,s[a]);if(b)for(var a of b(s))F.call(s,a)&&g(e,a,s[a]);return e};var f=(e,s,a)=>new Promise((r,m)=>{var p=o=>{try{i(a.next(o))}catch(d){m(d)}},u=o=>{try{i(a.throw(o))}catch(d){m(d)}},i=o=>o.done?r(o.value):Promise.resolve(o.value).then(p,u);i((a=a.apply(e,s)).next())});import{b as k,c as P}from"./useForm-BzgFlAKs.js";import{b as L,as as R,bk as h,v as T}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as w,g as A,c as C}from"./department-BDAUZ4eN.js";import{l as B,d as U,f as V,c as E,u as l,S as q,U as N,X as G,k as M,a0 as $}from"./vue-D0RdBkD6.js";import{Q as j}from"./antd-CnnxMtH0.js";import{a as z,B as H}from"./index-CaWdKrxn.js";const{t}=L(),ee=[{title:t("sys.department.name"),dataIndex:"trans",width:60},{title:t("sys.department.leader"),dataIndex:"leader",width:60},{title:t("common.status"),dataIndex:"status",width:20,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),B(j,{checked:e.status===1,checkedChildren:t("common.on"),unCheckedChildren:t("common.off"),loading:e.pendingStatus,onChange(s,a){e.pendingStatus=!0;const r=s?1:0;w({id:e.id,status:r}).then(()=>{e.status=r}).finally(()=>{e.pendingStatus=!1})}}))},{title:t("common.createTime"),dataIndex:"createdAt",width:50,customRender:({record:e})=>R(e.createdAt)}],te=[{field:"name",label:t("sys.department.name"),component:"Input",colProps:{span:8},rules:[{max:50}]},{field:"leader",label:t("sys.department.leader"),component:"Input",colProps:{span:8},rules:[{max:20}]}],O=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:t("sys.department.name"),component:"Input",required:!0,rules:[{min:1,max:200}]},{field:"parentId",label:t("sys.department.parentId"),component:"ApiTreeSelect",required:!0,componentProps:{api:A,params:{page:1,pageSize:1e3},resultField:"data.data",labelField:"trans",valueField:"id",defaultValue:{id:h.DEFAULT,parentId:-1,label:t("sys.department.firstLevelDepartment"),value:h.DEFAULT}},defaultValue:h.DEFAULT},{field:"ancestors",label:t("sys.department.ancestors"),component:"Input",rules:[{max:200}],componentProps:{disabled:!0},helpMessage:t("sys.department.ancestorsHelpMessage")},{field:"leader",label:t("sys.department.leader"),component:"Input",rules:[{max:20}]},{field:"phone",label:t("sys.department.phone"),component:"Input",rules:[{max:18}]},{field:"email",label:t("sys.department.email"),component:"Input",rules:[{max:70}]},{field:"sort",label:t("sys.department.sort"),component:"InputNumber",required:!0,rules:[{type:"number",max:1e4}]},{field:"remark",label:t("common.remark"),component:"Input",rules:[{max:200}]},{field:"status",label:t("sys.department.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:t("common.on"),value:1},{label:t("common.off"),value:0}]}}],ae=U({__name:"DepartmentDrawer",emits:["success","register"],setup(e,{emit:s}){const a=s,r=V(!0),{t:m}=T.useI18n(),[p,{resetFields:u,setFieldsValue:i,validate:o}]=k({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:O,showActionButtonGroup:!1}),[d,{setDrawerProps:c,closeDrawer:y}]=z(n=>f(this,null,function*(){yield u(),c({confirmLoading:!1}),r.value=!!(n!=null&&n.isUpdate),l(r)&&(yield i(I({},n.record)))})),D=E(()=>l(r)?m("sys.department.editDepartment"):m("sys.department.addDepartment"));function x(){return f(this,null,function*(){const n=yield o();c({confirmLoading:!0}),n.id=l(r)?Number(n.id):0,(l(r)?yield w(n):yield C(n)).code===0&&(y(),a("success")),c({confirmLoading:!1})})}return(n,S)=>(q(),N(l(H),$(n.$attrs,{onRegister:l(d),showFooter:"",title:D.value,width:"35%",onOk:x}),{default:G(()=>[M(l(P),{onRegister:l(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ae as _,ee as c,te as s};
