import{p as R,f as k,_ as z}from"./entry/index-BPNJPE-d-1727367563404.js";import{a as C}from"./useContentViewHeight-b3bBSljJ.js";import{S as E}from"./antd-CnnxMtH0.js";import{d as W,f as o,c as B,u as a,o as M,b as $,S as b,a8 as F,k as N,X as V,ab as D,a9 as p,aa as g}from"./vue-D0RdBkD6.js";import{u as I}from"./useWindowSizeFn-C71HDhub.js";const P=["src"],T=W({__name:"index",props:{frameSrc:R.string.def("")},emits:["message"],setup(h,{expose:_,emit:v}){const w=v,s=o(!0),x=o(50),r=o(window.innerHeight),n=o(),{headerHeightRef:y}=C(),{prefixCls:c}=k("iframe-page");I(l,{wait:150,immediate:!0});const m=B(()=>({height:`${a(r)}px`}));function l(){const e=a(n);if(!e)return;const t=y.value;x.value=t,r.value=window.innerHeight-t;const i=document.documentElement.clientHeight-t;e.style.height=`${i}px`}function H(){s.value=!1,l()}const f=e=>{w("message",e.data)},S=(e,t,i)=>{var u;const d=a(n);d&&((u=d.contentWindow)==null||u.postMessage(e,t,i))},L=()=>{var t;s.value=!0;const e=n.value;e&&((t=e.contentWindow)==null||t.location.reload(),s.value=!1)};return M(()=>{window.addEventListener("message",f)}),$(()=>{window.removeEventListener("message",f)}),_({postMessage:S,reload:L}),(e,t)=>(b(),F("div",{class:p(a(c)),style:g(m.value)},[N(a(E),{spinning:s.value,size:"large",style:g(m.value)},{default:V(()=>[D("iframe",{src:h.frameSrc,class:p(`${a(c)}__main`),ref_key:"frameRef",ref:n,onLoad:H},null,42,P)]),_:1},8,["spinning","style"])],6))}}),G=z(T,[["__scopeId","data-v-4898d6d7"]]);export{G as default};
