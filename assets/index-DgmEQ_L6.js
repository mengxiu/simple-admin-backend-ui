var v=(o,t,n)=>new Promise((a,r)=>{var s=e=>{try{c(n.next(e))}catch(i){r(i)}},u=e=>{try{c(n.throw(e))}catch(i){r(i)}},c=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,u);c((n=n.apply(o,t)).next())});import{an as z,b as F,w as A,f as B,am as S}from"./entry/index-BPNJPE-d-1727367563404.js";import{f as p,u as l,d as g,K as _,c as y,h as C,S as w,U as b,X as m,G as k,ac as N,a0 as h,r as T,V as $,y as D,J as O,g as P,af as R,ad as V,Y as j,_ as E,$ as U,k as q,ae as G}from"./vue-D0RdBkD6.js";import{B as J}from"./antd-CnnxMtH0.js";import{i as K}from"./isDeepEqual-DIYWxe5x.js";function L(o){const t=p(o),n=p(!1);let a;function r(){a&&window.clearInterval(a)}function s(){n.value=!1,r(),a=null}function u(){l(n)||a||(n.value=!0,a=setInterval(()=>{l(t)===1?(s(),t.value=o):t.value-=1},1e3))}function c(){t.value=o,s()}function e(){c(),u()}return z(()=>{c()}),{start:u,reset:c,restart:e,clear:r,stop:s,currentCount:t,isStart:n}}const I=g({__name:"CountButton",props:{value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},setup(o){const t=o,n=_(),a=p(!1),{currentCount:r,isStart:s,start:u,reset:c}=L(t.count),{t:e}=F(),i=y(()=>l(s)?e("component.countdown.sendText",[l(r)]):e("component.countdown.normalText"));C(()=>{t.value===void 0&&c()});function f(){return v(this,null,function*(){const{beforeStartFunc:d}=t;if(d&&A(d)){a.value=!0;try{(yield d())&&u()}finally{a.value=!1}}else u()})}return(d,x)=>(w(),b(l(J),h(l(n),{disabled:l(s),onClick:f,loading:a.value}),{default:m(()=>[k(N(i.value),1)]),_:1},16,["disabled","loading"]))}});function X(o,t="value",n="change",a){const r=P(),s=r==null?void 0:r.emit,u=T({value:o[t]}),c=$(u),e=f=>{u.value=f};return C(()=>{u.value=o[t]}),[y({get(){return u.value},set(f){K(f,c.value)||(u.value=f,D(()=>{s==null||s(n,f,...O(l(a))||[])}))}}),e,c]}const Y=g({inheritAttrs:!1,__name:"CountdownInput",props:{value:{type:String},size:{type:String,validator:o=>["default","large","small"].includes(o)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},setup(o){const t=o,n=_(),{prefixCls:a}=B("countdown-input"),[r]=X(t);return(s,u)=>{const c=G("a-input");return w(),b(c,h(l(n),{class:l(a),size:t.size,value:l(r)}),R({addonAfter:m(()=>[q(I,{size:t.size,count:t.count,value:l(r),beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[V(Object.keys(s.$slots).filter(e=>e!=="addonAfter"),e=>({name:e,fn:m(i=>[j(s.$slots,e,E(U(i||{})))])}))]),1040,["class","size","value"])}}}),tt=S(Y);S(I);export{tt as C,X as u};
