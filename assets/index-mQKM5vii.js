var p=(f,o,n)=>new Promise((r,s)=>{var m=e=>{try{a(n.next(e))}catch(i){s(i)}},u=e=>{try{a(n.throw(e))}catch(i){s(i)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(m,u);a((n=n.apply(f,o)).next())});import{u as y,_ as x}from"./useTable-C1zHh-l8.js";import{a as k}from"./useForm-BzgFlAKs.js";import{v as M,bm as D,bp as S}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as T}from"./index-CaWdKrxn.js";import{c as R,M as v}from"./MenuDrawer-B4CfqPZZ.js";import{P as I}from"./index-CU2O72Tc.js";import{d as N,ae as U,S as b,U as g,X as c,k as d,u as t,G as V,ac as B,Z as L}from"./vue-D0RdBkD6.js";import"./index-LAC3wiAG.js";import"./antd-CnnxMtH0.js";import"./isBoolean-Dou3jA6I.js";import"./index-BoOgNZ_b.js";import"./useWindowSizeFn-C71HDhub.js";import"./isDeepEqual-DIYWxe5x.js";import"./isNumber-j3SIk7av.js";import"./index-DDNUB-iW.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CyX9qi6i.js";import"./sortable.esm-BEDva30o.js";import"./index-DgmEQ_L6.js";import"./copyTextToClipboard-DU2l1C12.js";import"./useSortable-s3dauH_p.js";import"./index-BLETcaq3.js";import"./index-CBEN6l7B.js";import"./useContentViewHeight-b3bBSljJ.js";const se=N({name:"MenuManagement",__name:"index",setup(f){const{t:o}=M.useI18n(),[n,{openDrawer:r}]=T(),[s,{reload:m}]=y({title:o("sys.menu.menuList"),api:D,columns:R,formConfig:{labelWidth:120},isTreeTable:!0,pagination:!1,striped:!1,useSearchForm:!1,showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:80,title:o("common.action"),dataIndex:"action",fixed:void 0}});function u(){r(!0,{isUpdate:!1})}function a(l){r(!0,{record:l,isUpdate:!0})}function e(l){return p(this,null,function*(){(yield S({id:l.id},"notice")).code===0&&(yield m())})}function i(){return p(this,null,function*(){yield m()})}return(l,C)=>{const h=U("a-button");return b(),g(t(I),null,{default:c(()=>[d(t(x),{onRegister:t(s)},{toolbar:c(()=>[d(h,{type:"primary",onClick:u},{default:c(()=>[V(B(t(o)("sys.menu.addMenu")),1)]),_:1})]),bodyCell:c(({column:w,record:_})=>[w.key==="action"?(b(),g(t(k),{key:0,actions:[{icon:"clarity:note-edit-line",onClick:a.bind(null,_)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:t(o)("common.deleteConfirm"),placement:"left",confirm:e.bind(null,_)}}]},null,8,["actions"])):L("",!0)]),_:1},8,["onRegister"]),d(v,{onRegister:t(n),onSuccess:i},null,8,["onRegister"])]),_:1})}}});export{se as default};
