var g=Object.defineProperty;var h=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(a,t,e)=>t in a?g(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,w=(a,t)=>{for(var e in t||(t={}))_.call(t,e)&&I(a,e,t[e]);if(h)for(var e of h(t))U.call(t,e)&&I(a,e,t[e]);return a};var f=(a,t,e)=>new Promise((i,u)=>{var m=o=>{try{l(e.next(o))}catch(c){u(c)}},d=o=>{try{l(e.throw(o))}catch(c){u(c)}},l=o=>o.done?i(o.value):Promise.resolve(o.value).then(m,d);l((e=e.apply(a,t)).next())});import{b as q,c as R}from"./useForm-BzgFlAKs.js";import{b as D,as as P,v as S}from"./entry/index-BPNJPE-d-1727367563404.js";import{a as L,B as k}from"./index-CaWdKrxn.js";import{u as B,c as F}from"./oauthProvider-C_-oTPvK.js";import{d as O,f as T,c as A,u as n,S as C,U as N,X as V,k as $,a0 as j}from"./vue-D0RdBkD6.js";const{t:r}=D(),K=[{title:r("common.name"),dataIndex:"name",width:50},{title:r("sys.oauth.clientId"),dataIndex:"clientId",width:50},{title:r("common.createTime"),dataIndex:"createdAt",width:50,customRender:({record:a})=>P(a.createdAt)}],G=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:r("common.name"),required:!0,component:"Input",rules:[{max:30}]},{field:"clientId",label:r("sys.oauth.clientId"),required:!0,component:"Input",rules:[{max:80}]},{field:"clientSecret",label:r("sys.oauth.clientSecret"),required:!0,component:"Input",rules:[{max:100}]},{field:"redirectUrl",label:r("sys.oauth.redirectURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"scopes",label:r("sys.oauth.scope"),required:!0,component:"Input",rules:[{max:100}]},{field:"authUrl",label:r("sys.oauth.authURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"tokenUrl",label:r("sys.oauth.tokenURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"infoUrl",label:r("sys.oauth.infoURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"authStyle",label:r("sys.oauth.authStyle"),required:!0,component:"Select",componentProps:{options:[{label:r("sys.oauth.params"),value:1},{label:r("sys.oauth.header"),value:2}]}}],M=O({__name:"OauthDrawer",emits:["success","register"],setup(a,{emit:t}){const e=t,i=T(!0),{t:u}=S.useI18n(),[m,{resetFields:d,setFieldsValue:l,validate:o}]=q({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:G,showActionButtonGroup:!1}),[c,{setDrawerProps:p,closeDrawer:b}]=L(s=>f(this,null,function*(){yield d(),p({confirmLoading:!1}),i.value=!!(s!=null&&s.isUpdate),n(i)&&(yield l(w({},s.record)))})),y=A(()=>n(i)?u("sys.oauth.editProvider"):u("sys.oauth.addProvider"));function v(){return f(this,null,function*(){const s=yield o();p({confirmLoading:!0}),s.id=n(i)?Number(s.id):0,(n(i)?yield B(s):yield F(s)).code===0&&(b(),e("success")),p({confirmLoading:!1})})}return(s,x)=>(C(),N(n(k),j(s.$attrs,{onRegister:n(c),showFooter:"",title:y.value,width:"35%",onOk:v}),{default:V(()=>[$(n(R),{onRegister:n(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{M as _,K as c};
