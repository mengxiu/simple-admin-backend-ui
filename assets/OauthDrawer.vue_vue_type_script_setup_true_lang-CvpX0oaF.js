var M=Object.defineProperty;var g=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var I=(t,e,r)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v=(t,e)=>{for(var r in e||(e={}))x.call(e,r)&&I(t,r,e[r]);if(g)for(var r of g(e))U.call(e,r)&&I(t,r,e[r]);return t};var f=(t,e,r)=>new Promise((i,u)=>{var m=o=>{try{l(r.next(o))}catch(c){u(c)}},p=o=>{try{l(r.throw(o))}catch(c){u(c)}},l=o=>o.done?i(o.value):Promise.resolve(o.value).then(m,p);l((r=r.apply(t,e)).next())});import{b as P,c as q}from"./useForm-BzgFlAKs.js";import{b as R,as as D,a as d,v as L}from"./entry/index-BPNJPE-d-1727367563404.js";import{a as S,B as k}from"./index-CaWdKrxn.js";import{d as O,f as B,c as F,u as n,S as T,U as A,X as C,k as N,a0 as V}from"./vue-D0RdBkD6.js";const{t:s}=R(),J=[{title:s("common.name"),dataIndex:"name",width:50},{title:s("sys.oauth.clientId"),dataIndex:"clientId",width:50},{title:s("common.createTime"),dataIndex:"createdAt",width:50,customRender:({record:t})=>D(t.createdAt)}],$=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:s("common.name"),required:!0,component:"Input",rules:[{max:30}]},{field:"clientId",label:s("sys.oauth.clientId"),required:!0,component:"Input",rules:[{max:80}]},{field:"clientSecret",label:s("sys.oauth.clientSecret"),required:!0,component:"Input",rules:[{max:100}]},{field:"redirectUrl",label:s("sys.oauth.redirectURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"scopes",label:s("sys.oauth.scope"),required:!0,component:"Input",rules:[{max:50}]},{field:"authUrl",label:s("sys.oauth.authURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"tokenUrl",label:s("sys.oauth.tokenURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"infoUrl",label:s("sys.oauth.infoURL"),required:!0,component:"Input",rules:[{max:300}]},{field:"authStyle",label:s("sys.oauth.authStyle"),required:!0,component:"Select",componentProps:{options:[{label:s("sys.oauth.params"),value:1},{label:s("sys.oauth.header"),value:2}]}}],K=(t,e="notice")=>d.post({url:"/mms-api/oauth_provider/list",params:t},{errorMessageMode:e}),j=(t,e="notice")=>d.post({url:"/mms-api/oauth_provider/create",params:t},{errorMessageMode:e,successMessageMode:e}),G=(t,e="notice")=>d.post({url:"/mms-api/oauth_provider/update",params:t},{errorMessageMode:e,successMessageMode:e}),Q=(t,e="notice")=>d.post({url:"/mms-api/oauth_provider/delete",params:t},{errorMessageMode:e,successMessageMode:e}),Y=O({__name:"OauthDrawer",emits:["success","register"],setup(t,{emit:e}){const r=e,i=B(!0),{t:u}=L.useI18n(),[m,{resetFields:p,setFieldsValue:l,validate:o}]=P({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:$,showActionButtonGroup:!1}),[c,{setDrawerProps:h,closeDrawer:w}]=S(a=>f(this,null,function*(){yield p(),h({confirmLoading:!1}),i.value=!!(a!=null&&a.isUpdate),n(i)&&(yield l(v({},a.record)))})),b=F(()=>n(i)?u("sys.oauth.editProvider"):u("sys.oauth.addProvider"));function y(){return f(this,null,function*(){const a=yield o();h({confirmLoading:!0}),a.id=n(i)?Number(a.id):0,(n(i)?yield G(a):yield j(a)).code===0&&(w(),r("success")),h({confirmLoading:!1})})}return(a,_)=>(T(),A(n(k),V(a.$attrs,{onRegister:n(c),showFooter:"",title:b.value,width:"35%",onOk:y}),{default:C(()=>[N(n(q),{onRegister:n(m)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{Y as _,J as c,Q as d,K as g};
