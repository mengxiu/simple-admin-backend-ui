var Wae=Object.defineProperty,jae=Object.defineProperties;var Zae=Object.getOwnPropertyDescriptors;var w$=Object.getOwnPropertySymbols;var Nte=Object.prototype.hasOwnProperty,Bte=Object.prototype.propertyIsEnumerable;var Rte=(u,o,i)=>o in u?Wae(u,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[o]=i,ie=(u,o)=>{for(var i in o||(o={}))Nte.call(o,i)&&Rte(u,i,o[i]);if(w$)for(var i of w$(o))Bte.call(o,i)&&Rte(u,i,o[i]);return u},Ot=(u,o)=>jae(u,Zae(o));var sy=(u,o)=>{var i={};for(var l in u)Nte.call(u,l)&&o.indexOf(l)<0&&(i[l]=u[l]);if(u!=null&&w$)for(var l of w$(u))o.indexOf(l)<0&&Bte.call(u,l)&&(i[l]=u[l]);return i};var jo=(u,o,i)=>new Promise((l,d)=>{var m=x=>{try{v(i.next(x))}catch(k){d(k)}},p=x=>{try{v(i.throw(x))}catch(k){d(k)}},v=x=>x.done?l(x.value):Promise.resolve(x.value).then(m,p);v((i=i.apply(u,o)).next())});import{d as ui,f as mo,c as ms,u as Ge,h as hM,w as sr,S as No,U as cr,X as Yo,a8 as ai,ad as gf,F as ff,G as ja,ac as Za,a0 as Ui,H as T2,ae as zl,af as i0,Y as Gc,_ as a0,$ as vy,k as Xn,ab as pf,o as Ty,Z as ol,e as Ioe,p as qae,J as KD,a9 as o0,y as yy,r as cJ,I as lQ,K as cQ,aa as F6,s as RX,j as Loe,l as Gae,L as Kae,Q as Yae,m as $oe,A as Hoe,i as Xae,an as Jae,g as Qae,al as ele,b as tle}from"./vue-D0RdBkD6.js";import{u as m0,C as nle}from"./index-DgmEQ_L6.js";import{aB as ole,p as Wn,aF as wy,aP as O2,w as vr,aD as gy,b as Qc,B as fh,f as _2,aS as sle,m as YD,aT as Fte,a8 as rle,_ as D2,aU as Ite,ar as uJ,aV as Voe,G as ile,A as Hg,am as I6,D as uQ,i as zoe,a3 as ale,c as lle,X as cle,aI as Lte,aW as py,aX as ule,x as dle,y as fle,aq as hle,aY as X1,ap as mle,aZ as gle,aR as q$,d as Uoe,aQ as ple,a_ as ble}from"./entry/index-BPNJPE-d-1727367563404.js";import{g as Kc}from"./object-BY_VTB7H.js";import{a5 as s6,a6 as zg,a7 as L6,a8 as vle,a9 as Woe,aa as joe,ab as Zoe,ac as mM,ad as dQ,ae as yle,h as yd,af as wle,T as qoe,n as fQ,ag as xle,O as Cle,ah as Sle,G as NX,c as kle,a as Goe,ai as r6,aj as Ele,d as x$,ak as Ale,al as Tle,M as Ole,I as M2,s as _le,am as Dle,an as Mle,_ as Koe,ao as Ple,ap as Rle,Q as Nle,Z as Yoe,aq as Ble,ar as Fle,p as i6,U as a6,R as Ile}from"./antd-CnnxMtH0.js";import{b as Lle,_ as $le,i as BX,p as dJ}from"./index-DDNUB-iW.js";import{u as Hle,c as Vle}from"./copyTextToClipboard-DU2l1C12.js";import{u as Xoe,B as Joe,a as Qoe,b as $te}from"./index-BoOgNZ_b.js";import{c as zle,S as Ule,B as ese,a as Wle,i as J1,b as jle}from"./index-LAC3wiAG.js";import{i as ly}from"./isBoolean-Dou3jA6I.js";import{a as Zle,u as qle}from"./useSortable-s3dauH_p.js";import{f as Gle,C as Kle}from"./index-BLETcaq3.js";import{S as Yle}from"./index-CBEN6l7B.js";import{i as hQ}from"./isNumber-j3SIk7av.js";import{o as Xle}from"./onMountedOrActivated-CyX9qi6i.js";var l6=function(){return l6=Object.assign||function(u){for(var o,i=1,l=arguments.length;i<l;i++){o=arguments[i];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(u[d]=o[d])}return u},l6.apply(this,arguments)};function c6(){return ole(Jle,arguments)}function Jle(u,o,i){var l;return l6(l6({},u),(l={},l[o]=i,l))}function Qle(u){return"slot"in u}function ece(u){return!Qle(u)}const tce=ui({__name:"ApiRadioGroup",props:{api:{type:Function,default:null},params:{type:[Object,String],default:()=>({})},value:{type:[String,Number,Boolean]},isBtn:{type:[Boolean],default:!1},numberToString:Wn.bool,resultField:Wn.string.def(""),labelField:Wn.string.def("label"),valueField:Wn.string.def("value"),immediate:Wn.bool.def(!0)},emits:["options-change","change"],setup(u,{emit:o}){const i=u,l=o,d=mo([]),m=mo(!1),p=mo(!0),v=mo([]),x=O2(),[k]=m0(i,"value","change",v),T=ms(()=>{const{labelField:z,valueField:Y,numberToString:J}=i;return Ge(d).reduce((q,ae)=>{if(ae){const Z=ae[Y];q.push(ie({label:ae[z],value:J?`${Z}`:Z},wy(ae,[z,Y])))}return q},[])});hM(()=>{i.immediate&&M()}),sr(()=>i.params,()=>{!Ge(p)&&M()},{deep:!0});function M(){return jo(this,null,function*(){const z=i.api;if(!(!z||!vr(z))){d.value=[];try{m.value=!0;const Y=yield z(i.params);if(Array.isArray(Y)){d.value=Y,N();return}i.resultField&&(d.value=Kc(Y,i.resultField)||[]),N()}catch(Y){}finally{m.value=!1}}})}function N(){l("options-change",Ge(T))}function I(...z){v.value=z}return(z,Y)=>{const J=zl("RadioButton"),q=zl("RadioGroup");return No(),cr(q,Ui(Ge(x),{value:Ge(k),"onUpdate:value":Y[0]||(Y[0]=ae=>T2(k)?k.value=ae:null),"button-style":"solid"}),{default:Yo(()=>[(No(!0),ai(ff,null,gf(T.value,ae=>(No(),ai(ff,{key:`${ae.value}`},[i.isBtn?(No(),cr(J,{key:0,value:ae.value,disabled:ae.disabled,onClick:Z=>I(ae)},{default:Yo(()=>[ja(Za(ae.label),1)]),_:2},1032,["value","disabled","onClick"])):(No(),cr(Ge(s6),{key:1,value:ae.value,disabled:ae.disabled,onClick:Z=>I(ae)},{default:Yo(()=>[ja(Za(ae.label),1)]),_:2},1032,["value","disabled","onClick"]))],64))),128))]),_:1},16,["value"])}}}),nce=ui({__name:"RadioButtonGroup",props:{value:{type:[String,Number,Boolean]},options:{type:Array,default:()=>[]}},emits:["change"],setup(u,{emit:o}){const i=s6.Group,l=s6.Button,d=u,m=o,p=O2(),v=mo([]),[x]=m0(d,"value","change",v),k=ms(()=>{const{options:M}=d;return!M||(M==null?void 0:M.length)===0?[]:M.some(I=>gy(I))?M.map(I=>({label:I,value:I})):M});function T(...M){v.value=M,m("change",...M)}return(M,N)=>(No(),cr(Ge(i),Ui(Ge(p),{value:Ge(x),"onUpdate:value":N[0]||(N[0]=I=>T2(x)?x.value=I:null),"button-style":"solid"}),{default:Yo(()=>[(No(!0),ai(ff,null,gf(k.value,I=>(No(),cr(Ge(l),{key:`${I.value}`,value:I.value,disabled:I.disabled,onClick:z=>T(I)},{default:Yo(()=>[ja(Za(I.label),1)]),_:2},1032,["value","disabled","onClick"]))),128))]),_:1},16,["value"]))}}),oce=ui({__name:"ApiSelect",props:{value:{type:[Array,Object,String,Number]},numberToString:Wn.bool,api:{type:Function,default:null},params:Wn.any.def({}),resultField:Wn.string.def(""),labelField:Wn.string.def("label"),valueField:Wn.string.def("value"),immediate:Wn.bool.def(!0),alwaysLoad:Wn.bool.def(!1),options:{type:Array,default:[]},isSearch:Wn.bool.def(!1),searchField:Wn.string,optionFilterProp:Wn.string.def("label")},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=u,l=o,d=mo([]),m=mo(!1),p=mo(!1),v=mo([]),{t:x}=Qc(),k=i.isSearch,T=mo(),M=mo(),N=mo();k?(T.value=J,M.value=!1):(M.value=!0,N.value=i.optionFilterProp);const[I]=m0(i,"value","change",v),z=ms(()=>{const{labelField:ce,valueField:_e,numberToString:De}=i;let G=Ge(d).reduce((qe,Re)=>{if(Re){const $e=Kc(Re,_e);qe.push(Ot(ie({},wy(Re,[ce,_e])),{label:Kc(Re,ce),value:De?`${$e}`:$e}))}return qe},[]);return G.length>0?G:i.options});sr(()=>I.value,ce=>{l("update:value",ce)}),sr(()=>i.params,()=>{k==!1&&!Ge(p)&&Y()},{deep:!0,immediate:i.immediate});function Y(){return jo(this,null,function*(){const ce=i.api;if(!(!ce||!vr(ce)||m.value)){d.value=[];try{m.value=!0;const _e=yield ce(i.params);if(p.value=!0,Array.isArray(_e)){d.value=_e,ae();return}i.resultField&&(d.value=Kc(_e,i.resultField)||[]),ae()}catch(_e){p.value=!1}finally{m.value=!1}}})}function J(ce){return jo(this,null,function*(){const _e=i.api;if(!(!_e||!vr(_e)||m.value)){d.value=[];try{m.value=!0;let De={};i.searchField!=null&&(De[i.searchField]=ce),De.page=1,De.pageSize=10;const G=yield _e(De);if(Array.isArray(G)){d.value=G,ae();return}i.resultField&&(d.value=Kc(G,i.resultField)||[]),ae()}catch(De){}finally{m.value=!1}}})}function q(ce){return jo(this,null,function*(){ce&&!k&&(i.alwaysLoad?yield Y():!i.immediate&&!Ge(p)&&(yield Y()))})}function ae(){l("options-change",Ge(z))}function Z(ce,..._e){v.value=_e,l("change",_e)}return(ce,_e)=>(No(),cr(Ge(L6),Ui({onDropdownVisibleChange:q},ce.$attrs,{onChange:Z,options:z.value,value:Ge(I),"onUpdate:value":_e[0]||(_e[0]=De=>T2(I)?I.value=De:null),"show-search":!0,onSearch:T.value,"show-arrow":!1,"filter-option":M.value,"option-filter-prop":N.value}),i0({_:2},[gf(Object.keys(ce.$slots),De=>({name:De,fn:Yo(G=>[Gc(ce.$slots,De,a0(vy(G||{})))])})),m.value?{name:"suffixIcon",fn:Yo(()=>[Xn(Ge(zg),{spin:""})]),key:"0"}:void 0,m.value?{name:"notFoundContent",fn:Yo(()=>[pf("span",null,[Xn(Ge(zg),{spin:"",class:"mr-1"}),ja(" "+Za(Ge(x)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["options","value","onSearch","filter-option","option-filter-prop"]))}}),sce=ui({__name:"ApiTree",props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:Wn.string.def(""),afterFetch:{type:Function}},emits:["options-change","change"],setup(u,{emit:o}){const i=u,l=o,d=O2(),m=mo([]),p=mo(!1),v=mo(!1),x=ms(()=>ie(ie({},i.api?{treeData:Ge(m)}:{}),d));function k(...M){l("change",...M)}sr(()=>i.params,()=>{!Ge(p)&&T()},{deep:!0}),sr(()=>i.immediate,M=>{M&&!p.value&&T()}),Ty(()=>{i.immediate&&T()});function T(){return jo(this,null,function*(){const{api:M,afterFetch:N}=i;if(!M||!vr(M))return;v.value=!0,m.value=[];let I;try{I=yield M(i.params)}catch(z){}N&&vr(N)&&(I=N(I)),v.value=!1,I&&(fh(I)||(I=Kc(I,i.resultField)),m.value=I||[],p.value=!0,l("options-change",m.value))})}return(M,N)=>(No(),cr(Ge(vle),Ui(x.value,{onChange:k}),i0({_:2},[gf(Object.keys(M.$slots),I=>({name:I,fn:Yo(z=>[Gc(M.$slots,I,a0(vy(z||{})))])}))]),1040))}}),rce=ui({__name:"ApiTreeSelect",props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:Wn.string.def(""),labelField:Wn.string.def(""),valueField:Wn.string.def(""),idKeyField:Wn.string.def("id"),parentKeyField:Wn.string.def("parentId"),childrenKeyField:Wn.string.def("children"),multiple:Wn.bool.def(!1),defaultValue:{type:Object}},emits:["options-change","change"],setup(u,{emit:o}){const i=u,l=o,d=O2(),m=mo([]),p=mo(!1),v=mo(!1),x=ms(()=>ie(ie({},i.api?{treeData:Ge(m)}:{}),d));function k(...M){l("change",...M)}sr(()=>i.params,()=>{!Ge(p)&&T()},{deep:!0}),sr(()=>i.immediate,M=>{M&&!p.value&&T()}),Ty(()=>{i.immediate&&T()});function T(){return jo(this,null,function*(){const{api:M}=i;if(!M||!vr(M))return;v.value=!0,m.value=[];let N;try{N=yield M(i.params)}catch(I){}v.value=!1,N&&(fh(N)||(N=Kc(N,i.resultField)),m.value=Lle(N,{idKeyField:i.idKeyField,parentKeyField:i.parentKeyField,childrenKeyField:i.childrenKeyField,valueField:i.valueField,labelField:i.labelField,defaultValue:i.defaultValue}),l("options-change",m.value),p.value=!0)})}return(M,N)=>(No(),cr(Ge(Woe),Ui(x.value,{onChange:k,onDropdownVisibleChange:T,multiple:M.$props.multiple}),i0({_:2},[gf(Object.keys(M.$slots),I=>({name:I,fn:Yo(z=>[Gc(M.$slots,I,a0(vy(z||{})))])})),v.value?{name:"suffixIcon",fn:Yo(()=>[Xn(Ge(zg),{spin:""})]),key:"0"}:void 0]),1040,["multiple"]))}}),ice=ui({name:"ApiCascader",__name:"ApiCascader",props:{value:{type:Array},api:{type:Function,default:null},numberToString:Wn.bool,resultField:Wn.string.def(""),labelField:Wn.string.def("label"),valueField:Wn.string.def("value"),childrenField:Wn.string.def("children"),apiParamKey:Wn.string.def("parentCode"),immediate:Wn.bool.def(!0),initFetchParams:{type:Object,default:()=>({})},isLeaf:{type:Function,default:null},displayRenderArray:{type:Array}},emits:["change","defaultChange"],setup(u,{emit:o}){const i=u,l=o,d=mo([]),m=mo([]),p=mo(!1),v=mo([]),x=mo(!0),{t:k}=Qc(),[T]=m0(i,"value","change",v);sr(d,J=>{const q=M(J);m.value=q},{deep:!0});function M(J){const{labelField:q,valueField:ae,numberToString:Z,childrenField:ce,isLeaf:_e}=i;return J.reduce((De,G)=>{if(G){const qe=G[ae],Re=Ot(ie({},wy(G,[q,ae])),{label:G[q],value:Z?`${qe}`:qe,isLeaf:_e&&typeof _e=="function"?_e(G):!1}),$e=Reflect.get(G,ce);$e&&Reflect.set(Re,ce,M($e)),De.push(Re)}return De},[])}function N(){return jo(this,null,function*(){const J=i.api;if(!(!J||!vr(J))){d.value=[],p.value=!0;try{const q=yield J(i.initFetchParams);if(Array.isArray(q)){d.value=q;return}i.resultField&&(d.value=Kc(q,i.resultField)||[])}catch(q){}finally{p.value=!1}}})}const I=J=>jo(this,null,function*(){const q=J[J.length-1];q.loading=!0;const ae=i.api;if(!(!ae||!vr(ae)))try{const Z=yield ae({[i.apiParamKey]:Reflect.get(q,"value")});if(Array.isArray(Z)){const ce=M(Z);q.children=ce;return}if(i.resultField){const ce=M(Kc(Z,i.resultField)||[]);q.children=ce}}catch(Z){}finally{q.loading=!1}});hM(()=>{i.immediate&&N()}),sr(()=>i.initFetchParams,()=>{!Ge(x)&&N()},{deep:!0});function z(J,q){v.value=q,l("defaultChange",J,q)}const Y=({labels:J,selectedOptions:q})=>Ge(v).length===(q==null?void 0:q.length)?J.join(" / "):i.displayRenderArray?i.displayRenderArray.join(" / "):"";return(J,q)=>(No(),cr(Ge(joe),{value:Ge(T),"onUpdate:value":q[0]||(q[0]=ae=>T2(T)?T.value=ae:null),options:m.value,"load-data":I,"change-on-select":"",onChange:z,displayRender:Y},i0({_:2},[p.value?{name:"suffixIcon",fn:Yo(()=>[Xn(Ge(zg),{spin:""})]),key:"0"}:void 0,p.value?{name:"notFoundContent",fn:Yo(()=>[pf("span",null,[Xn(Ge(zg),{spin:"",class:"mr-1"}),ja(" "+Za(Ge(k)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1032,["value","options"]))}}),ace=ui({__name:"ApiTransfer",props:{value:{type:Array},api:{type:Function,default:null},params:{type:Object},dataSource:{type:Array},immediate:Wn.bool.def(!0),afterFetch:{type:Function},resultField:Wn.string.def(""),labelField:Wn.string.def("title"),valueField:Wn.string.def("key"),showSearch:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},filterOption:{type:Function},selectedKeys:{type:Array},showSelectAll:{type:Boolean,default:!1},targetKeys:{type:Array}},emits:["options-change","change"],setup(u,{emit:o}){const i=u,l=o,d=O2(),m=mo([]),p=mo([]),v=ms(()=>ie(ie({},i.api?{}:{dataSource:Ge(m)}),d)),x=ms(()=>{const{labelField:I,valueField:z}=i;return Ge(m).reduce((Y,J)=>(J&&Y.push(Ot(ie({},wy(J,[I,z])),{title:J[I],key:J[z]})),Y),[])}),k=ms(()=>Array.isArray(i.value)?i.value:Array.isArray(i.targetKeys)?i.targetKeys:[]);function T(I,z,Y){p.value=I,l("change",I)}Ty(()=>{i.immediate&&M()}),sr(()=>i.params,()=>{M()},{deep:!0});function M(){return jo(this,null,function*(){const I=i.api;if(!I||!vr(I)){Array.isArray(i.dataSource)&&(m.value=i.dataSource);return}m.value=[];try{const z=yield I(i.params);if(Array.isArray(z)){m.value=z,N();return}i.resultField&&(m.value=Kc(z,i.resultField)||[]),N()}catch(z){}})}function N(){l("options-change",Ge(x))}return(I,z)=>(No(),cr(Ge(Zoe),Ui({"data-source":x.value,"filter-option":u.filterOption,render:Y=>Y.title,showSelectAll:u.showSelectAll,selectedKeys:u.selectedKeys,targetKeys:k.value,showSearch:u.showSearch,disabled:u.disabled,onChange:T},v.value),null,16,["data-source","filter-option","render","showSelectAll","selectedKeys","targetKeys","showSearch","disabled"]))}}),lce=ui({__name:"SimpleTimePicker",props:{timeMode:Wn.string.def("datetime"),valueFormat:Wn.string.def("unixmilli"),value:[Number]},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=u,l=o,d=mo([]),m=mo(),p=mo(),v=mo();v.value=i.timeMode==="datetime";const[x]=m0(i,"value","change",d);sr(()=>x.value,T=>{T!==null&&T!=null&&(i.valueFormat==="unixmilli"?(m.value=yd(T),p.value=yd(T)):(m.value=yd.unix(T),p.value=yd.unix(T))),l("update:value",T),l("change",T)});function k(T){var M;if(T!==null){let N=yd();m.value!=null&&(N=(M=m.value)==null?void 0:M.clone()),i.timeMode==="datetime"?p.value!=null&&(N=N.hour(p.value.hour()).minute(p.value.minute()).second(p.value.second()).millisecond(0)):N=N.hour(0).minute(0).second(0).millisecond(0),i.valueFormat==="unixmilli"?x.value=N.valueOf():x.value=N.unix()}else x.value=void 0}return(T,M)=>(No(),ai(ff,null,[Xn(Ge(mM),{"allow-clear":"",value:m.value,"onUpdate:value":M[0]||(M[0]=N=>m.value=N),onChange:k},null,8,["value"]),Xn(Ge(yle),null,{default:Yo(()=>[v.value?(No(),cr(Ge(dQ),{key:0,class:"ml-4",value:p.value,"onUpdate:value":M[1]||(M[1]=N=>p.value=N),onChange:k,"allow-clear":""},null,8,["value"])):ol("",!0)]),_:1})],64))}}),cce=ui({__name:"SimpleRangePicker",props:{timeMode:Wn.string.def("datetime"),valueFormat:Wn.string.def("unixmilli"),value:{type:Array,default:void 0}},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=u,l=o,d=mo([]),m=mo(),p=mo();p.value=i.timeMode==="datetime";const[v]=m0(i,"value","change",d);sr(()=>v.value,k=>{k!==null&&k!=null&&(i.valueFormat==="unixmilli"?m.value=[yd(k[0]),yd(k[1])]:m.value=[yd.unix(k[0]),yd.unix(k[1])]),l("update:value",k),l("change",k)});function x(k){var T,M;if(k!==null){let N=[yd(),yd()];m.value!=null&&(N[0]=(T=m.value[0])==null?void 0:T.clone(),N[1]=(M=m.value[1])==null?void 0:M.clone()),i.timeMode!=="datetime"&&(N[0]=N[0].hour(0).minute(0).second(0).millisecond(0),N[1]=N[1].hour(0).minute(0).second(0).millisecond(0)),i.valueFormat==="unixmilli"?v.value=[N[0].valueOf(),N[1].valueOf()]:v.value=[N[0].unix(),N[1].unix()]}else v.value=[0,0]}return(k,T)=>(No(),cr(Ge(wle),{"allow-clear":"",value:m.value,"onUpdate:value":T[0]||(T[0]=M=>m.value=M),onChange:x,"show-time":p.value},null,8,["value","show-time"]))}}),uce=ui({__name:"ApiMultipleSelect",props:{value:{type:[Array,Object,String,Number]},numberToString:Wn.bool,api:{type:Function,default:null},params:{type:Object,default:()=>({})},resultField:Wn.string.def(""),labelField:Wn.string.def("label"),valueField:Wn.string.def("value"),immediate:Wn.bool.def(!0),alwaysLoad:Wn.bool.def(!1),isSearch:Wn.bool.def(!1),searchField:Wn.string,optionFilterProp:Wn.string.def("label")},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=u,l=o,d=mo([]),m=mo(!1),p=mo(!0),v=mo([]),{t:x}=Qc(),k=i.isSearch,T=mo(),M=mo(),N=mo();k?(T.value=J,M.value=!1):(M.value=!0,N.value=i.optionFilterProp);const[I]=m0(i,"value","change",v),z=ms(()=>{const{labelField:ce,valueField:_e,numberToString:De}=i;return Ge(d).reduce((G,qe)=>{if(qe){const Re=qe[_e];G.push(Ot(ie({},wy(qe,[ce,_e])),{label:qe[ce],value:De?`${Re}`:Re}))}return G},[])});hM(()=>{i.immediate&&!i.alwaysLoad&&Y()}),sr(()=>I.value,ce=>{l("update:value",ce)}),sr(()=>i.params,()=>{!Ge(p)&&Y()},{deep:!0});function Y(){return jo(this,null,function*(){const ce=i.api;if(!(!ce||!vr(ce))){d.value=[];try{m.value=!0;const _e=yield ce(i.params);if(Array.isArray(_e)){d.value=_e,ae();return}i.resultField&&(d.value=Kc(_e,i.resultField)||[]),ae()}catch(_e){}finally{m.value=!1}}})}function J(ce){return jo(this,null,function*(){const _e=i.api;if(!(!_e||!vr(_e)||m.value)){d.value=[];try{m.value=!0;let De={};i.searchField!=null&&(De[i.searchField]=ce),De.page=1,De.pageSize=10;const G=yield _e(De);if(Array.isArray(G)){d.value=G,ae();return}i.resultField&&(d.value=Kc(G,i.resultField)||[]),ae()}catch(De){}finally{m.value=!1}}})}function q(ce){return jo(this,null,function*(){ce&&(i.alwaysLoad?yield Y():!i.immediate&&Ge(p)&&(yield Y(),p.value=!1))})}function ae(){l("options-change",Ge(z))}function Z(ce,..._e){v.value=_e,l("change",_e)}return(ce,_e)=>(No(),cr(Ge(L6),Ui({onDropdownVisibleChange:q},ce.$attrs,{onChange:Z,options:z.value,mode:"multiple",value:Ge(I),"onUpdate:value":_e[0]||(_e[0]=De=>T2(I)?I.value=De:null),"filter-option":M.value,onSearch:T.value,"option-filter-prop":N.value}),i0({_:2},[gf(Object.keys(ce.$slots),De=>({name:De,fn:Yo(G=>[Gc(ce.$slots,De,a0(vy(G||{})))])})),m.value?{name:"suffixIcon",fn:Yo(()=>[Xn(Ge(zg),{spin:""})]),key:"0"}:void 0,m.value?{name:"notFoundContent",fn:Yo(()=>[pf("span",null,[Xn(Ge(zg),{spin:"",class:"mr-1"}),ja(" "+Za(Ge(x)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["options","value","filter-option","onSearch","option-filter-prop"]))}}),dce=ui({__name:"DictionarySelect",props:{dictionaryName:Wn.string.def(""),value:[String,Number],cache:Wn.bool.def(!0)},emits:["options-change","change","update:value"],setup(u,{emit:o}){const i=u,l=o,d=mo(!1),m=mo([]),p=O2(),{t:v}=Qc(),x=mo(),[k]=m0(i,"value","change",m);Ty(()=>{T()}),sr(()=>k.value,N=>{l("update:value",N)});function T(){return jo(this,null,function*(){d.value=!0;const I=yield Hle().getDictionary(i.dictionaryName,i.cache);I!=null&&(x.value=I.data.filter(z=>z.status==1)),d.value=!1})}function M(N,...I){m.value=I,l("change",I)}return(N,I)=>(No(),cr(Ge(L6),Ui(Ge(p),{onChange:M,options:x.value,value:Ge(k),"onUpdate:value":I[0]||(I[0]=z=>T2(k)?k.value=z:null)}),i0({_:2},[gf(Object.keys(N.$slots),z=>({name:z,fn:Yo(Y=>[Gc(N.$slots,z,a0(vy(Y||{})))])})),d.value?{name:"suffixIcon",fn:Yo(()=>[Xn(Ge(zg),{spin:""})]),key:"0"}:void 0,d.value?{name:"notFoundContent",fn:Yo(()=>[pf("span",null,[Xn(Ge(zg),{spin:"",class:"mr-1"}),ja(" "+Za(Ge(v)("component.form.apiSelectNotFound")),1)])]),key:"1"}:void 0]),1040,["options","value"]))}}),tse={listType:{type:String,default:"picture-card"},helpText:{type:String,default:""},maxSize:{type:Number,default:2},maxNumber:{type:Number,default:1},accept:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},uploadParams:{type:Object,default:()=>({})},api:{type:Function,default:null,required:!0},name:{type:String,default:"file"},filename:{type:String,default:null},fileListOpenDrag:{type:Boolean,default:!0},fileListDragOptions:{type:Object,default:()=>({})},resultField:{type:String,default:"data.url"},calculateMd5:{type:Boolean,default:!1}},nse=Ot(ie({value:{type:Array,default:()=>[]}},tse),{showPreviewNumber:{type:Boolean,default:!0},emptyHidePreview:{type:Boolean,default:!1}}),fce={value:{type:Array,default:()=>[]}},hce={columns:{type:Array,default:null},actionColumn:{type:Object,default:null},dataSource:{type:Array,default:null},openDrag:{type:Boolean,default:!1},dragOptions:{type:Object,default:()=>({})}},{t:FX}=Qc();function ose({acceptRef:u,helpTextRef:o,maxNumberRef:i,maxSizeRef:l}){const d=ms(()=>{const v=Ge(u);return v&&v.length>0?v:[]}),m=ms(()=>Ge(d).map(v=>v.indexOf("/")>0||v.startsWith(".")?v:`.${v}`).join(",")),p=ms(()=>{const v=Ge(o);if(v)return v;const x=[],k=Ge(u);k.length>0&&x.push(FX("component.upload.accept",[k.join(",")]));const T=Ge(l);T&&x.push(FX("component.upload.maxSize",[T]));const M=Ge(i);return M&&M!==1/0&&x.push(FX("component.upload.maxNumber",[M])),x.join("，")});return{getAccept:d,getStringAccept:m,getHelpText:p}}var $l=(u=>(u.DONE="done",u.SUCCESS="success",u.ERROR="error",u.UPLOADING="uploading",u))($l||{});function mce(u){return mQ(u.name)}function mQ(u){return/\.(jpg|jpeg|png|gif|webp)$/i.test(u)}function gce(u){return new Promise((o,i)=>{const l=new FileReader;l.readAsDataURL(u),l.onload=()=>o({result:l.result,file:u}),l.onerror=d=>i(d)})}const sse=Symbol("basic-table");function B0e(u){qae(sse,u)}function pce(){return Ioe(sse)}const{table:bce}=zle,{pageSizeOptions:vce,defaultPageSize:yce,fetchSetting:wce,defaultSize:xce,defaultSortFn:Cce,defaultFilterFn:Sce}=bce,F0e="key",I0e=vce,L0e=yce,$0e=wce,H0e=xce,V0e=Cce,z0e=Sce,U0e="center",W0e="INDEX",kce="ACTION",rse=ui({__name:"TableAction",props:{actions:{type:Array,default:null},dropDownActions:{type:Array,default:null},divider:Wn.bool.def(!0),outside:Wn.bool,stopButtonPropagation:Wn.bool.def(!1)},setup(u){const o=u,{prefixCls:i}=_2("basic-table-action");let l={};o.outside||(l=pce());const{hasPermission:d}=sle();function m(M){const N=M.ifShow;let I=!0;return ly(N)&&(I=N),vr(N)&&(I=N(M)),I}const p=ms(()=>(KD(o.actions)||[]).filter(M=>d(M.auth)&&m(M)).map(M=>{const{popConfirm:N}=M;return Ot(ie(ie({getPopupContainer:()=>{var I;return(I=Ge(l==null?void 0:l.wrapRef))!=null?I:document.body},type:"link",size:"small"},M),N||{}),{onConfirm:N==null?void 0:N.confirm,onCancel:N==null?void 0:N.cancel,enable:!!N})})),v=ms(()=>{const M=(KD(o.dropDownActions)||[]).filter(N=>d(N.auth)&&m(N));return M.map((N,I)=>{const{label:z,popConfirm:Y}=N;return Ot(ie(ie({},N),Y),{onConfirm:Y==null?void 0:Y.confirm,onCancel:Y==null?void 0:Y.cancel,text:z,divider:I<M.length-1?o.divider:!1})})}),x=ms(()=>{var I,z;const N=(((I=l==null?void 0:l.getColumns)==null?void 0:I.call(l))||[]).find(Y=>Y.flag===kce);return(z=N==null?void 0:N.align)!=null?z:"left"});function k(M){return ie({getPopupContainer:()=>{var N;return(N=Ge(l==null?void 0:l.wrapRef))!=null?N:document.body},placement:"bottom"},gy(M)?{title:M}:M)}function T(M){if(!o.stopButtonPropagation)return;M.composedPath().find(z=>{var Y;return((Y=z.tagName)==null?void 0:Y.toUpperCase())==="BUTTON"})&&M.stopPropagation()}return(M,N)=>{const I=zl("a-button");return No(),ai("div",{class:o0([Ge(i),x.value]),onClick:T},[(No(!0),ai(ff,null,gf(p.value,(z,Y)=>(No(),ai(ff,{key:`${Y}-${z.label}`},[z.tooltip?(No(),cr(Ge(qoe),Ui({key:0,ref_for:!0},k(z.tooltip)),{default:Yo(()=>[Xn(Ge(Fte),Ui({ref_for:!0},z),{default:Yo(()=>[z.icon?(No(),cr(YD,{key:0,icon:z.icon,class:o0({"mr-1":!!z.label})},null,8,["icon","class"])):ol("",!0),z.label?(No(),ai(ff,{key:1},[ja(Za(z.label),1)],64)):ol("",!0)]),_:2},1040)]),_:2},1040)):(No(),cr(Ge(Fte),Ui({key:1,ref_for:!0},z),{default:Yo(()=>[z.icon?(No(),cr(YD,{key:0,icon:z.icon,class:o0({"mr-1":!!z.label})},null,8,["icon","class"])):ol("",!0),z.label?(No(),ai(ff,{key:1},[ja(Za(z.label),1)],64)):ol("",!0)]),_:2},1040)),u.divider&&Y<p.value.length-1?(No(),cr(Ge(fQ),{key:2,type:"vertical",class:"action-divider"})):ol("",!0)],64))),128)),u.dropDownActions&&v.value.length>0?(No(),cr(Ge(rle),{key:0,trigger:["hover"],dropMenuList:v.value,popconfirm:""},{default:Yo(()=>[Gc(M.$slots,"more"),M.$slots.more?ol("",!0):(No(),cr(I,{key:0,type:"link",size:"small"},{default:Yo(()=>[Xn(Ge(xle),{class:"icon-more"})]),_:1}))]),_:3},8,["dropMenuList"])):ol("",!0)],2)}}}),Ece=ui({components:{Image:Cle},props:{fileUrl:Wn.string.def(""),fileName:Wn.string.def("")}}),Ace={class:"thumb"};function Tce(u,o,i,l,d,m){const p=zl("Image");return No(),ai("span",Ace,[u.fileUrl?(No(),cr(p,{key:0,src:u.fileUrl,width:104},null,8,["src"])):ol("",!0)])}const ise=D2(Ece,[["render",Tce]]),{t:Cc}=Qc();function Oce(){return[{dataIndex:"thumbUrl",title:Cc("component.upload.legend"),width:100,customRender:({record:u})=>{const{thumbUrl:o}=u||{};return o&&Xn(ise,{fileUrl:o},null)}},{dataIndex:"name",title:Cc("component.upload.fileName"),align:"left",customRender:({text:u,record:o})=>{const{percent:i,status:l}=o||{};let d="normal";return l===$l.ERROR?d="exception":l===$l.UPLOADING?d="active":l===$l.SUCCESS&&(d="success"),Xn("div",null,[Xn("p",{class:"truncate mb-1 max-w-[280px]",title:u},[u]),Xn(Sle,{percent:i,size:"small",status:d},null)])}},{dataIndex:"size",title:Cc("component.upload.fileSize"),width:100,customRender:({text:u=0})=>u&&(u/1024).toFixed(2)+"KB"},{dataIndex:"status",title:Cc("component.upload.fileStatue"),width:100,customRender:({text:u})=>u===$l.SUCCESS?Xn(NX,{color:"green"},{default:()=>Cc("component.upload.uploadSuccess")}):u===$l.ERROR?Xn(NX,{color:"red"},{default:()=>Cc("component.upload.uploadError")}):u===$l.UPLOADING?Xn(NX,{color:"blue"},{default:()=>Cc("component.upload.uploading")}):u||Cc("component.upload.pending")}]}function _ce(u,o){return{width:120,title:Cc("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:i})=>{const l=[{label:Cc("component.upload.del"),color:"error",onClick:u.bind(null,i)},{label:Cc("fms.file.copyURL"),color:"error",onClick:o.bind(null,i)}];return Xn(rse,{actions:l,outside:!0},null)}}}function Dce(){return[{dataIndex:"url",title:Cc("component.upload.legend"),width:100,customRender:({record:u})=>{const{url:o}=u||{};return mQ(o)&&Xn(ise,{fileUrl:o},null)}},{dataIndex:"name",title:Cc("component.upload.fileName"),align:"left"}]}function Mce({handleRemove:u,handleDownload:o}){return{width:160,title:Cc("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:i})=>{const l=[{label:Cc("component.upload.del"),color:"error",onClick:u.bind(null,i)},{label:Cc("component.upload.download"),onClick:o.bind(null,i)}];return Xn(rse,{actions:l,outside:!0},null)}}}const fJ=[];for(let u=0;u<=15;u++)fJ[u]=u.toString(16);function Pce(){let u="";for(let o=1;o<=36;o++)o===9||o===14||o===19||o===24?u+="-":o===15?u+=4:o===20?u+=fJ[Math.random()*4|8]:u+=fJ[Math.random()*16|0];return u.replace(/-/g,"")}let Hte=0;function Vte(u=""){const o=Date.now(),i=Math.floor(Math.random()*1e9);return Hte++,u+"_"+i+Hte+String(o)}const ase=ui({name:"FileList",props:hce,setup(u,{emit:o}){const i=Xoe(),l=mo();return sr(()=>u.dataSource,()=>{yy(()=>{var d;(d=i==null?void 0:i.redoModalHeight)==null||d.call(i)})}),u.openDrag&&Ty(()=>Zle(l,Ot(ie({},u.dragOptions),{onEnd:({oldIndex:d,newIndex:m})=>{if(d===m)return;const{onAfterEnd:p}=u.dragOptions;if(Ite(d)&&Ite(m)){const v=[...u.dataSource],[x]=v.splice(d,1);v.splice(m,0,x),yy(()=>{o("update:dataSource",v),vr(p)&&p(v)})}}})).initSortable()),()=>{const{columns:d,actionColumn:m,dataSource:p}=u;let v;return v=m?[...d,m]:[...d],Xn("div",{class:"overflow-x-auto",style:"min-height: 400px"},[Xn("table",{class:"file-table"},[Xn("colgroup",null,[v.map(x=>{const{width:k=0,dataIndex:T}=x,M={width:`${k}px`,minWidth:`${k}px`};return Xn("col",{style:k?M:{},key:T},null)})]),Xn("thead",null,[Xn("tr",{class:"file-table-tr"},[v.map(x=>{const{title:k="",align:T="center",dataIndex:M}=x;return Xn("th",{class:["file-table-th",T],key:M},[k])})])]),Xn("tbody",{ref:l},[p.map((x={},k)=>Xn("tr",{class:"file-table-tr",key:`${k+x.name||""}`},[v.map(T=>{const{dataIndex:M="",customRender:N,align:I="center"}=T,z=N&&vr(N);return Xn("td",{class:["file-table-td break-all",I],key:M},[z?N==null?void 0:N({text:x[M],record:x}):x[M]])})]))])])])}}});var lse={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(u,o){(function(l,d){u.exports=d()})(kle,function(){return function(){var i={686:function(m,p,v){v.d(p,{default:function(){return Be}});var x=v(279),k=v.n(x),T=v(370),M=v.n(T),N=v(817),I=v.n(N);function z(Ue){try{return document.execCommand(Ue)}catch(yt){return!1}}var Y=function(yt){var Ie=I()(yt);return z("cut"),Ie},J=Y;function q(Ue){var yt=document.documentElement.getAttribute("dir")==="rtl",Ie=document.createElement("textarea");Ie.style.fontSize="12pt",Ie.style.border="0",Ie.style.padding="0",Ie.style.margin="0",Ie.style.position="absolute",Ie.style[yt?"right":"left"]="-9999px";var wt=window.pageYOffset||document.documentElement.scrollTop;return Ie.style.top="".concat(wt,"px"),Ie.setAttribute("readonly",""),Ie.value=Ue,Ie}var ae=function(yt,Ie){var wt=q(yt);Ie.container.appendChild(wt);var ue=I()(wt);return z("copy"),wt.remove(),ue},Z=function(yt){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},wt="";return typeof yt=="string"?wt=ae(yt,Ie):yt instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(yt==null?void 0:yt.type)?wt=ae(yt.value,Ie):(wt=I()(yt),z("copy")),wt},ce=Z;function _e(Ue){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_e=function(Ie){return typeof Ie}:_e=function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},_e(Ue)}var De=function(){var yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ie=yt.action,wt=Ie===void 0?"copy":Ie,ue=yt.container,je=yt.target,V=yt.text;if(wt!=="copy"&&wt!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(je!==void 0)if(je&&_e(je)==="object"&&je.nodeType===1){if(wt==="copy"&&je.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(wt==="cut"&&(je.hasAttribute("readonly")||je.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(V)return ce(V,{container:ue});if(je)return wt==="cut"?J(je):ce(je,{container:ue})},G=De;function qe(Ue){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(Ie){return typeof Ie}:qe=function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},qe(Ue)}function Re(Ue,yt){if(!(Ue instanceof yt))throw new TypeError("Cannot call a class as a function")}function $e(Ue,yt){for(var Ie=0;Ie<yt.length;Ie++){var wt=yt[Ie];wt.enumerable=wt.enumerable||!1,wt.configurable=!0,"value"in wt&&(wt.writable=!0),Object.defineProperty(Ue,wt.key,wt)}}function le(Ue,yt,Ie){return yt&&$e(Ue.prototype,yt),Ie&&$e(Ue,Ie),Ue}function Ee(Ue,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");Ue.prototype=Object.create(yt&&yt.prototype,{constructor:{value:Ue,writable:!0,configurable:!0}}),yt&&ft(Ue,yt)}function ft(Ue,yt){return ft=Object.setPrototypeOf||function(wt,ue){return wt.__proto__=ue,wt},ft(Ue,yt)}function ne(Ue){var yt=Ye();return function(){var wt=me(Ue),ue;if(yt){var je=me(this).constructor;ue=Reflect.construct(wt,arguments,je)}else ue=wt.apply(this,arguments);return ge(this,ue)}}function ge(Ue,yt){return yt&&(qe(yt)==="object"||typeof yt=="function")?yt:O(Ue)}function O(Ue){if(Ue===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ue}function Ye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Ue){return!1}}function me(Ue){return me=Object.setPrototypeOf?Object.getPrototypeOf:function(Ie){return Ie.__proto__||Object.getPrototypeOf(Ie)},me(Ue)}function lt(Ue,yt){var Ie="data-clipboard-".concat(Ue);if(yt.hasAttribute(Ie))return yt.getAttribute(Ie)}var qt=function(Ue){Ee(Ie,Ue);var yt=ne(Ie);function Ie(wt,ue){var je;return Re(this,Ie),je=yt.call(this),je.resolveOptions(ue),je.listenClick(wt),je}return le(Ie,[{key:"resolveOptions",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof ue.action=="function"?ue.action:this.defaultAction,this.target=typeof ue.target=="function"?ue.target:this.defaultTarget,this.text=typeof ue.text=="function"?ue.text:this.defaultText,this.container=qe(ue.container)==="object"?ue.container:document.body}},{key:"listenClick",value:function(ue){var je=this;this.listener=M()(ue,"click",function(V){return je.onClick(V)})}},{key:"onClick",value:function(ue){var je=ue.delegateTarget||ue.currentTarget,V=this.action(je)||"copy",kn=G({action:V,container:this.container,target:this.target(je),text:this.text(je)});this.emit(kn?"success":"error",{action:V,text:kn,trigger:je,clearSelection:function(){je&&je.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(ue){return lt("action",ue)}},{key:"defaultTarget",value:function(ue){var je=lt("target",ue);if(je)return document.querySelector(je)}},{key:"defaultText",value:function(ue){return lt("text",ue)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(ue){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return ce(ue,je)}},{key:"cut",value:function(ue){return J(ue)}},{key:"isSupported",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],je=typeof ue=="string"?[ue]:ue,V=!!document.queryCommandSupported;return je.forEach(function(kn){V=V&&!!document.queryCommandSupported(kn)}),V}}]),Ie}(k()),Be=qt},828:function(m){var p=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var v=Element.prototype;v.matches=v.matchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||v.webkitMatchesSelector}function x(k,T){for(;k&&k.nodeType!==p;){if(typeof k.matches=="function"&&k.matches(T))return k;k=k.parentNode}}m.exports=x},438:function(m,p,v){var x=v(828);function k(N,I,z,Y,J){var q=M.apply(this,arguments);return N.addEventListener(z,q,J),{destroy:function(){N.removeEventListener(z,q,J)}}}function T(N,I,z,Y,J){return typeof N.addEventListener=="function"?k.apply(null,arguments):typeof z=="function"?k.bind(null,document).apply(null,arguments):(typeof N=="string"&&(N=document.querySelectorAll(N)),Array.prototype.map.call(N,function(q){return k(q,I,z,Y,J)}))}function M(N,I,z,Y){return function(J){J.delegateTarget=x(J.target,I),J.delegateTarget&&Y.call(N,J)}}m.exports=T},879:function(m,p){p.node=function(v){return v!==void 0&&v instanceof HTMLElement&&v.nodeType===1},p.nodeList=function(v){var x=Object.prototype.toString.call(v);return v!==void 0&&(x==="[object NodeList]"||x==="[object HTMLCollection]")&&"length"in v&&(v.length===0||p.node(v[0]))},p.string=function(v){return typeof v=="string"||v instanceof String},p.fn=function(v){var x=Object.prototype.toString.call(v);return x==="[object Function]"}},370:function(m,p,v){var x=v(879),k=v(438);function T(z,Y,J){if(!z&&!Y&&!J)throw new Error("Missing required arguments");if(!x.string(Y))throw new TypeError("Second argument must be a String");if(!x.fn(J))throw new TypeError("Third argument must be a Function");if(x.node(z))return M(z,Y,J);if(x.nodeList(z))return N(z,Y,J);if(x.string(z))return I(z,Y,J);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function M(z,Y,J){return z.addEventListener(Y,J),{destroy:function(){z.removeEventListener(Y,J)}}}function N(z,Y,J){return Array.prototype.forEach.call(z,function(q){q.addEventListener(Y,J)}),{destroy:function(){Array.prototype.forEach.call(z,function(q){q.removeEventListener(Y,J)})}}}function I(z,Y,J){return k(document.body,z,Y,J)}m.exports=T},817:function(m){function p(v){var x;if(v.nodeName==="SELECT")v.focus(),x=v.value;else if(v.nodeName==="INPUT"||v.nodeName==="TEXTAREA"){var k=v.hasAttribute("readonly");k||v.setAttribute("readonly",""),v.select(),v.setSelectionRange(0,v.value.length),k||v.removeAttribute("readonly"),x=v.value}else{v.hasAttribute("contenteditable")&&v.focus();var T=window.getSelection(),M=document.createRange();M.selectNodeContents(v),T.removeAllRanges(),T.addRange(M),x=T.toString()}return x}m.exports=p},279:function(m){function p(){}p.prototype={on:function(v,x,k){var T=this.e||(this.e={});return(T[v]||(T[v]=[])).push({fn:x,ctx:k}),this},once:function(v,x,k){var T=this;function M(){T.off(v,M),x.apply(k,arguments)}return M._=x,this.on(v,M,k)},emit:function(v){var x=[].slice.call(arguments,1),k=((this.e||(this.e={}))[v]||[]).slice(),T=0,M=k.length;for(T;T<M;T++)k[T].fn.apply(k[T].ctx,x);return this},off:function(v,x){var k=this.e||(this.e={}),T=k[v],M=[];if(T&&x)for(var N=0,I=T.length;N<I;N++)T[N].fn!==x&&T[N].fn._!==x&&M.push(T[N]);return M.length?k[v]=M:delete k[v],this}},m.exports=p,m.exports.TinyEmitter=p}},l={};function d(m){if(l[m])return l[m].exports;var p=l[m]={exports:{}};return i[m](p,p.exports,d),p.exports}return function(){d.n=function(m){var p=m&&m.__esModule?function(){return m.default}:function(){return m};return d.d(p,{a:p}),p}}(),function(){d.d=function(m,p){for(var v in p)d.o(p,v)&&!d.o(m,v)&&Object.defineProperty(m,v,{enumerable:!0,get:p[v]})}}(),function(){d.o=function(m,p){return Object.prototype.hasOwnProperty.call(m,p)}}(),d(686)}().default})})(lse);var Rce=lse.exports;const Nce=Goe(Rce),Bce=u=>({toClipboard(o,i){return new Promise((l,d)=>{const m=document.createElement("button"),p=new Nce(m,{text:()=>o,action:()=>"copy",container:i!==void 0?i:document.body});p.on("success",v=>{p.destroy(),l(v)}),p.on("error",v=>{p.destroy(),d(v)}),document.body.appendChild(m),m.click(),document.body.removeChild(m)})}}),Fce=ui({components:{BasicModal:Joe,Upload:r6,Alert:Ele,FileList:ase},props:Ot(ie({},tse),{previewFileList:{type:Array,default:()=>[]}}),emits:["change","register","delete"],setup(u,{emit:o}){const i=cJ({fileList:[]}),{toClipboard:l}=Bce(),{createErrorModal:d}=uJ(),m=mo(!1),p=mo([]),{accept:v,helpText:x,maxNumber:k,maxSize:T}=lQ(u);let M={};const{t:N}=Qc(),[I,{closeModal:z}]=Qoe(),{getStringAccept:Y,getHelpText:J}=ose({acceptRef:v,helpTextRef:x,maxNumberRef:k,maxSizeRef:T}),{createMessage:q}=uJ(),ae=ms(()=>p.value.length>0&&!p.value.every(Ee=>Ee.status===$l.SUCCESS)),Z=ms(()=>{const Ee=p.value.some(ft=>ft.status===$l.SUCCESS);return{disabled:m.value||p.value.length===0||!Ee}}),ce=ms(()=>{const Ee=p.value.some(ft=>ft.status===$l.ERROR);return m.value?N("component.upload.uploading"):N(Ee?"component.upload.reUploadFailed":"component.upload.startUpload")});function _e(Ee){return jo(this,null,function*(){const{size:ft,name:ne}=Ee,{maxSize:ge}=u;if(ge&&Ee.size/1024/1024>=ge)return q.error(N("component.upload.maxSizeMultiple",[ge])),!1;const O={uuid:Pce(),file:Ee,size:ft,name:ne,percent:0,type:ne.split(".").pop()};return u.calculateMd5&&(x$.loading(N("fms.file.preprocessing")),Gle(Ee,{chunkSize:3*1024*1024}).then(Ye=>{x$.success(N("common.successful")),M[Ee.name]=Ye}).catch(()=>{x$.error(N("common.failed"))})),mce(Ee)?gce(Ee).then(({result:Ye})=>{p.value=[...Ge(p),ie({thumbUrl:Ye},O)]}):p.value=[...Ge(p),O],!1})}function De(Ee){const ft=p.value.findIndex(ne=>ne.uuid===Ee.uuid);ft!==-1&&p.value.splice(ft,1),o("delete",Ee)}function G(Ee){return jo(this,null,function*(){var ft,ne;try{Ee.responseData!==void 0?(yield l((ft=Ee.responseData)==null?void 0:ft.data.url),q.success(N("fms.file.copyURLSuccess"))):d({title:N("common.failed"),content:N("fms.file.uploadFirst")})}catch(ge){d({title:N("fms.file.copyURLFailed"),content:(ne=Ee.responseData)==null?void 0:ne.data.url})}})}function qe(Ee){return jo(this,null,function*(){var ne;const{api:ft}=u;if(!ft||!vr(ft))return Voe();try{Ee.status=$l.UPLOADING;const ge=u.uploadParams;ge.md5=Ee.md5;const{data:O}=yield(ne=u.api)==null?void 0:ne.call(u,{data:ie({},ge||{}),file:Ee.file,name:u.name,filename:u.filename},function(me){const lt=me.loaded/me.total*100|0;Ee.percent=lt});return O.code!==0?(x$.error(O.msg),Ee.status=$l.ERROR,{success:!1,error:O.msg}):(Ee.status=$l.SUCCESS,Ee.responseData=O,{success:!0,error:null})}catch(ge){return Ee.status=$l.ERROR,{success:!1,error:ge}}})}function Re(){return jo(this,null,function*(){var ft;const{maxNumber:Ee}=u;if(p.value.length+((ft=u.previewFileList)==null?void 0:ft.length)>Ee)return q.warning(N("component.upload.maxNumber",[Ee]));try{m.value=!0;const ne=p.value.filter(Ye=>Ye.status!==$l.SUCCESS)||[];for(let Ye=0;Ye<ne.length;Ye++)ne[Ye].md5=M[ne[Ye].name];const ge=yield Promise.all(ne.map(Ye=>qe(Ye)));m.value=!1;const O=ge.filter(Ye=>!Ye.success);if(O.length>0)throw O}catch(ne){throw m.value=!1,ne}})}function $e(){const{maxNumber:Ee}=u;if(p.value.length>Ee)return q.warning(N("component.upload.maxNumber",[Ee]));if(m.value)return q.warning(N("component.upload.saveWarn"));const ft=[];for(const ne of p.value){const{status:ge,responseData:O}=ne;ge===$l.SUCCESS&&O&&ft.push(Kc(O,u.resultField))}if(ft.length<=0)return q.warning(N("component.upload.saveError"));p.value=[],z(),o("change",ft)}function le(){return jo(this,null,function*(){return m.value?(q.warning(N("component.upload.uploadWait")),!1):(p.value=[],!0)})}return{columns:Oce(),actionColumn:_ce(De,G),register:I,closeModal:z,getHelpText:J,getStringAccept:Y,getOkButtonProps:Z,beforeUpload:_e,fileListRef:p,state:i,isUploadingRef:m,handleStartUpload:Re,handleOk:$e,handleCloseFunc:le,getIsSelectFile:ae,getUploadBtnText:ce,t:N}}}),Ice={class:"upload-modal-toolbar"};function Lce(u,o,i,l,d,m){const p=zl("a-button"),v=zl("Alert"),x=zl("Upload"),k=zl("FileList"),T=zl("BasicModal");return No(),cr(T,Ui({width:"800px",title:u.t("component.upload.upload"),okText:u.t("component.upload.save")},u.$attrs,{onRegister:u.register,onOk:u.handleOk,closeFunc:u.handleCloseFunc,maskClosable:!1,keyboard:!1,class:"upload-modal",okButtonProps:u.getOkButtonProps,cancelButtonProps:{disabled:u.isUploadingRef},centered:!0}),{centerFooter:Yo(()=>[Xn(p,{onClick:u.handleStartUpload,color:"success",disabled:!u.getIsSelectFile,loading:u.isUploadingRef},{default:Yo(()=>[ja(Za(u.getUploadBtnText),1)]),_:1},8,["onClick","disabled","loading"])]),default:Yo(()=>[pf("div",Ice,[Xn(v,{message:u.getHelpText,type:"info",banner:"",class:"upload-modal-toolbar__text"},null,8,["message"]),Xn(x,{accept:u.getStringAccept,multiple:u.multiple,"before-upload":u.beforeUpload,"show-upload-list":!1,class:"upload-modal-toolbar__btn"},{default:Yo(()=>[Xn(p,{type:"primary"},{default:Yo(()=>[ja(Za(u.t("component.upload.choose")),1)]),_:1})]),_:1},8,["accept","multiple","before-upload"])]),Xn(k,{dataSource:u.fileListRef,"onUpdate:dataSource":o[0]||(o[0]=M=>u.fileListRef=M),columns:u.columns,actionColumn:u.actionColumn,openDrag:u.fileListOpenDrag,dragOptions:u.fileListDragOptions},null,8,["dataSource","columns","actionColumn","openDrag","dragOptions"])]),_:1},16,["title","okText","onRegister","onOk","closeFunc","okButtonProps","cancelButtonProps"])}const $ce=D2(Fce,[["render",Lce]]);function Hce({url:u,target:o="_blank",fileName:i}){const l=window.navigator.userAgent.toLowerCase().indexOf("chrome")>-1,d=window.navigator.userAgent.toLowerCase().indexOf("safari")>-1;if(/(iP)/g.test(window.navigator.userAgent))return!1;if(l||d){const m=document.createElement("a");m.href=u,m.target=o,m.download!==void 0&&(m.download=i||u.substring(u.lastIndexOf("/")+1,u.length));const p=new MouseEvent("click",{bubbles:!0,cancelable:!0});return m.dispatchEvent(p),!0}return u.indexOf("?")===-1&&(u+="?download"),ile(u,{target:o}),!0}const Vce=ui({components:{BasicModal:Joe,FileList:ase},props:fce,emits:["list-change","register","delete"],setup(u,{emit:o}){const[i,{closeModal:l}]=Qoe(),{t:d}=Qc(),m=mo([]);sr(()=>u.value,x=>{fh(x)||(x=[]),m.value=x.filter(k=>!!k).map(k=>({url:k,type:k.split(".").pop()||"",name:k.split("/").pop()||""}))},{immediate:!0});function p(x){const k=m.value.findIndex(T=>T.url===x.url);if(k!==-1){const T=m.value.splice(k,1);o("delete",T[0].url),o("list-change",m.value.map(M=>M.url))}}function v(x){const{url:k=""}=x;Hce({url:k})}return{t:d,register:i,closeModal:l,fileListRef:m,columns:Dce(),actionColumn:Mce({handleRemove:p,handleDownload:v})}}});function zce(u,o,i,l,d,m){const p=zl("FileList"),v=zl("BasicModal");return No(),cr(v,Ui({width:"800px",title:u.t("component.upload.preview"),class:"upload-preview-modal"},u.$attrs,{onRegister:u.register,showOkBtn:!1}),{default:Yo(()=>[Xn(p,{dataSource:u.fileListRef,columns:u.columns,actionColumn:u.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","onRegister"])}const Uce=D2(Vce,[["render",zce]]),Wce=ui({name:"BasicUpload",__name:"BasicUpload",props:nse,emits:["change","delete","preview-delete","update:value"],setup(u,{emit:o}){const i=u,l=o,d=cQ(),{t:m}=Qc(),[p,{openModal:v}]=$te(),[x,{openModal:k}]=$te(),T=mo([]),M=ms(()=>{const{emptyHidePreview:q}=i;return q&&q?T.value.length>0:!0}),N=ms(()=>ie(ie({},d),i));sr(()=>i.value,(q=[])=>{T.value=fh(q)?q:[]},{immediate:!0});function I(q){T.value=[...Ge(T),...q||[]],l("update:value",T.value),l("change",T.value)}function z(q){T.value=[...q||[]],l("update:value",T.value),l("change",T.value)}function Y(q){l("delete",q)}function J(q){l("preview-delete",q)}return(q,ae)=>{const Z=zl("a-button");return No(),ai("div",null,[Xn(Ge(Ale),null,{default:Yo(()=>[Xn(Z,{type:"primary",onClick:Ge(v),preIcon:"carbon:cloud-upload"},{default:Yo(()=>[ja(Za(Ge(m)("component.upload.upload")),1)]),_:1},8,["onClick"]),M.value?(No(),cr(Ge(qoe),{key:0,placement:"bottom"},{title:Yo(()=>[ja(Za(Ge(m)("component.upload.uploaded"))+" ",1),T.value.length?(No(),ai(ff,{key:0},[ja(Za(T.value.length),1)],64)):ol("",!0)]),default:Yo(()=>[Xn(Z,{onClick:Ge(k)},{default:Yo(()=>[Xn(YD,{icon:"bi:eye"}),T.value.length&&q.showPreviewNumber?(No(),ai(ff,{key:0},[ja(Za(T.value.length),1)],64)):ol("",!0)]),_:1},8,["onClick"])]),_:1})):ol("",!0)]),_:1}),Xn($ce,Ui(N.value,{previewFileList:T.value,fileListOpenDrag:q.fileListOpenDrag,fileListDragOptions:q.fileListDragOptions,onRegister:Ge(p),onChange:I,onDelete:Y}),null,16,["previewFileList","fileListOpenDrag","fileListDragOptions","onRegister"]),Xn(Uce,{value:T.value,onRegister:Ge(x),onListChange:z,onDelete:J},null,8,["value","onRegister"])])}}}),jce={key:0},Zce={style:{"margin-top":"8px"}},qce=["src"],Gce=ui({name:"ImageUpload",__name:"ImageUpload",props:ie({},nse),emits:["change","update:value","delete"],setup(u,{emit:o}){const i=o,l=u,{t:d}=Qc(),{createMessage:m}=uJ(),{accept:p,helpText:v,maxNumber:x,maxSize:k}=lQ(l),T=mo(!1),{getStringAccept:M}=ose({acceptRef:p,helpTextRef:v,maxNumberRef:x,maxSizeRef:k}),N=mo(!1),I=mo(""),z=mo(""),Y=mo([]),J=mo(!0),q=mo(!0);sr(()=>l.value,Re=>{if(T.value){T.value=!1;return}if(Re){let $e=[];fh(Re)?$e=Re:$e.push(Re),Y.value=$e.map((le,Ee)=>le&&gy(le)?{uid:-Ee+"",name:le.substring(le.lastIndexOf("/")+1),status:"done",url:le}:le&&Hg(le)?le:void 0)}});function ae(){const Re=(Y.value||[]).filter($e=>($e==null?void 0:$e.status)===$l.DONE).map($e=>{var le;return($e==null?void 0:$e.url)||((le=$e==null?void 0:$e.response)==null?void 0:le.url)});return l.multiple?Re:Re.length>0?Re[0]:""}function Z(Re){return new Promise(($e,le)=>{const Ee=new FileReader;Ee.readAsDataURL(Re),Ee.onload=()=>{$e(Ee.result)},Ee.onerror=ft=>le(ft)})}const ce=Re=>jo(this,null,function*(){!Re.url&&!Re.preview&&(Re.preview=yield Z(Re.originFileObj)),I.value=Re.url||Re.preview||"",N.value=!0,z.value=Re.name||I.value.substring(I.value.lastIndexOf("/")+1)}),_e=Re=>jo(this,null,function*(){if(Y.value){const $e=Y.value.findIndex(Ee=>Ee.uid===Re.uid);$e!==-1&&Y.value.splice($e,1);const le=ae();T.value=!0,i("change",le),i("delete",Re)}}),De=()=>{N.value=!1,z.value=""},G=Re=>{const{maxSize:$e,accept:le}=l,{name:Ee}=Re,ft=mQ(Ee);ft||(m.error(d("component.upload.acceptUpload",[le])),q.value=!1,setTimeout(()=>q.value=!0,1e3));const ne=Re.size/1024/1024>$e;return ne&&(m.error(d("component.upload.maxSizeMultiple",[$e])),J.value=!1,setTimeout(()=>J.value=!0,1e3)),ft&&!ne||r6.LIST_IGNORE};function qe(Re){return jo(this,null,function*(){var le;const{api:$e}=l;if(!$e||!vr($e))return Voe();try{const Ee=yield(le=l.api)==null?void 0:le.call(l,{data:ie({},l.uploadParams||{}),file:Re.file,name:l.name,filename:l.filename});Re.onSuccess(Ee.data.data);const ft=ae();T.value=!0,i("change",ft)}catch(Ee){Re.onError(Ee)}})}return(Re,$e)=>(No(),ai("div",null,[Xn(Ge(r6),Ui(Re.$attrs,{"file-list":Y.value,"onUpdate:fileList":$e[0]||($e[0]=le=>Y.value=le),"list-type":Re.listType,accept:Ge(M),multiple:Re.multiple,maxCount:Ge(x),"before-upload":G,"custom-request":qe,onPreview:ce,onRemove:_e}),{default:Yo(()=>[Y.value&&Y.value.length<Ge(x)?(No(),ai("div",jce,[Xn(Ge(Tle)),pf("div",Zce,Za(Ge(d)("component.upload.upload")),1)])):ol("",!0)]),_:1},16,["file-list","list-type","accept","multiple","maxCount"]),Xn(Ge(Ole),{open:N.value,title:z.value,footer:null,onCancel:De},{default:Yo(()=>[pf("img",{alt:"",style:{width:"100%"},src:I.value},null,8,qce)]),_:1},8,["open","title"])]))}}),Kce=I6(Gce),Yce=I6(Wce),Xce=["xlink:href"],Jce=ui({__name:"SvgIcon",props:{prefix:{type:String,default:"icon"},name:{type:String,required:!0},size:{type:[Number,String],default:16},spin:{type:Boolean,default:!1}},setup(u){const o=u,{prefixCls:i}=_2("svg-icon"),l=ms(()=>`#${o.prefix}-${o.name}`),d=ms(()=>{const{size:m}=o;let p=`${m}`;return p=`${p.replace("px","")}px`,{width:p,height:p}});return(m,p)=>(No(),ai("svg",{class:o0([Ge(i),m.$attrs.class,u.spin&&"svg-icon-spin"]),style:F6(d.value),"aria-hidden":"true"},[pf("use",{"xlink:href":l.value},null,8,Xce)],6))}}),zte=D2(Jce,[["__scopeId","data-v-99ee52d5"]]),Ute={prefix:"ant-design",icons:["account-book-filled","account-book-outlined","account-book-twotone","aim-outlined","alert-filled","alert-outlined","alert-twotone","alibaba-outlined","align-center-outlined","align-left-outlined","align-right-outlined","alipay-circle-filled","alipay-circle-outlined","alipay-outlined","alipay-square-filled","aliwangwang-filled","aliwangwang-outlined","aliyun-outlined","amazon-circle-filled","amazon-outlined","amazon-square-filled","android-filled","android-outlined","ant-cloud-outlined","ant-design-outlined","apartment-outlined","api-filled","api-outlined","api-twotone","apple-filled","apple-outlined","appstore-add-outlined","appstore-filled","appstore-outlined","appstore-twotone","area-chart-outlined","arrow-down-outlined","arrow-left-outlined","arrow-right-outlined","arrow-up-outlined","arrows-alt-outlined","audio-filled","audio-muted-outlined","audio-outlined","audio-twotone","audit-outlined","backward-filled","backward-outlined","bank-filled","bank-outlined","bank-twotone","bar-chart-outlined","barcode-outlined","bars-outlined","behance-circle-filled","behance-outlined","behance-square-filled","behance-square-outlined","bell-filled","bell-outlined","bell-twotone","bg-colors-outlined","block-outlined","bold-outlined","book-filled","book-outlined","book-twotone","border-bottom-outlined","border-horizontal-outlined","border-inner-outlined","border-left-outlined","border-outer-outlined","border-outlined","border-right-outlined","border-top-outlined","border-verticle-outlined","borderless-table-outlined","box-plot-filled","box-plot-outlined","box-plot-twotone","branches-outlined","bug-filled","bug-outlined","bug-twotone","build-filled","build-outlined","build-twotone","bulb-filled","bulb-outlined","bulb-twotone","calculator-filled","calculator-outlined","calculator-twotone","calendar-filled","calendar-outlined","calendar-twotone","camera-filled","camera-outlined","camera-twotone","car-filled","car-outlined","car-twotone","caret-down-filled","caret-down-outlined","caret-left-filled","caret-left-outlined","caret-right-filled","caret-right-outlined","caret-up-filled","caret-up-outlined","carry-out-filled","carry-out-outlined","carry-out-twotone","check-circle-filled","check-circle-outlined","check-circle-twotone","check-outlined","check-square-filled","check-square-outlined","check-square-twotone","chrome-filled","chrome-outlined","ci-circle-filled","ci-circle-outlined","ci-circle-twotone","ci-outlined","ci-twotone","clear-outlined","clock-circle-filled","clock-circle-outlined","clock-circle-twotone","close-circle-filled","close-circle-outlined","close-circle-twotone","close-outlined","close-square-filled","close-square-outlined","close-square-twotone","cloud-download-outlined","cloud-filled","cloud-outlined","cloud-server-outlined","cloud-sync-outlined","cloud-twotone","cloud-upload-outlined","cluster-outlined","code-filled","code-outlined","code-sandbox-circle-filled","code-sandbox-outlined","code-sandbox-square-filled","code-twotone","codepen-circle-filled","codepen-circle-outlined","codepen-outlined","codepen-square-filled","coffee-outlined","column-height-outlined","column-width-outlined","comment-outlined","compass-filled","compass-outlined","compass-twotone","compress-outlined","console-sql-outlined","contacts-filled","contacts-outlined","contacts-twotone","container-filled","container-outlined","container-twotone","control-filled","control-outlined","control-twotone","copy-filled","copy-outlined","copy-twotone","copyright-circle-filled","copyright-circle-outlined","copyright-circle-twotone","copyright-outlined","copyright-twotone","credit-card-filled","credit-card-outlined","credit-card-twotone","crown-filled","crown-outlined","crown-twotone","customer-service-filled","customer-service-outlined","customer-service-twotone","dash-outlined","dashboard-filled","dashboard-outlined","dashboard-twotone","database-filled","database-outlined","database-twotone","delete-column-outlined","delete-filled","delete-outlined","delete-row-outlined","delete-twotone","delivered-procedure-outlined","deployment-unit-outlined","desktop-outlined","diff-filled","diff-outlined","diff-twotone","dingding-outlined","dingtalk-circle-filled","dingtalk-outlined","dingtalk-square-filled","disconnect-outlined","dislike-filled","dislike-outlined","dislike-twotone","dollar-circle-filled","dollar-circle-outlined","dollar-circle-twotone","dollar-outlined","dollar-twotone","dot-chart-outlined","double-left-outlined","double-right-outlined","down-circle-filled","down-circle-outlined","down-circle-twotone","down-outlined","down-square-filled","down-square-outlined","down-square-twotone","download-outlined","drag-outlined","dribbble-circle-filled","dribbble-outlined","dribbble-square-filled","dribbble-square-outlined","dropbox-circle-filled","dropbox-outlined","dropbox-square-filled","edit-filled","edit-outlined","edit-twotone","ellipsis-outlined","enter-outlined","environment-filled","environment-outlined","environment-twotone","euro-circle-filled","euro-circle-outlined","euro-circle-twotone","euro-outlined","euro-twotone","exception-outlined","exclamation-circle-filled","exclamation-circle-outlined","exclamation-circle-twotone","exclamation-outlined","expand-alt-outlined","expand-outlined","experiment-filled","experiment-outlined","experiment-twotone","export-outlined","eye-filled","eye-invisible-filled","eye-invisible-outlined","eye-invisible-twotone","eye-outlined","eye-twotone","facebook-filled","facebook-outlined","fall-outlined","fast-backward-filled","fast-backward-outlined","fast-forward-filled","fast-forward-outlined","field-binary-outlined","field-number-outlined","field-string-outlined","field-time-outlined","file-add-filled","file-add-outlined","file-add-twotone","file-done-outlined","file-excel-filled","file-excel-outlined","file-excel-twotone","file-exclamation-filled","file-exclamation-outlined","file-exclamation-twotone","file-filled","file-gif-outlined","file-image-filled","file-image-outlined","file-image-twotone","file-jpg-outlined","file-markdown-filled","file-markdown-outlined","file-markdown-twotone","file-outlined","file-pdf-filled","file-pdf-outlined","file-pdf-twotone","file-ppt-filled","file-ppt-outlined","file-ppt-twotone","file-protect-outlined","file-search-outlined","file-sync-outlined","file-text-filled","file-text-outlined","file-text-twotone","file-twotone","file-unknown-filled","file-unknown-outlined","file-unknown-twotone","file-word-filled","file-word-outlined","file-word-twotone","file-zip-filled","file-zip-outlined","file-zip-twotone","filter-filled","filter-outlined","filter-twotone","fire-filled","fire-outlined","fire-twotone","flag-filled","flag-outlined","flag-twotone","folder-add-filled","folder-add-outlined","folder-add-twotone","folder-filled","folder-open-filled","folder-open-outlined","folder-open-twotone","folder-outlined","folder-twotone","folder-view-outlined","font-colors-outlined","font-size-outlined","fork-outlined","form-outlined","format-painter-filled","format-painter-outlined","forward-filled","forward-outlined","frown-filled","frown-outlined","frown-twotone","fullscreen-exit-outlined","fullscreen-outlined","function-outlined","fund-filled","fund-outlined","fund-projection-screen-outlined","fund-twotone","fund-view-outlined","funnel-plot-filled","funnel-plot-outlined","funnel-plot-twotone","gateway-outlined","gif-outlined","gift-filled","gift-outlined","gift-twotone","github-filled","github-outlined","gitlab-filled","gitlab-outlined","global-outlined","gold-filled","gold-outlined","gold-twotone","golden-filled","google-circle-filled","google-outlined","google-plus-circle-filled","google-plus-outlined","google-plus-square-filled","google-square-filled","group-outlined","hdd-filled","hdd-outlined","hdd-twotone","heart-filled","heart-outlined","heart-twotone","heat-map-outlined","highlight-filled","highlight-outlined","highlight-twotone","history-outlined","home-filled","home-outlined","home-twotone","hourglass-filled","hourglass-outlined","hourglass-twotone","html5-filled","html5-outlined","html5-twotone","idcard-filled","idcard-outlined","idcard-twotone","ie-circle-filled","ie-outlined","ie-square-filled","import-outlined","inbox-outlined","info-circle-filled","info-circle-outlined","info-circle-twotone","info-outlined","insert-row-above-outlined","insert-row-below-outlined","insert-row-left-outlined","insert-row-right-outlined","instagram-filled","instagram-outlined","insurance-filled","insurance-outlined","insurance-twotone","interaction-filled","interaction-outlined","interaction-twotone","issues-close-outlined","italic-outlined","key-outlined","laptop-outlined","layout-filled","layout-outlined","layout-twotone","left-circle-filled","left-circle-outlined","left-circle-twotone","left-outlined","left-square-filled","left-square-outlined","left-square-twotone","like-filled","like-outlined","like-twotone","line-chart-outlined","line-height-outlined","line-outlined","link-outlined","linkedin-filled","linkedin-outlined","loading-3-quarters-outlined","loading-outlined","lock-filled","lock-outlined","lock-twotone","login-outlined","logout-outlined","mac-command-filled","mac-command-outlined","mail-filled","mail-outlined","mail-twotone","man-outlined","medicine-box-filled","medicine-box-outlined","medicine-box-twotone","medium-circle-filled","medium-outlined","medium-square-filled","medium-workmark-outlined","meh-filled","meh-outlined","meh-twotone","menu-fold-outlined","menu-outlined","menu-unfold-outlined","merge-cells-outlined","message-filled","message-outlined","message-twotone","minus-circle-filled","minus-circle-outlined","minus-circle-twotone","minus-outlined","minus-square-filled","minus-square-outlined","minus-square-twotone","mobile-filled","mobile-outlined","mobile-twotone","money-collect-filled","money-collect-outlined","money-collect-twotone","monitor-outlined","more-outlined","node-collapse-outlined","node-expand-outlined","node-index-outlined","notification-filled","notification-outlined","notification-twotone","number-outlined","one-to-one-outlined","ordered-list-outlined","paper-clip-outlined","partition-outlined","pause-circle-filled","pause-circle-outlined","pause-circle-twotone","pause-outlined","pay-circle-filled","pay-circle-outlined","percentage-outlined","phone-filled","phone-outlined","phone-twotone","pic-center-outlined","pic-left-outlined","pic-right-outlined","picture-filled","picture-outlined","picture-twotone","pie-chart-filled","pie-chart-outlined","pie-chart-twotone","play-circle-filled","play-circle-outlined","play-circle-twotone","play-square-filled","play-square-outlined","play-square-twotone","plus-circle-filled","plus-circle-outlined","plus-circle-twotone","plus-outlined","plus-square-filled","plus-square-outlined","plus-square-twotone","pound-circle-filled","pound-circle-outlined","pound-circle-twotone","pound-outlined","poweroff-outlined","printer-filled","printer-outlined","printer-twotone","profile-filled","profile-outlined","profile-twotone","project-filled","project-outlined","project-twotone","property-safety-filled","property-safety-outlined","property-safety-twotone","pull-request-outlined","pushpin-filled","pushpin-outlined","pushpin-twotone","qq-circle-filled","qq-outlined","qq-square-filled","qrcode-outlined","question-circle-filled","question-circle-outlined","question-circle-twotone","question-outlined","radar-chart-outlined","radius-bottomleft-outlined","radius-bottomright-outlined","radius-setting-outlined","radius-upleft-outlined","radius-upright-outlined","read-filled","read-outlined","reconciliation-filled","reconciliation-outlined","reconciliation-twotone","red-envelope-filled","red-envelope-outlined","red-envelope-twotone","reddit-circle-filled","reddit-outlined","reddit-square-filled","redo-outlined","reload-outlined","rest-filled","rest-outlined","rest-twotone","retweet-outlined","right-circle-filled","right-circle-outlined","right-circle-twotone","right-outlined","right-square-filled","right-square-outlined","right-square-twotone","rise-outlined","robot-filled","robot-outlined","rocket-filled","rocket-outlined","rocket-twotone","rollback-outlined","rotate-left-outlined","rotate-right-outlined","safety-certificate-filled","safety-certificate-outlined","safety-certificate-twotone","safety-outlined","save-filled","save-outlined","save-twotone","scan-outlined","schedule-filled","schedule-outlined","schedule-twotone","scissor-outlined","search-outlined","security-scan-filled","security-scan-outlined","security-scan-twotone","select-outlined","send-outlined","setting-filled","setting-outlined","setting-twotone","shake-outlined","share-alt-outlined","shop-filled","shop-outlined","shop-twotone","shopping-cart-outlined","shopping-filled","shopping-outlined","shopping-twotone","shrink-outlined","signal-filled","sisternode-outlined","sketch-circle-filled","sketch-outlined","sketch-square-filled","skin-filled","skin-outlined","skin-twotone","skype-filled","skype-outlined","slack-circle-filled","slack-outlined","slack-square-filled","slack-square-outlined","sliders-filled","sliders-outlined","sliders-twotone","small-dash-outlined","smile-filled","smile-outlined","smile-twotone","snippets-filled","snippets-outlined","snippets-twotone","solution-outlined","sort-ascending-outlined","sort-descending-outlined","sound-filled","sound-outlined","sound-twotone","split-cells-outlined","star-filled","star-outlined","star-twotone","step-backward-filled","step-backward-outlined","step-forward-filled","step-forward-outlined","stock-outlined","stop-filled","stop-outlined","stop-twotone","strikethrough-outlined","subnode-outlined","swap-left-outlined","swap-outlined","swap-right-outlined","switcher-filled","switcher-outlined","switcher-twotone","sync-outlined","table-outlined","tablet-filled","tablet-outlined","tablet-twotone","tag-filled","tag-outlined","tag-twotone","tags-filled","tags-outlined","tags-twotone","taobao-circle-filled","taobao-circle-outlined","taobao-outlined","taobao-square-filled","team-outlined","thunderbolt-filled","thunderbolt-outlined","thunderbolt-twotone","to-top-outlined","tool-filled","tool-outlined","tool-twotone","trademark-circle-filled","trademark-circle-outlined","trademark-circle-twotone","trademark-outlined","transaction-outlined","translation-outlined","trophy-filled","trophy-outlined","trophy-twotone","twitter-circle-filled","twitter-outlined","twitter-square-filled","underline-outlined","undo-outlined","ungroup-outlined","unlock-filled","unlock-outlined","unlock-twotone","unordered-list-outlined","up-circle-filled","up-circle-outlined","up-circle-twotone","up-outlined","up-square-filled","up-square-outlined","up-square-twotone","upload-outlined","usb-filled","usb-outlined","usb-twotone","user-add-outlined","user-delete-outlined","user-outlined","user-switch-outlined","usergroup-add-outlined","usergroup-delete-outlined","verified-outlined","vertical-align-bottom-outlined","vertical-align-middle-outlined","vertical-align-top-outlined","vertical-left-outlined","vertical-right-outlined","video-camera-add-outlined","video-camera-filled","video-camera-outlined","video-camera-twotone","wallet-filled","wallet-outlined","wallet-twotone","warning-filled","warning-outlined","warning-twotone","wechat-filled","wechat-outlined","weibo-circle-filled","weibo-circle-outlined","weibo-outlined","weibo-square-filled","weibo-square-outlined","whats-app-outlined","wifi-outlined","windows-filled","windows-outlined","woman-outlined","yahoo-filled","yahoo-outlined","youtube-filled","youtube-outlined","yuque-filled","yuque-outlined","zhihu-circle-filled","zhihu-outlined","zhihu-square-filled","zoom-in-outlined","zoom-out-outlined"]};function Qce(u,o,i){const l=(o-1)*Number(i);return l+Number(i)>=u.length?u.slice(l,u.length):u.slice(l,l+Number(i))}function eue(u,o){const i=mo(1),l=mo(o),d=ms(()=>Qce(Ge(u),Ge(i),Ge(l))),m=ms(()=>Ge(u).length);function p(x){i.value=x}function v(x){l.value=x}return{setCurrentPage:p,getTotal:m,setPageSize:v,getPaginationList:d}}const tue=["icon-download-count","icon-dynamic-avatar-1","icon-dynamic-avatar-2","icon-dynamic-avatar-3","icon-dynamic-avatar-4","icon-dynamic-avatar-5","icon-dynamic-avatar-6","icon-moon","icon-sun","icon-test","icon-total-sales","icon-transaction","icon-visit-count"],nue={class:"flex justify-between"},oue={key:0},sue={class:"flex flex-wrap px-2"},rue=["onClick","title"],iue={key:0,class:"flex py-2 items-center justify-center"},aue={key:1,class:"p-5"},lue={key:0,class:"cursor-pointer px-2 py-1 flex items-center"},cue=ui({inheritAttrs:!1,__name:"IconPicker",props:{value:{default:""},width:{default:"100%"},pageSize:{default:140},copy:{type:Boolean,default:!1},mode:{default:"iconify"}},emits:["change","update:value"],setup(u,{emit:o}){const i=M2,l=_le,d=Dle,m=Mle;function p(){const $e=Ute.prefix;return Ute.icons.map(le=>`${$e}:${le}`)}function v(){return tue.map($e=>$e.replace("icon-",""))}const x=u,k=o,T=x.mode==="svg",M=T?v():p(),N=mo(""),I=mo(!1),z=mo(M),Y=mo(),J=()=>{Y.value&&Y.value.click()},{t:q}=Qc(),{prefixCls:ae}=_2("icon-picker"),Z=uQ(Re,100),{getPaginationList:ce,getTotal:_e,setCurrentPage:De}=eue(z,x.pageSize);hM(()=>{N.value=x.value}),sr(()=>N.value,$e=>{k("update:value",$e),k("change",$e)});function G($e){De($e)}function qe($e){N.value=$e,x.copy&&Vle($e,q("component.icon.copy"))}function Re($e){const le=$e.target.value;if(!le){De(1),z.value=M;return}N.value=le,z.value=M.filter(Ee=>Ee.includes(le))}return($e,le)=>(No(),cr(Ge(i),{readonly:"",style:F6({width:$e.width}),placeholder:Ge(q)("component.icon.placeholder"),class:o0(Ge(ae)),value:N.value,"onUpdate:value":le[1]||(le[1]=Ee=>N.value=Ee),onClick:J},{addonAfter:Yo(()=>[Xn(Ge(l),{placement:"bottomLeft",trigger:"click",modelValue:I.value,"onUpdate:modelValue":le[0]||(le[0]=Ee=>I.value=Ee),overlayClassName:`${Ge(ae)}-popover`},{title:Yo(()=>[pf("div",nue,[Xn(Ge(i),{placeholder:Ge(q)("component.icon.search"),onChange:Ge(Z),allowClear:""},null,8,["placeholder","onChange"])])]),content:Yo(()=>[Ge(ce).length?(No(),ai("div",oue,[Xn(Ge(Ule),{class:"border border-solid border-t-0"},{default:Yo(()=>[pf("ul",sue,[(No(!0),ai(ff,null,gf(Ge(ce),Ee=>(No(),ai("li",{key:Ee,class:o0([N.value===Ee?"border border-primary":"","p-2 w-1/8 cursor-pointer mr-1 mt-1 flex justify-center items-center border border-solid hover:border-primary"]),onClick:ft=>qe(Ee),title:Ee},[T?(No(),cr(zte,{key:0,name:Ee},null,8,["name"])):(No(),cr(YD,{key:1,icon:Ee},null,8,["icon"]))],10,rue))),128))])]),_:1}),Ge(_e)>=$e.pageSize?(No(),ai("div",iue,[Xn(Ge(d),{showLessItems:"",size:"small",pageSize:$e.pageSize,total:Ge(_e),onChange:G},null,8,["pageSize","total"])])):ol("",!0)])):(No(),ai("div",aue,[Xn(Ge(m))]))]),default:Yo(()=>[pf("div",{ref_key:"trigger",ref:Y},[T&&N.value?(No(),ai("span",lue,[Xn(zte,{name:N.value},null,8,["name"])])):(No(),cr(YD,{key:1,icon:N.value||"ion:apps-outline",class:"cursor-pointer px-2 py-1"},null,8,["icon"]))],512)]),_:1},8,["modelValue","overlayClassName"])]),_:1},8,["style","placeholder","class","value"]))}});class Or{lineAt(o){if(o<0||o>this.length)throw new RangeError(`Invalid position ${o} in document of length ${this.length}`);return this.lineInner(o,!1,1,0)}line(o){if(o<1||o>this.lines)throw new RangeError(`Invalid line number ${o} in ${this.lines}-line document`);return this.lineInner(o,!0,1,0)}replace(o,i,l){[o,i]=v2(this,o,i);let d=[];return this.decompose(0,o,d,2),l.length&&l.decompose(0,l.length,d,3),this.decompose(i,this.length,d,1),pm.from(d,this.length-(i-o)+l.length)}append(o){return this.replace(this.length,this.length,o)}slice(o,i=this.length){[o,i]=v2(this,o,i);let l=[];return this.decompose(o,i,l,0),pm.from(l,i-o)}eq(o){if(o==this)return!0;if(o.length!=this.length||o.lines!=this.lines)return!1;let i=this.scanIdentical(o,1),l=this.length-this.scanIdentical(o,-1),d=new UD(this),m=new UD(o);for(let p=i,v=i;;){if(d.next(p),m.next(p),p=0,d.lineBreak!=m.lineBreak||d.done!=m.done||d.value!=m.value)return!1;if(v+=d.value.length,d.done||v>=l)return!0}}iter(o=1){return new UD(this,o)}iterRange(o,i=this.length){return new cse(this,o,i)}iterLines(o,i){let l;if(o==null)l=this.iter();else{i==null&&(i=this.lines+1);let d=this.line(o).from;l=this.iterRange(d,Math.max(d,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new use(l)}toString(){return this.sliceString(0)}toJSON(){let o=[];return this.flatten(o),o}constructor(){}static of(o){if(o.length==0)throw new RangeError("A document must have at least one line");return o.length==1&&!o[0]?Or.empty:o.length<=32?new Aa(o):pm.from(Aa.split(o,[]))}}class Aa extends Or{constructor(o,i=uue(o)){super(),this.text=o,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(o,i,l,d){for(let m=0;;m++){let p=this.text[m],v=d+p.length;if((i?l:v)>=o)return new due(d,v,l,p);d=v+1,l++}}decompose(o,i,l,d){let m=o<=0&&i>=this.length?this:new Aa(Wte(this.text,o,i),Math.min(i,this.length)-Math.max(0,o));if(d&1){let p=l.pop(),v=G$(m.text,p.text.slice(),0,m.length);if(v.length<=32)l.push(new Aa(v,p.length+m.length));else{let x=v.length>>1;l.push(new Aa(v.slice(0,x)),new Aa(v.slice(x)))}}else l.push(m)}replace(o,i,l){if(!(l instanceof Aa))return super.replace(o,i,l);[o,i]=v2(this,o,i);let d=G$(this.text,G$(l.text,Wte(this.text,0,o)),i),m=this.length+l.length-(i-o);return d.length<=32?new Aa(d,m):pm.from(Aa.split(d,[]),m)}sliceString(o,i=this.length,l=`
`){[o,i]=v2(this,o,i);let d="";for(let m=0,p=0;m<=i&&p<this.text.length;p++){let v=this.text[p],x=m+v.length;m>o&&p&&(d+=l),o<x&&i>m&&(d+=v.slice(Math.max(0,o-m),i-m)),m=x+1}return d}flatten(o){for(let i of this.text)o.push(i)}scanIdentical(){return 0}static split(o,i){let l=[],d=-1;for(let m of o)l.push(m),d+=m.length+1,l.length==32&&(i.push(new Aa(l,d)),l=[],d=-1);return d>-1&&i.push(new Aa(l,d)),i}}class pm extends Or{constructor(o,i){super(),this.children=o,this.length=i,this.lines=0;for(let l of o)this.lines+=l.lines}lineInner(o,i,l,d){for(let m=0;;m++){let p=this.children[m],v=d+p.length,x=l+p.lines-1;if((i?x:v)>=o)return p.lineInner(o,i,l,d);d=v+1,l=x+1}}decompose(o,i,l,d){for(let m=0,p=0;p<=i&&m<this.children.length;m++){let v=this.children[m],x=p+v.length;if(o<=x&&i>=p){let k=d&((p<=o?1:0)|(x>=i?2:0));p>=o&&x<=i&&!k?l.push(v):v.decompose(o-p,i-p,l,k)}p=x+1}}replace(o,i,l){if([o,i]=v2(this,o,i),l.lines<this.lines)for(let d=0,m=0;d<this.children.length;d++){let p=this.children[d],v=m+p.length;if(o>=m&&i<=v){let x=p.replace(o-m,i-m,l),k=this.lines-p.lines+x.lines;if(x.lines<k>>4&&x.lines>k>>6){let T=this.children.slice();return T[d]=x,new pm(T,this.length-(i-o)+l.length)}return super.replace(m,v,x)}m=v+1}return super.replace(o,i,l)}sliceString(o,i=this.length,l=`
`){[o,i]=v2(this,o,i);let d="";for(let m=0,p=0;m<this.children.length&&p<=i;m++){let v=this.children[m],x=p+v.length;p>o&&m&&(d+=l),o<x&&i>p&&(d+=v.sliceString(o-p,i-p,l)),p=x+1}return d}flatten(o){for(let i of this.children)i.flatten(o)}scanIdentical(o,i){if(!(o instanceof pm))return 0;let l=0,[d,m,p,v]=i>0?[0,0,this.children.length,o.children.length]:[this.children.length-1,o.children.length-1,-1,-1];for(;;d+=i,m+=i){if(d==p||m==v)return l;let x=this.children[d],k=o.children[m];if(x!=k)return l+x.scanIdentical(k,i);l+=x.length+1}}static from(o,i=o.reduce((l,d)=>l+d.length+1,-1)){let l=0;for(let I of o)l+=I.lines;if(l<32){let I=[];for(let z of o)z.flatten(I);return new Aa(I,i)}let d=Math.max(32,l>>5),m=d<<1,p=d>>1,v=[],x=0,k=-1,T=[];function M(I){let z;if(I.lines>m&&I instanceof pm)for(let Y of I.children)M(Y);else I.lines>p&&(x>p||!x)?(N(),v.push(I)):I instanceof Aa&&x&&(z=T[T.length-1])instanceof Aa&&I.lines+z.lines<=32?(x+=I.lines,k+=I.length+1,T[T.length-1]=new Aa(z.text.concat(I.text),z.length+1+I.length)):(x+I.lines>d&&N(),x+=I.lines,k+=I.length+1,T.push(I))}function N(){x!=0&&(v.push(T.length==1?T[0]:pm.from(T,k)),k=-1,x=T.length=0)}for(let I of o)M(I);return N(),v.length==1?v[0]:new pm(v,i)}}Or.empty=new Aa([""],0);function uue(u){let o=-1;for(let i of u)o+=i.length+1;return o}function G$(u,o,i=0,l=1e9){for(let d=0,m=0,p=!0;m<u.length&&d<=l;m++){let v=u[m],x=d+v.length;x>=i&&(x>l&&(v=v.slice(0,l-d)),d<i&&(v=v.slice(i-d)),p?(o[o.length-1]+=v,p=!1):o.push(v)),d=x+1}return o}function Wte(u,o,i){return G$(u,[""],o,i)}class UD{constructor(o,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[o],this.offsets=[i>0?1:(o instanceof Aa?o.text.length:o.children.length)<<1]}nextInner(o,i){for(this.done=this.lineBreak=!1;;){let l=this.nodes.length-1,d=this.nodes[l],m=this.offsets[l],p=m>>1,v=d instanceof Aa?d.text.length:d.children.length;if(p==(i>0?v:0)){if(l==0)return this.done=!0,this.value="",this;i>0&&this.offsets[l-1]++,this.nodes.pop(),this.offsets.pop()}else if((m&1)==(i>0?0:1)){if(this.offsets[l]+=i,o==0)return this.lineBreak=!0,this.value=`
`,this;o--}else if(d instanceof Aa){let x=d.text[p+(i<0?-1:0)];if(this.offsets[l]+=i,x.length>Math.max(0,o))return this.value=o==0?x:i>0?x.slice(o):x.slice(0,x.length-o),this;o-=x.length}else{let x=d.children[p+(i<0?-1:0)];o>x.length?(o-=x.length,this.offsets[l]+=i):(i<0&&this.offsets[l]--,this.nodes.push(x),this.offsets.push(i>0?1:(x instanceof Aa?x.text.length:x.children.length)<<1))}}}next(o=0){return o<0&&(this.nextInner(-o,-this.dir),o=this.value.length),this.nextInner(o,this.dir)}}class cse{constructor(o,i,l){this.value="",this.done=!1,this.cursor=new UD(o,i>l?-1:1),this.pos=i>l?o.length:0,this.from=Math.min(i,l),this.to=Math.max(i,l)}nextInner(o,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;o+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let l=i<0?this.pos-this.from:this.to-this.pos;o>l&&(o=l),l-=o;let{value:d}=this.cursor.next(o);return this.pos+=(d.length+o)*i,this.value=d.length<=l?d:i<0?d.slice(d.length-l):d.slice(0,l),this.done=!this.value,this}next(o=0){return o<0?o=Math.max(o,this.from-this.pos):o>0&&(o=Math.min(o,this.to-this.pos)),this.nextInner(o,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class use{constructor(o){this.inner=o,this.afterBreak=!0,this.value="",this.done=!1}next(o=0){let{done:i,lineBreak:l,value:d}=this.inner.next(o);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):l?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=d,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Or.prototype[Symbol.iterator]=function(){return this.iter()},UD.prototype[Symbol.iterator]=cse.prototype[Symbol.iterator]=use.prototype[Symbol.iterator]=function(){return this});class due{constructor(o,i,l,d){this.from=o,this.to=i,this.number=l,this.text=d}get length(){return this.to-this.from}}function v2(u,o,i){return o=Math.max(0,Math.min(u.length,o)),[o,Math.max(o,Math.min(u.length,i))]}let d2="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(u=>u?parseInt(u,36):1);for(let u=1;u<d2.length;u++)d2[u]+=d2[u-1];function fue(u){for(let o=1;o<d2.length;o+=2)if(d2[o]>u)return d2[o-1]<=u;return!1}function jte(u){return u>=127462&&u<=127487}const Zte=8205;function Wl(u,o,i=!0,l=!0){return(i?dse:hue)(u,o,l)}function dse(u,o,i){if(o==u.length)return o;o&&fse(u.charCodeAt(o))&&hse(u.charCodeAt(o-1))&&o--;let l=Hl(u,o);for(o+=df(l);o<u.length;){let d=Hl(u,o);if(l==Zte||d==Zte||i&&fue(d))o+=df(d),l=d;else if(jte(d)){let m=0,p=o-2;for(;p>=0&&jte(Hl(u,p));)m++,p-=2;if(m%2==0)break;o+=2}else break}return o}function hue(u,o,i){for(;o>0;){let l=dse(u,o-2,i);if(l<o)return l;o--}return 0}function fse(u){return u>=56320&&u<57344}function hse(u){return u>=55296&&u<56320}function Hl(u,o){let i=u.charCodeAt(o);if(!hse(i)||o+1==u.length)return i;let l=u.charCodeAt(o+1);return fse(l)?(i-55296<<10)+(l-56320)+65536:i}function gQ(u){return u<=65535?String.fromCharCode(u):(u-=65536,String.fromCharCode((u>>10)+55296,(u&1023)+56320))}function df(u){return u<65536?1:2}const hJ=/\r\n?|\n/;var qc=function(u){return u[u.Simple=0]="Simple",u[u.TrackDel=1]="TrackDel",u[u.TrackBefore=2]="TrackBefore",u[u.TrackAfter=3]="TrackAfter",u}(qc||(qc={}));class wm{constructor(o){this.sections=o}get length(){let o=0;for(let i=0;i<this.sections.length;i+=2)o+=this.sections[i];return o}get newLength(){let o=0;for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i+1];o+=l<0?this.sections[i]:l}return o}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(o){for(let i=0,l=0,d=0;i<this.sections.length;){let m=this.sections[i++],p=this.sections[i++];p<0?(o(l,d,m),d+=m):d+=p,l+=m}}iterChangedRanges(o,i=!1){mJ(this,o,i)}get invertedDesc(){let o=[];for(let i=0;i<this.sections.length;){let l=this.sections[i++],d=this.sections[i++];d<0?o.push(l,d):o.push(d,l)}return new wm(o)}composeDesc(o){return this.empty?o:o.empty?this:mse(this,o)}mapDesc(o,i=!1){return o.empty?this:gJ(this,o,i)}mapPos(o,i=-1,l=qc.Simple){let d=0,m=0;for(let p=0;p<this.sections.length;){let v=this.sections[p++],x=this.sections[p++],k=d+v;if(x<0){if(k>o)return m+(o-d);m+=v}else{if(l!=qc.Simple&&k>=o&&(l==qc.TrackDel&&d<o&&k>o||l==qc.TrackBefore&&d<o||l==qc.TrackAfter&&k>o))return null;if(k>o||k==o&&i<0&&!v)return o==d||i<0?m:m+x;m+=x}d=k}if(o>d)throw new RangeError(`Position ${o} is out of range for changeset of length ${d}`);return m}touchesRange(o,i=o){for(let l=0,d=0;l<this.sections.length&&d<=i;){let m=this.sections[l++],p=this.sections[l++],v=d+m;if(p>=0&&d<=i&&v>=o)return d<o&&v>i?"cover":!0;d=v}return!1}toString(){let o="";for(let i=0;i<this.sections.length;){let l=this.sections[i++],d=this.sections[i++];o+=(o?" ":"")+l+(d>=0?":"+d:"")}return o}toJSON(){return this.sections}static fromJSON(o){if(!Array.isArray(o)||o.length%2||o.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wm(o)}static create(o){return new wm(o)}}class sl extends wm{constructor(o,i){super(o),this.inserted=i}apply(o){if(this.length!=o.length)throw new RangeError("Applying change set to a document with the wrong length");return mJ(this,(i,l,d,m,p)=>o=o.replace(d,d+(l-i),p),!1),o}mapDesc(o,i=!1){return gJ(this,o,i,!0)}invert(o){let i=this.sections.slice(),l=[];for(let d=0,m=0;d<i.length;d+=2){let p=i[d],v=i[d+1];if(v>=0){i[d]=v,i[d+1]=p;let x=d>>1;for(;l.length<x;)l.push(Or.empty);l.push(p?o.slice(m,m+p):Or.empty)}m+=p}return new sl(i,l)}compose(o){return this.empty?o:o.empty?this:mse(this,o,!0)}map(o,i=!1){return o.empty?this:gJ(this,o,i,!0)}iterChanges(o,i=!1){mJ(this,o,i)}get desc(){return wm.create(this.sections)}filter(o){let i=[],l=[],d=[],m=new XD(this);e:for(let p=0,v=0;;){let x=p==o.length?1e9:o[p++];for(;v<x||v==x&&m.len==0;){if(m.done)break e;let T=Math.min(m.len,x-v);Sc(d,T,-1);let M=m.ins==-1?-1:m.off==0?m.ins:0;Sc(i,T,M),M>0&&Q1(l,i,m.text),m.forward(T),v+=T}let k=o[p++];for(;v<k;){if(m.done)break e;let T=Math.min(m.len,k-v);Sc(i,T,-1),Sc(d,T,m.ins==-1?-1:m.off==0?m.ins:0),m.forward(T),v+=T}}return{changes:new sl(i,l),filtered:wm.create(d)}}toJSON(){let o=[];for(let i=0;i<this.sections.length;i+=2){let l=this.sections[i],d=this.sections[i+1];d<0?o.push(l):d==0?o.push([l]):o.push([l].concat(this.inserted[i>>1].toJSON()))}return o}static of(o,i,l){let d=[],m=[],p=0,v=null;function x(T=!1){if(!T&&!d.length)return;p<i&&Sc(d,i-p,-1);let M=new sl(d,m);v=v?v.compose(M.map(v)):M,d=[],m=[],p=0}function k(T){if(Array.isArray(T))for(let M of T)k(M);else if(T instanceof sl){if(T.length!=i)throw new RangeError(`Mismatched change set length (got ${T.length}, expected ${i})`);x(),v=v?v.compose(T.map(v)):T}else{let{from:M,to:N=M,insert:I}=T;if(M>N||M<0||N>i)throw new RangeError(`Invalid change range ${M} to ${N} (in doc of length ${i})`);let z=I?typeof I=="string"?Or.of(I.split(l||hJ)):I:Or.empty,Y=z.length;if(M==N&&Y==0)return;M<p&&x(),M>p&&Sc(d,M-p,-1),Sc(d,N-M,Y),Q1(m,d,z),p=N}}return k(o),x(!v),v}static empty(o){return new sl(o?[o,-1]:[],[])}static fromJSON(o){if(!Array.isArray(o))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],l=[];for(let d=0;d<o.length;d++){let m=o[d];if(typeof m=="number")i.push(m,-1);else{if(!Array.isArray(m)||typeof m[0]!="number"||m.some((p,v)=>v&&typeof p!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(m.length==1)i.push(m[0],0);else{for(;l.length<d;)l.push(Or.empty);l[d]=Or.of(m.slice(1)),i.push(m[0],l[d].length)}}}return new sl(i,l)}static createSet(o,i){return new sl(o,i)}}function Sc(u,o,i,l=!1){if(o==0&&i<=0)return;let d=u.length-2;d>=0&&i<=0&&i==u[d+1]?u[d]+=o:o==0&&u[d]==0?u[d+1]+=i:l?(u[d]+=o,u[d+1]+=i):u.push(o,i)}function Q1(u,o,i){if(i.length==0)return;let l=o.length-2>>1;if(l<u.length)u[u.length-1]=u[u.length-1].append(i);else{for(;u.length<l;)u.push(Or.empty);u.push(i)}}function mJ(u,o,i){let l=u.inserted;for(let d=0,m=0,p=0;p<u.sections.length;){let v=u.sections[p++],x=u.sections[p++];if(x<0)d+=v,m+=v;else{let k=d,T=m,M=Or.empty;for(;k+=v,T+=x,x&&l&&(M=M.append(l[p-2>>1])),!(i||p==u.sections.length||u.sections[p+1]<0);)v=u.sections[p++],x=u.sections[p++];o(d,k,m,T,M),d=k,m=T}}}function gJ(u,o,i,l=!1){let d=[],m=l?[]:null,p=new XD(u),v=new XD(o);for(let x=-1;;)if(p.ins==-1&&v.ins==-1){let k=Math.min(p.len,v.len);Sc(d,k,-1),p.forward(k),v.forward(k)}else if(v.ins>=0&&(p.ins<0||x==p.i||p.off==0&&(v.len<p.len||v.len==p.len&&!i))){let k=v.len;for(Sc(d,v.ins,-1);k;){let T=Math.min(p.len,k);p.ins>=0&&x<p.i&&p.len<=T&&(Sc(d,0,p.ins),m&&Q1(m,d,p.text),x=p.i),p.forward(T),k-=T}v.next()}else if(p.ins>=0){let k=0,T=p.len;for(;T;)if(v.ins==-1){let M=Math.min(T,v.len);k+=M,T-=M,v.forward(M)}else if(v.ins==0&&v.len<T)T-=v.len,v.next();else break;Sc(d,k,x<p.i?p.ins:0),m&&x<p.i&&Q1(m,d,p.text),x=p.i,p.forward(p.len-T)}else{if(p.done&&v.done)return m?sl.createSet(d,m):wm.create(d);throw new Error("Mismatched change set lengths")}}function mse(u,o,i=!1){let l=[],d=i?[]:null,m=new XD(u),p=new XD(o);for(let v=!1;;){if(m.done&&p.done)return d?sl.createSet(l,d):wm.create(l);if(m.ins==0)Sc(l,m.len,0,v),m.next();else if(p.len==0&&!p.done)Sc(l,0,p.ins,v),d&&Q1(d,l,p.text),p.next();else{if(m.done||p.done)throw new Error("Mismatched change set lengths");{let x=Math.min(m.len2,p.len),k=l.length;if(m.ins==-1){let T=p.ins==-1?-1:p.off?0:p.ins;Sc(l,x,T,v),d&&T&&Q1(d,l,p.text)}else p.ins==-1?(Sc(l,m.off?0:m.len,x,v),d&&Q1(d,l,m.textBit(x))):(Sc(l,m.off?0:m.len,p.off?0:p.ins,v),d&&!p.off&&Q1(d,l,p.text));v=(m.ins>x||p.ins>=0&&p.len>x)&&(v||l.length>k),m.forward2(x),p.forward(x)}}}}class XD{constructor(o){this.set=o,this.i=0,this.next()}next(){let{sections:o}=this.set;this.i<o.length?(this.len=o[this.i++],this.ins=o[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:o}=this.set,i=this.i-2>>1;return i>=o.length?Or.empty:o[i]}textBit(o){let{inserted:i}=this.set,l=this.i-2>>1;return l>=i.length&&!o?Or.empty:i[l].slice(this.off,o==null?void 0:this.off+o)}forward(o){o==this.len?this.next():(this.len-=o,this.off+=o)}forward2(o){this.ins==-1?this.forward(o):o==this.ins?this.next():(this.ins-=o,this.off+=o)}}class fy{constructor(o,i,l){this.from=o,this.to=i,this.flags=l}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let o=this.flags&7;return o==7?null:o}get goalColumn(){let o=this.flags>>6;return o==16777215?void 0:o}map(o,i=-1){let l,d;return this.empty?l=d=o.mapPos(this.from,i):(l=o.mapPos(this.from,1),d=o.mapPos(this.to,-1)),l==this.from&&d==this.to?this:new fy(l,d,this.flags)}extend(o,i=o){if(o<=this.anchor&&i>=this.anchor)return rn.range(o,i);let l=Math.abs(o-this.anchor)>Math.abs(i-this.anchor)?o:i;return rn.range(this.anchor,l)}eq(o,i=!1){return this.anchor==o.anchor&&this.head==o.head&&(!i||!this.empty||this.assoc==o.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(o){if(!o||typeof o.anchor!="number"||typeof o.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return rn.range(o.anchor,o.head)}static create(o,i,l){return new fy(o,i,l)}}class rn{constructor(o,i){this.ranges=o,this.mainIndex=i}map(o,i=-1){return o.empty?this:rn.create(this.ranges.map(l=>l.map(o,i)),this.mainIndex)}eq(o,i=!1){if(this.ranges.length!=o.ranges.length||this.mainIndex!=o.mainIndex)return!1;for(let l=0;l<this.ranges.length;l++)if(!this.ranges[l].eq(o.ranges[l],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new rn([this.main],0)}addRange(o,i=!0){return rn.create([o].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(o,i=this.mainIndex){let l=this.ranges.slice();return l[i]=o,rn.create(l,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(o=>o.toJSON()),main:this.mainIndex}}static fromJSON(o){if(!o||!Array.isArray(o.ranges)||typeof o.main!="number"||o.main>=o.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new rn(o.ranges.map(i=>fy.fromJSON(i)),o.main)}static single(o,i=o){return new rn([rn.range(o,i)],0)}static create(o,i=0){if(o.length==0)throw new RangeError("A selection needs at least one range");for(let l=0,d=0;d<o.length;d++){let m=o[d];if(m.empty?m.from<=l:m.from<l)return rn.normalized(o.slice(),i);l=m.to}return new rn(o,i)}static cursor(o,i=0,l,d){return fy.create(o,o,(i==0?0:i<0?8:16)|(l==null?7:Math.min(6,l))|(d!=null?d:16777215)<<6)}static range(o,i,l,d){let m=(l!=null?l:16777215)<<6|(d==null?7:Math.min(6,d));return i<o?fy.create(i,o,48|m):fy.create(o,i,(i>o?8:0)|m)}static normalized(o,i=0){let l=o[i];o.sort((d,m)=>d.from-m.from),i=o.indexOf(l);for(let d=1;d<o.length;d++){let m=o[d],p=o[d-1];if(m.empty?m.from<=p.to:m.from<p.to){let v=p.from,x=Math.max(m.to,p.to);d<=i&&i--,o.splice(--d,2,m.anchor>m.head?rn.range(x,v):rn.range(v,x))}}return new rn(o,i)}}function gse(u,o){for(let i of u.ranges)if(i.to>o)throw new RangeError("Selection points outside of document")}let pQ=0;class Co{constructor(o,i,l,d,m){this.combine=o,this.compareInput=i,this.compare=l,this.isStatic=d,this.id=pQ++,this.default=o([]),this.extensions=typeof m=="function"?m(this):m}get reader(){return this}static define(o={}){return new Co(o.combine||(i=>i),o.compareInput||((i,l)=>i===l),o.compare||(o.combine?(i,l)=>i===l:bQ),!!o.static,o.enables)}of(o){return new K$([],this,0,o)}compute(o,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new K$(o,this,1,i)}computeN(o,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new K$(o,this,2,i)}from(o,i){return i||(i=l=>l),this.compute([o],l=>i(l.field(o)))}}function bQ(u,o){return u==o||u.length==o.length&&u.every((i,l)=>i===o[l])}class K${constructor(o,i,l,d){this.dependencies=o,this.facet=i,this.type=l,this.value=d,this.id=pQ++}dynamicSlot(o){var i;let l=this.value,d=this.facet.compareInput,m=this.id,p=o[m]>>1,v=this.type==2,x=!1,k=!1,T=[];for(let M of this.dependencies)M=="doc"?x=!0:M=="selection"?k=!0:((i=o[M.id])!==null&&i!==void 0?i:1)&1||T.push(o[M.id]);return{create(M){return M.values[p]=l(M),1},update(M,N){if(x&&N.docChanged||k&&(N.docChanged||N.selection)||pJ(M,T)){let I=l(M);if(v?!qte(I,M.values[p],d):!d(I,M.values[p]))return M.values[p]=I,1}return 0},reconfigure:(M,N)=>{let I,z=N.config.address[m];if(z!=null){let Y=d6(N,z);if(this.dependencies.every(J=>J instanceof Co?N.facet(J)===M.facet(J):J instanceof Zl?N.field(J,!1)==M.field(J,!1):!0)||(v?qte(I=l(M),Y,d):d(I=l(M),Y)))return M.values[p]=Y,0}else I=l(M);return M.values[p]=I,1}}}}function qte(u,o,i){if(u.length!=o.length)return!1;for(let l=0;l<u.length;l++)if(!i(u[l],o[l]))return!1;return!0}function pJ(u,o){let i=!1;for(let l of o)WD(u,l)&1&&(i=!0);return i}function mue(u,o,i){let l=i.map(x=>u[x.id]),d=i.map(x=>x.type),m=l.filter(x=>!(x&1)),p=u[o.id]>>1;function v(x){let k=[];for(let T=0;T<l.length;T++){let M=d6(x,l[T]);if(d[T]==2)for(let N of M)k.push(N);else k.push(M)}return o.combine(k)}return{create(x){for(let k of l)WD(x,k);return x.values[p]=v(x),1},update(x,k){if(!pJ(x,m))return 0;let T=v(x);return o.compare(T,x.values[p])?0:(x.values[p]=T,1)},reconfigure(x,k){let T=pJ(x,l),M=k.config.facets[o.id],N=k.facet(o);if(M&&!T&&bQ(i,M))return x.values[p]=N,0;let I=v(x);return o.compare(I,N)?(x.values[p]=N,0):(x.values[p]=I,1)}}}const Gte=Co.define({static:!0});class Zl{constructor(o,i,l,d,m){this.id=o,this.createF=i,this.updateF=l,this.compareF=d,this.spec=m,this.provides=void 0}static define(o){let i=new Zl(pQ++,o.create,o.update,o.compare||((l,d)=>l===d),o);return o.provide&&(i.provides=o.provide(i)),i}create(o){let i=o.facet(Gte).find(l=>l.field==this);return((i==null?void 0:i.create)||this.createF)(o)}slot(o){let i=o[this.id]>>1;return{create:l=>(l.values[i]=this.create(l),1),update:(l,d)=>{let m=l.values[i],p=this.updateF(m,d);return this.compareF(m,p)?0:(l.values[i]=p,1)},reconfigure:(l,d)=>d.config.address[this.id]!=null?(l.values[i]=d.field(this),0):(l.values[i]=this.create(l),1)}}init(o){return[this,Gte.of({field:this,create:o})]}get extension(){return this}}const cy={lowest:4,low:3,default:2,high:1,highest:0};function MD(u){return o=>new pse(o,u)}const Oy={highest:MD(cy.highest),high:MD(cy.high),default:MD(cy.default),low:MD(cy.low),lowest:MD(cy.lowest)};class pse{constructor(o,i){this.inner=o,this.prec=i}}class gM{of(o){return new bJ(this,o)}reconfigure(o){return gM.reconfigure.of({compartment:this,extension:o})}get(o){return o.config.compartments.get(this)}}class bJ{constructor(o,i){this.compartment=o,this.inner=i}}class u6{constructor(o,i,l,d,m,p){for(this.base=o,this.compartments=i,this.dynamicSlots=l,this.address=d,this.staticValues=m,this.facets=p,this.statusTemplate=[];this.statusTemplate.length<l.length;)this.statusTemplate.push(0)}staticFacet(o){let i=this.address[o.id];return i==null?o.default:this.staticValues[i>>1]}static resolve(o,i,l){let d=[],m=Object.create(null),p=new Map;for(let N of gue(o,i,p))N instanceof Zl?d.push(N):(m[N.facet.id]||(m[N.facet.id]=[])).push(N);let v=Object.create(null),x=[],k=[];for(let N of d)v[N.id]=k.length<<1,k.push(I=>N.slot(I));let T=l==null?void 0:l.config.facets;for(let N in m){let I=m[N],z=I[0].facet,Y=T&&T[N]||[];if(I.every(J=>J.type==0))if(v[z.id]=x.length<<1|1,bQ(Y,I))x.push(l.facet(z));else{let J=z.combine(I.map(q=>q.value));x.push(l&&z.compare(J,l.facet(z))?l.facet(z):J)}else{for(let J of I)J.type==0?(v[J.id]=x.length<<1|1,x.push(J.value)):(v[J.id]=k.length<<1,k.push(q=>J.dynamicSlot(q)));v[z.id]=k.length<<1,k.push(J=>mue(J,z,I))}}let M=k.map(N=>N(v));return new u6(o,p,M,v,x,m)}}function gue(u,o,i){let l=[[],[],[],[],[]],d=new Map;function m(p,v){let x=d.get(p);if(x!=null){if(x<=v)return;let k=l[x].indexOf(p);k>-1&&l[x].splice(k,1),p instanceof bJ&&i.delete(p.compartment)}if(d.set(p,v),Array.isArray(p))for(let k of p)m(k,v);else if(p instanceof bJ){if(i.has(p.compartment))throw new RangeError("Duplicate use of compartment in extensions");let k=o.get(p.compartment)||p.inner;i.set(p.compartment,k),m(k,v)}else if(p instanceof pse)m(p.inner,p.prec);else if(p instanceof Zl)l[v].push(p),p.provides&&m(p.provides,v);else if(p instanceof K$)l[v].push(p),p.facet.extensions&&m(p.facet.extensions,cy.default);else{let k=p.extension;if(!k)throw new Error(`Unrecognized extension value in extension set (${p}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);m(k,v)}}return m(u,cy.default),l.reduce((p,v)=>p.concat(v))}function WD(u,o){if(o&1)return 2;let i=o>>1,l=u.status[i];if(l==4)throw new Error("Cyclic dependency between fields and/or facets");if(l&2)return l;u.status[i]=4;let d=u.computeSlot(u,u.config.dynamicSlots[i]);return u.status[i]=2|d}function d6(u,o){return o&1?u.config.staticValues[o>>1]:u.values[o>>1]}const bse=Co.define(),vJ=Co.define({combine:u=>u.some(o=>o),static:!0}),vse=Co.define({combine:u=>u.length?u[0]:void 0,static:!0}),yse=Co.define(),wse=Co.define(),xse=Co.define(),Cse=Co.define({combine:u=>u.length?u[0]:!1});class Zg{constructor(o,i){this.type=o,this.value=i}static define(){return new pue}}class pue{of(o){return new Zg(this,o)}}class bue{constructor(o){this.map=o}of(o){return new Fs(this,o)}}class Fs{constructor(o,i){this.type=o,this.value=i}map(o){let i=this.type.map(this.value,o);return i===void 0?void 0:i==this.value?this:new Fs(this.type,i)}is(o){return this.type==o}static define(o={}){return new bue(o.map||(i=>i))}static mapEffects(o,i){if(!o.length)return o;let l=[];for(let d of o){let m=d.map(i);m&&l.push(m)}return l}}Fs.reconfigure=Fs.define();Fs.appendConfig=Fs.define();class rl{constructor(o,i,l,d,m,p){this.startState=o,this.changes=i,this.selection=l,this.effects=d,this.annotations=m,this.scrollIntoView=p,this._doc=null,this._state=null,l&&gse(l,i.newLength),m.some(v=>v.type==rl.time)||(this.annotations=m.concat(rl.time.of(Date.now())))}static create(o,i,l,d,m,p){return new rl(o,i,l,d,m,p)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(o){for(let i of this.annotations)if(i.type==o)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(o){let i=this.annotation(rl.userEvent);return!!(i&&(i==o||i.length>o.length&&i.slice(0,o.length)==o&&i[o.length]=="."))}}rl.time=Zg.define();rl.userEvent=Zg.define();rl.addToHistory=Zg.define();rl.remote=Zg.define();function vue(u,o){let i=[];for(let l=0,d=0;;){let m,p;if(l<u.length&&(d==o.length||o[d]>=u[l]))m=u[l++],p=u[l++];else if(d<o.length)m=o[d++],p=o[d++];else return i;!i.length||i[i.length-1]<m?i.push(m,p):i[i.length-1]<p&&(i[i.length-1]=p)}}function Sse(u,o,i){var l;let d,m,p;return i?(d=o.changes,m=sl.empty(o.changes.length),p=u.changes.compose(o.changes)):(d=o.changes.map(u.changes),m=u.changes.mapDesc(o.changes,!0),p=u.changes.compose(d)),{changes:p,selection:o.selection?o.selection.map(m):(l=u.selection)===null||l===void 0?void 0:l.map(d),effects:Fs.mapEffects(u.effects,d).concat(Fs.mapEffects(o.effects,m)),annotations:u.annotations.length?u.annotations.concat(o.annotations):o.annotations,scrollIntoView:u.scrollIntoView||o.scrollIntoView}}function yJ(u,o,i){let l=o.selection,d=f2(o.annotations);return o.userEvent&&(d=d.concat(rl.userEvent.of(o.userEvent))),{changes:o.changes instanceof sl?o.changes:sl.of(o.changes||[],i,u.facet(vse)),selection:l&&(l instanceof rn?l:rn.single(l.anchor,l.head)),effects:f2(o.effects),annotations:d,scrollIntoView:!!o.scrollIntoView}}function kse(u,o,i){let l=yJ(u,o.length?o[0]:{},u.doc.length);o.length&&o[0].filter===!1&&(i=!1);for(let m=1;m<o.length;m++){o[m].filter===!1&&(i=!1);let p=!!o[m].sequential;l=Sse(l,yJ(u,o[m],p?l.changes.newLength:u.doc.length),p)}let d=rl.create(u,l.changes,l.selection,l.effects,l.annotations,l.scrollIntoView);return wue(i?yue(d):d)}function yue(u){let o=u.startState,i=!0;for(let d of o.facet(yse)){let m=d(u);if(m===!1){i=!1;break}Array.isArray(m)&&(i=i===!0?m:vue(i,m))}if(i!==!0){let d,m;if(i===!1)m=u.changes.invertedDesc,d=sl.empty(o.doc.length);else{let p=u.changes.filter(i);d=p.changes,m=p.filtered.mapDesc(p.changes).invertedDesc}u=rl.create(o,d,u.selection&&u.selection.map(m),Fs.mapEffects(u.effects,m),u.annotations,u.scrollIntoView)}let l=o.facet(wse);for(let d=l.length-1;d>=0;d--){let m=l[d](u);m instanceof rl?u=m:Array.isArray(m)&&m.length==1&&m[0]instanceof rl?u=m[0]:u=kse(o,f2(m),!1)}return u}function wue(u){let o=u.startState,i=o.facet(xse),l=u;for(let d=i.length-1;d>=0;d--){let m=i[d](u);m&&Object.keys(m).length&&(l=Sse(l,yJ(o,m,u.changes.newLength),!0))}return l==u?u:rl.create(o,u.changes,u.selection,l.effects,l.annotations,l.scrollIntoView)}const xue=[];function f2(u){return u==null?xue:Array.isArray(u)?u:[u]}var zi=function(u){return u[u.Word=0]="Word",u[u.Space=1]="Space",u[u.Other=2]="Other",u}(zi||(zi={}));const Cue=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wJ;try{wJ=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(u){}function Sue(u){if(wJ)return wJ.test(u);for(let o=0;o<u.length;o++){let i=u[o];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||Cue.test(i)))return!0}return!1}function kue(u){return o=>{if(!/\S/.test(o))return zi.Space;if(Sue(o))return zi.Word;for(let i=0;i<u.length;i++)if(o.indexOf(u[i])>-1)return zi.Word;return zi.Other}}class lr{constructor(o,i,l,d,m,p){this.config=o,this.doc=i,this.selection=l,this.values=d,this.status=o.statusTemplate.slice(),this.computeSlot=m,p&&(p._state=this);for(let v=0;v<this.config.dynamicSlots.length;v++)WD(this,v<<1);this.computeSlot=null}field(o,i=!0){let l=this.config.address[o.id];if(l==null){if(i)throw new RangeError("Field is not present in this state");return}return WD(this,l),d6(this,l)}update(...o){return kse(this,o,!0)}applyTransaction(o){let i=this.config,{base:l,compartments:d}=i;for(let v of o.effects)v.is(gM.reconfigure)?(i&&(d=new Map,i.compartments.forEach((x,k)=>d.set(k,x)),i=null),d.set(v.value.compartment,v.value.extension)):v.is(Fs.reconfigure)?(i=null,l=v.value):v.is(Fs.appendConfig)&&(i=null,l=f2(l).concat(v.value));let m;i?m=o.startState.values.slice():(i=u6.resolve(l,d,this),m=new lr(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(x,k)=>k.reconfigure(x,this),null).values);let p=o.startState.facet(vJ)?o.newSelection:o.newSelection.asSingle();new lr(i,o.newDoc,p,m,(v,x)=>x.update(v,o),o)}replaceSelection(o){return typeof o=="string"&&(o=this.toText(o)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:o},range:rn.cursor(i.from+o.length)}))}changeByRange(o){let i=this.selection,l=o(i.ranges[0]),d=this.changes(l.changes),m=[l.range],p=f2(l.effects);for(let v=1;v<i.ranges.length;v++){let x=o(i.ranges[v]),k=this.changes(x.changes),T=k.map(d);for(let N=0;N<v;N++)m[N]=m[N].map(T);let M=d.mapDesc(k,!0);m.push(x.range.map(M)),d=d.compose(T),p=Fs.mapEffects(p,T).concat(Fs.mapEffects(f2(x.effects),M))}return{changes:d,selection:rn.create(m,i.mainIndex),effects:p}}changes(o=[]){return o instanceof sl?o:sl.of(o,this.doc.length,this.facet(lr.lineSeparator))}toText(o){return Or.of(o.split(this.facet(lr.lineSeparator)||hJ))}sliceDoc(o=0,i=this.doc.length){return this.doc.sliceString(o,i,this.lineBreak)}facet(o){let i=this.config.address[o.id];return i==null?o.default:(WD(this,i),d6(this,i))}toJSON(o){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(o)for(let l in o){let d=o[l];d instanceof Zl&&this.config.address[d.id]!=null&&(i[l]=d.spec.toJSON(this.field(o[l]),this))}return i}static fromJSON(o,i={},l){if(!o||typeof o.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let d=[];if(l){for(let m in l)if(Object.prototype.hasOwnProperty.call(o,m)){let p=l[m],v=o[m];d.push(p.init(x=>p.spec.fromJSON(v,x)))}}return lr.create({doc:o.doc,selection:rn.fromJSON(o.selection),extensions:i.extensions?d.concat([i.extensions]):d})}static create(o={}){let i=u6.resolve(o.extensions||[],new Map),l=o.doc instanceof Or?o.doc:Or.of((o.doc||"").split(i.staticFacet(lr.lineSeparator)||hJ)),d=o.selection?o.selection instanceof rn?o.selection:rn.single(o.selection.anchor,o.selection.head):rn.single(0);return gse(d,l.length),i.staticFacet(vJ)||(d=d.asSingle()),new lr(i,l,d,i.dynamicSlots.map(()=>null),(m,p)=>p.create(m),null)}get tabSize(){return this.facet(lr.tabSize)}get lineBreak(){return this.facet(lr.lineSeparator)||`
`}get readOnly(){return this.facet(Cse)}phrase(o,...i){for(let l of this.facet(lr.phrases))if(Object.prototype.hasOwnProperty.call(l,o)){o=l[o];break}return i.length&&(o=o.replace(/\$(\$|\d*)/g,(l,d)=>{if(d=="$")return"$";let m=+(d||1);return!m||m>i.length?l:i[m-1]})),o}languageDataAt(o,i,l=-1){let d=[];for(let m of this.facet(bse))for(let p of m(this,i,l))Object.prototype.hasOwnProperty.call(p,o)&&d.push(p[o]);return d}charCategorizer(o){return kue(this.languageDataAt("wordChars",o).join(""))}wordAt(o){let{text:i,from:l,length:d}=this.doc.lineAt(o),m=this.charCategorizer(o),p=o-l,v=o-l;for(;p>0;){let x=Wl(i,p,!1);if(m(i.slice(x,p))!=zi.Word)break;p=x}for(;v<d;){let x=Wl(i,v);if(m(i.slice(v,x))!=zi.Word)break;v=x}return p==v?null:rn.range(p+l,v+l)}}lr.allowMultipleSelections=vJ;lr.tabSize=Co.define({combine:u=>u.length?u[0]:4});lr.lineSeparator=vse;lr.readOnly=Cse;lr.phrases=Co.define({compare(u,o){let i=Object.keys(u),l=Object.keys(o);return i.length==l.length&&i.every(d=>u[d]==o[d])}});lr.languageData=bse;lr.changeFilter=yse;lr.transactionFilter=wse;lr.transactionExtender=xse;gM.reconfigure=Fs.define();function xm(u,o,i={}){let l={};for(let d of u)for(let m of Object.keys(d)){let p=d[m],v=l[m];if(v===void 0)l[m]=p;else if(!(v===p||p===void 0))if(Object.hasOwnProperty.call(i,m))l[m]=i[m](v,p);else throw new Error("Config merge conflict for field "+m)}for(let d in o)l[d]===void 0&&(l[d]=o[d]);return l}class xy{eq(o){return this==o}range(o,i=o){return xJ.create(o,i,this)}}xy.prototype.startSide=xy.prototype.endSide=0;xy.prototype.point=!1;xy.prototype.mapMode=qc.TrackDel;let xJ=class Ese{constructor(o,i,l){this.from=o,this.to=i,this.value=l}static create(o,i,l){return new Ese(o,i,l)}};function CJ(u,o){return u.from-o.from||u.value.startSide-o.value.startSide}class vQ{constructor(o,i,l,d){this.from=o,this.to=i,this.value=l,this.maxPoint=d}get length(){return this.to[this.to.length-1]}findIndex(o,i,l,d=0){let m=l?this.to:this.from;for(let p=d,v=m.length;;){if(p==v)return p;let x=p+v>>1,k=m[x]-o||(l?this.value[x].endSide:this.value[x].startSide)-i;if(x==p)return k>=0?p:v;k>=0?v=x:p=x+1}}between(o,i,l,d){for(let m=this.findIndex(i,-1e9,!0),p=this.findIndex(l,1e9,!1,m);m<p;m++)if(d(this.from[m]+o,this.to[m]+o,this.value[m])===!1)return!1}map(o,i){let l=[],d=[],m=[],p=-1,v=-1;for(let x=0;x<this.value.length;x++){let k=this.value[x],T=this.from[x]+o,M=this.to[x]+o,N,I;if(T==M){let z=i.mapPos(T,k.startSide,k.mapMode);if(z==null||(N=I=z,k.startSide!=k.endSide&&(I=i.mapPos(T,k.endSide),I<N)))continue}else if(N=i.mapPos(T,k.startSide),I=i.mapPos(M,k.endSide),N>I||N==I&&k.startSide>0&&k.endSide<=0)continue;(I-N||k.endSide-k.startSide)<0||(p<0&&(p=N),k.point&&(v=Math.max(v,I-N)),l.push(k),d.push(N-p),m.push(I-p))}return{mapped:l.length?new vQ(d,m,l,v):null,pos:p}}}class yr{constructor(o,i,l,d){this.chunkPos=o,this.chunk=i,this.nextLayer=l,this.maxPoint=d}static create(o,i,l,d){return new yr(o,i,l,d)}get length(){let o=this.chunk.length-1;return o<0?0:Math.max(this.chunkEnd(o),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let o=this.nextLayer.size;for(let i of this.chunk)o+=i.value.length;return o}chunkEnd(o){return this.chunkPos[o]+this.chunk[o].length}update(o){let{add:i=[],sort:l=!1,filterFrom:d=0,filterTo:m=this.length}=o,p=o.filter;if(i.length==0&&!p)return this;if(l&&(i=i.slice().sort(CJ)),this.isEmpty)return i.length?yr.of(i):this;let v=new Ase(this,null,-1).goto(0),x=0,k=[],T=new l0;for(;v.value||x<i.length;)if(x<i.length&&(v.from-i[x].from||v.startSide-i[x].value.startSide)>=0){let M=i[x++];T.addInner(M.from,M.to,M.value)||k.push(M)}else v.rangeIndex==1&&v.chunkIndex<this.chunk.length&&(x==i.length||this.chunkEnd(v.chunkIndex)<i[x].from)&&(!p||d>this.chunkEnd(v.chunkIndex)||m<this.chunkPos[v.chunkIndex])&&T.addChunk(this.chunkPos[v.chunkIndex],this.chunk[v.chunkIndex])?v.nextChunk():((!p||d>v.to||m<v.from||p(v.from,v.to,v.value))&&(T.addInner(v.from,v.to,v.value)||k.push(xJ.create(v.from,v.to,v.value))),v.next());return T.finishInner(this.nextLayer.isEmpty&&!k.length?yr.empty:this.nextLayer.update({add:k,filter:p,filterFrom:d,filterTo:m}))}map(o){if(o.empty||this.isEmpty)return this;let i=[],l=[],d=-1;for(let p=0;p<this.chunk.length;p++){let v=this.chunkPos[p],x=this.chunk[p],k=o.touchesRange(v,v+x.length);if(k===!1)d=Math.max(d,x.maxPoint),i.push(x),l.push(o.mapPos(v));else if(k===!0){let{mapped:T,pos:M}=x.map(v,o);T&&(d=Math.max(d,T.maxPoint),i.push(T),l.push(M))}}let m=this.nextLayer.map(o);return i.length==0?m:new yr(l,i,m||yr.empty,d)}between(o,i,l){if(!this.isEmpty){for(let d=0;d<this.chunk.length;d++){let m=this.chunkPos[d],p=this.chunk[d];if(i>=m&&o<=m+p.length&&p.between(m,o-m,i-m,l)===!1)return}this.nextLayer.between(o,i,l)}}iter(o=0){return JD.from([this]).goto(o)}get isEmpty(){return this.nextLayer==this}static iter(o,i=0){return JD.from(o).goto(i)}static compare(o,i,l,d,m=-1){let p=o.filter(M=>M.maxPoint>0||!M.isEmpty&&M.maxPoint>=m),v=i.filter(M=>M.maxPoint>0||!M.isEmpty&&M.maxPoint>=m),x=Kte(p,v,l),k=new PD(p,x,m),T=new PD(v,x,m);l.iterGaps((M,N,I)=>Yte(k,M,T,N,I,d)),l.empty&&l.length==0&&Yte(k,0,T,0,0,d)}static eq(o,i,l=0,d){d==null&&(d=999999999);let m=o.filter(T=>!T.isEmpty&&i.indexOf(T)<0),p=i.filter(T=>!T.isEmpty&&o.indexOf(T)<0);if(m.length!=p.length)return!1;if(!m.length)return!0;let v=Kte(m,p),x=new PD(m,v,0).goto(l),k=new PD(p,v,0).goto(l);for(;;){if(x.to!=k.to||!SJ(x.active,k.active)||x.point&&(!k.point||!x.point.eq(k.point)))return!1;if(x.to>d)return!0;x.next(),k.next()}}static spans(o,i,l,d,m=-1){let p=new PD(o,null,m).goto(i),v=i,x=p.openStart;for(;;){let k=Math.min(p.to,l);if(p.point){let T=p.activeForPoint(p.to),M=p.pointFrom<i?T.length+1:p.point.startSide<0?T.length:Math.min(T.length,x);d.point(v,k,p.point,T,M,p.pointRank),x=Math.min(p.openEnd(k),T.length)}else k>v&&(d.span(v,k,p.active,x),x=p.openEnd(k));if(p.to>l)return x+(p.point&&p.to>l?1:0);v=p.to,p.next()}}static of(o,i=!1){let l=new l0;for(let d of o instanceof xJ?[o]:i?Eue(o):o)l.add(d.from,d.to,d.value);return l.finish()}static join(o){if(!o.length)return yr.empty;let i=o[o.length-1];for(let l=o.length-2;l>=0;l--)for(let d=o[l];d!=yr.empty;d=d.nextLayer)i=new yr(d.chunkPos,d.chunk,i,Math.max(d.maxPoint,i.maxPoint));return i}}yr.empty=new yr([],[],null,-1);function Eue(u){if(u.length>1)for(let o=u[0],i=1;i<u.length;i++){let l=u[i];if(CJ(o,l)>0)return u.slice().sort(CJ);o=l}return u}yr.empty.nextLayer=yr.empty;class l0{finishChunk(o){this.chunks.push(new vQ(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,o&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(o,i,l){this.addInner(o,i,l)||(this.nextLayer||(this.nextLayer=new l0)).add(o,i,l)}addInner(o,i,l){let d=o-this.lastTo||l.startSide-this.last.endSide;if(d<=0&&(o-this.lastFrom||l.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return d<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=o),this.from.push(o-this.chunkStart),this.to.push(i-this.chunkStart),this.last=l,this.lastFrom=o,this.lastTo=i,this.value.push(l),l.point&&(this.maxPoint=Math.max(this.maxPoint,i-o)),!0)}addChunk(o,i){if((o-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(o);let l=i.value.length-1;return this.last=i.value[l],this.lastFrom=i.from[l]+o,this.lastTo=i.to[l]+o,!0}finish(){return this.finishInner(yr.empty)}finishInner(o){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return o;let i=yr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(o):o,this.setMaxPoint);return this.from=null,i}}function Kte(u,o,i){let l=new Map;for(let m of u)for(let p=0;p<m.chunk.length;p++)m.chunk[p].maxPoint<=0&&l.set(m.chunk[p],m.chunkPos[p]);let d=new Set;for(let m of o)for(let p=0;p<m.chunk.length;p++){let v=l.get(m.chunk[p]);v!=null&&(i?i.mapPos(v):v)==m.chunkPos[p]&&!(i!=null&&i.touchesRange(v,v+m.chunk[p].length))&&d.add(m.chunk[p])}return d}class Ase{constructor(o,i,l,d=0){this.layer=o,this.skip=i,this.minPoint=l,this.rank=d}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(o,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(o,i,!1),this}gotoInner(o,i,l){for(;this.chunkIndex<this.layer.chunk.length;){let d=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(d)||this.layer.chunkEnd(this.chunkIndex)<o||d.maxPoint<this.minPoint))break;this.chunkIndex++,l=!1}if(this.chunkIndex<this.layer.chunk.length){let d=this.layer.chunk[this.chunkIndex].findIndex(o-this.layer.chunkPos[this.chunkIndex],i,!0);(!l||this.rangeIndex<d)&&this.setRangeIndex(d)}this.next()}forward(o,i){(this.to-o||this.endSide-i)<0&&this.gotoInner(o,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let o=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],l=o+i.from[this.rangeIndex];if(this.from=l,this.to=o+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(o){if(o==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=o}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(o){return this.from-o.from||this.startSide-o.startSide||this.rank-o.rank||this.to-o.to||this.endSide-o.endSide}}class JD{constructor(o){this.heap=o}static from(o,i=null,l=-1){let d=[];for(let m=0;m<o.length;m++)for(let p=o[m];!p.isEmpty;p=p.nextLayer)p.maxPoint>=l&&d.push(new Ase(p,i,l,m));return d.length==1?d[0]:new JD(d)}get startSide(){return this.value?this.value.startSide:0}goto(o,i=-1e9){for(let l of this.heap)l.goto(o,i);for(let l=this.heap.length>>1;l>=0;l--)IX(this.heap,l);return this.next(),this}forward(o,i){for(let l of this.heap)l.forward(o,i);for(let l=this.heap.length>>1;l>=0;l--)IX(this.heap,l);(this.to-o||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let o=this.heap[0];this.from=o.from,this.to=o.to,this.value=o.value,this.rank=o.rank,o.value&&o.next(),IX(this.heap,0)}}}function IX(u,o){for(let i=u[o];;){let l=(o<<1)+1;if(l>=u.length)break;let d=u[l];if(l+1<u.length&&d.compare(u[l+1])>=0&&(d=u[l+1],l++),i.compare(d)<0)break;u[l]=i,u[o]=d,o=l}}class PD{constructor(o,i,l){this.minPoint=l,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=JD.from(o,i,l)}goto(o,i=-1e9){return this.cursor.goto(o,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=o,this.endSide=i,this.openStart=-1,this.next(),this}forward(o,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-o||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(o,i)}removeActive(o){C$(this.active,o),C$(this.activeTo,o),C$(this.activeRank,o),this.minActive=Xte(this.active,this.activeTo)}addActive(o){let i=0,{value:l,to:d,rank:m}=this.cursor;for(;i<this.activeRank.length&&(m-this.activeRank[i]||d-this.activeTo[i])>0;)i++;S$(this.active,i,l),S$(this.activeTo,i,d),S$(this.activeRank,i,m),o&&S$(o,i,this.cursor.from),this.minActive=Xte(this.active,this.activeTo)}next(){let o=this.to,i=this.point;this.point=null;let l=this.openStart<0?[]:null;for(;;){let d=this.minActive;if(d>-1&&(this.activeTo[d]-this.cursor.from||this.active[d].endSide-this.cursor.startSide)<0){if(this.activeTo[d]>o){this.to=this.activeTo[d],this.endSide=this.active[d].endSide;break}this.removeActive(d),l&&C$(l,d)}else if(this.cursor.value)if(this.cursor.from>o){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let m=this.cursor.value;if(!m.point)this.addActive(l),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=m,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=m.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(l){this.openStart=0;for(let d=l.length-1;d>=0&&l[d]<o;d--)this.openStart++}}activeForPoint(o){if(!this.active.length)return this.active;let i=[];for(let l=this.active.length-1;l>=0&&!(this.activeRank[l]<this.pointRank);l--)(this.activeTo[l]>o||this.activeTo[l]==o&&this.active[l].endSide>=this.point.endSide)&&i.push(this.active[l]);return i.reverse()}openEnd(o){let i=0;for(let l=this.activeTo.length-1;l>=0&&this.activeTo[l]>o;l--)i++;return i}}function Yte(u,o,i,l,d,m){u.goto(o),i.goto(l);let p=l+d,v=l,x=l-o;for(;;){let k=u.to+x-i.to||u.endSide-i.endSide,T=k<0?u.to+x:i.to,M=Math.min(T,p);if(u.point||i.point?u.point&&i.point&&(u.point==i.point||u.point.eq(i.point))&&SJ(u.activeForPoint(u.to),i.activeForPoint(i.to))||m.comparePoint(v,M,u.point,i.point):M>v&&!SJ(u.active,i.active)&&m.compareRange(v,M,u.active,i.active),T>p)break;v=T,k<=0&&u.next(),k>=0&&i.next()}}function SJ(u,o){if(u.length!=o.length)return!1;for(let i=0;i<u.length;i++)if(u[i]!=o[i]&&!u[i].eq(o[i]))return!1;return!0}function C$(u,o){for(let i=o,l=u.length-1;i<l;i++)u[i]=u[i+1];u.pop()}function S$(u,o,i){for(let l=u.length-1;l>=o;l--)u[l+1]=u[l];u[o]=i}function Xte(u,o){let i=-1,l=1e9;for(let d=0;d<o.length;d++)(o[d]-l||u[d].endSide-u[i].endSide)<0&&(i=d,l=o[d]);return i}function P2(u,o,i=u.length){let l=0;for(let d=0;d<i;)u.charCodeAt(d)==9?(l+=o-l%o,d++):(l++,d=Wl(u,d));return l}function kJ(u,o,i,l){for(let d=0,m=0;;){if(m>=o)return d;if(d==u.length)break;m+=u.charCodeAt(d)==9?i-m%i:1,d=Wl(u,d)}return l===!0?-1:u.length}const EJ="ͼ",Jte=typeof Symbol=="undefined"?"__"+EJ:Symbol.for(EJ),AJ=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Qte=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class c0{constructor(o,i){this.rules=[];let{finish:l}=i||{};function d(p){return/^@/.test(p)?[p]:p.split(/,\s*/)}function m(p,v,x,k){let T=[],M=/^@(\w+)\b/.exec(p[0]),N=M&&M[1]=="keyframes";if(M&&v==null)return x.push(p[0]+";");for(let I in v){let z=v[I];if(/&/.test(I))m(I.split(/,\s*/).map(Y=>p.map(J=>Y.replace(/&/,J))).reduce((Y,J)=>Y.concat(J)),z,x);else if(z&&typeof z=="object"){if(!M)throw new RangeError("The value of a property ("+I+") should be a primitive value.");m(d(I),z,T,N)}else z!=null&&T.push(I.replace(/_.*/,"").replace(/[A-Z]/g,Y=>"-"+Y.toLowerCase())+": "+z+";")}(T.length||N)&&x.push((l&&!M&&!k?p.map(l):p).join(", ")+" {"+T.join(" ")+"}")}for(let p in o)m(d(p),o[p],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let o=Qte[Jte]||1;return Qte[Jte]=o+1,EJ+o.toString(36)}static mount(o,i,l){let d=o[AJ],m=l&&l.nonce;d?m&&d.setNonce(m):d=new Aue(o,m),d.mount(Array.isArray(i)?i:[i],o)}}let ene=new Map;class Aue{constructor(o,i){let l=o.ownerDocument||o,d=l.defaultView;if(!o.head&&o.adoptedStyleSheets&&d.CSSStyleSheet){let m=ene.get(l);if(m)return o[AJ]=m;this.sheet=new d.CSSStyleSheet,ene.set(l,this)}else this.styleTag=l.createElement("style"),i&&this.styleTag.setAttribute("nonce",i);this.modules=[],o[AJ]=this}mount(o,i){let l=this.sheet,d=0,m=0;for(let p=0;p<o.length;p++){let v=o[p],x=this.modules.indexOf(v);if(x<m&&x>-1&&(this.modules.splice(x,1),m--,x=-1),x==-1){if(this.modules.splice(m++,0,v),l)for(let k=0;k<v.rules.length;k++)l.insertRule(v.rules[k],d++)}else{for(;m<x;)d+=this.modules[m++].rules.length;d+=v.rules.length,m++}}if(l)i.adoptedStyleSheets.indexOf(this.sheet)<0&&(i.adoptedStyleSheets=[this.sheet,...i.adoptedStyleSheets]);else{let p="";for(let x=0;x<this.modules.length;x++)p+=this.modules[x].getRules()+`
`;this.styleTag.textContent=p;let v=i.head||i;this.styleTag.parentNode!=v&&v.insertBefore(this.styleTag,v.firstChild)}}setNonce(o){this.styleTag&&this.styleTag.getAttribute("nonce")!=o&&this.styleTag.setAttribute("nonce",o)}}var u0={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},QD={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Tue=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),Oue=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vl=0;Vl<10;Vl++)u0[48+Vl]=u0[96+Vl]=String(Vl);for(var Vl=1;Vl<=24;Vl++)u0[Vl+111]="F"+Vl;for(var Vl=65;Vl<=90;Vl++)u0[Vl]=String.fromCharCode(Vl+32),QD[Vl]=String.fromCharCode(Vl);for(var LX in u0)QD.hasOwnProperty(LX)||(QD[LX]=u0[LX]);function _ue(u){var o=Tue&&u.metaKey&&u.shiftKey&&!u.ctrlKey&&!u.altKey||Oue&&u.shiftKey&&u.key&&u.key.length==1||u.key=="Unidentified",i=!o&&u.key||(u.shiftKey?QD:u0)[u.keyCode]||u.key||"Unidentified";return i=="Esc"&&(i="Escape"),i=="Del"&&(i="Delete"),i=="Left"&&(i="ArrowLeft"),i=="Up"&&(i="ArrowUp"),i=="Right"&&(i="ArrowRight"),i=="Down"&&(i="ArrowDown"),i}function eM(u){let o;return u.nodeType==11?o=u.getSelection?u:u.ownerDocument:o=u,o.getSelection()}function TJ(u,o){return o?u==o||u.contains(o.nodeType!=1?o.parentNode:o):!1}function Due(u){let o=u.activeElement;for(;o&&o.shadowRoot;)o=o.shadowRoot.activeElement;return o}function Y$(u,o){if(!o.anchorNode)return!1;try{return TJ(u,o.anchorNode)}catch(i){return!1}}function y2(u){return u.nodeType==3?Sy(u,0,u.nodeValue.length).getClientRects():u.nodeType==1?u.getClientRects():[]}function jD(u,o,i,l){return i?tne(u,o,i,l,-1)||tne(u,o,i,l,1):!1}function Cy(u){for(var o=0;;o++)if(u=u.previousSibling,!u)return o}function f6(u){return u.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(u.nodeName)}function tne(u,o,i,l,d){for(;;){if(u==i&&o==l)return!0;if(o==(d<0?0:Ug(u))){if(u.nodeName=="DIV")return!1;let m=u.parentNode;if(!m||m.nodeType!=1)return!1;o=Cy(u)+(d<0?0:1),u=m}else if(u.nodeType==1){if(u=u.childNodes[o+(d<0?-1:0)],u.nodeType==1&&u.contentEditable=="false")return!1;o=d<0?Ug(u):0}else return!1}}function Ug(u){return u.nodeType==3?u.nodeValue.length:u.childNodes.length}function pM(u,o){let i=o?u.left:u.right;return{left:i,right:i,top:u.top,bottom:u.bottom}}function Mue(u){let o=u.visualViewport;return o?{left:0,right:o.width,top:0,bottom:o.height}:{left:0,right:u.innerWidth,top:0,bottom:u.innerHeight}}function Tse(u,o){let i=o.width/u.offsetWidth,l=o.height/u.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(o.width-u.offsetWidth)<1)&&(i=1),(l>.995&&l<1.005||!isFinite(l)||Math.abs(o.height-u.offsetHeight)<1)&&(l=1),{scaleX:i,scaleY:l}}function Pue(u,o,i,l,d,m,p,v){let x=u.ownerDocument,k=x.defaultView||window;for(let T=u,M=!1;T&&!M;)if(T.nodeType==1){let N,I=T==x.body,z=1,Y=1;if(I)N=Mue(k);else{if(/^(fixed|sticky)$/.test(getComputedStyle(T).position)&&(M=!0),T.scrollHeight<=T.clientHeight&&T.scrollWidth<=T.clientWidth){T=T.assignedSlot||T.parentNode;continue}let ae=T.getBoundingClientRect();({scaleX:z,scaleY:Y}=Tse(T,ae)),N={left:ae.left,right:ae.left+T.clientWidth*z,top:ae.top,bottom:ae.top+T.clientHeight*Y}}let J=0,q=0;if(d=="nearest")o.top<N.top?(q=-(N.top-o.top+p),i>0&&o.bottom>N.bottom+q&&(q=o.bottom-N.bottom+q+p)):o.bottom>N.bottom&&(q=o.bottom-N.bottom+p,i<0&&o.top-q<N.top&&(q=-(N.top+q-o.top+p)));else{let ae=o.bottom-o.top,Z=N.bottom-N.top;q=(d=="center"&&ae<=Z?o.top+ae/2-Z/2:d=="start"||d=="center"&&i<0?o.top-p:o.bottom-Z+p)-N.top}if(l=="nearest"?o.left<N.left?(J=-(N.left-o.left+m),i>0&&o.right>N.right+J&&(J=o.right-N.right+J+m)):o.right>N.right&&(J=o.right-N.right+m,i<0&&o.left<N.left+J&&(J=-(N.left+J-o.left+m))):J=(l=="center"?o.left+(o.right-o.left)/2-(N.right-N.left)/2:l=="start"==v?o.left-m:o.right-(N.right-N.left)+m)-N.left,J||q)if(I)k.scrollBy(J,q);else{let ae=0,Z=0;if(q){let ce=T.scrollTop;T.scrollTop+=q/Y,Z=(T.scrollTop-ce)*Y}if(J){let ce=T.scrollLeft;T.scrollLeft+=J/z,ae=(T.scrollLeft-ce)*z}o={left:o.left-ae,top:o.top-Z,right:o.right-ae,bottom:o.bottom-Z},ae&&Math.abs(ae-J)<1&&(l="nearest"),Z&&Math.abs(Z-q)<1&&(d="nearest")}if(I)break;T=T.assignedSlot||T.parentNode}else if(T.nodeType==11)T=T.host;else break}function Rue(u){let o=u.ownerDocument,i,l;for(let d=u.parentNode;d&&!(d==o.body||i&&l);)if(d.nodeType==1)!l&&d.scrollHeight>d.clientHeight&&(l=d),!i&&d.scrollWidth>d.clientWidth&&(i=d),d=d.assignedSlot||d.parentNode;else if(d.nodeType==11)d=d.host;else break;return{x:i,y:l}}class Nue{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(o){return this.anchorNode==o.anchorNode&&this.anchorOffset==o.anchorOffset&&this.focusNode==o.focusNode&&this.focusOffset==o.focusOffset}setRange(o){let{anchorNode:i,focusNode:l}=o;this.set(i,Math.min(o.anchorOffset,i?Ug(i):0),l,Math.min(o.focusOffset,l?Ug(l):0))}set(o,i,l,d){this.anchorNode=o,this.anchorOffset=i,this.focusNode=l,this.focusOffset=d}}let r2=null;function Ose(u){if(u.setActive)return u.setActive();if(r2)return u.focus(r2);let o=[];for(let i=u;i&&(o.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(u.focus(r2==null?{get preventScroll(){return r2={preventScroll:!0},!0}}:void 0),!r2){r2=!1;for(let i=0;i<o.length;){let l=o[i++],d=o[i++],m=o[i++];l.scrollTop!=d&&(l.scrollTop=d),l.scrollLeft!=m&&(l.scrollLeft=m)}}}let nne;function Sy(u,o,i=o){let l=nne||(nne=document.createRange());return l.setEnd(u,i),l.setStart(u,o),l}function h2(u,o,i,l){let d={key:o,code:o,keyCode:i,which:i,cancelable:!0};l&&({altKey:d.altKey,ctrlKey:d.ctrlKey,shiftKey:d.shiftKey,metaKey:d.metaKey}=l);let m=new KeyboardEvent("keydown",d);m.synthetic=!0,u.dispatchEvent(m);let p=new KeyboardEvent("keyup",d);return p.synthetic=!0,u.dispatchEvent(p),m.defaultPrevented||p.defaultPrevented}function Bue(u){for(;u;){if(u&&(u.nodeType==9||u.nodeType==11&&u.host))return u;u=u.assignedSlot||u.parentNode}return null}function _se(u){for(;u.attributes.length;)u.removeAttributeNode(u.attributes[0])}function Fue(u,o){let i=o.focusNode,l=o.focusOffset;if(!i||o.anchorNode!=i||o.anchorOffset!=l)return!1;for(l=Math.min(l,Ug(i));;)if(l){if(i.nodeType!=1)return!1;let d=i.childNodes[l-1];d.contentEditable=="false"?l--:(i=d,l=Ug(i))}else{if(i==u)return!0;l=Cy(i),i=i.parentNode}}function Dse(u){return u.scrollTop>Math.max(1,u.scrollHeight-u.clientHeight-4)}function Mse(u,o){for(let i=u,l=o;;){if(i.nodeType==3&&l>0)return{node:i,offset:l};if(i.nodeType==1&&l>0){if(i.contentEditable=="false")return null;i=i.childNodes[l-1],l=Ug(i)}else if(i.parentNode&&!f6(i))l=Cy(i),i=i.parentNode;else return null}}function Pse(u,o){for(let i=u,l=o;;){if(i.nodeType==3&&l<i.nodeValue.length)return{node:i,offset:l};if(i.nodeType==1&&l<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[l],l=0}else if(i.parentNode&&!f6(i))l=Cy(i)+1,i=i.parentNode;else return null}}class kc{constructor(o,i,l=!0){this.node=o,this.offset=i,this.precise=l}static before(o,i){return new kc(o.parentNode,Cy(o),i)}static after(o,i){return new kc(o.parentNode,Cy(o)+1,i)}}const yQ=[];class li{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(o){let i=this.posAtStart;for(let l of this.children){if(l==o)return i;i+=l.length+l.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(o){return this.posBefore(o)+o.length}sync(o,i){if(this.flags&2){let l=this.dom,d=null,m;for(let p of this.children){if(p.flags&7){if(!p.dom&&(m=d?d.nextSibling:l.firstChild)){let v=li.get(m);(!v||!v.parent&&v.canReuseDOM(p))&&p.reuseDOM(m)}p.sync(o,i),p.flags&=-8}if(m=d?d.nextSibling:l.firstChild,i&&!i.written&&i.node==l&&m!=p.dom&&(i.written=!0),p.dom.parentNode==l)for(;m&&m!=p.dom;)m=one(m);else l.insertBefore(p.dom,m);d=p.dom}for(m=d?d.nextSibling:l.firstChild,m&&i&&i.node==l&&(i.written=!0);m;)m=one(m)}else if(this.flags&1)for(let l of this.children)l.flags&7&&(l.sync(o,i),l.flags&=-8)}reuseDOM(o){}localPosFromDOM(o,i){let l;if(o==this.dom)l=this.dom.childNodes[i];else{let d=Ug(o)==0?0:i==0?-1:1;for(;;){let m=o.parentNode;if(m==this.dom)break;d==0&&m.firstChild!=m.lastChild&&(o==m.firstChild?d=-1:d=1),o=m}d<0?l=o:l=o.nextSibling}if(l==this.dom.firstChild)return 0;for(;l&&!li.get(l);)l=l.nextSibling;if(!l)return this.length;for(let d=0,m=0;;d++){let p=this.children[d];if(p.dom==l)return m;m+=p.length+p.breakAfter}}domBoundsAround(o,i,l=0){let d=-1,m=-1,p=-1,v=-1;for(let x=0,k=l,T=l;x<this.children.length;x++){let M=this.children[x],N=k+M.length;if(k<o&&N>i)return M.domBoundsAround(o,i,k);if(N>=o&&d==-1&&(d=x,m=k),k>i&&M.dom.parentNode==this.dom){p=x,v=T;break}T=N,k=N+M.breakAfter}return{from:m,to:v<0?l+this.length:v,startDOM:(d?this.children[d-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:p<this.children.length&&p>=0?this.children[p].dom:null}}markDirty(o=!1){this.flags|=2,this.markParentsDirty(o)}markParentsDirty(o){for(let i=this.parent;i;i=i.parent){if(o&&(i.flags|=2),i.flags&1)return;i.flags|=1,o=!1}}setParent(o){this.parent!=o&&(this.parent=o,this.flags&7&&this.markParentsDirty(!0))}setDOM(o){this.dom!=o&&(this.dom&&(this.dom.cmView=null),this.dom=o,o.cmView=this)}get rootView(){for(let o=this;;){let i=o.parent;if(!i)return o;o=i}}replaceChildren(o,i,l=yQ){this.markDirty();for(let d=o;d<i;d++){let m=this.children[d];m.parent==this&&l.indexOf(m)<0&&m.destroy()}this.children.splice(o,i-o,...l);for(let d=0;d<l.length;d++)l[d].setParent(this)}ignoreMutation(o){return!1}ignoreEvent(o){return!1}childCursor(o=this.length){return new Rse(this.children,o,this.children.length)}childPos(o,i=1){return this.childCursor().findPos(o,i)}toString(){let o=this.constructor.name.replace("View","");return o+(this.children.length?"("+this.children.join()+")":this.length?"["+(o=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(o){return o.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(o,i,l,d,m,p){return!1}become(o){return!1}canReuseDOM(o){return o.constructor==this.constructor&&!((this.flags|o.flags)&8)}getSide(){return 0}destroy(){for(let o of this.children)o.parent==this&&o.destroy();this.parent=null}}li.prototype.breakAfter=0;function one(u){let o=u.nextSibling;return u.parentNode.removeChild(u),o}class Rse{constructor(o,i,l){this.children=o,this.pos=i,this.i=l,this.off=0}findPos(o,i=1){for(;;){if(o>this.pos||o==this.pos&&(i>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=o-this.pos,this;let l=this.children[--this.i];this.pos-=l.length+l.breakAfter}}}function Nse(u,o,i,l,d,m,p,v,x){let{children:k}=u,T=k.length?k[o]:null,M=m.length?m[m.length-1]:null,N=M?M.breakAfter:p;if(!(o==l&&T&&!p&&!N&&m.length<2&&T.merge(i,d,m.length?M:null,i==0,v,x))){if(l<k.length){let I=k[l];I&&(d<I.length||I.breakAfter&&(M!=null&&M.breakAfter))?(o==l&&(I=I.split(d),d=0),!N&&M&&I.merge(0,d,M,!0,0,x)?m[m.length-1]=I:((d||I.children.length&&!I.children[0].length)&&I.merge(0,d,null,!1,0,x),m.push(I))):I!=null&&I.breakAfter&&(M?M.breakAfter=1:p=1),l++}for(T&&(T.breakAfter=p,i>0&&(!p&&m.length&&T.merge(i,T.length,m[0],!1,v,0)?T.breakAfter=m.shift().breakAfter:(i<T.length||T.children.length&&T.children[T.children.length-1].length==0)&&T.merge(i,T.length,null,!1,v,0),o++));o<l&&m.length;)if(k[l-1].become(m[m.length-1]))l--,m.pop(),x=m.length?0:v;else if(k[o].become(m[0]))o++,m.shift(),v=m.length?0:x;else break;!m.length&&o&&l<k.length&&!k[o-1].breakAfter&&k[l].merge(0,0,k[o-1],!1,v,x)&&o--,(o<l||m.length)&&u.replaceChildren(o,l,m)}}function Bse(u,o,i,l,d,m){let p=u.childCursor(),{i:v,off:x}=p.findPos(i,1),{i:k,off:T}=p.findPos(o,-1),M=o-i;for(let N of l)M+=N.length;u.length+=M,Nse(u,k,T,v,x,l,0,d,m)}let Tu=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},OJ=typeof document!="undefined"?document:{documentElement:{style:{}}};const _J=/Edge\/(\d+)/.exec(Tu.userAgent),Fse=/MSIE \d/.test(Tu.userAgent),DJ=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tu.userAgent),$6=!!(Fse||DJ||_J),sne=!$6&&/gecko\/(\d+)/i.test(Tu.userAgent),$X=!$6&&/Chrome\/(\d+)/.exec(Tu.userAgent),rne="webkitFontSmoothing"in OJ.documentElement.style,Ise=!$6&&/Apple Computer/.test(Tu.vendor),ine=Ise&&(/Mobile\/\w+/.test(Tu.userAgent)||Tu.maxTouchPoints>2);var To={mac:ine||/Mac/.test(Tu.platform),windows:/Win/.test(Tu.platform),linux:/Linux|X11/.test(Tu.platform),ie:$6,ie_version:Fse?OJ.documentMode||6:DJ?+DJ[1]:_J?+_J[1]:0,gecko:sne,gecko_version:sne?+(/Firefox\/(\d+)/.exec(Tu.userAgent)||[0,0])[1]:0,chrome:!!$X,chrome_version:$X?+$X[1]:0,ios:ine,android:/Android\b/.test(Tu.userAgent),webkit:rne,safari:Ise,webkit_version:rne?+(/\bAppleWebKit\/(\d+)/.exec(Tu.userAgent)||[0,0])[1]:0,tabSize:OJ.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Iue=256;class hh extends li{constructor(o){super(),this.text=o}get length(){return this.text.length}createDOM(o){this.setDOM(o||document.createTextNode(this.text))}sync(o,i){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(i&&i.node==this.dom&&(i.written=!0),this.dom.nodeValue=this.text)}reuseDOM(o){o.nodeType==3&&this.createDOM(o)}merge(o,i,l){return this.flags&8||l&&(!(l instanceof hh)||this.length-(i-o)+l.length>Iue||l.flags&8)?!1:(this.text=this.text.slice(0,o)+(l?l.text:"")+this.text.slice(i),this.markDirty(),!0)}split(o){let i=new hh(this.text.slice(o));return this.text=this.text.slice(0,o),this.markDirty(),i.flags|=this.flags&8,i}localPosFromDOM(o,i){return o==this.dom?i:i?this.text.length:0}domAtPos(o){return new kc(this.dom,o)}domBoundsAround(o,i,l){return{from:l,to:l+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(o,i){return Lue(this.dom,o,i)}}class Wg extends li{constructor(o,i=[],l=0){super(),this.mark=o,this.children=i,this.length=l;for(let d of i)d.setParent(this)}setAttrs(o){if(_se(o),this.mark.class&&(o.className=this.mark.class),this.mark.attrs)for(let i in this.mark.attrs)o.setAttribute(i,this.mark.attrs[i]);return o}canReuseDOM(o){return super.canReuseDOM(o)&&!((this.flags|o.flags)&8)}reuseDOM(o){o.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(o),this.flags|=6)}sync(o,i){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(o,i)}merge(o,i,l,d,m,p){return l&&(!(l instanceof Wg&&l.mark.eq(this.mark))||o&&m<=0||i<this.length&&p<=0)?!1:(Bse(this,o,i,l?l.children.slice():[],m-1,p-1),this.markDirty(),!0)}split(o){let i=[],l=0,d=-1,m=0;for(let v of this.children){let x=l+v.length;x>o&&i.push(l<o?v.split(o-l):v),d<0&&l>=o&&(d=m),l=x,m++}let p=this.length-o;return this.length=o,d>-1&&(this.children.length=d,this.markDirty()),new Wg(this.mark,i,p)}domAtPos(o){return Lse(this,o)}coordsAt(o,i){return Hse(this,o,i)}}function Lue(u,o,i){let l=u.nodeValue.length;o>l&&(o=l);let d=o,m=o,p=0;o==0&&i<0||o==l&&i>=0?To.chrome||To.gecko||(o?(d--,p=1):m<l&&(m++,p=-1)):i<0?d--:m<l&&m++;let v=Sy(u,d,m).getClientRects();if(!v.length)return null;let x=v[(p?p<0:i>=0)?0:v.length-1];return To.safari&&!p&&x.width==0&&(x=Array.prototype.find.call(v,k=>k.width)||x),p?pM(x,p<0):x||null}class e0 extends li{static create(o,i,l){return new e0(o,i,l)}constructor(o,i,l){super(),this.widget=o,this.length=i,this.side=l,this.prevWidget=null}split(o){let i=e0.create(this.widget,this.length-o,this.side);return this.length-=o,i}sync(o){(!this.dom||!this.widget.updateDOM(this.dom,o))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(o)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(o,i,l,d,m,p){return l&&(!(l instanceof e0)||!this.widget.compare(l.widget)||o>0&&m<=0||i<this.length&&p<=0)?!1:(this.length=o+(l?l.length:0)+(this.length-i),!0)}become(o){return o instanceof e0&&o.side==this.side&&this.widget.constructor==o.widget.constructor?(this.widget.compare(o.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=o.widget,this.length=o.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(o){return this.widget.ignoreEvent(o)}get overrideDOMText(){if(this.length==0)return Or.empty;let o=this;for(;o.parent;)o=o.parent;let{view:i}=o,l=i&&i.state.doc,d=this.posAtStart;return l?l.slice(d,d+this.length):Or.empty}domAtPos(o){return(this.length?o==0:this.side>0)?kc.before(this.dom):kc.after(this.dom,o==this.length)}domBoundsAround(){return null}coordsAt(o,i){let l=this.widget.coordsAt(this.dom,o,i);if(l)return l;let d=this.dom.getClientRects(),m=null;if(!d.length)return null;let p=this.side?this.side<0:o>0;for(let v=p?d.length-1:0;m=d[v],!(o>0?v==0:v==d.length-1||m.top<m.bottom);v+=p?-1:1);return pM(m,!p)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class w2 extends li{constructor(o){super(),this.side=o}get length(){return 0}merge(){return!1}become(o){return o instanceof w2&&o.side==this.side}split(){return new w2(this.side)}sync(){if(!this.dom){let o=document.createElement("img");o.className="cm-widgetBuffer",o.setAttribute("aria-hidden","true"),this.setDOM(o)}}getSide(){return this.side}domAtPos(o){return this.side>0?kc.before(this.dom):kc.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(o){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Or.empty}get isHidden(){return!0}}hh.prototype.children=e0.prototype.children=w2.prototype.children=yQ;function Lse(u,o){let i=u.dom,{children:l}=u,d=0;for(let m=0;d<l.length;d++){let p=l[d],v=m+p.length;if(!(v==m&&p.getSide()<=0)){if(o>m&&o<v&&p.dom.parentNode==i)return p.domAtPos(o-m);if(o<=m)break;m=v}}for(let m=d;m>0;m--){let p=l[m-1];if(p.dom.parentNode==i)return p.domAtPos(p.length)}for(let m=d;m<l.length;m++){let p=l[m];if(p.dom.parentNode==i)return p.domAtPos(0)}return new kc(i,0)}function $se(u,o,i){let l,{children:d}=u;i>0&&o instanceof Wg&&d.length&&(l=d[d.length-1])instanceof Wg&&l.mark.eq(o.mark)?$se(l,o.children[0],i-1):(d.push(o),o.setParent(u)),u.length+=o.length}function Hse(u,o,i){let l=null,d=-1,m=null,p=-1;function v(k,T){for(let M=0,N=0;M<k.children.length&&N<=T;M++){let I=k.children[M],z=N+I.length;z>=T&&(I.children.length?v(I,T-N):(!m||m.isHidden&&i>0)&&(z>T||N==z&&I.getSide()>0)?(m=I,p=T-N):(N<T||N==z&&I.getSide()<0&&!I.isHidden)&&(l=I,d=T-N)),N=z}}v(u,o);let x=(i<0?l:m)||l||m;return x?x.coordsAt(Math.max(0,x==l?d:p),i):$ue(u)}function $ue(u){let o=u.dom.lastChild;if(!o)return u.dom.getBoundingClientRect();let i=y2(o);return i[i.length-1]||null}function MJ(u,o){for(let i in u)i=="class"&&o.class?o.class+=" "+u.class:i=="style"&&o.style?o.style+=";"+u.style:o[i]=u[i];return o}const ane=Object.create(null);function h6(u,o,i){if(u==o)return!0;u||(u=ane),o||(o=ane);let l=Object.keys(u),d=Object.keys(o);if(l.length-(i&&l.indexOf(i)>-1?1:0)!=d.length-(i&&d.indexOf(i)>-1?1:0))return!1;for(let m of l)if(m!=i&&(d.indexOf(m)==-1||u[m]!==o[m]))return!1;return!0}function PJ(u,o,i){let l=!1;if(o)for(let d in o)i&&d in i||(l=!0,d=="style"?u.style.cssText="":u.removeAttribute(d));if(i)for(let d in i)o&&o[d]==i[d]||(l=!0,d=="style"?u.style.cssText=i[d]:u.setAttribute(d,i[d]));return l}function Hue(u){let o=Object.create(null);for(let i=0;i<u.attributes.length;i++){let l=u.attributes[i];o[l.name]=l.value}return o}class qg{eq(o){return!1}updateDOM(o,i){return!1}compare(o){return this==o||this.constructor==o.constructor&&this.eq(o)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(o){return!0}coordsAt(o,i,l){return null}get isHidden(){return!1}get editable(){return!1}destroy(o){}}var Yc=function(u){return u[u.Text=0]="Text",u[u.WidgetBefore=1]="WidgetBefore",u[u.WidgetAfter=2]="WidgetAfter",u[u.WidgetRange=3]="WidgetRange",u}(Yc||(Yc={}));class Zo extends xy{constructor(o,i,l,d){super(),this.startSide=o,this.endSide=i,this.widget=l,this.spec=d}get heightRelevant(){return!1}static mark(o){return new bM(o)}static widget(o){let i=Math.max(-1e4,Math.min(1e4,o.side||0)),l=!!o.block;return i+=l&&!o.inlineOrder?i>0?3e8:-4e8:i>0?1e8:-1e8,new d0(o,i,i,l,o.widget||null,!1)}static replace(o){let i=!!o.block,l,d;if(o.isBlockGap)l=-5e8,d=4e8;else{let{start:m,end:p}=Vse(o,i);l=(m?i?-3e8:-1:5e8)-1,d=(p?i?2e8:1:-6e8)+1}return new d0(o,l,d,i,o.widget||null,!0)}static line(o){return new vM(o)}static set(o,i=!1){return yr.of(o,i)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Zo.none=yr.empty;class bM extends Zo{constructor(o){let{start:i,end:l}=Vse(o);super(i?-1:5e8,l?1:-6e8,null,o),this.tagName=o.tagName||"span",this.class=o.class||"",this.attrs=o.attributes||null}eq(o){var i,l;return this==o||o instanceof bM&&this.tagName==o.tagName&&(this.class||((i=this.attrs)===null||i===void 0?void 0:i.class))==(o.class||((l=o.attrs)===null||l===void 0?void 0:l.class))&&h6(this.attrs,o.attrs,"class")}range(o,i=o){if(o>=i)throw new RangeError("Mark decorations may not be empty");return super.range(o,i)}}bM.prototype.point=!1;class vM extends Zo{constructor(o){super(-2e8,-2e8,null,o)}eq(o){return o instanceof vM&&this.spec.class==o.spec.class&&h6(this.spec.attributes,o.spec.attributes)}range(o,i=o){if(i!=o)throw new RangeError("Line decoration ranges must be zero-length");return super.range(o,i)}}vM.prototype.mapMode=qc.TrackBefore;vM.prototype.point=!0;class d0 extends Zo{constructor(o,i,l,d,m,p){super(i,l,m,o),this.block=d,this.isReplace=p,this.mapMode=d?i<=0?qc.TrackBefore:qc.TrackAfter:qc.TrackDel}get type(){return this.startSide!=this.endSide?Yc.WidgetRange:this.startSide<=0?Yc.WidgetBefore:Yc.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(o){return o instanceof d0&&Vue(this.widget,o.widget)&&this.block==o.block&&this.startSide==o.startSide&&this.endSide==o.endSide}range(o,i=o){if(this.isReplace&&(o>i||o==i&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&i!=o)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(o,i)}}d0.prototype.point=!0;function Vse(u,o=!1){let{inclusiveStart:i,inclusiveEnd:l}=u;return i==null&&(i=u.inclusive),l==null&&(l=u.inclusive),{start:i!=null?i:o,end:l!=null?l:o}}function Vue(u,o){return u==o||!!(u&&o&&u.compare(o))}function RJ(u,o,i,l=0){let d=i.length-1;d>=0&&i[d]+l>=u?i[d]=Math.max(i[d],o):i.push(u,o)}class Wa extends li{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(o,i,l,d,m,p){if(l){if(!(l instanceof Wa))return!1;this.dom||l.transferDOM(this)}return d&&this.setDeco(l?l.attrs:null),Bse(this,o,i,l?l.children.slice():[],m,p),!0}split(o){let i=new Wa;if(i.breakAfter=this.breakAfter,this.length==0)return i;let{i:l,off:d}=this.childPos(o);d&&(i.append(this.children[l].split(d),0),this.children[l].merge(d,this.children[l].length,null,!1,0,0),l++);for(let m=l;m<this.children.length;m++)i.append(this.children[m],0);for(;l>0&&this.children[l-1].length==0;)this.children[--l].destroy();return this.children.length=l,this.markDirty(),this.length=o,i}transferDOM(o){this.dom&&(this.markDirty(),o.setDOM(this.dom),o.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(o){h6(this.attrs,o)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=o)}append(o,i){$se(this,o,i)}addLineDeco(o){let i=o.spec.attributes,l=o.spec.class;i&&(this.attrs=MJ(i,this.attrs||{})),l&&(this.attrs=MJ({class:l},this.attrs||{}))}domAtPos(o){return Lse(this,o)}reuseDOM(o){o.nodeName=="DIV"&&(this.setDOM(o),this.flags|=6)}sync(o,i){var l;this.dom?this.flags&4&&(_se(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(PJ(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(o,i);let d=this.dom.lastChild;for(;d&&li.get(d)instanceof Wg;)d=d.lastChild;if(!d||!this.length||d.nodeName!="BR"&&((l=li.get(d))===null||l===void 0?void 0:l.isEditable)==!1&&(!To.ios||!this.children.some(m=>m instanceof hh))){let m=document.createElement("BR");m.cmIgnore=!0,this.dom.appendChild(m)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let o=0,i;for(let l of this.children){if(!(l instanceof hh)||/[^ -~]/.test(l.text))return null;let d=y2(l.dom);if(d.length!=1)return null;o+=d[0].width,i=d[0].height}return o?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:o/this.length,textHeight:i}:null}coordsAt(o,i){let l=Hse(this,o,i);if(!this.children.length&&l&&this.parent){let{heightOracle:d}=this.parent.view.viewState,m=l.bottom-l.top;if(Math.abs(m-d.lineHeight)<2&&d.textHeight<m){let p=(m-d.textHeight)/2;return{top:l.top+p,bottom:l.bottom-p,left:l.left,right:l.left}}}return l}become(o){return o instanceof Wa&&this.children.length==0&&o.children.length==0&&h6(this.attrs,o.attrs)&&this.breakAfter==o.breakAfter}covers(){return!0}static find(o,i){for(let l=0,d=0;l<o.children.length;l++){let m=o.children[l],p=d+m.length;if(p>=i){if(m instanceof Wa)return m;if(p>i)break}d=p+m.breakAfter}return null}}class Vg extends li{constructor(o,i,l){super(),this.widget=o,this.length=i,this.deco=l,this.breakAfter=0,this.prevWidget=null}merge(o,i,l,d,m,p){return l&&(!(l instanceof Vg)||!this.widget.compare(l.widget)||o>0&&m<=0||i<this.length&&p<=0)?!1:(this.length=o+(l?l.length:0)+(this.length-i),!0)}domAtPos(o){return o==0?kc.before(this.dom):kc.after(this.dom,o==this.length)}split(o){let i=this.length-o;this.length=o;let l=new Vg(this.widget,i,this.deco);return l.breakAfter=this.breakAfter,l}get children(){return yQ}sync(o){(!this.dom||!this.widget.updateDOM(this.dom,o))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(o)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Or.empty}domBoundsAround(){return null}become(o){return o instanceof Vg&&o.widget.constructor==this.widget.constructor?(o.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=o.widget,this.length=o.length,this.deco=o.deco,this.breakAfter=o.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(o){return this.widget.ignoreEvent(o)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(o,i){let l=this.widget.coordsAt(this.dom,o,i);return l||(this.widget instanceof NJ?null:pM(this.dom.getBoundingClientRect(),this.length?o==0:i<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(o){let{startSide:i,endSide:l}=this.deco;return i==l?!1:o<0?i<0:l>0}}class NJ extends qg{constructor(o){super(),this.height=o}toDOM(){let o=document.createElement("div");return o.className="cm-gap",this.updateDOM(o),o}eq(o){return o.height==this.height}updateDOM(o){return o.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class ZD{constructor(o,i,l,d){this.doc=o,this.pos=i,this.end=l,this.disallowBlockEffectsFor=d,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=o.iter(),this.skip=i}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let o=this.content[this.content.length-1];return!(o.breakAfter||o instanceof Vg&&o.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Wa),this.atCursorPos=!0),this.curLine}flushBuffer(o=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(k$(new w2(-1),o),o.length),this.pendingBuffer=0)}addBlockWidget(o){this.flushBuffer(),this.curLine=null,this.content.push(o)}finish(o){this.pendingBuffer&&o<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(o&&this.content.length&&this.content[this.content.length-1]instanceof Vg)&&this.getLine()}buildText(o,i,l){for(;o>0;){if(this.textOff==this.text.length){let{value:m,lineBreak:p,done:v}=this.cursor.next(this.skip);if(this.skip=0,v)throw new Error("Ran out of text content when drawing inline views");if(p){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,o--;continue}else this.text=m,this.textOff=0}let d=Math.min(this.text.length-this.textOff,o,512);this.flushBuffer(i.slice(i.length-l)),this.getLine().append(k$(new hh(this.text.slice(this.textOff,this.textOff+d)),i),l),this.atCursorPos=!0,this.textOff+=d,o-=d,l=0}}span(o,i,l,d){this.buildText(i-o,l,d),this.pos=i,this.openStart<0&&(this.openStart=d)}point(o,i,l,d,m,p){if(this.disallowBlockEffectsFor[p]&&l instanceof d0){if(l.block)throw new RangeError("Block decorations may not be specified via plugins");if(i>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let v=i-o;if(l instanceof d0)if(l.block)l.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Vg(l.widget||x2.block,v,l));else{let x=e0.create(l.widget||x2.inline,v,v?0:l.startSide),k=this.atCursorPos&&!x.isEditable&&m<=d.length&&(o<i||l.startSide>0),T=!x.isEditable&&(o<i||m>d.length||l.startSide<=0),M=this.getLine();this.pendingBuffer==2&&!k&&!x.isEditable&&(this.pendingBuffer=0),this.flushBuffer(d),k&&(M.append(k$(new w2(1),d),m),m=d.length+Math.max(0,m-d.length)),M.append(k$(x,d),m),this.atCursorPos=T,this.pendingBuffer=T?o<i||m>d.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=d.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(l);v&&(this.textOff+v<=this.text.length?this.textOff+=v:(this.skip+=v-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=i),this.openStart<0&&(this.openStart=m)}static build(o,i,l,d,m){let p=new ZD(o,i,l,m);return p.openEnd=yr.spans(d,i,l,p),p.openStart<0&&(p.openStart=p.openEnd),p.finish(p.openEnd),p}}function k$(u,o){for(let i of o)u=new Wg(i,[u],u.length);return u}class x2 extends qg{constructor(o){super(),this.tag=o}eq(o){return o.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(o){return o.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}x2.inline=new x2("span");x2.block=new x2("div");var Ni=function(u){return u[u.LTR=0]="LTR",u[u.RTL=1]="RTL",u}(Ni||(Ni={}));const ky=Ni.LTR,wQ=Ni.RTL;function zse(u){let o=[];for(let i=0;i<u.length;i++)o.push(1<<+u[i]);return o}const zue=zse("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Uue=zse("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),BJ=Object.create(null),fm=[];for(let u of["()","[]","{}"]){let o=u.charCodeAt(0),i=u.charCodeAt(1);BJ[o]=i,BJ[i]=-o}function Use(u){return u<=247?zue[u]:1424<=u&&u<=1524?2:1536<=u&&u<=1785?Uue[u-1536]:1774<=u&&u<=2220?4:8192<=u&&u<=8204?256:64336<=u&&u<=65023?4:1}const Wue=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class t0{get dir(){return this.level%2?wQ:ky}constructor(o,i,l){this.from=o,this.to=i,this.level=l}side(o,i){return this.dir==i==o?this.to:this.from}forward(o,i){return o==(this.dir==i)}static find(o,i,l,d){let m=-1;for(let p=0;p<o.length;p++){let v=o[p];if(v.from<=i&&v.to>=i){if(v.level==l)return p;(m<0||(d!=0?d<0?v.from<i:v.to>i:o[m].level>v.level))&&(m=p)}}if(m<0)throw new RangeError("Index out of range");return m}}function Wse(u,o){if(u.length!=o.length)return!1;for(let i=0;i<u.length;i++){let l=u[i],d=o[i];if(l.from!=d.from||l.to!=d.to||l.direction!=d.direction||!Wse(l.inner,d.inner))return!1}return!0}const ii=[];function jue(u,o,i,l,d){for(let m=0;m<=l.length;m++){let p=m?l[m-1].to:o,v=m<l.length?l[m].from:i,x=m?256:d;for(let k=p,T=x,M=x;k<v;k++){let N=Use(u.charCodeAt(k));N==512?N=T:N==8&&M==4&&(N=16),ii[k]=N==4?2:N,N&7&&(M=N),T=N}for(let k=p,T=x,M=x;k<v;k++){let N=ii[k];if(N==128)k<v-1&&T==ii[k+1]&&T&24?N=ii[k]=T:ii[k]=256;else if(N==64){let I=k+1;for(;I<v&&ii[I]==64;)I++;let z=k&&T==8||I<i&&ii[I]==8?M==1?1:8:256;for(let Y=k;Y<I;Y++)ii[Y]=z;k=I-1}else N==8&&M==1&&(ii[k]=1);T=N,N&7&&(M=N)}}}function Zue(u,o,i,l,d){let m=d==1?2:1;for(let p=0,v=0,x=0;p<=l.length;p++){let k=p?l[p-1].to:o,T=p<l.length?l[p].from:i;for(let M=k,N,I,z;M<T;M++)if(I=BJ[N=u.charCodeAt(M)])if(I<0){for(let Y=v-3;Y>=0;Y-=3)if(fm[Y+1]==-I){let J=fm[Y+2],q=J&2?d:J&4?J&1?m:d:0;q&&(ii[M]=ii[fm[Y]]=q),v=Y;break}}else{if(fm.length==189)break;fm[v++]=M,fm[v++]=N,fm[v++]=x}else if((z=ii[M])==2||z==1){let Y=z==d;x=Y?0:1;for(let J=v-3;J>=0;J-=3){let q=fm[J+2];if(q&2)break;if(Y)fm[J+2]|=2;else{if(q&4)break;fm[J+2]|=4}}}}}function que(u,o,i,l){for(let d=0,m=l;d<=i.length;d++){let p=d?i[d-1].to:u,v=d<i.length?i[d].from:o;for(let x=p;x<v;){let k=ii[x];if(k==256){let T=x+1;for(;;)if(T==v){if(d==i.length)break;T=i[d++].to,v=d<i.length?i[d].from:o}else if(ii[T]==256)T++;else break;let M=m==1,N=(T<o?ii[T]:l)==1,I=M==N?M?1:2:l;for(let z=T,Y=d,J=Y?i[Y-1].to:u;z>x;)z==J&&(z=i[--Y].from,J=Y?i[Y-1].to:u),ii[--z]=I;x=T}else m=k,x++}}}function FJ(u,o,i,l,d,m,p){let v=l%2?2:1;if(l%2==d%2)for(let x=o,k=0;x<i;){let T=!0,M=!1;if(k==m.length||x<m[k].from){let Y=ii[x];Y!=v&&(T=!1,M=Y==16)}let N=!T&&v==1?[]:null,I=T?l:l+1,z=x;e:for(;;)if(k<m.length&&z==m[k].from){if(M)break e;let Y=m[k];if(!T)for(let J=Y.to,q=k+1;;){if(J==i)break e;if(q<m.length&&m[q].from==J)J=m[q++].to;else{if(ii[J]==v)break e;break}}if(k++,N)N.push(Y);else{Y.from>x&&p.push(new t0(x,Y.from,I));let J=Y.direction==ky!=!(I%2);IJ(u,J?l+1:l,d,Y.inner,Y.from,Y.to,p),x=Y.to}z=Y.to}else{if(z==i||(T?ii[z]!=v:ii[z]==v))break;z++}N?FJ(u,x,z,l+1,d,N,p):x<z&&p.push(new t0(x,z,I)),x=z}else for(let x=i,k=m.length;x>o;){let T=!0,M=!1;if(!k||x>m[k-1].to){let Y=ii[x-1];Y!=v&&(T=!1,M=Y==16)}let N=!T&&v==1?[]:null,I=T?l:l+1,z=x;e:for(;;)if(k&&z==m[k-1].to){if(M)break e;let Y=m[--k];if(!T)for(let J=Y.from,q=k;;){if(J==o)break e;if(q&&m[q-1].to==J)J=m[--q].from;else{if(ii[J-1]==v)break e;break}}if(N)N.push(Y);else{Y.to<x&&p.push(new t0(Y.to,x,I));let J=Y.direction==ky!=!(I%2);IJ(u,J?l+1:l,d,Y.inner,Y.from,Y.to,p),x=Y.from}z=Y.from}else{if(z==o||(T?ii[z-1]!=v:ii[z-1]==v))break;z--}N?FJ(u,z,x,l+1,d,N,p):z<x&&p.push(new t0(z,x,I)),x=z}}function IJ(u,o,i,l,d,m,p){let v=o%2?2:1;jue(u,d,m,l,v),Zue(u,d,m,l,v),que(d,m,l,v),FJ(u,d,m,o,i,l,p)}function Gue(u,o,i){if(!u)return[new t0(0,0,o==wQ?1:0)];if(o==ky&&!i.length&&!Wue.test(u))return jse(u.length);if(i.length)for(;u.length>ii.length;)ii[ii.length]=256;let l=[],d=o==ky?0:1;return IJ(u,d,d,i,0,u.length,l),l}function jse(u){return[new t0(0,u,0)]}let Zse="";function Kue(u,o,i,l,d){var m;let p=l.head-u.from,v=t0.find(o,p,(m=l.bidiLevel)!==null&&m!==void 0?m:-1,l.assoc),x=o[v],k=x.side(d,i);if(p==k){let N=v+=d?1:-1;if(N<0||N>=o.length)return null;x=o[v=N],p=x.side(!d,i),k=x.side(d,i)}let T=Wl(u.text,p,x.forward(d,i));(T<x.from||T>x.to)&&(T=k),Zse=u.text.slice(Math.min(p,T),Math.max(p,T));let M=v==(d?o.length-1:0)?null:o[v+(d?1:-1)];return M&&T==k&&M.level+(d?0:1)<x.level?rn.cursor(M.side(!d,i)+u.from,M.forward(d,i)?1:-1,M.level):rn.cursor(T+u.from,x.forward(d,i)?-1:1,x.level)}function Yue(u,o,i){for(let l=o;l<i;l++){let d=Use(u.charCodeAt(l));if(d==1)return ky;if(d==2||d==4)return wQ}return ky}const qse=Co.define(),Gse=Co.define(),Kse=Co.define(),Yse=Co.define(),LJ=Co.define(),Xse=Co.define(),Jse=Co.define(),xQ=Co.define(),CQ=Co.define(),Qse=Co.define({combine:u=>u.some(o=>o)}),ere=Co.define({combine:u=>u.some(o=>o)}),tre=Co.define();class m2{constructor(o,i="nearest",l="nearest",d=5,m=5,p=!1){this.range=o,this.y=i,this.x=l,this.yMargin=d,this.xMargin=m,this.isSnapshot=p}map(o){return o.empty?this:new m2(this.range.map(o),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(o){return this.range.to<=o.doc.length?this:new m2(rn.cursor(o.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const E$=Fs.define({map:(u,o)=>u.map(o)}),nre=Fs.define();function _u(u,o,i){let l=u.facet(Yse);l.length?l[0](o):window.onerror&&window.onerror(String(o),i,void 0,void 0,o)}const K1=Co.define({combine:u=>u.length?u[0]:!0});let Xue=0;const ID=Co.define();class Ta{constructor(o,i,l,d,m){this.id=o,this.create=i,this.domEventHandlers=l,this.domEventObservers=d,this.extension=m(this)}static define(o,i){const{eventHandlers:l,eventObservers:d,provide:m,decorations:p}=i||{};return new Ta(Xue++,o,l,d,v=>{let x=[ID.of(v)];return p&&x.push(tM.of(k=>{let T=k.plugin(v);return T?p(T):Zo.none})),m&&x.push(m(v)),x})}static fromClass(o,i){return Ta.define(l=>new o(l),i)}}class HX{constructor(o){this.spec=o,this.mustUpdate=null,this.value=null}update(o){if(this.value){if(this.mustUpdate){let i=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(i)}catch(l){if(_u(i.state,l,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(d){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(o)}catch(i){_u(o.state,i,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(o){var i;if(!((i=this.value)===null||i===void 0)&&i.destroy)try{this.value.destroy()}catch(l){_u(o.state,l,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ore=Co.define(),SQ=Co.define(),tM=Co.define(),sre=Co.define(),kQ=Co.define(),rre=Co.define();function lne(u,o){let i=u.state.facet(rre);if(!i.length)return i;let l=i.map(m=>m instanceof Function?m(u):m),d=[];return yr.spans(l,o.from,o.to,{point(){},span(m,p,v,x){let k=m-o.from,T=p-o.from,M=d;for(let N=v.length-1;N>=0;N--,x--){let I=v[N].spec.bidiIsolate,z;if(I==null&&(I=Yue(o.text,k,T)),x>0&&M.length&&(z=M[M.length-1]).to==k&&z.direction==I)z.to=T,M=z.inner;else{let Y={from:k,to:T,direction:I,inner:[]};M.push(Y),M=Y.inner}}}}),d}const ire=Co.define();function are(u){let o=0,i=0,l=0,d=0;for(let m of u.state.facet(ire)){let p=m(u);p&&(p.left!=null&&(o=Math.max(o,p.left)),p.right!=null&&(i=Math.max(i,p.right)),p.top!=null&&(l=Math.max(l,p.top)),p.bottom!=null&&(d=Math.max(d,p.bottom)))}return{left:o,right:i,top:l,bottom:d}}const LD=Co.define();class bf{constructor(o,i,l,d){this.fromA=o,this.toA=i,this.fromB=l,this.toB=d}join(o){return new bf(Math.min(this.fromA,o.fromA),Math.max(this.toA,o.toA),Math.min(this.fromB,o.fromB),Math.max(this.toB,o.toB))}addToSet(o){let i=o.length,l=this;for(;i>0;i--){let d=o[i-1];if(!(d.fromA>l.toA)){if(d.toA<l.fromA)break;l=l.join(d),o.splice(i-1,1)}}return o.splice(i,0,l),o}static extendWithRanges(o,i){if(i.length==0)return o;let l=[];for(let d=0,m=0,p=0,v=0;;d++){let x=d==o.length?null:o[d],k=p-v,T=x?x.fromB:1e9;for(;m<i.length&&i[m]<T;){let M=i[m],N=i[m+1],I=Math.max(v,M),z=Math.min(T,N);if(I<=z&&new bf(I+k,z+k,I,z).addToSet(l),N>T)break;m+=2}if(!x)return l;new bf(x.fromA,x.toA,x.fromB,x.toB).addToSet(l),p=x.toA,v=x.toB}}}class m6{constructor(o,i,l){this.view=o,this.state=i,this.transactions=l,this.flags=0,this.startState=o.state,this.changes=sl.empty(this.startState.doc.length);for(let m of l)this.changes=this.changes.compose(m.changes);let d=[];this.changes.iterChangedRanges((m,p,v,x)=>d.push(new bf(m,p,v,x))),this.changedRanges=d}static create(o,i,l){return new m6(o,i,l)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(o=>o.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class cne extends li{get length(){return this.view.state.doc.length}constructor(o){super(),this.view=o,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Zo.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(o.contentDOM),this.children=[new Wa],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new bf(0,0,0,o.state.doc.length)],0,null)}update(o){var i;let l=o.changedRanges;this.minWidth>0&&l.length&&(l.every(({fromA:k,toA:T})=>T<this.minWidthFrom||k>this.minWidthTo)?(this.minWidthFrom=o.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=o.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(o);let d=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((i=this.domChanged)===null||i===void 0)&&i.newSel?d=this.domChanged.newSel.head:!sde(o.changes,this.hasComposition)&&!o.selectionSet&&(d=o.state.selection.main.head));let m=d>-1?Que(this.view,o.changes,d):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:k,to:T}=this.hasComposition;l=new bf(k,T,o.changes.mapPos(k,-1),o.changes.mapPos(T,1)).addToSet(l.slice())}this.hasComposition=m?{from:m.range.fromB,to:m.range.toB}:null,(To.ie||To.chrome)&&!m&&o&&o.state.doc.lines!=o.startState.doc.lines&&(this.forceSelection=!0);let p=this.decorations,v=this.updateDeco(),x=nde(p,v,o.changes);return l=bf.extendWithRanges(l,x),!(this.flags&7)&&l.length==0?!1:(this.updateInner(l,o.startState.doc.length,m),o.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(o,i,l){this.view.viewState.mustMeasureContent=!0,this.updateChildren(o,i,l);let{observer:d}=this.view;d.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let p=To.chrome||To.ios?{node:d.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,p),this.flags&=-8,p&&(p.written||d.selectionRange.focusNode!=p.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(p=>p.flags&=-9);let m=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let p of this.children)p instanceof Vg&&p.widget instanceof NJ&&m.push(p.dom);d.updateGaps(m)}updateChildren(o,i,l){let d=l?l.range.addToSet(o.slice()):o,m=this.childCursor(i);for(let p=d.length-1;;p--){let v=p>=0?d[p]:null;if(!v)break;let{fromA:x,toA:k,fromB:T,toB:M}=v,N,I,z,Y;if(l&&l.range.fromB<M&&l.range.toB>T){let ce=ZD.build(this.view.state.doc,T,l.range.fromB,this.decorations,this.dynamicDecorationMap),_e=ZD.build(this.view.state.doc,l.range.toB,M,this.decorations,this.dynamicDecorationMap);I=ce.breakAtStart,z=ce.openStart,Y=_e.openEnd;let De=this.compositionView(l);_e.breakAtStart?De.breakAfter=1:_e.content.length&&De.merge(De.length,De.length,_e.content[0],!1,_e.openStart,0)&&(De.breakAfter=_e.content[0].breakAfter,_e.content.shift()),ce.content.length&&De.merge(0,0,ce.content[ce.content.length-1],!0,0,ce.openEnd)&&ce.content.pop(),N=ce.content.concat(De).concat(_e.content)}else({content:N,breakAtStart:I,openStart:z,openEnd:Y}=ZD.build(this.view.state.doc,T,M,this.decorations,this.dynamicDecorationMap));let{i:J,off:q}=m.findPos(k,1),{i:ae,off:Z}=m.findPos(x,-1);Nse(this,ae,Z,J,q,N,I,z,Y)}l&&this.fixCompositionDOM(l)}updateEditContextFormatting(o){this.editContextFormatting=this.editContextFormatting.map(o.changes);for(let i of o.transactions)for(let l of i.effects)l.is(nre)&&(this.editContextFormatting=l.value)}compositionView(o){let i=new hh(o.text.nodeValue);i.flags|=8;for(let{deco:d}of o.marks)i=new Wg(d,[i],i.length);let l=new Wa;return l.append(i,0),l}fixCompositionDOM(o){let i=(m,p)=>{p.flags|=8|(p.children.some(x=>x.flags&7)?1:0),this.markedForComposition.add(p);let v=li.get(m);v&&v!=p&&(v.dom=null),p.setDOM(m)},l=this.childPos(o.range.fromB,1),d=this.children[l.i];i(o.line,d);for(let m=o.marks.length-1;m>=-1;m--)l=d.childPos(l.off,1),d=d.children[l.i],i(m>=0?o.marks[m].node:o.text,d)}updateSelection(o=!1,i=!1){(o||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let l=this.view.root.activeElement,d=l==this.dom,m=!d&&Y$(this.dom,this.view.observer.selectionRange)&&!(l&&this.dom.contains(l));if(!(d||i||m))return;let p=this.forceSelection;this.forceSelection=!1;let v=this.view.state.selection.main,x=this.moveToLine(this.domAtPos(v.anchor)),k=v.empty?x:this.moveToLine(this.domAtPos(v.head));if(To.gecko&&v.empty&&!this.hasComposition&&Jue(x)){let M=document.createTextNode("");this.view.observer.ignore(()=>x.node.insertBefore(M,x.node.childNodes[x.offset]||null)),x=k=new kc(M,0),p=!0}let T=this.view.observer.selectionRange;(p||!T.focusNode||(!jD(x.node,x.offset,T.anchorNode,T.anchorOffset)||!jD(k.node,k.offset,T.focusNode,T.focusOffset))&&!this.suppressWidgetCursorChange(T,v))&&(this.view.observer.ignore(()=>{To.android&&To.chrome&&this.dom.contains(T.focusNode)&&ode(T.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let M=eM(this.view.root);if(M)if(v.empty){if(To.gecko){let N=ede(x.node,x.offset);if(N&&N!=3){let I=(N==1?Mse:Pse)(x.node,x.offset);I&&(x=new kc(I.node,I.offset))}}M.collapse(x.node,x.offset),v.bidiLevel!=null&&M.caretBidiLevel!==void 0&&(M.caretBidiLevel=v.bidiLevel)}else if(M.extend){M.collapse(x.node,x.offset);try{M.extend(k.node,k.offset)}catch(N){}}else{let N=document.createRange();v.anchor>v.head&&([x,k]=[k,x]),N.setEnd(k.node,k.offset),N.setStart(x.node,x.offset),M.removeAllRanges(),M.addRange(N)}m&&this.view.root.activeElement==this.dom&&(this.dom.blur(),l&&l.focus())}),this.view.observer.setSelectionRange(x,k)),this.impreciseAnchor=x.precise?null:new kc(T.anchorNode,T.anchorOffset),this.impreciseHead=k.precise?null:new kc(T.focusNode,T.focusOffset)}suppressWidgetCursorChange(o,i){return this.hasComposition&&i.empty&&jD(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)&&this.posFromDOM(o.focusNode,o.focusOffset)==i.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:o}=this,i=o.state.selection.main,l=eM(o.root),{anchorNode:d,anchorOffset:m}=o.observer.selectionRange;if(!l||!i.empty||!i.assoc||!l.modify)return;let p=Wa.find(this,i.head);if(!p)return;let v=p.posAtStart;if(i.head==v||i.head==v+p.length)return;let x=this.coordsAt(i.head,-1),k=this.coordsAt(i.head,1);if(!x||!k||x.bottom>k.top)return;let T=this.domAtPos(i.head+i.assoc);l.collapse(T.node,T.offset),l.modify("move",i.assoc<0?"forward":"backward","lineboundary"),o.observer.readSelectionRange();let M=o.observer.selectionRange;o.docView.posFromDOM(M.anchorNode,M.anchorOffset)!=i.from&&l.collapse(d,m)}moveToLine(o){let i=this.dom,l;if(o.node!=i)return o;for(let d=o.offset;!l&&d<i.childNodes.length;d++){let m=li.get(i.childNodes[d]);m instanceof Wa&&(l=m.domAtPos(0))}for(let d=o.offset-1;!l&&d>=0;d--){let m=li.get(i.childNodes[d]);m instanceof Wa&&(l=m.domAtPos(m.length))}return l?new kc(l.node,l.offset,!0):o}nearest(o){for(let i=o;i;){let l=li.get(i);if(l&&l.rootView==this)return l;i=i.parentNode}return null}posFromDOM(o,i){let l=this.nearest(o);if(!l)throw new RangeError("Trying to find position for a DOM position outside of the document");return l.localPosFromDOM(o,i)+l.posAtStart}domAtPos(o){let{i,off:l}=this.childCursor().findPos(o,-1);for(;i<this.children.length-1;){let d=this.children[i];if(l<d.length||d instanceof Wa)break;i++,l=0}return this.children[i].domAtPos(l)}coordsAt(o,i){let l=null,d=0;for(let m=this.length,p=this.children.length-1;p>=0;p--){let v=this.children[p],x=m-v.breakAfter,k=x-v.length;if(x<o)break;if(k<=o&&(k<o||v.covers(-1))&&(x>o||v.covers(1))&&(!l||v instanceof Wa&&!(l instanceof Wa&&i>=0)))l=v,d=k;else if(l&&k==o&&x==o&&v instanceof Vg&&Math.abs(i)<2){if(v.deco.startSide<0)break;p&&(l=null)}m=k}return l?l.coordsAt(o-d,i):null}coordsForChar(o){let{i,off:l}=this.childPos(o,1),d=this.children[i];if(!(d instanceof Wa))return null;for(;d.children.length;){let{i:v,off:x}=d.childPos(l,1);for(;;v++){if(v==d.children.length)return null;if((d=d.children[v]).length)break}l=x}if(!(d instanceof hh))return null;let m=Wl(d.text,l);if(m==l)return null;let p=Sy(d.dom,l,m).getClientRects();for(let v=0;v<p.length;v++){let x=p[v];if(v==p.length-1||x.top<x.bottom&&x.left<x.right)return x}return null}measureVisibleLineHeights(o){let i=[],{from:l,to:d}=o,m=this.view.contentDOM.clientWidth,p=m>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,v=-1,x=this.view.textDirection==Ni.LTR;for(let k=0,T=0;T<this.children.length;T++){let M=this.children[T],N=k+M.length;if(N>d)break;if(k>=l){let I=M.dom.getBoundingClientRect();if(i.push(I.height),p){let z=M.dom.lastChild,Y=z?y2(z):[];if(Y.length){let J=Y[Y.length-1],q=x?J.right-I.left:I.right-J.left;q>v&&(v=q,this.minWidth=m,this.minWidthFrom=k,this.minWidthTo=N)}}}k=N+M.breakAfter}return i}textDirectionAt(o){let{i}=this.childPos(o,1);return getComputedStyle(this.children[i].dom).direction=="rtl"?Ni.RTL:Ni.LTR}measureTextSize(){for(let m of this.children)if(m instanceof Wa){let p=m.measureTextSize();if(p)return p}let o=document.createElement("div"),i,l,d;return o.className="cm-line",o.style.width="99999px",o.style.position="absolute",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(o);let m=y2(o.firstChild)[0];i=o.getBoundingClientRect().height,l=m?m.width/27:7,d=m?m.height:i,o.remove()}),{lineHeight:i,charWidth:l,textHeight:d}}childCursor(o=this.length){let i=this.children.length;return i&&(o-=this.children[--i].length),new Rse(this.children,o,i)}computeBlockGapDeco(){let o=[],i=this.view.viewState;for(let l=0,d=0;;d++){let m=d==i.viewports.length?null:i.viewports[d],p=m?m.from-1:this.length;if(p>l){let v=(i.lineBlockAt(p).bottom-i.lineBlockAt(l).top)/this.view.scaleY;o.push(Zo.replace({widget:new NJ(v),block:!0,inclusive:!0,isBlockGap:!0}).range(l,p))}if(!m)break;l=m.to+1}return Zo.set(o)}updateDeco(){let o=1,i=this.view.state.facet(tM).map(m=>(this.dynamicDecorationMap[o++]=typeof m=="function")?m(this.view):m),l=!1,d=this.view.state.facet(sre).map((m,p)=>{let v=typeof m=="function";return v&&(l=!0),v?m(this.view):m});for(d.length&&(this.dynamicDecorationMap[o++]=l,i.push(yr.join(d))),this.decorations=[this.editContextFormatting,...i,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];o<this.decorations.length;)this.dynamicDecorationMap[o++]=!1;return this.decorations}scrollIntoView(o){if(o.isSnapshot){let k=this.view.viewState.lineBlockAt(o.range.head);this.view.scrollDOM.scrollTop=k.top-o.yMargin,this.view.scrollDOM.scrollLeft=o.xMargin;return}for(let k of this.view.state.facet(tre))try{if(k(this.view,o.range,o))return!0}catch(T){_u(this.view.state,T,"scroll handler")}let{range:i}=o,l=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1),d;if(!l)return;!i.empty&&(d=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(l={left:Math.min(l.left,d.left),top:Math.min(l.top,d.top),right:Math.max(l.right,d.right),bottom:Math.max(l.bottom,d.bottom)});let m=are(this.view),p={left:l.left-m.left,top:l.top-m.top,right:l.right+m.right,bottom:l.bottom+m.bottom},{offsetWidth:v,offsetHeight:x}=this.view.scrollDOM;Pue(this.view.scrollDOM,p,i.head<i.anchor?-1:1,o.x,o.y,Math.max(Math.min(o.xMargin,v),-v),Math.max(Math.min(o.yMargin,x),-x),this.view.textDirection==Ni.LTR)}}function Jue(u){return u.node.nodeType==1&&u.node.firstChild&&(u.offset==0||u.node.childNodes[u.offset-1].contentEditable=="false")&&(u.offset==u.node.childNodes.length||u.node.childNodes[u.offset].contentEditable=="false")}function lre(u,o){let i=u.observer.selectionRange;if(!i.focusNode)return null;let l=Mse(i.focusNode,i.focusOffset),d=Pse(i.focusNode,i.focusOffset),m=l||d;if(d&&l&&d.node!=l.node){let v=li.get(d.node);if(!v||v instanceof hh&&v.text!=d.node.nodeValue)m=d;else if(u.docView.lastCompositionAfterCursor){let x=li.get(l.node);!x||x instanceof hh&&x.text!=l.node.nodeValue||(m=d)}}if(u.docView.lastCompositionAfterCursor=m!=l,!m)return null;let p=o-m.offset;return{from:p,to:p+m.node.nodeValue.length,node:m.node}}function Que(u,o,i){let l=lre(u,i);if(!l)return null;let{node:d,from:m,to:p}=l,v=d.nodeValue;if(/[\n\r]/.test(v)||u.state.doc.sliceString(l.from,l.to)!=v)return null;let x=o.invertedDesc,k=new bf(x.mapPos(m),x.mapPos(p),m,p),T=[];for(let M=d.parentNode;;M=M.parentNode){let N=li.get(M);if(N instanceof Wg)T.push({node:M,deco:N.mark});else{if(N instanceof Wa||M.nodeName=="DIV"&&M.parentNode==u.contentDOM)return{range:k,text:d,marks:T,line:M};if(M!=u.contentDOM)T.push({node:M,deco:new bM({inclusive:!0,attributes:Hue(M),tagName:M.tagName.toLowerCase()})});else return null}}}function ede(u,o){return u.nodeType!=1?0:(o&&u.childNodes[o-1].contentEditable=="false"?1:0)|(o<u.childNodes.length&&u.childNodes[o].contentEditable=="false"?2:0)}let tde=class{constructor(){this.changes=[]}compareRange(o,i){RJ(o,i,this.changes)}comparePoint(o,i){RJ(o,i,this.changes)}};function nde(u,o,i){let l=new tde;return yr.compare(u,o,i,l),l.changes}function ode(u,o){for(let i=u;i&&i!=o;i=i.assignedSlot||i.parentNode)if(i.nodeType==1&&i.contentEditable=="false")return!0;return!1}function sde(u,o){let i=!1;return o&&u.iterChangedRanges((l,d)=>{l<o.to&&d>o.from&&(i=!0)}),i}function rde(u,o,i=1){let l=u.charCategorizer(o),d=u.doc.lineAt(o),m=o-d.from;if(d.length==0)return rn.cursor(o);m==0?i=1:m==d.length&&(i=-1);let p=m,v=m;i<0?p=Wl(d.text,m,!1):v=Wl(d.text,m);let x=l(d.text.slice(p,v));for(;p>0;){let k=Wl(d.text,p,!1);if(l(d.text.slice(k,p))!=x)break;p=k}for(;v<d.length;){let k=Wl(d.text,v);if(l(d.text.slice(v,k))!=x)break;v=k}return rn.range(p+d.from,v+d.from)}function ide(u,o){return o.left>u?o.left-u:Math.max(0,u-o.right)}function ade(u,o){return o.top>u?o.top-u:Math.max(0,u-o.bottom)}function VX(u,o){return u.top<o.bottom-1&&u.bottom>o.top+1}function une(u,o){return o<u.top?{top:o,left:u.left,right:u.right,bottom:u.bottom}:u}function dne(u,o){return o>u.bottom?{top:u.top,left:u.left,right:u.right,bottom:o}:u}function $J(u,o,i){let l,d,m,p,v=!1,x,k,T,M;for(let z=u.firstChild;z;z=z.nextSibling){let Y=y2(z);for(let J=0;J<Y.length;J++){let q=Y[J];d&&VX(d,q)&&(q=une(dne(q,d.bottom),d.top));let ae=ide(o,q),Z=ade(i,q);if(ae==0&&Z==0)return z.nodeType==3?fne(z,o,i):$J(z,o,i);if(!l||p>Z||p==Z&&m>ae){l=z,d=q,m=ae,p=Z;let ce=Z?i<q.top?-1:1:ae?o<q.left?-1:1:0;v=!ce||(ce>0?J<Y.length-1:J>0)}ae==0?i>q.bottom&&(!T||T.bottom<q.bottom)?(x=z,T=q):i<q.top&&(!M||M.top>q.top)&&(k=z,M=q):T&&VX(T,q)?T=dne(T,q.bottom):M&&VX(M,q)&&(M=une(M,q.top))}}if(T&&T.bottom>=i?(l=x,d=T):M&&M.top<=i&&(l=k,d=M),!l)return{node:u,offset:0};let N=Math.max(d.left,Math.min(d.right,o));if(l.nodeType==3)return fne(l,N,i);if(v&&l.contentEditable!="false")return $J(l,N,i);let I=Array.prototype.indexOf.call(u.childNodes,l)+(o>=(d.left+d.right)/2?1:0);return{node:u,offset:I}}function fne(u,o,i){let l=u.nodeValue.length,d=-1,m=1e9,p=0;for(let v=0;v<l;v++){let x=Sy(u,v,v+1).getClientRects();for(let k=0;k<x.length;k++){let T=x[k];if(T.top==T.bottom)continue;p||(p=o-T.left);let M=(T.top>i?T.top-i:i-T.bottom)-1;if(T.left-1<=o&&T.right+1>=o&&M<m){let N=o>=(T.left+T.right)/2,I=N;if((To.chrome||To.gecko)&&Sy(u,v).getBoundingClientRect().left==T.right&&(I=!N),M<=0)return{node:u,offset:v+(I?1:0)};d=v+(I?1:0),m=M}}}return{node:u,offset:d>-1?d:p>0?u.nodeValue.length:0}}function cre(u,o,i,l=-1){var d,m;let p=u.contentDOM.getBoundingClientRect(),v=p.top+u.viewState.paddingTop,x,{docHeight:k}=u.viewState,{x:T,y:M}=o,N=M-v;if(N<0)return 0;if(N>k)return u.state.doc.length;for(let ce=u.viewState.heightOracle.textHeight/2,_e=!1;x=u.elementAtHeight(N),x.type!=Yc.Text;)for(;N=l>0?x.bottom+ce:x.top-ce,!(N>=0&&N<=k);){if(_e)return i?null:0;_e=!0,l=-l}M=v+N;let I=x.from;if(I<u.viewport.from)return u.viewport.from==0?0:i?null:hne(u,p,x,T,M);if(I>u.viewport.to)return u.viewport.to==u.state.doc.length?u.state.doc.length:i?null:hne(u,p,x,T,M);let z=u.dom.ownerDocument,Y=u.root.elementFromPoint?u.root:z,J=Y.elementFromPoint(T,M);J&&!u.contentDOM.contains(J)&&(J=null),J||(T=Math.max(p.left+1,Math.min(p.right-1,T)),J=Y.elementFromPoint(T,M),J&&!u.contentDOM.contains(J)&&(J=null));let q,ae=-1;if(J&&((d=u.docView.nearest(J))===null||d===void 0?void 0:d.isEditable)!=!1){if(z.caretPositionFromPoint){let ce=z.caretPositionFromPoint(T,M);ce&&({offsetNode:q,offset:ae}=ce)}else if(z.caretRangeFromPoint){let ce=z.caretRangeFromPoint(T,M);ce&&({startContainer:q,startOffset:ae}=ce,(!u.contentDOM.contains(q)||To.safari&&lde(q,ae,T)||To.chrome&&cde(q,ae,T))&&(q=void 0))}}if(!q||!u.docView.dom.contains(q)){let ce=Wa.find(u.docView,I);if(!ce)return N>x.top+x.height/2?x.to:x.from;({node:q,offset:ae}=$J(ce.dom,T,M))}let Z=u.docView.nearest(q);if(!Z)return null;if(Z.isWidget&&((m=Z.dom)===null||m===void 0?void 0:m.nodeType)==1){let ce=Z.dom.getBoundingClientRect();return o.y<ce.top||o.y<=ce.bottom&&o.x<=(ce.left+ce.right)/2?Z.posAtStart:Z.posAtEnd}else return Z.localPosFromDOM(q,ae)+Z.posAtStart}function hne(u,o,i,l,d){let m=Math.round((l-o.left)*u.defaultCharacterWidth);if(u.lineWrapping&&i.height>u.defaultLineHeight*1.5){let v=u.viewState.heightOracle.textHeight,x=Math.floor((d-i.top-(u.defaultLineHeight-v)*.5)/v);m+=x*u.viewState.heightOracle.lineLength}let p=u.state.sliceDoc(i.from,i.to);return i.from+kJ(p,m,u.state.tabSize)}function lde(u,o,i){let l;if(u.nodeType!=3||o!=(l=u.nodeValue.length))return!1;for(let d=u.nextSibling;d;d=d.nextSibling)if(d.nodeType!=1||d.nodeName!="BR")return!1;return Sy(u,l-1,l).getBoundingClientRect().left>i}function cde(u,o,i){if(o!=0)return!1;for(let d=u;;){let m=d.parentNode;if(!m||m.nodeType!=1||m.firstChild!=d)return!1;if(m.classList.contains("cm-line"))break;d=m}let l=u.nodeType==1?u.getBoundingClientRect():Sy(u,0,Math.max(u.nodeValue.length,1)).getBoundingClientRect();return i-l.left>5}function HJ(u,o){let i=u.lineBlockAt(o);if(Array.isArray(i.type)){for(let l of i.type)if(l.to>o||l.to==o&&(l.to==i.to||l.type==Yc.Text))return l}return i}function ude(u,o,i,l){let d=HJ(u,o.head),m=!l||d.type!=Yc.Text||!(u.lineWrapping||d.widgetLineBreaks)?null:u.coordsAtPos(o.assoc<0&&o.head>d.from?o.head-1:o.head);if(m){let p=u.dom.getBoundingClientRect(),v=u.textDirectionAt(d.from),x=u.posAtCoords({x:i==(v==Ni.LTR)?p.right-1:p.left+1,y:(m.top+m.bottom)/2});if(x!=null)return rn.cursor(x,i?-1:1)}return rn.cursor(i?d.to:d.from,i?-1:1)}function mne(u,o,i,l){let d=u.state.doc.lineAt(o.head),m=u.bidiSpans(d),p=u.textDirectionAt(d.from);for(let v=o,x=null;;){let k=Kue(d,m,p,v,i),T=Zse;if(!k){if(d.number==(i?u.state.doc.lines:1))return v;T=`
`,d=u.state.doc.line(d.number+(i?1:-1)),m=u.bidiSpans(d),k=u.visualLineSide(d,!i)}if(x){if(!x(T))return v}else{if(!l)return k;x=l(T)}v=k}}function dde(u,o,i){let l=u.state.charCategorizer(o),d=l(i);return m=>{let p=l(m);return d==zi.Space&&(d=p),d==p}}function fde(u,o,i,l){let d=o.head,m=i?1:-1;if(d==(i?u.state.doc.length:0))return rn.cursor(d,o.assoc);let p=o.goalColumn,v,x=u.contentDOM.getBoundingClientRect(),k=u.coordsAtPos(d,o.assoc||-1),T=u.documentTop;if(k)p==null&&(p=k.left-x.left),v=m<0?k.top:k.bottom;else{let I=u.viewState.lineBlockAt(d);p==null&&(p=Math.min(x.right-x.left,u.defaultCharacterWidth*(d-I.from))),v=(m<0?I.top:I.bottom)+T}let M=x.left+p,N=l!=null?l:u.viewState.heightOracle.textHeight>>1;for(let I=0;;I+=10){let z=v+(N+I)*m,Y=cre(u,{x:M,y:z},!1,m);if(z<x.top||z>x.bottom||(m<0?Y<d:Y>d)){let J=u.docView.coordsForChar(Y),q=!J||z<J.top?-1:1;return rn.cursor(Y,q,void 0,p)}}}function X$(u,o,i){for(;;){let l=0;for(let d of u)d.between(o-1,o+1,(m,p,v)=>{if(o>m&&o<p){let x=l||i||(o-m<p-o?-1:1);o=x<0?m:p,l=x}});if(!l)return o}}function zX(u,o,i){let l=X$(u.state.facet(kQ).map(d=>d(u)),i.from,o.head>i.from?-1:1);return l==i.from?i:rn.cursor(l,l<i.from?1:-1)}const $D="￿";class hde{constructor(o,i){this.points=o,this.text="",this.lineSeparator=i.facet(lr.lineSeparator)}append(o){this.text+=o}lineBreak(){this.text+=$D}readRange(o,i){if(!o)return this;let l=o.parentNode;for(let d=o;;){this.findPointBefore(l,d);let m=this.text.length;this.readNode(d);let p=d.nextSibling;if(p==i)break;let v=li.get(d),x=li.get(p);(v&&x?v.breakAfter:(v?v.breakAfter:f6(d))||f6(p)&&(d.nodeName!="BR"||d.cmIgnore)&&this.text.length>m)&&this.lineBreak(),d=p}return this.findPointBefore(l,i),this}readTextNode(o){let i=o.nodeValue;for(let l of this.points)l.node==o&&(l.pos=this.text.length+Math.min(l.offset,i.length));for(let l=0,d=this.lineSeparator?null:/\r\n?|\n/g;;){let m=-1,p=1,v;if(this.lineSeparator?(m=i.indexOf(this.lineSeparator,l),p=this.lineSeparator.length):(v=d.exec(i))&&(m=v.index,p=v[0].length),this.append(i.slice(l,m<0?i.length:m)),m<0)break;if(this.lineBreak(),p>1)for(let x of this.points)x.node==o&&x.pos>this.text.length&&(x.pos-=p-1);l=m+p}}readNode(o){if(o.cmIgnore)return;let i=li.get(o),l=i&&i.overrideDOMText;if(l!=null){this.findPointInside(o,l.length);for(let d=l.iter();!d.next().done;)d.lineBreak?this.lineBreak():this.append(d.value)}else o.nodeType==3?this.readTextNode(o):o.nodeName=="BR"?o.nextSibling&&this.lineBreak():o.nodeType==1&&this.readRange(o.firstChild,null)}findPointBefore(o,i){for(let l of this.points)l.node==o&&o.childNodes[l.offset]==i&&(l.pos=this.text.length)}findPointInside(o,i){for(let l of this.points)(o.nodeType==3?l.node==o:o.contains(l.node))&&(l.pos=this.text.length+(mde(o,l.node,l.offset)?i:0))}}function mde(u,o,i){for(;;){if(!o||i<Ug(o))return!1;if(o==u)return!0;i=Cy(o)+1,o=o.parentNode}}class gne{constructor(o,i){this.node=o,this.offset=i,this.pos=-1}}class gde{constructor(o,i,l,d){this.typeOver=d,this.bounds=null,this.text="",this.domChanged=i>-1;let{impreciseHead:m,impreciseAnchor:p}=o.docView;if(o.state.readOnly&&i>-1)this.newSel=null;else if(i>-1&&(this.bounds=o.docView.domBoundsAround(i,l,0))){let v=m||p?[]:vde(o),x=new hde(v,o.state);x.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=x.text,this.newSel=yde(v,this.bounds.from)}else{let v=o.observer.selectionRange,x=m&&m.node==v.focusNode&&m.offset==v.focusOffset||!TJ(o.contentDOM,v.focusNode)?o.state.selection.main.head:o.docView.posFromDOM(v.focusNode,v.focusOffset),k=p&&p.node==v.anchorNode&&p.offset==v.anchorOffset||!TJ(o.contentDOM,v.anchorNode)?o.state.selection.main.anchor:o.docView.posFromDOM(v.anchorNode,v.anchorOffset),T=o.viewport;if((To.ios||To.chrome)&&o.state.selection.main.empty&&x!=k&&(T.from>0||T.to<o.state.doc.length)){let M=Math.min(x,k),N=Math.max(x,k),I=T.from-M,z=T.to-N;(I==0||I==1||M==0)&&(z==0||z==-1||N==o.state.doc.length)&&(x=0,k=o.state.doc.length)}this.newSel=rn.single(k,x)}}}function ure(u,o){let i,{newSel:l}=o,d=u.state.selection.main,m=u.inputState.lastKeyTime>Date.now()-100?u.inputState.lastKeyCode:-1;if(o.bounds){let{from:p,to:v}=o.bounds,x=d.from,k=null;(m===8||To.android&&o.text.length<v-p)&&(x=d.to,k="end");let T=bde(u.state.doc.sliceString(p,v,$D),o.text,x-p,k);T&&(To.chrome&&m==13&&T.toB==T.from+2&&o.text.slice(T.from,T.toB)==$D+$D&&T.toB--,i={from:p+T.from,to:p+T.toA,insert:Or.of(o.text.slice(T.from,T.toB).split($D))})}else l&&(!u.hasFocus&&u.state.facet(K1)||l.main.eq(d))&&(l=null);if(!i&&!l)return!1;if(!i&&o.typeOver&&!d.empty&&l&&l.main.empty?i={from:d.from,to:d.to,insert:u.state.doc.slice(d.from,d.to)}:i&&i.from>=d.from&&i.to<=d.to&&(i.from!=d.from||i.to!=d.to)&&d.to-d.from-(i.to-i.from)<=4?i={from:d.from,to:d.to,insert:u.state.doc.slice(d.from,i.from).append(i.insert).append(u.state.doc.slice(i.to,d.to))}:(To.mac||To.android)&&i&&i.from==i.to&&i.from==d.head-1&&/^\. ?$/.test(i.insert.toString())&&u.contentDOM.getAttribute("autocorrect")=="off"?(l&&i.insert.length==2&&(l=rn.single(l.main.anchor-1,l.main.head-1)),i={from:d.from,to:d.to,insert:Or.of([" "])}):To.chrome&&i&&i.from==i.to&&i.from==d.head&&i.insert.toString()==`
 `&&u.lineWrapping&&(l&&(l=rn.single(l.main.anchor-1,l.main.head-1)),i={from:d.from,to:d.to,insert:Or.of([" "])}),i)return EQ(u,i,l,m);if(l&&!l.main.eq(d)){let p=!1,v="select";return u.inputState.lastSelectionTime>Date.now()-50&&(u.inputState.lastSelectionOrigin=="select"&&(p=!0),v=u.inputState.lastSelectionOrigin),u.dispatch({selection:l,scrollIntoView:p,userEvent:v}),!0}else return!1}function EQ(u,o,i,l=-1){if(To.ios&&u.inputState.flushIOSKey(o))return!0;let d=u.state.selection.main;if(To.android&&(o.to==d.to&&(o.from==d.from||o.from==d.from-1&&u.state.sliceDoc(o.from,d.from)==" ")&&o.insert.length==1&&o.insert.lines==2&&h2(u.contentDOM,"Enter",13)||(o.from==d.from-1&&o.to==d.to&&o.insert.length==0||l==8&&o.insert.length<o.to-o.from&&o.to>d.head)&&h2(u.contentDOM,"Backspace",8)||o.from==d.from&&o.to==d.to+1&&o.insert.length==0&&h2(u.contentDOM,"Delete",46)))return!0;let m=o.insert.toString();u.inputState.composing>=0&&u.inputState.composing++;let p,v=()=>p||(p=pde(u,o,i));return u.state.facet(Xse).some(x=>x(u,o.from,o.to,m,v))||u.dispatch(v()),!0}function pde(u,o,i){let l,d=u.state,m=d.selection.main;if(o.from>=m.from&&o.to<=m.to&&o.to-o.from>=(m.to-m.from)/3&&(!i||i.main.empty&&i.main.from==o.from+o.insert.length)&&u.inputState.composing<0){let v=m.from<o.from?d.sliceDoc(m.from,o.from):"",x=m.to>o.to?d.sliceDoc(o.to,m.to):"";l=d.replaceSelection(u.state.toText(v+o.insert.sliceString(0,void 0,u.state.lineBreak)+x))}else{let v=d.changes(o),x=i&&i.main.to<=v.newLength?i.main:void 0;if(d.selection.ranges.length>1&&u.inputState.composing>=0&&o.to<=m.to&&o.to>=m.to-10){let k=u.state.sliceDoc(o.from,o.to),T,M=i&&lre(u,i.main.head);if(M){let z=o.insert.length-(o.to-o.from);T={from:M.from,to:M.to-z}}else T=u.state.doc.lineAt(m.head);let N=m.to-o.to,I=m.to-m.from;l=d.changeByRange(z=>{if(z.from==m.from&&z.to==m.to)return{changes:v,range:x||z.map(v)};let Y=z.to-N,J=Y-k.length;if(z.to-z.from!=I||u.state.sliceDoc(J,Y)!=k||z.to>=T.from&&z.from<=T.to)return{range:z};let q=d.changes({from:J,to:Y,insert:o.insert}),ae=z.to-m.to;return{changes:q,range:x?rn.range(Math.max(0,x.anchor+ae),Math.max(0,x.head+ae)):z.map(q)}})}else l={changes:v,selection:x&&d.selection.replaceRange(x)}}let p="input.type";return(u.composing||u.inputState.compositionPendingChange&&u.inputState.compositionEndedAt>Date.now()-50)&&(u.inputState.compositionPendingChange=!1,p+=".compose",u.inputState.compositionFirstChange&&(p+=".start",u.inputState.compositionFirstChange=!1)),d.update(l,{userEvent:p,scrollIntoView:!0})}function bde(u,o,i,l){let d=Math.min(u.length,o.length),m=0;for(;m<d&&u.charCodeAt(m)==o.charCodeAt(m);)m++;if(m==d&&u.length==o.length)return null;let p=u.length,v=o.length;for(;p>0&&v>0&&u.charCodeAt(p-1)==o.charCodeAt(v-1);)p--,v--;if(l=="end"){let x=Math.max(0,m-Math.min(p,v));i-=p+x-m}if(p<m&&u.length<o.length){let x=i<=m&&i>=p?m-i:0;m-=x,v=m+(v-p),p=m}else if(v<m){let x=i<=m&&i>=v?m-i:0;m-=x,p=m+(p-v),v=m}return{from:m,toA:p,toB:v}}function vde(u){let o=[];if(u.root.activeElement!=u.contentDOM)return o;let{anchorNode:i,anchorOffset:l,focusNode:d,focusOffset:m}=u.observer.selectionRange;return i&&(o.push(new gne(i,l)),(d!=i||m!=l)&&o.push(new gne(d,m))),o}function yde(u,o){if(u.length==0)return null;let i=u[0].pos,l=u.length==2?u[1].pos:i;return i>-1&&l>-1?rn.single(i+o,l+o):null}class wde{setSelectionOrigin(o){this.lastSelectionOrigin=o,this.lastSelectionTime=Date.now()}constructor(o){this.view=o,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=o.hasFocus,To.safari&&o.contentDOM.addEventListener("input",()=>null),To.gecko&&Fde(o.contentDOM.ownerDocument)}handleEvent(o){!Ode(this.view,o)||this.ignoreDuringComposition(o)||o.type=="keydown"&&this.keydown(o)||this.runHandlers(o.type,o)}runHandlers(o,i){let l=this.handlers[o];if(l){for(let d of l.observers)d(this.view,i);for(let d of l.handlers){if(i.defaultPrevented)break;if(d(this.view,i)){i.preventDefault();break}}}}ensureHandlers(o){let i=xde(o),l=this.handlers,d=this.view.contentDOM;for(let m in i)if(m!="scroll"){let p=!i[m].handlers.length,v=l[m];v&&p!=!v.handlers.length&&(d.removeEventListener(m,this.handleEvent),v=null),v||d.addEventListener(m,this.handleEvent,{passive:p})}for(let m in l)m!="scroll"&&!i[m]&&d.removeEventListener(m,this.handleEvent);this.handlers=i}keydown(o){if(this.lastKeyCode=o.keyCode,this.lastKeyTime=Date.now(),o.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&o.keyCode!=27&&fre.indexOf(o.keyCode)<0&&(this.tabFocusMode=-1),To.android&&To.chrome&&!o.synthetic&&(o.keyCode==13||o.keyCode==8))return this.view.observer.delayAndroidKey(o.key,o.keyCode),!0;let i;return To.ios&&!o.synthetic&&!o.altKey&&!o.metaKey&&((i=dre.find(l=>l.keyCode==o.keyCode))&&!o.ctrlKey||Cde.indexOf(o.key)>-1&&o.ctrlKey&&!o.shiftKey)?(this.pendingIOSKey=i||o,setTimeout(()=>this.flushIOSKey(),250),!0):(o.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(o){let i=this.pendingIOSKey;return!i||i.key=="Enter"&&o&&o.from<o.to&&/^\S+$/.test(o.insert.toString())?!1:(this.pendingIOSKey=void 0,h2(this.view.contentDOM,i.key,i.keyCode,i instanceof KeyboardEvent?i:void 0))}ignoreDuringComposition(o){return/^key/.test(o.type)?this.composing>0?!0:To.safari&&!To.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(o){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=o}update(o){this.view.observer.update(o),this.mouseSelection&&this.mouseSelection.update(o),this.draggedContent&&o.docChanged&&(this.draggedContent=this.draggedContent.map(o.changes)),o.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function pne(u,o){return(i,l)=>{try{return o.call(u,l,i)}catch(d){_u(i.state,d)}}}function xde(u){let o=Object.create(null);function i(l){return o[l]||(o[l]={observers:[],handlers:[]})}for(let l of u){let d=l.spec;if(d&&d.domEventHandlers)for(let m in d.domEventHandlers){let p=d.domEventHandlers[m];p&&i(m).handlers.push(pne(l.value,p))}if(d&&d.domEventObservers)for(let m in d.domEventObservers){let p=d.domEventObservers[m];p&&i(m).observers.push(pne(l.value,p))}}for(let l in mh)i(l).handlers.push(mh[l]);for(let l in yf)i(l).observers.push(yf[l]);return o}const dre=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Cde="dthko",fre=[16,17,18,20,91,92,224,225],A$=6;function T$(u){return Math.max(0,u)*.7+8}function Sde(u,o){return Math.max(Math.abs(u.clientX-o.clientX),Math.abs(u.clientY-o.clientY))}class kde{constructor(o,i,l,d){this.view=o,this.startEvent=i,this.style=l,this.mustSelect=d,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=i,this.scrollParents=Rue(o.contentDOM),this.atoms=o.state.facet(kQ).map(p=>p(o));let m=o.contentDOM.ownerDocument;m.addEventListener("mousemove",this.move=this.move.bind(this)),m.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=o.state.facet(lr.allowMultipleSelections)&&Ede(o,i),this.dragging=Tde(o,i)&&gre(i)==1?null:!1}start(o){this.dragging===!1&&this.select(o)}move(o){if(o.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Sde(this.startEvent,o)<10)return;this.select(this.lastEvent=o);let i=0,l=0,d=0,m=0,p=this.view.win.innerWidth,v=this.view.win.innerHeight;this.scrollParents.x&&({left:d,right:p}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:m,bottom:v}=this.scrollParents.y.getBoundingClientRect());let x=are(this.view);o.clientX-x.left<=d+A$?i=-T$(d-o.clientX):o.clientX+x.right>=p-A$&&(i=T$(o.clientX-p)),o.clientY-x.top<=m+A$?l=-T$(m-o.clientY):o.clientY+x.bottom>=v-A$&&(l=T$(o.clientY-v)),this.setScrollSpeed(i,l)}up(o){this.dragging==null&&this.select(this.lastEvent),this.dragging||o.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let o=this.view.contentDOM.ownerDocument;o.removeEventListener("mousemove",this.move),o.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(o,i){this.scrollSpeed={x:o,y:i},o||i?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:o,y:i}=this.scrollSpeed;o&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=o,o=0),i&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=i,i=0),(o||i)&&this.view.win.scrollBy(o,i),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(o){let i=null;for(let l=0;l<o.ranges.length;l++){let d=o.ranges[l],m=null;if(d.empty){let p=X$(this.atoms,d.from,0);p!=d.from&&(m=rn.cursor(p,-1))}else{let p=X$(this.atoms,d.from,-1),v=X$(this.atoms,d.to,1);(p!=d.from||v!=d.to)&&(m=rn.range(d.from==d.anchor?p:v,d.from==d.head?p:v))}m&&(i||(i=o.ranges.slice()),i[l]=m)}return i?rn.create(i,o.mainIndex):o}select(o){let{view:i}=this,l=this.skipAtoms(this.style.get(o,this.extend,this.multiple));(this.mustSelect||!l.eq(i.state.selection,this.dragging===!1))&&this.view.dispatch({selection:l,userEvent:"select.pointer"}),this.mustSelect=!1}update(o){o.transactions.some(i=>i.isUserEvent("input.type"))?this.destroy():this.style.update(o)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Ede(u,o){let i=u.state.facet(qse);return i.length?i[0](o):To.mac?o.metaKey:o.ctrlKey}function Ade(u,o){let i=u.state.facet(Gse);return i.length?i[0](o):To.mac?!o.altKey:!o.ctrlKey}function Tde(u,o){let{main:i}=u.state.selection;if(i.empty)return!1;let l=eM(u.root);if(!l||l.rangeCount==0)return!0;let d=l.getRangeAt(0).getClientRects();for(let m=0;m<d.length;m++){let p=d[m];if(p.left<=o.clientX&&p.right>=o.clientX&&p.top<=o.clientY&&p.bottom>=o.clientY)return!0}return!1}function Ode(u,o){if(!o.bubbles)return!0;if(o.defaultPrevented)return!1;for(let i=o.target,l;i!=u.contentDOM;i=i.parentNode)if(!i||i.nodeType==11||(l=li.get(i))&&l.ignoreEvent(o))return!1;return!0}const mh=Object.create(null),yf=Object.create(null),hre=To.ie&&To.ie_version<15||To.ios&&To.webkit_version<604;function _de(u){let o=u.dom.parentNode;if(!o)return;let i=o.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout(()=>{u.focus(),i.remove(),mre(u,i.value)},50)}function H6(u,o,i){for(let l of u.facet(o))i=l(i,u);return i}function mre(u,o){o=H6(u.state,xQ,o);let{state:i}=u,l,d=1,m=i.toText(o),p=m.lines==i.selection.ranges.length;if(VJ!=null&&i.selection.ranges.every(x=>x.empty)&&VJ==m.toString()){let x=-1;l=i.changeByRange(k=>{let T=i.doc.lineAt(k.from);if(T.from==x)return{range:k};x=T.from;let M=i.toText((p?m.line(d++).text:o)+i.lineBreak);return{changes:{from:T.from,insert:M},range:rn.cursor(k.from+M.length)}})}else p?l=i.changeByRange(x=>{let k=m.line(d++);return{changes:{from:x.from,to:x.to,insert:k.text},range:rn.cursor(x.from+k.length)}}):l=i.replaceSelection(m);u.dispatch(l,{userEvent:"input.paste",scrollIntoView:!0})}yf.scroll=u=>{u.inputState.lastScrollTop=u.scrollDOM.scrollTop,u.inputState.lastScrollLeft=u.scrollDOM.scrollLeft};mh.keydown=(u,o)=>(u.inputState.setSelectionOrigin("select"),o.keyCode==27&&u.inputState.tabFocusMode!=0&&(u.inputState.tabFocusMode=Date.now()+2e3),!1);yf.touchstart=(u,o)=>{u.inputState.lastTouchTime=Date.now(),u.inputState.setSelectionOrigin("select.pointer")};yf.touchmove=u=>{u.inputState.setSelectionOrigin("select.pointer")};mh.mousedown=(u,o)=>{if(u.observer.flush(),u.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let l of u.state.facet(Kse))if(i=l(u,o),i)break;if(!i&&o.button==0&&(i=Pde(u,o)),i){let l=!u.hasFocus;u.inputState.startMouseSelection(new kde(u,o,i,l)),l&&u.observer.ignore(()=>{Ose(u.contentDOM);let m=u.root.activeElement;m&&!m.contains(u.contentDOM)&&m.blur()});let d=u.inputState.mouseSelection;if(d)return d.start(o),d.dragging===!1}return!1};function bne(u,o,i,l){if(l==1)return rn.cursor(o,i);if(l==2)return rde(u.state,o,i);{let d=Wa.find(u.docView,o),m=u.state.doc.lineAt(d?d.posAtEnd:o),p=d?d.posAtStart:m.from,v=d?d.posAtEnd:m.to;return v<u.state.doc.length&&v==m.to&&v++,rn.range(p,v)}}let vne=(u,o,i)=>o>=i.top&&o<=i.bottom&&u>=i.left&&u<=i.right;function Dde(u,o,i,l){let d=Wa.find(u.docView,o);if(!d)return 1;let m=o-d.posAtStart;if(m==0)return 1;if(m==d.length)return-1;let p=d.coordsAt(m,-1);if(p&&vne(i,l,p))return-1;let v=d.coordsAt(m,1);return v&&vne(i,l,v)?1:p&&p.bottom>=l?-1:1}function yne(u,o){let i=u.posAtCoords({x:o.clientX,y:o.clientY},!1);return{pos:i,bias:Dde(u,i,o.clientX,o.clientY)}}const Mde=To.ie&&To.ie_version<=11;let wne=null,xne=0,Cne=0;function gre(u){if(!Mde)return u.detail;let o=wne,i=Cne;return wne=u,Cne=Date.now(),xne=!o||i>Date.now()-400&&Math.abs(o.clientX-u.clientX)<2&&Math.abs(o.clientY-u.clientY)<2?(xne+1)%3:1}function Pde(u,o){let i=yne(u,o),l=gre(o),d=u.state.selection;return{update(m){m.docChanged&&(i.pos=m.changes.mapPos(i.pos),d=d.map(m.changes))},get(m,p,v){let x=yne(u,m),k,T=bne(u,x.pos,x.bias,l);if(i.pos!=x.pos&&!p){let M=bne(u,i.pos,i.bias,l),N=Math.min(M.from,T.from),I=Math.max(M.to,T.to);T=N<T.from?rn.range(N,I):rn.range(I,N)}return p?d.replaceRange(d.main.extend(T.from,T.to)):v&&l==1&&d.ranges.length>1&&(k=Rde(d,x.pos))?k:v?d.addRange(T):rn.create([T])}}}function Rde(u,o){for(let i=0;i<u.ranges.length;i++){let{from:l,to:d}=u.ranges[i];if(l<=o&&d>=o)return rn.create(u.ranges.slice(0,i).concat(u.ranges.slice(i+1)),u.mainIndex==i?0:u.mainIndex-(u.mainIndex>i?1:0))}return null}mh.dragstart=(u,o)=>{let{selection:{main:i}}=u.state;if(o.target.draggable){let d=u.docView.nearest(o.target);if(d&&d.isWidget){let m=d.posAtStart,p=m+d.length;(m>=i.to||p<=i.from)&&(i=rn.range(m,p))}}let{inputState:l}=u;return l.mouseSelection&&(l.mouseSelection.dragging=!0),l.draggedContent=i,o.dataTransfer&&(o.dataTransfer.setData("Text",H6(u.state,CQ,u.state.sliceDoc(i.from,i.to))),o.dataTransfer.effectAllowed="copyMove"),!1};mh.dragend=u=>(u.inputState.draggedContent=null,!1);function Sne(u,o,i,l){if(i=H6(u.state,xQ,i),!i)return;let d=u.posAtCoords({x:o.clientX,y:o.clientY},!1),{draggedContent:m}=u.inputState,p=l&&m&&Ade(u,o)?{from:m.from,to:m.to}:null,v={from:d,insert:i},x=u.state.changes(p?[p,v]:v);u.focus(),u.dispatch({changes:x,selection:{anchor:x.mapPos(d,-1),head:x.mapPos(d,1)},userEvent:p?"move.drop":"input.drop"}),u.inputState.draggedContent=null}mh.drop=(u,o)=>{if(!o.dataTransfer)return!1;if(u.state.readOnly)return!0;let i=o.dataTransfer.files;if(i&&i.length){let l=Array(i.length),d=0,m=()=>{++d==i.length&&Sne(u,o,l.filter(p=>p!=null).join(u.state.lineBreak),!1)};for(let p=0;p<i.length;p++){let v=new FileReader;v.onerror=m,v.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(v.result)||(l[p]=v.result),m()},v.readAsText(i[p])}return!0}else{let l=o.dataTransfer.getData("Text");if(l)return Sne(u,o,l,!0),!0}return!1};mh.paste=(u,o)=>{if(u.state.readOnly)return!0;u.observer.flush();let i=hre?null:o.clipboardData;return i?(mre(u,i.getData("text/plain")||i.getData("text/uri-list")),!0):(_de(u),!1)};function Nde(u,o){let i=u.dom.parentNode;if(!i)return;let l=i.appendChild(document.createElement("textarea"));l.style.cssText="position: fixed; left: -10000px; top: 10px",l.value=o,l.focus(),l.selectionEnd=o.length,l.selectionStart=0,setTimeout(()=>{l.remove(),u.focus()},50)}function Bde(u){let o=[],i=[],l=!1;for(let d of u.selection.ranges)d.empty||(o.push(u.sliceDoc(d.from,d.to)),i.push(d));if(!o.length){let d=-1;for(let{from:m}of u.selection.ranges){let p=u.doc.lineAt(m);p.number>d&&(o.push(p.text),i.push({from:p.from,to:Math.min(u.doc.length,p.to+1)})),d=p.number}l=!0}return{text:H6(u,CQ,o.join(u.lineBreak)),ranges:i,linewise:l}}let VJ=null;mh.copy=mh.cut=(u,o)=>{let{text:i,ranges:l,linewise:d}=Bde(u.state);if(!i&&!d)return!1;VJ=d?i:null,o.type=="cut"&&!u.state.readOnly&&u.dispatch({changes:l,scrollIntoView:!0,userEvent:"delete.cut"});let m=hre?null:o.clipboardData;return m?(m.clearData(),m.setData("text/plain",i),!0):(Nde(u,i),!1)};const pre=Zg.define();function bre(u,o){let i=[];for(let l of u.facet(Jse)){let d=l(u,o);d&&i.push(d)}return i?u.update({effects:i,annotations:pre.of(!0)}):null}function vre(u){setTimeout(()=>{let o=u.hasFocus;if(o!=u.inputState.notifiedFocused){let i=bre(u.state,o);i?u.dispatch(i):u.update([])}},10)}yf.focus=u=>{u.inputState.lastFocusTime=Date.now(),!u.scrollDOM.scrollTop&&(u.inputState.lastScrollTop||u.inputState.lastScrollLeft)&&(u.scrollDOM.scrollTop=u.inputState.lastScrollTop,u.scrollDOM.scrollLeft=u.inputState.lastScrollLeft),vre(u)};yf.blur=u=>{u.observer.clearSelectionRange(),vre(u)};yf.compositionstart=yf.compositionupdate=u=>{u.observer.editContext||(u.inputState.compositionFirstChange==null&&(u.inputState.compositionFirstChange=!0),u.inputState.composing<0&&(u.inputState.composing=0))};yf.compositionend=u=>{u.observer.editContext||(u.inputState.composing=-1,u.inputState.compositionEndedAt=Date.now(),u.inputState.compositionPendingKey=!0,u.inputState.compositionPendingChange=u.observer.pendingRecords().length>0,u.inputState.compositionFirstChange=null,To.chrome&&To.android?u.observer.flushSoon():u.inputState.compositionPendingChange?Promise.resolve().then(()=>u.observer.flush()):setTimeout(()=>{u.inputState.composing<0&&u.docView.hasComposition&&u.update([])},50))};yf.contextmenu=u=>{u.inputState.lastContextMenu=Date.now()};mh.beforeinput=(u,o)=>{var i,l;if(o.inputType=="insertReplacementText"&&u.observer.editContext){let m=(i=o.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain"),p=o.getTargetRanges();if(m&&p.length){let v=p[0],x=u.posAtDOM(v.startContainer,v.startOffset),k=u.posAtDOM(v.endContainer,v.endOffset);return EQ(u,{from:x,to:k,insert:u.state.toText(m)},null),!0}}let d;if(To.chrome&&To.android&&(d=dre.find(m=>m.inputType==o.inputType))&&(u.observer.delayAndroidKey(d.key,d.keyCode),d.key=="Backspace"||d.key=="Delete")){let m=((l=window.visualViewport)===null||l===void 0?void 0:l.height)||0;setTimeout(()=>{var p;(((p=window.visualViewport)===null||p===void 0?void 0:p.height)||0)>m+10&&u.hasFocus&&(u.contentDOM.blur(),u.focus())},100)}return To.ios&&o.inputType=="deleteContentForward"&&u.observer.flushSoon(),To.safari&&o.inputType=="insertText"&&u.inputState.composing>=0&&setTimeout(()=>yf.compositionend(u,o),20),!1};const kne=new Set;function Fde(u){kne.has(u)||(kne.add(u),u.addEventListener("copy",()=>{}),u.addEventListener("cut",()=>{}))}const Ene=["pre-wrap","normal","pre-line","break-spaces"];let C2=!1;function Ane(){C2=!1}class Ide{constructor(o){this.lineWrapping=o,this.doc=Or.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(o,i){let l=this.doc.lineAt(i).number-this.doc.lineAt(o).number+1;return this.lineWrapping&&(l+=Math.max(0,Math.ceil((i-o-l*this.lineLength*.5)/this.lineLength))),this.lineHeight*l}heightForLine(o){return this.lineWrapping?(1+Math.max(0,Math.ceil((o-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(o){return this.doc=o,this}mustRefreshForWrapping(o){return Ene.indexOf(o)>-1!=this.lineWrapping}mustRefreshForHeights(o){let i=!1;for(let l=0;l<o.length;l++){let d=o[l];d<0?l++:this.heightSamples[Math.floor(d*10)]||(i=!0,this.heightSamples[Math.floor(d*10)]=!0)}return i}refresh(o,i,l,d,m,p){let v=Ene.indexOf(o)>-1,x=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=v;if(this.lineWrapping=v,this.lineHeight=i,this.charWidth=l,this.textHeight=d,this.lineLength=m,x){this.heightSamples={};for(let k=0;k<p.length;k++){let T=p[k];T<0?k++:this.heightSamples[Math.floor(T*10)]=!0}}return x}}class Lde{constructor(o,i){this.from=o,this.heights=i,this.index=0}get more(){return this.index<this.heights.length}}class bm{constructor(o,i,l,d,m){this.from=o,this.length=i,this.top=l,this.height=d,this._content=m}get type(){return typeof this._content=="number"?Yc.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof d0?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(o){let i=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(o._content)?o._content:[o]);return new bm(this.from,this.length+o.length,this.top,this.height+o.height,i)}}var Ri=function(u){return u[u.ByPos=0]="ByPos",u[u.ByHeight=1]="ByHeight",u[u.ByPosNoHeight=2]="ByPosNoHeight",u}(Ri||(Ri={}));const J$=.001;class Xc{constructor(o,i,l=2){this.length=o,this.height=i,this.flags=l}get outdated(){return(this.flags&2)>0}set outdated(o){this.flags=(o?2:0)|this.flags&-3}setHeight(o){this.height!=o&&(Math.abs(this.height-o)>J$&&(C2=!0),this.height=o)}replace(o,i,l){return Xc.of(l)}decomposeLeft(o,i){i.push(this)}decomposeRight(o,i){i.push(this)}applyChanges(o,i,l,d){let m=this,p=l.doc;for(let v=d.length-1;v>=0;v--){let{fromA:x,toA:k,fromB:T,toB:M}=d[v],N=m.lineAt(x,Ri.ByPosNoHeight,l.setDoc(i),0,0),I=N.to>=k?N:m.lineAt(k,Ri.ByPosNoHeight,l,0,0);for(M+=I.to-k,k=I.to;v>0&&N.from<=d[v-1].toA;)x=d[v-1].fromA,T=d[v-1].fromB,v--,x<N.from&&(N=m.lineAt(x,Ri.ByPosNoHeight,l,0,0));T+=N.from-x,x=N.from;let z=AQ.build(l.setDoc(p),o,T,M);m=g6(m,m.replace(x,k,z))}return m.updateHeight(l,0)}static empty(){return new vd(0,0)}static of(o){if(o.length==1)return o[0];let i=0,l=o.length,d=0,m=0;for(;;)if(i==l)if(d>m*2){let v=o[i-1];v.break?o.splice(--i,1,v.left,null,v.right):o.splice(--i,1,v.left,v.right),l+=1+v.break,d-=v.size}else if(m>d*2){let v=o[l];v.break?o.splice(l,1,v.left,null,v.right):o.splice(l,1,v.left,v.right),l+=2+v.break,m-=v.size}else break;else if(d<m){let v=o[i++];v&&(d+=v.size)}else{let v=o[--l];v&&(m+=v.size)}let p=0;return o[i-1]==null?(p=1,i--):o[i]==null&&(p=1,l++),new $de(Xc.of(o.slice(0,i)),p,Xc.of(o.slice(l)))}}function g6(u,o){return u==o?u:(u.constructor!=o.constructor&&(C2=!0),o)}Xc.prototype.size=1;class yre extends Xc{constructor(o,i,l){super(o,i),this.deco=l}blockAt(o,i,l,d){return new bm(d,this.length,l,this.height,this.deco||0)}lineAt(o,i,l,d,m){return this.blockAt(0,l,d,m)}forEachLine(o,i,l,d,m,p){o<=m+this.length&&i>=m&&p(this.blockAt(0,l,d,m))}updateHeight(o,i=0,l=!1,d){return d&&d.from<=i&&d.more&&this.setHeight(d.heights[d.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class vd extends yre{constructor(o,i){super(o,i,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(o,i,l,d){return new bm(d,this.length,l,this.height,this.breaks)}replace(o,i,l){let d=l[0];return l.length==1&&(d instanceof vd||d instanceof Ll&&d.flags&4)&&Math.abs(this.length-d.length)<10?(d instanceof Ll?d=new vd(d.length,this.height):d.height=this.height,this.outdated||(d.outdated=!1),d):Xc.of(l)}updateHeight(o,i=0,l=!1,d){return d&&d.from<=i&&d.more?this.setHeight(d.heights[d.index++]):(l||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,o.heightForLine(this.length-this.collapsed))+this.breaks*o.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ll extends Xc{constructor(o){super(o,0)}heightMetrics(o,i){let l=o.doc.lineAt(i).number,d=o.doc.lineAt(i+this.length).number,m=d-l+1,p,v=0;if(o.lineWrapping){let x=Math.min(this.height,o.lineHeight*m);p=x/m,this.length>m+1&&(v=(this.height-x)/(this.length-m-1))}else p=this.height/m;return{firstLine:l,lastLine:d,perLine:p,perChar:v}}blockAt(o,i,l,d){let{firstLine:m,lastLine:p,perLine:v,perChar:x}=this.heightMetrics(i,d);if(i.lineWrapping){let k=d+(o<i.lineHeight?0:Math.round(Math.max(0,Math.min(1,(o-l)/this.height))*this.length)),T=i.doc.lineAt(k),M=v+T.length*x,N=Math.max(l,o-M/2);return new bm(T.from,T.length,N,M,0)}else{let k=Math.max(0,Math.min(p-m,Math.floor((o-l)/v))),{from:T,length:M}=i.doc.line(m+k);return new bm(T,M,l+v*k,v,0)}}lineAt(o,i,l,d,m){if(i==Ri.ByHeight)return this.blockAt(o,l,d,m);if(i==Ri.ByPosNoHeight){let{from:I,to:z}=l.doc.lineAt(o);return new bm(I,z-I,0,0,0)}let{firstLine:p,perLine:v,perChar:x}=this.heightMetrics(l,m),k=l.doc.lineAt(o),T=v+k.length*x,M=k.number-p,N=d+v*M+x*(k.from-m-M);return new bm(k.from,k.length,Math.max(d,Math.min(N,d+this.height-T)),T,0)}forEachLine(o,i,l,d,m,p){o=Math.max(o,m),i=Math.min(i,m+this.length);let{firstLine:v,perLine:x,perChar:k}=this.heightMetrics(l,m);for(let T=o,M=d;T<=i;){let N=l.doc.lineAt(T);if(T==o){let z=N.number-v;M+=x*z+k*(o-m-z)}let I=x+k*N.length;p(new bm(N.from,N.length,M,I,0)),M+=I,T=N.to+1}}replace(o,i,l){let d=this.length-i;if(d>0){let m=l[l.length-1];m instanceof Ll?l[l.length-1]=new Ll(m.length+d):l.push(null,new Ll(d-1))}if(o>0){let m=l[0];m instanceof Ll?l[0]=new Ll(o+m.length):l.unshift(new Ll(o-1),null)}return Xc.of(l)}decomposeLeft(o,i){i.push(new Ll(o-1),null)}decomposeRight(o,i){i.push(null,new Ll(this.length-o-1))}updateHeight(o,i=0,l=!1,d){let m=i+this.length;if(d&&d.from<=i+this.length&&d.more){let p=[],v=Math.max(i,d.from),x=-1;for(d.from>i&&p.push(new Ll(d.from-i-1).updateHeight(o,i));v<=m&&d.more;){let T=o.doc.lineAt(v).length;p.length&&p.push(null);let M=d.heights[d.index++];x==-1?x=M:Math.abs(M-x)>=J$&&(x=-2);let N=new vd(T,M);N.outdated=!1,p.push(N),v+=T+1}v<=m&&p.push(null,new Ll(m-v).updateHeight(o,v));let k=Xc.of(p);return(x<0||Math.abs(k.height-this.height)>=J$||Math.abs(x-this.heightMetrics(o,i).perLine)>=J$)&&(C2=!0),g6(this,k)}else(l||this.outdated)&&(this.setHeight(o.heightForGap(i,i+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class $de extends Xc{constructor(o,i,l){super(o.length+i+l.length,o.height+l.height,i|(o.outdated||l.outdated?2:0)),this.left=o,this.right=l,this.size=o.size+l.size}get break(){return this.flags&1}blockAt(o,i,l,d){let m=l+this.left.height;return o<m?this.left.blockAt(o,i,l,d):this.right.blockAt(o,i,m,d+this.left.length+this.break)}lineAt(o,i,l,d,m){let p=d+this.left.height,v=m+this.left.length+this.break,x=i==Ri.ByHeight?o<p:o<v,k=x?this.left.lineAt(o,i,l,d,m):this.right.lineAt(o,i,l,p,v);if(this.break||(x?k.to<v:k.from>v))return k;let T=i==Ri.ByPosNoHeight?Ri.ByPosNoHeight:Ri.ByPos;return x?k.join(this.right.lineAt(v,T,l,p,v)):this.left.lineAt(v,T,l,d,m).join(k)}forEachLine(o,i,l,d,m,p){let v=d+this.left.height,x=m+this.left.length+this.break;if(this.break)o<x&&this.left.forEachLine(o,i,l,d,m,p),i>=x&&this.right.forEachLine(o,i,l,v,x,p);else{let k=this.lineAt(x,Ri.ByPos,l,d,m);o<k.from&&this.left.forEachLine(o,k.from-1,l,d,m,p),k.to>=o&&k.from<=i&&p(k),i>k.to&&this.right.forEachLine(k.to+1,i,l,v,x,p)}}replace(o,i,l){let d=this.left.length+this.break;if(i<d)return this.balanced(this.left.replace(o,i,l),this.right);if(o>this.left.length)return this.balanced(this.left,this.right.replace(o-d,i-d,l));let m=[];o>0&&this.decomposeLeft(o,m);let p=m.length;for(let v of l)m.push(v);if(o>0&&Tne(m,p-1),i<this.length){let v=m.length;this.decomposeRight(i,m),Tne(m,v)}return Xc.of(m)}decomposeLeft(o,i){let l=this.left.length;if(o<=l)return this.left.decomposeLeft(o,i);i.push(this.left),this.break&&(l++,o>=l&&i.push(null)),o>l&&this.right.decomposeLeft(o-l,i)}decomposeRight(o,i){let l=this.left.length,d=l+this.break;if(o>=d)return this.right.decomposeRight(o-d,i);o<l&&this.left.decomposeRight(o,i),this.break&&o<d&&i.push(null),i.push(this.right)}balanced(o,i){return o.size>2*i.size||i.size>2*o.size?Xc.of(this.break?[o,null,i]:[o,i]):(this.left=g6(this.left,o),this.right=g6(this.right,i),this.setHeight(o.height+i.height),this.outdated=o.outdated||i.outdated,this.size=o.size+i.size,this.length=o.length+this.break+i.length,this)}updateHeight(o,i=0,l=!1,d){let{left:m,right:p}=this,v=i+m.length+this.break,x=null;return d&&d.from<=i+m.length&&d.more?x=m=m.updateHeight(o,i,l,d):m.updateHeight(o,i,l),d&&d.from<=v+p.length&&d.more?x=p=p.updateHeight(o,v,l,d):p.updateHeight(o,v,l),x?this.balanced(m,p):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Tne(u,o){let i,l;u[o]==null&&(i=u[o-1])instanceof Ll&&(l=u[o+1])instanceof Ll&&u.splice(o-1,3,new Ll(i.length+1+l.length))}const Hde=5;class AQ{constructor(o,i){this.pos=o,this.oracle=i,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=o}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(o,i){if(this.lineStart>-1){let l=Math.min(i,this.lineEnd),d=this.nodes[this.nodes.length-1];d instanceof vd?d.length+=l-this.pos:(l>this.pos||!this.isCovered)&&this.nodes.push(new vd(l-this.pos,-1)),this.writtenTo=l,i>l&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=i}point(o,i,l){if(o<i||l.heightRelevant){let d=l.widget?l.widget.estimatedHeight:0,m=l.widget?l.widget.lineBreaks:0;d<0&&(d=this.oracle.lineHeight);let p=i-o;l.block?this.addBlock(new yre(p,d,l)):(p||m||d>=Hde)&&this.addLineDeco(d,m,p)}else i>o&&this.span(o,i);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:o,to:i}=this.oracle.doc.lineAt(this.pos);this.lineStart=o,this.lineEnd=i,this.writtenTo<o&&((this.writtenTo<o-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,o-1)),this.nodes.push(null)),this.pos>o&&this.nodes.push(new vd(this.pos-o,-1)),this.writtenTo=this.pos}blankContent(o,i){let l=new Ll(i-o);return this.oracle.doc.lineAt(o).to==i&&(l.flags|=4),l}ensureLine(){this.enterLine();let o=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(o instanceof vd)return o;let i=new vd(0,-1);return this.nodes.push(i),i}addBlock(o){this.enterLine();let i=o.deco;i&&i.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(o),this.writtenTo=this.pos=this.pos+o.length,i&&i.endSide>0&&(this.covering=o)}addLineDeco(o,i,l){let d=this.ensureLine();d.length+=l,d.collapsed+=l,d.widgetHeight=Math.max(d.widgetHeight,o),d.breaks+=i,this.writtenTo=this.pos=this.pos+l}finish(o){let i=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(i instanceof vd)&&!this.isCovered?this.nodes.push(new vd(0,-1)):(this.writtenTo<this.pos||i==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let l=o;for(let d of this.nodes)d instanceof vd&&d.updateHeight(this.oracle,l),l+=d?d.length:1;return this.nodes}static build(o,i,l,d){let m=new AQ(l,o);return yr.spans(i,l,d,m,0),m.finish(l)}}function Vde(u,o,i){let l=new zde;return yr.compare(u,o,i,l,0),l.changes}class zde{constructor(){this.changes=[]}compareRange(){}comparePoint(o,i,l,d){(o<i||l&&l.heightRelevant||d&&d.heightRelevant)&&RJ(o,i,this.changes,5)}}function Ude(u,o){let i=u.getBoundingClientRect(),l=u.ownerDocument,d=l.defaultView||window,m=Math.max(0,i.left),p=Math.min(d.innerWidth,i.right),v=Math.max(0,i.top),x=Math.min(d.innerHeight,i.bottom);for(let k=u.parentNode;k&&k!=l.body;)if(k.nodeType==1){let T=k,M=window.getComputedStyle(T);if((T.scrollHeight>T.clientHeight||T.scrollWidth>T.clientWidth)&&M.overflow!="visible"){let N=T.getBoundingClientRect();m=Math.max(m,N.left),p=Math.min(p,N.right),v=Math.max(v,N.top),x=Math.min(k==u.parentNode?d.innerHeight:x,N.bottom)}k=M.position=="absolute"||M.position=="fixed"?T.offsetParent:T.parentNode}else if(k.nodeType==11)k=k.host;else break;return{left:m-i.left,right:Math.max(m,p)-i.left,top:v-(i.top+o),bottom:Math.max(v,x)-(i.top+o)}}function Wde(u,o){let i=u.getBoundingClientRect();return{left:0,right:i.right-i.left,top:o,bottom:i.bottom-(i.top+o)}}class UX{constructor(o,i,l){this.from=o,this.to=i,this.size=l}static same(o,i){if(o.length!=i.length)return!1;for(let l=0;l<o.length;l++){let d=o[l],m=i[l];if(d.from!=m.from||d.to!=m.to||d.size!=m.size)return!1}return!0}draw(o,i){return Zo.replace({widget:new jde(this.size*(i?o.scaleY:o.scaleX),i)}).range(this.from,this.to)}}class jde extends qg{constructor(o,i){super(),this.size=o,this.vertical=i}eq(o){return o.size==this.size&&o.vertical==this.vertical}toDOM(){let o=document.createElement("div");return this.vertical?o.style.height=this.size+"px":(o.style.width=this.size+"px",o.style.height="2px",o.style.display="inline-block"),o}get estimatedHeight(){return this.vertical?this.size:-1}}class One{constructor(o){this.state=o,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=_ne,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ni.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let i=o.facet(SQ).some(l=>typeof l!="function"&&l.class=="cm-lineWrapping");this.heightOracle=new Ide(i),this.stateDeco=o.facet(tM).filter(l=>typeof l!="function"),this.heightMap=Xc.empty().applyChanges(this.stateDeco,Or.empty,this.heightOracle.setDoc(o.doc),[new bf(0,0,0,o.doc.length)]);for(let l=0;l<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());l++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Zo.set(this.lineGaps.map(l=>l.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let o=[this.viewport],{main:i}=this.state.selection;for(let l=0;l<=1;l++){let d=l?i.head:i.anchor;if(!o.some(({from:m,to:p})=>d>=m&&d<=p)){let{from:m,to:p}=this.lineBlockAt(d);o.push(new O$(m,p))}}return this.viewports=o.sort((l,d)=>l.from-d.from),this.updateScaler()}updateScaler(){let o=this.scaler;return this.scaler=this.heightMap.height<=7e6?_ne:new TQ(this.heightOracle,this.heightMap,this.viewports),o.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,o=>{this.viewportLines.push(HD(o,this.scaler))})}update(o,i=null){this.state=o.state;let l=this.stateDeco;this.stateDeco=this.state.facet(tM).filter(T=>typeof T!="function");let d=o.changedRanges,m=bf.extendWithRanges(d,Vde(l,this.stateDeco,o?o.changes:sl.empty(this.state.doc.length))),p=this.heightMap.height,v=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ane(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,o.startState.doc,this.heightOracle.setDoc(this.state.doc),m),(this.heightMap.height!=p||C2)&&(o.flags|=2),v?(this.scrollAnchorPos=o.changes.mapPos(v.from,-1),this.scrollAnchorHeight=v.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let x=m.length?this.mapViewport(this.viewport,o.changes):this.viewport;(i&&(i.range.head<x.from||i.range.head>x.to)||!this.viewportIsAppropriate(x))&&(x=this.getViewport(0,i));let k=x.from!=this.viewport.from||x.to!=this.viewport.to;this.viewport=x,o.flags|=this.updateForViewport(),(k||!o.changes.empty||o.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,o.changes))),o.flags|=this.computeVisibleRanges(),i&&(this.scrollTarget=i),!this.mustEnforceCursorAssoc&&o.selectionSet&&o.view.lineWrapping&&o.state.selection.main.empty&&o.state.selection.main.assoc&&!o.state.facet(ere)&&(this.mustEnforceCursorAssoc=!0)}measure(o){let i=o.contentDOM,l=window.getComputedStyle(i),d=this.heightOracle,m=l.whiteSpace;this.defaultTextDirection=l.direction=="rtl"?Ni.RTL:Ni.LTR;let p=this.heightOracle.mustRefreshForWrapping(m),v=i.getBoundingClientRect(),x=p||this.mustMeasureContent||this.contentDOMHeight!=v.height;this.contentDOMHeight=v.height,this.mustMeasureContent=!1;let k=0,T=0;if(v.width&&v.height){let{scaleX:ce,scaleY:_e}=Tse(i,v);(ce>.005&&Math.abs(this.scaleX-ce)>.005||_e>.005&&Math.abs(this.scaleY-_e)>.005)&&(this.scaleX=ce,this.scaleY=_e,k|=8,p=x=!0)}let M=(parseInt(l.paddingTop)||0)*this.scaleY,N=(parseInt(l.paddingBottom)||0)*this.scaleY;(this.paddingTop!=M||this.paddingBottom!=N)&&(this.paddingTop=M,this.paddingBottom=N,k|=10),this.editorWidth!=o.scrollDOM.clientWidth&&(d.lineWrapping&&(x=!0),this.editorWidth=o.scrollDOM.clientWidth,k|=8);let I=o.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=I&&(this.scrollAnchorHeight=-1,this.scrollTop=I),this.scrolledToBottom=Dse(o.scrollDOM);let z=(this.printing?Wde:Ude)(i,this.paddingTop),Y=z.top-this.pixelViewport.top,J=z.bottom-this.pixelViewport.bottom;this.pixelViewport=z;let q=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(q!=this.inView&&(this.inView=q,q&&(x=!0)),!this.inView&&!this.scrollTarget)return 0;let ae=v.width;if((this.contentDOMWidth!=ae||this.editorHeight!=o.scrollDOM.clientHeight)&&(this.contentDOMWidth=v.width,this.editorHeight=o.scrollDOM.clientHeight,k|=8),x){let ce=o.docView.measureVisibleLineHeights(this.viewport);if(d.mustRefreshForHeights(ce)&&(p=!0),p||d.lineWrapping&&Math.abs(ae-this.contentDOMWidth)>d.charWidth){let{lineHeight:_e,charWidth:De,textHeight:G}=o.docView.measureTextSize();p=_e>0&&d.refresh(m,_e,De,G,ae/De,ce),p&&(o.docView.minWidth=0,k|=8)}Y>0&&J>0?T=Math.max(Y,J):Y<0&&J<0&&(T=Math.min(Y,J)),Ane();for(let _e of this.viewports){let De=_e.from==this.viewport.from?ce:o.docView.measureVisibleLineHeights(_e);this.heightMap=(p?Xc.empty().applyChanges(this.stateDeco,Or.empty,this.heightOracle,[new bf(0,0,0,o.state.doc.length)]):this.heightMap).updateHeight(d,0,p,new Lde(_e.from,De))}C2&&(k|=2)}let Z=!this.viewportIsAppropriate(this.viewport,T)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Z&&(k&2&&(k|=this.updateScaler()),this.viewport=this.getViewport(T,this.scrollTarget),k|=this.updateForViewport()),(k&2||Z)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(p?[]:this.lineGaps,o)),k|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,o.docView.enforceCursorAssoc()),k}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(o,i){let l=.5-Math.max(-.5,Math.min(.5,o/1e3/2)),d=this.heightMap,m=this.heightOracle,{visibleTop:p,visibleBottom:v}=this,x=new O$(d.lineAt(p-l*1e3,Ri.ByHeight,m,0,0).from,d.lineAt(v+(1-l)*1e3,Ri.ByHeight,m,0,0).to);if(i){let{head:k}=i.range;if(k<x.from||k>x.to){let T=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),M=d.lineAt(k,Ri.ByPos,m,0,0),N;i.y=="center"?N=(M.top+M.bottom)/2-T/2:i.y=="start"||i.y=="nearest"&&k<x.from?N=M.top:N=M.bottom-T,x=new O$(d.lineAt(N-1e3/2,Ri.ByHeight,m,0,0).from,d.lineAt(N+T+1e3/2,Ri.ByHeight,m,0,0).to)}}return x}mapViewport(o,i){let l=i.mapPos(o.from,-1),d=i.mapPos(o.to,1);return new O$(this.heightMap.lineAt(l,Ri.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(d,Ri.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:o,to:i},l=0){if(!this.inView)return!0;let{top:d}=this.heightMap.lineAt(o,Ri.ByPos,this.heightOracle,0,0),{bottom:m}=this.heightMap.lineAt(i,Ri.ByPos,this.heightOracle,0,0),{visibleTop:p,visibleBottom:v}=this;return(o==0||d<=p-Math.max(10,Math.min(-l,250)))&&(i==this.state.doc.length||m>=v+Math.max(10,Math.min(l,250)))&&d>p-2*1e3&&m<v+2*1e3}mapLineGaps(o,i){if(!o.length||i.empty)return o;let l=[];for(let d of o)i.touchesRange(d.from,d.to)||l.push(new UX(i.mapPos(d.from),i.mapPos(d.to),d.size));return l}ensureLineGaps(o,i){let l=this.heightOracle.lineWrapping,d=l?1e4:2e3,m=d>>1,p=d<<1;if(this.defaultTextDirection!=Ni.LTR&&!l)return[];let v=[],x=(T,M,N,I)=>{if(M-T<m)return;let z=this.state.selection.main,Y=[z.from];z.empty||Y.push(z.to);for(let q of Y)if(q>T&&q<M){x(T,q-10,N,I),x(q+10,M,N,I);return}let J=qde(o,q=>q.from>=N.from&&q.to<=N.to&&Math.abs(q.from-T)<m&&Math.abs(q.to-M)<m&&!Y.some(ae=>q.from<ae&&q.to>ae));if(!J){if(M<N.to&&i&&l&&i.visibleRanges.some(q=>q.from<=M&&q.to>=M)){let q=i.moveToLineBoundary(rn.cursor(M),!1,!0).head;q>T&&(M=q)}J=new UX(T,M,this.gapSize(N,T,M,I))}v.push(J)},k=T=>{if(T.length<p||T.type!=Yc.Text)return;let M=Zde(T.from,T.to,this.stateDeco);if(M.total<p)return;let N=this.scrollTarget?this.scrollTarget.range.head:null,I,z;if(l){let Y=d/this.heightOracle.lineLength*this.heightOracle.lineHeight,J,q;if(N!=null){let ae=D$(M,N),Z=((this.visibleBottom-this.visibleTop)/2+Y)/T.height;J=ae-Z,q=ae+Z}else J=(this.visibleTop-T.top-Y)/T.height,q=(this.visibleBottom-T.top+Y)/T.height;I=_$(M,J),z=_$(M,q)}else{let Y=M.total*this.heightOracle.charWidth,J=d*this.heightOracle.charWidth,q,ae;if(N!=null){let Z=D$(M,N),ce=((this.pixelViewport.right-this.pixelViewport.left)/2+J)/Y;q=Z-ce,ae=Z+ce}else q=(this.pixelViewport.left-J)/Y,ae=(this.pixelViewport.right+J)/Y;I=_$(M,q),z=_$(M,ae)}I>T.from&&x(T.from,I,T,M),z<T.to&&x(z,T.to,T,M)};for(let T of this.viewportLines)Array.isArray(T.type)?T.type.forEach(k):k(T);return v}gapSize(o,i,l,d){let m=D$(d,l)-D$(d,i);return this.heightOracle.lineWrapping?o.height*m:d.total*this.heightOracle.charWidth*m}updateLineGaps(o){UX.same(o,this.lineGaps)||(this.lineGaps=o,this.lineGapDeco=Zo.set(o.map(i=>i.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let o=this.stateDeco;this.lineGaps.length&&(o=o.concat(this.lineGapDeco));let i=[];yr.spans(o,this.viewport.from,this.viewport.to,{span(d,m){i.push({from:d,to:m})},point(){}},20);let l=i.length!=this.visibleRanges.length||this.visibleRanges.some((d,m)=>d.from!=i[m].from||d.to!=i[m].to);return this.visibleRanges=i,l?4:0}lineBlockAt(o){return o>=this.viewport.from&&o<=this.viewport.to&&this.viewportLines.find(i=>i.from<=o&&i.to>=o)||HD(this.heightMap.lineAt(o,Ri.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(o){return o>=this.viewportLines[0].top&&o<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(i=>i.top<=o&&i.bottom>=o)||HD(this.heightMap.lineAt(this.scaler.fromDOM(o),Ri.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(o){let i=this.lineBlockAtHeight(o+8);return i.from>=this.viewport.from||this.viewportLines[0].top-o>200?i:this.viewportLines[0]}elementAtHeight(o){return HD(this.heightMap.blockAt(this.scaler.fromDOM(o),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class O${constructor(o,i){this.from=o,this.to=i}}function Zde(u,o,i){let l=[],d=u,m=0;return yr.spans(i,u,o,{span(){},point(p,v){p>d&&(l.push({from:d,to:p}),m+=p-d),d=v}},20),d<o&&(l.push({from:d,to:o}),m+=o-d),{total:m,ranges:l}}function _$({total:u,ranges:o},i){if(i<=0)return o[0].from;if(i>=1)return o[o.length-1].to;let l=Math.floor(u*i);for(let d=0;;d++){let{from:m,to:p}=o[d],v=p-m;if(l<=v)return m+l;l-=v}}function D$(u,o){let i=0;for(let{from:l,to:d}of u.ranges){if(o<=d){i+=o-l;break}i+=d-l}return i/u.total}function qde(u,o){for(let i of u)if(o(i))return i}const _ne={toDOM(u){return u},fromDOM(u){return u},scale:1,eq(u){return u==this}};class TQ{constructor(o,i,l){let d=0,m=0,p=0;this.viewports=l.map(({from:v,to:x})=>{let k=i.lineAt(v,Ri.ByPos,o,0,0).top,T=i.lineAt(x,Ri.ByPos,o,0,0).bottom;return d+=T-k,{from:v,to:x,top:k,bottom:T,domTop:0,domBottom:0}}),this.scale=(7e6-d)/(i.height-d);for(let v of this.viewports)v.domTop=p+(v.top-m)*this.scale,p=v.domBottom=v.domTop+(v.bottom-v.top),m=v.bottom}toDOM(o){for(let i=0,l=0,d=0;;i++){let m=i<this.viewports.length?this.viewports[i]:null;if(!m||o<m.top)return d+(o-l)*this.scale;if(o<=m.bottom)return m.domTop+(o-m.top);l=m.bottom,d=m.domBottom}}fromDOM(o){for(let i=0,l=0,d=0;;i++){let m=i<this.viewports.length?this.viewports[i]:null;if(!m||o<m.domTop)return l+(o-d)/this.scale;if(o<=m.domBottom)return m.top+(o-m.domTop);l=m.bottom,d=m.domBottom}}eq(o){return o instanceof TQ?this.scale==o.scale&&this.viewports.length==o.viewports.length&&this.viewports.every((i,l)=>i.from==o.viewports[l].from&&i.to==o.viewports[l].to):!1}}function HD(u,o){if(o.scale==1)return u;let i=o.toDOM(u.top),l=o.toDOM(u.bottom);return new bm(u.from,u.length,i,l-i,Array.isArray(u._content)?u._content.map(d=>HD(d,o)):u._content)}const M$=Co.define({combine:u=>u.join(" ")}),zJ=Co.define({combine:u=>u.indexOf(!0)>-1}),UJ=c0.newName(),wre=c0.newName(),xre=c0.newName(),Cre={"&light":"."+wre,"&dark":"."+xre};function WJ(u,o,i){return new c0(o,{finish(l){return/&/.test(l)?l.replace(/&\w*/,d=>{if(d=="&")return u;if(!i||!i[d])throw new RangeError(`Unsupported selector: ${d}`);return i[d]}):u+" "+l}})}const Gde=WJ("."+UJ,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Cre),Kde={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},WX=To.ie&&To.ie_version<=11;class Yde{constructor(o){this.view=o,this.active=!1,this.editContext=null,this.selectionRange=new Nue,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=o.contentDOM,this.observer=new MutationObserver(i=>{for(let l of i)this.queue.push(l);(To.ie&&To.ie_version<=11||To.ios&&o.composing)&&i.some(l=>l.type=="childList"&&l.removedNodes.length||l.type=="characterData"&&l.oldValue.length>l.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&o.constructor.EDIT_CONTEXT!==!1&&!(To.chrome&&To.chrome_version<126)&&(this.editContext=new Jde(o),o.state.facet(K1)&&(o.contentDOM.editContext=this.editContext.editContext)),WX&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var i;((i=this.view.docView)===null||i===void 0?void 0:i.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(o.scrollDOM)),this.addWindowListeners(this.win=o.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(o){this.view.inputState.runHandlers("scroll",o),this.intersecting&&this.view.measure()}onScroll(o){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(o)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(o){(o.type=="change"||!o.type)&&!o.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(o){if(this.gapIntersection&&(o.length!=this.gaps.length||this.gaps.some((i,l)=>i!=o[l]))){this.gapIntersection.disconnect();for(let i of o)this.gapIntersection.observe(i);this.gaps=o}}onSelectionChange(o){let i=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:l}=this,d=this.selectionRange;if(l.state.facet(K1)?l.root.activeElement!=this.dom:!Y$(l.dom,d))return;let m=d.anchorNode&&l.docView.nearest(d.anchorNode);if(m&&m.ignoreEvent(o)){i||(this.selectionChanged=!1);return}(To.ie&&To.ie_version<=11||To.android&&To.chrome)&&!l.state.selection.main.empty&&d.focusNode&&jD(d.focusNode,d.focusOffset,d.anchorNode,d.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:o}=this,i=eM(o.root);if(!i)return!1;let l=To.safari&&o.root.nodeType==11&&Due(this.dom.ownerDocument)==this.dom&&Xde(this.view,i)||i;if(!l||this.selectionRange.eq(l))return!1;let d=Y$(this.dom,l);return d&&!this.selectionChanged&&o.inputState.lastFocusTime>Date.now()-200&&o.inputState.lastTouchTime<Date.now()-300&&Fue(this.dom,l)?(this.view.inputState.lastFocusTime=0,o.docView.updateSelection(),!1):(this.selectionRange.setRange(l),d&&(this.selectionChanged=!0),!0)}setSelectionRange(o,i){this.selectionRange.set(o.node,o.offset,i.node,i.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let o=0,i=null;for(let l=this.dom;l;)if(l.nodeType==1)!i&&o<this.scrollTargets.length&&this.scrollTargets[o]==l?o++:i||(i=this.scrollTargets.slice(0,o)),i&&i.push(l),l=l.assignedSlot||l.parentNode;else if(l.nodeType==11)l=l.host;else break;if(o<this.scrollTargets.length&&!i&&(i=this.scrollTargets.slice(0,o)),i){for(let l of this.scrollTargets)l.removeEventListener("scroll",this.onScroll);for(let l of this.scrollTargets=i)l.addEventListener("scroll",this.onScroll)}}ignore(o){if(!this.active)return o();try{return this.stop(),o()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Kde),WX&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),WX&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(o,i){var l;if(!this.delayedAndroidKey){let d=()=>{let m=this.delayedAndroidKey;m&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=m.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&m.force&&h2(this.dom,m.key,m.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(d)}(!this.delayedAndroidKey||o=="Enter")&&(this.delayedAndroidKey={key:o,keyCode:i,force:this.lastChange<Date.now()-50||!!(!((l=this.delayedAndroidKey)===null||l===void 0)&&l.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let o of this.observer.takeRecords())this.queue.push(o);return this.queue}processRecords(){let o=this.pendingRecords();o.length&&(this.queue=[]);let i=-1,l=-1,d=!1;for(let m of o){let p=this.readMutation(m);p&&(p.typeOver&&(d=!0),i==-1?{from:i,to:l}=p:(i=Math.min(p.from,i),l=Math.max(p.to,l)))}return{from:i,to:l,typeOver:d}}readChange(){let{from:o,to:i,typeOver:l}=this.processRecords(),d=this.selectionChanged&&Y$(this.dom,this.selectionRange);if(o<0&&!d)return null;o>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let m=new gde(this.view,o,i,l);return this.view.docView.domChanged={newSel:m.newSel?m.newSel.main:null},m}flush(o=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;o&&this.readSelectionRange();let i=this.readChange();if(!i)return this.view.requestMeasure(),!1;let l=this.view.state,d=ure(this.view,i);return this.view.state==l&&(i.domChanged||i.newSel&&!i.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),d}readMutation(o){let i=this.view.docView.nearest(o.target);if(!i||i.ignoreMutation(o))return null;if(i.markDirty(o.type=="attributes"),o.type=="attributes"&&(i.flags|=4),o.type=="childList"){let l=Dne(i,o.previousSibling||o.target.previousSibling,-1),d=Dne(i,o.nextSibling||o.target.nextSibling,1);return{from:l?i.posAfter(l):i.posAtStart,to:d?i.posBefore(d):i.posAtEnd,typeOver:!1}}else return o.type=="characterData"?{from:i.posAtStart,to:i.posAtEnd,typeOver:o.target.nodeValue==o.oldValue}:null}setWindow(o){o!=this.win&&(this.removeWindowListeners(this.win),this.win=o,this.addWindowListeners(this.win))}addWindowListeners(o){o.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):o.addEventListener("beforeprint",this.onPrint),o.addEventListener("scroll",this.onScroll),o.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(o){o.removeEventListener("scroll",this.onScroll),o.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):o.removeEventListener("beforeprint",this.onPrint),o.document.removeEventListener("selectionchange",this.onSelectionChange)}update(o){this.editContext&&(this.editContext.update(o),o.startState.facet(K1)!=o.state.facet(K1)&&(o.view.contentDOM.editContext=o.state.facet(K1)?this.editContext.editContext:null))}destroy(){var o,i,l;this.stop(),(o=this.intersection)===null||o===void 0||o.disconnect(),(i=this.gapIntersection)===null||i===void 0||i.disconnect(),(l=this.resizeScroll)===null||l===void 0||l.disconnect();for(let d of this.scrollTargets)d.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Dne(u,o,i){for(;o;){let l=li.get(o);if(l&&l.parent==u)return l;let d=o.parentNode;o=d!=u.dom?d:i>0?o.nextSibling:o.previousSibling}return null}function Mne(u,o){let i=o.startContainer,l=o.startOffset,d=o.endContainer,m=o.endOffset,p=u.docView.domAtPos(u.state.selection.main.anchor);return jD(p.node,p.offset,d,m)&&([i,l,d,m]=[d,m,i,l]),{anchorNode:i,anchorOffset:l,focusNode:d,focusOffset:m}}function Xde(u,o){if(o.getComposedRanges){let d=o.getComposedRanges(u.root)[0];if(d)return Mne(u,d)}let i=null;function l(d){d.preventDefault(),d.stopImmediatePropagation(),i=d.getTargetRanges()[0]}return u.contentDOM.addEventListener("beforeinput",l,!0),u.dom.ownerDocument.execCommand("indent"),u.contentDOM.removeEventListener("beforeinput",l,!0),i?Mne(u,i):null}class Jde{constructor(o){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(o.state);let i=this.editContext=new window.EditContext({text:o.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,o.state.selection.main.anchor))),selectionEnd:this.toContextPos(o.state.selection.main.head)});this.handlers.textupdate=l=>{let{anchor:d}=o.state.selection.main,m={from:this.toEditorPos(l.updateRangeStart),to:this.toEditorPos(l.updateRangeEnd),insert:Or.of(l.text.split(`
`))};m.from==this.from&&d<this.from?m.from=d:m.to==this.to&&d>this.to&&(m.to=d),!(m.from==m.to&&!m.insert.length)&&(this.pendingContextChange=m,o.state.readOnly||EQ(o,m,rn.single(this.toEditorPos(l.selectionStart),this.toEditorPos(l.selectionEnd))),this.pendingContextChange&&(this.revertPending(o.state),this.setSelection(o.state)))},this.handlers.characterboundsupdate=l=>{let d=[],m=null;for(let p=this.toEditorPos(l.rangeStart),v=this.toEditorPos(l.rangeEnd);p<v;p++){let x=o.coordsForChar(p);m=x&&new DOMRect(x.left,x.top,x.right-x.left,x.bottom-x.top)||m||new DOMRect,d.push(m)}i.updateCharacterBounds(l.rangeStart,d)},this.handlers.textformatupdate=l=>{let d=[];for(let m of l.getTextFormats()){let p=m.underlineStyle,v=m.underlineThickness;if(p!="None"&&v!="None"){let x=`text-decoration: underline ${p=="Dashed"?"dashed ":p=="Squiggle"?"wavy ":""}${v=="Thin"?1:2}px`;d.push(Zo.mark({attributes:{style:x}}).range(this.toEditorPos(m.rangeStart),this.toEditorPos(m.rangeEnd)))}}o.dispatch({effects:nre.of(Zo.set(d))})},this.handlers.compositionstart=()=>{o.inputState.composing<0&&(o.inputState.composing=0,o.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{o.inputState.composing=-1,o.inputState.compositionFirstChange=null};for(let l in this.handlers)i.addEventListener(l,this.handlers[l]);this.measureReq={read:l=>{this.editContext.updateControlBounds(l.contentDOM.getBoundingClientRect());let d=eM(l.root);d&&d.rangeCount&&this.editContext.updateSelectionBounds(d.getRangeAt(0).getBoundingClientRect())}}}applyEdits(o){let i=0,l=!1,d=this.pendingContextChange;return o.changes.iterChanges((m,p,v,x,k)=>{if(l)return;let T=k.length-(p-m);if(d&&p>=d.to)if(d.from==m&&d.to==p&&d.insert.eq(k)){d=this.pendingContextChange=null,i+=T,this.to+=T;return}else d=null,this.revertPending(o.state);if(m+=i,p+=i,p<=this.from)this.from+=T,this.to+=T;else if(m<this.to){if(m<this.from||p>this.to||this.to-this.from+k.length>3e4){l=!0;return}this.editContext.updateText(this.toContextPos(m),this.toContextPos(p),k.toString()),this.to+=T}i+=T}),d&&!l&&this.revertPending(o.state),!l}update(o){let i=this.pendingContextChange;!this.applyEdits(o)||!this.rangeIsValid(o.state)?(this.pendingContextChange=null,this.resetRange(o.state),this.editContext.updateText(0,this.editContext.text.length,o.state.doc.sliceString(this.from,this.to)),this.setSelection(o.state)):(o.docChanged||o.selectionSet||i)&&this.setSelection(o.state),(o.geometryChanged||o.docChanged||o.selectionSet)&&o.view.requestMeasure(this.measureReq)}resetRange(o){let{head:i}=o.selection.main;this.from=Math.max(0,i-1e4),this.to=Math.min(o.doc.length,i+1e4)}revertPending(o){let i=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(i.from),this.toContextPos(i.from+i.insert.length),o.doc.sliceString(i.from,i.to))}setSelection(o){let{main:i}=o.selection,l=this.toContextPos(Math.max(this.from,Math.min(this.to,i.anchor))),d=this.toContextPos(i.head);(this.editContext.selectionStart!=l||this.editContext.selectionEnd!=d)&&this.editContext.updateSelection(l,d)}rangeIsValid(o){let{head:i}=o.selection.main;return!(this.from>0&&i-this.from<500||this.to<o.doc.length&&this.to-i<500||this.to-this.from>1e4*3)}toEditorPos(o){return o+this.from}toContextPos(o){return o-this.from}destroy(){for(let o in this.handlers)this.editContext.removeEventListener(o,this.handlers[o])}}class po{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(o={}){var i;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),o.parent&&o.parent.appendChild(this.dom);let{dispatch:l}=o;this.dispatchTransactions=o.dispatchTransactions||l&&(d=>d.forEach(m=>l(m,this)))||(d=>this.update(d)),this.dispatch=this.dispatch.bind(this),this._root=o.root||Bue(o.parent)||document,this.viewState=new One(o.state||lr.create(o)),o.scrollTo&&o.scrollTo.is(E$)&&(this.viewState.scrollTarget=o.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ID).map(d=>new HX(d));for(let d of this.plugins)d.update(this);this.observer=new Yde(this),this.inputState=new wde(this),this.inputState.ensureHandlers(this.plugins),this.docView=new cne(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((i=document.fonts)===null||i===void 0)&&i.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...o){let i=o.length==1&&o[0]instanceof rl?o:o.length==1&&Array.isArray(o[0])?o[0]:[this.state.update(...o)];this.dispatchTransactions(i,this)}update(o){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let i=!1,l=!1,d,m=this.state;for(let N of o){if(N.startState!=m)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");m=N.state}if(this.destroyed){this.viewState.state=m;return}let p=this.hasFocus,v=0,x=null;o.some(N=>N.annotation(pre))?(this.inputState.notifiedFocused=p,v=1):p!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=p,x=bre(m,p),x||(v=1));let k=this.observer.delayedAndroidKey,T=null;if(k?(this.observer.clearDelayedAndroidKey(),T=this.observer.readChange(),(T&&!this.state.doc.eq(m.doc)||!this.state.selection.eq(m.selection))&&(T=null)):this.observer.clear(),m.facet(lr.phrases)!=this.state.facet(lr.phrases))return this.setState(m);d=m6.create(this,m,o),d.flags|=v;let M=this.viewState.scrollTarget;try{this.updateState=2;for(let N of o){if(M&&(M=M.map(N.changes)),N.scrollIntoView){let{main:I}=N.state.selection;M=new m2(I.empty?I:rn.cursor(I.head,I.head>I.anchor?-1:1))}for(let I of N.effects)I.is(E$)&&(M=I.value.clip(this.state))}this.viewState.update(d,M),this.bidiCache=p6.update(this.bidiCache,d.changes),d.empty||(this.updatePlugins(d),this.inputState.update(d)),i=this.docView.update(d),this.state.facet(LD)!=this.styleModules&&this.mountStyles(),l=this.updateAttrs(),this.showAnnouncements(o),this.docView.updateSelection(i,o.some(N=>N.isUserEvent("select.pointer")))}finally{this.updateState=0}if(d.startState.facet(M$)!=d.state.facet(M$)&&(this.viewState.mustMeasureContent=!0),(i||l||M||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!d.empty)for(let N of this.state.facet(LJ))try{N(d)}catch(I){_u(this.state,I,"update listener")}(x||T)&&Promise.resolve().then(()=>{x&&this.state==x.startState&&this.dispatch(x),T&&!ure(this,T)&&k.force&&h2(this.contentDOM,k.key,k.keyCode)})}setState(o){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=o;return}this.updateState=2;let i=this.hasFocus;try{for(let l of this.plugins)l.destroy(this);this.viewState=new One(o),this.plugins=o.facet(ID).map(l=>new HX(l)),this.pluginMap.clear();for(let l of this.plugins)l.update(this);this.docView.destroy(),this.docView=new cne(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(o){let i=o.startState.facet(ID),l=o.state.facet(ID);if(i!=l){let d=[];for(let m of l){let p=i.indexOf(m);if(p<0)d.push(new HX(m));else{let v=this.plugins[p];v.mustUpdate=o,d.push(v)}}for(let m of this.plugins)m.mustUpdate!=o&&m.destroy(this);this.plugins=d,this.pluginMap.clear()}else for(let d of this.plugins)d.mustUpdate=o;for(let d=0;d<this.plugins.length;d++)this.plugins[d].update(this);i!=l&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let o of this.plugins){let i=o.value;if(i&&i.docViewUpdate)try{i.docViewUpdate(this)}catch(l){_u(this.state,l,"doc view update listener")}}}measure(o=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,o&&this.observer.forceFlush();let i=null,l=this.scrollDOM,d=l.scrollTop*this.scaleY,{scrollAnchorPos:m,scrollAnchorHeight:p}=this.viewState;Math.abs(d-this.viewState.scrollTop)>1&&(p=-1),this.viewState.scrollAnchorHeight=-1;try{for(let v=0;;v++){if(p<0)if(Dse(l))m=-1,p=this.viewState.heightMap.height;else{let I=this.viewState.scrollAnchorAt(d);m=I.from,p=I.top}this.updateState=1;let x=this.viewState.measure(this);if(!x&&!this.measureRequests.length&&this.viewState.scrollTarget==null||v>5)break;let k=[];x&4||([this.measureRequests,k]=[k,this.measureRequests]);let T=k.map(I=>{try{return I.read(this)}catch(z){return _u(this.state,z),Pne}}),M=m6.create(this,this.state,[]),N=!1;M.flags|=x,i?i.flags|=x:i=M,this.updateState=2,M.empty||(this.updatePlugins(M),this.inputState.update(M),this.updateAttrs(),N=this.docView.update(M),N&&this.docViewUpdate());for(let I=0;I<k.length;I++)if(T[I]!=Pne)try{let z=k[I];z.write&&z.write(T[I],this)}catch(z){_u(this.state,z)}if(N&&this.docView.updateSelection(!0),!M.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=-1;continue}else{let z=(m<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(m).top)-p;if(z>1||z<-1){d=d+z,l.scrollTop=d/this.scaleY,p=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let v of this.state.facet(LJ))v(i)}get themeClasses(){return UJ+" "+(this.state.facet(zJ)?xre:wre)+" "+this.state.facet(M$)}updateAttrs(){let o=Rne(this,ore,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(K1)?"true":"false",class:"cm-content",style:`${To.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Rne(this,SQ,i);let l=this.observer.ignore(()=>{let d=PJ(this.contentDOM,this.contentAttrs,i),m=PJ(this.dom,this.editorAttrs,o);return d||m});return this.editorAttrs=o,this.contentAttrs=i,l}showAnnouncements(o){let i=!0;for(let l of o)for(let d of l.effects)if(d.is(po.announce)){i&&(this.announceDOM.textContent=""),i=!1;let m=this.announceDOM.appendChild(document.createElement("div"));m.textContent=d.value}}mountStyles(){this.styleModules=this.state.facet(LD);let o=this.state.facet(po.cspNonce);c0.mount(this.root,this.styleModules.concat(Gde).reverse(),o?{nonce:o}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(o){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),o){if(this.measureRequests.indexOf(o)>-1)return;if(o.key!=null){for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===o.key){this.measureRequests[i]=o;return}}this.measureRequests.push(o)}}plugin(o){let i=this.pluginMap.get(o);return(i===void 0||i&&i.spec!=o)&&this.pluginMap.set(o,i=this.plugins.find(l=>l.spec==o)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(o){return this.readMeasured(),this.viewState.elementAtHeight(o)}lineBlockAtHeight(o){return this.readMeasured(),this.viewState.lineBlockAtHeight(o)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(o){return this.viewState.lineBlockAt(o)}get contentHeight(){return this.viewState.contentHeight}moveByChar(o,i,l){return zX(this,o,mne(this,o,i,l))}moveByGroup(o,i){return zX(this,o,mne(this,o,i,l=>dde(this,o.head,l)))}visualLineSide(o,i){let l=this.bidiSpans(o),d=this.textDirectionAt(o.from),m=l[i?l.length-1:0];return rn.cursor(m.side(i,d)+o.from,m.forward(!i,d)?1:-1)}moveToLineBoundary(o,i,l=!0){return ude(this,o,i,l)}moveVertically(o,i,l){return zX(this,o,fde(this,o,i,l))}domAtPos(o){return this.docView.domAtPos(o)}posAtDOM(o,i=0){return this.docView.posFromDOM(o,i)}posAtCoords(o,i=!0){return this.readMeasured(),cre(this,o,i)}coordsAtPos(o,i=1){this.readMeasured();let l=this.docView.coordsAt(o,i);if(!l||l.left==l.right)return l;let d=this.state.doc.lineAt(o),m=this.bidiSpans(d),p=m[t0.find(m,o-d.from,-1,i)];return pM(l,p.dir==Ni.LTR==i>0)}coordsForChar(o){return this.readMeasured(),this.docView.coordsForChar(o)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(o){return!this.state.facet(Qse)||o<this.viewport.from||o>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(o))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(o){if(o.length>Qde)return jse(o.length);let i=this.textDirectionAt(o.from),l;for(let m of this.bidiCache)if(m.from==o.from&&m.dir==i&&(m.fresh||Wse(m.isolates,l=lne(this,o))))return m.order;l||(l=lne(this,o));let d=Gue(o.text,i,l);return this.bidiCache.push(new p6(o.from,o.to,i,l,!0,d)),d}get hasFocus(){var o;return(this.dom.ownerDocument.hasFocus()||To.safari&&((o=this.inputState)===null||o===void 0?void 0:o.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ose(this.contentDOM),this.docView.updateSelection()})}setRoot(o){this._root!=o&&(this._root=o,this.observer.setWindow((o.nodeType==9?o:o.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let o of this.plugins)o.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(o,i={}){return E$.of(new m2(typeof o=="number"?rn.cursor(o):o,i.y,i.x,i.yMargin,i.xMargin))}scrollSnapshot(){let{scrollTop:o,scrollLeft:i}=this.scrollDOM,l=this.viewState.scrollAnchorAt(o);return E$.of(new m2(rn.cursor(l.from),"start","start",l.top-o,i,!0))}setTabFocusMode(o){o==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof o=="boolean"?this.inputState.tabFocusMode=o?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+o)}static domEventHandlers(o){return Ta.define(()=>({}),{eventHandlers:o})}static domEventObservers(o){return Ta.define(()=>({}),{eventObservers:o})}static theme(o,i){let l=c0.newName(),d=[M$.of(l),LD.of(WJ(`.${l}`,o))];return i&&i.dark&&d.push(zJ.of(!0)),d}static baseTheme(o){return Oy.lowest(LD.of(WJ("."+UJ,o,Cre)))}static findFromDOM(o){var i;let l=o.querySelector(".cm-content"),d=l&&li.get(l)||li.get(o);return((i=d==null?void 0:d.rootView)===null||i===void 0?void 0:i.view)||null}}po.styleModule=LD;po.inputHandler=Xse;po.clipboardInputFilter=xQ;po.clipboardOutputFilter=CQ;po.scrollHandler=tre;po.focusChangeEffect=Jse;po.perLineTextDirection=Qse;po.exceptionSink=Yse;po.updateListener=LJ;po.editable=K1;po.mouseSelectionStyle=Kse;po.dragMovesSelection=Gse;po.clickAddsSelectionRange=qse;po.decorations=tM;po.outerDecorations=sre;po.atomicRanges=kQ;po.bidiIsolatedRanges=rre;po.scrollMargins=ire;po.darkTheme=zJ;po.cspNonce=Co.define({combine:u=>u.length?u[0]:""});po.contentAttributes=SQ;po.editorAttributes=ore;po.lineWrapping=po.contentAttributes.of({class:"cm-lineWrapping"});po.announce=Fs.define();const Qde=4096,Pne={};class p6{constructor(o,i,l,d,m,p){this.from=o,this.to=i,this.dir=l,this.isolates=d,this.fresh=m,this.order=p}static update(o,i){if(i.empty&&!o.some(m=>m.fresh))return o;let l=[],d=o.length?o[o.length-1].dir:Ni.LTR;for(let m=Math.max(0,o.length-10);m<o.length;m++){let p=o[m];p.dir==d&&!i.touchesRange(p.from,p.to)&&l.push(new p6(i.mapPos(p.from,1),i.mapPos(p.to,-1),p.dir,p.isolates,!1,p.order))}return l}}function Rne(u,o,i){for(let l=u.state.facet(o),d=l.length-1;d>=0;d--){let m=l[d],p=typeof m=="function"?m(u):m;p&&MJ(p,i)}return i}const efe=To.mac?"mac":To.windows?"win":To.linux?"linux":"key";function tfe(u,o){const i=u.split(/-(?!$)/);let l=i[i.length-1];l=="Space"&&(l=" ");let d,m,p,v;for(let x=0;x<i.length-1;++x){const k=i[x];if(/^(cmd|meta|m)$/i.test(k))v=!0;else if(/^a(lt)?$/i.test(k))d=!0;else if(/^(c|ctrl|control)$/i.test(k))m=!0;else if(/^s(hift)?$/i.test(k))p=!0;else if(/^mod$/i.test(k))o=="mac"?v=!0:m=!0;else throw new Error("Unrecognized modifier name: "+k)}return d&&(l="Alt-"+l),m&&(l="Ctrl-"+l),v&&(l="Meta-"+l),p&&(l="Shift-"+l),l}function P$(u,o,i){return o.altKey&&(u="Alt-"+u),o.ctrlKey&&(u="Ctrl-"+u),o.metaKey&&(u="Meta-"+u),i!==!1&&o.shiftKey&&(u="Shift-"+u),u}const nfe=Oy.default(po.domEventHandlers({keydown(u,o){return kre(Sre(o.state),u,o,"editor")}})),V6=Co.define({enables:nfe}),Nne=new WeakMap;function Sre(u){let o=u.facet(V6),i=Nne.get(o);return i||Nne.set(o,i=rfe(o.reduce((l,d)=>l.concat(d),[]))),i}function ofe(u,o,i){return kre(Sre(u.state),o,u,i)}let Y1=null;const sfe=4e3;function rfe(u,o=efe){let i=Object.create(null),l=Object.create(null),d=(p,v)=>{let x=l[p];if(x==null)l[p]=v;else if(x!=v)throw new Error("Key binding "+p+" is used both as a regular binding and as a multi-stroke prefix")},m=(p,v,x,k,T)=>{var M,N;let I=i[p]||(i[p]=Object.create(null)),z=v.split(/ (?!$)/).map(q=>tfe(q,o));for(let q=1;q<z.length;q++){let ae=z.slice(0,q).join(" ");d(ae,!0),I[ae]||(I[ae]={preventDefault:!0,stopPropagation:!1,run:[Z=>{let ce=Y1={view:Z,prefix:ae,scope:p};return setTimeout(()=>{Y1==ce&&(Y1=null)},sfe),!0}]})}let Y=z.join(" ");d(Y,!1);let J=I[Y]||(I[Y]={preventDefault:!1,stopPropagation:!1,run:((N=(M=I._any)===null||M===void 0?void 0:M.run)===null||N===void 0?void 0:N.slice())||[]});x&&J.run.push(x),k&&(J.preventDefault=!0),T&&(J.stopPropagation=!0)};for(let p of u){let v=p.scope?p.scope.split(" "):["editor"];if(p.any)for(let k of v){let T=i[k]||(i[k]=Object.create(null));T._any||(T._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:M}=p;for(let N in T)T[N].run.push(I=>M(I,jJ))}let x=p[o]||p.key;if(x)for(let k of v)m(k,x,p.run,p.preventDefault,p.stopPropagation),p.shift&&m(k,"Shift-"+x,p.shift,p.preventDefault,p.stopPropagation)}return i}let jJ=null;function kre(u,o,i,l){jJ=o;let d=_ue(o),m=Hl(d,0),p=df(m)==d.length&&d!=" ",v="",x=!1,k=!1,T=!1;Y1&&Y1.view==i&&Y1.scope==l&&(v=Y1.prefix+" ",fre.indexOf(o.keyCode)<0&&(k=!0,Y1=null));let M=new Set,N=J=>{if(J){for(let q of J.run)if(!M.has(q)&&(M.add(q),q(i)))return J.stopPropagation&&(T=!0),!0;J.preventDefault&&(J.stopPropagation&&(T=!0),k=!0)}return!1},I=u[l],z,Y;return I&&(N(I[v+P$(d,o,!p)])?x=!0:p&&(o.altKey||o.metaKey||o.ctrlKey)&&!(To.windows&&o.ctrlKey&&o.altKey)&&(z=u0[o.keyCode])&&z!=d?(N(I[v+P$(z,o,!0)])||o.shiftKey&&(Y=QD[o.keyCode])!=d&&Y!=z&&N(I[v+P$(Y,o,!1)]))&&(x=!0):p&&o.shiftKey&&N(I[v+P$(d,o,!0)])&&(x=!0),!x&&N(I._any)&&(x=!0)),k&&(x=!0),x&&T&&o.stopPropagation(),jJ=null,x}class yM{constructor(o,i,l,d,m){this.className=o,this.left=i,this.top=l,this.width=d,this.height=m}draw(){let o=document.createElement("div");return o.className=this.className,this.adjust(o),o}update(o,i){return i.className!=this.className?!1:(this.adjust(o),!0)}adjust(o){o.style.left=this.left+"px",o.style.top=this.top+"px",this.width!=null&&(o.style.width=this.width+"px"),o.style.height=this.height+"px"}eq(o){return this.left==o.left&&this.top==o.top&&this.width==o.width&&this.height==o.height&&this.className==o.className}static forRange(o,i,l){if(l.empty){let d=o.coordsAtPos(l.head,l.assoc||1);if(!d)return[];let m=Ere(o);return[new yM(i,d.left-m.left,d.top-m.top,null,d.bottom-d.top)]}else return ife(o,i,l)}}function Ere(u){let o=u.scrollDOM.getBoundingClientRect();return{left:(u.textDirection==Ni.LTR?o.left:o.right-u.scrollDOM.clientWidth*u.scaleX)-u.scrollDOM.scrollLeft*u.scaleX,top:o.top-u.scrollDOM.scrollTop*u.scaleY}}function Bne(u,o,i,l){let d=u.coordsAtPos(o,i*2);if(!d)return l;let m=u.dom.getBoundingClientRect(),p=(d.top+d.bottom)/2,v=u.posAtCoords({x:m.left+1,y:p}),x=u.posAtCoords({x:m.right-1,y:p});return v==null||x==null?l:{from:Math.max(l.from,Math.min(v,x)),to:Math.min(l.to,Math.max(v,x))}}function ife(u,o,i){if(i.to<=u.viewport.from||i.from>=u.viewport.to)return[];let l=Math.max(i.from,u.viewport.from),d=Math.min(i.to,u.viewport.to),m=u.textDirection==Ni.LTR,p=u.contentDOM,v=p.getBoundingClientRect(),x=Ere(u),k=p.querySelector(".cm-line"),T=k&&window.getComputedStyle(k),M=v.left+(T?parseInt(T.paddingLeft)+Math.min(0,parseInt(T.textIndent)):0),N=v.right-(T?parseInt(T.paddingRight):0),I=HJ(u,l),z=HJ(u,d),Y=I.type==Yc.Text?I:null,J=z.type==Yc.Text?z:null;if(Y&&(u.lineWrapping||I.widgetLineBreaks)&&(Y=Bne(u,l,1,Y)),J&&(u.lineWrapping||z.widgetLineBreaks)&&(J=Bne(u,d,-1,J)),Y&&J&&Y.from==J.from&&Y.to==J.to)return ae(Z(i.from,i.to,Y));{let _e=Y?Z(i.from,null,Y):ce(I,!1),De=J?Z(null,i.to,J):ce(z,!0),G=[];return(Y||I).to<(J||z).from-(Y&&J?1:0)||I.widgetLineBreaks>1&&_e.bottom+u.defaultLineHeight/2<De.top?G.push(q(M,_e.bottom,N,De.top)):_e.bottom<De.top&&u.elementAtHeight((_e.bottom+De.top)/2).type==Yc.Text&&(_e.bottom=De.top=(_e.bottom+De.top)/2),ae(_e).concat(G).concat(ae(De))}function q(_e,De,G,qe){return new yM(o,_e-x.left,De-x.top-.01,G-_e,qe-De+.01)}function ae({top:_e,bottom:De,horizontal:G}){let qe=[];for(let Re=0;Re<G.length;Re+=2)qe.push(q(G[Re],_e,G[Re+1],De));return qe}function Z(_e,De,G){let qe=1e9,Re=-1e9,$e=[];function le(ne,ge,O,Ye,me){let lt=u.coordsAtPos(ne,ne==G.to?-2:2),qt=u.coordsAtPos(O,O==G.from?2:-2);!lt||!qt||(qe=Math.min(lt.top,qt.top,qe),Re=Math.max(lt.bottom,qt.bottom,Re),me==Ni.LTR?$e.push(m&&ge?M:lt.left,m&&Ye?N:qt.right):$e.push(!m&&Ye?M:qt.left,!m&&ge?N:lt.right))}let Ee=_e!=null?_e:G.from,ft=De!=null?De:G.to;for(let ne of u.visibleRanges)if(ne.to>Ee&&ne.from<ft)for(let ge=Math.max(ne.from,Ee),O=Math.min(ne.to,ft);;){let Ye=u.state.doc.lineAt(ge);for(let me of u.bidiSpans(Ye)){let lt=me.from+Ye.from,qt=me.to+Ye.from;if(lt>=O)break;qt>ge&&le(Math.max(lt,ge),_e==null&&lt<=Ee,Math.min(qt,O),De==null&&qt>=ft,me.dir)}if(ge=Ye.to+1,ge>=O)break}return $e.length==0&&le(Ee,_e==null,ft,De==null,u.textDirection),{top:qe,bottom:Re,horizontal:$e}}function ce(_e,De){let G=v.top+(De?_e.top:_e.bottom);return{top:G,bottom:G,horizontal:[]}}}function afe(u,o){return u.constructor==o.constructor&&u.eq(o)}class lfe{constructor(o,i){this.view=o,this.layer=i,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=o.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),i.above&&this.dom.classList.add("cm-layer-above"),i.class&&this.dom.classList.add(i.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(o.state),o.requestMeasure(this.measureReq),i.mount&&i.mount(this.dom,o)}update(o){o.startState.facet(Q$)!=o.state.facet(Q$)&&this.setOrder(o.state),(this.layer.update(o,this.dom)||o.geometryChanged)&&(this.scale(),o.view.requestMeasure(this.measureReq))}docViewUpdate(o){this.layer.updateOnDocViewUpdate!==!1&&o.requestMeasure(this.measureReq)}setOrder(o){let i=0,l=o.facet(Q$);for(;i<l.length&&l[i]!=this.layer;)i++;this.dom.style.zIndex=String((this.layer.above?150:-1)-i)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:o,scaleY:i}=this.view;(o!=this.scaleX||i!=this.scaleY)&&(this.scaleX=o,this.scaleY=i,this.dom.style.transform=`scale(${1/o}, ${1/i})`)}draw(o){if(o.length!=this.drawn.length||o.some((i,l)=>!afe(i,this.drawn[l]))){let i=this.dom.firstChild,l=0;for(let d of o)d.update&&i&&d.constructor&&this.drawn[l].constructor&&d.update(i,this.drawn[l])?(i=i.nextSibling,l++):this.dom.insertBefore(d.draw(),i);for(;i;){let d=i.nextSibling;i.remove(),i=d}this.drawn=o}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Q$=Co.define();function Are(u){return[Ta.define(o=>new lfe(o,u)),Q$.of(u)]}const Tre=!To.ios,nM=Co.define({combine(u){return xm(u,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(o,i)=>Math.min(o,i),drawRangeCursor:(o,i)=>o||i})}});function cfe(u={}){return[nM.of(u),ufe,dfe,ffe,ere.of(!0)]}function Ore(u){return u.startState.facet(nM)!=u.state.facet(nM)}const ufe=Are({above:!0,markers(u){let{state:o}=u,i=o.facet(nM),l=[];for(let d of o.selection.ranges){let m=d==o.selection.main;if(d.empty?!m||Tre:i.drawRangeCursor){let p=m?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",v=d.empty?d:rn.cursor(d.head,d.head>d.anchor?-1:1);for(let x of yM.forRange(u,p,v))l.push(x)}}return l},update(u,o){u.transactions.some(l=>l.selection)&&(o.style.animationName=o.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let i=Ore(u);return i&&Fne(u.state,o),u.docChanged||u.selectionSet||i},mount(u,o){Fne(o.state,u)},class:"cm-cursorLayer"});function Fne(u,o){o.style.animationDuration=u.facet(nM).cursorBlinkRate+"ms"}const dfe=Are({above:!1,markers(u){return u.state.selection.ranges.map(o=>o.empty?[]:yM.forRange(u,"cm-selectionBackground",o)).reduce((o,i)=>o.concat(i))},update(u,o){return u.docChanged||u.selectionSet||u.viewportChanged||Ore(u)},class:"cm-selectionLayer"}),ZJ={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Tre&&(ZJ[".cm-line"].caretColor=ZJ[".cm-content"].caretColor="transparent !important");const ffe=Oy.highest(po.theme(ZJ)),_re=Fs.define({map(u,o){return u==null?null:o.mapPos(u)}}),VD=Zl.define({create(){return null},update(u,o){return u!=null&&(u=o.changes.mapPos(u)),o.effects.reduce((i,l)=>l.is(_re)?l.value:i,u)}}),hfe=Ta.fromClass(class{constructor(u){this.view=u,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(u){var o;let i=u.state.field(VD);i==null?this.cursor!=null&&((o=this.cursor)===null||o===void 0||o.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(u.startState.field(VD)!=i||u.docChanged||u.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:u}=this,o=u.state.field(VD),i=o!=null&&u.coordsAtPos(o);if(!i)return null;let l=u.scrollDOM.getBoundingClientRect();return{left:i.left-l.left+u.scrollDOM.scrollLeft*u.scaleX,top:i.top-l.top+u.scrollDOM.scrollTop*u.scaleY,height:i.bottom-i.top}}drawCursor(u){if(this.cursor){let{scaleX:o,scaleY:i}=this.view;u?(this.cursor.style.left=u.left/o+"px",this.cursor.style.top=u.top/i+"px",this.cursor.style.height=u.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(u){this.view.state.field(VD)!=u&&this.view.dispatch({effects:_re.of(u)})}},{eventObservers:{dragover(u){this.setDropPos(this.view.posAtCoords({x:u.clientX,y:u.clientY}))},dragleave(u){(u.target==this.view.contentDOM||!this.view.contentDOM.contains(u.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function mfe(){return[VD,hfe]}function Ine(u,o,i,l,d){o.lastIndex=0;for(let m=u.iterRange(i,l),p=i,v;!m.next().done;p+=m.value.length)if(!m.lineBreak)for(;v=o.exec(m.value);)d(p+v.index,v)}function gfe(u,o){let i=u.visibleRanges;if(i.length==1&&i[0].from==u.viewport.from&&i[0].to==u.viewport.to)return i;let l=[];for(let{from:d,to:m}of i)d=Math.max(u.state.doc.lineAt(d).from,d-o),m=Math.min(u.state.doc.lineAt(m).to,m+o),l.length&&l[l.length-1].to>=d?l[l.length-1].to=m:l.push({from:d,to:m});return l}class pfe{constructor(o){const{regexp:i,decoration:l,decorate:d,boundary:m,maxLength:p=1e3}=o;if(!i.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=i,d)this.addMatch=(v,x,k,T)=>d(T,k,k+v[0].length,v,x);else if(typeof l=="function")this.addMatch=(v,x,k,T)=>{let M=l(v,x,k);M&&T(k,k+v[0].length,M)};else if(l)this.addMatch=(v,x,k,T)=>T(k,k+v[0].length,l);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=m,this.maxLength=p}createDeco(o){let i=new l0,l=i.add.bind(i);for(let{from:d,to:m}of gfe(o,this.maxLength))Ine(o.state.doc,this.regexp,d,m,(p,v)=>this.addMatch(v,o,p,l));return i.finish()}updateDeco(o,i){let l=1e9,d=-1;return o.docChanged&&o.changes.iterChanges((m,p,v,x)=>{x>o.view.viewport.from&&v<o.view.viewport.to&&(l=Math.min(v,l),d=Math.max(x,d))}),o.viewportChanged||d-l>1e3?this.createDeco(o.view):d>-1?this.updateRange(o.view,i.map(o.changes),l,d):i}updateRange(o,i,l,d){for(let m of o.visibleRanges){let p=Math.max(m.from,l),v=Math.min(m.to,d);if(v>p){let x=o.state.doc.lineAt(p),k=x.to<v?o.state.doc.lineAt(v):x,T=Math.max(m.from,x.from),M=Math.min(m.to,k.to);if(this.boundary){for(;p>x.from;p--)if(this.boundary.test(x.text[p-1-x.from])){T=p;break}for(;v<k.to;v++)if(this.boundary.test(k.text[v-k.from])){M=v;break}}let N=[],I,z=(Y,J,q)=>N.push(q.range(Y,J));if(x==k)for(this.regexp.lastIndex=T-x.from;(I=this.regexp.exec(x.text))&&I.index<M-x.from;)this.addMatch(I,o,I.index+x.from,z);else Ine(o.state.doc,this.regexp,T,M,(Y,J)=>this.addMatch(J,o,Y,z));i=i.update({filterFrom:T,filterTo:M,filter:(Y,J)=>Y<T||J>M,add:N})}}return i}}const qJ=/x/.unicode!=null?"gu":"g",bfe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,qJ),vfe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let jX=null;function yfe(){var u;if(jX==null&&typeof document!="undefined"&&document.body){let o=document.body.style;jX=((u=o.tabSize)!==null&&u!==void 0?u:o.MozTabSize)!=null}return jX||!1}const e6=Co.define({combine(u){let o=xm(u,{render:null,specialChars:bfe,addSpecialChars:null});return(o.replaceTabs=!yfe())&&(o.specialChars=new RegExp("	|"+o.specialChars.source,qJ)),o.addSpecialChars&&(o.specialChars=new RegExp(o.specialChars.source+"|"+o.addSpecialChars.source,qJ)),o}});function wfe(u={}){return[e6.of(u),xfe()]}let Lne=null;function xfe(){return Lne||(Lne=Ta.fromClass(class{constructor(u){this.view=u,this.decorations=Zo.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(u.state.facet(e6)),this.decorations=this.decorator.createDeco(u)}makeDecorator(u){return new pfe({regexp:u.specialChars,decoration:(o,i,l)=>{let{doc:d}=i.state,m=Hl(o[0],0);if(m==9){let p=d.lineAt(l),v=i.state.tabSize,x=P2(p.text,v,l-p.from);return Zo.replace({widget:new Efe((v-x%v)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[m]||(this.decorationCache[m]=Zo.replace({widget:new kfe(u,m)}))},boundary:u.replaceTabs?void 0:/[^]/})}update(u){let o=u.state.facet(e6);u.startState.facet(e6)!=o?(this.decorator=this.makeDecorator(o),this.decorations=this.decorator.createDeco(u.view)):this.decorations=this.decorator.updateDeco(u,this.decorations)}},{decorations:u=>u.decorations}))}const Cfe="•";function Sfe(u){return u>=32?Cfe:u==10?"␤":String.fromCharCode(9216+u)}class kfe extends qg{constructor(o,i){super(),this.options=o,this.code=i}eq(o){return o.code==this.code}toDOM(o){let i=Sfe(this.code),l=o.state.phrase("Control character")+" "+(vfe[this.code]||"0x"+this.code.toString(16)),d=this.options.render&&this.options.render(this.code,l,i);if(d)return d;let m=document.createElement("span");return m.textContent=i,m.title=l,m.setAttribute("aria-label",l),m.className="cm-specialChar",m}ignoreEvent(){return!1}}class Efe extends qg{constructor(o){super(),this.width=o}eq(o){return o.width==this.width}toDOM(){let o=document.createElement("span");return o.textContent="	",o.className="cm-tab",o.style.width=this.width+"px",o}ignoreEvent(){return!1}}function Afe(){return Ofe}const Tfe=Zo.line({class:"cm-activeLine"}),Ofe=Ta.fromClass(class{constructor(u){this.decorations=this.getDeco(u)}update(u){(u.docChanged||u.selectionSet)&&(this.decorations=this.getDeco(u.view))}getDeco(u){let o=-1,i=[];for(let l of u.state.selection.ranges){let d=u.lineBlockAt(l.head);d.from>o&&(i.push(Tfe.range(d.from)),o=d.from)}return Zo.set(i)}},{decorations:u=>u.decorations});class _fe extends qg{constructor(o){super(),this.content=o}toDOM(){let o=document.createElement("span");return o.className="cm-placeholder",o.style.pointerEvents="none",o.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?o.setAttribute("aria-label","placeholder "+this.content):o.setAttribute("aria-hidden","true"),o}coordsAt(o){let i=o.firstChild?y2(o.firstChild):[];if(!i.length)return null;let l=window.getComputedStyle(o.parentNode),d=pM(i[0],l.direction!="rtl"),m=parseInt(l.lineHeight);return d.bottom-d.top>m*1.5?{left:d.left,right:d.right,top:d.top,bottom:d.top+m}:d}ignoreEvent(){return!1}}function Dfe(u){return Ta.fromClass(class{constructor(o){this.view=o,this.placeholder=u?Zo.set([Zo.widget({widget:new _fe(u),side:1}).range(0)]):Zo.none}get decorations(){return this.view.state.doc.length?Zo.none:this.placeholder}},{decorations:o=>o.decorations})}const GJ=2e3;function Mfe(u,o,i){let l=Math.min(o.line,i.line),d=Math.max(o.line,i.line),m=[];if(o.off>GJ||i.off>GJ||o.col<0||i.col<0){let p=Math.min(o.off,i.off),v=Math.max(o.off,i.off);for(let x=l;x<=d;x++){let k=u.doc.line(x);k.length<=v&&m.push(rn.range(k.from+p,k.to+v))}}else{let p=Math.min(o.col,i.col),v=Math.max(o.col,i.col);for(let x=l;x<=d;x++){let k=u.doc.line(x),T=kJ(k.text,p,u.tabSize,!0);if(T<0)m.push(rn.cursor(k.to));else{let M=kJ(k.text,v,u.tabSize);m.push(rn.range(k.from+T,k.from+M))}}}return m}function Pfe(u,o){let i=u.coordsAtPos(u.viewport.from);return i?Math.round(Math.abs((i.left-o)/u.defaultCharacterWidth)):-1}function $ne(u,o){let i=u.posAtCoords({x:o.clientX,y:o.clientY},!1),l=u.state.doc.lineAt(i),d=i-l.from,m=d>GJ?-1:d==l.length?Pfe(u,o.clientX):P2(l.text,u.state.tabSize,i-l.from);return{line:l.number,col:m,off:d}}function Rfe(u,o){let i=$ne(u,o),l=u.state.selection;return i?{update(d){if(d.docChanged){let m=d.changes.mapPos(d.startState.doc.line(i.line).from),p=d.state.doc.lineAt(m);i={line:p.number,col:i.col,off:Math.min(i.off,p.length)},l=l.map(d.changes)}},get(d,m,p){let v=$ne(u,d);if(!v)return l;let x=Mfe(u.state,i,v);return x.length?p?rn.create(x.concat(l.ranges)):rn.create(x):l}}:null}function Nfe(u){let o=i=>i.altKey&&i.button==0;return po.mouseSelectionStyle.of((i,l)=>o(l)?Rfe(i,l):null)}const Bfe={Alt:[18,u=>!!u.altKey],Control:[17,u=>!!u.ctrlKey],Shift:[16,u=>!!u.shiftKey],Meta:[91,u=>!!u.metaKey]},Ffe={style:"cursor: crosshair"};function Ife(u={}){let[o,i]=Bfe[u.key||"Alt"],l=Ta.fromClass(class{constructor(d){this.view=d,this.isDown=!1}set(d){this.isDown!=d&&(this.isDown=d,this.view.update([]))}},{eventObservers:{keydown(d){this.set(d.keyCode==o||i(d))},keyup(d){(d.keyCode==o||!i(d))&&this.set(!1)},mousemove(d){this.set(i(d))}}});return[l,po.contentAttributes.of(d=>{var m;return!((m=d.plugin(l))===null||m===void 0)&&m.isDown?Ffe:null})]}const RD="-10000px";class Dre{constructor(o,i,l,d){this.facet=i,this.createTooltipView=l,this.removeTooltipView=d,this.input=o.state.facet(i),this.tooltips=this.input.filter(p=>p);let m=null;this.tooltipViews=this.tooltips.map(p=>m=l(p,m))}update(o,i){var l;let d=o.state.facet(this.facet),m=d.filter(x=>x);if(d===this.input){for(let x of this.tooltipViews)x.update&&x.update(o);return!1}let p=[],v=i?[]:null;for(let x=0;x<m.length;x++){let k=m[x],T=-1;if(k){for(let M=0;M<this.tooltips.length;M++){let N=this.tooltips[M];N&&N.create==k.create&&(T=M)}if(T<0)p[x]=this.createTooltipView(k,x?p[x-1]:null),v&&(v[x]=!!k.above);else{let M=p[x]=this.tooltipViews[T];v&&(v[x]=i[T]),M.update&&M.update(o)}}}for(let x of this.tooltipViews)p.indexOf(x)<0&&(this.removeTooltipView(x),(l=x.destroy)===null||l===void 0||l.call(x));return i&&(v.forEach((x,k)=>i[k]=x),i.length=v.length),this.input=d,this.tooltips=m,this.tooltipViews=p,!0}}function Lfe(u){let{win:o}=u;return{top:0,left:0,bottom:o.innerHeight,right:o.innerWidth}}const ZX=Co.define({combine:u=>{var o,i,l;return{position:To.ios?"absolute":((o=u.find(d=>d.position))===null||o===void 0?void 0:o.position)||"fixed",parent:((i=u.find(d=>d.parent))===null||i===void 0?void 0:i.parent)||null,tooltipSpace:((l=u.find(d=>d.tooltipSpace))===null||l===void 0?void 0:l.tooltipSpace)||Lfe}}}),Hne=new WeakMap,OQ=Ta.fromClass(class{constructor(u){this.view=u,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let o=u.state.facet(ZX);this.position=o.position,this.parent=o.parent,this.classes=u.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Dre(u,_Q,(i,l)=>this.createTooltip(i,l),i=>{this.resizeObserver&&this.resizeObserver.unobserve(i.dom),i.dom.remove()}),this.above=this.manager.tooltips.map(i=>!!i.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),u.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let u of this.manager.tooltipViews)this.intersectionObserver.observe(u.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(u){u.transactions.length&&(this.lastTransaction=Date.now());let o=this.manager.update(u,this.above);o&&this.observeIntersection();let i=o||u.geometryChanged,l=u.state.facet(ZX);if(l.position!=this.position&&!this.madeAbsolute){this.position=l.position;for(let d of this.manager.tooltipViews)d.dom.style.position=this.position;i=!0}if(l.parent!=this.parent){this.parent&&this.container.remove(),this.parent=l.parent,this.createContainer();for(let d of this.manager.tooltipViews)this.container.appendChild(d.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(u,o){let i=u.create(this.view),l=o?o.dom:null;if(i.dom.classList.add("cm-tooltip"),u.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let d=document.createElement("div");d.className="cm-tooltip-arrow",i.dom.appendChild(d)}return i.dom.style.position=this.position,i.dom.style.top=RD,i.dom.style.left="0px",this.container.insertBefore(i.dom,l),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var u,o,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let l of this.manager.tooltipViews)l.dom.remove(),(u=l.destroy)===null||u===void 0||u.call(l);this.parent&&this.container.remove(),(o=this.resizeObserver)===null||o===void 0||o.disconnect(),(i=this.intersectionObserver)===null||i===void 0||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let u=this.view.dom.getBoundingClientRect(),o=1,i=1,l=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:d}=this.manager.tooltipViews[0];if(To.gecko)l=d.offsetParent!=this.container.ownerDocument.body;else if(d.style.top==RD&&d.style.left=="0px"){let m=d.getBoundingClientRect();l=Math.abs(m.top+1e4)>1||Math.abs(m.left)>1}}if(l||this.position=="absolute")if(this.parent){let d=this.parent.getBoundingClientRect();d.width&&d.height&&(o=d.width/this.parent.offsetWidth,i=d.height/this.parent.offsetHeight)}else({scaleX:o,scaleY:i}=this.view.viewState);return{editor:u,parent:this.parent?this.container.getBoundingClientRect():u,pos:this.manager.tooltips.map((d,m)=>{let p=this.manager.tooltipViews[m];return p.getCoords?p.getCoords(d.pos):this.view.coordsAtPos(d.pos)}),size:this.manager.tooltipViews.map(({dom:d})=>d.getBoundingClientRect()),space:this.view.state.facet(ZX).tooltipSpace(this.view),scaleX:o,scaleY:i,makeAbsolute:l}}writeMeasure(u){var o;if(u.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let v of this.manager.tooltipViews)v.dom.style.position="absolute"}let{editor:i,space:l,scaleX:d,scaleY:m}=u,p=[];for(let v=0;v<this.manager.tooltips.length;v++){let x=this.manager.tooltips[v],k=this.manager.tooltipViews[v],{dom:T}=k,M=u.pos[v],N=u.size[v];if(!M||M.bottom<=Math.max(i.top,l.top)||M.top>=Math.min(i.bottom,l.bottom)||M.right<Math.max(i.left,l.left)-.1||M.left>Math.min(i.right,l.right)+.1){T.style.top=RD;continue}let I=x.arrow?k.dom.querySelector(".cm-tooltip-arrow"):null,z=I?7:0,Y=N.right-N.left,J=(o=Hne.get(k))!==null&&o!==void 0?o:N.bottom-N.top,q=k.offset||Hfe,ae=this.view.textDirection==Ni.LTR,Z=N.width>l.right-l.left?ae?l.left:l.right-N.width:ae?Math.max(l.left,Math.min(M.left-(I?14:0)+q.x,l.right-Y)):Math.min(Math.max(l.left,M.left-Y+(I?14:0)-q.x),l.right-Y),ce=this.above[v];!x.strictSide&&(ce?M.top-(N.bottom-N.top)-q.y<l.top:M.bottom+(N.bottom-N.top)+q.y>l.bottom)&&ce==l.bottom-M.bottom>M.top-l.top&&(ce=this.above[v]=!ce);let _e=(ce?M.top-l.top:l.bottom-M.bottom)-z;if(_e<J&&k.resize!==!1){if(_e<this.view.defaultLineHeight){T.style.top=RD;continue}Hne.set(k,J),T.style.height=(J=_e)/m+"px"}else T.style.height&&(T.style.height="");let De=ce?M.top-J-z-q.y:M.bottom+z+q.y,G=Z+Y;if(k.overlap!==!0)for(let qe of p)qe.left<G&&qe.right>Z&&qe.top<De+J&&qe.bottom>De&&(De=ce?qe.top-J-2-z:qe.bottom+z+2);if(this.position=="absolute"?(T.style.top=(De-u.parent.top)/m+"px",T.style.left=(Z-u.parent.left)/d+"px"):(T.style.top=De/m+"px",T.style.left=Z/d+"px"),I){let qe=M.left+(ae?q.x:-q.x)-(Z+14-7);I.style.left=qe/d+"px"}k.overlap!==!0&&p.push({left:Z,top:De,right:G,bottom:De+J}),T.classList.toggle("cm-tooltip-above",ce),T.classList.toggle("cm-tooltip-below",!ce),k.positioned&&k.positioned(u.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let u of this.manager.tooltipViews)u.dom.style.top=RD}},{eventObservers:{scroll(){this.maybeMeasure()}}}),$fe=po.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Hfe={x:0,y:0},_Q=Co.define({enables:[OQ,$fe]}),b6=Co.define({combine:u=>u.reduce((o,i)=>o.concat(i),[])});class z6{static create(o){return new z6(o)}constructor(o){this.view=o,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Dre(o,b6,(i,l)=>this.createHostedView(i,l),i=>i.dom.remove())}createHostedView(o,i){let l=o.create(this.view);return l.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(l.dom,i?i.dom.nextSibling:this.dom.firstChild),this.mounted&&l.mount&&l.mount(this.view),l}mount(o){for(let i of this.manager.tooltipViews)i.mount&&i.mount(o);this.mounted=!0}positioned(o){for(let i of this.manager.tooltipViews)i.positioned&&i.positioned(o)}update(o){this.manager.update(o)}destroy(){var o;for(let i of this.manager.tooltipViews)(o=i.destroy)===null||o===void 0||o.call(i)}passProp(o){let i;for(let l of this.manager.tooltipViews){let d=l[o];if(d!==void 0){if(i===void 0)i=d;else if(i!==d)return}}return i}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Vfe=_Q.compute([b6],u=>{let o=u.facet(b6);return o.length===0?null:{pos:Math.min(...o.map(i=>i.pos)),end:Math.max(...o.map(i=>{var l;return(l=i.end)!==null&&l!==void 0?l:i.pos})),create:z6.create,above:o[0].above,arrow:o.some(i=>i.arrow)}});class zfe{constructor(o,i,l,d,m){this.view=o,this.source=i,this.field=l,this.setHover=d,this.hoverTime=m,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:o.dom,time:0},this.checkHover=this.checkHover.bind(this),o.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),o.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let o=Date.now()-this.lastMove.time;o<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-o):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:o,lastMove:i}=this,l=o.docView.nearest(i.target);if(!l)return;let d,m=1;if(l instanceof e0)d=l.posAtStart;else{if(d=o.posAtCoords(i),d==null)return;let v=o.coordsAtPos(d);if(!v||i.y<v.top||i.y>v.bottom||i.x<v.left-o.defaultCharacterWidth||i.x>v.right+o.defaultCharacterWidth)return;let x=o.bidiSpans(o.state.doc.lineAt(d)).find(T=>T.from<=d&&T.to>=d),k=x&&x.dir==Ni.RTL?-1:1;m=i.x<v.left?-k:k}let p=this.source(o,d,m);if(p!=null&&p.then){let v=this.pending={pos:d};p.then(x=>{this.pending==v&&(this.pending=null,x&&!(Array.isArray(x)&&!x.length)&&o.dispatch({effects:this.setHover.of(Array.isArray(x)?x:[x])}))},x=>_u(o.state,x,"hover tooltip"))}else p&&!(Array.isArray(p)&&!p.length)&&o.dispatch({effects:this.setHover.of(Array.isArray(p)?p:[p])})}get tooltip(){let o=this.view.plugin(OQ),i=o?o.manager.tooltips.findIndex(l=>l.create==z6.create):-1;return i>-1?o.manager.tooltipViews[i]:null}mousemove(o){var i,l;this.lastMove={x:o.clientX,y:o.clientY,target:o.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:d,tooltip:m}=this;if(d.length&&m&&!Ufe(m.dom,o)||this.pending){let{pos:p}=d[0]||this.pending,v=(l=(i=d[0])===null||i===void 0?void 0:i.end)!==null&&l!==void 0?l:p;(p==v?this.view.posAtCoords(this.lastMove)!=p:!Wfe(this.view,p,v,o.clientX,o.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(o){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:i}=this;if(i.length){let{tooltip:l}=this;l&&l.dom.contains(o.relatedTarget)?this.watchTooltipLeave(l.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(o){let i=l=>{o.removeEventListener("mouseleave",i),this.active.length&&!this.view.dom.contains(l.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};o.addEventListener("mouseleave",i)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const R$=4;function Ufe(u,o){let{left:i,right:l,top:d,bottom:m}=u.getBoundingClientRect(),p;if(p=u.querySelector(".cm-tooltip-arrow")){let v=p.getBoundingClientRect();d=Math.min(v.top,d),m=Math.max(v.bottom,m)}return o.clientX>=i-R$&&o.clientX<=l+R$&&o.clientY>=d-R$&&o.clientY<=m+R$}function Wfe(u,o,i,l,d,m){let p=u.scrollDOM.getBoundingClientRect(),v=u.documentTop+u.documentPadding.top+u.contentHeight;if(p.left>l||p.right<l||p.top>d||Math.min(p.bottom,v)<d)return!1;let x=u.posAtCoords({x:l,y:d},!1);return x>=o&&x<=i}function jfe(u,o={}){let i=Fs.define(),l=Zl.define({create(){return[]},update(d,m){if(d.length&&(o.hideOnChange&&(m.docChanged||m.selection)?d=[]:o.hideOn&&(d=d.filter(p=>!o.hideOn(m,p))),m.docChanged)){let p=[];for(let v of d){let x=m.changes.mapPos(v.pos,-1,qc.TrackDel);if(x!=null){let k=Object.assign(Object.create(null),v);k.pos=x,k.end!=null&&(k.end=m.changes.mapPos(k.end)),p.push(k)}}d=p}for(let p of m.effects)p.is(i)&&(d=p.value),p.is(Zfe)&&(d=[]);return d},provide:d=>b6.from(d)});return{active:l,extension:[l,Ta.define(d=>new zfe(d,u,l,i,o.hoverTime||300)),Vfe]}}function Mre(u,o){let i=u.plugin(OQ);if(!i)return null;let l=i.manager.tooltips.indexOf(o);return l<0?null:i.manager.tooltipViews[l]}const Zfe=Fs.define(),Vne=Co.define({combine(u){let o,i;for(let l of u)o=o||l.topContainer,i=i||l.bottomContainer;return{topContainer:o,bottomContainer:i}}});function oM(u,o){let i=u.plugin(Pre),l=i?i.specs.indexOf(o):-1;return l>-1?i.panels[l]:null}const Pre=Ta.fromClass(class{constructor(u){this.input=u.state.facet(sM),this.specs=this.input.filter(i=>i),this.panels=this.specs.map(i=>i(u));let o=u.state.facet(Vne);this.top=new N$(u,!0,o.topContainer),this.bottom=new N$(u,!1,o.bottomContainer),this.top.sync(this.panels.filter(i=>i.top)),this.bottom.sync(this.panels.filter(i=>!i.top));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(u){let o=u.state.facet(Vne);this.top.container!=o.topContainer&&(this.top.sync([]),this.top=new N$(u.view,!0,o.topContainer)),this.bottom.container!=o.bottomContainer&&(this.bottom.sync([]),this.bottom=new N$(u.view,!1,o.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=u.state.facet(sM);if(i!=this.input){let l=i.filter(x=>x),d=[],m=[],p=[],v=[];for(let x of l){let k=this.specs.indexOf(x),T;k<0?(T=x(u.view),v.push(T)):(T=this.panels[k],T.update&&T.update(u)),d.push(T),(T.top?m:p).push(T)}this.specs=l,this.panels=d,this.top.sync(m),this.bottom.sync(p);for(let x of v)x.dom.classList.add("cm-panel"),x.mount&&x.mount()}else for(let l of this.panels)l.update&&l.update(u)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:u=>po.scrollMargins.of(o=>{let i=o.plugin(u);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}})});class N${constructor(o,i,l){this.view=o,this.top=i,this.container=l,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(o){for(let i of this.panels)i.destroy&&o.indexOf(i)<0&&i.destroy();this.panels=o,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let i=this.container||this.view.dom;i.insertBefore(this.dom,this.top?i.firstChild:null)}let o=this.dom.firstChild;for(let i of this.panels)if(i.dom.parentNode==this.dom){for(;o!=i.dom;)o=zne(o);o=o.nextSibling}else this.dom.insertBefore(i.dom,o);for(;o;)o=zne(o)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let o of this.classes.split(" "))o&&this.container.classList.remove(o);for(let o of(this.classes=this.view.themeClasses).split(" "))o&&this.container.classList.add(o)}}}function zne(u){let o=u.nextSibling;return u.remove(),o}const sM=Co.define({enables:Pre});class jg extends xy{compare(o){return this==o||this.constructor==o.constructor&&this.eq(o)}eq(o){return!1}destroy(o){}}jg.prototype.elementClass="";jg.prototype.toDOM=void 0;jg.prototype.mapMode=qc.TrackBefore;jg.prototype.startSide=jg.prototype.endSide=-1;jg.prototype.point=!0;const t6=Co.define(),qfe=Co.define(),Gfe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>yr.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},qD=Co.define();function Kfe(u){return[Rre(),qD.of(Object.assign(Object.assign({},Gfe),u))]}const Une=Co.define({combine:u=>u.some(o=>o)});function Rre(u){return[Yfe]}const Yfe=Ta.fromClass(class{constructor(u){this.view=u,this.prevViewport=u.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=u.state.facet(qD).map(o=>new jne(u,o));for(let o of this.gutters)this.dom.appendChild(o.dom);this.fixed=!u.state.facet(Une),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),u.scrollDOM.insertBefore(this.dom,u.contentDOM)}update(u){if(this.updateGutters(u)){let o=this.prevViewport,i=u.view.viewport,l=Math.min(o.to,i.to)-Math.max(o.from,i.from);this.syncGutters(l<(i.to-i.from)*.8)}u.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Une)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=u.view.viewport}syncGutters(u){let o=this.dom.nextSibling;u&&this.dom.remove();let i=yr.iter(this.view.state.facet(t6),this.view.viewport.from),l=[],d=this.gutters.map(m=>new Xfe(m,this.view.viewport,-this.view.documentPadding.top));for(let m of this.view.viewportLineBlocks)if(l.length&&(l=[]),Array.isArray(m.type)){let p=!0;for(let v of m.type)if(v.type==Yc.Text&&p){KJ(i,l,v.from);for(let x of d)x.line(this.view,v,l);p=!1}else if(v.widget)for(let x of d)x.widget(this.view,v)}else if(m.type==Yc.Text){KJ(i,l,m.from);for(let p of d)p.line(this.view,m,l)}else if(m.widget)for(let p of d)p.widget(this.view,m);for(let m of d)m.finish();u&&this.view.scrollDOM.insertBefore(this.dom,o)}updateGutters(u){let o=u.startState.facet(qD),i=u.state.facet(qD),l=u.docChanged||u.heightChanged||u.viewportChanged||!yr.eq(u.startState.facet(t6),u.state.facet(t6),u.view.viewport.from,u.view.viewport.to);if(o==i)for(let d of this.gutters)d.update(u)&&(l=!0);else{l=!0;let d=[];for(let m of i){let p=o.indexOf(m);p<0?d.push(new jne(this.view,m)):(this.gutters[p].update(u),d.push(this.gutters[p]))}for(let m of this.gutters)m.dom.remove(),d.indexOf(m)<0&&m.destroy();for(let m of d)this.dom.appendChild(m.dom);this.gutters=d}return l}destroy(){for(let u of this.gutters)u.destroy();this.dom.remove()}},{provide:u=>po.scrollMargins.of(o=>{let i=o.plugin(u);return!i||i.gutters.length==0||!i.fixed?null:o.textDirection==Ni.LTR?{left:i.dom.offsetWidth*o.scaleX}:{right:i.dom.offsetWidth*o.scaleX}})});function Wne(u){return Array.isArray(u)?u:[u]}function KJ(u,o,i){for(;u.value&&u.from<=i;)u.from==i&&o.push(u.value),u.next()}class Xfe{constructor(o,i,l){this.gutter=o,this.height=l,this.i=0,this.cursor=yr.iter(o.markers,i.from)}addElement(o,i,l){let{gutter:d}=this,m=(i.top-this.height)/o.scaleY,p=i.height/o.scaleY;if(this.i==d.elements.length){let v=new Nre(o,p,m,l);d.elements.push(v),d.dom.appendChild(v.dom)}else d.elements[this.i].update(o,p,m,l);this.height=i.bottom,this.i++}line(o,i,l){let d=[];KJ(this.cursor,d,i.from),l.length&&(d=d.concat(l));let m=this.gutter.config.lineMarker(o,i,d);m&&d.unshift(m);let p=this.gutter;d.length==0&&!p.config.renderEmptyElements||this.addElement(o,i,d)}widget(o,i){let l=this.gutter.config.widgetMarker(o,i.widget,i),d=l?[l]:null;for(let m of o.state.facet(qfe)){let p=m(o,i.widget,i);p&&(d||(d=[])).push(p)}d&&this.addElement(o,i,d)}finish(){let o=this.gutter;for(;o.elements.length>this.i;){let i=o.elements.pop();o.dom.removeChild(i.dom),i.destroy()}}}class jne{constructor(o,i){this.view=o,this.config=i,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let l in i.domEventHandlers)this.dom.addEventListener(l,d=>{let m=d.target,p;if(m!=this.dom&&this.dom.contains(m)){for(;m.parentNode!=this.dom;)m=m.parentNode;let x=m.getBoundingClientRect();p=(x.top+x.bottom)/2}else p=d.clientY;let v=o.lineBlockAtHeight(p-o.documentTop);i.domEventHandlers[l](o,v,d)&&d.preventDefault()});this.markers=Wne(i.markers(o)),i.initialSpacer&&(this.spacer=new Nre(o,0,0,[i.initialSpacer(o)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(o){let i=this.markers;if(this.markers=Wne(this.config.markers(o.view)),this.spacer&&this.config.updateSpacer){let d=this.config.updateSpacer(this.spacer.markers[0],o);d!=this.spacer.markers[0]&&this.spacer.update(o.view,0,0,[d])}let l=o.view.viewport;return!yr.eq(this.markers,i,l.from,l.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(o):!1)}destroy(){for(let o of this.elements)o.destroy()}}class Nre{constructor(o,i,l,d){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(o,i,l,d)}update(o,i,l,d){this.height!=i&&(this.height=i,this.dom.style.height=i+"px"),this.above!=l&&(this.dom.style.marginTop=(this.above=l)?l+"px":""),Jfe(this.markers,d)||this.setMarkers(o,d)}setMarkers(o,i){let l="cm-gutterElement",d=this.dom.firstChild;for(let m=0,p=0;;){let v=p,x=m<i.length?i[m++]:null,k=!1;if(x){let T=x.elementClass;T&&(l+=" "+T);for(let M=p;M<this.markers.length;M++)if(this.markers[M].compare(x)){v=M,k=!0;break}}else v=this.markers.length;for(;p<v;){let T=this.markers[p++];if(T.toDOM){T.destroy(d);let M=d.nextSibling;d.remove(),d=M}}if(!x)break;x.toDOM&&(k?d=d.nextSibling:this.dom.insertBefore(x.toDOM(o),d)),k&&p++}this.dom.className=l,this.markers=i}destroy(){this.setMarkers(null,[])}}function Jfe(u,o){if(u.length!=o.length)return!1;for(let i=0;i<u.length;i++)if(!u[i].compare(o[i]))return!1;return!0}const Qfe=Co.define(),ehe=Co.define(),c2=Co.define({combine(u){return xm(u,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(o,i){let l=Object.assign({},o);for(let d in i){let m=l[d],p=i[d];l[d]=m?(v,x,k)=>m(v,x,k)||p(v,x,k):p}return l}})}});class qX extends jg{constructor(o){super(),this.number=o}eq(o){return this.number==o.number}toDOM(){return document.createTextNode(this.number)}}function GX(u,o){return u.state.facet(c2).formatNumber(o,u.state)}const the=qD.compute([c2],u=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(o){return o.state.facet(Qfe)},lineMarker(o,i,l){return l.some(d=>d.toDOM)?null:new qX(GX(o,o.state.doc.lineAt(i.from).number))},widgetMarker:(o,i,l)=>{for(let d of o.state.facet(ehe)){let m=d(o,i,l);if(m)return m}return null},lineMarkerChange:o=>o.startState.facet(c2)!=o.state.facet(c2),initialSpacer(o){return new qX(GX(o,Zne(o.state.doc.lines)))},updateSpacer(o,i){let l=GX(i.view,Zne(i.view.state.doc.lines));return l==o.number?o:new qX(l)},domEventHandlers:u.facet(c2).domEventHandlers}));function nhe(u={}){return[c2.of(u),Rre(),the]}function Zne(u){let o=9;for(;o<u;)o=o*10+9;return o}const ohe=new class extends jg{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},she=t6.compute(["selection"],u=>{let o=[],i=-1;for(let l of u.selection.ranges){let d=u.doc.lineAt(l.head).from;d>i&&(i=d,o.push(ohe.range(d)))}return yr.of(o)});function rhe(){return she}const Bre=1024;let ihe=0,KX=class{constructor(o,i){this.from=o,this.to=i}};class Gs{constructor(o={}){this.id=ihe++,this.perNode=!!o.perNode,this.deserialize=o.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(o){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof o!="function"&&(o=Jc.match(o)),i=>{let l=o(i);return l===void 0?null:[this,l]}}}Gs.closedBy=new Gs({deserialize:u=>u.split(" ")});Gs.openedBy=new Gs({deserialize:u=>u.split(" ")});Gs.group=new Gs({deserialize:u=>u.split(" ")});Gs.isolate=new Gs({deserialize:u=>{if(u&&u!="rtl"&&u!="ltr"&&u!="auto")throw new RangeError("Invalid value for isolate: "+u);return u||"auto"}});Gs.contextHash=new Gs({perNode:!0});Gs.lookAhead=new Gs({perNode:!0});Gs.mounted=new Gs({perNode:!0});class v6{constructor(o,i,l){this.tree=o,this.overlay=i,this.parser=l}static get(o){return o&&o.props&&o.props[Gs.mounted.id]}}const ahe=Object.create(null);class Jc{constructor(o,i,l,d=0){this.name=o,this.props=i,this.id=l,this.flags=d}static define(o){let i=o.props&&o.props.length?Object.create(null):ahe,l=(o.top?1:0)|(o.skipped?2:0)|(o.error?4:0)|(o.name==null?8:0),d=new Jc(o.name||"",i,o.id,l);if(o.props){for(let m of o.props)if(Array.isArray(m)||(m=m(d)),m){if(m[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");i[m[0].id]=m[1]}}return d}prop(o){return this.props[o.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(o){if(typeof o=="string"){if(this.name==o)return!0;let i=this.prop(Gs.group);return i?i.indexOf(o)>-1:!1}return this.id==o}static match(o){let i=Object.create(null);for(let l in o)for(let d of l.split(" "))i[d]=o[l];return l=>{for(let d=l.prop(Gs.group),m=-1;m<(d?d.length:0);m++){let p=i[m<0?l.name:d[m]];if(p)return p}}}}Jc.none=new Jc("",Object.create(null),0,8);class U6{constructor(o){this.types=o;for(let i=0;i<o.length;i++)if(o[i].id!=i)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...o){let i=[];for(let l of this.types){let d=null;for(let m of o){let p=m(l);p&&(d||(d=Object.assign({},l.props)),d[p[0].id]=p[1])}i.push(d?new Jc(l.name,d,l.id,l.flags):l)}return new U6(i)}}const B$=new WeakMap,qne=new WeakMap;var kl;(function(u){u[u.ExcludeBuffers=1]="ExcludeBuffers",u[u.IncludeAnonymous=2]="IncludeAnonymous",u[u.IgnoreMounts=4]="IgnoreMounts",u[u.IgnoreOverlays=8]="IgnoreOverlays"})(kl||(kl={}));class ci{constructor(o,i,l,d,m){if(this.type=o,this.children=i,this.positions=l,this.length=d,this.props=null,m&&m.length){this.props=Object.create(null);for(let[p,v]of m)this.props[typeof p=="number"?p:p.id]=v}}toString(){let o=v6.get(this);if(o&&!o.overlay)return o.tree.toString();let i="";for(let l of this.children){let d=l.toString();d&&(i&&(i+=","),i+=d)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(i.length?"("+i+")":""):i}cursor(o=0){return new XJ(this.topNode,o)}cursorAt(o,i=0,l=0){let d=B$.get(this)||this.topNode,m=new XJ(d);return m.moveTo(o,i),B$.set(this,m._tree),m}get topNode(){return new vf(this,0,0,null)}resolve(o,i=0){let l=rM(B$.get(this)||this.topNode,o,i,!1);return B$.set(this,l),l}resolveInner(o,i=0){let l=rM(qne.get(this)||this.topNode,o,i,!0);return qne.set(this,l),l}resolveStack(o,i=0){return uhe(this,o,i)}iterate(o){let{enter:i,leave:l,from:d=0,to:m=this.length}=o,p=o.mode||0,v=(p&kl.IncludeAnonymous)>0;for(let x=this.cursor(p|kl.IncludeAnonymous);;){let k=!1;if(x.from<=m&&x.to>=d&&(!v&&x.type.isAnonymous||i(x)!==!1)){if(x.firstChild())continue;k=!0}for(;k&&l&&(v||!x.type.isAnonymous)&&l(x),!x.nextSibling();){if(!x.parent())return;k=!0}}}prop(o){return o.perNode?this.props?this.props[o.id]:void 0:this.type.prop(o)}get propValues(){let o=[];if(this.props)for(let i in this.props)o.push([+i,this.props[i]]);return o}balance(o={}){return this.children.length<=8?this:PQ(Jc.none,this.children,this.positions,0,this.children.length,0,this.length,(i,l,d)=>new ci(this.type,i,l,d,this.propValues),o.makeTree||((i,l,d)=>new ci(Jc.none,i,l,d)))}static build(o){return dhe(o)}}ci.empty=new ci(Jc.none,[],[],0);class DQ{constructor(o,i){this.buffer=o,this.index=i}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new DQ(this.buffer,this.index)}}class f0{constructor(o,i,l){this.buffer=o,this.length=i,this.set=l}get type(){return Jc.none}toString(){let o=[];for(let i=0;i<this.buffer.length;)o.push(this.childString(i)),i=this.buffer[i+3];return o.join(",")}childString(o){let i=this.buffer[o],l=this.buffer[o+3],d=this.set.types[i],m=d.name;if(/\W/.test(m)&&!d.isError&&(m=JSON.stringify(m)),o+=4,l==o)return m;let p=[];for(;o<l;)p.push(this.childString(o)),o=this.buffer[o+3];return m+"("+p.join(",")+")"}findChild(o,i,l,d,m){let{buffer:p}=this,v=-1;for(let x=o;x!=i&&!(Fre(m,d,p[x+1],p[x+2])&&(v=x,l>0));x=p[x+3]);return v}slice(o,i,l){let d=this.buffer,m=new Uint16Array(i-o),p=0;for(let v=o,x=0;v<i;){m[x++]=d[v++],m[x++]=d[v++]-l;let k=m[x++]=d[v++]-l;m[x++]=d[v++]-o,p=Math.max(p,k)}return new f0(m,p,this.set)}}function Fre(u,o,i,l){switch(u){case-2:return i<o;case-1:return l>=o&&i<o;case 0:return i<o&&l>o;case 1:return i<=o&&l>o;case 2:return l>o;case 4:return!0}}function rM(u,o,i,l){for(var d;u.from==u.to||(i<1?u.from>=o:u.from>o)||(i>-1?u.to<=o:u.to<o);){let p=!l&&u instanceof vf&&u.index<0?null:u.parent;if(!p)return u;u=p}let m=l?0:kl.IgnoreOverlays;if(l)for(let p=u,v=p.parent;v;p=v,v=p.parent)p instanceof vf&&p.index<0&&((d=v.enter(o,i,m))===null||d===void 0?void 0:d.from)!=p.from&&(u=v);for(;;){let p=u.enter(o,i,m);if(!p)return u;u=p}}class Ire{cursor(o=0){return new XJ(this,o)}getChild(o,i=null,l=null){let d=Gne(this,o,i,l);return d.length?d[0]:null}getChildren(o,i=null,l=null){return Gne(this,o,i,l)}resolve(o,i=0){return rM(this,o,i,!1)}resolveInner(o,i=0){return rM(this,o,i,!0)}matchContext(o){return YJ(this,o)}enterUnfinishedNodesBefore(o){let i=this.childBefore(o),l=this;for(;i;){let d=i.lastChild;if(!d||d.to!=i.to)break;d.type.isError&&d.from==d.to?(l=i,i=d.prevSibling):i=d}return l}get node(){return this}get next(){return this.parent}}class vf extends Ire{constructor(o,i,l,d){super(),this._tree=o,this.from=i,this.index=l,this._parent=d}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(o,i,l,d,m=0){for(let p=this;;){for(let{children:v,positions:x}=p._tree,k=i>0?v.length:-1;o!=k;o+=i){let T=v[o],M=x[o]+p.from;if(Fre(d,l,M,M+T.length)){if(T instanceof f0){if(m&kl.ExcludeBuffers)continue;let N=T.findChild(0,T.buffer.length,i,l-M,d);if(N>-1)return new n0(new lhe(p,T,o,M),null,N)}else if(m&kl.IncludeAnonymous||!T.type.isAnonymous||MQ(T)){let N;if(!(m&kl.IgnoreMounts)&&(N=v6.get(T))&&!N.overlay)return new vf(N.tree,M,o,p);let I=new vf(T,M,o,p);return m&kl.IncludeAnonymous||!I.type.isAnonymous?I:I.nextChild(i<0?T.children.length-1:0,i,l,d)}}}if(m&kl.IncludeAnonymous||!p.type.isAnonymous||(p.index>=0?o=p.index+i:o=i<0?-1:p._parent._tree.children.length,p=p._parent,!p))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(o){return this.nextChild(0,1,o,2)}childBefore(o){return this.nextChild(this._tree.children.length-1,-1,o,-2)}enter(o,i,l=0){let d;if(!(l&kl.IgnoreOverlays)&&(d=v6.get(this._tree))&&d.overlay){let m=o-this.from;for(let{from:p,to:v}of d.overlay)if((i>0?p<=m:p<m)&&(i<0?v>=m:v>m))return new vf(d.tree,d.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,o,i,l)}nextSignificantParent(){let o=this;for(;o.type.isAnonymous&&o._parent;)o=o._parent;return o}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Gne(u,o,i,l){let d=u.cursor(),m=[];if(!d.firstChild())return m;if(i!=null){for(let p=!1;!p;)if(p=d.type.is(i),!d.nextSibling())return m}for(;;){if(l!=null&&d.type.is(l))return m;if(d.type.is(o)&&m.push(d.node),!d.nextSibling())return l==null?m:[]}}function YJ(u,o,i=o.length-1){for(let l=u.parent;i>=0;l=l.parent){if(!l)return!1;if(!l.type.isAnonymous){if(o[i]&&o[i]!=l.name)return!1;i--}}return!0}class lhe{constructor(o,i,l,d){this.parent=o,this.buffer=i,this.index=l,this.start=d}}class n0 extends Ire{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(o,i,l){super(),this.context=o,this._parent=i,this.index=l,this.type=o.buffer.set.types[o.buffer.buffer[l]]}child(o,i,l){let{buffer:d}=this.context,m=d.findChild(this.index+4,d.buffer[this.index+3],o,i-this.context.start,l);return m<0?null:new n0(this.context,this,m)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(o){return this.child(1,o,2)}childBefore(o){return this.child(-1,o,-2)}enter(o,i,l=0){if(l&kl.ExcludeBuffers)return null;let{buffer:d}=this.context,m=d.findChild(this.index+4,d.buffer[this.index+3],i>0?1:-1,o-this.context.start,i);return m<0?null:new n0(this.context,this,m)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(o){return this._parent?null:this.context.parent.nextChild(this.context.index+o,o,0,4)}get nextSibling(){let{buffer:o}=this.context,i=o.buffer[this.index+3];return i<(this._parent?o.buffer[this._parent.index+3]:o.buffer.length)?new n0(this.context,this._parent,i):this.externalSibling(1)}get prevSibling(){let{buffer:o}=this.context,i=this._parent?this._parent.index+4:0;return this.index==i?this.externalSibling(-1):new n0(this.context,this._parent,o.findChild(i,this.index,-1,0,4))}get tree(){return null}toTree(){let o=[],i=[],{buffer:l}=this.context,d=this.index+4,m=l.buffer[this.index+3];if(m>d){let p=l.buffer[this.index+1];o.push(l.slice(d,m,p)),i.push(0)}return new ci(this.type,o,i,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Lre(u){if(!u.length)return null;let o=0,i=u[0];for(let m=1;m<u.length;m++){let p=u[m];(p.from>i.from||p.to<i.to)&&(i=p,o=m)}let l=i instanceof vf&&i.index<0?null:i.parent,d=u.slice();return l?d[o]=l:d.splice(o,1),new che(d,i)}class che{constructor(o,i){this.heads=o,this.node=i}get next(){return Lre(this.heads)}}function uhe(u,o,i){let l=u.resolveInner(o,i),d=null;for(let m=l instanceof vf?l:l.context.parent;m;m=m.parent)if(m.index<0){let p=m.parent;(d||(d=[l])).push(p.resolve(o,i)),m=p}else{let p=v6.get(m.tree);if(p&&p.overlay&&p.overlay[0].from<=o&&p.overlay[p.overlay.length-1].to>=o){let v=new vf(p.tree,p.overlay[0].from+m.from,-1,m);(d||(d=[l])).push(rM(v,o,i,!1))}}return d?Lre(d):l}class XJ{get name(){return this.type.name}constructor(o,i=0){if(this.mode=i,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,o instanceof vf)this.yieldNode(o);else{this._tree=o.context.parent,this.buffer=o.context;for(let l=o._parent;l;l=l._parent)this.stack.unshift(l.index);this.bufferNode=o,this.yieldBuf(o.index)}}yieldNode(o){return o?(this._tree=o,this.type=o.type,this.from=o.from,this.to=o.to,!0):!1}yieldBuf(o,i){this.index=o;let{start:l,buffer:d}=this.buffer;return this.type=i||d.set.types[d.buffer[o]],this.from=l+d.buffer[o+1],this.to=l+d.buffer[o+2],!0}yield(o){return o?o instanceof vf?(this.buffer=null,this.yieldNode(o)):(this.buffer=o.context,this.yieldBuf(o.index,o.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(o,i,l){if(!this.buffer)return this.yield(this._tree.nextChild(o<0?this._tree._tree.children.length-1:0,o,i,l,this.mode));let{buffer:d}=this.buffer,m=d.findChild(this.index+4,d.buffer[this.index+3],o,i-this.buffer.start,l);return m<0?!1:(this.stack.push(this.index),this.yieldBuf(m))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(o){return this.enterChild(1,o,2)}childBefore(o){return this.enterChild(-1,o,-2)}enter(o,i,l=this.mode){return this.buffer?l&kl.ExcludeBuffers?!1:this.enterChild(1,o,i):this.yield(this._tree.enter(o,i,l))}parent(){if(!this.buffer)return this.yieldNode(this.mode&kl.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let o=this.mode&kl.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(o)}sibling(o){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+o,o,0,4,this.mode)):!1;let{buffer:i}=this.buffer,l=this.stack.length-1;if(o<0){let d=l<0?0:this.stack[l]+4;if(this.index!=d)return this.yieldBuf(i.findChild(d,this.index,-1,0,4))}else{let d=i.buffer[this.index+3];if(d<(l<0?i.buffer.length:i.buffer[this.stack[l]+3]))return this.yieldBuf(d)}return l<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+o,o,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(o){let i,l,{buffer:d}=this;if(d){if(o>0){if(this.index<d.buffer.buffer.length)return!1}else for(let m=0;m<this.index;m++)if(d.buffer.buffer[m+3]<this.index)return!1;({index:i,parent:l}=d)}else({index:i,_parent:l}=this._tree);for(;l;{index:i,_parent:l}=l)if(i>-1)for(let m=i+o,p=o<0?-1:l._tree.children.length;m!=p;m+=o){let v=l._tree.children[m];if(this.mode&kl.IncludeAnonymous||v instanceof f0||!v.type.isAnonymous||MQ(v))return!1}return!0}move(o,i){if(i&&this.enterChild(o,0,4))return!0;for(;;){if(this.sibling(o))return!0;if(this.atLastNode(o)||!this.parent())return!1}}next(o=!0){return this.move(1,o)}prev(o=!0){return this.move(-1,o)}moveTo(o,i=0){for(;(this.from==this.to||(i<1?this.from>=o:this.from>o)||(i>-1?this.to<=o:this.to<o))&&this.parent(););for(;this.enterChild(1,o,i););return this}get node(){if(!this.buffer)return this._tree;let o=this.bufferNode,i=null,l=0;if(o&&o.context==this.buffer)e:for(let d=this.index,m=this.stack.length;m>=0;){for(let p=o;p;p=p._parent)if(p.index==d){if(d==this.index)return p;i=p,l=m+1;break e}d=this.stack[--m]}for(let d=l;d<this.stack.length;d++)i=new n0(this.buffer,i,this.stack[d]);return this.bufferNode=new n0(this.buffer,i,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(o,i){for(let l=0;;){let d=!1;if(this.type.isAnonymous||o(this)!==!1){if(this.firstChild()){l++;continue}this.type.isAnonymous||(d=!0)}for(;d&&i&&i(this),d=this.type.isAnonymous,!this.nextSibling();){if(!l)return;this.parent(),l--,d=!0}}}matchContext(o){if(!this.buffer)return YJ(this.node,o);let{buffer:i}=this.buffer,{types:l}=i.set;for(let d=o.length-1,m=this.stack.length-1;d>=0;m--){if(m<0)return YJ(this.node,o,d);let p=l[i.buffer[this.stack[m]]];if(!p.isAnonymous){if(o[d]&&o[d]!=p.name)return!1;d--}}return!0}}function MQ(u){return u.children.some(o=>o instanceof f0||!o.type.isAnonymous||MQ(o))}function dhe(u){var o;let{buffer:i,nodeSet:l,maxBufferLength:d=Bre,reused:m=[],minRepeatType:p=l.types.length}=u,v=Array.isArray(i)?new DQ(i,i.length):i,x=l.types,k=0,T=0;function M(_e,De,G,qe,Re,$e){let{id:le,start:Ee,end:ft,size:ne}=v,ge=T;for(;ne<0;)if(v.next(),ne==-1){let qt=m[le];G.push(qt),qe.push(Ee-_e);return}else if(ne==-3){k=le;return}else if(ne==-4){T=le;return}else throw new RangeError(`Unrecognized record size: ${ne}`);let O=x[le],Ye,me,lt=Ee-_e;if(ft-Ee<=d&&(me=J(v.pos-De,Re))){let qt=new Uint16Array(me.size-me.skip),Be=v.pos-me.size,Ue=qt.length;for(;v.pos>Be;)Ue=q(me.start,qt,Ue);Ye=new f0(qt,ft-me.start,l),lt=me.start-_e}else{let qt=v.pos-ne;v.next();let Be=[],Ue=[],yt=le>=p?le:-1,Ie=0,wt=ft;for(;v.pos>qt;)yt>=0&&v.id==yt&&v.size>=0?(v.end<=wt-d&&(z(Be,Ue,Ee,Ie,v.end,wt,yt,ge),Ie=Be.length,wt=v.end),v.next()):$e>2500?N(Ee,qt,Be,Ue):M(Ee,qt,Be,Ue,yt,$e+1);if(yt>=0&&Ie>0&&Ie<Be.length&&z(Be,Ue,Ee,Ie,Ee,wt,yt,ge),Be.reverse(),Ue.reverse(),yt>-1&&Ie>0){let ue=I(O);Ye=PQ(O,Be,Ue,0,Be.length,0,ft-Ee,ue,ue)}else Ye=Y(O,Be,Ue,ft-Ee,ge-ft)}G.push(Ye),qe.push(lt)}function N(_e,De,G,qe){let Re=[],$e=0,le=-1;for(;v.pos>De;){let{id:Ee,start:ft,end:ne,size:ge}=v;if(ge>4)v.next();else{if(le>-1&&ft<le)break;le<0&&(le=ne-d),Re.push(Ee,ft,ne),$e++,v.next()}}if($e){let Ee=new Uint16Array($e*4),ft=Re[Re.length-2];for(let ne=Re.length-3,ge=0;ne>=0;ne-=3)Ee[ge++]=Re[ne],Ee[ge++]=Re[ne+1]-ft,Ee[ge++]=Re[ne+2]-ft,Ee[ge++]=ge;G.push(new f0(Ee,Re[2]-ft,l)),qe.push(ft-_e)}}function I(_e){return(De,G,qe)=>{let Re=0,$e=De.length-1,le,Ee;if($e>=0&&(le=De[$e])instanceof ci){if(!$e&&le.type==_e&&le.length==qe)return le;(Ee=le.prop(Gs.lookAhead))&&(Re=G[$e]+le.length+Ee)}return Y(_e,De,G,qe,Re)}}function z(_e,De,G,qe,Re,$e,le,Ee){let ft=[],ne=[];for(;_e.length>qe;)ft.push(_e.pop()),ne.push(De.pop()+G-Re);_e.push(Y(l.types[le],ft,ne,$e-Re,Ee-$e)),De.push(Re-G)}function Y(_e,De,G,qe,Re=0,$e){if(k){let le=[Gs.contextHash,k];$e=$e?[le].concat($e):[le]}if(Re>25){let le=[Gs.lookAhead,Re];$e=$e?[le].concat($e):[le]}return new ci(_e,De,G,qe,$e)}function J(_e,De){let G=v.fork(),qe=0,Re=0,$e=0,le=G.end-d,Ee={size:0,start:0,skip:0};e:for(let ft=G.pos-_e;G.pos>ft;){let ne=G.size;if(G.id==De&&ne>=0){Ee.size=qe,Ee.start=Re,Ee.skip=$e,$e+=4,qe+=4,G.next();continue}let ge=G.pos-ne;if(ne<0||ge<ft||G.start<le)break;let O=G.id>=p?4:0,Ye=G.start;for(G.next();G.pos>ge;){if(G.size<0)if(G.size==-3)O+=4;else break e;else G.id>=p&&(O+=4);G.next()}Re=Ye,qe+=ne,$e+=O}return(De<0||qe==_e)&&(Ee.size=qe,Ee.start=Re,Ee.skip=$e),Ee.size>4?Ee:void 0}function q(_e,De,G){let{id:qe,start:Re,end:$e,size:le}=v;if(v.next(),le>=0&&qe<p){let Ee=G;if(le>4){let ft=v.pos-(le-4);for(;v.pos>ft;)G=q(_e,De,G)}De[--G]=Ee,De[--G]=$e-_e,De[--G]=Re-_e,De[--G]=qe}else le==-3?k=qe:le==-4&&(T=qe);return G}let ae=[],Z=[];for(;v.pos>0;)M(u.start||0,u.bufferStart||0,ae,Z,-1,0);let ce=(o=u.length)!==null&&o!==void 0?o:ae.length?Z[0]+ae[0].length:0;return new ci(x[u.topID],ae.reverse(),Z.reverse(),ce)}const Kne=new WeakMap;function n6(u,o){if(!u.isAnonymous||o instanceof f0||o.type!=u)return 1;let i=Kne.get(o);if(i==null){i=1;for(let l of o.children){if(l.type!=u||!(l instanceof ci)){i=1;break}i+=n6(u,l)}Kne.set(o,i)}return i}function PQ(u,o,i,l,d,m,p,v,x){let k=0;for(let z=l;z<d;z++)k+=n6(u,o[z]);let T=Math.ceil(k*1.5/8),M=[],N=[];function I(z,Y,J,q,ae){for(let Z=J;Z<q;){let ce=Z,_e=Y[Z],De=n6(u,z[Z]);for(Z++;Z<q;Z++){let G=n6(u,z[Z]);if(De+G>=T)break;De+=G}if(Z==ce+1){if(De>T){let G=z[ce];I(G.children,G.positions,0,G.children.length,Y[ce]+ae);continue}M.push(z[ce])}else{let G=Y[Z-1]+z[Z-1].length-_e;M.push(PQ(u,z,Y,ce,Z,_e,G,null,x))}N.push(_e+ae-m)}}return I(o,i,l,d,0),(v||x)(M,N,p)}class by{constructor(o,i,l,d,m=!1,p=!1){this.from=o,this.to=i,this.tree=l,this.offset=d,this.open=(m?1:0)|(p?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(o,i=[],l=!1){let d=[new by(0,o.length,o,0,!1,l)];for(let m of i)m.to>o.length&&d.push(m);return d}static applyChanges(o,i,l=128){if(!i.length)return o;let d=[],m=1,p=o.length?o[0]:null;for(let v=0,x=0,k=0;;v++){let T=v<i.length?i[v]:null,M=T?T.fromA:1e9;if(M-x>=l)for(;p&&p.from<M;){let N=p;if(x>=N.from||M<=N.to||k){let I=Math.max(N.from,x)-k,z=Math.min(N.to,M)-k;N=I>=z?null:new by(I,z,N.tree,N.offset+k,v>0,!!T)}if(N&&d.push(N),p.to>M)break;p=m<o.length?o[m++]:null}if(!T)break;x=T.toA,k=T.toA-T.toB}return d}}class RQ{startParse(o,i,l){return typeof o=="string"&&(o=new fhe(o)),l=l?l.length?l.map(d=>new KX(d.from,d.to)):[new KX(0,0)]:[new KX(0,o.length)],this.createParse(o,i||[],l)}parse(o,i,l){let d=this.startParse(o,i,l);for(;;){let m=d.advance();if(m)return m}}}class fhe{constructor(o){this.string=o}get length(){return this.string.length}chunk(o){return this.string.slice(o)}get lineChunks(){return!1}read(o,i){return this.string.slice(o,i)}}new Gs({perNode:!0});let hhe=0;class uf{constructor(o,i,l,d){this.name=o,this.set=i,this.base=l,this.modified=d,this.id=hhe++}toString(){let{name:o}=this;for(let i of this.modified)i.name&&(o=`${i.name}(${o})`);return o}static define(o,i){let l=typeof o=="string"?o:"?";if(o instanceof uf&&(i=o),i!=null&&i.base)throw new Error("Can not derive from a modified tag");let d=new uf(l,[],null,[]);if(d.set.push(d),i)for(let m of i.set)d.set.push(m);return d}static defineModifier(o){let i=new y6(o);return l=>l.modified.indexOf(i)>-1?l:y6.get(l.base||l,l.modified.concat(i).sort((d,m)=>d.id-m.id))}}let mhe=0;class y6{constructor(o){this.name=o,this.instances=[],this.id=mhe++}static get(o,i){if(!i.length)return o;let l=i[0].instances.find(v=>v.base==o&&ghe(i,v.modified));if(l)return l;let d=[],m=new uf(o.name,d,o,i);for(let v of i)v.instances.push(m);let p=phe(i);for(let v of o.set)if(!v.modified.length)for(let x of p)d.push(y6.get(v,x));return m}}function ghe(u,o){return u.length==o.length&&u.every((i,l)=>i==o[l])}function phe(u){let o=[[]];for(let i=0;i<u.length;i++)for(let l=0,d=o.length;l<d;l++)o.push(o[l].concat(u[i]));return o.sort((i,l)=>l.length-i.length)}function $re(u){let o=Object.create(null);for(let i in u){let l=u[i];Array.isArray(l)||(l=[l]);for(let d of i.split(" "))if(d){let m=[],p=2,v=d;for(let M=0;;){if(v=="..."&&M>0&&M+3==d.length){p=1;break}let N=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(v);if(!N)throw new RangeError("Invalid path: "+d);if(m.push(N[0]=="*"?"":N[0][0]=='"'?JSON.parse(N[0]):N[0]),M+=N[0].length,M==d.length)break;let I=d[M++];if(M==d.length&&I=="!"){p=0;break}if(I!="/")throw new RangeError("Invalid path: "+d);v=d.slice(M)}let x=m.length-1,k=m[x];if(!k)throw new RangeError("Invalid path: "+d);let T=new w6(l,p,x>0?m.slice(0,x):null);o[k]=T.sort(o[k])}}return Hre.add(o)}const Hre=new Gs;class w6{constructor(o,i,l,d){this.tags=o,this.mode=i,this.context=l,this.next=d}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(o){return!o||o.depth<this.depth?(this.next=o,this):(o.next=this.sort(o.next),o)}get depth(){return this.context?this.context.length:0}}w6.empty=new w6([],2,null);function Vre(u,o){let i=Object.create(null);for(let m of u)if(!Array.isArray(m.tag))i[m.tag.id]=m.class;else for(let p of m.tag)i[p.id]=m.class;let{scope:l,all:d=null}=o||{};return{style:m=>{let p=d;for(let v of m)for(let x of v.set){let k=i[x.id];if(k){p=p?p+" "+k:k;break}}return p},scope:l}}function bhe(u,o){let i=null;for(let l of u){let d=l.style(o);d&&(i=i?i+" "+d:d)}return i}function vhe(u,o,i,l=0,d=u.length){let m=new yhe(l,Array.isArray(o)?o:[o],i);m.highlightRange(u.cursor(),l,d,"",m.highlighters),m.flush(d)}class yhe{constructor(o,i,l){this.at=o,this.highlighters=i,this.span=l,this.class=""}startSpan(o,i){i!=this.class&&(this.flush(o),o>this.at&&(this.at=o),this.class=i)}flush(o){o>this.at&&this.class&&this.span(this.at,o,this.class)}highlightRange(o,i,l,d,m){let{type:p,from:v,to:x}=o;if(v>=l||x<=i)return;p.isTop&&(m=this.highlighters.filter(I=>!I.scope||I.scope(p)));let k=d,T=whe(o)||w6.empty,M=bhe(m,T.tags);if(M&&(k&&(k+=" "),k+=M,T.mode==1&&(d+=(d?" ":"")+M)),this.startSpan(Math.max(i,v),k),T.opaque)return;let N=o.tree&&o.tree.prop(Gs.mounted);if(N&&N.overlay){let I=o.node.enter(N.overlay[0].from+v,1),z=this.highlighters.filter(J=>!J.scope||J.scope(N.tree.type)),Y=o.firstChild();for(let J=0,q=v;;J++){let ae=J<N.overlay.length?N.overlay[J]:null,Z=ae?ae.from+v:x,ce=Math.max(i,q),_e=Math.min(l,Z);if(ce<_e&&Y)for(;o.from<_e&&(this.highlightRange(o,ce,_e,d,m),this.startSpan(Math.min(_e,o.to),k),!(o.to>=Z||!o.nextSibling())););if(!ae||Z>l)break;q=ae.to+v,q>i&&(this.highlightRange(I.cursor(),Math.max(i,ae.from+v),Math.min(l,q),"",z),this.startSpan(Math.min(l,q),k))}Y&&o.parent()}else if(o.firstChild()){N&&(d="");do if(!(o.to<=i)){if(o.from>=l)break;this.highlightRange(o,i,l,d,m),this.startSpan(Math.min(l,o.to),k)}while(o.nextSibling());o.parent()}}}function whe(u){let o=u.type.prop(Hre);for(;o&&o.context&&!u.matchContext(o.context);)o=o.next;return o||null}const Kn=uf.define,F$=Kn(),q1=Kn(),Yne=Kn(q1),Xne=Kn(q1),G1=Kn(),I$=Kn(G1),YX=Kn(G1),gm=Kn(),ry=Kn(gm),hm=Kn(),mm=Kn(),JJ=Kn(),ND=Kn(JJ),L$=Kn(),Ft={comment:F$,lineComment:Kn(F$),blockComment:Kn(F$),docComment:Kn(F$),name:q1,variableName:Kn(q1),typeName:Yne,tagName:Kn(Yne),propertyName:Xne,attributeName:Kn(Xne),className:Kn(q1),labelName:Kn(q1),namespace:Kn(q1),macroName:Kn(q1),literal:G1,string:I$,docString:Kn(I$),character:Kn(I$),attributeValue:Kn(I$),number:YX,integer:Kn(YX),float:Kn(YX),bool:Kn(G1),regexp:Kn(G1),escape:Kn(G1),color:Kn(G1),url:Kn(G1),keyword:hm,self:Kn(hm),null:Kn(hm),atom:Kn(hm),unit:Kn(hm),modifier:Kn(hm),operatorKeyword:Kn(hm),controlKeyword:Kn(hm),definitionKeyword:Kn(hm),moduleKeyword:Kn(hm),operator:mm,derefOperator:Kn(mm),arithmeticOperator:Kn(mm),logicOperator:Kn(mm),bitwiseOperator:Kn(mm),compareOperator:Kn(mm),updateOperator:Kn(mm),definitionOperator:Kn(mm),typeOperator:Kn(mm),controlOperator:Kn(mm),punctuation:JJ,separator:Kn(JJ),bracket:ND,angleBracket:Kn(ND),squareBracket:Kn(ND),paren:Kn(ND),brace:Kn(ND),content:gm,heading:ry,heading1:Kn(ry),heading2:Kn(ry),heading3:Kn(ry),heading4:Kn(ry),heading5:Kn(ry),heading6:Kn(ry),contentSeparator:Kn(gm),list:Kn(gm),quote:Kn(gm),emphasis:Kn(gm),strong:Kn(gm),link:Kn(gm),monospace:Kn(gm),strikethrough:Kn(gm),inserted:Kn(),deleted:Kn(),changed:Kn(),invalid:Kn(),meta:L$,documentMeta:Kn(L$),annotation:Kn(L$),processingInstruction:Kn(L$),definition:uf.defineModifier("definition"),constant:uf.defineModifier("constant"),function:uf.defineModifier("function"),standard:uf.defineModifier("standard"),local:uf.defineModifier("local"),special:uf.defineModifier("special")};for(let u in Ft){let o=Ft[u];o instanceof uf&&(o.name=u)}Vre([{tag:Ft.link,class:"tok-link"},{tag:Ft.heading,class:"tok-heading"},{tag:Ft.emphasis,class:"tok-emphasis"},{tag:Ft.strong,class:"tok-strong"},{tag:Ft.keyword,class:"tok-keyword"},{tag:Ft.atom,class:"tok-atom"},{tag:Ft.bool,class:"tok-bool"},{tag:Ft.url,class:"tok-url"},{tag:Ft.labelName,class:"tok-labelName"},{tag:Ft.inserted,class:"tok-inserted"},{tag:Ft.deleted,class:"tok-deleted"},{tag:Ft.literal,class:"tok-literal"},{tag:Ft.string,class:"tok-string"},{tag:Ft.number,class:"tok-number"},{tag:[Ft.regexp,Ft.escape,Ft.special(Ft.string)],class:"tok-string2"},{tag:Ft.variableName,class:"tok-variableName"},{tag:Ft.local(Ft.variableName),class:"tok-variableName tok-local"},{tag:Ft.definition(Ft.variableName),class:"tok-variableName tok-definition"},{tag:Ft.special(Ft.variableName),class:"tok-variableName2"},{tag:Ft.definition(Ft.propertyName),class:"tok-propertyName tok-definition"},{tag:Ft.typeName,class:"tok-typeName"},{tag:Ft.namespace,class:"tok-namespace"},{tag:Ft.className,class:"tok-className"},{tag:Ft.macroName,class:"tok-macroName"},{tag:Ft.propertyName,class:"tok-propertyName"},{tag:Ft.operator,class:"tok-operator"},{tag:Ft.comment,class:"tok-comment"},{tag:Ft.meta,class:"tok-meta"},{tag:Ft.invalid,class:"tok-invalid"},{tag:Ft.punctuation,class:"tok-punctuation"}]);var XX;const hy=new Gs;function zre(u){return Co.define({combine:u?o=>o.concat(u):void 0})}const xhe=new Gs;class hf{constructor(o,i,l=[],d=""){this.data=o,this.name=d,lr.prototype.hasOwnProperty("tree")||Object.defineProperty(lr.prototype,"tree",{get(){return jl(this)}}),this.parser=i,this.extension=[h0.of(this),lr.languageData.of((m,p,v)=>{let x=Jne(m,p,v),k=x.type.prop(hy);if(!k)return[];let T=m.facet(k),M=x.type.prop(xhe);if(M){let N=x.resolve(p-x.from,v);for(let I of M)if(I.test(N,m)){let z=m.facet(I.facet);return I.type=="replace"?z:z.concat(T)}}return T})].concat(l)}isActiveAt(o,i,l=-1){return Jne(o,i,l).type.prop(hy)==this.data}findRegions(o){let i=o.facet(h0);if((i==null?void 0:i.data)==this.data)return[{from:0,to:o.doc.length}];if(!i||!i.allowsNesting)return[];let l=[],d=(m,p)=>{if(m.prop(hy)==this.data){l.push({from:p,to:p+m.length});return}let v=m.prop(Gs.mounted);if(v){if(v.tree.prop(hy)==this.data){if(v.overlay)for(let x of v.overlay)l.push({from:x.from+p,to:x.to+p});else l.push({from:p,to:p+m.length});return}else if(v.overlay){let x=l.length;if(d(v.tree,v.overlay[0].from+p),l.length>x)return}}for(let x=0;x<m.children.length;x++){let k=m.children[x];k instanceof ci&&d(k,m.positions[x]+p)}};return d(jl(o),0),l}get allowsNesting(){return!0}}hf.setState=Fs.define();function Jne(u,o,i){let l=u.facet(h0),d=jl(u).topNode;if(!l||l.allowsNesting)for(let m=d;m;m=m.enter(o,i,kl.ExcludeBuffers))m.type.isTop&&(d=m);return d}class x6 extends hf{constructor(o,i,l){super(o,i,[],l),this.parser=i}static define(o){let i=zre(o.languageData);return new x6(i,o.parser.configure({props:[hy.add(l=>l.isTop?i:void 0)]}),o.name)}configure(o,i){return new x6(this.data,this.parser.configure(o),i||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function jl(u){let o=u.field(hf.state,!1);return o?o.tree:ci.empty}class Che{constructor(o){this.doc=o,this.cursorPos=0,this.string="",this.cursor=o.iter()}get length(){return this.doc.length}syncTo(o){return this.string=this.cursor.next(o-this.cursorPos).value,this.cursorPos=o+this.string.length,this.cursorPos-this.string.length}chunk(o){return this.syncTo(o),this.string}get lineChunks(){return!0}read(o,i){let l=this.cursorPos-this.string.length;return o<l||i>=this.cursorPos?this.doc.sliceString(o,i):this.string.slice(o-l,i-l)}}let BD=null;class S2{constructor(o,i,l=[],d,m,p,v,x){this.parser=o,this.state=i,this.fragments=l,this.tree=d,this.treeLen=m,this.viewport=p,this.skipped=v,this.scheduleOn=x,this.parse=null,this.tempSkipped=[]}static create(o,i,l){return new S2(o,i,[],ci.empty,0,l,[],null)}startParse(){return this.parser.startParse(new Che(this.state.doc),this.fragments)}work(o,i){return i!=null&&i>=this.state.doc.length&&(i=void 0),this.tree!=ci.empty&&this.isDone(i!=null?i:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var l;if(typeof o=="number"){let d=Date.now()+o;o=()=>Date.now()>d}for(this.parse||(this.parse=this.startParse()),i!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>i)&&i<this.state.doc.length&&this.parse.stopAt(i);;){let d=this.parse.advance();if(d)if(this.fragments=this.withoutTempSkipped(by.addTree(d,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(l=this.parse.stoppedAt)!==null&&l!==void 0?l:this.state.doc.length,this.tree=d,this.parse=null,this.treeLen<(i!=null?i:this.state.doc.length))this.parse=this.startParse();else return!0;if(o())return!1}})}takeTree(){let o,i;this.parse&&(o=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>o)&&this.parse.stopAt(o),this.withContext(()=>{for(;!(i=this.parse.advance()););}),this.treeLen=o,this.tree=i,this.fragments=this.withoutTempSkipped(by.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(o){let i=BD;BD=this;try{return o()}finally{BD=i}}withoutTempSkipped(o){for(let i;i=this.tempSkipped.pop();)o=Qne(o,i.from,i.to);return o}changes(o,i){let{fragments:l,tree:d,treeLen:m,viewport:p,skipped:v}=this;if(this.takeTree(),!o.empty){let x=[];if(o.iterChangedRanges((k,T,M,N)=>x.push({fromA:k,toA:T,fromB:M,toB:N})),l=by.applyChanges(l,x),d=ci.empty,m=0,p={from:o.mapPos(p.from,-1),to:o.mapPos(p.to,1)},this.skipped.length){v=[];for(let k of this.skipped){let T=o.mapPos(k.from,1),M=o.mapPos(k.to,-1);T<M&&v.push({from:T,to:M})}}}return new S2(this.parser,i,l,d,m,p,v,this.scheduleOn)}updateViewport(o){if(this.viewport.from==o.from&&this.viewport.to==o.to)return!1;this.viewport=o;let i=this.skipped.length;for(let l=0;l<this.skipped.length;l++){let{from:d,to:m}=this.skipped[l];d<o.to&&m>o.from&&(this.fragments=Qne(this.fragments,d,m),this.skipped.splice(l--,1))}return this.skipped.length>=i?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(o,i){this.skipped.push({from:o,to:i})}static getSkippingParser(o){return new class extends RQ{createParse(i,l,d){let m=d[0].from,p=d[d.length-1].to;return{parsedPos:m,advance(){let x=BD;if(x){for(let k of d)x.tempSkipped.push(k);o&&(x.scheduleOn=x.scheduleOn?Promise.all([x.scheduleOn,o]):o)}return this.parsedPos=p,new ci(Jc.none,[],[],p-m)},stoppedAt:null,stopAt(){}}}}}isDone(o){o=Math.min(o,this.state.doc.length);let i=this.fragments;return this.treeLen>=o&&i.length&&i[0].from==0&&i[0].to>=o}static get(){return BD}}function Qne(u,o,i){return by.applyChanges(u,[{fromA:o,toA:i,fromB:o,toB:i}])}class k2{constructor(o){this.context=o,this.tree=o.tree}apply(o){if(!o.docChanged&&this.tree==this.context.tree)return this;let i=this.context.changes(o.changes,o.state),l=this.context.treeLen==o.startState.doc.length?void 0:Math.max(o.changes.mapPos(this.context.treeLen),i.viewport.to);return i.work(20,l)||i.takeTree(),new k2(i)}static init(o){let i=Math.min(3e3,o.doc.length),l=S2.create(o.facet(h0).parser,o,{from:0,to:i});return l.work(20,i)||l.takeTree(),new k2(l)}}hf.state=Zl.define({create:k2.init,update(u,o){for(let i of o.effects)if(i.is(hf.setState))return i.value;return o.startState.facet(h0)!=o.state.facet(h0)?k2.init(o.state):u.apply(o)}});let Ure=u=>{let o=setTimeout(()=>u(),500);return()=>clearTimeout(o)};typeof requestIdleCallback!="undefined"&&(Ure=u=>{let o=-1,i=setTimeout(()=>{o=requestIdleCallback(u,{timeout:400})},100);return()=>o<0?clearTimeout(i):cancelIdleCallback(o)});const JX=typeof navigator!="undefined"&&(!((XX=navigator.scheduling)===null||XX===void 0)&&XX.isInputPending)?()=>navigator.scheduling.isInputPending():null,She=Ta.fromClass(class{constructor(o){this.view=o,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(o){let i=this.view.state.field(hf.state).context;(i.updateViewport(o.view.viewport)||this.view.viewport.to>i.treeLen)&&this.scheduleWork(),(o.docChanged||o.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(i)}scheduleWork(){if(this.working)return;let{state:o}=this.view,i=o.field(hf.state);(i.tree!=i.context.tree||!i.context.isDone(o.doc.length))&&(this.working=Ure(this.work))}work(o){this.working=null;let i=Date.now();if(this.chunkEnd<i&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=i+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:l,viewport:{to:d}}=this.view,m=l.field(hf.state);if(m.tree==m.context.tree&&m.context.isDone(d+1e5))return;let p=Date.now()+Math.min(this.chunkBudget,100,o&&!JX?Math.max(25,o.timeRemaining()-5):1e9),v=m.context.treeLen<d&&l.doc.length>d+1e3,x=m.context.work(()=>JX&&JX()||Date.now()>p,d+(v?0:1e5));this.chunkBudget-=Date.now()-i,(x||this.chunkBudget<=0)&&(m.context.takeTree(),this.view.dispatch({effects:hf.setState.of(new k2(m.context))})),this.chunkBudget>0&&!(x&&!v)&&this.scheduleWork(),this.checkAsyncSchedule(m.context)}checkAsyncSchedule(o){o.scheduleOn&&(this.workScheduled++,o.scheduleOn.then(()=>this.scheduleWork()).catch(i=>_u(this.view.state,i)).then(()=>this.workScheduled--),o.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),h0=Co.define({combine(u){return u.length?u[0]:null},enables:u=>[hf.state,She,po.contentAttributes.compute([u],o=>{let i=o.facet(u);return i&&i.name?{"data-language":i.name}:{}})]});class khe{constructor(o,i=[]){this.language=o,this.support=i,this.extension=[o,i]}}const Wre=Co.define(),W6=Co.define({combine:u=>{if(!u.length)return"  ";let o=u[0];if(!o||/\S/.test(o)||Array.from(o).some(i=>i!=o[0]))throw new Error("Invalid indent unit: "+JSON.stringify(u[0]));return o}});function Ey(u){let o=u.facet(W6);return o.charCodeAt(0)==9?u.tabSize*o.length:o.length}function iM(u,o){let i="",l=u.tabSize,d=u.facet(W6)[0];if(d=="	"){for(;o>=l;)i+="	",o-=l;d=" "}for(let m=0;m<o;m++)i+=d;return i}function NQ(u,o){u instanceof lr&&(u=new j6(u));for(let l of u.state.facet(Wre)){let d=l(u,o);if(d!==void 0)return d}let i=jl(u.state);return i.length>=o?Ehe(u,i,o):null}class j6{constructor(o,i={}){this.state=o,this.options=i,this.unit=Ey(o)}lineAt(o,i=1){let l=this.state.doc.lineAt(o),{simulateBreak:d,simulateDoubleBreak:m}=this.options;return d!=null&&d>=l.from&&d<=l.to?m&&d==o?{text:"",from:o}:(i<0?d<o:d<=o)?{text:l.text.slice(d-l.from),from:d}:{text:l.text.slice(0,d-l.from),from:l.from}:l}textAfterPos(o,i=1){if(this.options.simulateDoubleBreak&&o==this.options.simulateBreak)return"";let{text:l,from:d}=this.lineAt(o,i);return l.slice(o-d,Math.min(l.length,o+100-d))}column(o,i=1){let{text:l,from:d}=this.lineAt(o,i),m=this.countColumn(l,o-d),p=this.options.overrideIndentation?this.options.overrideIndentation(d):-1;return p>-1&&(m+=p-this.countColumn(l,l.search(/\S|$/))),m}countColumn(o,i=o.length){return P2(o,this.state.tabSize,i)}lineIndent(o,i=1){let{text:l,from:d}=this.lineAt(o,i),m=this.options.overrideIndentation;if(m){let p=m(d);if(p>-1)return p}return this.countColumn(l,l.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const jre=new Gs;function Ehe(u,o,i){let l=o.resolveStack(i),d=l.node.enterUnfinishedNodesBefore(i);if(d!=l.node){let m=[];for(let p=d;p!=l.node;p=p.parent)m.push(p);for(let p=m.length-1;p>=0;p--)l={node:m[p],next:l}}return Zre(l,u,i)}function Zre(u,o,i){for(let l=u;l;l=l.next){let d=The(l.node);if(d)return d(BQ.create(o,i,l))}return 0}function Ahe(u){return u.pos==u.options.simulateBreak&&u.options.simulateDoubleBreak}function The(u){let o=u.type.prop(jre);if(o)return o;let i=u.firstChild,l;if(i&&(l=i.type.prop(Gs.closedBy))){let d=u.lastChild,m=d&&l.indexOf(d.name)>-1;return p=>Mhe(p,!0,1,void 0,m&&!Ahe(p)?d.from:void 0)}return u.parent==null?Ohe:null}function Ohe(){return 0}class BQ extends j6{constructor(o,i,l){super(o.state,o.options),this.base=o,this.pos=i,this.context=l}get node(){return this.context.node}static create(o,i,l){return new BQ(o,i,l)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(o){let i=this.state.doc.lineAt(o.from);for(;;){let l=o.resolve(i.from);for(;l.parent&&l.parent.from==l.from;)l=l.parent;if(_he(l,o))break;i=this.state.doc.lineAt(l.from)}return this.lineIndent(i.from)}continue(){return Zre(this.context.next,this.base,this.pos)}}function _he(u,o){for(let i=o;i;i=i.parent)if(u==i)return!0;return!1}function Dhe(u){let o=u.node,i=o.childAfter(o.from),l=o.lastChild;if(!i)return null;let d=u.options.simulateBreak,m=u.state.doc.lineAt(i.from),p=d==null||d<=m.from?m.to:Math.min(m.to,d);for(let v=i.to;;){let x=o.childAfter(v);if(!x||x==l)return null;if(!x.type.isSkipped)return x.from<p?i:null;v=x.to}}function Mhe(u,o,i,l,d){let m=u.textAfter,p=m.match(/^\s*/)[0].length,v=d==u.pos+p,x=Dhe(u);return x?v?u.column(x.from):u.column(x.to):u.baseIndent+(v?0:u.unit*i)}function eoe({except:u,units:o=1}={}){return i=>{let l=u&&u.test(i.textAfter);return i.baseIndent+(l?0:o*i.unit)}}const Phe=200;function Rhe(){return lr.transactionFilter.of(u=>{if(!u.docChanged||!u.isUserEvent("input.type")&&!u.isUserEvent("input.complete"))return u;let o=u.startState.languageDataAt("indentOnInput",u.startState.selection.main.head);if(!o.length)return u;let i=u.newDoc,{head:l}=u.newSelection.main,d=i.lineAt(l);if(l>d.from+Phe)return u;let m=i.sliceString(d.from,l);if(!o.some(k=>k.test(m)))return u;let{state:p}=u,v=-1,x=[];for(let{head:k}of p.selection.ranges){let T=p.doc.lineAt(k);if(T.from==v)continue;v=T.from;let M=NQ(p,T.from);if(M==null)continue;let N=/^\s*/.exec(T.text)[0],I=iM(p,M);N!=I&&x.push({from:T.from,to:T.from+N.length,insert:I})}return x.length?[u,{changes:x,sequential:!0}]:u})}const Nhe=Co.define(),qre=new Gs;function Bhe(u){let o=u.firstChild,i=u.lastChild;return o&&o.to<i.from?{from:o.to,to:i.type.isError?u.to:i.from}:null}function Fhe(u,o,i){let l=jl(u);if(l.length<i)return null;let d=l.resolveStack(i,1),m=null;for(let p=d;p;p=p.next){let v=p.node;if(v.to<=i||v.from>i)continue;if(m&&v.from<o)break;let x=v.type.prop(qre);if(x&&(v.to<l.length-50||l.length==u.doc.length||!Ihe(v))){let k=x(v,u);k&&k.from<=i&&k.from>=o&&k.to>i&&(m=k)}}return m}function Ihe(u){let o=u.lastChild;return o&&o.to==u.to&&o.type.isError}function C6(u,o,i){for(let l of u.facet(Nhe)){let d=l(u,o,i);if(d)return d}return Fhe(u,o,i)}function Gre(u,o){let i=o.mapPos(u.from,1),l=o.mapPos(u.to,-1);return i>=l?void 0:{from:i,to:l}}const Z6=Fs.define({map:Gre}),wM=Fs.define({map:Gre});function Kre(u){let o=[];for(let{head:i}of u.state.selection.ranges)o.some(l=>l.from<=i&&l.to>=i)||o.push(u.lineBlockAt(i));return o}const Ay=Zl.define({create(){return Zo.none},update(u,o){u=u.map(o.changes);for(let i of o.effects)if(i.is(Z6)&&!Lhe(u,i.value.from,i.value.to)){let{preparePlaceholder:l}=o.state.facet(Jre),d=l?Zo.replace({widget:new jhe(l(o.state,i.value))}):toe;u=u.update({add:[d.range(i.value.from,i.value.to)]})}else i.is(wM)&&(u=u.update({filter:(l,d)=>i.value.from!=l||i.value.to!=d,filterFrom:i.value.from,filterTo:i.value.to}));if(o.selection){let i=!1,{head:l}=o.selection.main;u.between(l,l,(d,m)=>{d<l&&m>l&&(i=!0)}),i&&(u=u.update({filterFrom:l,filterTo:l,filter:(d,m)=>m<=l||d>=l}))}return u},provide:u=>po.decorations.from(u),toJSON(u,o){let i=[];return u.between(0,o.doc.length,(l,d)=>{i.push(l,d)}),i},fromJSON(u){if(!Array.isArray(u)||u.length%2)throw new RangeError("Invalid JSON for fold state");let o=[];for(let i=0;i<u.length;){let l=u[i++],d=u[i++];if(typeof l!="number"||typeof d!="number")throw new RangeError("Invalid JSON for fold state");o.push(toe.range(l,d))}return Zo.set(o,!0)}});function S6(u,o,i){var l;let d=null;return(l=u.field(Ay,!1))===null||l===void 0||l.between(o,i,(m,p)=>{(!d||d.from>m)&&(d={from:m,to:p})}),d}function Lhe(u,o,i){let l=!1;return u.between(o,o,(d,m)=>{d==o&&m==i&&(l=!0)}),l}function Yre(u,o){return u.field(Ay,!1)?o:o.concat(Fs.appendConfig.of(Qre()))}const $he=u=>{for(let o of Kre(u)){let i=C6(u.state,o.from,o.to);if(i)return u.dispatch({effects:Yre(u.state,[Z6.of(i),Xre(u,i)])}),!0}return!1},Hhe=u=>{if(!u.state.field(Ay,!1))return!1;let o=[];for(let i of Kre(u)){let l=S6(u.state,i.from,i.to);l&&o.push(wM.of(l),Xre(u,l,!1))}return o.length&&u.dispatch({effects:o}),o.length>0};function Xre(u,o,i=!0){let l=u.state.doc.lineAt(o.from).number,d=u.state.doc.lineAt(o.to).number;return po.announce.of(`${u.state.phrase(i?"Folded lines":"Unfolded lines")} ${l} ${u.state.phrase("to")} ${d}.`)}const Vhe=u=>{let{state:o}=u,i=[];for(let l=0;l<o.doc.length;){let d=u.lineBlockAt(l),m=C6(o,d.from,d.to);m&&i.push(Z6.of(m)),l=(m?u.lineBlockAt(m.to):d).to+1}return i.length&&u.dispatch({effects:Yre(u.state,i)}),!!i.length},zhe=u=>{let o=u.state.field(Ay,!1);if(!o||!o.size)return!1;let i=[];return o.between(0,u.state.doc.length,(l,d)=>{i.push(wM.of({from:l,to:d}))}),u.dispatch({effects:i}),!0},Uhe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:$he},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Hhe},{key:"Ctrl-Alt-[",run:Vhe},{key:"Ctrl-Alt-]",run:zhe}],Whe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Jre=Co.define({combine(u){return xm(u,Whe)}});function Qre(u){return[Ay,Ghe]}function eie(u,o){let{state:i}=u,l=i.facet(Jre),d=p=>{let v=u.lineBlockAt(u.posAtDOM(p.target)),x=S6(u.state,v.from,v.to);x&&u.dispatch({effects:wM.of(x)}),p.preventDefault()};if(l.placeholderDOM)return l.placeholderDOM(u,d,o);let m=document.createElement("span");return m.textContent=l.placeholderText,m.setAttribute("aria-label",i.phrase("folded code")),m.title=i.phrase("unfold"),m.className="cm-foldPlaceholder",m.onclick=d,m}const toe=Zo.replace({widget:new class extends qg{toDOM(u){return eie(u,null)}}});class jhe extends qg{constructor(o){super(),this.value=o}eq(o){return this.value==o.value}toDOM(o){return eie(o,this.value)}}const Zhe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class QX extends jg{constructor(o,i){super(),this.config=o,this.open=i}eq(o){return this.config==o.config&&this.open==o.open}toDOM(o){if(this.config.markerDOM)return this.config.markerDOM(this.open);let i=document.createElement("span");return i.textContent=this.open?this.config.openText:this.config.closedText,i.title=o.state.phrase(this.open?"Fold line":"Unfold line"),i}}function qhe(u={}){let o=Object.assign(Object.assign({},Zhe),u),i=new QX(o,!0),l=new QX(o,!1),d=Ta.fromClass(class{constructor(p){this.from=p.viewport.from,this.markers=this.buildMarkers(p)}update(p){(p.docChanged||p.viewportChanged||p.startState.facet(h0)!=p.state.facet(h0)||p.startState.field(Ay,!1)!=p.state.field(Ay,!1)||jl(p.startState)!=jl(p.state)||o.foldingChanged(p))&&(this.markers=this.buildMarkers(p.view))}buildMarkers(p){let v=new l0;for(let x of p.viewportLineBlocks){let k=S6(p.state,x.from,x.to)?l:C6(p.state,x.from,x.to)?i:null;k&&v.add(x.from,x.from,k)}return v.finish()}}),{domEventHandlers:m}=o;return[d,Kfe({class:"cm-foldGutter",markers(p){var v;return((v=p.plugin(d))===null||v===void 0?void 0:v.markers)||yr.empty},initialSpacer(){return new QX(o,!1)},domEventHandlers:Object.assign(Object.assign({},m),{click:(p,v,x)=>{if(m.click&&m.click(p,v,x))return!0;let k=S6(p.state,v.from,v.to);if(k)return p.dispatch({effects:wM.of(k)}),!0;let T=C6(p.state,v.from,v.to);return T?(p.dispatch({effects:Z6.of(T)}),!0):!1}})}),Qre()]}const Ghe=po.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class xM{constructor(o,i){this.specs=o;let l;function d(v){let x=c0.newName();return(l||(l=Object.create(null)))["."+x]=v,x}const m=typeof i.all=="string"?i.all:i.all?d(i.all):void 0,p=i.scope;this.scope=p instanceof hf?v=>v.prop(hy)==p.data:p?v=>v==p:void 0,this.style=Vre(o.map(v=>({tag:v.tag,class:v.class||d(Object.assign({},v,{tag:null}))})),{all:m}).style,this.module=l?new c0(l):null,this.themeType=i.themeType}static define(o,i){return new xM(o,i||{})}}const QJ=Co.define(),tie=Co.define({combine(u){return u.length?[u[0]]:null}});function eJ(u){let o=u.facet(QJ);return o.length?o:u.facet(tie)}function nie(u,o){let i=[Yhe],l;return u instanceof xM&&(u.module&&i.push(po.styleModule.of(u.module)),l=u.themeType),o!=null&&o.fallback?i.push(tie.of(u)):l?i.push(QJ.computeN([po.darkTheme],d=>d.facet(po.darkTheme)==(l=="dark")?[u]:[])):i.push(QJ.of(u)),i}class Khe{constructor(o){this.markCache=Object.create(null),this.tree=jl(o.state),this.decorations=this.buildDeco(o,eJ(o.state)),this.decoratedTo=o.viewport.to}update(o){let i=jl(o.state),l=eJ(o.state),d=l!=eJ(o.startState),{viewport:m}=o.view,p=o.changes.mapPos(this.decoratedTo,1);i.length<m.to&&!d&&i.type==this.tree.type&&p>=m.to?(this.decorations=this.decorations.map(o.changes),this.decoratedTo=p):(i!=this.tree||o.viewportChanged||d)&&(this.tree=i,this.decorations=this.buildDeco(o.view,l),this.decoratedTo=m.to)}buildDeco(o,i){if(!i||!this.tree.length)return Zo.none;let l=new l0;for(let{from:d,to:m}of o.visibleRanges)vhe(this.tree,i,(p,v,x)=>{l.add(p,v,this.markCache[x]||(this.markCache[x]=Zo.mark({class:x})))},d,m);return l.finish()}}const Yhe=Oy.high(Ta.fromClass(Khe,{decorations:u=>u.decorations})),Xhe=xM.define([{tag:Ft.meta,color:"#404740"},{tag:Ft.link,textDecoration:"underline"},{tag:Ft.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ft.emphasis,fontStyle:"italic"},{tag:Ft.strong,fontWeight:"bold"},{tag:Ft.strikethrough,textDecoration:"line-through"},{tag:Ft.keyword,color:"#708"},{tag:[Ft.atom,Ft.bool,Ft.url,Ft.contentSeparator,Ft.labelName],color:"#219"},{tag:[Ft.literal,Ft.inserted],color:"#164"},{tag:[Ft.string,Ft.deleted],color:"#a11"},{tag:[Ft.regexp,Ft.escape,Ft.special(Ft.string)],color:"#e40"},{tag:Ft.definition(Ft.variableName),color:"#00f"},{tag:Ft.local(Ft.variableName),color:"#30a"},{tag:[Ft.typeName,Ft.namespace],color:"#085"},{tag:Ft.className,color:"#167"},{tag:[Ft.special(Ft.variableName),Ft.macroName],color:"#256"},{tag:Ft.definition(Ft.propertyName),color:"#00c"},{tag:Ft.comment,color:"#940"},{tag:Ft.invalid,color:"#f00"}]),Jhe=po.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),oie=1e4,sie="()[]{}",rie=Co.define({combine(u){return xm(u,{afterCursor:!0,brackets:sie,maxScanDistance:oie,renderMatch:tme})}}),Qhe=Zo.mark({class:"cm-matchingBracket"}),eme=Zo.mark({class:"cm-nonmatchingBracket"});function tme(u){let o=[],i=u.matched?Qhe:eme;return o.push(i.range(u.start.from,u.start.to)),u.end&&o.push(i.range(u.end.from,u.end.to)),o}const nme=Zl.define({create(){return Zo.none},update(u,o){if(!o.docChanged&&!o.selection)return u;let i=[],l=o.state.facet(rie);for(let d of o.state.selection.ranges){if(!d.empty)continue;let m=vm(o.state,d.head,-1,l)||d.head>0&&vm(o.state,d.head-1,1,l)||l.afterCursor&&(vm(o.state,d.head,1,l)||d.head<o.state.doc.length&&vm(o.state,d.head+1,-1,l));m&&(i=i.concat(l.renderMatch(m,o.state)))}return Zo.set(i,!0)},provide:u=>po.decorations.from(u)}),ome=[nme,Jhe];function sme(u={}){return[rie.of(u),ome]}const rme=new Gs;function eQ(u,o,i){let l=u.prop(o<0?Gs.openedBy:Gs.closedBy);if(l)return l;if(u.name.length==1){let d=i.indexOf(u.name);if(d>-1&&d%2==(o<0?1:0))return[i[d+o]]}return null}function tQ(u){let o=u.type.prop(rme);return o?o(u.node):u}function vm(u,o,i,l={}){let d=l.maxScanDistance||oie,m=l.brackets||sie,p=jl(u),v=p.resolveInner(o,i);for(let x=v;x;x=x.parent){let k=eQ(x.type,i,m);if(k&&x.from<x.to){let T=tQ(x);if(T&&(i>0?o>=T.from&&o<T.to:o>T.from&&o<=T.to))return ime(u,o,i,x,T,k,m)}}return ame(u,o,i,p,v.type,d,m)}function ime(u,o,i,l,d,m,p){let v=l.parent,x={from:d.from,to:d.to},k=0,T=v==null?void 0:v.cursor();if(T&&(i<0?T.childBefore(l.from):T.childAfter(l.to)))do if(i<0?T.to<=l.from:T.from>=l.to){if(k==0&&m.indexOf(T.type.name)>-1&&T.from<T.to){let M=tQ(T);return{start:x,end:M?{from:M.from,to:M.to}:void 0,matched:!0}}else if(eQ(T.type,i,p))k++;else if(eQ(T.type,-i,p)){if(k==0){let M=tQ(T);return{start:x,end:M&&M.from<M.to?{from:M.from,to:M.to}:void 0,matched:!1}}k--}}while(i<0?T.prevSibling():T.nextSibling());return{start:x,matched:!1}}function ame(u,o,i,l,d,m,p){let v=i<0?u.sliceDoc(o-1,o):u.sliceDoc(o,o+1),x=p.indexOf(v);if(x<0||x%2==0!=i>0)return null;let k={from:i<0?o-1:o,to:i>0?o+1:o},T=u.doc.iterRange(o,i>0?u.doc.length:0),M=0;for(let N=0;!T.next().done&&N<=m;){let I=T.value;i<0&&(N+=I.length);let z=o+N*i;for(let Y=i>0?0:I.length-1,J=i>0?I.length:-1;Y!=J;Y+=i){let q=p.indexOf(I[Y]);if(!(q<0||l.resolveInner(z+Y,1).type!=d))if(q%2==0==i>0)M++;else{if(M==1)return{start:k,end:{from:z+Y,to:z+Y+1},matched:q>>1==x>>1};M--}}i>0&&(N+=I.length)}return T.done?{start:k,matched:!1}:null}function noe(u,o,i,l=0,d=0){o==null&&(o=u.search(/[^\s\u00a0]/),o==-1&&(o=u.length));let m=d;for(let p=l;p<o;p++)u.charCodeAt(p)==9?m+=i-m%i:m++;return m}class iie{constructor(o,i,l,d){this.string=o,this.tabSize=i,this.indentUnit=l,this.overrideIndent=d,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(o){let i=this.string.charAt(this.pos),l;if(typeof o=="string"?l=i==o:l=i&&(o instanceof RegExp?o.test(i):o(i)),l)return++this.pos,i}eatWhile(o){let i=this.pos;for(;this.eat(o););return this.pos>i}eatSpace(){let o=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>o}skipToEnd(){this.pos=this.string.length}skipTo(o){let i=this.string.indexOf(o,this.pos);if(i>-1)return this.pos=i,!0}backUp(o){this.pos-=o}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=noe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var o;return(o=this.overrideIndent)!==null&&o!==void 0?o:noe(this.string,null,this.tabSize)}match(o,i,l){if(typeof o=="string"){let d=p=>l?p.toLowerCase():p,m=this.string.substr(this.pos,o.length);return d(m)==d(o)?(i!==!1&&(this.pos+=o.length),!0):null}else{let d=this.string.slice(this.pos).match(o);return d&&d.index>0?null:(d&&i!==!1&&(this.pos+=d[0].length),d)}}current(){return this.string.slice(this.start,this.pos)}}function lme(u){return{name:u.name||"",token:u.token,blankLine:u.blankLine||(()=>{}),startState:u.startState||(()=>!0),copyState:u.copyState||cme,indent:u.indent||(()=>null),languageData:u.languageData||{},tokenTable:u.tokenTable||LQ}}function cme(u){if(typeof u!="object")return u;let o={};for(let i in u){let l=u[i];o[i]=l instanceof Array?l.slice():l}return o}const ooe=new WeakMap;class FQ extends hf{constructor(o){let i=zre(o.languageData),l=lme(o),d,m=new class extends RQ{createParse(p,v,x){return new dme(d,p,v,x)}};super(i,m,[Wre.of((p,v)=>this.getIndent(p,v))],o.name),this.topNode=mme(i),d=this,this.streamParser=l,this.stateAfter=new Gs({perNode:!0}),this.tokenTable=o.tokenTable?new uie(l.tokenTable):hme}static define(o){return new FQ(o)}getIndent(o,i){let l=jl(o.state),d=l.resolve(i);for(;d&&d.type!=this.topNode;)d=d.parent;if(!d)return null;let m,{overrideIndentation:p}=o.options;p&&(m=ooe.get(o.state),m!=null&&m<i-1e4&&(m=void 0));let v=IQ(this,l,0,d.from,m!=null?m:i),x,k;if(v?(k=v.state,x=v.pos+1):(k=this.streamParser.startState(o.unit),x=0),i-x>1e4)return null;for(;x<i;){let M=o.state.doc.lineAt(x),N=Math.min(i,M.to);if(M.length){let I=p?p(M.from):-1,z=new iie(M.text,o.state.tabSize,o.unit,I<0?void 0:I);for(;z.pos<N-M.from;)lie(this.streamParser.token,z,k)}else this.streamParser.blankLine(k,o.unit);if(N==i)break;x=M.to+1}let T=o.lineAt(i);return p&&m==null&&ooe.set(o.state,T.from),this.streamParser.indent(k,/^\s*(.*)/.exec(T.text)[1],o)}get allowsNesting(){return!1}}function IQ(u,o,i,l,d){let m=i>=l&&i+o.length<=d&&o.prop(u.stateAfter);if(m)return{state:u.streamParser.copyState(m),pos:i+o.length};for(let p=o.children.length-1;p>=0;p--){let v=o.children[p],x=i+o.positions[p],k=v instanceof ci&&x<d&&IQ(u,v,x,l,d);if(k)return k}return null}function aie(u,o,i,l,d){if(d&&i<=0&&l>=o.length)return o;!d&&o.type==u.topNode&&(d=!0);for(let m=o.children.length-1;m>=0;m--){let p=o.positions[m],v=o.children[m],x;if(p<l&&v instanceof ci){if(!(x=aie(u,v,i-p,l-p,d)))break;return d?new ci(o.type,o.children.slice(0,m).concat(x),o.positions.slice(0,m+1),p+x.length):x}}return null}function ume(u,o,i,l){for(let d of o){let m=d.from+(d.openStart?25:0),p=d.to-(d.openEnd?25:0),v=m<=i&&p>i&&IQ(u,d.tree,0-d.offset,i,p),x;if(v&&(x=aie(u,d.tree,i+d.offset,v.pos+d.offset,!1)))return{state:v.state,tree:x}}return{state:u.streamParser.startState(l?Ey(l):4),tree:ci.empty}}let dme=class{constructor(o,i,l,d){this.lang=o,this.input=i,this.fragments=l,this.ranges=d,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=d[d.length-1].to;let m=S2.get(),p=d[0].from,{state:v,tree:x}=ume(o,l,p,m==null?void 0:m.state);this.state=v,this.parsedPos=this.chunkStart=p+x.length;for(let k=0;k<x.children.length;k++)this.chunks.push(x.children[k]),this.chunkPos.push(x.positions[k]);m&&this.parsedPos<m.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Ey(m.state)),m.skipUntilInView(this.parsedPos,m.viewport.from),this.parsedPos=m.viewport.from),this.moveRangeIndex()}advance(){let o=S2.get(),i=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),l=Math.min(i,this.chunkStart+2048);for(o&&(l=Math.min(l,o.viewport.to));this.parsedPos<l;)this.parseLine(o);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=i?this.finish():o&&this.parsedPos>=o.viewport.to?(o.skipUntilInView(this.parsedPos,i),this.finish()):null}stopAt(o){this.stoppedAt=o}lineAfter(o){let i=this.input.chunk(o);if(this.input.lineChunks)i==`
`&&(i="");else{let l=i.indexOf(`
`);l>-1&&(i=i.slice(0,l))}return o+i.length<=this.to?i:i.slice(0,this.to-o)}nextLine(){let o=this.parsedPos,i=this.lineAfter(o),l=o+i.length;for(let d=this.rangeIndex;;){let m=this.ranges[d].to;if(m>=l||(i=i.slice(0,m-(l-i.length)),d++,d==this.ranges.length))break;let p=this.ranges[d].from,v=this.lineAfter(p);i+=v,l=p+v.length}return{line:i,end:l}}skipGapsTo(o,i,l){for(;;){let d=this.ranges[this.rangeIndex].to,m=o+i;if(l>0?d>m:d>=m)break;let p=this.ranges[++this.rangeIndex].from;i+=p-d}return i}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(o,i,l,d,m){if(this.ranges.length>1){m=this.skipGapsTo(i,m,1),i+=m;let p=this.chunk.length;m=this.skipGapsTo(l,m,-1),l+=m,d+=this.chunk.length-p}return this.chunk.push(o,i,l,d),m}parseLine(o){let{line:i,end:l}=this.nextLine(),d=0,{streamParser:m}=this.lang,p=new iie(i,o?o.state.tabSize:4,o?Ey(o.state):2);if(p.eol())m.blankLine(this.state,p.indentUnit);else for(;!p.eol();){let v=lie(m.token,p,this.state);if(v&&(d=this.emitToken(this.lang.tokenTable.resolve(v),this.parsedPos+p.start,this.parsedPos+p.pos,4,d)),p.start>1e4)break}this.parsedPos=l,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let o=ci.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:fme,topID:0,maxBufferLength:2048,reused:this.chunkReused});o=new ci(o.type,o.children,o.positions,o.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(o),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new ci(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}};function lie(u,o,i){o.start=o.pos;for(let l=0;l<10;l++){let d=u(o,i);if(o.pos>o.start)return d}throw new Error("Stream parser failed to advance stream.")}const LQ=Object.create(null),aM=[Jc.none],fme=new U6(aM),soe=[],roe=Object.create(null),cie=Object.create(null);for(let[u,o]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])cie[u]=die(LQ,o);class uie{constructor(o){this.extra=o,this.table=Object.assign(Object.create(null),cie)}resolve(o){return o?this.table[o]||(this.table[o]=die(this.extra,o)):0}}const hme=new uie(LQ);function tJ(u,o){soe.indexOf(u)>-1||soe.push(u)}function die(u,o){let i=[];for(let v of o.split(" ")){let x=[];for(let k of v.split(".")){let T=u[k]||Ft[k];T?typeof T=="function"?x.length?x=x.map(T):tJ(k,`Modifier ${k} used at start of tag`):x.length?tJ(k,`Tag ${k} used as modifier`):x=Array.isArray(T)?T:[T]:tJ(k,`Unknown highlighting tag ${k}`)}for(let k of x)i.push(k)}if(!i.length)return 0;let l=o.replace(/ /g,"_"),d=l+" "+i.map(v=>v.id),m=roe[d];if(m)return m.id;let p=roe[d]=Jc.define({id:aM.length,name:l,props:[$re({[l]:i})]});return aM.push(p),p.id}function mme(u){let o=Jc.define({id:aM.length,name:"Document",props:[hy.add(()=>u)],top:!0});return aM.push(o),o}Ni.RTL,Ni.LTR;const gme=u=>{let{state:o}=u,i=o.doc.lineAt(o.selection.main.from),l=HQ(u.state,i.from);return l.line?pme(u):l.block?vme(u):!1};function $Q(u,o){return({state:i,dispatch:l})=>{if(i.readOnly)return!1;let d=u(o,i);return d?(l(i.update(d)),!0):!1}}const pme=$Q(xme,0),bme=$Q(fie,0),vme=$Q((u,o)=>fie(u,o,wme(o)),0);function HQ(u,o){let i=u.languageDataAt("commentTokens",o);return i.length?i[0]:{}}const FD=50;function yme(u,{open:o,close:i},l,d){let m=u.sliceDoc(l-FD,l),p=u.sliceDoc(d,d+FD),v=/\s*$/.exec(m)[0].length,x=/^\s*/.exec(p)[0].length,k=m.length-v;if(m.slice(k-o.length,k)==o&&p.slice(x,x+i.length)==i)return{open:{pos:l-v,margin:v&&1},close:{pos:d+x,margin:x&&1}};let T,M;d-l<=2*FD?T=M=u.sliceDoc(l,d):(T=u.sliceDoc(l,l+FD),M=u.sliceDoc(d-FD,d));let N=/^\s*/.exec(T)[0].length,I=/\s*$/.exec(M)[0].length,z=M.length-I-i.length;return T.slice(N,N+o.length)==o&&M.slice(z,z+i.length)==i?{open:{pos:l+N+o.length,margin:/\s/.test(T.charAt(N+o.length))?1:0},close:{pos:d-I-i.length,margin:/\s/.test(M.charAt(z-1))?1:0}}:null}function wme(u){let o=[];for(let i of u.selection.ranges){let l=u.doc.lineAt(i.from),d=i.to<=l.to?l:u.doc.lineAt(i.to),m=o.length-1;m>=0&&o[m].to>l.from?o[m].to=d.to:o.push({from:l.from+/^\s*/.exec(l.text)[0].length,to:d.to})}return o}function fie(u,o,i=o.selection.ranges){let l=i.map(m=>HQ(o,m.from).block);if(!l.every(m=>m))return null;let d=i.map((m,p)=>yme(o,l[p],m.from,m.to));if(u!=2&&!d.every(m=>m))return{changes:o.changes(i.map((m,p)=>d[p]?[]:[{from:m.from,insert:l[p].open+" "},{from:m.to,insert:" "+l[p].close}]))};if(u!=1&&d.some(m=>m)){let m=[];for(let p=0,v;p<d.length;p++)if(v=d[p]){let x=l[p],{open:k,close:T}=v;m.push({from:k.pos-x.open.length,to:k.pos+k.margin},{from:T.pos-T.margin,to:T.pos+x.close.length})}return{changes:m}}return null}function xme(u,o,i=o.selection.ranges){let l=[],d=-1;for(let{from:m,to:p}of i){let v=l.length,x=1e9,k=HQ(o,m).line;if(k){for(let T=m;T<=p;){let M=o.doc.lineAt(T);if(M.from>d&&(m==p||p>M.from)){d=M.from;let N=/^\s*/.exec(M.text)[0].length,I=N==M.length,z=M.text.slice(N,N+k.length)==k?N:-1;N<M.text.length&&N<x&&(x=N),l.push({line:M,comment:z,token:k,indent:N,empty:I,single:!1})}T=M.to+1}if(x<1e9)for(let T=v;T<l.length;T++)l[T].indent<l[T].line.text.length&&(l[T].indent=x);l.length==v+1&&(l[v].single=!0)}}if(u!=2&&l.some(m=>m.comment<0&&(!m.empty||m.single))){let m=[];for(let{line:v,token:x,indent:k,empty:T,single:M}of l)(M||!T)&&m.push({from:v.from+k,insert:x+" "});let p=o.changes(m);return{changes:p,selection:o.selection.map(p,1)}}else if(u!=1&&l.some(m=>m.comment>=0)){let m=[];for(let{line:p,comment:v,token:x}of l)if(v>=0){let k=p.from+v,T=k+x.length;p.text[T-p.from]==" "&&T++,m.push({from:k,to:T})}return{changes:m}}return null}const nQ=Zg.define(),Cme=Zg.define(),Sme=Co.define(),hie=Co.define({combine(u){return xm(u,{minDepth:100,newGroupDelay:500,joinToEvent:(o,i)=>i},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(o,i)=>(l,d)=>o(l,d)||i(l,d)})}}),mie=Zl.define({create(){return ym.empty},update(u,o){let i=o.state.facet(hie),l=o.annotation(nQ);if(l){let x=Du.fromTransaction(o,l.selection),k=l.side,T=k==0?u.undone:u.done;return x?T=k6(T,T.length,i.minDepth,x):T=bie(T,o.startState.selection),new ym(k==0?l.rest:T,k==0?T:l.rest)}let d=o.annotation(Cme);if((d=="full"||d=="before")&&(u=u.isolate()),o.annotation(rl.addToHistory)===!1)return o.changes.empty?u:u.addMapping(o.changes.desc);let m=Du.fromTransaction(o),p=o.annotation(rl.time),v=o.annotation(rl.userEvent);return m?u=u.addChanges(m,p,v,i,o):o.selection&&(u=u.addSelection(o.startState.selection,p,v,i.newGroupDelay)),(d=="full"||d=="after")&&(u=u.isolate()),u},toJSON(u){return{done:u.done.map(o=>o.toJSON()),undone:u.undone.map(o=>o.toJSON())}},fromJSON(u){return new ym(u.done.map(Du.fromJSON),u.undone.map(Du.fromJSON))}});function kme(u={}){return[mie,hie.of(u),po.domEventHandlers({beforeinput(o,i){let l=o.inputType=="historyUndo"?gie:o.inputType=="historyRedo"?oQ:null;return l?(o.preventDefault(),l(i)):!1}})]}function q6(u,o){return function({state:i,dispatch:l}){if(!o&&i.readOnly)return!1;let d=i.field(mie,!1);if(!d)return!1;let m=d.pop(u,i,o);return m?(l(m),!0):!1}}const gie=q6(0,!1),oQ=q6(1,!1),Eme=q6(0,!0),Ame=q6(1,!0);class Du{constructor(o,i,l,d,m){this.changes=o,this.effects=i,this.mapped=l,this.startSelection=d,this.selectionsAfter=m}setSelAfter(o){return new Du(this.changes,this.effects,this.mapped,this.startSelection,o)}toJSON(){var o,i,l;return{changes:(o=this.changes)===null||o===void 0?void 0:o.toJSON(),mapped:(i=this.mapped)===null||i===void 0?void 0:i.toJSON(),startSelection:(l=this.startSelection)===null||l===void 0?void 0:l.toJSON(),selectionsAfter:this.selectionsAfter.map(d=>d.toJSON())}}static fromJSON(o){return new Du(o.changes&&sl.fromJSON(o.changes),[],o.mapped&&wm.fromJSON(o.mapped),o.startSelection&&rn.fromJSON(o.startSelection),o.selectionsAfter.map(rn.fromJSON))}static fromTransaction(o,i){let l=mf;for(let d of o.startState.facet(Sme)){let m=d(o);m.length&&(l=l.concat(m))}return!l.length&&o.changes.empty?null:new Du(o.changes.invert(o.startState.doc),l,void 0,i||o.startState.selection,mf)}static selection(o){return new Du(void 0,mf,void 0,void 0,o)}}function k6(u,o,i,l){let d=o+1>i+20?o-i-1:0,m=u.slice(d,o);return m.push(l),m}function Tme(u,o){let i=[],l=!1;return u.iterChangedRanges((d,m)=>i.push(d,m)),o.iterChangedRanges((d,m,p,v)=>{for(let x=0;x<i.length;){let k=i[x++],T=i[x++];v>=k&&p<=T&&(l=!0)}}),l}function Ome(u,o){return u.ranges.length==o.ranges.length&&u.ranges.filter((i,l)=>i.empty!=o.ranges[l].empty).length===0}function pie(u,o){return u.length?o.length?u.concat(o):u:o}const mf=[],_me=200;function bie(u,o){if(u.length){let i=u[u.length-1],l=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-_me));return l.length&&l[l.length-1].eq(o)?u:(l.push(o),k6(u,u.length-1,1e9,i.setSelAfter(l)))}else return[Du.selection([o])]}function Dme(u){let o=u[u.length-1],i=u.slice();return i[u.length-1]=o.setSelAfter(o.selectionsAfter.slice(0,o.selectionsAfter.length-1)),i}function nJ(u,o){if(!u.length)return u;let i=u.length,l=mf;for(;i;){let d=Mme(u[i-1],o,l);if(d.changes&&!d.changes.empty||d.effects.length){let m=u.slice(0,i);return m[i-1]=d,m}else o=d.mapped,i--,l=d.selectionsAfter}return l.length?[Du.selection(l)]:mf}function Mme(u,o,i){let l=pie(u.selectionsAfter.length?u.selectionsAfter.map(v=>v.map(o)):mf,i);if(!u.changes)return Du.selection(l);let d=u.changes.map(o),m=o.mapDesc(u.changes,!0),p=u.mapped?u.mapped.composeDesc(m):m;return new Du(d,Fs.mapEffects(u.effects,o),p,u.startSelection.map(m),l)}const Pme=/^(input\.type|delete)($|\.)/;class ym{constructor(o,i,l=0,d=void 0){this.done=o,this.undone=i,this.prevTime=l,this.prevUserEvent=d}isolate(){return this.prevTime?new ym(this.done,this.undone):this}addChanges(o,i,l,d,m){let p=this.done,v=p[p.length-1];return v&&v.changes&&!v.changes.empty&&o.changes&&(!l||Pme.test(l))&&(!v.selectionsAfter.length&&i-this.prevTime<d.newGroupDelay&&d.joinToEvent(m,Tme(v.changes,o.changes))||l=="input.type.compose")?p=k6(p,p.length-1,d.minDepth,new Du(o.changes.compose(v.changes),pie(Fs.mapEffects(o.effects,v.changes),v.effects),v.mapped,v.startSelection,mf)):p=k6(p,p.length,d.minDepth,o),new ym(p,mf,i,l)}addSelection(o,i,l,d){let m=this.done.length?this.done[this.done.length-1].selectionsAfter:mf;return m.length>0&&i-this.prevTime<d&&l==this.prevUserEvent&&l&&/^select($|\.)/.test(l)&&Ome(m[m.length-1],o)?this:new ym(bie(this.done,o),this.undone,i,l)}addMapping(o){return new ym(nJ(this.done,o),nJ(this.undone,o),this.prevTime,this.prevUserEvent)}pop(o,i,l){let d=o==0?this.done:this.undone;if(d.length==0)return null;let m=d[d.length-1],p=m.selectionsAfter[0]||i.selection;if(l&&m.selectionsAfter.length)return i.update({selection:m.selectionsAfter[m.selectionsAfter.length-1],annotations:nQ.of({side:o,rest:Dme(d),selection:p}),userEvent:o==0?"select.undo":"select.redo",scrollIntoView:!0});if(m.changes){let v=d.length==1?mf:d.slice(0,d.length-1);return m.mapped&&(v=nJ(v,m.mapped)),i.update({changes:m.changes,selection:m.startSelection,effects:m.effects,annotations:nQ.of({side:o,rest:v,selection:p}),filter:!1,userEvent:o==0?"undo":"redo",scrollIntoView:!0})}else return null}}ym.empty=new ym(mf,mf);const Rme=[{key:"Mod-z",run:gie,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:oQ,preventDefault:!0},{linux:"Ctrl-Shift-z",run:oQ,preventDefault:!0},{key:"Mod-u",run:Eme,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ame,preventDefault:!0}];function R2(u,o){return rn.create(u.ranges.map(o),u.mainIndex)}function Cm(u,o){return u.update({selection:o,scrollIntoView:!0,userEvent:"select"})}function gh({state:u,dispatch:o},i){let l=R2(u.selection,i);return l.eq(u.selection,!0)?!1:(o(Cm(u,l)),!0)}function G6(u,o){return rn.cursor(o?u.to:u.from)}function vie(u,o){return gh(u,i=>i.empty?u.moveByChar(i,o):G6(i,o))}function Ec(u){return u.textDirectionAt(u.state.selection.main.head)==Ni.LTR}const yie=u=>vie(u,!Ec(u)),wie=u=>vie(u,Ec(u));function xie(u,o){return gh(u,i=>i.empty?u.moveByGroup(i,o):G6(i,o))}const Nme=u=>xie(u,!Ec(u)),Bme=u=>xie(u,Ec(u));function Fme(u,o,i){if(o.type.prop(i))return!0;let l=o.to-o.from;return l&&(l>2||/[^\s,.;:]/.test(u.sliceDoc(o.from,o.to)))||o.firstChild}function K6(u,o,i){let l=jl(u).resolveInner(o.head),d=i?Gs.closedBy:Gs.openedBy;for(let x=o.head;;){let k=i?l.childAfter(x):l.childBefore(x);if(!k)break;Fme(u,k,d)?l=k:x=i?k.to:k.from}let m=l.type.prop(d),p,v;return m&&(p=i?vm(u,l.from,1):vm(u,l.to,-1))&&p.matched?v=i?p.end.to:p.end.from:v=i?l.to:l.from,rn.cursor(v,i?-1:1)}const Ime=u=>gh(u,o=>K6(u.state,o,!Ec(u))),Lme=u=>gh(u,o=>K6(u.state,o,Ec(u)));function Cie(u,o){return gh(u,i=>{if(!i.empty)return G6(i,o);let l=u.moveVertically(i,o);return l.head!=i.head?l:u.moveToLineBoundary(i,o)})}const Sie=u=>Cie(u,!1),kie=u=>Cie(u,!0);function Eie(u){let o=u.scrollDOM.clientHeight<u.scrollDOM.scrollHeight-2,i=0,l=0,d;if(o){for(let m of u.state.facet(po.scrollMargins)){let p=m(u);p!=null&&p.top&&(i=Math.max(p==null?void 0:p.top,i)),p!=null&&p.bottom&&(l=Math.max(p==null?void 0:p.bottom,l))}d=u.scrollDOM.clientHeight-i-l}else d=(u.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:i,marginBottom:l,selfScroll:o,height:Math.max(u.defaultLineHeight,d-5)}}function Aie(u,o){let i=Eie(u),{state:l}=u,d=R2(l.selection,p=>p.empty?u.moveVertically(p,o,i.height):G6(p,o));if(d.eq(l.selection))return!1;let m;if(i.selfScroll){let p=u.coordsAtPos(l.selection.main.head),v=u.scrollDOM.getBoundingClientRect(),x=v.top+i.marginTop,k=v.bottom-i.marginBottom;p&&p.top>x&&p.bottom<k&&(m=po.scrollIntoView(d.main.head,{y:"start",yMargin:p.top-x}))}return u.dispatch(Cm(l,d),{effects:m}),!0}const ioe=u=>Aie(u,!1),sQ=u=>Aie(u,!0);function g0(u,o,i){let l=u.lineBlockAt(o.head),d=u.moveToLineBoundary(o,i);if(d.head==o.head&&d.head!=(i?l.to:l.from)&&(d=u.moveToLineBoundary(o,i,!1)),!i&&d.head==l.from&&l.length){let m=/^\s*/.exec(u.state.sliceDoc(l.from,Math.min(l.from+100,l.to)))[0].length;m&&o.head!=l.from+m&&(d=rn.cursor(l.from+m))}return d}const $me=u=>gh(u,o=>g0(u,o,!0)),Hme=u=>gh(u,o=>g0(u,o,!1)),Vme=u=>gh(u,o=>g0(u,o,!Ec(u))),zme=u=>gh(u,o=>g0(u,o,Ec(u))),Ume=u=>gh(u,o=>rn.cursor(u.lineBlockAt(o.head).from,1)),Wme=u=>gh(u,o=>rn.cursor(u.lineBlockAt(o.head).to,-1));function jme(u,o,i){let l=!1,d=R2(u.selection,m=>{let p=vm(u,m.head,-1)||vm(u,m.head,1)||m.head>0&&vm(u,m.head-1,1)||m.head<u.doc.length&&vm(u,m.head+1,-1);if(!p||!p.end)return m;l=!0;let v=p.start.from==m.head?p.end.to:p.end.from;return rn.cursor(v)});return l?(o(Cm(u,d)),!0):!1}const Zme=({state:u,dispatch:o})=>jme(u,o);function wf(u,o){let i=R2(u.state.selection,l=>{let d=o(l);return rn.range(l.anchor,d.head,d.goalColumn,d.bidiLevel||void 0)});return i.eq(u.state.selection)?!1:(u.dispatch(Cm(u.state,i)),!0)}function Tie(u,o){return wf(u,i=>u.moveByChar(i,o))}const Oie=u=>Tie(u,!Ec(u)),_ie=u=>Tie(u,Ec(u));function Die(u,o){return wf(u,i=>u.moveByGroup(i,o))}const qme=u=>Die(u,!Ec(u)),Gme=u=>Die(u,Ec(u)),Kme=u=>wf(u,o=>K6(u.state,o,!Ec(u))),Yme=u=>wf(u,o=>K6(u.state,o,Ec(u)));function Mie(u,o){return wf(u,i=>u.moveVertically(i,o))}const Pie=u=>Mie(u,!1),Rie=u=>Mie(u,!0);function Nie(u,o){return wf(u,i=>u.moveVertically(i,o,Eie(u).height))}const aoe=u=>Nie(u,!1),loe=u=>Nie(u,!0),Xme=u=>wf(u,o=>g0(u,o,!0)),Jme=u=>wf(u,o=>g0(u,o,!1)),Qme=u=>wf(u,o=>g0(u,o,!Ec(u))),ege=u=>wf(u,o=>g0(u,o,Ec(u))),tge=u=>wf(u,o=>rn.cursor(u.lineBlockAt(o.head).from)),nge=u=>wf(u,o=>rn.cursor(u.lineBlockAt(o.head).to)),coe=({state:u,dispatch:o})=>(o(Cm(u,{anchor:0})),!0),uoe=({state:u,dispatch:o})=>(o(Cm(u,{anchor:u.doc.length})),!0),doe=({state:u,dispatch:o})=>(o(Cm(u,{anchor:u.selection.main.anchor,head:0})),!0),foe=({state:u,dispatch:o})=>(o(Cm(u,{anchor:u.selection.main.anchor,head:u.doc.length})),!0),oge=({state:u,dispatch:o})=>(o(u.update({selection:{anchor:0,head:u.doc.length},userEvent:"select"})),!0),sge=({state:u,dispatch:o})=>{let i=Y6(u).map(({from:l,to:d})=>rn.range(l,Math.min(d+1,u.doc.length)));return o(u.update({selection:rn.create(i),userEvent:"select"})),!0},rge=({state:u,dispatch:o})=>{let i=R2(u.selection,l=>{var d;let m=jl(u).resolveStack(l.from,1);for(let p=m;p;p=p.next){let{node:v}=p;if((v.from<l.from&&v.to>=l.to||v.to>l.to&&v.from<=l.from)&&(!((d=v.parent)===null||d===void 0)&&d.parent))return rn.range(v.to,v.from)}return l});return o(Cm(u,i)),!0},ige=({state:u,dispatch:o})=>{let i=u.selection,l=null;return i.ranges.length>1?l=rn.create([i.main]):i.main.empty||(l=rn.create([rn.cursor(i.main.head)])),l?(o(Cm(u,l)),!0):!1};function CM(u,o){if(u.state.readOnly)return!1;let i="delete.selection",{state:l}=u,d=l.changeByRange(m=>{let{from:p,to:v}=m;if(p==v){let x=o(m);x<p?(i="delete.backward",x=$$(u,x,!1)):x>p&&(i="delete.forward",x=$$(u,x,!0)),p=Math.min(p,x),v=Math.max(v,x)}else p=$$(u,p,!1),v=$$(u,v,!0);return p==v?{range:m}:{changes:{from:p,to:v},range:rn.cursor(p,p<m.head?-1:1)}});return d.changes.empty?!1:(u.dispatch(l.update(d,{scrollIntoView:!0,userEvent:i,effects:i=="delete.selection"?po.announce.of(l.phrase("Selection deleted")):void 0})),!0)}function $$(u,o,i){if(u instanceof po)for(let l of u.state.facet(po.atomicRanges).map(d=>d(u)))l.between(o,o,(d,m)=>{d<o&&m>o&&(o=i?m:d)});return o}const Bie=(u,o,i)=>CM(u,l=>{let d=l.from,{state:m}=u,p=m.doc.lineAt(d),v,x;if(i&&!o&&d>p.from&&d<p.from+200&&!/[^ \t]/.test(v=p.text.slice(0,d-p.from))){if(v[v.length-1]=="	")return d-1;let k=P2(v,m.tabSize),T=k%Ey(m)||Ey(m);for(let M=0;M<T&&v[v.length-1-M]==" ";M++)d--;x=d}else x=Wl(p.text,d-p.from,o,o)+p.from,x==d&&p.number!=(o?m.doc.lines:1)?x+=o?1:-1:!o&&/[\ufe00-\ufe0f]/.test(p.text.slice(x-p.from,d-p.from))&&(x=Wl(p.text,x-p.from,!1,!1)+p.from);return x}),rQ=u=>Bie(u,!1,!0),Fie=u=>Bie(u,!0,!1),Iie=(u,o)=>CM(u,i=>{let l=i.head,{state:d}=u,m=d.doc.lineAt(l),p=d.charCategorizer(l);for(let v=null;;){if(l==(o?m.to:m.from)){l==i.head&&m.number!=(o?d.doc.lines:1)&&(l+=o?1:-1);break}let x=Wl(m.text,l-m.from,o)+m.from,k=m.text.slice(Math.min(l,x)-m.from,Math.max(l,x)-m.from),T=p(k);if(v!=null&&T!=v)break;(k!=" "||l!=i.head)&&(v=T),l=x}return l}),Lie=u=>Iie(u,!1),age=u=>Iie(u,!0),lge=u=>CM(u,o=>{let i=u.lineBlockAt(o.head).to;return o.head<i?i:Math.min(u.state.doc.length,o.head+1)}),cge=u=>CM(u,o=>{let i=u.moveToLineBoundary(o,!1).head;return o.head>i?i:Math.max(0,o.head-1)}),uge=u=>CM(u,o=>{let i=u.moveToLineBoundary(o,!0).head;return o.head<i?i:Math.min(u.state.doc.length,o.head+1)}),dge=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let i=u.changeByRange(l=>({changes:{from:l.from,to:l.to,insert:Or.of(["",""])},range:rn.cursor(l.from)}));return o(u.update(i,{scrollIntoView:!0,userEvent:"input"})),!0},fge=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let i=u.changeByRange(l=>{if(!l.empty||l.from==0||l.from==u.doc.length)return{range:l};let d=l.from,m=u.doc.lineAt(d),p=d==m.from?d-1:Wl(m.text,d-m.from,!1)+m.from,v=d==m.to?d+1:Wl(m.text,d-m.from,!0)+m.from;return{changes:{from:p,to:v,insert:u.doc.slice(d,v).append(u.doc.slice(p,d))},range:rn.cursor(v)}});return i.changes.empty?!1:(o(u.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Y6(u){let o=[],i=-1;for(let l of u.selection.ranges){let d=u.doc.lineAt(l.from),m=u.doc.lineAt(l.to);if(!l.empty&&l.to==m.from&&(m=u.doc.lineAt(l.to-1)),i>=d.number){let p=o[o.length-1];p.to=m.to,p.ranges.push(l)}else o.push({from:d.from,to:m.to,ranges:[l]});i=m.number+1}return o}function $ie(u,o,i){if(u.readOnly)return!1;let l=[],d=[];for(let m of Y6(u)){if(i?m.to==u.doc.length:m.from==0)continue;let p=u.doc.lineAt(i?m.to+1:m.from-1),v=p.length+1;if(i){l.push({from:m.to,to:p.to},{from:m.from,insert:p.text+u.lineBreak});for(let x of m.ranges)d.push(rn.range(Math.min(u.doc.length,x.anchor+v),Math.min(u.doc.length,x.head+v)))}else{l.push({from:p.from,to:m.from},{from:m.to,insert:u.lineBreak+p.text});for(let x of m.ranges)d.push(rn.range(x.anchor-v,x.head-v))}}return l.length?(o(u.update({changes:l,scrollIntoView:!0,selection:rn.create(d,u.selection.mainIndex),userEvent:"move.line"})),!0):!1}const hge=({state:u,dispatch:o})=>$ie(u,o,!1),mge=({state:u,dispatch:o})=>$ie(u,o,!0);function Hie(u,o,i){if(u.readOnly)return!1;let l=[];for(let d of Y6(u))i?l.push({from:d.from,insert:u.doc.slice(d.from,d.to)+u.lineBreak}):l.push({from:d.to,insert:u.lineBreak+u.doc.slice(d.from,d.to)});return o(u.update({changes:l,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const gge=({state:u,dispatch:o})=>Hie(u,o,!1),pge=({state:u,dispatch:o})=>Hie(u,o,!0),bge=u=>{if(u.state.readOnly)return!1;let{state:o}=u,i=o.changes(Y6(o).map(({from:d,to:m})=>(d>0?d--:m<o.doc.length&&m++,{from:d,to:m}))),l=R2(o.selection,d=>{let m;if(u.lineWrapping){let p=u.lineBlockAt(d.head),v=u.coordsAtPos(d.head,d.assoc||1);v&&(m=p.bottom+u.documentTop-v.bottom+u.defaultLineHeight/2)}return u.moveVertically(d,!0,m)}).map(i);return u.dispatch({changes:i,selection:l,scrollIntoView:!0,userEvent:"delete.line"}),!0};function vge(u,o){if(/\(\)|\[\]|\{\}/.test(u.sliceDoc(o-1,o+1)))return{from:o,to:o};let i=jl(u).resolveInner(o),l=i.childBefore(o),d=i.childAfter(o),m;return l&&d&&l.to<=o&&d.from>=o&&(m=l.type.prop(Gs.closedBy))&&m.indexOf(d.name)>-1&&u.doc.lineAt(l.to).from==u.doc.lineAt(d.from).from&&!/\S/.test(u.sliceDoc(l.to,d.from))?{from:l.to,to:d.from}:null}const yge=Vie(!1),wge=Vie(!0);function Vie(u){return({state:o,dispatch:i})=>{if(o.readOnly)return!1;let l=o.changeByRange(d=>{let{from:m,to:p}=d,v=o.doc.lineAt(m),x=!u&&m==p&&vge(o,m);u&&(m=p=(p<=v.to?v:o.doc.lineAt(p)).to);let k=new j6(o,{simulateBreak:m,simulateDoubleBreak:!!x}),T=NQ(k,m);for(T==null&&(T=P2(/^\s*/.exec(o.doc.lineAt(m).text)[0],o.tabSize));p<v.to&&/\s/.test(v.text[p-v.from]);)p++;x?{from:m,to:p}=x:m>v.from&&m<v.from+100&&!/\S/.test(v.text.slice(0,m))&&(m=v.from);let M=["",iM(o,T)];return x&&M.push(iM(o,k.lineIndent(v.from,-1))),{changes:{from:m,to:p,insert:Or.of(M)},range:rn.cursor(m+1+M[1].length)}});return i(o.update(l,{scrollIntoView:!0,userEvent:"input"})),!0}}function VQ(u,o){let i=-1;return u.changeByRange(l=>{let d=[];for(let p=l.from;p<=l.to;){let v=u.doc.lineAt(p);v.number>i&&(l.empty||l.to>v.from)&&(o(v,d,l),i=v.number),p=v.to+1}let m=u.changes(d);return{changes:d,range:rn.range(m.mapPos(l.anchor,1),m.mapPos(l.head,1))}})}const xge=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let i=Object.create(null),l=new j6(u,{overrideIndentation:m=>{let p=i[m];return p==null?-1:p}}),d=VQ(u,(m,p,v)=>{let x=NQ(l,m.from);if(x==null)return;/\S/.test(m.text)||(x=0);let k=/^\s*/.exec(m.text)[0],T=iM(u,x);(k!=T||v.from<m.from+k.length)&&(i[m.from]=x,p.push({from:m.from,to:m.from+k.length,insert:T}))});return d.changes.empty||o(u.update(d,{userEvent:"indent"})),!0},zie=({state:u,dispatch:o})=>u.readOnly?!1:(o(u.update(VQ(u,(i,l)=>{l.push({from:i.from,insert:u.facet(W6)})}),{userEvent:"input.indent"})),!0),Uie=({state:u,dispatch:o})=>u.readOnly?!1:(o(u.update(VQ(u,(i,l)=>{let d=/^\s*/.exec(i.text)[0];if(!d)return;let m=P2(d,u.tabSize),p=0,v=iM(u,Math.max(0,m-Ey(u)));for(;p<d.length&&p<v.length&&d.charCodeAt(p)==v.charCodeAt(p);)p++;l.push({from:i.from+p,to:i.from+d.length,insert:v.slice(p)})}),{userEvent:"delete.dedent"})),!0),Cge=u=>(u.setTabFocusMode(),!0),Sge=[{key:"Ctrl-b",run:yie,shift:Oie,preventDefault:!0},{key:"Ctrl-f",run:wie,shift:_ie},{key:"Ctrl-p",run:Sie,shift:Pie},{key:"Ctrl-n",run:kie,shift:Rie},{key:"Ctrl-a",run:Ume,shift:tge},{key:"Ctrl-e",run:Wme,shift:nge},{key:"Ctrl-d",run:Fie},{key:"Ctrl-h",run:rQ},{key:"Ctrl-k",run:lge},{key:"Ctrl-Alt-h",run:Lie},{key:"Ctrl-o",run:dge},{key:"Ctrl-t",run:fge},{key:"Ctrl-v",run:sQ}],kge=[{key:"ArrowLeft",run:yie,shift:Oie,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Nme,shift:qme,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Vme,shift:Qme,preventDefault:!0},{key:"ArrowRight",run:wie,shift:_ie,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Bme,shift:Gme,preventDefault:!0},{mac:"Cmd-ArrowRight",run:zme,shift:ege,preventDefault:!0},{key:"ArrowUp",run:Sie,shift:Pie,preventDefault:!0},{mac:"Cmd-ArrowUp",run:coe,shift:doe},{mac:"Ctrl-ArrowUp",run:ioe,shift:aoe},{key:"ArrowDown",run:kie,shift:Rie,preventDefault:!0},{mac:"Cmd-ArrowDown",run:uoe,shift:foe},{mac:"Ctrl-ArrowDown",run:sQ,shift:loe},{key:"PageUp",run:ioe,shift:aoe},{key:"PageDown",run:sQ,shift:loe},{key:"Home",run:Hme,shift:Jme,preventDefault:!0},{key:"Mod-Home",run:coe,shift:doe},{key:"End",run:$me,shift:Xme,preventDefault:!0},{key:"Mod-End",run:uoe,shift:foe},{key:"Enter",run:yge},{key:"Mod-a",run:oge},{key:"Backspace",run:rQ,shift:rQ},{key:"Delete",run:Fie},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Lie},{key:"Mod-Delete",mac:"Alt-Delete",run:age},{mac:"Mod-Backspace",run:cge},{mac:"Mod-Delete",run:uge}].concat(Sge.map(u=>({mac:u.key,run:u.run,shift:u.shift}))),Ege=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ime,shift:Kme},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Lme,shift:Yme},{key:"Alt-ArrowUp",run:hge},{key:"Shift-Alt-ArrowUp",run:gge},{key:"Alt-ArrowDown",run:mge},{key:"Shift-Alt-ArrowDown",run:pge},{key:"Escape",run:ige},{key:"Mod-Enter",run:wge},{key:"Alt-l",mac:"Ctrl-l",run:sge},{key:"Mod-i",run:rge,preventDefault:!0},{key:"Mod-[",run:Uie},{key:"Mod-]",run:zie},{key:"Mod-Alt-\\",run:xge},{key:"Shift-Mod-k",run:bge},{key:"Shift-Mod-\\",run:Zme},{key:"Mod-/",run:gme},{key:"Alt-A",run:bme},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Cge}].concat(kge),Age={key:"Tab",run:zie,shift:Uie};function Si(){var u=arguments[0];typeof u=="string"&&(u=document.createElement(u));var o=1,i=arguments[1];if(i&&typeof i=="object"&&i.nodeType==null&&!Array.isArray(i)){for(var l in i)if(Object.prototype.hasOwnProperty.call(i,l)){var d=i[l];typeof d=="string"?u.setAttribute(l,d):d!=null&&(u[l]=d)}o++}for(;o<arguments.length;o++)Wie(u,arguments[o]);return u}function Wie(u,o){if(typeof o=="string")u.appendChild(document.createTextNode(o));else if(o!=null)if(o.nodeType!=null)u.appendChild(o);else if(Array.isArray(o))for(var i=0;i<o.length;i++)Wie(u,o[i]);else throw new RangeError("Unsupported child node: "+o)}const hoe=typeof String.prototype.normalize=="function"?u=>u.normalize("NFKD"):u=>u;class E2{constructor(o,i,l=0,d=o.length,m,p){this.test=p,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=o.iterRange(l,d),this.bufferStart=l,this.normalize=m?v=>m(hoe(v)):hoe,this.query=this.normalize(i)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Hl(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let o=this.peek();if(o<0)return this.done=!0,this;let i=gQ(o),l=this.bufferStart+this.bufferPos;this.bufferPos+=df(o);let d=this.normalize(i);for(let m=0,p=l;;m++){let v=d.charCodeAt(m),x=this.match(v,p,this.bufferPos+this.bufferStart);if(m==d.length-1){if(x)return this.value=x,this;break}p==l&&m<i.length&&i.charCodeAt(m)==v&&p++}}}match(o,i,l){let d=null;for(let m=0;m<this.matches.length;m+=2){let p=this.matches[m],v=!1;this.query.charCodeAt(p)==o&&(p==this.query.length-1?d={from:this.matches[m+1],to:l}:(this.matches[m]++,v=!0)),v||(this.matches.splice(m,2),m-=2)}return this.query.charCodeAt(0)==o&&(this.query.length==1?d={from:i,to:l}:this.matches.push(1,i)),d&&this.test&&!this.test(d.from,d.to,this.buffer,this.bufferStart)&&(d=null),d}}typeof Symbol!="undefined"&&(E2.prototype[Symbol.iterator]=function(){return this});const jie={from:-1,to:-1,match:/.*/.exec("")},zQ="gm"+(/x/.unicode==null?"":"u");class Zie{constructor(o,i,l,d=0,m=o.length){if(this.text=o,this.to=m,this.curLine="",this.done=!1,this.value=jie,/\\[sWDnr]|\n|\r|\[\^/.test(i))return new qie(o,i,l,d,m);this.re=new RegExp(i,zQ+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.iter=o.iter();let p=o.lineAt(d);this.curLineStart=p.from,this.matchPos=E6(o,d),this.getLine(this.curLineStart)}getLine(o){this.iter.next(o),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let o=this.matchPos-this.curLineStart;;){this.re.lastIndex=o;let i=this.matchPos<=this.to&&this.re.exec(this.curLine);if(i){let l=this.curLineStart+i.index,d=l+i[0].length;if(this.matchPos=E6(this.text,d+(l==d?1:0)),l==this.curLineStart+this.curLine.length&&this.nextLine(),(l<d||l>this.value.to)&&(!this.test||this.test(l,d,i)))return this.value={from:l,to:d,match:i},this;o=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),o=0;else return this.done=!0,this}}}const oJ=new WeakMap;class g2{constructor(o,i){this.from=o,this.text=i}get to(){return this.from+this.text.length}static get(o,i,l){let d=oJ.get(o);if(!d||d.from>=l||d.to<=i){let v=new g2(i,o.sliceString(i,l));return oJ.set(o,v),v}if(d.from==i&&d.to==l)return d;let{text:m,from:p}=d;return p>i&&(m=o.sliceString(i,p)+m,p=i),d.to<l&&(m+=o.sliceString(d.to,l)),oJ.set(o,new g2(p,m)),new g2(i,m.slice(i-p,l-p))}}class qie{constructor(o,i,l,d,m){this.text=o,this.to=m,this.done=!1,this.value=jie,this.matchPos=E6(o,d),this.re=new RegExp(i,zQ+(l!=null&&l.ignoreCase?"i":"")),this.test=l==null?void 0:l.test,this.flat=g2.get(o,d,this.chunkEnd(d+5e3))}chunkEnd(o){return o>=this.to?this.to:this.text.lineAt(o).to}next(){for(;;){let o=this.re.lastIndex=this.matchPos-this.flat.from,i=this.re.exec(this.flat.text);if(i&&!i[0]&&i.index==o&&(this.re.lastIndex=o+1,i=this.re.exec(this.flat.text)),i){let l=this.flat.from+i.index,d=l+i[0].length;if((this.flat.to>=this.to||i.index+i[0].length<=this.flat.text.length-10)&&(!this.test||this.test(l,d,i)))return this.value={from:l,to:d,match:i},this.matchPos=E6(this.text,d+(l==d?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=g2.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(Zie.prototype[Symbol.iterator]=qie.prototype[Symbol.iterator]=function(){return this});function Tge(u){try{return new RegExp(u,zQ),!0}catch(o){return!1}}function E6(u,o){if(o>=u.length)return o;let i=u.lineAt(o),l;for(;o<i.to&&(l=i.text.charCodeAt(o-i.from))>=56320&&l<57344;)o++;return o}function iQ(u){let o=String(u.state.doc.lineAt(u.state.selection.main.head).number),i=Si("input",{class:"cm-textfield",name:"line",value:o}),l=Si("form",{class:"cm-gotoLine",onkeydown:m=>{m.keyCode==27?(m.preventDefault(),u.dispatch({effects:A6.of(!1)}),u.focus()):m.keyCode==13&&(m.preventDefault(),d())},onsubmit:m=>{m.preventDefault(),d()}},Si("label",u.state.phrase("Go to line"),": ",i)," ",Si("button",{class:"cm-button",type:"submit"},u.state.phrase("go")));function d(){let m=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(i.value);if(!m)return;let{state:p}=u,v=p.doc.lineAt(p.selection.main.head),[,x,k,T,M]=m,N=T?+T.slice(1):0,I=k?+k:v.number;if(k&&M){let J=I/100;x&&(J=J*(x=="-"?-1:1)+v.number/p.doc.lines),I=Math.round(p.doc.lines*J)}else k&&x&&(I=I*(x=="-"?-1:1)+v.number);let z=p.doc.line(Math.max(1,Math.min(p.doc.lines,I))),Y=rn.cursor(z.from+Math.max(0,Math.min(N,z.length)));u.dispatch({effects:[A6.of(!1),po.scrollIntoView(Y.from,{y:"center"})],selection:Y}),u.focus()}return{dom:l}}const A6=Fs.define(),moe=Zl.define({create(){return!0},update(u,o){for(let i of o.effects)i.is(A6)&&(u=i.value);return u},provide:u=>sM.from(u,o=>o?iQ:null)}),Oge=u=>{let o=oM(u,iQ);if(!o){let i=[A6.of(!0)];u.state.field(moe,!1)==null&&i.push(Fs.appendConfig.of([moe,_ge])),u.dispatch({effects:i}),o=oM(u,iQ)}return o&&o.dom.querySelector("input").select(),!0},_ge=po.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Dge={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Mge=Co.define({combine(u){return xm(u,Dge,{highlightWordAroundCursor:(o,i)=>o||i,minSelectionLength:Math.min,maxMatches:Math.min})}});function Pge(u){return[Ige,Fge]}const Rge=Zo.mark({class:"cm-selectionMatch"}),Nge=Zo.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function goe(u,o,i,l){return(i==0||u(o.sliceDoc(i-1,i))!=zi.Word)&&(l==o.doc.length||u(o.sliceDoc(l,l+1))!=zi.Word)}function Bge(u,o,i,l){return u(o.sliceDoc(i,i+1))==zi.Word&&u(o.sliceDoc(l-1,l))==zi.Word}const Fge=Ta.fromClass(class{constructor(u){this.decorations=this.getDeco(u)}update(u){(u.selectionSet||u.docChanged||u.viewportChanged)&&(this.decorations=this.getDeco(u.view))}getDeco(u){let o=u.state.facet(Mge),{state:i}=u,l=i.selection;if(l.ranges.length>1)return Zo.none;let d=l.main,m,p=null;if(d.empty){if(!o.highlightWordAroundCursor)return Zo.none;let x=i.wordAt(d.head);if(!x)return Zo.none;p=i.charCategorizer(d.head),m=i.sliceDoc(x.from,x.to)}else{let x=d.to-d.from;if(x<o.minSelectionLength||x>200)return Zo.none;if(o.wholeWords){if(m=i.sliceDoc(d.from,d.to),p=i.charCategorizer(d.head),!(goe(p,i,d.from,d.to)&&Bge(p,i,d.from,d.to)))return Zo.none}else if(m=i.sliceDoc(d.from,d.to),!m)return Zo.none}let v=[];for(let x of u.visibleRanges){let k=new E2(i.doc,m,x.from,x.to);for(;!k.next().done;){let{from:T,to:M}=k.value;if((!p||goe(p,i,T,M))&&(d.empty&&T<=d.from&&M>=d.to?v.push(Nge.range(T,M)):(T>=d.to||M<=d.from)&&v.push(Rge.range(T,M)),v.length>o.maxMatches))return Zo.none}}return Zo.set(v)}},{decorations:u=>u.decorations}),Ige=po.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Lge=({state:u,dispatch:o})=>{let{selection:i}=u,l=rn.create(i.ranges.map(d=>u.wordAt(d.head)||rn.cursor(d.head)),i.mainIndex);return l.eq(i)?!1:(o(u.update({selection:l})),!0)};function $ge(u,o){let{main:i,ranges:l}=u.selection,d=u.wordAt(i.head),m=d&&d.from==i.from&&d.to==i.to;for(let p=!1,v=new E2(u.doc,o,l[l.length-1].to);;)if(v.next(),v.done){if(p)return null;v=new E2(u.doc,o,0,Math.max(0,l[l.length-1].from-1)),p=!0}else{if(p&&l.some(x=>x.from==v.value.from))continue;if(m){let x=u.wordAt(v.value.from);if(!x||x.from!=v.value.from||x.to!=v.value.to)continue}return v.value}}const Hge=({state:u,dispatch:o})=>{let{ranges:i}=u.selection;if(i.some(m=>m.from===m.to))return Lge({state:u,dispatch:o});let l=u.sliceDoc(i[0].from,i[0].to);if(u.selection.ranges.some(m=>u.sliceDoc(m.from,m.to)!=l))return!1;let d=$ge(u,l);return d?(o(u.update({selection:u.selection.addRange(rn.range(d.from,d.to),!1),effects:po.scrollIntoView(d.to)})),!0):!1},N2=Co.define({combine(u){return xm(u,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:o=>new Jge(o),scrollToMatch:o=>po.scrollIntoView(o)})}});class Gie{constructor(o){this.search=o.search,this.caseSensitive=!!o.caseSensitive,this.literal=!!o.literal,this.regexp=!!o.regexp,this.replace=o.replace||"",this.valid=!!this.search&&(!this.regexp||Tge(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!o.wholeWord}unquote(o){return this.literal?o:o.replace(/\\([nrt\\])/g,(i,l)=>l=="n"?`
`:l=="r"?"\r":l=="t"?"	":"\\")}eq(o){return this.search==o.search&&this.replace==o.replace&&this.caseSensitive==o.caseSensitive&&this.regexp==o.regexp&&this.wholeWord==o.wholeWord}create(){return this.regexp?new Wge(this):new zge(this)}getCursor(o,i=0,l){let d=o.doc?o:lr.create({doc:o});return l==null&&(l=d.doc.length),this.regexp?a2(this,d,i,l):i2(this,d,i,l)}}class Kie{constructor(o){this.spec=o}}function i2(u,o,i,l){return new E2(o.doc,u.unquoted,i,l,u.caseSensitive?void 0:d=>d.toLowerCase(),u.wholeWord?Vge(o.doc,o.charCategorizer(o.selection.main.head)):void 0)}function Vge(u,o){return(i,l,d,m)=>((m>i||m+d.length<l)&&(m=Math.max(0,i-2),d=u.sliceString(m,Math.min(u.length,l+2))),(o(T6(d,i-m))!=zi.Word||o(O6(d,i-m))!=zi.Word)&&(o(O6(d,l-m))!=zi.Word||o(T6(d,l-m))!=zi.Word))}class zge extends Kie{constructor(o){super(o)}nextMatch(o,i,l){let d=i2(this.spec,o,l,o.doc.length).nextOverlapping();return d.done&&(d=i2(this.spec,o,0,i).nextOverlapping()),d.done?null:d.value}prevMatchInRange(o,i,l){for(let d=l;;){let m=Math.max(i,d-1e4-this.spec.unquoted.length),p=i2(this.spec,o,m,d),v=null;for(;!p.nextOverlapping().done;)v=p.value;if(v)return v;if(m==i)return null;d-=1e4}}prevMatch(o,i,l){return this.prevMatchInRange(o,0,i)||this.prevMatchInRange(o,l,o.doc.length)}getReplacement(o){return this.spec.unquote(this.spec.replace)}matchAll(o,i){let l=i2(this.spec,o,0,o.doc.length),d=[];for(;!l.next().done;){if(d.length>=i)return null;d.push(l.value)}return d}highlight(o,i,l,d){let m=i2(this.spec,o,Math.max(0,i-this.spec.unquoted.length),Math.min(l+this.spec.unquoted.length,o.doc.length));for(;!m.next().done;)d(m.value.from,m.value.to)}}function a2(u,o,i,l){return new Zie(o.doc,u.search,{ignoreCase:!u.caseSensitive,test:u.wholeWord?Uge(o.charCategorizer(o.selection.main.head)):void 0},i,l)}function T6(u,o){return u.slice(Wl(u,o,!1),o)}function O6(u,o){return u.slice(o,Wl(u,o))}function Uge(u){return(o,i,l)=>!l[0].length||(u(T6(l.input,l.index))!=zi.Word||u(O6(l.input,l.index))!=zi.Word)&&(u(O6(l.input,l.index+l[0].length))!=zi.Word||u(T6(l.input,l.index+l[0].length))!=zi.Word)}class Wge extends Kie{nextMatch(o,i,l){let d=a2(this.spec,o,l,o.doc.length).next();return d.done&&(d=a2(this.spec,o,0,i).next()),d.done?null:d.value}prevMatchInRange(o,i,l){for(let d=1;;d++){let m=Math.max(i,l-d*1e4),p=a2(this.spec,o,m,l),v=null;for(;!p.next().done;)v=p.value;if(v&&(m==i||v.from>m+10))return v;if(m==i)return null}}prevMatch(o,i,l){return this.prevMatchInRange(o,0,i)||this.prevMatchInRange(o,l,o.doc.length)}getReplacement(o){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(i,l)=>l=="$"?"$":l=="&"?o.match[0]:l!="0"&&+l<o.match.length?o.match[l]:i)}matchAll(o,i){let l=a2(this.spec,o,0,o.doc.length),d=[];for(;!l.next().done;){if(d.length>=i)return null;d.push(l.value)}return d}highlight(o,i,l,d){let m=a2(this.spec,o,Math.max(0,i-250),Math.min(l+250,o.doc.length));for(;!m.next().done;)d(m.value.from,m.value.to)}}const lM=Fs.define(),UQ=Fs.define(),s0=Zl.define({create(u){return new sJ(aQ(u).create(),null)},update(u,o){for(let i of o.effects)i.is(lM)?u=new sJ(i.value.create(),u.panel):i.is(UQ)&&(u=new sJ(u.query,i.value?WQ:null));return u},provide:u=>sM.from(u,o=>o.panel)});class sJ{constructor(o,i){this.query=o,this.panel=i}}const jge=Zo.mark({class:"cm-searchMatch"}),Zge=Zo.mark({class:"cm-searchMatch cm-searchMatch-selected"}),qge=Ta.fromClass(class{constructor(u){this.view=u,this.decorations=this.highlight(u.state.field(s0))}update(u){let o=u.state.field(s0);(o!=u.startState.field(s0)||u.docChanged||u.selectionSet||u.viewportChanged)&&(this.decorations=this.highlight(o))}highlight({query:u,panel:o}){if(!o||!u.spec.valid)return Zo.none;let{view:i}=this,l=new l0;for(let d=0,m=i.visibleRanges,p=m.length;d<p;d++){let{from:v,to:x}=m[d];for(;d<p-1&&x>m[d+1].from-2*250;)x=m[++d].to;u.highlight(i.state,v,x,(k,T)=>{let M=i.state.selection.ranges.some(N=>N.from==k&&N.to==T);l.add(k,T,M?Zge:jge)})}return l.finish()}},{decorations:u=>u.decorations});function SM(u){return o=>{let i=o.state.field(s0,!1);return i&&i.query.spec.valid?u(o,i):Jie(o)}}const _6=SM((u,{query:o})=>{let{to:i}=u.state.selection.main,l=o.nextMatch(u.state,i,i);if(!l)return!1;let d=rn.single(l.from,l.to),m=u.state.facet(N2);return u.dispatch({selection:d,effects:[jQ(u,l),m.scrollToMatch(d.main,u)],userEvent:"select.search"}),Xie(u),!0}),D6=SM((u,{query:o})=>{let{state:i}=u,{from:l}=i.selection.main,d=o.prevMatch(i,l,l);if(!d)return!1;let m=rn.single(d.from,d.to),p=u.state.facet(N2);return u.dispatch({selection:m,effects:[jQ(u,d),p.scrollToMatch(m.main,u)],userEvent:"select.search"}),Xie(u),!0}),Gge=SM((u,{query:o})=>{let i=o.matchAll(u.state,1e3);return!i||!i.length?!1:(u.dispatch({selection:rn.create(i.map(l=>rn.range(l.from,l.to))),userEvent:"select.search.matches"}),!0)}),Kge=({state:u,dispatch:o})=>{let i=u.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:l,to:d}=i.main,m=[],p=0;for(let v=new E2(u.doc,u.sliceDoc(l,d));!v.next().done;){if(m.length>1e3)return!1;v.value.from==l&&(p=m.length),m.push(rn.range(v.value.from,v.value.to))}return o(u.update({selection:rn.create(m,p),userEvent:"select.search.matches"})),!0},poe=SM((u,{query:o})=>{let{state:i}=u,{from:l,to:d}=i.selection.main;if(i.readOnly)return!1;let m=o.nextMatch(i,l,l);if(!m)return!1;let p=[],v,x,k=[];if(m.from==l&&m.to==d&&(x=i.toText(o.getReplacement(m)),p.push({from:m.from,to:m.to,insert:x}),m=o.nextMatch(i,m.from,m.to),k.push(po.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(l).number)+"."))),m){let T=p.length==0||p[0].from>=m.to?0:m.to-m.from-x.length;v=rn.single(m.from-T,m.to-T),k.push(jQ(u,m)),k.push(i.facet(N2).scrollToMatch(v.main,u))}return u.dispatch({changes:p,selection:v,effects:k,userEvent:"input.replace"}),!0}),Yge=SM((u,{query:o})=>{if(u.state.readOnly)return!1;let i=o.matchAll(u.state,1e9).map(d=>{let{from:m,to:p}=d;return{from:m,to:p,insert:o.getReplacement(d)}});if(!i.length)return!1;let l=u.state.phrase("replaced $ matches",i.length)+".";return u.dispatch({changes:i,effects:po.announce.of(l),userEvent:"input.replace.all"}),!0});function WQ(u){return u.state.facet(N2).createPanel(u)}function aQ(u,o){var i,l,d,m,p;let v=u.selection.main,x=v.empty||v.to>v.from+100?"":u.sliceDoc(v.from,v.to);if(o&&!x)return o;let k=u.facet(N2);return new Gie({search:((i=o==null?void 0:o.literal)!==null&&i!==void 0?i:k.literal)?x:x.replace(/\n/g,"\\n"),caseSensitive:(l=o==null?void 0:o.caseSensitive)!==null&&l!==void 0?l:k.caseSensitive,literal:(d=o==null?void 0:o.literal)!==null&&d!==void 0?d:k.literal,regexp:(m=o==null?void 0:o.regexp)!==null&&m!==void 0?m:k.regexp,wholeWord:(p=o==null?void 0:o.wholeWord)!==null&&p!==void 0?p:k.wholeWord})}function Yie(u){let o=oM(u,WQ);return o&&o.dom.querySelector("[main-field]")}function Xie(u){let o=Yie(u);o&&o==u.root.activeElement&&o.select()}const Jie=u=>{let o=u.state.field(s0,!1);if(o&&o.panel){let i=Yie(u);if(i&&i!=u.root.activeElement){let l=aQ(u.state,o.query.spec);l.valid&&u.dispatch({effects:lM.of(l)}),i.focus(),i.select()}}else u.dispatch({effects:[UQ.of(!0),o?lM.of(aQ(u.state,o.query.spec)):Fs.appendConfig.of(epe)]});return!0},Qie=u=>{let o=u.state.field(s0,!1);if(!o||!o.panel)return!1;let i=oM(u,WQ);return i&&i.dom.contains(u.root.activeElement)&&u.focus(),u.dispatch({effects:UQ.of(!1)}),!0},Xge=[{key:"Mod-f",run:Jie,scope:"editor search-panel"},{key:"F3",run:_6,shift:D6,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:_6,shift:D6,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Qie,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Kge},{key:"Mod-Alt-g",run:Oge},{key:"Mod-d",run:Hge,preventDefault:!0}];class Jge{constructor(o){this.view=o;let i=this.query=o.state.field(s0).query.spec;this.commit=this.commit.bind(this),this.searchField=Si("input",{value:i.search,placeholder:pd(o,"Find"),"aria-label":pd(o,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Si("input",{value:i.replace,placeholder:pd(o,"Replace"),"aria-label":pd(o,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Si("input",{type:"checkbox",name:"case",form:"",checked:i.caseSensitive,onchange:this.commit}),this.reField=Si("input",{type:"checkbox",name:"re",form:"",checked:i.regexp,onchange:this.commit}),this.wordField=Si("input",{type:"checkbox",name:"word",form:"",checked:i.wholeWord,onchange:this.commit});function l(d,m,p){return Si("button",{class:"cm-button",name:d,onclick:m,type:"button"},p)}this.dom=Si("div",{onkeydown:d=>this.keydown(d),class:"cm-search"},[this.searchField,l("next",()=>_6(o),[pd(o,"next")]),l("prev",()=>D6(o),[pd(o,"previous")]),l("select",()=>Gge(o),[pd(o,"all")]),Si("label",null,[this.caseField,pd(o,"match case")]),Si("label",null,[this.reField,pd(o,"regexp")]),Si("label",null,[this.wordField,pd(o,"by word")]),...o.state.readOnly?[]:[Si("br"),this.replaceField,l("replace",()=>poe(o),[pd(o,"replace")]),l("replaceAll",()=>Yge(o),[pd(o,"replace all")])],Si("button",{name:"close",onclick:()=>Qie(o),"aria-label":pd(o,"close"),type:"button"},["×"])])}commit(){let o=new Gie({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});o.eq(this.query)||(this.query=o,this.view.dispatch({effects:lM.of(o)}))}keydown(o){ofe(this.view,o,"search-panel")?o.preventDefault():o.keyCode==13&&o.target==this.searchField?(o.preventDefault(),(o.shiftKey?D6:_6)(this.view)):o.keyCode==13&&o.target==this.replaceField&&(o.preventDefault(),poe(this.view))}update(o){for(let i of o.transactions)for(let l of i.effects)l.is(lM)&&!l.value.eq(this.query)&&this.setQuery(l.value)}setQuery(o){this.query=o,this.searchField.value=o.search,this.replaceField.value=o.replace,this.caseField.checked=o.caseSensitive,this.reField.checked=o.regexp,this.wordField.checked=o.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(N2).top}}function pd(u,o){return u.state.phrase(o)}const H$=30,V$=/[\s\.,:;?!]/;function jQ(u,{from:o,to:i}){let l=u.state.doc.lineAt(o),d=u.state.doc.lineAt(i).to,m=Math.max(l.from,o-H$),p=Math.min(d,i+H$),v=u.state.sliceDoc(m,p);if(m!=l.from){for(let x=0;x<H$;x++)if(!V$.test(v[x+1])&&V$.test(v[x])){v=v.slice(x);break}}if(p!=d){for(let x=v.length-1;x>v.length-H$;x--)if(!V$.test(v[x-1])&&V$.test(v[x])){v=v.slice(0,x);break}}return po.announce.of(`${u.state.phrase("current match")}. ${v} ${u.state.phrase("on line")} ${l.number}.`)}const Qge=po.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),epe=[s0,Oy.low(qge),Qge];class eae{constructor(o,i,l,d){this.state=o,this.pos=i,this.explicit=l,this.view=d,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(o){let i=jl(this.state).resolveInner(this.pos,-1);for(;i&&o.indexOf(i.name)<0;)i=i.parent;return i?{from:i.from,to:this.pos,text:this.state.sliceDoc(i.from,this.pos),type:i.type}:null}matchBefore(o){let i=this.state.doc.lineAt(this.pos),l=Math.max(i.from,this.pos-250),d=i.text.slice(l-i.from,this.pos-i.from),m=d.search(tae(o,!1));return m<0?null:{from:l+m,to:this.pos,text:d.slice(m)}}get aborted(){return this.abortListeners==null}addEventListener(o,i,l){o=="abort"&&this.abortListeners&&(this.abortListeners.push(i),l&&l.onDocChange&&(this.abortOnDocChange=!0))}}function boe(u){let o=Object.keys(u).join(""),i=/\w/.test(o);return i&&(o=o.replace(/\w/g,"")),`[${i?"\\w":""}${o.replace(/[^\w\s]/g,"\\$&")}]`}function tpe(u){let o=Object.create(null),i=Object.create(null);for(let{label:d}of u){o[d[0]]=!0;for(let m=1;m<d.length;m++)i[d[m]]=!0}let l=boe(o)+boe(i)+"*$";return[new RegExp("^"+l),new RegExp(l)]}function npe(u){let o=u.map(d=>typeof d=="string"?{label:d}:d),[i,l]=o.every(d=>/^\w+$/.test(d.label))?[/\w*$/,/\w+$/]:tpe(o);return d=>{let m=d.matchBefore(l);return m||d.explicit?{from:m?m.from:d.pos,options:o,validFor:i}:null}}class voe{constructor(o,i,l,d){this.completion=o,this.source=i,this.match=l,this.score=d}}function r0(u){return u.selection.main.from}function tae(u,o){var i;let{source:l}=u,d=o&&l[0]!="^",m=l[l.length-1]!="$";return!d&&!m?u:new RegExp(`${d?"^":""}(?:${l})${m?"$":""}`,(i=u.flags)!==null&&i!==void 0?i:u.ignoreCase?"i":"")}const nae=Zg.define();function ope(u,o,i,l){let{main:d}=u.selection,m=i-d.from,p=l-d.from;return Object.assign(Object.assign({},u.changeByRange(v=>v!=d&&i!=l&&u.sliceDoc(v.from+m,v.from+p)!=u.sliceDoc(i,l)?{range:v}:{changes:{from:v.from+m,to:l==d.from?v.to:v.from+p,insert:o},range:rn.cursor(v.from+m+o.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const yoe=new WeakMap;function spe(u){if(!Array.isArray(u))return u;let o=yoe.get(u);return o||yoe.set(u,o=npe(u)),o}const M6=Fs.define(),cM=Fs.define();class rpe{constructor(o){this.pattern=o,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let i=0;i<o.length;){let l=Hl(o,i),d=df(l);this.chars.push(l);let m=o.slice(i,i+d),p=m.toUpperCase();this.folded.push(Hl(p==m?m.toLowerCase():p,0)),i+=d}this.astral=o.length!=this.chars.length}ret(o,i){return this.score=o,this.matched=i,this}match(o){if(this.pattern.length==0)return this.ret(-100,[]);if(o.length<this.pattern.length)return null;let{chars:i,folded:l,any:d,precise:m,byWord:p}=this;if(i.length==1){let ae=Hl(o,0),Z=df(ae),ce=Z==o.length?0:-100;if(ae!=i[0])if(ae==l[0])ce+=-200;else return null;return this.ret(ce,[0,Z])}let v=o.indexOf(this.pattern);if(v==0)return this.ret(o.length==this.pattern.length?0:-100,[0,this.pattern.length]);let x=i.length,k=0;if(v<0){for(let ae=0,Z=Math.min(o.length,200);ae<Z&&k<x;){let ce=Hl(o,ae);(ce==i[k]||ce==l[k])&&(d[k++]=ae),ae+=df(ce)}if(k<x)return null}let T=0,M=0,N=!1,I=0,z=-1,Y=-1,J=/[a-z]/.test(o),q=!0;for(let ae=0,Z=Math.min(o.length,200),ce=0;ae<Z&&M<x;){let _e=Hl(o,ae);v<0&&(T<x&&_e==i[T]&&(m[T++]=ae),I<x&&(_e==i[I]||_e==l[I]?(I==0&&(z=ae),Y=ae+1,I++):I=0));let De,G=_e<255?_e>=48&&_e<=57||_e>=97&&_e<=122?2:_e>=65&&_e<=90?1:0:(De=gQ(_e))!=De.toLowerCase()?1:De!=De.toUpperCase()?2:0;(!ae||G==1&&J||ce==0&&G!=0)&&(i[M]==_e||l[M]==_e&&(N=!0)?p[M++]=ae:p.length&&(q=!1)),ce=G,ae+=df(_e)}return M==x&&p[0]==0&&q?this.result(-100+(N?-200:0),p,o):I==x&&z==0?this.ret(-200-o.length+(Y==o.length?0:-100),[0,Y]):v>-1?this.ret(-700-o.length,[v,v+this.pattern.length]):I==x?this.ret(-900-o.length,[z,Y]):M==x?this.result(-100+(N?-200:0)+-700+(q?0:-1100),p,o):i.length==2?null:this.result((d[0]?-700:0)+-200+-1100,d,o)}result(o,i,l){let d=[],m=0;for(let p of i){let v=p+(this.astral?df(Hl(l,p)):1);m&&d[m-1]==p?d[m-1]=v:(d[m++]=p,d[m++]=v)}return this.ret(o-l.length,d)}}class ipe{constructor(o){this.pattern=o,this.matched=[],this.score=0,this.folded=o.toLowerCase()}match(o){if(o.length<this.pattern.length)return null;let i=o.slice(0,this.pattern.length),l=i==this.pattern?0:i.toLowerCase()==this.folded?-200:null;return l==null?null:(this.matched=[0,i.length],this.score=l+(o.length==this.pattern.length?0:-100),this)}}const Ul=Co.define({combine(u){return xm(u,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ape,filterStrict:!1,compareCompletions:(o,i)=>o.label.localeCompare(i.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(o,i)=>o&&i,closeOnBlur:(o,i)=>o&&i,icons:(o,i)=>o&&i,tooltipClass:(o,i)=>l=>woe(o(l),i(l)),optionClass:(o,i)=>l=>woe(o(l),i(l)),addToOptions:(o,i)=>o.concat(i),filterStrict:(o,i)=>o||i})}});function woe(u,o){return u?o?u+" "+o:u:o}function ape(u,o,i,l,d,m){let p=u.textDirection==Ni.RTL,v=p,x=!1,k="top",T,M,N=o.left-d.left,I=d.right-o.right,z=l.right-l.left,Y=l.bottom-l.top;if(v&&N<Math.min(z,I)?v=!1:!v&&I<Math.min(z,N)&&(v=!0),z<=(v?N:I))T=Math.max(d.top,Math.min(i.top,d.bottom-Y))-o.top,M=Math.min(400,v?N:I);else{x=!0,M=Math.min(400,(p?o.right:d.right-o.left)-30);let ae=d.bottom-o.bottom;ae>=Y||ae>o.top?T=i.bottom-o.top:(k="bottom",T=o.bottom-i.top)}let J=(o.bottom-o.top)/m.offsetHeight,q=(o.right-o.left)/m.offsetWidth;return{style:`${k}: ${T/J}px; max-width: ${M/q}px`,class:"cm-completionInfo-"+(x?p?"left-narrow":"right-narrow":v?"left":"right")}}function lpe(u){let o=u.addToOptions.slice();return u.icons&&o.push({render(i){let l=document.createElement("div");return l.classList.add("cm-completionIcon"),i.type&&l.classList.add(...i.type.split(/\s+/g).map(d=>"cm-completionIcon-"+d)),l.setAttribute("aria-hidden","true"),l},position:20}),o.push({render(i,l,d,m){let p=document.createElement("span");p.className="cm-completionLabel";let v=i.displayLabel||i.label,x=0;for(let k=0;k<m.length;){let T=m[k++],M=m[k++];T>x&&p.appendChild(document.createTextNode(v.slice(x,T)));let N=p.appendChild(document.createElement("span"));N.appendChild(document.createTextNode(v.slice(T,M))),N.className="cm-completionMatchedText",x=M}return x<v.length&&p.appendChild(document.createTextNode(v.slice(x))),p},position:50},{render(i){if(!i.detail)return null;let l=document.createElement("span");return l.className="cm-completionDetail",l.textContent=i.detail,l},position:80}),o.sort((i,l)=>i.position-l.position).map(i=>i.render)}function rJ(u,o,i){if(u<=i)return{from:0,to:u};if(o<0&&(o=0),o<=u>>1){let d=Math.floor(o/i);return{from:d*i,to:(d+1)*i}}let l=Math.floor((u-o)/i);return{from:u-(l+1)*i,to:u-l*i}}class cpe{constructor(o,i,l){this.view=o,this.stateField=i,this.applyCompletion=l,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:x=>this.placeInfo(x),key:this},this.space=null,this.currentClass="";let d=o.state.field(i),{options:m,selected:p}=d.open,v=o.state.facet(Ul);this.optionContent=lpe(v),this.optionClass=v.optionClass,this.tooltipClass=v.tooltipClass,this.range=rJ(m.length,p,v.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(o.state),this.dom.addEventListener("mousedown",x=>{let{options:k}=o.state.field(i).open;for(let T=x.target,M;T&&T!=this.dom;T=T.parentNode)if(T.nodeName=="LI"&&(M=/-(\d+)$/.exec(T.id))&&+M[1]<k.length){this.applyCompletion(o,k[+M[1]]),x.preventDefault();return}}),this.dom.addEventListener("focusout",x=>{let k=o.state.field(this.stateField,!1);k&&k.tooltip&&o.state.facet(Ul).closeOnBlur&&x.relatedTarget!=o.contentDOM&&o.dispatch({effects:cM.of(null)})}),this.showOptions(m,d.id)}mount(){this.updateSel()}showOptions(o,i){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(o,i,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(o){var i;let l=o.state.field(this.stateField),d=o.startState.field(this.stateField);if(this.updateTooltipClass(o.state),l!=d){let{options:m,selected:p,disabled:v}=l.open;(!d.open||d.open.options!=m)&&(this.range=rJ(m.length,p,o.state.facet(Ul).maxRenderedOptions),this.showOptions(m,l.id)),this.updateSel(),v!=((i=d.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!v)}}updateTooltipClass(o){let i=this.tooltipClass(o);if(i!=this.currentClass){for(let l of this.currentClass.split(" "))l&&this.dom.classList.remove(l);for(let l of i.split(" "))l&&this.dom.classList.add(l);this.currentClass=i}}positioned(o){this.space=o,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let o=this.view.state.field(this.stateField),i=o.open;if((i.selected>-1&&i.selected<this.range.from||i.selected>=this.range.to)&&(this.range=rJ(i.options.length,i.selected,this.view.state.facet(Ul).maxRenderedOptions),this.showOptions(i.options,o.id)),this.updateSelectedOption(i.selected)){this.destroyInfo();let{completion:l}=i.options[i.selected],{info:d}=l;if(!d)return;let m=typeof d=="string"?document.createTextNode(d):d(l);if(!m)return;"then"in m?m.then(p=>{p&&this.view.state.field(this.stateField,!1)==o&&this.addInfoPane(p,l)}).catch(p=>_u(this.view.state,p,"completion info")):this.addInfoPane(m,l)}}addInfoPane(o,i){this.destroyInfo();let l=this.info=document.createElement("div");if(l.className="cm-tooltip cm-completionInfo",o.nodeType!=null)l.appendChild(o),this.infoDestroy=null;else{let{dom:d,destroy:m}=o;l.appendChild(d),this.infoDestroy=m||null}this.dom.appendChild(l),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(o){let i=null;for(let l=this.list.firstChild,d=this.range.from;l;l=l.nextSibling,d++)l.nodeName!="LI"||!l.id?d--:d==o?l.hasAttribute("aria-selected")||(l.setAttribute("aria-selected","true"),i=l):l.hasAttribute("aria-selected")&&l.removeAttribute("aria-selected");return i&&dpe(this.list,i),i}measureInfo(){let o=this.dom.querySelector("[aria-selected]");if(!o||!this.info)return null;let i=this.dom.getBoundingClientRect(),l=this.info.getBoundingClientRect(),d=o.getBoundingClientRect(),m=this.space;if(!m){let p=this.dom.ownerDocument.defaultView||window;m={left:0,top:0,right:p.innerWidth,bottom:p.innerHeight}}return d.top>Math.min(m.bottom,i.bottom)-10||d.bottom<Math.max(m.top,i.top)+10?null:this.view.state.facet(Ul).positionInfo(this.view,i,d,l,m,this.dom)}placeInfo(o){this.info&&(o?(o.style&&(this.info.style.cssText=o.style),this.info.className="cm-tooltip cm-completionInfo "+(o.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(o,i,l){const d=document.createElement("ul");d.id=i,d.setAttribute("role","listbox"),d.setAttribute("aria-expanded","true"),d.setAttribute("aria-label",this.view.state.phrase("Completions"));let m=null;for(let p=l.from;p<l.to;p++){let{completion:v,match:x}=o[p],{section:k}=v;if(k){let N=typeof k=="string"?k:k.name;if(N!=m&&(p>l.from||l.from==0))if(m=N,typeof k!="string"&&k.header)d.appendChild(k.header(k));else{let I=d.appendChild(document.createElement("completion-section"));I.textContent=N}}const T=d.appendChild(document.createElement("li"));T.id=i+"-"+p,T.setAttribute("role","option");let M=this.optionClass(v);M&&(T.className=M);for(let N of this.optionContent){let I=N(v,this.view.state,this.view,x);I&&T.appendChild(I)}}return l.from&&d.classList.add("cm-completionListIncompleteTop"),l.to<o.length&&d.classList.add("cm-completionListIncompleteBottom"),d}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function upe(u,o){return i=>new cpe(i,u,o)}function dpe(u,o){let i=u.getBoundingClientRect(),l=o.getBoundingClientRect(),d=i.height/u.offsetHeight;l.top<i.top?u.scrollTop-=(i.top-l.top)/d:l.bottom>i.bottom&&(u.scrollTop+=(l.bottom-i.bottom)/d)}function xoe(u){return(u.boost||0)*100+(u.apply?10:0)+(u.info?5:0)+(u.type?1:0)}function fpe(u,o){let i=[],l=null,d=k=>{i.push(k);let{section:T}=k.completion;if(T){l||(l=[]);let M=typeof T=="string"?T:T.name;l.some(N=>N.name==M)||l.push(typeof T=="string"?{name:M}:T)}},m=o.facet(Ul);for(let k of u)if(k.hasResult()){let T=k.result.getMatch;if(k.result.filter===!1)for(let M of k.result.options)d(new voe(M,k.source,T?T(M):[],1e9-i.length));else{let M=o.sliceDoc(k.from,k.to),N,I=m.filterStrict?new ipe(M):new rpe(M);for(let z of k.result.options)if(N=I.match(z.label)){let Y=z.displayLabel?T?T(z,N.matched):[]:N.matched;d(new voe(z,k.source,Y,N.score+(z.boost||0)))}}}if(l){let k=Object.create(null),T=0,M=(N,I)=>{var z,Y;return((z=N.rank)!==null&&z!==void 0?z:1e9)-((Y=I.rank)!==null&&Y!==void 0?Y:1e9)||(N.name<I.name?-1:1)};for(let N of l.sort(M))T-=1e5,k[N.name]=T;for(let N of i){let{section:I}=N.completion;I&&(N.score+=k[typeof I=="string"?I:I.name])}}let p=[],v=null,x=m.compareCompletions;for(let k of i.sort((T,M)=>M.score-T.score||x(T.completion,M.completion))){let T=k.completion;!v||v.label!=T.label||v.detail!=T.detail||v.type!=null&&T.type!=null&&v.type!=T.type||v.apply!=T.apply||v.boost!=T.boost?p.push(k):xoe(k.completion)>xoe(v)&&(p[p.length-1]=k),v=k.completion}return p}class u2{constructor(o,i,l,d,m,p){this.options=o,this.attrs=i,this.tooltip=l,this.timestamp=d,this.selected=m,this.disabled=p}setSelected(o,i){return o==this.selected||o>=this.options.length?this:new u2(this.options,Coe(i,o),this.tooltip,this.timestamp,o,this.disabled)}static build(o,i,l,d,m){let p=fpe(o,i);if(!p.length)return d&&o.some(x=>x.state==1)?new u2(d.options,d.attrs,d.tooltip,d.timestamp,d.selected,!0):null;let v=i.facet(Ul).selectOnOpen?0:-1;if(d&&d.selected!=v&&d.selected!=-1){let x=d.options[d.selected].completion;for(let k=0;k<p.length;k++)if(p[k].completion==x){v=k;break}}return new u2(p,Coe(l,v),{pos:o.reduce((x,k)=>k.hasResult()?Math.min(x,k.from):x,1e8),create:vpe,above:m.aboveCursor},d?d.timestamp:Date.now(),v,!1)}map(o){return new u2(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:o.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class P6{constructor(o,i,l){this.active=o,this.id=i,this.open=l}static start(){return new P6(ppe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(o){let{state:i}=o,l=i.facet(Ul),m=(l.override||i.languageDataAt("autocomplete",r0(i)).map(spe)).map(v=>(this.active.find(k=>k.source==v)||new wd(v,this.active.some(k=>k.state!=0)?1:0)).update(o,l));m.length==this.active.length&&m.every((v,x)=>v==this.active[x])&&(m=this.active);let p=this.open;p&&o.docChanged&&(p=p.map(o.changes)),o.selection||m.some(v=>v.hasResult()&&o.changes.touchesRange(v.from,v.to))||!hpe(m,this.active)?p=u2.build(m,i,this.id,p,l):p&&p.disabled&&!m.some(v=>v.state==1)&&(p=null),!p&&m.every(v=>v.state!=1)&&m.some(v=>v.hasResult())&&(m=m.map(v=>v.hasResult()?new wd(v.source,0):v));for(let v of o.effects)v.is(rae)&&(p=p&&p.setSelected(v.value,this.id));return m==this.active&&p==this.open?this:new P6(m,this.id,p)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?mpe:gpe}}function hpe(u,o){if(u==o)return!0;for(let i=0,l=0;;){for(;i<u.length&&!u[i].hasResult;)i++;for(;l<o.length&&!o[l].hasResult;)l++;let d=i==u.length,m=l==o.length;if(d||m)return d==m;if(u[i++].result!=o[l++].result)return!1}}const mpe={"aria-autocomplete":"list"},gpe={};function Coe(u,o){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":u};return o>-1&&(i["aria-activedescendant"]=u+"-"+o),i}const ppe=[];function oae(u,o){if(u.isUserEvent("input.complete")){let l=u.annotation(nae);if(l&&o.activateOnCompletion(l))return 12}let i=u.isUserEvent("input.type");return i&&o.activateOnTyping?5:i?1:u.isUserEvent("delete.backward")?2:u.selection?8:u.docChanged?16:0}class wd{constructor(o,i,l=-1){this.source=o,this.state=i,this.explicitPos=l}hasResult(){return!1}update(o,i){let l=oae(o,i),d=this;(l&8||l&16&&this.touches(o))&&(d=new wd(d.source,0)),l&4&&d.state==0&&(d=new wd(this.source,1)),d=d.updateFor(o,l);for(let m of o.effects)if(m.is(M6))d=new wd(d.source,1,m.value?r0(o.state):-1);else if(m.is(cM))d=new wd(d.source,0);else if(m.is(sae))for(let p of m.value)p.source==d.source&&(d=p);return d}updateFor(o,i){return this.map(o.changes)}map(o){return o.empty||this.explicitPos<0?this:new wd(this.source,this.state,o.mapPos(this.explicitPos))}touches(o){return o.changes.touchesRange(r0(o.state))}}class p2 extends wd{constructor(o,i,l,d,m){super(o,2,i),this.result=l,this.from=d,this.to=m}hasResult(){return!0}updateFor(o,i){var l;if(!(i&3))return this.map(o.changes);let d=this.result;d.map&&!o.changes.empty&&(d=d.map(d,o.changes));let m=o.changes.mapPos(this.from),p=o.changes.mapPos(this.to,1),v=r0(o.state);if((this.explicitPos<0?v<=m:v<this.from)||v>p||!d||i&2&&r0(o.startState)==this.from)return new wd(this.source,i&4?1:0);let x=this.explicitPos<0?-1:o.changes.mapPos(this.explicitPos);return bpe(d.validFor,o.state,m,p)?new p2(this.source,x,d,m,p):d.update&&(d=d.update(d,m,p,new eae(o.state,v,x>=0)))?new p2(this.source,x,d,d.from,(l=d.to)!==null&&l!==void 0?l:r0(o.state)):new wd(this.source,1,x)}map(o){return o.empty?this:(this.result.map?this.result.map(this.result,o):this.result)?new p2(this.source,this.explicitPos<0?-1:o.mapPos(this.explicitPos),this.result,o.mapPos(this.from),o.mapPos(this.to,1)):new wd(this.source,0)}touches(o){return o.changes.touchesRange(this.from,this.to)}}function bpe(u,o,i,l){if(!u)return!1;let d=o.sliceDoc(i,l);return typeof u=="function"?u(d,i,l,o):tae(u,!0).test(d)}const sae=Fs.define({map(u,o){return u.map(i=>i.map(o))}}),rae=Fs.define(),Ou=Zl.define({create(){return P6.start()},update(u,o){return u.update(o)},provide:u=>[_Q.from(u,o=>o.tooltip),po.contentAttributes.from(u,o=>o.attrs)]});function ZQ(u,o){const i=o.completion.apply||o.completion.label;let l=u.state.field(Ou).active.find(d=>d.source==o.source);return l instanceof p2?(typeof i=="string"?u.dispatch(Object.assign(Object.assign({},ope(u.state,i,l.from,l.to)),{annotations:nae.of(o.completion)})):i(u,o.completion,l.from,l.to),!0):!1}const vpe=upe(Ou,ZQ);function z$(u,o="option"){return i=>{let l=i.state.field(Ou,!1);if(!l||!l.open||l.open.disabled||Date.now()-l.open.timestamp<i.state.facet(Ul).interactionDelay)return!1;let d=1,m;o=="page"&&(m=Mre(i,l.open.tooltip))&&(d=Math.max(2,Math.floor(m.dom.offsetHeight/m.dom.querySelector("li").offsetHeight)-1));let{length:p}=l.open.options,v=l.open.selected>-1?l.open.selected+d*(u?1:-1):u?0:p-1;return v<0?v=o=="page"?0:p-1:v>=p&&(v=o=="page"?p-1:0),i.dispatch({effects:rae.of(v)}),!0}}const ype=u=>{let o=u.state.field(Ou,!1);return u.state.readOnly||!o||!o.open||o.open.selected<0||o.open.disabled||Date.now()-o.open.timestamp<u.state.facet(Ul).interactionDelay?!1:ZQ(u,o.open.options[o.open.selected])},wpe=u=>u.state.field(Ou,!1)?(u.dispatch({effects:M6.of(!0)}),!0):!1,xpe=u=>{let o=u.state.field(Ou,!1);return!o||!o.active.some(i=>i.state!=0)?!1:(u.dispatch({effects:cM.of(null)}),!0)};class Cpe{constructor(o,i){this.active=o,this.context=i,this.time=Date.now(),this.updates=[],this.done=void 0}}const Spe=50,kpe=1e3,Epe=Ta.fromClass(class{constructor(u){this.view=u,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let o of u.state.field(Ou).active)o.state==1&&this.startQuery(o)}update(u){let o=u.state.field(Ou),i=u.state.facet(Ul);if(!u.selectionSet&&!u.docChanged&&u.startState.field(Ou)==o)return;let l=u.transactions.some(m=>{let p=oae(m,i);return p&8||(m.selection||m.docChanged)&&!(p&3)});for(let m=0;m<this.running.length;m++){let p=this.running[m];if(l||p.context.abortOnDocChange&&u.docChanged||p.updates.length+u.transactions.length>Spe&&Date.now()-p.time>kpe){for(let v of p.context.abortListeners)try{v()}catch(x){_u(this.view.state,x)}p.context.abortListeners=null,this.running.splice(m--,1)}else p.updates.push(...u.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),u.transactions.some(m=>m.effects.some(p=>p.is(M6)))&&(this.pendingStart=!0);let d=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=o.active.some(m=>m.state==1&&!this.running.some(p=>p.active.source==m.source))?setTimeout(()=>this.startUpdate(),d):-1,this.composing!=0)for(let m of u.transactions)m.isUserEvent("input.type")?this.composing=2:this.composing==2&&m.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:u}=this.view,o=u.field(Ou);for(let i of o.active)i.state==1&&!this.running.some(l=>l.active.source==i.source)&&this.startQuery(i)}startQuery(u){let{state:o}=this.view,i=r0(o),l=new eae(o,i,u.explicitPos==i,this.view),d=new Cpe(u,l);this.running.push(d),Promise.resolve(u.source(l)).then(m=>{d.context.aborted||(d.done=m||null,this.scheduleAccept())},m=>{this.view.dispatch({effects:cM.of(null)}),_u(this.view.state,m)})}scheduleAccept(){this.running.every(u=>u.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ul).updateSyncTime))}accept(){var u;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let o=[],i=this.view.state.facet(Ul);for(let l=0;l<this.running.length;l++){let d=this.running[l];if(d.done===void 0)continue;if(this.running.splice(l--,1),d.done){let p=new p2(d.active.source,d.active.explicitPos,d.done,d.done.from,(u=d.done.to)!==null&&u!==void 0?u:r0(d.updates.length?d.updates[0].startState:this.view.state));for(let v of d.updates)p=p.update(v,i);if(p.hasResult()){o.push(p);continue}}let m=this.view.state.field(Ou).active.find(p=>p.source==d.active.source);if(m&&m.state==1)if(d.done==null){let p=new wd(d.active.source,0);for(let v of d.updates)p=p.update(v,i);p.state!=1&&o.push(p)}else this.startQuery(m)}o.length&&this.view.dispatch({effects:sae.of(o)})}},{eventHandlers:{blur(u){let o=this.view.state.field(Ou,!1);if(o&&o.tooltip&&this.view.state.facet(Ul).closeOnBlur){let i=o.open&&Mre(this.view,o.open.tooltip);(!i||!i.dom.contains(u.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:cM.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:M6.of(!1)}),20),this.composing=0}}}),Ape=typeof navigator=="object"&&/Win/.test(navigator.platform),Tpe=Oy.highest(po.domEventHandlers({keydown(u,o){let i=o.state.field(Ou,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||u.key.length>1||u.ctrlKey&&!(Ape&&u.altKey)||u.metaKey)return!1;let l=i.open.options[i.open.selected],d=i.active.find(p=>p.source==l.source),m=l.completion.commitCharacters||d.result.commitCharacters;return m&&m.indexOf(u.key)>-1&&ZQ(o,l),!1}})),Ope=po.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),uM={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},my=Fs.define({map(u,o){let i=o.mapPos(u,-1,qc.TrackAfter);return i==null?void 0:i}}),qQ=new class extends xy{};qQ.startSide=1;qQ.endSide=-1;const iae=Zl.define({create(){return yr.empty},update(u,o){if(u=u.map(o.changes),o.selection){let i=o.state.doc.lineAt(o.selection.main.head);u=u.update({filter:l=>l>=i.from&&l<=i.to})}for(let i of o.effects)i.is(my)&&(u=u.update({add:[qQ.range(i.value,i.value+1)]}));return u}});function _pe(){return[Mpe,iae]}const iJ="()[]{}<>";function aae(u){for(let o=0;o<iJ.length;o+=2)if(iJ.charCodeAt(o)==u)return iJ.charAt(o+1);return gQ(u<128?u:u+1)}function lae(u,o){return u.languageDataAt("closeBrackets",o)[0]||uM}const Dpe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Mpe=po.inputHandler.of((u,o,i,l)=>{if((Dpe?u.composing:u.compositionStarted)||u.state.readOnly)return!1;let d=u.state.selection.main;if(l.length>2||l.length==2&&df(Hl(l,0))==1||o!=d.from||i!=d.to)return!1;let m=Npe(u.state,l);return m?(u.dispatch(m),!0):!1}),Ppe=({state:u,dispatch:o})=>{if(u.readOnly)return!1;let l=lae(u,u.selection.main.head).brackets||uM.brackets,d=null,m=u.changeByRange(p=>{if(p.empty){let v=Bpe(u.doc,p.head);for(let x of l)if(x==v&&X6(u.doc,p.head)==aae(Hl(x,0)))return{changes:{from:p.head-x.length,to:p.head+x.length},range:rn.cursor(p.head-x.length)}}return{range:d=p}});return d||o(u.update(m,{scrollIntoView:!0,userEvent:"delete.backward"})),!d},Rpe=[{key:"Backspace",run:Ppe}];function Npe(u,o){let i=lae(u,u.selection.main.head),l=i.brackets||uM.brackets;for(let d of l){let m=aae(Hl(d,0));if(o==d)return m==d?Lpe(u,d,l.indexOf(d+d+d)>-1,i):Fpe(u,d,m,i.before||uM.before);if(o==m&&cae(u,u.selection.main.from))return Ipe(u,d,m)}return null}function cae(u,o){let i=!1;return u.field(iae).between(0,u.doc.length,l=>{l==o&&(i=!0)}),i}function X6(u,o){let i=u.sliceString(o,o+2);return i.slice(0,df(Hl(i,0)))}function Bpe(u,o){let i=u.sliceString(o-2,o);return df(Hl(i,0))==i.length?i:i.slice(1)}function Fpe(u,o,i,l){let d=null,m=u.changeByRange(p=>{if(!p.empty)return{changes:[{insert:o,from:p.from},{insert:i,from:p.to}],effects:my.of(p.to+o.length),range:rn.range(p.anchor+o.length,p.head+o.length)};let v=X6(u.doc,p.head);return!v||/\s/.test(v)||l.indexOf(v)>-1?{changes:{insert:o+i,from:p.head},effects:my.of(p.head+o.length),range:rn.cursor(p.head+o.length)}:{range:d=p}});return d?null:u.update(m,{scrollIntoView:!0,userEvent:"input.type"})}function Ipe(u,o,i){let l=null,d=u.changeByRange(m=>m.empty&&X6(u.doc,m.head)==i?{changes:{from:m.head,to:m.head+i.length,insert:i},range:rn.cursor(m.head+i.length)}:l={range:m});return l?null:u.update(d,{scrollIntoView:!0,userEvent:"input.type"})}function Lpe(u,o,i,l){let d=l.stringPrefixes||uM.stringPrefixes,m=null,p=u.changeByRange(v=>{if(!v.empty)return{changes:[{insert:o,from:v.from},{insert:o,from:v.to}],effects:my.of(v.to+o.length),range:rn.range(v.anchor+o.length,v.head+o.length)};let x=v.head,k=X6(u.doc,x),T;if(k==o){if(Soe(u,x))return{changes:{insert:o+o,from:x},effects:my.of(x+o.length),range:rn.cursor(x+o.length)};if(cae(u,x)){let N=i&&u.sliceDoc(x,x+o.length*3)==o+o+o?o+o+o:o;return{changes:{from:x,to:x+N.length,insert:N},range:rn.cursor(x+N.length)}}}else{if(i&&u.sliceDoc(x-2*o.length,x)==o+o&&(T=koe(u,x-2*o.length,d))>-1&&Soe(u,T))return{changes:{insert:o+o+o+o,from:x},effects:my.of(x+o.length),range:rn.cursor(x+o.length)};if(u.charCategorizer(x)(k)!=zi.Word&&koe(u,x,d)>-1&&!$pe(u,x,o,d))return{changes:{insert:o+o,from:x},effects:my.of(x+o.length),range:rn.cursor(x+o.length)}}return{range:m=v}});return m?null:u.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function Soe(u,o){let i=jl(u).resolveInner(o+1);return i.parent&&i.from==o}function $pe(u,o,i,l){let d=jl(u).resolveInner(o,-1),m=l.reduce((p,v)=>Math.max(p,v.length),0);for(let p=0;p<5;p++){let v=u.sliceDoc(d.from,Math.min(d.to,d.from+i.length+m)),x=v.indexOf(i);if(!x||x>-1&&l.indexOf(v.slice(0,x))>-1){let T=d.firstChild;for(;T&&T.from==d.from&&T.to-T.from>i.length+x;){if(u.sliceDoc(T.to-i.length,T.to)==i)return!1;T=T.firstChild}return!0}let k=d.to==o&&d.parent;if(!k)break;d=k}return!1}function koe(u,o,i){let l=u.charCategorizer(o);if(l(u.sliceDoc(o-1,o))!=zi.Word)return o;for(let d of i){let m=o-d.length;if(u.sliceDoc(m,o)==d&&l(u.sliceDoc(m-1,m))!=zi.Word)return m}return-1}function Hpe(u={}){return[Tpe,Ou,Ul.of(u),Epe,Vpe,Ope]}const uae=[{key:"Ctrl-Space",run:wpe},{key:"Escape",run:xpe},{key:"ArrowDown",run:z$(!0)},{key:"ArrowUp",run:z$(!1)},{key:"PageDown",run:z$(!0,"page")},{key:"PageUp",run:z$(!1,"page")},{key:"Enter",run:ype}],Vpe=Oy.highest(V6.computeN([Ul],u=>u.facet(Ul).defaultKeymap?[uae]:[]));class zpe{constructor(o,i,l){this.from=o,this.to=i,this.diagnostic=l}}class uy{constructor(o,i,l){this.diagnostics=o,this.panel=i,this.selected=l}static init(o,i,l){let d=o,m=l.facet(dM).markerFilter;m&&(d=m(d,l));let p=Zo.set(d.map(v=>v.from==v.to||v.from==v.to-1&&l.doc.lineAt(v.from).to==v.from?Zo.widget({widget:new Xpe(v),diagnostic:v}).range(v.from):Zo.mark({attributes:{class:"cm-lintRange cm-lintRange-"+v.severity+(v.markClass?" "+v.markClass:"")},diagnostic:v}).range(v.from,v.to)),!0);return new uy(p,i,A2(p))}}function A2(u,o=null,i=0){let l=null;return u.between(i,1e9,(d,m,{spec:p})=>{if(!(o&&p.diagnostic!=o))return l=new zpe(d,m,p.diagnostic),!1}),l}function Upe(u,o){let i=o.pos,l=o.end||i,d=u.state.facet(dM).hideOn(u,i,l);if(d!=null)return d;let m=u.startState.doc.lineAt(o.pos);return!!(u.effects.some(p=>p.is(dae))||u.changes.touchesRange(m.from,Math.max(m.to,l)))}function Wpe(u,o){return u.field(xd,!1)?o:o.concat(Fs.appendConfig.of(e1e))}const dae=Fs.define(),GQ=Fs.define(),fae=Fs.define(),xd=Zl.define({create(){return new uy(Zo.none,null,null)},update(u,o){if(o.docChanged&&u.diagnostics.size){let i=u.diagnostics.map(o.changes),l=null,d=u.panel;if(u.selected){let m=o.changes.mapPos(u.selected.from,1);l=A2(i,u.selected.diagnostic,m)||A2(i,null,m)}!i.size&&d&&o.state.facet(dM).autoPanel&&(d=null),u=new uy(i,d,l)}for(let i of o.effects)if(i.is(dae)){let l=o.state.facet(dM).autoPanel?i.value.length?fM.open:null:u.panel;u=uy.init(i.value,l,o.state)}else i.is(GQ)?u=new uy(u.diagnostics,i.value?fM.open:null,u.selected):i.is(fae)&&(u=new uy(u.diagnostics,u.panel,i.value));return u},provide:u=>[sM.from(u,o=>o.panel),po.decorations.from(u,o=>o.diagnostics)]}),jpe=Zo.mark({class:"cm-lintRange cm-lintRange-active"});function Zpe(u,o,i){let{diagnostics:l}=u.state.field(xd),d=[],m=2e8,p=0;l.between(o-(i<0?1:0),o+(i>0?1:0),(x,k,{spec:T})=>{o>=x&&o<=k&&(x==k||(o>x||i>0)&&(o<k||i<0))&&(d.push(T.diagnostic),m=Math.min(x,m),p=Math.max(k,p))});let v=u.state.facet(dM).tooltipFilter;return v&&(d=v(d,u.state)),d.length?{pos:m,end:p,above:u.state.doc.lineAt(m).to<p,create(){return{dom:qpe(u,d)}}}:null}function qpe(u,o){return Si("ul",{class:"cm-tooltip-lint"},o.map(i=>mae(u,i,!1)))}const Gpe=u=>{let o=u.state.field(xd,!1);(!o||!o.panel)&&u.dispatch({effects:Wpe(u.state,[GQ.of(!0)])});let i=oM(u,fM.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},Eoe=u=>{let o=u.state.field(xd,!1);return!o||!o.panel?!1:(u.dispatch({effects:GQ.of(!1)}),!0)},Kpe=u=>{let o=u.state.field(xd,!1);if(!o)return!1;let i=u.state.selection.main,l=o.diagnostics.iter(i.to+1);return!l.value&&(l=o.diagnostics.iter(0),!l.value||l.from==i.from&&l.to==i.to)?!1:(u.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0}),!0)},Ype=[{key:"Mod-Shift-m",run:Gpe,preventDefault:!0},{key:"F8",run:Kpe}],dM=Co.define({combine(u){return Object.assign({sources:u.map(o=>o.source).filter(o=>o!=null)},xm(u.map(o=>o.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(o,i)=>o?i?l=>o(l)||i(l):o:i}))}});function hae(u){let o=[];if(u)e:for(let{name:i}of u){for(let l=0;l<i.length;l++){let d=i[l];if(/[a-zA-Z]/.test(d)&&!o.some(m=>m.toLowerCase()==d.toLowerCase())){o.push(d);continue e}}o.push("")}return o}function mae(u,o,i){var l;let d=i?hae(o.actions):[];return Si("li",{class:"cm-diagnostic cm-diagnostic-"+o.severity},Si("span",{class:"cm-diagnosticText"},o.renderMessage?o.renderMessage(u):o.message),(l=o.actions)===null||l===void 0?void 0:l.map((m,p)=>{let v=!1,x=N=>{if(N.preventDefault(),v)return;v=!0;let I=A2(u.state.field(xd).diagnostics,o);I&&m.apply(u,I.from,I.to)},{name:k}=m,T=d[p]?k.indexOf(d[p]):-1,M=T<0?k:[k.slice(0,T),Si("u",k.slice(T,T+1)),k.slice(T+1)];return Si("button",{type:"button",class:"cm-diagnosticAction",onclick:x,onmousedown:x,"aria-label":` Action: ${k}${T<0?"":` (access key "${d[p]})"`}.`},M)}),o.source&&Si("div",{class:"cm-diagnosticSource"},o.source))}class Xpe extends qg{constructor(o){super(),this.diagnostic=o}eq(o){return o.diagnostic==this.diagnostic}toDOM(){return Si("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Aoe{constructor(o,i){this.diagnostic=i,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=mae(o,i,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class fM{constructor(o){this.view=o,this.items=[];let i=d=>{if(d.keyCode==27)Eoe(this.view),this.view.focus();else if(d.keyCode==38||d.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(d.keyCode==40||d.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(d.keyCode==36)this.moveSelection(0);else if(d.keyCode==35)this.moveSelection(this.items.length-1);else if(d.keyCode==13)this.view.focus();else if(d.keyCode>=65&&d.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:m}=this.items[this.selectedIndex],p=hae(m.actions);for(let v=0;v<p.length;v++)if(p[v].toUpperCase().charCodeAt(0)==d.keyCode){let x=A2(this.view.state.field(xd).diagnostics,m);x&&m.actions[v].apply(o,x.from,x.to)}}else return;d.preventDefault()},l=d=>{for(let m=0;m<this.items.length;m++)this.items[m].dom.contains(d.target)&&this.moveSelection(m)};this.list=Si("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:i,onclick:l}),this.dom=Si("div",{class:"cm-panel-lint"},this.list,Si("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Eoe(this.view)},"×")),this.update()}get selectedIndex(){let o=this.view.state.field(xd).selected;if(!o)return-1;for(let i=0;i<this.items.length;i++)if(this.items[i].diagnostic==o.diagnostic)return i;return-1}update(){let{diagnostics:o,selected:i}=this.view.state.field(xd),l=0,d=!1,m=null;for(o.between(0,this.view.state.doc.length,(p,v,{spec:x})=>{let k=-1,T;for(let M=l;M<this.items.length;M++)if(this.items[M].diagnostic==x.diagnostic){k=M;break}k<0?(T=new Aoe(this.view,x.diagnostic),this.items.splice(l,0,T),d=!0):(T=this.items[k],k>l&&(this.items.splice(l,k-l),d=!0)),i&&T.diagnostic==i.diagnostic?T.dom.hasAttribute("aria-selected")||(T.dom.setAttribute("aria-selected","true"),m=T):T.dom.hasAttribute("aria-selected")&&T.dom.removeAttribute("aria-selected"),l++});l<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)d=!0,this.items.pop();this.items.length==0&&(this.items.push(new Aoe(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),d=!0),m?(this.list.setAttribute("aria-activedescendant",m.id),this.view.requestMeasure({key:this,read:()=>({sel:m.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:p,panel:v})=>{let x=v.height/this.list.offsetHeight;p.top<v.top?this.list.scrollTop-=(v.top-p.top)/x:p.bottom>v.bottom&&(this.list.scrollTop+=(p.bottom-v.bottom)/x)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),d&&this.sync()}sync(){let o=this.list.firstChild;function i(){let l=o;o=l.nextSibling,l.remove()}for(let l of this.items)if(l.dom.parentNode==this.list){for(;o!=l.dom;)i();o=l.dom.nextSibling}else this.list.insertBefore(l.dom,o);for(;o;)i()}moveSelection(o){if(this.selectedIndex<0)return;let i=this.view.state.field(xd),l=A2(i.diagnostics,this.items[o].diagnostic);l&&this.view.dispatch({selection:{anchor:l.from,head:l.to},scrollIntoView:!0,effects:fae.of(l)})}static open(o){return new fM(o)}}function Jpe(u,o='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${o}>${encodeURIComponent(u)}</svg>')`}function U$(u){return Jpe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${u}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Qpe=po.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:U$("#d11")},".cm-lintRange-warning":{backgroundImage:U$("orange")},".cm-lintRange-info":{backgroundImage:U$("#999")},".cm-lintRange-hint":{backgroundImage:U$("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),e1e=[xd,po.decorations.compute([xd],u=>{let{selected:o,panel:i}=u.field(xd);return!o||!i||o.from==o.to?Zo.none:Zo.set([jpe.range(o.from,o.to)])}),jfe(Zpe,{hideOn:Upe}),Qpe],t1e=[nhe(),rhe(),wfe(),kme(),qhe(),cfe(),mfe(),lr.allowMultipleSelections.of(!0),Rhe(),nie(Xhe,{fallback:!0}),sme(),_pe(),Hpe(),Nfe(),Ife(),Afe(),Pge(),V6.of([...Rpe,...Ege,...Xge,...Rme,...Uhe,...uae,...Ype])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var n1e=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[t1e]}),o1e=Symbol("vue-codemirror-global-config"),Zc,s1e=function(u){var o=u.onUpdate,i=u.onChange,l=u.onFocus,d=u.onBlur,m=function(p,v){var x={};for(var k in p)Object.prototype.hasOwnProperty.call(p,k)&&v.indexOf(k)<0&&(x[k]=p[k]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function"){var T=0;for(k=Object.getOwnPropertySymbols(p);T<k.length;T++)v.indexOf(k[T])<0&&Object.prototype.propertyIsEnumerable.call(p,k[T])&&(x[k[T]]=p[k[T]])}return x}(u,["onUpdate","onChange","onFocus","onBlur"]);return lr.create({doc:m.doc,selection:m.selection,extensions:(Array.isArray(m.extensions)?m.extensions:[m.extensions]).concat([po.updateListener.of(function(p){o(p),p.docChanged&&i(p.state.doc.toString(),p),p.focusChanged&&(p.view.hasFocus?l(p):d(p))})])})},l2=function(u){var o=new gM;return{compartment:o,run:function(i){o.get(u.state)?u.dispatch({effects:o.reconfigure(i)}):u.dispatch({effects:Fs.appendConfig.of(o.of(i))})}}},Toe=function(u,o){var i=l2(u),l=i.compartment,d=i.run;return function(m){var p=l.get(u.state);d((m!=null?m:p!==o)?o:[])}},W$={type:Boolean,default:void 0},r1e={autofocus:W$,disabled:W$,indentWithTab:W$,tabSize:Number,placeholder:String,style:Object,autoDestroy:W$,phrases:Object,root:Object,extensions:Array,selection:Object},i1e={modelValue:{type:String,default:""}},a1e=Object.assign(Object.assign({},r1e),i1e);(function(u){u.Change="change",u.Update="update",u.Focus="focus",u.Blur="blur",u.Ready="ready",u.ModelUpdate="update:modelValue"})(Zc||(Zc={}));var dy={};dy[Zc.Change]=function(u,o){return!0},dy[Zc.Update]=function(u){return!0},dy[Zc.Focus]=function(u){return!0},dy[Zc.Blur]=function(u){return!0},dy[Zc.Ready]=function(u){return!0};var gae={};gae[Zc.ModelUpdate]=dy[Zc.Change];var l1e=Object.assign(Object.assign({},dy),gae),c1e=ui({name:"VueCodemirror",props:Object.assign({},a1e),emits:Object.assign({},l1e),setup:function(u,o){var i=RX(),l=RX(),d=RX(),m=Object.assign(Object.assign({},n1e),Ioe(o1e,{})),p=ms(function(){var v={};return Object.keys(KD(u)).forEach(function(x){var k;x!=="modelValue"&&(v[x]=(k=u[x])!==null&&k!==void 0?k:m[x])}),v});return Ty(function(){var v;l.value=s1e({doc:u.modelValue,selection:p.value.selection,extensions:(v=m.extensions)!==null&&v!==void 0?v:[],onFocus:function(k){return o.emit(Zc.Focus,k)},onBlur:function(k){return o.emit(Zc.Blur,k)},onUpdate:function(k){return o.emit(Zc.Update,k)},onChange:function(k,T){k!==u.modelValue&&(o.emit(Zc.Change,k,T),o.emit(Zc.ModelUpdate,k,T))}}),d.value=function(k){return new po(Object.assign({},k))}({state:l.value,parent:i.value,root:p.value.root});var x=function(k){var T=function(){return k.state.doc.toString()},M=l2(k).run,N=Toe(k,[po.editable.of(!1),lr.readOnly.of(!0)]),I=Toe(k,V6.of([Age])),z=l2(k).run,Y=l2(k).run,J=l2(k).run,q=l2(k).run;return{focus:function(){return k.focus()},getDoc:T,setDoc:function(ae){ae!==T()&&k.dispatch({changes:{from:0,to:k.state.doc.length,insert:ae}})},reExtensions:M,toggleDisabled:N,toggleIndentWithTab:I,setTabSize:function(ae){z([lr.tabSize.of(ae),W6.of(" ".repeat(ae))])},setPhrases:function(ae){Y([lr.phrases.of(ae)])},setPlaceholder:function(ae){J(Dfe(ae))},setStyle:function(ae){ae===void 0&&(ae={}),q(po.theme({"&":Object.assign({},ae)}))}}}(d.value);sr(function(){return u.modelValue},function(k){k!==x.getDoc()&&x.setDoc(k)}),sr(function(){return u.extensions},function(k){return x.reExtensions(k||[])},{immediate:!0}),sr(function(){return p.value.disabled},function(k){return x.toggleDisabled(k)},{immediate:!0}),sr(function(){return p.value.indentWithTab},function(k){return x.toggleIndentWithTab(k)},{immediate:!0}),sr(function(){return p.value.tabSize},function(k){return x.setTabSize(k)},{immediate:!0}),sr(function(){return p.value.phrases},function(k){return x.setPhrases(k||{})},{immediate:!0}),sr(function(){return p.value.placeholder},function(k){return x.setPlaceholder(k)},{immediate:!0}),sr(function(){return p.value.style},function(k){return x.setStyle(k)},{immediate:!0}),p.value.autofocus&&x.focus(),o.emit(Zc.Ready,{state:l.value,view:d.value,container:i.value})}),Loe(function(){p.value.autoDestroy&&d.value&&function(v){v.destroy()}(d.value)}),function(){return Gae("div",{class:"v-codemirror",style:{display:"contents"},ref:i})}}}),u1e=c1e,zD=(u=>(u.JSON="json",u.YAML="yaml",u))(zD||{}),pae=u=>{var{theme:o,settings:i={},styles:l=[]}=u,d={".cm-gutters":{}},m={};i.background&&(m.backgroundColor=i.background),i.backgroundImage&&(m.backgroundImage=i.backgroundImage),i.foreground&&(m.color=i.foreground),i.fontSize&&(m.fontSize=i.fontSize),(i.background||i.foreground)&&(d["&"]=m),i.fontFamily&&(d["&.cm-editor .cm-scroller"]={fontFamily:i.fontFamily}),i.gutterBackground&&(d[".cm-gutters"].backgroundColor=i.gutterBackground),i.gutterForeground&&(d[".cm-gutters"].color=i.gutterForeground),i.gutterBorder&&(d[".cm-gutters"].borderRightColor=i.gutterBorder),i.caret&&(d[".cm-content"]={caretColor:i.caret},d[".cm-cursor, .cm-dropCursor"]={borderLeftColor:i.caret});var p={};i.gutterActiveForeground&&(p.color=i.gutterActiveForeground),i.lineHighlight&&(d[".cm-activeLine"]={backgroundColor:i.lineHighlight},p.backgroundColor=i.lineHighlight),d[".cm-activeLineGutter"]=p,i.selection&&(d["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:i.selection+" !important"}),i.selectionMatch&&(d["& .cm-selectionMatch"]={backgroundColor:i.selectionMatch});var v=po.theme(d,{dark:o==="dark"}),x=xM.define(l),k=[v,nie(x)];return k},d1e={background:"#fff",foreground:"#24292e",selection:"#BBDFFF",selectionMatch:"#BBDFFF",gutterBackground:"#fff",gutterForeground:"#6e7781"},f1e=[{tag:[Ft.standard(Ft.tagName),Ft.tagName],color:"#116329"},{tag:[Ft.comment,Ft.bracket],color:"#6a737d"},{tag:[Ft.className,Ft.propertyName],color:"#6f42c1"},{tag:[Ft.variableName,Ft.attributeName,Ft.number,Ft.operator],color:"#005cc5"},{tag:[Ft.keyword,Ft.typeName,Ft.typeOperator,Ft.typeName],color:"#d73a49"},{tag:[Ft.string,Ft.meta,Ft.regexp],color:"#032f62"},{tag:[Ft.name,Ft.quote],color:"#22863a"},{tag:[Ft.heading,Ft.strong],color:"#24292e",fontWeight:"bold"},{tag:[Ft.emphasis],color:"#24292e",fontStyle:"italic"},{tag:[Ft.deleted],color:"#b31d28",backgroundColor:"ffeef0"},{tag:[Ft.atom,Ft.bool,Ft.special(Ft.variableName)],color:"#e36209"},{tag:[Ft.url,Ft.escape,Ft.regexp,Ft.link],color:"#032f62"},{tag:Ft.link,textDecoration:"underline"},{tag:Ft.strikethrough,textDecoration:"line-through"},{tag:Ft.invalid,color:"#cb2431"}],h1e=u=>{var{theme:o="light",settings:i={},styles:l=[]}={};return pae({theme:o,settings:Koe({},d1e,i),styles:[...f1e,...l]})},m1e=h1e(),g1e={background:"#0d1117",foreground:"#c9d1d9",caret:"#c9d1d9",selection:"#003d73",selectionMatch:"#003d73",lineHighlight:"#36334280"},p1e=[{tag:[Ft.standard(Ft.tagName),Ft.tagName],color:"#7ee787"},{tag:[Ft.comment,Ft.bracket],color:"#8b949e"},{tag:[Ft.className,Ft.propertyName],color:"#d2a8ff"},{tag:[Ft.variableName,Ft.attributeName,Ft.number,Ft.operator],color:"#79c0ff"},{tag:[Ft.keyword,Ft.typeName,Ft.typeOperator,Ft.typeName],color:"#ff7b72"},{tag:[Ft.string,Ft.meta,Ft.regexp],color:"#a5d6ff"},{tag:[Ft.name,Ft.quote],color:"#7ee787"},{tag:[Ft.heading,Ft.strong],color:"#d2a8ff",fontWeight:"bold"},{tag:[Ft.emphasis],color:"#d2a8ff",fontStyle:"italic"},{tag:[Ft.deleted],color:"#ffdcd7",backgroundColor:"ffeef0"},{tag:[Ft.atom,Ft.bool,Ft.special(Ft.variableName)],color:"#ffab70"},{tag:Ft.link,textDecoration:"underline"},{tag:Ft.strikethrough,textDecoration:"line-through"},{tag:Ft.invalid,color:"#f97583"}],b1e=u=>{var{theme:o="dark",settings:i={},styles:l=[]}={};return pae({theme:o,settings:Koe({},g1e,i),styles:[...p1e,...l]})},v1e=b1e(),y1e=["true","false","on","off","yes","no"],w1e=new RegExp("\\b(("+y1e.join(")|(")+"))$","i");const x1e={name:"yaml",token:function(u,o){var i=u.peek(),l=o.escaped;if(o.escaped=!1,i=="#"&&(u.pos==0||/\s/.test(u.string.charAt(u.pos-1))))return u.skipToEnd(),"comment";if(u.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(o.literal&&u.indentation()>o.keyCol)return u.skipToEnd(),"string";if(o.literal&&(o.literal=!1),u.sol()){if(o.keyCol=0,o.pair=!1,o.pairStart=!1,u.match("---")||u.match("..."))return"def";if(u.match(/^\s*-\s+/))return"meta"}if(u.match(/^(\{|\}|\[|\])/))return i=="{"?o.inlinePairs++:i=="}"?o.inlinePairs--:i=="["?o.inlineList++:o.inlineList--,"meta";if(o.inlineList>0&&!l&&i==",")return u.next(),"meta";if(o.inlinePairs>0&&!l&&i==",")return o.keyCol=0,o.pair=!1,o.pairStart=!1,u.next(),"meta";if(o.pairStart){if(u.match(/^\s*(\||\>)\s*/))return o.literal=!0,"meta";if(u.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(o.inlinePairs==0&&u.match(/^\s*-?[0-9\.\,]+\s?$/)||o.inlinePairs>0&&u.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(u.match(w1e))return"keyword"}return!o.pair&&u.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(o.pair=!0,o.keyCol=u.indentation(),"atom"):o.pair&&u.match(/^:\s*/)?(o.pairStart=!0,"meta"):(o.pairStart=!1,o.escaped=i=="\\",u.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};var Ooe={};class R6{constructor(o,i,l,d,m,p,v,x,k,T=0,M){this.p=o,this.stack=i,this.state=l,this.reducePos=d,this.pos=m,this.score=p,this.buffer=v,this.bufferBase=x,this.curContext=k,this.lookAhead=T,this.parent=M}toString(){return`[${this.stack.filter((o,i)=>i%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(o,i,l=0){let d=o.parser.context;return new R6(o,[],i,l,l,0,[],0,d?new _oe(d,d.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(o,i){this.stack.push(this.state,i,this.bufferBase+this.buffer.length),this.state=o}reduce(o){var i;let l=o>>19,d=o&65535,{parser:m}=this.p,p=this.reducePos<this.pos-25;p&&this.setLookAhead(this.pos);let v=m.dynamicPrecedence(d);if(v&&(this.score+=v),l==0){this.pushState(m.getGoto(this.state,d,!0),this.reducePos),d<m.minRepeatTerm&&this.storeNode(d,this.reducePos,this.reducePos,p?8:4,!0),this.reduceContext(d,this.reducePos);return}let x=this.stack.length-(l-1)*3-(o&262144?6:0),k=x?this.stack[x-2]:this.p.ranges[0].from,T=this.reducePos-k;T>=2e3&&!(!((i=this.p.parser.nodeSet.types[d])===null||i===void 0)&&i.isAnonymous)&&(k==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=T):this.p.lastBigReductionSize<T&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=k,this.p.lastBigReductionSize=T));let M=x?this.stack[x-1]:0,N=this.bufferBase+this.buffer.length-M;if(d<m.minRepeatTerm||o&131072){let I=m.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(d,k,I,N+4,!0)}if(o&262144)this.state=this.stack[x];else{let I=this.stack[x-3];this.state=m.getGoto(I,d,!0)}for(;this.stack.length>x;)this.stack.pop();this.reduceContext(d,k)}storeNode(o,i,l,d=4,m=!1){if(o==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let p=this,v=this.buffer.length;if(v==0&&p.parent&&(v=p.bufferBase-p.parent.bufferBase,p=p.parent),v>0&&p.buffer[v-4]==0&&p.buffer[v-1]>-1){if(i==l)return;if(p.buffer[v-2]>=i){p.buffer[v-2]=l;return}}}if(!m||this.pos==l)this.buffer.push(o,i,l,d);else{let p=this.buffer.length;if(p>0&&this.buffer[p-4]!=0){let v=!1;for(let x=p;x>0&&this.buffer[x-2]>l;x-=4)if(this.buffer[x-1]>=0){v=!0;break}if(v)for(;p>0&&this.buffer[p-2]>l;)this.buffer[p]=this.buffer[p-4],this.buffer[p+1]=this.buffer[p-3],this.buffer[p+2]=this.buffer[p-2],this.buffer[p+3]=this.buffer[p-1],p-=4,d>4&&(d-=4)}this.buffer[p]=o,this.buffer[p+1]=i,this.buffer[p+2]=l,this.buffer[p+3]=d}}shift(o,i,l,d){if(o&131072)this.pushState(o&65535,this.pos);else if(o&262144)this.pos=d,this.shiftContext(i,l),i<=this.p.parser.maxNode&&this.buffer.push(i,l,d,4);else{let m=o,{parser:p}=this.p;(d>this.pos||i<=p.maxNode)&&(this.pos=d,p.stateFlag(m,1)||(this.reducePos=d)),this.pushState(m,l),this.shiftContext(i,l),i<=p.maxNode&&this.buffer.push(i,l,d,4)}}apply(o,i,l,d){o&65536?this.reduce(o):this.shift(o,i,l,d)}useNode(o,i){let l=this.p.reused.length-1;(l<0||this.p.reused[l]!=o)&&(this.p.reused.push(o),l++);let d=this.pos;this.reducePos=this.pos=d+o.length,this.pushState(i,d),this.buffer.push(l,d,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,o,this,this.p.stream.reset(this.pos-o.length)))}split(){let o=this,i=o.buffer.length;for(;i>0&&o.buffer[i-2]>o.reducePos;)i-=4;let l=o.buffer.slice(i),d=o.bufferBase+i;for(;o&&d==o.bufferBase;)o=o.parent;return new R6(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,l,d,this.curContext,this.lookAhead,o)}recoverByDelete(o,i){let l=o<=this.p.parser.maxNode;l&&this.storeNode(o,this.pos,i,4),this.storeNode(0,this.pos,i,l?8:4),this.pos=this.reducePos=i,this.score-=190}canShift(o){for(let i=new C1e(this);;){let l=this.p.parser.stateSlot(i.state,4)||this.p.parser.hasAction(i.state,o);if(l==0)return!1;if(!(l&65536))return!0;i.reduce(l)}}recoverByInsert(o){if(this.stack.length>=300)return[];let i=this.p.parser.nextStates(this.state);if(i.length>8||this.stack.length>=120){let d=[];for(let m=0,p;m<i.length;m+=2)(p=i[m+1])!=this.state&&this.p.parser.hasAction(p,o)&&d.push(i[m],p);if(this.stack.length<120)for(let m=0;d.length<8&&m<i.length;m+=2){let p=i[m+1];d.some((v,x)=>x&1&&v==p)||d.push(i[m],p)}i=d}let l=[];for(let d=0;d<i.length&&l.length<4;d+=2){let m=i[d+1];if(m==this.state)continue;let p=this.split();p.pushState(m,this.pos),p.storeNode(0,p.pos,p.pos,4,!0),p.shiftContext(i[d],this.pos),p.reducePos=this.pos,p.score-=200,l.push(p)}return l}forceReduce(){let{parser:o}=this.p,i=o.stateSlot(this.state,5);if(!(i&65536))return!1;if(!o.validAction(this.state,i)){let l=i>>19,d=i&65535,m=this.stack.length-l*3;if(m<0||o.getGoto(this.stack[m],d,!1)<0){let p=this.findForcedReduction();if(p==null)return!1;i=p}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(i),!0}findForcedReduction(){let{parser:o}=this.p,i=[],l=(d,m)=>{if(!i.includes(d))return i.push(d),o.allActions(d,p=>{if(!(p&393216))if(p&65536){let v=(p>>19)-m;if(v>1){let x=p&65535,k=this.stack.length-v*3;if(k>=0&&o.getGoto(this.stack[k],x,!1)>=0)return v<<19|65536|x}}else{let v=l(p,m+1);if(v!=null)return v}})};return l(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:o}=this.p;return o.data[o.stateSlot(this.state,1)]==65535&&!o.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(o){if(this.state!=o.state||this.stack.length!=o.stack.length)return!1;for(let i=0;i<this.stack.length;i+=3)if(this.stack[i]!=o.stack[i])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(o){return this.p.parser.dialect.flags[o]}shiftContext(o,i){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,o,this,this.p.stream.reset(i)))}reduceContext(o,i){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,o,this,this.p.stream.reset(i)))}emitContext(){let o=this.buffer.length-1;(o<0||this.buffer[o]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let o=this.buffer.length-1;(o<0||this.buffer[o]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(o){if(o!=this.curContext.context){let i=new _oe(this.curContext.tracker,o);i.hash!=this.curContext.hash&&this.emitContext(),this.curContext=i}}setLookAhead(o){o>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=o)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class _oe{constructor(o,i){this.tracker=o,this.context=i,this.hash=o.strict?o.hash(i):0}}class C1e{constructor(o){this.start=o,this.state=o.state,this.stack=o.stack,this.base=this.stack.length}reduce(o){let i=o&65535,l=o>>19;l==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(l-1)*3;let d=this.start.p.parser.getGoto(this.stack[this.base-3],i,!0);this.state=d}}class N6{constructor(o,i,l){this.stack=o,this.pos=i,this.index=l,this.buffer=o.buffer,this.index==0&&this.maybeNext()}static create(o,i=o.bufferBase+o.buffer.length){return new N6(o,i,i-o.bufferBase)}maybeNext(){let o=this.stack.parent;o!=null&&(this.index=this.stack.bufferBase-o.bufferBase,this.stack=o,this.buffer=o.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new N6(this.stack,this.pos,this.index)}}function j$(u,o=Uint16Array){if(typeof u!="string")return u;let i=null;for(let l=0,d=0;l<u.length;){let m=0;for(;;){let p=u.charCodeAt(l++),v=!1;if(p==126){m=65535;break}p>=92&&p--,p>=34&&p--;let x=p-32;if(x>=46&&(x-=46,v=!0),m+=x,v)break;m*=46}i?i[d++]=m:i=new o(m)}return i}class o6{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Doe=new o6;class S1e{constructor(o,i){this.input=o,this.ranges=i,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Doe,this.rangeIndex=0,this.pos=this.chunkPos=i[0].from,this.range=i[0],this.end=i[i.length-1].to,this.readNext()}resolveOffset(o,i){let l=this.range,d=this.rangeIndex,m=this.pos+o;for(;m<l.from;){if(!d)return null;let p=this.ranges[--d];m-=l.from-p.to,l=p}for(;i<0?m>l.to:m>=l.to;){if(d==this.ranges.length-1)return null;let p=this.ranges[++d];m+=p.from-l.to,l=p}return m}clipPos(o){if(o>=this.range.from&&o<this.range.to)return o;for(let i of this.ranges)if(i.to>o)return Math.max(o,i.from);return this.end}peek(o){let i=this.chunkOff+o,l,d;if(i>=0&&i<this.chunk.length)l=this.pos+o,d=this.chunk.charCodeAt(i);else{let m=this.resolveOffset(o,1);if(m==null)return-1;if(l=m,l>=this.chunk2Pos&&l<this.chunk2Pos+this.chunk2.length)d=this.chunk2.charCodeAt(l-this.chunk2Pos);else{let p=this.rangeIndex,v=this.range;for(;v.to<=l;)v=this.ranges[++p];this.chunk2=this.input.chunk(this.chunk2Pos=l),l+this.chunk2.length>v.to&&(this.chunk2=this.chunk2.slice(0,v.to-l)),d=this.chunk2.charCodeAt(0)}}return l>=this.token.lookAhead&&(this.token.lookAhead=l+1),d}acceptToken(o,i=0){let l=i?this.resolveOffset(i,-1):this.pos;if(l==null||l<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=o,this.token.end=l}acceptTokenTo(o,i){this.token.value=o,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:o,chunkPos:i}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=o,this.chunk2Pos=i,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let o=this.input.chunk(this.pos),i=this.pos+o.length;this.chunk=i>this.range.to?o.slice(0,this.range.to-this.pos):o,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(o=1){for(this.chunkOff+=o;this.pos+o>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();o-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=o,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(o,i){if(i?(this.token=i,i.start=o,i.lookAhead=o+1,i.value=i.extended=-1):this.token=Doe,this.pos!=o){if(this.pos=o,o==this.end)return this.setDone(),this;for(;o<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;o>=this.range.to;)this.range=this.ranges[++this.rangeIndex];o>=this.chunkPos&&o<this.chunkPos+this.chunk.length?this.chunkOff=o-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(o,i){if(o>=this.chunkPos&&i<=this.chunkPos+this.chunk.length)return this.chunk.slice(o-this.chunkPos,i-this.chunkPos);if(o>=this.chunk2Pos&&i<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(o-this.chunk2Pos,i-this.chunk2Pos);if(o>=this.range.from&&i<=this.range.to)return this.input.read(o,i);let l="";for(let d of this.ranges){if(d.from>=i)break;d.to>o&&(l+=this.input.read(Math.max(d.from,o),Math.min(d.to,i)))}return l}}class b2{constructor(o,i){this.data=o,this.id=i}token(o,i){let{parser:l}=i.p;k1e(this.data,o,i,this.id,l.data,l.tokenPrecTable)}}b2.prototype.contextual=b2.prototype.fallback=b2.prototype.extend=!1;b2.prototype.fallback=b2.prototype.extend=!1;function k1e(u,o,i,l,d,m){let p=0,v=1<<l,{dialect:x}=i.p.parser;e:for(;v&u[p];){let k=u[p+1];for(let I=p+3;I<k;I+=2)if((u[I+1]&v)>0){let z=u[I];if(x.allows(z)&&(o.token.value==-1||o.token.value==z||E1e(z,o.token.value,d,m))){o.acceptToken(z);break}}let T=o.next,M=0,N=u[p+2];if(o.next<0&&N>M&&u[k+N*3-3]==65535){p=u[k+N*3-1];continue e}for(;M<N;){let I=M+N>>1,z=k+I+(I<<1),Y=u[z],J=u[z+1]||65536;if(T<Y)N=I;else if(T>=J)M=I+1;else{p=u[z+2],o.advance();continue e}}break}}function Moe(u,o,i){for(let l=o,d;(d=u[l])!=65535;l++)if(d==i)return l-o;return-1}function E1e(u,o,i,l){let d=Moe(i,l,o);return d<0||Moe(i,l,u)<d}const bd=typeof process!="undefined"&&Ooe&&/\bparse\b/.test(Ooe.LOG);let aJ=null;function Poe(u,o,i){let l=u.cursor(kl.IncludeAnonymous);for(l.moveTo(o);;)if(!(i<0?l.childBefore(o):l.childAfter(o)))for(;;){if((i<0?l.to<o:l.from>o)&&!l.type.isError)return i<0?Math.max(0,Math.min(l.to-1,o-25)):Math.min(u.length,Math.max(l.from+1,o+25));if(i<0?l.prevSibling():l.nextSibling())break;if(!l.parent())return i<0?0:u.length}}class A1e{constructor(o,i){this.fragments=o,this.nodeSet=i,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let o=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(o){for(this.safeFrom=o.openStart?Poe(o.tree,o.from+o.offset,1)-o.offset:o.from,this.safeTo=o.openEnd?Poe(o.tree,o.to+o.offset,-1)-o.offset:o.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(o.tree),this.start.push(-o.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(o){if(o<this.nextStart)return null;for(;this.fragment&&this.safeTo<=o;)this.nextFragment();if(!this.fragment)return null;for(;;){let i=this.trees.length-1;if(i<0)return this.nextFragment(),null;let l=this.trees[i],d=this.index[i];if(d==l.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let m=l.children[d],p=this.start[i]+l.positions[d];if(p>o)return this.nextStart=p,null;if(m instanceof ci){if(p==o){if(p<this.safeFrom)return null;let v=p+m.length;if(v<=this.safeTo){let x=m.prop(Gs.lookAhead);if(!x||v+x<this.fragment.to)return m}}this.index[i]++,p+m.length>=Math.max(this.safeFrom,o)&&(this.trees.push(m),this.start.push(p),this.index.push(0))}else this.index[i]++,this.nextStart=p+m.length}}}class T1e{constructor(o,i){this.stream=i,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=o.tokenizers.map(l=>new o6)}getActions(o){let i=0,l=null,{parser:d}=o.p,{tokenizers:m}=d,p=d.stateSlot(o.state,3),v=o.curContext?o.curContext.hash:0,x=0;for(let k=0;k<m.length;k++){if(!(1<<k&p))continue;let T=m[k],M=this.tokens[k];if(!(l&&!T.fallback)&&((T.contextual||M.start!=o.pos||M.mask!=p||M.context!=v)&&(this.updateCachedToken(M,T,o),M.mask=p,M.context=v),M.lookAhead>M.end+25&&(x=Math.max(M.lookAhead,x)),M.value!=0)){let N=i;if(M.extended>-1&&(i=this.addActions(o,M.extended,M.end,i)),i=this.addActions(o,M.value,M.end,i),!T.extend&&(l=M,i>N))break}}for(;this.actions.length>i;)this.actions.pop();return x&&o.setLookAhead(x),!l&&o.pos==this.stream.end&&(l=new o6,l.value=o.p.parser.eofTerm,l.start=l.end=o.pos,i=this.addActions(o,l.value,l.end,i)),this.mainToken=l,this.actions}getMainToken(o){if(this.mainToken)return this.mainToken;let i=new o6,{pos:l,p:d}=o;return i.start=l,i.end=Math.min(l+1,d.stream.end),i.value=l==d.stream.end?d.parser.eofTerm:0,i}updateCachedToken(o,i,l){let d=this.stream.clipPos(l.pos);if(i.token(this.stream.reset(d,o),l),o.value>-1){let{parser:m}=l.p;for(let p=0;p<m.specialized.length;p++)if(m.specialized[p]==o.value){let v=m.specializers[p](this.stream.read(o.start,o.end),l);if(v>=0&&l.p.parser.dialect.allows(v>>1)){v&1?o.extended=v>>1:o.value=v>>1;break}}}else o.value=0,o.end=this.stream.clipPos(d+1)}putAction(o,i,l,d){for(let m=0;m<d;m+=3)if(this.actions[m]==o)return d;return this.actions[d++]=o,this.actions[d++]=i,this.actions[d++]=l,d}addActions(o,i,l,d){let{state:m}=o,{parser:p}=o.p,{data:v}=p;for(let x=0;x<2;x++)for(let k=p.stateSlot(m,x?2:1);;k+=3){if(v[k]==65535)if(v[k+1]==1)k=$g(v,k+2);else{d==0&&v[k+1]==2&&(d=this.putAction($g(v,k+2),i,l,d));break}v[k]==i&&(d=this.putAction($g(v,k+1),i,l,d))}return d}}class O1e{constructor(o,i,l,d){this.parser=o,this.input=i,this.ranges=d,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new S1e(i,d),this.tokens=new T1e(o,this.stream),this.topTerm=o.top[1];let{from:m}=d[0];this.stacks=[R6.start(this,o.top[0],m)],this.fragments=l.length&&this.stream.end-m>o.bufferLength*4?new A1e(l,o.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let o=this.stacks,i=this.minStackPos,l=this.stacks=[],d,m;if(this.bigReductionCount>300&&o.length==1){let[p]=o;for(;p.forceReduce()&&p.stack.length&&p.stack[p.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let p=0;p<o.length;p++){let v=o[p];for(;;){if(this.tokens.mainToken=null,v.pos>i)l.push(v);else{if(this.advanceStack(v,l,o))continue;{d||(d=[],m=[]),d.push(v);let x=this.tokens.getMainToken(v);m.push(x.value,x.end)}}break}}if(!l.length){let p=d&&D1e(d);if(p)return this.stackToTree(p);if(this.parser.strict)throw new SyntaxError("No parse at "+i);this.recovering||(this.recovering=5)}if(this.recovering&&d){let p=this.stoppedAt!=null&&d[0].pos>this.stoppedAt?d[0]:this.runRecovery(d,m,l);if(p)return this.stackToTree(p.forceAll())}if(this.recovering){let p=this.recovering==1?1:this.recovering*3;if(l.length>p)for(l.sort((v,x)=>x.score-v.score);l.length>p;)l.pop();l.some(v=>v.reducePos>i)&&this.recovering--}else if(l.length>1){e:for(let p=0;p<l.length-1;p++){let v=l[p];for(let x=p+1;x<l.length;x++){let k=l[x];if(v.sameState(k)||v.buffer.length>500&&k.buffer.length>500)if((v.score-k.score||v.buffer.length-k.buffer.length)>0)l.splice(x--,1);else{l.splice(p--,1);continue e}}}l.length>12&&l.splice(12,l.length-12)}this.minStackPos=l[0].pos;for(let p=1;p<l.length;p++)l[p].pos<this.minStackPos&&(this.minStackPos=l[p].pos);return null}stopAt(o){if(this.stoppedAt!=null&&this.stoppedAt<o)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=o}advanceStack(o,i,l){let d=o.pos,{parser:m}=this,p=bd?this.stackID(o)+" -> ":"";if(this.stoppedAt!=null&&d>this.stoppedAt)return o.forceReduce()?o:null;if(this.fragments){let k=o.curContext&&o.curContext.tracker.strict,T=k?o.curContext.hash:0;for(let M=this.fragments.nodeAt(d);M;){let N=this.parser.nodeSet.types[M.type.id]==M.type?m.getGoto(o.state,M.type.id):-1;if(N>-1&&M.length&&(!k||(M.prop(Gs.contextHash)||0)==T))return o.useNode(M,N),!0;if(!(M instanceof ci)||M.children.length==0||M.positions[0]>0)break;let I=M.children[0];if(I instanceof ci&&M.positions[0]==0)M=I;else break}}let v=m.stateSlot(o.state,4);if(v>0)return o.reduce(v),!0;if(o.stack.length>=8400)for(;o.stack.length>6e3&&o.forceReduce(););let x=this.tokens.getActions(o);for(let k=0;k<x.length;){let T=x[k++],M=x[k++],N=x[k++],I=k==x.length||!l,z=I?o:o.split(),Y=this.tokens.mainToken;if(z.apply(T,M,Y?Y.start:z.pos,N),I)return!0;z.pos>d?i.push(z):l.push(z)}return!1}advanceFully(o,i){let l=o.pos;for(;;){if(!this.advanceStack(o,null,null))return!1;if(o.pos>l)return Roe(o,i),!0}}runRecovery(o,i,l){let d=null,m=!1;for(let p=0;p<o.length;p++){let v=o[p],x=i[p<<1],k=i[(p<<1)+1],T=bd?this.stackID(v)+" -> ":"";if(v.deadEnd&&(m||(m=!0,v.restart(),this.advanceFully(v,l))))continue;let M=v.split(),N=T;for(let I=0;M.forceReduce()&&I<10&&!this.advanceFully(M,l);I++)bd&&(N=this.stackID(M)+" -> ");for(let I of v.recoverByInsert(x))this.advanceFully(I,l);this.stream.end>v.pos?(k==v.pos&&(k++,x=0),v.recoverByDelete(x,k),Roe(v,l)):(!d||d.score<v.score)&&(d=v)}return d}stackToTree(o){return o.close(),ci.build({buffer:N6.create(o),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:o.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(o){let i=(aJ||(aJ=new WeakMap)).get(o);return i||aJ.set(o,i=String.fromCodePoint(this.nextStackID++)),i+o}}function Roe(u,o){for(let i=0;i<o.length;i++){let l=o[i];if(l.pos==u.pos&&l.sameState(u)){o[i].score<u.score&&(o[i]=u);return}}o.push(u)}class _1e{constructor(o,i,l){this.source=o,this.flags=i,this.disabled=l}allows(o){return!this.disabled||this.disabled[o]==0}}class B6 extends RQ{constructor(o){if(super(),this.wrappers=[],o.version!=14)throw new RangeError(`Parser version (${o.version}) doesn't match runtime version (14)`);let i=o.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let v=0;v<o.repeatNodeCount;v++)i.push("");let l=Object.keys(o.topRules).map(v=>o.topRules[v][1]),d=[];for(let v=0;v<i.length;v++)d.push([]);function m(v,x,k){d[v].push([x,x.deserialize(String(k))])}if(o.nodeProps)for(let v of o.nodeProps){let x=v[0];typeof x=="string"&&(x=Gs[x]);for(let k=1;k<v.length;){let T=v[k++];if(T>=0)m(T,x,v[k++]);else{let M=v[k+-T];for(let N=-T;N>0;N--)m(v[k++],x,M);k++}}}this.nodeSet=new U6(i.map((v,x)=>Jc.define({name:x>=this.minRepeatTerm?void 0:v,id:x,props:d[x],top:l.indexOf(x)>-1,error:x==0,skipped:o.skippedNodes&&o.skippedNodes.indexOf(x)>-1}))),o.propSources&&(this.nodeSet=this.nodeSet.extend(...o.propSources)),this.strict=!1,this.bufferLength=Bre;let p=j$(o.tokenData);this.context=o.context,this.specializerSpecs=o.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let v=0;v<this.specializerSpecs.length;v++)this.specialized[v]=this.specializerSpecs[v].term;this.specializers=this.specializerSpecs.map(Noe),this.states=j$(o.states,Uint32Array),this.data=j$(o.stateData),this.goto=j$(o.goto),this.maxTerm=o.maxTerm,this.tokenizers=o.tokenizers.map(v=>typeof v=="number"?new b2(p,v):v),this.topRules=o.topRules,this.dialects=o.dialects||{},this.dynamicPrecedences=o.dynamicPrecedences||null,this.tokenPrecTable=o.tokenPrec,this.termNames=o.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(o,i,l){let d=new O1e(this,o,i,l);for(let m of this.wrappers)d=m(d,o,i,l);return d}getGoto(o,i,l=!1){let d=this.goto;if(i>=d[0])return-1;for(let m=d[i+1];;){let p=d[m++],v=p&1,x=d[m++];if(v&&l)return x;for(let k=m+(p>>1);m<k;m++)if(d[m]==o)return x;if(v)return-1}}hasAction(o,i){let l=this.data;for(let d=0;d<2;d++)for(let m=this.stateSlot(o,d?2:1),p;;m+=3){if((p=l[m])==65535)if(l[m+1]==1)p=l[m=$g(l,m+2)];else{if(l[m+1]==2)return $g(l,m+2);break}if(p==i||p==0)return $g(l,m+1)}return 0}stateSlot(o,i){return this.states[o*6+i]}stateFlag(o,i){return(this.stateSlot(o,0)&i)>0}validAction(o,i){return!!this.allActions(o,l=>l==i?!0:null)}allActions(o,i){let l=this.stateSlot(o,4),d=l?i(l):void 0;for(let m=this.stateSlot(o,1);d==null;m+=3){if(this.data[m]==65535)if(this.data[m+1]==1)m=$g(this.data,m+2);else break;d=i($g(this.data,m+1))}return d}nextStates(o){let i=[];for(let l=this.stateSlot(o,1);;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=$g(this.data,l+2);else break;if(!(this.data[l+2]&1)){let d=this.data[l+1];i.some((m,p)=>p&1&&m==d)||i.push(this.data[l],d)}}return i}configure(o){let i=Object.assign(Object.create(B6.prototype),this);if(o.props&&(i.nodeSet=this.nodeSet.extend(...o.props)),o.top){let l=this.topRules[o.top];if(!l)throw new RangeError(`Invalid top rule name ${o.top}`);i.top=l}return o.tokenizers&&(i.tokenizers=this.tokenizers.map(l=>{let d=o.tokenizers.find(m=>m.from==l);return d?d.to:l})),o.specializers&&(i.specializers=this.specializers.slice(),i.specializerSpecs=this.specializerSpecs.map((l,d)=>{let m=o.specializers.find(v=>v.from==l.external);if(!m)return l;let p=Object.assign(Object.assign({},l),{external:m.to});return i.specializers[d]=Noe(p),p})),o.contextTracker&&(i.context=o.contextTracker),o.dialect&&(i.dialect=this.parseDialect(o.dialect)),o.strict!=null&&(i.strict=o.strict),o.wrap&&(i.wrappers=i.wrappers.concat(o.wrap)),o.bufferLength!=null&&(i.bufferLength=o.bufferLength),i}hasWrappers(){return this.wrappers.length>0}getName(o){return this.termNames?this.termNames[o]:String(o<=this.maxNode&&this.nodeSet.types[o].name||o)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(o){let i=this.dynamicPrecedences;return i==null?0:i[o]||0}parseDialect(o){let i=Object.keys(this.dialects),l=i.map(()=>!1);if(o)for(let m of o.split(" ")){let p=i.indexOf(m);p>=0&&(l[p]=!0)}let d=null;for(let m=0;m<i.length;m++)if(!l[m])for(let p=this.dialects[i[m]],v;(v=this.data[p++])!=65535;)(d||(d=new Uint8Array(this.maxTerm+1)))[v]=1;return new _1e(o,l,d)}static deserialize(o){return new B6(o)}}function $g(u,o){return u[o]|u[o+1]<<16}function D1e(u){let o=null;for(let i of u){let l=i.p.stoppedAt;(i.pos==i.p.stream.end||l!=null&&i.pos>l)&&i.p.parser.stateFlag(i.state,2)&&(!o||o.score<i.score)&&(o=i)}return o}function Noe(u){if(u.external){let o=u.extend?1:0;return(i,l)=>u.external(i,l)<<1|o}return u.get}const M1e=$re({String:Ft.string,Number:Ft.number,"True False":Ft.bool,PropertyName:Ft.propertyName,Null:Ft.null,",":Ft.separator,"[ ]":Ft.squareBracket,"{ }":Ft.brace}),P1e=B6.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[M1e],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oc~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Oe~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zOh~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yOg~~'OO]~~'TO[~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),R1e=x6.define({name:"json",parser:P1e.configure({props:[jre.add({Object:eoe({except:/^\s*\}/}),Array:eoe({except:/^\s*\]/})}),qre.add({"Object Array":Bhe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function N1e(){return new khe(R1e)}const B1e={class:"h-full"},F1e=ui({__name:"CodeEditor",props:{value:{type:[Object,String]},mode:{type:String,default:zD.JSON,validator(u){return Object.values(zD).includes(u)}},autoFormat:{type:Boolean,default:!0}},emits:["change","update:value","format-error"],setup(u,{emit:o}){const i=u,l=mo("");Kae(()=>{l.value=i.value});const d=o,p=zoe().getDarkMode;let v=[];switch(p==="dark"?v.push(v1e):v.push(m1e),i.mode){case zD.YAML:{v.push(FQ.define(x1e));break}case zD.JSON:v.push(N1e())}function x(k){d("update:value",k),d("change",k)}return(k,T)=>(No(),ai("div",B1e,[Xn(Ge(u1e),{"model-value":l.value,"onUpdate:modelValue":T[0]||(T[0]=M=>l.value=M),onChange:x,extensions:Ge(v),autofocus:!0,"indent-with-tab":!0,"tab-size":2},null,8,["model-value","extensions"])]))}}),I1e=I6(F1e);var bae={exports:{}};(function(u){(function(){var o=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},i=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},l=function(e,n){var s=Array.prototype.slice.call(e);return s.sort(n)},d=function(e,n){return m(function(s,a){return e.eq(n(s),n(a))})},m=function(e){return{eq:e}},p=m(function(e,n){return e===n}),v=p,x=function(e){return m(function(n,s){if(n.length!==s.length)return!1;for(var a=n.length,f=0;f<a;f++)if(!e.eq(n[f],s[f]))return!1;return!0})},k=function(e,n){return d(x(e),function(s){return l(s,n)})},T=function(e){return m(function(n,s){var a=Object.keys(n),f=Object.keys(s);if(!k(v).eq(a,f))return!1;for(var g=a.length,y=0;y<g;y++){var S=a[y];if(!e.eq(n[S],s[S]))return!1}return!0})},M=m(function(e,n){if(e===n)return!0;var s=o(e),a=o(n);return s!==a?!1:i(s)?e===n:s==="array"?x(M).eq(e,n):s==="object"?T(M).eq(e,n):!1});const N=Object.getPrototypeOf,I=(e,n,s)=>{var a;return s(e,n.prototype)?!0:((a=e.constructor)===null||a===void 0?void 0:a.name)===n.name},z=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&I(e,String,(s,a)=>a.isPrototypeOf(s))?"string":n},Y=e=>n=>z(n)===e,J=e=>n=>typeof n===e,q=e=>n=>e===n,ae=(e,n)=>ce(e)&&I(e,n,(s,a)=>N(s)===a),Z=Y("string"),ce=Y("object"),_e=e=>ae(e,Object),De=Y("array"),G=q(null),qe=J("boolean"),Re=q(void 0),$e=e=>e==null,le=e=>!$e(e),Ee=J("function"),ft=J("number"),ne=(e,n)=>{if(De(e)){for(let s=0,a=e.length;s<a;++s)if(!n(e[s]))return!1;return!0}return!1},ge=()=>{},O=(e,n)=>(...s)=>e(n.apply(null,s)),Ye=(e,n)=>s=>e(n(s)),me=e=>()=>e,lt=e=>e,qt=(e,n)=>e===n;function Be(e,...n){return(...s)=>{const a=n.concat(s);return e.apply(null,a)}}const Ue=e=>n=>!e(n),yt=e=>()=>{throw new Error(e)},Ie=e=>e(),wt=e=>{e()},ue=me(!1),je=me(!0);class V{constructor(n,s){this.tag=n,this.value=s}static some(n){return new V(!0,n)}static none(){return V.singletonNone}fold(n,s){return this.tag?s(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?V.some(n(this.value)):V.none()}bind(n){return this.tag?n(this.value):V.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:V.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return le(n)?V.some(n):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}V.singletonNone=new V(!1);const kn=Array.prototype.slice,un=Array.prototype.indexOf,oo=Array.prototype.push,Do=(e,n)=>un.call(e,n),Ss=(e,n)=>{const s=Do(e,n);return s===-1?V.none():V.some(s)},Qe=(e,n)=>Do(e,n)>-1,Bt=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const f=e[s];if(n(f,s))return!0}return!1},nt=(e,n)=>{const s=e.length,a=new Array(s);for(let f=0;f<s;f++){const g=e[f];a[f]=n(g,f)}return a},de=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const f=e[s];n(f,s)}},xe=(e,n)=>{for(let s=e.length-1;s>=0;s--){const a=e[s];n(a,s)}},Fe=(e,n)=>{const s=[],a=[];for(let f=0,g=e.length;f<g;f++){const y=e[f];(n(y,f)?s:a).push(y)}return{pass:s,fail:a}},Ne=(e,n)=>{const s=[];for(let a=0,f=e.length;a<f;a++){const g=e[a];n(g,a)&&s.push(g)}return s},kt=(e,n,s)=>(xe(e,(a,f)=>{s=n(s,a,f)}),s),ve=(e,n,s)=>(de(e,(a,f)=>{s=n(s,a,f)}),s),We=(e,n,s)=>{for(let a=0,f=e.length;a<f;a++){const g=e[a];if(n(g,a))return V.some(g);if(s(g,a))break}return V.none()},st=(e,n)=>We(e,n,ue),en=(e,n)=>{for(let s=0,a=e.length;s<a;s++){const f=e[s];if(n(f,s))return V.some(s)}return V.none()},jn=e=>{const n=[];for(let s=0,a=e.length;s<a;++s){if(!De(e[s]))throw new Error("Arr.flatten item "+s+" was not an array, input: "+e);oo.apply(n,e[s])}return n},On=(e,n)=>jn(nt(e,n)),ao=(e,n)=>{for(let s=0,a=e.length;s<a;++s){const f=e[s];if(n(f,s)!==!0)return!1}return!0},Yn=e=>{const n=kn.call(e,0);return n.reverse(),n},ls=(e,n)=>Ne(e,s=>!Qe(n,s)),Xe=(e,n)=>{const s={};for(let a=0,f=e.length;a<f;a++){const g=e[a];s[String(g)]=n(g,a)}return s},pt=(e,n)=>{const s=kn.call(e,0);return s.sort(n),s},Pt=(e,n)=>n>=0&&n<e.length?V.some(e[n]):V.none(),jt=e=>Pt(e,0),vn=e=>Pt(e,e.length-1),so=Ee(Array.from)?Array.from:e=>kn.call(e),lo=(e,n)=>{for(let s=0;s<e.length;s++){const a=n(e[s],s);if(a.isSome())return a}return V.none()},Qo=(e,n)=>{const s=[],a=Ee(n)?f=>Bt(s,g=>n(g,f)):f=>Qe(s,f);for(let f=0,g=e.length;f<g;f++){const y=e[f];a(y)||s.push(y)}return s},Bo=Object.keys,cs=Object.hasOwnProperty,$t=(e,n)=>{const s=Bo(e);for(let a=0,f=s.length;a<f;a++){const g=s[a],y=e[g];n(y,g)}},So=(e,n)=>Js(e,(s,a)=>({k:a,v:n(s,a)})),Js=(e,n)=>{const s={};return $t(e,(a,f)=>{const g=n(a,f);s[g.k]=g.v}),s},wr=e=>(n,s)=>{e[s]=n},Zr=(e,n,s,a)=>{$t(e,(f,g)=>{(n(f,g)?s:a)(f,g)})},hr=(e,n)=>{const s={},a={};return Zr(e,n,wr(s),wr(a)),{t:s,f:a}},di=(e,n)=>{const s={};return Zr(e,n,wr(s),ge),s},xr=(e,n)=>{const s=[];return $t(e,(a,f)=>{s.push(n(a,f))}),s},fi=e=>xr(e,lt),us=(e,n)=>Bn(e,n)?V.from(e[n]):V.none(),Bn=(e,n)=>cs.call(e,n),hi=(e,n)=>Bn(e,n)&&e[n]!==void 0&&e[n]!==null,Ke=(e,n,s=M)=>T(s).eq(e,n),ht=e=>{const n={};return de(e,s=>{n[s]={}}),Bo(n)},tn=e=>e.length!==void 0,In=Array.isArray,bo=e=>{if(In(e))return e;{const n=[];for(let s=0,a=e.length;s<a;s++)n[s]=e[s];return n}},Ks=(e,n,s)=>{if(!e)return!1;if(s=s||e,tn(e)){for(let a=0,f=e.length;a<f;a++)if(n.call(s,e[a],a,e)===!1)return!1}else for(const a in e)if(Bn(e,a)&&n.call(s,e[a],a,e)===!1)return!1;return!0},Lr=(e,n)=>{const s=[];return Ks(e,(a,f)=>{s.push(n(a,f,e))}),s},mr=(e,n)=>{const s=[];return Ks(e,(a,f)=>{(!n||n(a,f,e))&&s.push(a)}),s},_r=(e,n)=>{if(e){for(let s=0,a=e.length;s<a;s++)if(e[s]===n)return s}return-1},ke=(e,n,s,a)=>{let f=Re(s)?e[0]:s;for(let g=0;g<e.length;g++)f=n.call(a,f,e[g],g);return f},Ae=(e,n,s)=>{for(let a=0,f=e.length;a<f;a++)if(n.call(s,e[a],a,e))return a;return-1},ut=e=>e[e.length-1],xt=e=>{let n=!1,s;return(...a)=>(n||(n=!0,s=e.apply(null,a)),s)},En=(e,n,s,a)=>{const f=e.isiOS()&&/ipad/i.test(s)===!0,g=e.isiOS()&&!f,y=e.isiOS()||e.isAndroid(),S=y||a("(pointer:coarse)"),E=f||!g&&y&&a("(min-device-width:768px)"),P=g||y&&!E,L=n.isSafari()&&e.isiOS()&&/safari/i.test(s)===!1,$=!P&&!E&&!L;return{isiPad:me(f),isiPhone:me(g),isTablet:me(E),isPhone:me(P),isTouch:me(S),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:me(L),isDesktop:me($)}},Rn=(e,n)=>{for(let s=0;s<e.length;s++){const a=e[s];if(a.test(n))return a}},Mo=(e,n)=>{const s=Rn(e,n);if(!s)return{major:0,minor:0};const a=f=>Number(n.replace(s,"$"+f));return Fo(a(1),a(2))},Vs=(e,n)=>{const s=String(n).toLowerCase();return e.length===0?Tt():Mo(e,s)},Tt=()=>Fo(0,0),Fo=(e,n)=>({major:e,minor:n}),Ce={nu:Fo,detect:Vs,unknown:Tt},Te=(e,n)=>lo(n.brands,s=>{const a=s.brand.toLowerCase();return st(e,f=>{var g;return a===((g=f.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(f=>({current:f.name,version:Ce.nu(parseInt(s.version,10),0)}))}),_t=(e,n)=>{const s=String(n).toLowerCase();return st(e,a=>a.search(s))},nn=(e,n)=>_t(e,n).map(s=>{const a=Ce.detect(s.versionRegexes,n);return{current:s.name,version:a}}),an=(e,n)=>_t(e,n).map(s=>{const a=Ce.detect(s.versionRegexes,n);return{current:s.name,version:a}}),_n=(e,n)=>e.substring(n),Pn=(e,n,s)=>n===""||e.length>=n.length&&e.substr(s,s+n.length)===n,An=(e,n)=>Vn(e,n)?_n(e,n.length):e,$n=(e,n,s=0,a)=>{const f=e.indexOf(n,s);return f!==-1?Re(a)?!0:f+n.length<=a:!1},Vn=(e,n)=>Pn(e,n,0),Xo=(e,n)=>Pn(e,n,e.length-n.length),Os=e=>n=>n.replace(e,""),Bi=Os(/^\s+|\s+$/g),Oa=Os(/^\s+/g),ql=Os(/\s+$/g),Po=e=>e.length>0,Io=e=>!Po(e),ds=(e,n)=>n<=0?"":new Array(n+1).join(e),Wi=(e,n=10)=>{const s=parseInt(e,n);return isNaN(s)?V.none():V.some(s)},Fi=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Dr=e=>n=>$n(n,e),il=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>$n(e,"edge/")&&$n(e,"chrome")&&$n(e,"safari")&&$n(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fi],search:e=>$n(e,"chrome")&&!$n(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>$n(e,"msie")||$n(e,"trident")},{name:"Opera",versionRegexes:[Fi,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Dr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Dr("firefox")},{name:"Safari",versionRegexes:[Fi,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>($n(e,"safari")||$n(e,"mobile/"))&&$n(e,"applewebkit")}],ki=[{name:"Windows",search:Dr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>$n(e,"iphone")||$n(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Dr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Dr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Dr("linux"),versionRegexes:[]},{name:"Solaris",search:Dr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Dr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Dr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ac={browsers:me(il),oses:me(ki)},vs="Edge",ha="Chromium",ji="IE",qa="Opera",na="Firefox",_a="Safari",mi=()=>Tc({current:void 0,version:Ce.unknown()}),Tc=e=>{const n=e.current,s=e.version,a=f=>()=>n===f;return{current:n,version:s,isEdge:a(vs),isChromium:a(ha),isIE:a(ji),isOpera:a(qa),isFirefox:a(na),isSafari:a(_a)}},ma={unknown:mi,nu:Tc,edge:me(vs),chromium:me(ha),ie:me(ji),opera:me(qa),firefox:me(na),safari:me(_a)},eu="Windows",ga="iOS",Gl="Android",Ii="Linux",al="macOS",Oc="Solaris",tu="FreeBSD",Cd="ChromeOS",Q=()=>Oe({current:void 0,version:Ce.unknown()}),Oe=e=>{const n=e.current,s=e.version,a=f=>()=>n===f;return{current:n,version:s,isWindows:a(eu),isiOS:a(ga),isAndroid:a(Gl),isMacOS:a(al),isLinux:a(Ii),isSolaris:a(Oc),isFreeBSD:a(tu),isChromeOS:a(Cd)}},Ze={unknown:Q,nu:Oe,windows:me(eu),ios:me(ga),android:me(Gl),linux:me(Ii),macos:me(al),solaris:me(Oc),freebsd:me(tu),chromeos:me(Cd)},Ut={detect:(e,n,s)=>{const a=Ac.browsers(),f=Ac.oses(),g=n.bind(E=>Te(a,E)).orThunk(()=>nn(a,e)).fold(ma.unknown,ma.nu),y=an(f,e).fold(Ze.unknown,Ze.nu),S=En(y,g,e,s);return{browser:g,os:y,deviceType:S}}},Zn=e=>window.matchMedia(e).matches;let _s=xt(()=>Ut.detect(navigator.userAgent,V.from(navigator.userAgentData),Zn));const Rs=()=>_s(),ys=navigator.userAgent,Ys=Rs(),Wo=Ys.browser,ur=Ys.os,Ei=Ys.deviceType,Mu=ys.indexOf("Windows Phone")!==-1,on={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Wo.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Wo.isIE(),windowsPhone:Mu,browser:{current:Wo.current,version:Wo.version,isChromium:Wo.isChromium,isEdge:Wo.isEdge,isFirefox:Wo.isFirefox,isIE:Wo.isIE,isOpera:Wo.isOpera,isSafari:Wo.isSafari},os:{current:ur.current,version:ur.version,isAndroid:ur.isAndroid,isChromeOS:ur.isChromeOS,isFreeBSD:ur.isFreeBSD,isiOS:ur.isiOS,isLinux:ur.isLinux,isMacOS:ur.isMacOS,isSolaris:ur.isSolaris,isWindows:ur.isWindows},deviceType:{isDesktop:Ei.isDesktop,isiPad:Ei.isiPad,isiPhone:Ei.isiPhone,isPhone:Ei.isPhone,isTablet:Ei.isTablet,isTouch:Ei.isTouch,isWebView:Ei.isWebView}},Pu=/^\s*|\s*$/g,$r=e=>$e(e)?"":(""+e).replace(Pu,""),U=(e,n)=>n?n==="array"&&In(e)?!0:typeof e===n:e!==void 0,se=(e,n,s={})=>{const a=Z(e)?e.split(n||","):e||[];let f=a.length;for(;f--;)s[a[f]]={};return s},be=Bn,ct=(e,...n)=>{for(let s=0;s<n.length;s++){const a=n[s];for(const f in a)if(Bn(a,f)){const g=a[f];g!==void 0&&(e[f]=g)}}return e},dn=function(e,n,s,a){a=a||this,e&&(s&&(e=e[s]),Ks(e,(f,g)=>n.call(a,f,g,s)===!1?!1:(dn(f,n,s,a),!0)))},Lt={trim:$r,isArray:In,is:U,toArray:bo,makeMap:se,each:Ks,map:Lr,grep:mr,inArray:_r,hasOwn:be,extend:ct,walk:dn,resolve:(e,n=window)=>{const s=e.split(".");for(let a=0,f=s.length;a<f&&(n=n[s[a]],!!n);a++);return n},explode:(e,n)=>De(e)?e:e===""?[]:Lr(e.split(n||","),$r),_addCacheSuffix:e=>{const n=on.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Qs=(e,n,s=qt)=>e.exists(a=>s(a,n)),pa=(e,n,s=qt)=>qr(e,n,s).getOr(e.isNone()&&n.isNone()),zs=e=>{const n=[],s=a=>{n.push(a)};for(let a=0;a<e.length;a++)e[a].each(s);return n},qr=(e,n,s)=>e.isSome()&&n.isSome()?V.some(s(e.getOrDie(),n.getOrDie())):V.none(),Sd=(e,n,s,a)=>e.isSome()&&n.isSome()&&s.isSome()?V.some(a(e.getOrDie(),n.getOrDie(),s.getOrDie())):V.none(),es=(e,n)=>e?V.some(n):V.none(),ll=typeof window!="undefined"?window:Function("return this;")(),Ga=(e,n)=>{let s=n!=null?n:ll;for(let a=0;a<e.length&&s!==void 0&&s!==null;++a)s=s[e[a]];return s},Ru=(e,n)=>{const s=e.split(".");return Ga(s,n)},rr=(e,n)=>Ru(e,n),Nu=(e,n)=>{const s=rr(e,n);if(s==null)throw new Error(e+" not available on this browser");return s},Gg=Object.getPrototypeOf,Kg=e=>Nu("HTMLElement",e),dr=e=>{const n=Ru("ownerDocument.defaultView",e);return ce(e)&&(Kg(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Gg(e).constructor.name))},Sm=8,kd=9,Ka=11,cl=1,xf=3,ts=e=>e.dom.nodeName.toLowerCase(),ee=e=>e.dom.nodeType,pe=e=>n=>ee(n)===e,rt=e=>ee(e)===Sm||ts(e)==="#comment",Et=e=>pn(e)&&dr(e.dom),pn=pe(cl),Oo=pe(xf),Cr=pe(kd),ba=pe(Ka),Hr=e=>n=>pn(n)&&ts(n)===e,oa=(e,n,s)=>{if(Z(s)||qe(s)||ft(s))e.setAttribute(n,s+"");else throw new Error("Attribute value was not simple")},Xs=(e,n,s)=>{oa(e.dom,n,s)},Vr=(e,n)=>{const s=e.dom;$t(n,(a,f)=>{oa(s,f,a)})},gi=(e,n)=>{const s=e.dom.getAttribute(n);return s===null?void 0:s},Da=(e,n)=>V.from(gi(e,n)),Ed=(e,n)=>{const s=e.dom;return s&&s.hasAttribute?s.hasAttribute(n):!1},Nr=(e,n)=>{e.dom.removeAttribute(n)},Gr=e=>{const n=e.dom.attributes;return n==null||n.length===0},Kl=e=>ve(e.dom.attributes,(n,s)=>(n[s.name]=s.value,n),{}),Ad=(e,n)=>{const s=gi(e,n);return s===void 0||s===""?[]:s.split(" ")},_y=(e,n,s)=>{const f=Ad(e,n).concat([s]);return Xs(e,n,f.join(" ")),!0},Dy=(e,n,s)=>{const a=Ne(Ad(e,n),f=>f!==s);return a.length>0?Xs(e,n,a.join(" ")):Nr(e,n),!1},ph=e=>e.dom.classList!==void 0,p0=e=>Ad(e,"class"),b0=(e,n)=>_y(e,"class",n),Yg=(e,n)=>Dy(e,"class",n),My=(e,n)=>Qe(p0(e),n)?Yg(e,n):b0(e,n),Cf=(e,n)=>{ph(e)?e.dom.classList.add(n):b0(e,n)},v0=e=>{(ph(e)?e.dom.classList:p0(e)).length===0&&Nr(e,"class")},Bu=(e,n)=>{ph(e)?e.dom.classList.remove(n):Yg(e,n),v0(e)},Py=(e,n)=>{const s=ph(e)?e.dom.classList.toggle(n):My(e,n);return v0(e),s},Xg=(e,n)=>ph(e)&&e.dom.classList.contains(n),Ry=(e,n)=>{const a=(n||document).createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1){const f="HTML does not have a single root node";throw new Error(f)}return bh(a.childNodes[0])},Ny=(e,n)=>{const a=(n||document).createElement(e);return bh(a)},By=(e,n)=>{const a=(n||document).createTextNode(e);return bh(a)},bh=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ye={fromHtml:Ry,fromTag:Ny,fromText:By,fromDom:bh,fromPoint:(e,n,s)=>V.from(e.dom.elementFromPoint(n,s)).map(bh)},Jg=(e,n)=>{const s=[],a=g=>(s.push(g),n(g));let f=n(e);do f=f.bind(a);while(f.isSome());return s},El=(e,n)=>{const s=e.dom;if(s.nodeType!==cl)return!1;{const a=s;if(a.matches!==void 0)return a.matches(n);if(a.msMatchesSelector!==void 0)return a.msMatchesSelector(n);if(a.webkitMatchesSelector!==void 0)return a.webkitMatchesSelector(n);if(a.mozMatchesSelector!==void 0)return a.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},km=e=>e.nodeType!==cl&&e.nodeType!==kd&&e.nodeType!==Ka||e.childElementCount===0,y0=(e,n)=>{const s=n===void 0?document:n.dom;return km(s)?[]:nt(s.querySelectorAll(e),ye.fromDom)},F2=(e,n)=>{const s=n===void 0?document:n.dom;return km(s)?V.none():V.from(s.querySelector(e)).map(ye.fromDom)},ws=(e,n)=>e.dom===n.dom,Fu=(e,n)=>{const s=e.dom,a=n.dom;return s===a?!1:s.contains(a)},nu=e=>ye.fromDom(e.dom.ownerDocument),Iu=e=>Cr(e)?e:nu(e),Sf=e=>ye.fromDom(Iu(e).dom.documentElement),ou=e=>ye.fromDom(Iu(e).dom.defaultView),sa=e=>V.from(e.dom.parentNode).map(ye.fromDom),Lu=e=>V.from(e.dom.parentElement).map(ye.fromDom),Fy=(e,n)=>{const s=Ee(n)?n:ue;let a=e.dom;const f=[];for(;a.parentNode!==null&&a.parentNode!==void 0;){const g=a.parentNode,y=ye.fromDom(g);if(f.push(y),s(y)===!0)break;a=g}return f},Iy=e=>{const n=s=>Ne(s,a=>!ws(e,a));return sa(e).map(pi).map(n).getOr([])},_c=e=>V.from(e.dom.previousSibling).map(ye.fromDom),su=e=>V.from(e.dom.nextSibling).map(ye.fromDom),Ly=e=>Yn(Jg(e,_c)),Ma=e=>Jg(e,su),pi=e=>nt(e.dom.childNodes,ye.fromDom),kf=(e,n)=>{const s=e.dom.childNodes;return V.from(s[n]).map(ye.fromDom)},Em=e=>kf(e,0),Dc=e=>kf(e,e.dom.childNodes.length-1),Pa=e=>e.dom.childNodes.length,$y=e=>e.dom.hasChildNodes(),I2=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ye.fromDom(n)},Qg=e=>ba(e)&&le(e.dom.host),ep=Ee(Element.prototype.attachShadow)&&Ee(Node.prototype.getRootNode),Am=me(ep),$u=ep?e=>ye.fromDom(e.dom.getRootNode()):Iu,w0=e=>Qg(e)?e:I2(Iu(e)),kM=e=>Qg(e)?e:ye.fromDom(Iu(e).dom.body),L2=e=>{const n=$u(e);return Qg(n)?V.some(n):V.none()},$2=e=>ye.fromDom(e.dom.host),vh=e=>{if(Am()&&le(e.target)){const n=ye.fromDom(e.target);if(pn(n)&&Hy(n)&&e.composed&&e.composedPath){const s=e.composedPath();if(s)return jt(s)}}return V.from(e.target)},Hy=e=>le(e.dom.shadowRoot),yh=e=>{const n=Oo(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const s=n.ownerDocument;return L2(ye.fromDom(n)).fold(()=>s.body.contains(n),Ye(yh,$2))};var Kr=(e,n,s,a,f)=>e(s,a)?V.some(s):Ee(f)&&f(s)?V.none():n(s,a,f);const Sr=(e,n,s)=>{let a=e.dom;const f=Ee(s)?s:ue;for(;a.parentNode;){a=a.parentNode;const g=ye.fromDom(a);if(n(g))return V.some(g);if(f(g))break}return V.none()},ul=(e,n,s)=>Kr((f,g)=>g(f),Sr,e,n,s),x0=(e,n)=>{const s=e.dom;return s.parentNode?H2(ye.fromDom(s.parentNode),a=>!ws(e,a)&&n(a)):V.none()},H2=(e,n)=>{const s=f=>n(ye.fromDom(f));return st(e.dom.childNodes,s).map(ye.fromDom)},Zi=(e,n)=>{const s=a=>{for(let f=0;f<a.childNodes.length;f++){const g=ye.fromDom(a.childNodes[f]);if(n(g))return V.some(g);const y=s(a.childNodes[f]);if(y.isSome())return y}return V.none()};return s(e.dom)},Ef=(e,n,s)=>Sr(e,a=>El(a,n),s),wh=(e,n)=>F2(n,e),Td=(e,n,s)=>Kr((f,g)=>El(f,g),Ef,e,n,s),EM=e=>Td(e,"[contenteditable]"),_o=(e,n=!1)=>yh(e)?e.dom.isContentEditable:EM(e).fold(me(n),s=>Al(s)==="true"),Al=e=>e.dom.contentEditable,Af=e=>e.style!==void 0&&Ee(e.style.getPropertyValue),Vy=(e,n,s)=>{if(!Z(s))throw new Error("CSS value must be a string: "+s);Af(e)&&e.style.setProperty(n,s)},zy=(e,n)=>{Af(e)&&e.style.removeProperty(n)},Uy=(e,n,s)=>{const a=e.dom;Vy(a,n,s)},xh=(e,n)=>{const s=e.dom;$t(n,(a,f)=>{Vy(s,f,a)})},ru=(e,n)=>{const s=e.dom,f=window.getComputedStyle(s).getPropertyValue(n);return f===""&&!yh(e)?C0(s,n):f},C0=(e,n)=>Af(e)?e.style.getPropertyValue(n):"",Tm=(e,n)=>{const s=e.dom,a=C0(s,n);return V.from(a).filter(f=>f.length>0)},S0=e=>{const n={},s=e.dom;if(Af(s))for(let a=0;a<s.style.length;a++){const f=s.style.item(a);n[f]=s.style[f]}return n},k0=(e,n)=>{const s=e.dom;zy(s,n),Qs(Da(e,"style").map(Bi),"")&&Nr(e,"style")},zr=e=>e.dom.offsetWidth,Ra=(e,n)=>{sa(e).each(a=>{a.dom.insertBefore(n.dom,e.dom)})},Hu=(e,n)=>{su(e).fold(()=>{sa(e).each(f=>{Yr(f,n)})},a=>{Ra(a,n)})},Om=(e,n)=>{Em(e).fold(()=>{Yr(e,n)},a=>{e.dom.insertBefore(n.dom,a.dom)})},Yr=(e,n)=>{e.dom.appendChild(n.dom)},Wy=(e,n)=>{Ra(e,n),Yr(n,e)},jy=(e,n)=>{de(n,(s,a)=>{const f=a===0?e:n[a-1];Hu(f,s)})},$s=(e,n)=>{de(n,s=>{Yr(e,s)})},Od=e=>{e.dom.textContent="",de(pi(e),n=>{ks(n)})},ks=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Yl=e=>{const n=pi(e);n.length>0&&jy(e,n),ks(e)},_m=(e,n)=>{const a=(n||document).createElement("div");return a.innerHTML=e,pi(ye.fromDom(a))},Ch=e=>nt(e,ye.fromDom),tp=e=>e.dom.innerHTML,np=(e,n)=>{const a=nu(e).dom,f=ye.fromDom(a.createDocumentFragment()),g=_m(n,a);$s(f,g),Od(e),Yr(e,f)},V2=e=>{const n=ye.fromTag("div"),s=ye.fromDom(e.dom.cloneNode(!0));return Yr(n,s),tp(n)},Zy=(e,n,s,a,f,g,y)=>({target:e,x:n,y:s,stop:a,prevent:f,kill:g,raw:y}),z2=e=>{const n=ye.fromDom(vh(e).getOr(e.target)),s=()=>e.stopPropagation(),a=()=>e.preventDefault(),f=O(a,s);return Zy(n,e.clientX,e.clientY,s,a,f,e)},AM=(e,n)=>s=>{e(s)&&n(z2(s))},qy=(e,n,s,a,f)=>{const g=AM(s,a);return e.dom.addEventListener(n,g,f),{unbind:Be(U2,e,n,g,f)}},E0=(e,n,s,a)=>qy(e,n,s,a,!1),U2=(e,n,s,a)=>{e.dom.removeEventListener(n,s,a)},D=(e,n)=>({left:e,top:n,translate:(a,f)=>D(e+a,n+f)}),F=D,K=e=>{const n=e.getBoundingClientRect();return F(n.left,n.top)},we=(e,n)=>e!==void 0?e:n!==void 0?n:0,Me=e=>{const n=e.dom.ownerDocument,s=n.body,a=n.defaultView,f=n.documentElement;if(s===e.dom)return F(s.offsetLeft,s.offsetTop);const g=we(a==null?void 0:a.pageYOffset,f.scrollTop),y=we(a==null?void 0:a.pageXOffset,f.scrollLeft),S=we(f.clientTop,s.clientTop),E=we(f.clientLeft,s.clientLeft);return Ht(e).translate(y-E,g-S)},Ht=e=>{const n=e.dom,a=n.ownerDocument.body;return a===n?F(a.offsetLeft,a.offsetTop):yh(e)?K(n):F(0,0)},Nn=e=>{const n=e!==void 0?e.dom:document,s=n.body.scrollLeft||n.documentElement.scrollLeft,a=n.body.scrollTop||n.documentElement.scrollTop;return F(s,a)},wo=(e,n,s)=>{const f=(s!==void 0?s.dom:document).defaultView;f&&f.scrollTo(e,n)},xo=(e,n)=>{Rs().browser.isSafari()&&Ee(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},to=e=>{const n=e===void 0?window:e;return Rs().browser.isFirefox()?V.none():V.from(n.visualViewport)},kr=(e,n,s,a)=>({x:e,y:n,width:s,height:a,right:e+s,bottom:n+a}),qi=e=>{const n=e===void 0?window:e,s=n.document,a=Nn(ye.fromDom(s));return to(n).fold(()=>{const f=n.document.documentElement,g=f.clientWidth,y=f.clientHeight;return kr(a.left,a.top,g,y)},f=>kr(Math.max(f.pageLeft,a.left),Math.max(f.pageTop,a.top),f.width,f.height))},Xl=(e,n)=>Ne(pi(e),n),_d=(e,n)=>{let s=[];return de(pi(e),a=>{n(a)&&(s=s.concat([a])),s=s.concat(_d(a,n))}),s},va=(e,n)=>y0(n,e),TM=(e,n,s)=>Ef(e,n,s).isSome();class er{constructor(n,s){this.node=n,this.rootNode=s,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,s,a,f){if(n){if(!f&&n[s])return n[s];if(n!==this.rootNode){let g=n[a];if(g)return g;for(let y=n.parentNode;y&&y!==this.rootNode;y=y.parentNode)if(g=y[a],g)return g}}}findPreviousNode(n,s){if(n){const a=n.previousSibling;if(this.rootNode&&a===this.rootNode)return;if(a){if(!s){for(let g=a.lastChild;g;g=g.lastChild)if(!g.lastChild)return g}return a}const f=n.parentNode;if(f&&f!==this.rootNode)return f}}}const Ln=e=>n=>!!n&&n.nodeType===e,Vu=e=>!!e&&!Object.getPrototypeOf(e),xn=Ln(1),Tf=e=>xn(e)&&Et(ye.fromDom(e)),J6=e=>xn(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Dm=e=>{const n=e.toLowerCase();return s=>le(s)&&s.nodeName.toLowerCase()===n},Gi=e=>{const n=e.map(s=>s.toLowerCase());return s=>{if(s&&s.nodeName){const a=s.nodeName.toLowerCase();return Qe(n,a)}return!1}},Mm=(e,n)=>{const s=n.toLowerCase().split(" ");return a=>{if(xn(a)){const f=a.ownerDocument.defaultView;if(f)for(let g=0;g<s.length;g++){const y=f.getComputedStyle(a,null);if((y?y.getPropertyValue(e):null)===s[g])return!0}}return!1}},A0=e=>n=>xn(n)&&n.hasAttribute(e),Ki=(e,n)=>s=>xn(s)&&s.getAttribute(e)===n,zu=e=>xn(e)&&e.hasAttribute("data-mce-bogus"),W2=e=>xn(e)&&e.getAttribute("data-mce-bogus")==="all",Dd=e=>xn(e)&&e.tagName==="TABLE",OM=e=>n=>!!(Tf(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),j2=Gi(["textarea","input"]),Vt=Ln(3),Q6=Ln(4),T0=Ln(7),Of=Ln(8),O0=Ln(9),Er=Ln(11),Us=Dm("br"),Ya=Dm("img"),dl=OM("true"),gs=OM("false"),_0=Gi(["td","th"]),ra=Gi(["td","th","caption"]),Xr=Gi(["video","audio","object","embed"]),Z2=Dm("li"),Rt=Dm("details"),Jl=Dm("summary"),D0="\uFEFF",xs=" ",Uu=e=>e===D0,e8=e=>e.replace(/\uFEFF/g,""),q2=((e,n)=>{const s=g=>{if(!e(g))throw new Error("Can only get "+n+" value of a "+n+" node");return a(g).getOr("")},a=g=>e(g)?V.from(g.dom.nodeValue):V.none();return{get:s,getOption:a,set:(g,y)=>{if(!e(g))throw new Error("Can only set raw "+n+" value of a "+n+" node");g.dom.nodeValue=y}}})(Oo,"text"),ju=e=>q2.get(e),G2=e=>q2.getOption(e),Ql=(e,n)=>q2.set(e,n),Ds=["td","th"],Md=["thead","tbody","tfoot"],M0=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Na=["li","dd","dt"],_M=["ul","ol","dl"],Pm=["pre","script","textarea","style"],Rm=e=>{let n;return s=>(n=n||Xe(e,je),Bn(n,ts(s)))},ec=e=>ts(e)==="table",Nm=e=>pn(e)&&ts(e)==="br",tt=Rm(M0),Tl=Rm(_M),Bm=Rm(Na),_f=Rm(Md),tc=Rm(Ds),Li=Rm(Pm),$i=e=>{const n=[];let s=e.dom;for(;s;)n.push(ye.fromDom(s)),s=s.lastChild;return n},t8=e=>{const n=va(e,"br"),s=Ne($i(e).slice(-1),Nm);n.length===s.length&&de(s,ks)},Zu=()=>{const e=ye.fromTag("br");return Xs(e,"data-mce-bogus","1"),e},Pd=e=>{Od(e),Yr(e,Zu())},qn=(e,n)=>{Dc(e).each(s=>{_c(s).each(a=>{n.isBlock(ts(e))&&Nm(s)&&n.isBlock(ts(a))&&ks(s)})})},Yi=D0,Ol=Uu,nc=e8,n8=e=>e.insertContent(Yi,{preserve_zwsp:!0}),o8=xn,op=Vt,sp=e=>(op(e)&&(e=e.parentNode),o8(e)&&e.hasAttribute("data-mce-caret")),oc=e=>op(e)&&Ol(e.data),Ba=e=>sp(e)||oc(e),DM=e=>e.firstChild!==e.lastChild||!Us(e.firstChild),s8=(e,n)=>{var s;const f=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Yi),g=e.parentNode;if(n){const y=e.previousSibling;if(op(y)){if(Ba(y))return y;if(P0(y))return y.splitText(y.data.length-1)}g==null||g.insertBefore(f,e)}else{const y=e.nextSibling;if(op(y)){if(Ba(y))return y;if(Fm(y))return y.splitText(1),y}e.nextSibling?g==null||g.insertBefore(f,e.nextSibling):g==null||g.appendChild(f)}return f},K2=e=>{const n=e.container();return Vt(n)?n.data.charAt(e.offset())===Yi||e.isAtStart()&&oc(n.previousSibling):!1},Gy=e=>{const n=e.container();return Vt(n)?n.data.charAt(e.offset()-1)===Yi||e.isAtEnd()&&oc(n.nextSibling):!1},MM=(e,n,s)=>{var a;const g=((a=n.ownerDocument)!==null&&a!==void 0?a:document).createElement(e);g.setAttribute("data-mce-caret",s?"before":"after"),g.setAttribute("data-mce-bogus","all"),g.appendChild(Zu().dom);const y=n.parentNode;return s?y==null||y.insertBefore(g,n):n.nextSibling?y==null||y.insertBefore(g,n.nextSibling):y==null||y.appendChild(g),g},Fm=e=>op(e)&&e.data[0]===Yi,P0=e=>op(e)&&e.data[e.data.length-1]===Yi,r8=e=>{var n;const s=e.getElementsByTagName("br"),a=s[s.length-1];zu(a)&&((n=a.parentNode)===null||n===void 0||n.removeChild(a))},Sh=e=>e&&e.hasAttribute("data-mce-caret")?(r8(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,PM=e=>sp(e.startContainer),RM=dl,i8=gs,a8=Us,ia=Vt,Df=Gi(["script","style","textarea"]),rp=Gi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Im=Gi(["table"]),NM=Ba,bi=e=>NM(e)?!1:ia(e)?!Df(e.parentNode):rp(e)||a8(e)||Im(e)||R0(e),Ky=e=>xn(e)&&e.getAttribute("unselectable")==="true",R0=e=>!Ky(e)&&i8(e),Y2=(e,n)=>{for(let s=e.parentNode;s&&s!==n;s=s.parentNode){if(R0(s))return!1;if(RM(s))return!0}return!0},Mf=e=>R0(e)?!ve(so(e.getElementsByTagName("*")),(n,s)=>n||RM(s),!1):!1,Pf=e=>rp(e)||Mf(e),X2=(e,n)=>bi(e)&&Y2(e,n),qu=/^[ \t\r\n]*$/,kh=e=>qu.test(e),Lm=e=>{for(const n of e)if(!Uu(n))return!1;return!0},ip=e=>" \f	\v".indexOf(e)!==-1,Eh=e=>e===`
`||e==="\r",l8=(e,n)=>n<e.length&&n>=0?Eh(e[n]):!1,ap=(e,n=4,s=!0,a=!0)=>{const f=ds(" ",n),g=e.replace(/\t/g,f);return ve(g,(S,E)=>ip(E)||E===xs?S.pcIsSpace||S.str===""&&s||S.str.length===g.length-1&&a||l8(g,S.str.length+1)?{pcIsSpace:!1,str:S.str+xs}:{pcIsSpace:!0,str:S.str+" "}:{pcIsSpace:Eh(E),str:S.str+E},{pcIsSpace:!1,str:""}).str},c8=(e,n)=>{const s=ye.fromDom(n),a=ye.fromDom(e);return TM(a,"pre,code",Be(ws,s))},u8=(e,n)=>Vt(e)&&kh(e.data)&&!c8(e,n),Jr=e=>xn(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Yy=(e,n)=>bi(e)&&!u8(e,n)||Jr(e)||lp(e),lp=A0("data-mce-bookmark"),J2=A0("data-mce-bogus"),Q2=Ki("data-mce-bogus","all"),$m=e=>Lu(ye.fromDom(e)).exists(n=>!_o(n)),sc=(e,n)=>{let s=0;if(Yy(e,e))return!1;{let a=e.firstChild;if(!a)return!0;const f=new er(a,e);do{if(n){if(Q2(a)){a=f.next(!0);continue}if(J2(a)){a=f.next();continue}}if(dl(a)&&$m(a))return!1;if(Us(a)){s++,a=f.next();continue}if(Yy(a,e))return!1;a=f.next()}while(a);return s<=1}},Mr=(e,n=!0)=>sc(e.dom,n),Gu=e=>e.toLowerCase()==="svg",ek=e=>Gu(e.nodeName),N0=e=>(e==null?void 0:e.nodeName)==="svg"?"svg":"html",tk=["svg"],Xy=()=>{let e=[];const n=()=>e[e.length-1];return{track:g=>{ek(g)&&e.push(g);let y=n();return y&&!y.contains(g)&&(e.pop(),y=n()),N0(y)},current:()=>N0(n()),reset:()=>{e=[]}}},Jy="data-mce-block",d8=e=>Ne(Bo(e),n=>!/[A-Z]/.test(n)),B0=e=>nt(d8(e),n=>`${n}:`+nt(tk,s=>`not(${s} ${n})`).join(":")).join(","),F0=(e,n)=>le(n.querySelector(e))?(n.setAttribute(Jy,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(Jy),!1),Ku=(e,n)=>{const s=B0(e.getTransparentElements()),a=B0(e.getBlockElements());return Ne(n.querySelectorAll(s),f=>F0(a,f))},Hm=(e,n)=>{var s;const a=n?"lastChild":"firstChild";for(let f=e[a];f;f=f[a])if(Mr(ye.fromDom(f))){(s=f.parentNode)===null||s===void 0||s.removeChild(f);return}},Vm=(e,n)=>{const s=document.createRange(),a=e.parentNode;if(a){s.setStartBefore(e),s.setEndBefore(n);const f=s.extractContents();Hm(f,!0),s.setStartAfter(n),s.setEndAfter(e);const g=s.extractContents();Hm(g,!1),Mr(ye.fromDom(f))||a.insertBefore(f,e),Mr(ye.fromDom(n))||a.insertBefore(n,e),Mr(ye.fromDom(g))||a.insertBefore(g,e),a.removeChild(e)}},BM=(e,n,s)=>{const a=e.getBlockElements(),f=ye.fromDom(n),g=S=>ts(S)in a,y=S=>ws(S,f);de(Ch(s),S=>{Sr(S,g,y).each(E=>{const P=Xl(S,L=>g(L)&&!e.isValidChild(ts(E),ts(L)));if(P.length>0){const L=Lu(E);de(P,$=>{Sr($,g,y).each(W=>{Vm(W.dom,$.dom)})}),L.each($=>Ku(e,$.dom))}})})},Qy=(e,n,s)=>{de([...s,...ns(e,n)?[n]:[]],a=>de(va(ye.fromDom(a),a.nodeName.toLowerCase()),f=>{Hn(e,f.dom)&&Yl(f)}))},I0=(e,n)=>{const s=Ku(e,n);BM(e,n,s),Qy(e,n,s)},FM=(e,n)=>{if($0(e,n)){const s=B0(e.getBlockElements());F0(s,n)}},IM=(e,n,s)=>{const a=g=>ws(g,ye.fromDom(n)),f=Fy(ye.fromDom(s),a);Pt(f,f.length-2).filter(pn).fold(()=>I0(e,n),g=>I0(e,g.dom))},ew=e=>e.hasAttribute(Jy),L0=(e,n)=>Bn(e.getTransparentElements(),n),$0=(e,n)=>xn(n)&&L0(e,n.nodeName),ns=(e,n)=>$0(e,n)&&ew(n),Hn=(e,n)=>$0(e,n)&&!ew(n),Rf=(e,n)=>n.type===1&&L0(e,n.name)&&Z(n.attr(Jy)),nk=Rs().browser,tw=e=>st(e,pn),f8=e=>nk.isFirefox()&&ts(e)==="table"?tw(pi(e)).filter(n=>ts(n)==="caption").bind(n=>tw(Ma(n)).map(s=>{const a=s.dom.offsetTop,f=n.dom.offsetTop,g=n.dom.offsetHeight;return a<=f?-g:0})).getOr(0):0,ok=(e,n)=>e.children&&Qe(e.children,n),ir=(e,n,s)=>{let a=0,f=0;const g=e.ownerDocument;if(s=s||e,n){if(s===e&&n.getBoundingClientRect&&ru(ye.fromDom(e),"position")==="static"){const S=n.getBoundingClientRect();return a=S.left+(g.documentElement.scrollLeft||e.scrollLeft)-g.documentElement.clientLeft,f=S.top+(g.documentElement.scrollTop||e.scrollTop)-g.documentElement.clientTop,{x:a,y:f}}let y=n;for(;y&&y!==s&&y.nodeType&&!ok(y,s);){const S=y;a+=S.offsetLeft||0,f+=S.offsetTop||0,y=S.offsetParent}for(y=n.parentNode;y&&y!==s&&y.nodeType&&!ok(y,s);)a-=y.scrollLeft||0,f-=y.scrollTop||0,y=y.parentNode;f+=f8(ye.fromDom(n))}return{x:a,y:f}},sk=(e,n={})=>{let s=0;const a={},f=ye.fromDom(e),g=Iu(f),y=Le=>{n.referrerPolicy=Le},S=Le=>{n.contentCssCors=Le},E=Le=>{Yr(w0(f),Le)},P=Le=>{const ze=w0(f);wh(ze,"#"+Le).each(ks)},L=Le=>us(a,Le).getOrThunk(()=>({id:"mce-u"+s++,passed:[],failed:[],count:0})),$=Le=>new Promise((ze,Ve)=>{let ot;const Nt=Lt._addCacheSuffix(Le),Wt=L(Nt);a[Nt]=Wt,Wt.count++;const sn=(gn,Mn)=>{de(gn,wt),Wt.status=Mn,Wt.passed=[],Wt.failed=[],ot&&(ot.onload=null,ot.onerror=null,ot=null)},vt=()=>sn(Wt.passed,2),dt=()=>sn(Wt.failed,3);if(ze&&Wt.passed.push(ze),Ve&&Wt.failed.push(Ve),Wt.status===1)return;if(Wt.status===2){vt();return}if(Wt.status===3){dt();return}Wt.status=1;const Mt=ye.fromTag("link",g.dom);Vr(Mt,{rel:"stylesheet",type:"text/css",id:Wt.id}),n.contentCssCors&&Xs(Mt,"crossOrigin","anonymous"),n.referrerPolicy&&Xs(Mt,"referrerpolicy",n.referrerPolicy),ot=Mt.dom,ot.onload=vt,ot.onerror=dt,E(Mt),Xs(Mt,"href",Nt)}),W=(Le,ze)=>{const Ve=L(Le);a[Le]=Ve,Ve.count++;const ot=ye.fromTag("style",g.dom);Vr(ot,{rel:"stylesheet",type:"text/css",id:Ve.id}),ot.dom.innerHTML=ze,E(ot)},re=Le=>Promise.allSettled(nt(Le,Ve=>$(Ve).then(me(Ve)))).then(Ve=>{const ot=Fe(Ve,Nt=>Nt.status==="fulfilled");return ot.fail.length>0?Promise.reject(nt(ot.fail,Nt=>Nt.reason)):nt(ot.pass,Nt=>Nt.value)}),fe=Le=>{const ze=Lt._addCacheSuffix(Le);us(a,ze).each(Ve=>{--Ve.count===0&&(delete a[ze],P(Ve.id))})};return{load:$,loadRawCss:W,loadAll:re,unload:fe,unloadRawCss:Le=>{us(a,Le).each(ze=>{--ze.count===0&&(delete a[Le],P(ze.id))})},unloadAll:Le=>{de(Le,ze=>{fe(ze)})},_setReferrerPolicy:y,_setContentCssCors:S}},rk=(()=>{const e=new WeakMap;return{forElement:(s,a)=>{const g=$u(s).dom;return V.from(e.get(g)).getOrThunk(()=>{const y=sk(g,a);return e.set(g,y),y})}}})(),Dt=e=>e.nodeName.toLowerCase()==="span",nw=(e,n,s)=>le(e)&&(Yy(e,n)||s.isInline(e.nodeName.toLowerCase())),h8=(e,n,s)=>{const a=new er(e,n).prev(!1),f=new er(e,n).next(!1),g=Re(a)||nw(a,n,s),y=Re(f)||nw(f,n,s);return g&&y},H0=e=>Dt(e)&&e.getAttribute("data-mce-type")==="bookmark",m8=(e,n,s)=>Vt(e)&&e.data.length>0&&h8(e,n,s),cp=e=>xn(e)?e.childNodes.length>0:!1,ik=e=>Er(e)||O0(e),Nf=(e,n,s,a)=>{var f;const g=a||n;if(xn(n)&&H0(n))return n;const y=n.childNodes;for(let S=y.length-1;S>=0;S--)Nf(e,y[S],s,g);if(xn(n)){const S=n.childNodes;S.length===1&&H0(S[0])&&((f=n.parentNode)===null||f===void 0||f.insertBefore(S[0],n))}return!ik(n)&&!Yy(n,g)&&!cp(n)&&!m8(n,g,s)&&e.remove(n),n},g8=Lt.makeMap,Bf=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Rd=/[<>&\"\']/g,p8=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ff={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},zm={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ak={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},up=e=>{const n=ye.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},LM=(e,n)=>{const s={};if(e){const a=e.split(",");n=n||10;for(let f=0;f<a.length;f+=2){const g=String.fromCharCode(parseInt(a[f],n));if(!zm[g]){const y="&"+a[f+1]+";";s[g]=y,s[y]=g}}return s}else return},ow=LM("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),$M=(e,n)=>e.replace(n?Bf:tr,s=>zm[s]||s),b8=e=>(""+e).replace(Rd,n=>zm[n]||n),HM=(e,n)=>e.replace(n?Bf:tr,s=>s.length>1?"&#"+((s.charCodeAt(0)-55296)*1024+(s.charCodeAt(1)-56320)+65536)+";":zm[s]||"&#"+s.charCodeAt(0)+";"),Um=(e,n,s)=>{const a=s||ow;return e.replace(n?Bf:tr,f=>zm[f]||a[f]||f)},Wm={encodeRaw:$M,encodeAllRaw:b8,encodeNumeric:HM,encodeNamed:Um,getEncodeFunc:(e,n)=>{const s=LM(n)||ow,a=(y,S)=>y.replace(S?Bf:tr,E=>zm[E]!==void 0?zm[E]:s[E]!==void 0?s[E]:E.length>1?"&#"+((E.charCodeAt(0)-55296)*1024+(E.charCodeAt(1)-56320)+65536)+";":"&#"+E.charCodeAt(0)+";"),f=(y,S)=>Um(y,S,s),g=g8(e.replace(/\+/g,","));return g.named&&g.numeric?a:g.named?n?f:Um:g.numeric?HM:$M},decode:e=>e.replace(p8,(n,s)=>s?(s.charAt(0).toLowerCase()==="x"?s=parseInt(s.substr(1),16):s=parseInt(s,10),s>65535?(s-=65536,String.fromCharCode(55296+(s>>10),56320+(s&1023))):Ff[s]||String.fromCharCode(s)):ak[n]||ow[n]||up(n))},aa=(e,n)=>(e=Lt.trim(e),e?e.split(n||" "):[]),bn=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),v8=e=>{const n=/^(~)?(.+)$/;return On(aa(e,","),s=>{const a=n.exec(s);if(a){const f=a[1]==="~",g=f?"span":"div",y=a[2];return[{inline:f,cloneName:g,name:y}]}else return[]})},y8=e=>{let n,s,a;if(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const g="a ins del canvas map";n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav "+g,a+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"}e!=="html5-strict"&&(n+=" xml:lang",a=[a,"acronym applet basefont big font strike tt"].join(" "),s=[s,"center dir isindex noframes"].join(" "));const f=[s,a].join(" ");return{globalAttributes:n,blockContent:s,phrasingContent:a,flowContent:f}},w8=e=>{const{globalAttributes:n,phrasingContent:s,flowContent:a}=y8(e),f={},g=(E,P,L)=>{f[E]={attributes:Xe(P,me({})),attributesOrder:P,children:Xe(L,me({}))}},y=(E,P="",L="")=>{const $=aa(L),W=aa(E);let re=W.length;const fe=aa([n,P].join(" "));for(;re--;)g(W[re],fe.slice(),$)},S=(E,P)=>{const L=aa(E),$=aa(P);let W=L.length;for(;W--;){const re=f[L[W]];for(let fe=0,te=$.length;fe<te;fe++)re.attributes[$[fe]]={},re.attributesOrder.push($[fe])}};return e!=="html5-strict"&&(de(aa("acronym applet basefont big font strike tt"),L=>{y(L,"",s)}),de(aa("center dir isindex noframes"),L=>{y(L,"",a)})),y("html","manifest","head body"),y("head","","base command link meta noscript script style title"),y("title hr noscript br"),y("base","href target"),y("link","href rel media hreflang type sizes hreflang"),y("meta","name http-equiv content charset"),y("style","media type scoped"),y("script","src async defer type charset"),y("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",a),y("dd div","",a),y("address dt caption","",e==="html4"?s:a),y("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",s),y("blockquote","cite",a),y("ol","reversed start type","li"),y("ul","","li"),y("li","value",a),y("dl","","dt dd"),y("a","href target rel media hreflang type",e==="html4"?s:a),y("q","cite",s),y("ins del","cite datetime",a),y("img","src sizes srcset alt usemap ismap width height"),y("iframe","src name width height",a),y("embed","src type width height"),y("object","data type typemustmatch name usemap form width height",[a,"param"].join(" ")),y("param","name value"),y("map","name",[a,"area"].join(" ")),y("area","alt coords shape href target rel media hreflang type"),y("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),y("colgroup","span","col"),y("col","span"),y("tbody thead tfoot","","tr"),y("tr","","td th"),y("td","colspan rowspan headers",a),y("th","colspan rowspan headers scope abbr",a),y("form","accept-charset action autocomplete enctype method name novalidate target",a),y("fieldset","disabled form name",[a,"legend"].join(" ")),y("label","form for",s),y("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),y("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?a:s),y("select","disabled form multiple name required size","option optgroup"),y("optgroup","disabled label","option"),y("option","disabled label selected value"),y("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),y("menu","type label",[a,"li"].join(" ")),y("noscript","",a),e!=="html4"&&(y("wbr"),y("ruby","",[s,"rt rp"].join(" ")),y("figcaption","",a),y("mark rt rp bdi","",s),y("summary","",[s,"h1 h2 h3 h4 h5 h6"].join(" ")),y("canvas","width height",a),y("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[a,"track source"].join(" ")),y("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[a,"track source"].join(" ")),y("picture","","img source"),y("source","src srcset type media sizes"),y("track","kind src srclang label default"),y("datalist","",[s,"option"].join(" ")),y("article section nav aside main header footer","",a),y("hgroup","","h1 h2 h3 h4 h5 h6"),y("figure","",[a,"figcaption"].join(" ")),y("time","datetime",s),y("dialog","open",a),y("command","type label icon disabled checked radiogroup command"),y("output","for form name",s),y("progress","value max",s),y("meter","value min max low high optimum",s),y("details","open",[a,"summary"].join(" ")),y("keygen","autofocus challenge disabled form keytype name"),g("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(S("script","language xml:space"),S("style","xml:space"),S("object","declare classid code codebase codetype archive standby align border hspace vspace"),S("embed","align name hspace vspace"),S("param","valuetype type"),S("a","charset name rev shape coords"),S("br","clear"),S("applet","codebase archive code object alt name width height align hspace vspace"),S("img","name longdesc align border hspace vspace"),S("iframe","longdesc frameborder marginwidth marginheight scrolling align"),S("font basefont","size color face"),S("input","usemap align"),S("select"),S("textarea"),S("h1 h2 h3 h4 h5 h6 div p legend caption","align"),S("ul","type compact"),S("li","type"),S("ol dl menu dir","compact"),S("pre","width xml:space"),S("hr","align noshade size width"),S("isindex","prompt"),S("table","summary width frame rules cellspacing cellpadding align bgcolor"),S("col","width align char charoff valign"),S("colgroup","width align char charoff valign"),S("thead","align char charoff valign"),S("tr","align char charoff valign bgcolor"),S("th","axis align char charoff valign nowrap bgcolor width height"),S("form","accept"),S("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),S("tfoot","align char charoff valign"),S("tbody","align char charoff valign"),S("area","nohref"),S("body","background bgcolor text link vlink alink")),e!=="html4"&&(S("input button select textarea","autofocus"),S("input textarea","placeholder"),S("a","download"),S("link script img","crossorigin"),S("img","loading"),S("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&de([f.video,f.audio],E=>{delete E.children.audio,delete E.children.video}),de(aa("a form meter progress dfn"),E=>{f[E]&&delete f[E].children[E]}),delete f.caption.children.table,delete f.script,f},VM=e=>e==="-"?"remove":"add",x8=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return On(aa(e,","),s=>{const a=n.exec(s);if(a){const f=a[1],g=f?VM(f):"replace",y=a[2],S=aa(a[3],"|");return[{operation:g,name:y,validChildren:S}]}else return[]})},lk=(e,n)=>{const s=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,a=/[*?+]/,{attributes:f,attributesOrder:g}=n;return de(aa(e,"|"),y=>{const S=s.exec(y);if(S){const E={},P=S[1],L=S[2].replace(/[\\:]:/g,":"),$=S[3],W=S[4];if(P==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(L),E.required=!0),P==="-"){delete f[L],g.splice(Lt.inArray(g,L),1);return}if($&&($==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:L,value:W}),E.defaultValue=W):$==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:L,value:W}),E.forcedValue=W):$==="<"&&(E.validValues=Lt.makeMap(W,"?"))),a.test(L)){const re=E;n.attributePatterns=n.attributePatterns||[],re.pattern=bn(L),n.attributePatterns.push(re)}else f[L]||g.push(L),f[L]=E}})},V0=(e,n)=>{$t(e.attributes,(s,a)=>{n.attributes[a]=s}),n.attributesOrder.push(...e.attributesOrder)},dp=(e,n)=>{const s=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return On(aa(n,","),a=>{const f=s.exec(a);if(f){const g=f[1],y=f[2],S=f[3],E=f[4],P=f[5],L={attributes:{},attributesOrder:[]};if(e.each($=>V0($,L)),g==="#"?L.paddEmpty=!0:g==="-"&&(L.removeEmpty=!0),E==="!"&&(L.removeEmptyAttrs=!0),P&&lk(P,L),S&&(L.outputName=y),y==="@")if(e.isNone())e=V.some(L);else return[];return[S?{name:y,element:L,aliasName:S}:{name:y,element:L}]}else return[]})},sw={},Ah=Lt.makeMap,Yu=Lt.each,ck=Lt.extend,rw=Lt.explode,iw=(e,n={})=>{const s=Ah(e," ",Ah(e.toUpperCase()," "));return ck(s,n)},zM=e=>iw("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),fp=(e,n)=>{if(e){const s={};return Z(e)&&(e={"*":e}),Yu(e,(a,f)=>{s[f]=s[f.toUpperCase()]=n==="map"?Ah(a,/[, ]/):rw(a,/[, ]/)}),s}else return},If=(e={})=>{var n;const s={},a={};let f=[];const g={},y={},S=(go,hs,Ts)=>{const Rr=e[go];if(Rr)return Ah(Rr,/[, ]/,Ah(Rr.toUpperCase(),/[, ]/));{let pr=sw[go];return pr||(pr=iw(hs,Ts),sw[go]=pr),pr}},E=(n=e.schema)!==null&&n!==void 0?n:"html5",P=w8(E);e.verify_html===!1&&(e.valid_elements="*[*]");const L=fp(e.valid_styles),$=fp(e.invalid_styles,"map"),W=fp(e.valid_classes,"map"),re=S("whitespace_elements","pre script noscript style textarea video audio iframe object code"),fe=S("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),te=S("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),he=S("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Le="td th iframe video audio object script code",ze=S("non_empty_elements",Le+" pre svg",te),Ve=S("move_caret_before_on_enter_elements",Le+" table",te),ot="h1 h2 h3 h4 h5 h6",Nt=S("text_block_elements",ot+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Wt=S("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Nt),sn=S("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),vt=S("transparent_elements","a ins del canvas map"),dt=S("wrap_block_elements","pre "+ot);Yu("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),go=>{y[go]=new RegExp("</"+go+"[^>]*>","gi")});const Mt=go=>{const hs=V.from(s["@"]),Ts=/[*?+]/;de(dp(hs,go!=null?go:""),({name:Rr,element:pr,aliasName:wl})=>{if(wl&&(s[wl]=pr),Ts.test(Rr)){const hd=pr;hd.pattern=bn(Rr),f.push(hd)}else s[Rr]=pr})},gn=go=>{f=[],de(Bo(s),hs=>{delete s[hs]}),Mt(go)},Mn=go=>{delete sw.text_block_elements,delete sw.block_elements,de(v8(go!=null?go:""),({inline:hs,name:Ts,cloneName:Rr})=>{if(a[Ts]=a[Rr],g[Ts]=Rr,ze[Ts.toUpperCase()]={},ze[Ts]={},hs||(Wt[Ts.toUpperCase()]={},Wt[Ts]={}),!s[Ts]){let pr=s[Rr];pr=ck({},pr),delete pr.removeEmptyAttrs,delete pr.removeEmpty,s[Ts]=pr}$t(a,(pr,wl)=>{pr[Rr]&&(a[wl]=pr=ck({},a[wl]),pr[Ts]=pr[Rr])})})},ko=go=>{de(x8(go!=null?go:""),({operation:hs,name:Ts,validChildren:Rr})=>{const pr=hs==="replace"?{"#comment":{}}:a[Ts];de(Rr,wl=>{hs==="remove"?delete pr[wl]:pr[wl]={}}),a[Ts]=pr})},Ho=go=>{const hs=s[go];if(hs)return hs;let Ts=f.length;for(;Ts--;){const Rr=f[Ts];if(Rr.pattern.test(go))return Rr}};e.valid_elements?(gn(e.valid_elements),Yu(P,(go,hs)=>{a[hs]=go.children})):(Yu(P,(go,hs)=>{s[hs]={attributes:go.attributes,attributesOrder:go.attributesOrder},a[hs]=go.children}),Yu(aa("strong/b em/i"),go=>{const hs=aa(go,"/");s[hs[1]].outputName=hs[0]}),Yu(sn,(go,hs)=>{s[hs]&&(e.padd_empty_block_inline_children&&(s[hs].paddInEmptyBlock=!0),s[hs].removeEmpty=!0)}),Yu(aa("ol ul blockquote a table tbody"),go=>{s[go]&&(s[go].removeEmpty=!0)}),Yu(aa("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),go=>{s[go]&&(s[go].paddEmpty=!0)}),Yu(aa("span"),go=>{s[go].removeEmptyAttrs=!0})),delete s.svg,Mn(e.custom_elements),ko(e.valid_children),Mt(e.extended_valid_elements),ko("+ol[ul|ol],+ul[ul|ol]"),Yu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(go,hs)=>{s[hs]&&(s[hs].parentsRequired=aa(go))}),e.invalid_elements&&Yu(rw(e.invalid_elements),go=>{s[go]&&delete s[go]}),Ho("span")||Mt("span[!data-mce-type|*]");const Ms=me(L),qs=me($),Tr=me(W),Qi=me(he),Bs=me(Wt),Xt=me(Nt),cn=me(sn),as=me(Object.seal(te)),zo=me(fe),yn=me(ze),co=me(Ve),Gt=me(re),uo=me(vt),Ko=me(dt),Is=me(Object.seal(y)),Ps=(go,hs)=>{const Ts=a[go.toLowerCase()];return!!(Ts&&Ts[hs.toLowerCase()])},Mi=(go,hs)=>{const Ts=Ho(go);if(Ts)if(hs){if(Ts.attributes[hs])return!0;const Rr=Ts.attributePatterns;if(Rr){let pr=Rr.length;for(;pr--;)if(Rr[pr].pattern.test(hs))return!0}}else return!0;return!1},Eu=go=>Bn(Bs(),go),of=go=>!Vn(go,"#")&&Mi(go)&&!Eu(go),nl=go=>Bn(Ko(),go)||of(go),Vc=me(g);return{type:E,children:a,elements:s,getValidStyles:Ms,getValidClasses:Tr,getBlockElements:Bs,getInvalidStyles:qs,getVoidElements:as,getTextBlockElements:Xt,getTextInlineElements:cn,getBoolAttrs:Qi,getElementRule:Ho,getSelfClosingElements:zo,getNonEmptyElements:yn,getMoveCaretBeforeOnEnterElements:co,getWhitespaceElements:Gt,getTransparentElements:uo,getSpecialElements:Is,isValidChild:Ps,isValid:Mi,isBlock:Eu,isInline:of,isWrapper:nl,getCustomElements:Vc,addValidElements:Mt,setValidElements:gn,addCustomElements:Mn,addValidChildren:ko}},C8=e=>({value:UM(e)}),UM=e=>An(e,"#").toUpperCase(),hp=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Xu=e=>{const n=hp(e.red)+hp(e.green)+hp(e.blue);return C8(n)},rc=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,S8=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,WM=(e,n,s,a)=>({red:e,green:n,blue:s,alpha:a}),jM=(e,n,s,a)=>{const f=parseInt(e,10),g=parseInt(n,10),y=parseInt(s,10),S=parseFloat(a);return WM(f,g,y,S)},uk=e=>{if(e==="transparent")return V.some(WM(0,0,0,0));const n=rc.exec(e);if(n!==null)return V.some(jM(n[1],n[2],n[3],"1"));const s=S8.exec(e);return s!==null?V.some(jM(s[1],s[2],s[3],s[4])):V.none()},iu=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,z0=e=>uk(e).map(Xu).map(n=>"#"+n.value).getOr(e),dk=(e={},n)=>{const s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,f=/\s+$/,g={};let y,S;const E=D0;n&&(y=n.getValidStyles(),S=n.getInvalidStyles());const P=(`\\" \\' \\; \\: ; : `+E).split(" ");for(let $=0;$<P.length;$++)g[P[$]]=E+$,g[E+$]=P[$];const L={parse:$=>{const W={};let re=!1;const fe=e.url_converter,te=e.url_converter_scope||L,he=(vt,dt,Mt)=>{const gn=W[vt+"-top"+dt];if(!gn)return;const Mn=W[vt+"-right"+dt];if(!Mn)return;const ko=W[vt+"-bottom"+dt];if(!ko)return;const Ho=W[vt+"-left"+dt];if(!Ho)return;const Ms=[gn,Mn,ko,Ho];let qs=Ms.length-1;for(;qs--&&Ms[qs]===Ms[qs+1];);qs>-1&&Mt||(W[vt+dt]=qs===-1?Ms[0]:Ms.join(" "),delete W[vt+"-top"+dt],delete W[vt+"-right"+dt],delete W[vt+"-bottom"+dt],delete W[vt+"-left"+dt])},Le=vt=>{const dt=W[vt];if(!dt)return;const Mt=dt.indexOf(",")>-1?[dt]:dt.split(" ");let gn=Mt.length;for(;gn--;)if(Mt[gn]!==Mt[0])return!1;return W[vt]=Mt[0],!0},ze=(vt,dt,Mt,gn)=>{Le(dt)&&Le(Mt)&&Le(gn)&&(W[vt]=W[dt]+" "+W[Mt]+" "+W[gn],delete W[dt],delete W[Mt],delete W[gn])},Ve=vt=>(re=!0,g[vt]),ot=(vt,dt)=>(re&&(vt=vt.replace(/\uFEFF[0-9]/g,Mt=>g[Mt])),dt||(vt=vt.replace(/\\([\'\";:])/g,"$1")),vt),Nt=vt=>String.fromCharCode(parseInt(vt.slice(1),16)),Wt=vt=>vt.replace(/\\[0-9a-f]+/gi,Nt),sn=(vt,dt,Mt,gn,Mn,ko)=>{if(Mn=Mn||ko,Mn)return Mn=ot(Mn),"'"+Mn.replace(/\'/g,"\\'")+"'";if(dt=ot(dt||Mt||gn||""),!e.allow_script_urls){const Ho=dt.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Ho)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Ho))return""}return fe&&(dt=fe.call(te,dt,"style")),"url('"+dt.replace(/\'/g,"\\'")+"')"};if($){$=$.replace(/[\u0000-\u001F]/g,""),$=$.replace(/\\[\"\';:\uFEFF]/g,Ve).replace(/\"[^\"]+\"|\'[^\']+\'/g,dt=>dt.replace(/[;:]/g,Ve));let vt;for(;vt=a.exec($);){a.lastIndex=vt.index+vt[0].length;let dt=vt[1].replace(f,"").toLowerCase(),Mt=vt[2].replace(f,"");if(dt&&Mt){if(dt=Wt(dt),Mt=Wt(Mt),dt.indexOf(E)!==-1||dt.indexOf('"')!==-1||!e.allow_script_urls&&(dt==="behavior"||/expression\s*\(|\/\*|\*\//.test(Mt)))continue;dt==="font-weight"&&Mt==="700"?Mt="bold":(dt==="color"||dt==="background-color")&&(Mt=Mt.toLowerCase()),Z(e.force_hex_color)&&e.force_hex_color!=="off"&&uk(Mt).each(gn=>{(e.force_hex_color==="always"||gn.alpha===1)&&(Mt=z0(iu(gn)))}),Mt=Mt.replace(s,sn),W[dt]=re?ot(Mt,!0):Mt}}he("border","",!0),he("border","-width"),he("border","-color"),he("border","-style"),he("padding",""),he("margin",""),ze("border","border-width","border-style","border-color"),W.border==="medium none"&&delete W.border,W["border-image"]==="none"&&delete W["border-image"]}return W},serialize:($,W)=>{let re="";const fe=(he,Le)=>{const ze=Le[he];if(ze)for(let Ve=0,ot=ze.length;Ve<ot;Ve++){const Nt=ze[Ve],Wt=$[Nt];Wt&&(re+=(re.length>0?" ":"")+Nt+": "+Wt+";")}},te=(he,Le)=>{if(!S||!Le)return!0;let ze=S["*"];return ze&&ze[he]?!1:(ze=S[Le],!(ze&&ze[he]))};return W&&y?(fe("*",y),fe(W,y)):$t($,(he,Le)=>{he&&te(Le,W)&&(re+=(re.length>0?" ":"")+Le+": "+he+";")}),re}};return L},k8={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},E8=e=>e instanceof Event||Ee(e.initEvent),A8=e=>e.isDefaultPrevented===je||e.isDefaultPrevented===ue,T8=e=>$e(e.preventDefault)||E8(e),aw=(e,n)=>{const s=n!=null?n:{};for(const a in e)Bn(k8,a)||(s[a]=e[a]);return le(e.composedPath)&&(s.composedPath=()=>e.composedPath()),le(e.getModifierState)&&(s.getModifierState=a=>e.getModifierState(a)),le(e.getTargetRanges)&&(s.getTargetRanges=()=>e.getTargetRanges()),s},fk=(e,n,s,a)=>{var f;const g=aw(n,a);return g.type=e,$e(g.target)&&(g.target=(f=g.srcElement)!==null&&f!==void 0?f:s),T8(n)&&(g.preventDefault=()=>{g.defaultPrevented=!0,g.isDefaultPrevented=je,Ee(n.preventDefault)&&n.preventDefault()},g.stopPropagation=()=>{g.cancelBubble=!0,g.isPropagationStopped=je,Ee(n.stopPropagation)&&n.stopPropagation()},g.stopImmediatePropagation=()=>{g.isImmediatePropagationStopped=je,g.stopPropagation()},A8(g)||(g.isDefaultPrevented=g.defaultPrevented===!0?je:ue,g.isPropagationStopped=g.cancelBubble===!0?je:ue,g.isImmediatePropagationStopped=ue)),g},O8="mce-data-",_8=/^(?:mouse|contextmenu)|click/,hk=(e,n,s,a)=>{e.addEventListener(n,s,a||!1)},lw=(e,n,s,a)=>{e.removeEventListener(n,s,a||!1)},D8=e=>le(e)&&_8.test(e.type),U0=(e,n)=>{const s=fk(e.type,e,document,n);if(D8(e)&&Re(e.pageX)&&!Re(e.clientX)){const a=s.target.ownerDocument||document,f=a.documentElement,g=a.body,y=s;y.pageX=e.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),y.pageY=e.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}return s},M8=(e,n,s)=>{const a=e.document,f={type:"ready"};if(s.domLoaded){n(f);return}const g=()=>a.readyState==="complete"||a.readyState==="interactive"&&a.body,y=()=>{lw(e,"DOMContentLoaded",y),lw(e,"load",y),s.domLoaded||(s.domLoaded=!0,n(f)),e=null};g()?y():hk(e,"DOMContentLoaded",y),s.domLoaded||hk(e,"load",y)};class Mc{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=O8+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,s,a,f){const g=this;let y;const S=window,E=W=>{g.executeHandlers(U0(W||S.event),P)};if(!n||Vt(n)||Of(n))return a;let P;n[g.expando]?P=n[g.expando]:(P=g.count++,n[g.expando]=P,g.events[P]={}),f=f||n;const L=s.split(" ");let $=L.length;for(;$--;){let W=L[$],re=E,fe=!1,te=!1;if(W==="DOMContentLoaded"&&(W="ready"),g.domLoaded&&W==="ready"&&n.readyState==="complete"){a.call(f,U0({type:W}));continue}!g.hasFocusIn&&(W==="focusin"||W==="focusout")&&(fe=!0,te=W==="focusin"?"focus":"blur",re=he=>{const Le=U0(he||S.event);Le.type=Le.type==="focus"?"focusin":"focusout",g.executeHandlers(Le,P)}),y=g.events[P][W],y?W==="ready"&&g.domLoaded?a(U0({type:W})):y.push({func:a,scope:f}):(g.events[P][W]=y=[{func:a,scope:f}],y.fakeName=te,y.capture=fe,y.nativeHandler=re,W==="ready"?M8(n,re,g):hk(n,te||W,re,fe))}return n=y=null,a}unbind(n,s,a){if(!n||Vt(n)||Of(n))return this;const f=n[this.expando];if(f){let g=this.events[f];if(s){const y=s.split(" ");let S=y.length;for(;S--;){const E=y[S],P=g[E];if(P){if(a){let L=P.length;for(;L--;)if(P[L].func===a){const $=P.nativeHandler,W=P.fakeName,re=P.capture,fe=P.slice(0,L).concat(P.slice(L+1));fe.nativeHandler=$,fe.fakeName=W,fe.capture=re,g[E]=fe}}(!a||P.length===0)&&(delete g[E],lw(n,P.fakeName||E,P.nativeHandler,P.capture))}}}else $t(g,(y,S)=>{lw(n,y.fakeName||S,y.nativeHandler,y.capture)}),g={};for(const y in g)if(Bn(g,y))return this;delete this.events[f];try{delete n[this.expando]}catch(y){n[this.expando]=null}}return this}fire(n,s,a){return this.dispatch(n,s,a)}dispatch(n,s,a){if(!n||Vt(n)||Of(n))return this;const f=U0({type:s,target:n},a);do{const g=n[this.expando];g&&this.executeHandlers(f,g),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!f.isPropagationStopped());return this}clean(n){if(!n||Vt(n)||Of(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const s=n.getElementsByTagName("*");let a=s.length;for(;a--;)n=s[a],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,s){const a=this.events[s],f=a&&a[n.type];if(f)for(let g=0,y=f.length;g<y;g++){const S=f[g];if(S&&S.func.call(S.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Mc.Event=new Mc;const mk=Lt.each,P8=Lt.grep,gk="data-mce-style",R8=Lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),W0=(e,n,s)=>{$e(s)||s===""?Nr(e,n):Xs(e,n,s)},cw=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),mp=(e,n)=>{let s=0;if(e)for(let a=e.nodeType,f=e.previousSibling;f;f=f.previousSibling){const g=f.nodeType;n&&Vt(f)&&(g===a||!f.data.length)||(s++,a=g)}return s},ZM=(e,n)=>{const s=gi(n,"style"),a=e.serialize(e.parse(s),ts(n));W0(n,gk,a)},gp=(e,n)=>ft(e)?Bn(R8,n)?e+"":e+"px":e,uw=(e,n,s)=>{const a=cw(n);$e(s)||s===""?k0(e,a):Uy(e,a,gp(s,a))},qM=(e,n,s)=>{const a=n.keep_values,f={set:(y,S,E)=>{const P=ye.fromDom(y);Ee(n.url_converter)&&le(S)&&(S=n.url_converter.call(n.url_converter_scope||s(),String(S),E,y));const L="data-mce-"+E;W0(P,L,S),W0(P,E,S)},get:(y,S)=>{const E=ye.fromDom(y);return gi(E,"data-mce-"+S)||gi(E,S)}},g={style:{set:(y,S)=>{const E=ye.fromDom(y);a&&W0(E,gk,S),Nr(E,"style"),Z(S)&&xh(E,e.parse(S))},get:y=>{const S=ye.fromDom(y),E=gi(S,gk)||gi(S,"style");return e.serialize(e.parse(E),ts(S))}}};return a&&(g.href=g.src=f),g},nr=(e,n={})=>{const s={},a=window,f={};let g=0;const y=!0,S=!0,E=rk.forElement(ye.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),P=[],L=n.schema?n.schema:If({}),$=dk({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope,force_hex_color:n.force_hex_color},n.schema),W=n.ownEvents?new Mc:Mc.Event,re=L.getBlockElements(),fe=it=>Z(it)?Bn(re,it):xn(it)&&(Bn(re,it.nodeName)||ns(L,it)),te=it=>it&&e&&Z(it)?e.getElementById(it):it,he=it=>{const at=te(it);return le(at)?ye.fromDom(at):null},Le=(it,at,Yt="")=>{let zt;const Dn=he(it);if(le(Dn)&&pn(Dn)){const Lo=ey[at];Lo&&Lo.get?zt=Lo.get(Dn.dom,at):zt=gi(Dn,at)}return le(zt)?zt:Yt},ze=it=>{const at=te(it);return $e(at)?[]:at.attributes},Ve=(it,at,Yt)=>{cn(it,zt=>{if(xn(zt)){const Dn=ye.fromDom(zt),Lo=Yt===""?null:Yt,fr=gi(Dn,at),Ua=ey[at];Ua&&Ua.set?Ua.set(Dn.dom,Lo,at):W0(Dn,at,Lo),fr!==Lo&&n.onSetAttrib&&n.onSetAttrib({attrElm:Dn.dom,attrName:at,attrValue:Lo})}})},ot=(it,at)=>it.cloneNode(at),Nt=()=>n.root_element||e.body,Wt=it=>{const at=qi(it);return{x:at.x,y:at.y,w:at.width,h:at.height}},sn=(it,at)=>ir(e.body,te(it),at),vt=(it,at,Yt)=>{cn(it,zt=>{const Dn=ye.fromDom(zt);uw(Dn,at,Yt),n.update_styles&&ZM($,Dn)})},dt=(it,at)=>{cn(it,Yt=>{const zt=ye.fromDom(Yt);$t(at,(Dn,Lo)=>{uw(zt,Lo,Dn)}),n.update_styles&&ZM($,zt)})},Mt=(it,at,Yt)=>{const zt=te(it);if(!($e(zt)||!Tf(zt)&&!J6(zt)))return Yt?ru(ye.fromDom(zt),cw(at)):(at=at.replace(/-(\D)/g,(Dn,Lo)=>Lo.toUpperCase()),at==="float"&&(at="cssFloat"),zt.style?zt.style[at]:void 0)},gn=it=>{const at=te(it);if(!at)return{w:0,h:0};let Yt=Mt(at,"width"),zt=Mt(at,"height");return(!Yt||Yt.indexOf("px")===-1)&&(Yt="0"),(!zt||zt.indexOf("px")===-1)&&(zt="0"),{w:parseInt(Yt,10)||at.offsetWidth||at.clientWidth,h:parseInt(zt,10)||at.offsetHeight||at.clientHeight}},Mn=it=>{const at=te(it),Yt=sn(at),zt=gn(at);return{x:Yt.x,y:Yt.y,w:zt.w,h:zt.h}},ko=(it,at)=>{if(!it)return!1;const Yt=De(it)?it:[it];return Bt(Yt,zt=>El(ye.fromDom(zt),at))},Ho=(it,at,Yt,zt)=>{const Dn=[];let Lo=te(it);zt=zt===void 0;const fr=Yt||(Nt().nodeName!=="BODY"?Nt().parentNode:null);if(Z(at))if(at==="*")at=xn;else{const Ua=at;at=ea=>ko(ea,Ua)}for(;Lo&&!(Lo===fr||$e(Lo.nodeType)||O0(Lo)||Er(Lo));){if(!at||at(Lo))if(zt)Dn.push(Lo);else return[Lo];Lo=Lo.parentNode}return zt?Dn:null},Ms=(it,at,Yt)=>{const zt=Ho(it,at,Yt,!1);return zt&&zt.length>0?zt[0]:null},qs=(it,at,Yt)=>{let zt=at;if(it){Z(at)&&(zt=Dn=>ko(Dn,at));for(let Dn=it[Yt];Dn;Dn=Dn[Yt])if(Ee(zt)&&zt(Dn))return Dn}return null},Tr=(it,at)=>qs(it,at,"nextSibling"),Qi=(it,at)=>qs(it,at,"previousSibling"),Bs=it=>Ee(it.querySelectorAll),Xt=(it,at)=>{var Yt,zt;const Dn=(zt=(Yt=te(at))!==null&&Yt!==void 0?Yt:n.root_element)!==null&&zt!==void 0?zt:e;return Bs(Dn)?so(Dn.querySelectorAll(it)):[]},cn=function(it,at,Yt){const zt=Yt!=null?Yt:this;if(De(it)){const Dn=[];return mk(it,(Lo,fr)=>{const Ua=te(Lo);Ua&&Dn.push(at.call(zt,Ua,fr))}),Dn}else{const Dn=te(it);return Dn?at.call(zt,Dn):!1}},as=(it,at)=>{cn(it,Yt=>{$t(at,(zt,Dn)=>{Ve(Yt,Dn,zt)})})},zo=(it,at)=>{cn(it,Yt=>{const zt=ye.fromDom(Yt);np(zt,at)})},yn=(it,at,Yt,zt,Dn)=>cn(it,Lo=>{const fr=Z(at)?e.createElement(at):at;return le(Yt)&&as(fr,Yt),zt&&(!Z(zt)&&zt.nodeType?fr.appendChild(zt):Z(zt)&&zo(fr,zt)),Dn?fr:Lo.appendChild(fr)}),co=(it,at,Yt)=>yn(e.createElement(it),it,at,Yt,!0),Gt=Wm.decode,uo=Wm.encodeAllRaw,Ko=(it,at,Yt="")=>{let zt="<"+it;for(const Dn in at)hi(at,Dn)&&(zt+=" "+Dn+'="'+uo(at[Dn])+'"');return Io(Yt)&&Bn(L.getVoidElements(),it)?zt+" />":zt+">"+Yt+"</"+it+">"},Is=it=>{const at=e.createElement("div"),Yt=e.createDocumentFragment();Yt.appendChild(at),it&&(at.innerHTML=it);let zt;for(;zt=at.firstChild;)Yt.appendChild(zt);return Yt.removeChild(at),Yt},Ps=(it,at)=>cn(it,Yt=>{const zt=ye.fromDom(Yt);return at&&de(pi(zt),Dn=>{Oo(Dn)&&Dn.dom.length===0?ks(Dn):Ra(zt,Dn)}),ks(zt),zt.dom}),Mi=it=>cn(it,at=>{const Yt=at.attributes;for(let zt=Yt.length-1;zt>=0;zt--)at.removeAttributeNode(Yt.item(zt))}),Eu=it=>$.parse(it),of=(it,at)=>$.serialize(it,at),nl=it=>{if(af!==nr.DOM&&e===document){if(s[it])return;s[it]=!0}let at=e.getElementById("mceDefaultStyles");if(!at){at=e.createElement("style"),at.id="mceDefaultStyles",at.type="text/css";const Yt=e.head;Yt.firstChild?Yt.insertBefore(at,Yt.firstChild):Yt.appendChild(at)}at.styleSheet?at.styleSheet.cssText+=it:at.appendChild(e.createTextNode(it))},Vc=it=>{it||(it=""),de(it.split(","),at=>{f[at]=!0,E.load(at).catch(ge)})},go=(it,at,Yt)=>{cn(it,zt=>{if(xn(zt)){const Dn=ye.fromDom(zt),Lo=at.split(" ");de(Lo,fr=>{le(Yt)?(Yt?Cf:Bu)(Dn,fr):Py(Dn,fr)})}})},hs=(it,at)=>{go(it,at,!0)},Ts=(it,at)=>{go(it,at,!1)},Rr=(it,at)=>{const Yt=he(it),zt=at.split(" ");return le(Yt)&&ao(zt,Dn=>Xg(Yt,Dn))},pr=it=>{cn(it,at=>k0(ye.fromDom(at),"display"))},wl=it=>{cn(it,at=>Uy(ye.fromDom(at),"display","none"))},hd=it=>{const at=he(it);return le(at)&&Qs(Tm(at,"display"),"none")},uh=it=>(it||"mce_")+g++,Ng=it=>{const at=he(it);return le(at)?xn(at.dom)?at.dom.outerHTML:V2(at):""},U1=(it,at)=>{cn(it,Yt=>{xn(Yt)&&(Yt.outerHTML=at)})},GS=(it,at)=>{const Yt=te(at);return cn(it,zt=>{const Dn=Yt==null?void 0:Yt.parentNode,Lo=Yt==null?void 0:Yt.nextSibling;return Dn&&(Lo?Dn.insertBefore(zt,Lo):Dn.appendChild(zt)),zt})},Bg=(it,at,Yt)=>cn(at,zt=>{var Dn;const Lo=De(at)?it.cloneNode(!0):it;return Yt&&mk(P8(zt.childNodes),fr=>{Lo.appendChild(fr)}),(Dn=zt.parentNode)===null||Dn===void 0||Dn.replaceChild(Lo,zt),zt}),Kv=(it,at)=>{if(it.nodeName!==at.toUpperCase()){const Yt=co(at);return mk(ze(it),zt=>{Ve(Yt,zt.nodeName,Le(it,zt.nodeName))}),Bg(Yt,it,!0),Yt}else return it},W1=(it,at)=>{let Yt=it;for(;Yt;){let zt=at;for(;zt&&Yt!==zt;)zt=zt.parentNode;if(Yt===zt)break;Yt=Yt.parentNode}return!Yt&&it.ownerDocument?it.ownerDocument.documentElement:Yt},lm=it=>{if(xn(it)){const at=it.nodeName.toLowerCase()==="a"&&!Le(it,"href")&&Le(it,"id");if(Le(it,"name")||Le(it,"data-mce-bookmark")||at)return!0}return!1},md=(it,at,Yt)=>{let zt=0;if(lm(it))return!1;const Dn=it.firstChild;if(Dn){const Lo=new er(Dn,it),fr=L?L.getWhitespaceElements():{},Ua=at||(L?L.getNonEmptyElements():null);let ea=Dn;do{if(xn(ea)){const um=ea.getAttribute("data-mce-bogus");if(um){ea=Lo.next(um==="all");continue}const zc=ea.nodeName.toLowerCase();if(Ua&&Ua[zc]){if(zc==="br"){zt++,ea=Lo.next();continue}return!1}if(lm(ea))return!1}if(Of(ea)||Vt(ea)&&!kh(ea.data)&&(!(Yt!=null&&Yt.includeZwsp)||!Lm(ea.data))||Vt(ea)&&ea.parentNode&&fr[ea.parentNode.nodeName]&&kh(ea.data))return!1;ea=Lo.next()}while(ea)}return zt<=1},sf=()=>e.createRange(),Yv=(it,at,Yt)=>{let zt=sf(),Dn,Lo;if(it&&at&&it.parentNode&&at.parentNode){const fr=it.parentNode;return zt.setStart(fr,mp(it)),zt.setEnd(at.parentNode,mp(at)),Dn=zt.extractContents(),zt=sf(),zt.setStart(at.parentNode,mp(at)+1),zt.setEnd(fr,mp(it)+1),Lo=zt.extractContents(),fr.insertBefore(Nf(af,Dn,L),it),Yt?fr.insertBefore(Yt,it):fr.insertBefore(at,it),fr.insertBefore(Nf(af,Lo,L),it),Ps(it),Yt||at}else return},j1=(it,at,Yt,zt)=>{if(De(it)){let Dn=it.length;const Lo=[];for(;Dn--;)Lo[Dn]=j1(it[Dn],at,Yt,zt);return Lo}else return n.collect&&(it===e||it===a)&&P.push([it,at,Yt,zt]),W.bind(it,at,Yt,zt||af)},Xv=(it,at,Yt)=>{if(De(it)){let zt=it.length;const Dn=[];for(;zt--;)Dn[zt]=Xv(it[zt],at,Yt);return Dn}else{if(P.length>0&&(it===e||it===a)){let zt=P.length;for(;zt--;){const[Dn,Lo,fr]=P[zt];it===Dn&&(!at||at===Lo)&&(!Yt||Yt===fr)&&W.unbind(Dn,Lo,fr)}}return W.unbind(it,at,Yt)}},rf=(it,at,Yt)=>W.dispatch(it,at,Yt),KS=(it,at,Yt)=>W.dispatch(it,at,Yt),Jv=it=>{if(it&&Tf(it)){const at=it.getAttribute("data-mce-contenteditable");return at&&at!=="inherit"?at:it.contentEditable!=="inherit"?it.contentEditable:null}else return null},af={doc:e,settings:n,win:a,files:f,stdMode:y,boxModel:S,styleSheetLoader:E,boundEvents:P,styles:$,schema:L,events:W,isBlock:fe,root:null,clone:ot,getRoot:Nt,getViewPort:Wt,getRect:Mn,getSize:gn,getParent:Ms,getParents:Ho,get:te,getNext:Tr,getPrev:Qi,select:Xt,is:ko,add:yn,create:co,createHTML:Ko,createFragment:Is,remove:Ps,setStyle:vt,getStyle:Mt,setStyles:dt,removeAllAttribs:Mi,setAttrib:Ve,setAttribs:as,getAttrib:Le,getPos:sn,parseStyle:Eu,serializeStyle:of,addStyle:nl,loadCSS:Vc,addClass:hs,removeClass:Ts,hasClass:Rr,toggleClass:go,show:pr,hide:wl,isHidden:hd,uniqueId:uh,setHTML:zo,getOuterHTML:Ng,setOuterHTML:U1,decode:Gt,encode:uo,insertAfter:GS,replace:Bg,rename:Kv,findCommonAncestor:W1,run:cn,getAttribs:ze,isEmpty:md,createRng:sf,nodeIndex:mp,split:Yv,bind:j1,unbind:Xv,fire:KS,dispatch:rf,getContentEditable:Jv,getContentEditableParent:it=>{const at=Nt();let Yt=null;for(let zt=it;zt&&zt!==at&&(Yt=Jv(zt),Yt===null);zt=zt.parentNode);return Yt},isEditable:it=>{if(le(it)){const at=xn(it)?it:it.parentElement;return le(at)&&Tf(at)&&_o(ye.fromDom(at))}else return!1},destroy:()=>{if(P.length>0){let it=P.length;for(;it--;){const[at,Yt,zt]=P[it];W.unbind(at,Yt,zt)}}$t(f,(it,at)=>{E.unload(at),delete f[at]})},isChildOf:(it,at)=>it===at||at.contains(it),dumpRng:it=>"startContainer: "+it.startContainer.nodeName+", startOffset: "+it.startOffset+", endContainer: "+it.endContainer.nodeName+", endOffset: "+it.endOffset},ey=qM($,n,me(af));return af};nr.DOM=nr(document),nr.nodeIndex=mp;const N8=nr.DOM,Qr=0,GM=1,br=2,KM=3;class vi{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((s,a)=>{const f=N8;let g;const y=()=>{f.remove(P),g&&(g.onerror=g.onload=g=null)},S=()=>{y(),s()},E=()=>{y(),a("Failed to load script: "+n)},P=f.uniqueId();g=document.createElement("script"),g.id=P,g.type="text/javascript",g.src=Lt._addCacheSuffix(n),this.settings.referrerPolicy&&f.setAttrib(g,"referrerpolicy",this.settings.referrerPolicy),g.onload=S,g.onerror=E,(document.getElementsByTagName("head")[0]||document.body).appendChild(g)})}isDone(n){return this.states[n]===br}markDone(n){this.states[n]=br}add(n){const s=this;return s.queue.push(n),s.states[n]===void 0&&(s.states[n]=Qr),new Promise((f,g)=>{s.scriptLoadedCallbacks[n]||(s.scriptLoadedCallbacks[n]=[]),s.scriptLoadedCallbacks[n].push({resolve:f,reject:g})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const s=this,a=(E,P)=>{us(s.scriptLoadedCallbacks,P).each(L=>{de(L,$=>$[E](P))}),delete s.scriptLoadedCallbacks[P]},f=E=>{const P=Ne(E,L=>L.status==="rejected");return P.length>0?Promise.reject(On(P,({reason:L})=>De(L)?L:[L])):Promise.resolve()},g=E=>Promise.allSettled(nt(E,P=>s.states[P]===br?(a("resolve",P),Promise.resolve()):s.states[P]===KM?(a("reject",P),Promise.reject(P)):(s.states[P]=GM,s.loadScript(P).then(()=>{s.states[P]=br,a("resolve",P);const L=s.queue;return L.length>0?(s.queue=[],g(L).then(f)):Promise.resolve()},()=>(s.states[P]=KM,a("reject",P),Promise.reject(P)))))),y=E=>(s.loading=!0,g(E).then(P=>{s.loading=!1;const L=s.queueLoadedCallbacks.shift();return V.from(L).each(wt),f(P)})),S=ht(n);return s.loading?new Promise((E,P)=>{s.queueLoadedCallbacks.push(()=>{y(S).then(E,P)})}):y(S)}}vi.ScriptLoader=new vi;const Ur=e=>{let n=e;return{get:()=>n,set:f=>{n=f}}},au=(e,n)=>{const s=e.indexOf(n);return s!==-1&&e.indexOf(n,s+1)>s},B8=e=>ce(e)&&Bn(e,"raw"),F8=e=>De(e)&&e.length>1,j0={},dw=Ur("en"),Nd=()=>us(j0,dw.get()),lu={getData:()=>So(j0,e=>ie({},e)),setCode:e=>{e&&dw.set(e)},getCode:()=>dw.get(),add:(e,n)=>{let s=j0[e];s||(j0[e]=s={});const a=nt(Bo(n),f=>f.toLowerCase());$t(n,(f,g)=>{const y=g.toLowerCase();y!==g&&au(a,y)?(Bn(n,y)||(s[y]=f),s[g]=f):s[y]=f})},translate:e=>{const n=Nd().getOr({}),s=y=>Ee(y)?Object.prototype.toString.call(y):a(y)?"":""+y,a=y=>y===""||y===null||y===void 0,f=y=>{const S=s(y);return Bn(n,S)?s(n[S]):us(n,S.toLowerCase()).map(s).getOr(S)},g=y=>y.replace(/{context:\w+}$/,"");if(a(e))return"";if(B8(e))return s(e.raw);if(F8(e)){const y=e.slice(1),S=f(e[0]).replace(/\{([0-9]+)\}/g,(E,P)=>Bn(y,P)?s(y[P]):E);return g(S)}return g(f(e))},isRtl:()=>Nd().bind(e=>us(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Bn(j0,e)},Xa=()=>{const e=[],n={},s={},a=[],f=(te,he)=>{const Le=Ne(a,ze=>ze.name===te&&ze.state===he);de(Le,ze=>ze.resolve())},g=te=>Bn(n,te),y=te=>Bn(s,te),S=te=>{if(s[te])return s[te].instance},E=(te,he)=>{const Le=lu.getCode(),ze=","+(he||"")+",";!Le||he&&ze.indexOf(","+Le+",")===-1||vi.ScriptLoader.add(n[te]+"/langs/"+Le+".js")},P=(te,he)=>{Xa.languageLoad!==!1&&(g(te)?E(te,he):fe(te,"loaded").then(()=>E(te,he)))},L=(te,he)=>(e.push(he),s[te]={instance:he},f(te,"added"),he),$=te=>{delete n[te],delete s[te]},W=(te,he)=>Z(he)?Z(te)?{prefix:"",resource:he,suffix:""}:{prefix:te.prefix,resource:he,suffix:te.suffix}:he,re=(te,he)=>{if(n[te])return Promise.resolve();let Le=Z(he)?he:he.prefix+he.resource+he.suffix;Le.indexOf("/")!==0&&Le.indexOf("://")===-1&&(Le=Xa.baseURL+"/"+Le),n[te]=Le.substring(0,Le.lastIndexOf("/"));const ze=()=>(f(te,"loaded"),Promise.resolve());return s[te]?ze():vi.ScriptLoader.add(Le).then(ze)},fe=(te,he="added")=>he==="added"&&y(te)||he==="loaded"&&g(te)?Promise.resolve():new Promise(Le=>{a.push({name:te,state:he,resolve:Le})});return{items:e,urls:n,lookup:s,get:S,requireLangPack:P,add:L,remove:$,createUrl:W,load:re,waitFor:fe}};Xa.languageLoad=!0,Xa.baseURL="",Xa.PluginManager=Xa(),Xa.ThemeManager=Xa(),Xa.ModelManager=Xa();const H8=e=>{const n=Ur(V.none()),s=()=>n.get().each(e);return{clear:()=>{s(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:S=>{s(),n.set(V.some(S))}}},V8=e=>{const n=Ur(V.none()),s=()=>n.get().each(S=>clearInterval(S));return{clear:()=>{s(),n.set(V.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:S=>{s(),n.set(V.some(setInterval(S,e)))}}},Th=()=>{const e=H8(ge),n=s=>e.get().each(s);return Ot(ie({},e),{on:n})},fw=(e,n)=>{let s=null;return{cancel:()=>{G(s)||(clearTimeout(s),s=null)},throttle:(...g)=>{G(s)&&(s=setTimeout(()=>{s=null,e.apply(null,g)},n))}}},pk=(e,n)=>{let s=null;const a=()=>{G(s)||(clearTimeout(s),s=null)};return{cancel:a,throttle:(...g)=>{a(),s=setTimeout(()=>{s=null,e.apply(null,g)},n)}}},Z0=me("mce-annotation"),jm=me("data-mce-annotation"),bp=me("data-mce-annotation-uid"),q0=me("data-mce-annotation-active"),G0=me("data-mce-annotation-classes"),K0=me("data-mce-annotation-attrs"),YM=e=>n=>ws(n,e),Br=(e,n)=>{const s=e.selection.getRng(),a=ye.fromDom(s.startContainer),f=ye.fromDom(e.getBody()),g=n.fold(()=>"."+Z0(),E=>`[${jm()}="${E}"]`),y=kf(a,s.startOffset).getOr(a);return Td(y,g,YM(f)).bind(E=>Da(E,`${bp()}`).bind(P=>Da(E,`${jm()}`).map(L=>{const $=QM(e,P);return{uid:P,name:L,elements:$}})))},XM=e=>pn(e)&&Xg(e,Z0()),JM=(e,n)=>Ed(e,"data-mce-bogus")||TM(e,'[data-mce-bogus="all"]',YM(n)),QM=(e,n)=>{const s=ye.fromDom(e.getBody()),a=va(s,`[${bp()}="${n}"]`);return Ne(a,f=>!JM(f,s))},hw=(e,n)=>{const s=ye.fromDom(e.getBody()),a=va(s,`[${jm()}="${n}"]`),f={};return de(a,g=>{if(!JM(g,s)){const y=gi(g,bp()),S=us(f,y).getOr([]);f[y]=S.concat([g])}}),f},ya=(e,n)=>{const s=Ur({}),a=()=>({listeners:[],previous:Th()}),f=($,W)=>{g($,re=>(W(re),re))},g=($,W)=>{const re=s.get(),fe=us(re,$).getOrThunk(a),te=W(fe);re[$]=te,s.set(re)},y=($,W,re)=>{f($,fe=>{de(fe.listeners,te=>te(!0,$,{uid:W,nodes:nt(re,he=>he.dom)}))})},S=$=>{f($,W=>{de(W.listeners,re=>re(!1,$))})},E=($,W)=>{de(QM(e,$),re=>{W?Xs(re,q0(),"true"):Nr(re,q0())})},P=pk(()=>{const $=pt(n.getNames());de($,W=>{g(W,re=>{const fe=re.previous.get();return Br(e,V.some(W)).fold(()=>{fe.each(te=>{S(W),re.previous.clear(),E(te,!1)})},({uid:te,name:he,elements:Le})=>{Qs(fe,te)||(fe.each(ze=>E(ze,!1)),y(he,te,Le),re.previous.set(te),E(te,!0))}),{previous:re.previous,listeners:re.listeners}})})},30);return e.on("remove",()=>{P.cancel()}),e.on("NodeChange",()=>{P.throttle()}),{addListener:($,W)=>{g($,re=>({previous:re.previous,listeners:re.listeners.concat([W])}))}}},Pc=(e,n)=>{const s=jm(),a=g=>V.from(g.attr(s)).bind(n.lookup),f=g=>{var y,S;g.attr(bp(),null),g.attr(jm(),null),g.attr(q0(),null);const E=V.from(g.attr(K0())).map(W=>W.split(",")).getOr([]),P=V.from(g.attr(G0())).map(W=>W.split(",")).getOr([]);de(E,W=>g.attr(W,null));const L=(S=(y=g.attr("class"))===null||y===void 0?void 0:y.split(" "))!==null&&S!==void 0?S:[],$=ls(L,[Z0()].concat(P));g.attr("class",$.length>0?$.join(" "):null),g.attr(G0(),null),g.attr(K0(),null)};e.serializer.addTempAttr(q0()),e.serializer.addAttributeFilter(s,g=>{for(const y of g)a(y).each(S=>{S.persistent===!1&&(y.name==="span"?y.unwrap():f(y))})})},e3=()=>{const e={};return{register:(f,g)=>{e[f]={name:f,settings:g}},lookup:f=>us(e,f).map(g=>g.settings),getNames:()=>Bo(e)}};let bk=0;const vp=e=>{const s=new Date().getTime(),a=Math.floor(Math.random()*1e9);return bk++,e+"_"+a+bk+String(s)},z8=(e,n)=>{de(n,s=>{Cf(e,s)})},U8=(e,n)=>{de(n,s=>{Bu(e,s)})},vk=(e,n)=>ye.fromDom(e.dom.cloneNode(n)),ic=e=>vk(e,!1),mw=e=>vk(e,!0),Wr=(e,n)=>{const s=ye.fromTag(n),a=Kl(e);return Vr(s,a),s},Ju=(e,n)=>{const s=Wr(e,n);Hu(e,s);const a=pi(e);return $s(s,a),ks(e),s},yp=(e,n,s=ue)=>{const a=new er(e,n),f=g=>{let y;do y=a[g]();while(y&&!Vt(y)&&!s(y));return V.from(y).filter(Vt)};return{current:()=>V.from(a.current()).filter(Vt),next:()=>f("next"),prev:()=>f("prev"),prev2:()=>f("prev2")}},Zm=(e,n)=>{const s=n||(y=>e.isBlock(y)||Us(y)||gs(y)),a=(y,S,E,P)=>{if(Vt(y)){const L=P(y,S,y.data);if(L!==-1)return V.some({container:y,offset:L})}return E().bind(L=>a(L.container,L.offset,E,P))};return{backwards:(y,S,E,P)=>{const L=yp(y,P!=null?P:e.getRoot(),s);return a(y,S,()=>L.prev().map($=>({container:$,offset:$.length})),E).getOrNull()},forwards:(y,S,E,P)=>{const L=yp(y,P!=null?P:e.getRoot(),s);return a(y,S,()=>L.next().map($=>({container:$,offset:0})),E).getOrNull()}}},qm=Math.round,Gm=e=>e?{left:qm(e.left),top:qm(e.top),bottom:qm(e.bottom),right:qm(e.right),width:qm(e.width),height:qm(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Oh=(e,n)=>(e=Gm(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),t3=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Km=(e,n,s)=>e>=0&&e<=Math.min(n.height,s.height)/2,Ym=(e,n)=>{const s=Math.min(n.height/2,e.height/2);return e.bottom-s<n.top?!0:e.top>n.bottom?!1:Km(n.top-e.bottom,e,n)},Y0=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Km(n.bottom-e.top,e,n),W8=(e,n,s)=>n>=e.left&&n<=e.right&&s>=e.top&&s<=e.bottom,j8=e=>ve(e,(n,s)=>n.fold(()=>V.some(s),a=>{const f=Math.min(s.left,a.left),g=Math.min(s.top,a.top),y=Math.max(s.right,a.right),S=Math.max(s.bottom,a.bottom);return V.some({top:g,right:y,bottom:S,left:f,width:y-f,height:S-g})}),V.none()),n3=(e,n,s)=>{const a=Math.max(Math.min(n,e.left+e.width),e.left),f=Math.max(Math.min(s,e.top+e.height),e.top);return Math.sqrt((n-a)*(n-a)+(s-f)*(s-f))},Z8=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),yk=(e,n,s)=>Math.min(Math.max(e,n),s),gw=e=>{const n=e.startContainer,s=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===s+1?n.childNodes[s]:null},Lf=(e,n)=>{if(xn(e)&&e.hasChildNodes()){const s=e.childNodes,a=yk(n,0,s.length-1);return s[a]}else return e},wk=(e,n)=>{if(!(n<0&&xn(e)&&e.hasChildNodes()))return Lf(e,n)},q8=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),o3=e=>Z(e)&&e.charCodeAt(0)>=768&&q8.test(e),G8=(...e)=>n=>{for(let s=0;s<e.length;s++)if(e[s](n))return!0;return!1},pw=(...e)=>n=>{for(let s=0;s<e.length;s++)if(!e[s](n))return!1;return!0},_h=xn,bw=bi,os=Mm("display","block table"),_l=Mm("float","left right"),Qu=pw(_h,bw,Ue(_l)),xk=Ue(Mm("white-space","pre pre-line pre-wrap")),Ws=Vt,vw=Us,Ck=nr.nodeIndex,Ai=wk,Bd=e=>e?e.createRange():nr.DOM.createRng(),Sk=e=>Z(e)&&/[\r\n\t ]/.test(e),s3=e=>!!e.setStart&&!!e.setEnd,kk=e=>{const n=e.startContainer,s=e.startOffset;if(Sk(e.toString())&&xk(n.parentNode)&&Vt(n)){const a=n.data;if(Sk(a[s-1])||Sk(a[s+1]))return!0}return!1},yw=e=>{const n=e.ownerDocument,s=Bd(n),a=n.createTextNode(xs),f=e.parentNode;f.insertBefore(a,e),s.setStart(a,0),s.setEnd(a,1);const g=Gm(s.getBoundingClientRect());return f.removeChild(a),g},Ek=e=>{const n=e.startContainer,s=e.endContainer,a=e.startOffset,f=e.endOffset;if(n===s&&Vt(s)&&a===0&&f===1){const g=e.cloneRange();return g.setEndAfter(s),Fd(g)}else return null},ww=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Fd=e=>{var n;let s;const a=e.getClientRects();return a.length>0?s=Gm(a[0]):s=Gm(e.getBoundingClientRect()),!s3(e)&&vw(e)&&ww(s)?yw(e):ww(s)&&s3(e)&&(n=Ek(e))!==null&&n!==void 0?n:s},Dh=(e,n)=>{const s=Oh(e,n);return s.width=1,s.right=s.left+1,s},r3=e=>{const n=[],s=y=>{y.height!==0&&(n.length>0&&t3(y,n[n.length-1])||n.push(y))},a=(y,S)=>{const E=Bd(y.ownerDocument);if(S<y.data.length){if(o3(y.data[S]))return;if(o3(y.data[S-1])&&(E.setStart(y,S),E.setEnd(y,S+1),!kk(E))){s(Dh(Fd(E),!1));return}}S>0&&(E.setStart(y,S-1),E.setEnd(y,S),kk(E)||s(Dh(Fd(E),!1))),S<y.data.length&&(E.setStart(y,S),E.setEnd(y,S+1),kk(E)||s(Dh(Fd(E),!0)))},f=e.container(),g=e.offset();if(Ws(f))return a(f,g),n;if(_h(f))if(e.isAtEnd()){const y=Ai(f,g);Ws(y)&&a(y,y.data.length),Qu(y)&&!vw(y)&&s(Dh(Fd(y),!1))}else{const y=Ai(f,g);if(Ws(y)&&a(y,0),Qu(y)&&e.isAtEnd())return s(Dh(Fd(y),!1)),n;const S=Ai(e.container(),e.offset()-1);Qu(S)&&!vw(S)&&(os(S)||os(y)||!Qu(y))&&s(Dh(Fd(S),!1)),Qu(y)&&s(Dh(Fd(y),!0))}return n},bt=(e,n,s)=>{const a=()=>(Ws(e),n===0),f=()=>Ws(e)?n>=e.data.length:n>=e.childNodes.length,g=()=>{const L=Bd(e.ownerDocument);return L.setStart(e,n),L.setEnd(e,n),L},y=()=>(s||(s=r3(bt(e,n))),s),S=()=>y().length>0,E=L=>L&&e===L.container()&&n===L.offset(),P=L=>Ai(e,L?n-1:n);return{container:me(e),offset:me(n),toRange:g,getClientRects:y,isVisible:S,isAtStart:a,isAtEnd:f,isEqual:E,getNode:P}};bt.fromRangeStart=e=>bt(e.startContainer,e.startOffset),bt.fromRangeEnd=e=>bt(e.endContainer,e.endOffset),bt.after=e=>bt(e.parentNode,Ck(e)+1),bt.before=e=>bt(e.parentNode,Ck(e)),bt.isAbove=(e,n)=>qr(jt(n.getClientRects()),vn(e.getClientRects()),Ym).getOr(!1),bt.isBelow=(e,n)=>qr(vn(n.getClientRects()),jt(e.getClientRects()),Y0).getOr(!1),bt.isAtStart=e=>e?e.isAtStart():!1,bt.isAtEnd=e=>e?e.isAtEnd():!1,bt.isTextPosition=e=>e?Vt(e.container()):!1,bt.isElementPosition=e=>!bt.isTextPosition(e);const X0=(e,n)=>{Vt(n)&&n.data.length===0&&e.remove(n)},wp=(e,n,s)=>{n.insertNode(s),X0(e,s.previousSibling),X0(e,s.nextSibling)},ac=(e,n,s)=>{const a=V.from(s.firstChild),f=V.from(s.lastChild);n.insertNode(s),a.each(g=>X0(e,g.previousSibling)),f.each(g=>X0(e,g.nextSibling))},Ak=(e,n,s)=>{Er(s)?ac(e,n,s):wp(e,n,s)},Ar=Vt,i3=zu,$f=nr.nodeIndex,Tk=e=>{const n=e.parentNode;return i3(n)?Tk(n):n},xw=e=>e?ke(e.childNodes,(n,s)=>(i3(s)&&s.nodeName!=="BR"?n=n.concat(xw(s)):n.push(s),n),[]):[],a3=(e,n)=>{let s=e;for(;(s=s.previousSibling)&&Ar(s);)n+=s.data.length;return n},Cw=e=>n=>e===n,Ok=e=>{let n,s;n=xw(Tk(e)),s=Ae(n,Cw(e),e),n=n.slice(0,s+1);const a=ke(n,(f,g,y)=>(Ar(g)&&Ar(n[y-1])&&f++,f),0);return n=mr(n,Gi([e.nodeName])),s=Ae(n,Cw(e),e),s-a},_k=e=>(Ar(e)?"text()":e.nodeName.toLowerCase())+"["+Ok(e)+"]",K8=(e,n,s)=>{const a=[];for(let f=n.parentNode;f&&f!==e;f=f.parentNode)a.push(f);return a},l3=(e,n)=>{let s=[],a=n.container(),f=n.offset(),g;if(Ar(a))g=a3(a,f);else{const S=a.childNodes;f>=S.length?(g="after",f=S.length-1):g="before",a=S[f]}s.push(_k(a));let y=K8(e,a);return y=mr(y,Ue(zu)),s=s.concat(Lr(y,S=>_k(S))),s.reverse().join("/")+","+g},la=(e,n,s)=>{let a=xw(e);return a=mr(a,(f,g)=>!Ar(f)||!Ar(a[g-1])),a=mr(a,Gi([n])),a[s]},ca=(e,n)=>{let s=e,a=0;for(;Ar(s);){const f=s.data.length;if(n>=a&&n<=a+f){e=s,n=n-a;break}if(!Ar(s.nextSibling)){e=s,n=f;break}a+=f,s=s.nextSibling}return Ar(e)&&n>e.data.length&&(n=e.data.length),bt(e,n)},Ja=(e,n)=>{if(!n)return null;const s=n.split(","),a=s[0].split("/"),f=s.length>1?s[1]:"before",g=ke(a,(y,S)=>{const E=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(S);return E?(E[1]==="text()"&&(E[1]="#text"),la(y,E[1],parseInt(E[2],10))):null},e);if(!g)return null;if(!Ar(g)&&g.parentNode){let y;return f==="after"?y=$f(g)+1:y=$f(g),bt(g.parentNode,y)}return ca(g,parseInt(f,10))},wa=gs,Fa=(e,n,s)=>{let a=e(n.data.slice(0,s)).length;for(let f=n.previousSibling;f&&Vt(f);f=f.previousSibling)a+=e(f.data).length;return a},Ti=(e,n,s,a,f)=>{const g=f?a.startContainer:a.endContainer;let y=f?a.startOffset:a.endOffset;const S=[],E=e.getRoot();if(Vt(g))S.push(s?Fa(n,g,y):y);else{let P=0;const L=g.childNodes;y>=L.length&&L.length&&(P=1,y=Math.max(0,L.length-1)),S.push(e.nodeIndex(L[y],s)+P)}for(let P=g;P&&P!==E;P=P.parentNode)S.push(e.nodeIndex(P,s));return S},Dk=(e,n,s,a)=>{const f=n.dom,g=Ti(f,e,s,a,!0),y=n.isForward(),S=PM(a)?{isFakeCaret:!0}:{};if(n.isCollapsed())return ie({start:g,forward:y},S);{const E=Ti(f,e,s,a,!1);return ie({start:g,end:E,forward:y},S)}},J0=(e,n,s)=>{let a=0;return Lt.each(e.select(n),f=>{if(f.getAttribute("data-mce-bogus")!=="all"){if(f===s)return!1;a++;return}}),a},Mk=(e,n)=>{let s=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;if(xn(s)&&s.nodeName==="TR"){const f=s.childNodes;s=f[Math.min(n?a:a-1,f.length-1)],s&&(a=n?0:s.childNodes.length,n?e.setStart(s,a):e.setEnd(s,a))}},Pk=e=>(Mk(e,!0),Mk(e,!1),e),Rk=(e,n)=>{if(xn(e)&&(e=Lf(e,n),wa(e)))return e;if(Ba(e)){Vt(e)&&sp(e)&&(e=e.parentNode);let s=e.previousSibling;if(wa(s)||(s=e.nextSibling,wa(s)))return s}},c3=e=>Rk(e.startContainer,e.startOffset)||Rk(e.endContainer,e.endOffset),Sw=(e,n,s)=>{const a=s.getNode(),f=s.getRng();if(a.nodeName==="IMG"||wa(a)){const y=a.nodeName;return{name:y,index:J0(s.dom,y,a)}}const g=c3(f);if(g){const y=g.tagName;return{name:y,index:J0(s.dom,y,g)}}return Dk(e,s,n,f)},Nk=e=>{const n=e.getRng();return{start:l3(e.dom.getRoot(),bt.fromRangeStart(n)),end:l3(e.dom.getRoot(),bt.fromRangeEnd(n)),forward:e.isForward()}},Y8=e=>({rng:e.getRng(),forward:e.isForward()}),X8=(e,n,s)=>{const a={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return s?e.create("span",a,"&#xFEFF;"):e.create("span",a)},u3=(e,n)=>{const s=e.dom;let a=e.getRng();const f=s.uniqueId(),g=e.isCollapsed(),y=e.getNode(),S=y.nodeName,E=e.isForward();if(S==="IMG")return{name:S,index:J0(s,S,y)};const P=Pk(a.cloneRange());if(!g){P.collapse(!1);const $=X8(s,f+"_end",n);Ak(s,P,$)}a=Pk(a),a.collapse(!0);const L=X8(s,f+"_start",n);return Ak(s,a,L),e.moveToBookmark({id:f,keep:!0,forward:E}),{id:f,forward:E}},J8=(e,n,s=!1)=>n===2?Sw(nc,s,e):n===3?Nk(e):n?Y8(e):u3(e,!1),Bk=Be(Sw,lt,!0),kw=e=>{const n=g=>g(e),s=me(e),a=()=>f,f={tag:!0,inner:e,fold:(g,y)=>y(e),isValue:je,isError:ue,map:g=>fl.value(g(e)),mapError:a,bind:n,exists:n,forall:n,getOr:s,or:a,getOrThunk:s,orThunk:a,getOrDie:s,each:g=>{g(e)},toOptional:()=>V.some(e)};return f},d3=e=>{const n=()=>s,s={tag:!1,inner:e,fold:(a,f)=>a(e),isValue:ue,isError:je,map:n,mapError:a=>fl.error(a(e)),bind:n,exists:ue,forall:je,getOr:lt,or:lt,getOrThunk:Ie,orThunk:Ie,getOrDie:yt(String(e)),each:ge,toOptional:V.none};return s},fl={value:kw,error:d3,fromOption:(e,n)=>e.fold(()=>d3(n),kw)},ed={generate:e=>{if(!De(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],s={};return de(e,(a,f)=>{const g=Bo(a);if(g.length!==1)throw new Error("one and only one name per case");const y=g[0],S=a[y];if(s[y]!==void 0)throw new Error("duplicate key detected:"+y);if(y==="cata")throw new Error("cannot have a case named cata (sorry)");if(!De(S))throw new Error("case arguments must be an array");n.push(y),s[y]=(...E)=>{const P=E.length;if(P!==S.length)throw new Error("Wrong number of arguments to case "+y+". Expected "+S.length+" ("+S+"), got "+P);return{fold:(...$)=>{if($.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+$.length);return $[f].apply(null,E)},match:$=>{const W=Bo($);if(n.length!==W.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+W.join(","));if(!ao(n,fe=>Qe(W,fe)))throw new Error("Not all branches were specified when using match. Specified: "+W.join(", ")+`
Required: `+n.join(", "));return $[y].apply(null,E)},log:$=>{}}}}),s}};ed.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Kt=e=>{const n=[],s=[];return de(e,a=>{a.fold(f=>{n.push(f)},f=>{s.push(f)})}),{errors:n,values:s}},Q8=e=>e.type==="inline-command"||e.type==="inline-format",Xi=e=>e.type==="block-command"||e.type==="block-format",e7=e=>{const n=a=>fl.error({message:a,pattern:e}),s=(a,f,g)=>{if(e.format!==void 0){let y;if(De(e.format)){if(!ao(e.format,Z))return n(a+" pattern has non-string items in the `format` array");y=e.format}else if(Z(e.format))y=[e.format];else return n(a+" pattern has non-string `format` parameter");return fl.value(f(y))}else return e.cmd!==void 0?Z(e.cmd)?fl.value(g(e.cmd,e.value)):n(a+" pattern has non-string `cmd` parameter"):n(a+" pattern is missing both `format` and `cmd` parameters")};if(!ce(e))return n("Raw pattern is not an object");if(!Z(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Z(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let a=e.start,f=e.end;return f.length===0&&(f=a,a=""),s("Inline",g=>({type:"inline-format",start:a,end:f,format:g}),(g,y)=>({type:"inline-command",start:a,end:f,cmd:g,value:y}))}else return e.replacement!==void 0?Z(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):fl.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):s("Block",a=>({type:"block-format",start:e.start,format:a[0]}),(a,f)=>({type:"block-command",start:e.start,cmd:a,value:f}))},Fk=e=>Ne(e,Xi),f3=e=>Ne(e,Q8),Dl=(e,n)=>({inlinePatterns:f3(e),blockPatterns:Fk(e),dynamicPatternsLookup:n}),t7=e=>{const n=Kt(nt(e,e7));return de(n.errors,s=>{}),n.values},n7=e=>n=>{const s=e(n);return t7(s)},lc=Rs().deviceType,Ik=lc.isTouch(),Q0=nr.DOM,Id=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return ve(n,(s,a)=>{const f=a.split("="),g=f[0],y=f.length>1?f[1]:g;return s[Bi(g)]=Bi(y),s},{})},cu=e=>ae(e,RegExp),fn=e=>n=>n.options.get(e),cc=e=>Z(e)||ce(e),h3=(e,n="")=>s=>{const a=Z(s);if(a)if(s.indexOf("=")!==-1){const f=Id(s);return{value:us(f,e.id).getOr(n),valid:a}}else return{value:s,valid:a};else return{valid:!1,message:"Must be a string."}},m3=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:h3(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:h3(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:s=>{const a=Z(s)&&Po(s);return a?{value:s,valid:a}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:s=>{const a=Qe(["block","linebreak","invert","default"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:s=>qe(s)?{valid:!0,value:s}:Z(s)?{valid:!0,value:s}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:s=>{const a=s===!1||Z(s)||ne(s,Z);return a?Z(s)?{value:nt(s.split(","),Bi),valid:a}:De(s)?{value:s,valid:a}:s===!1?{value:[],valid:a}:{value:s,valid:a}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Zk(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:s=>{const a=Z(s)||ne(s,Z);return a?{value:De(s)?s:nt(s.split(","),Bi),valid:a}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:s=>{const a=qe(s)||Z(s);return a?s===!1||lc.isiPhone()||lc.isiPad()?{value:"",valid:a}:{value:s===!0?"table,img,figure.image,div,video,iframe":s,valid:a}:{valid:!1,message:"Must be boolean or a string"}},default:!Ik}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:s=>s===!1||Z(s)||Ee(s),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:s=>{const a=s===!1||Z(s);return a?{value:s===!1?"":s,valid:a}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:cc}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:cc}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:cc}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:s=>Z(s)||s===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:s=>ne(s,ce)||s===!1?{value:t7(s===!1?[]:s),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:s=>Ee(s)?{value:n7(s),valid:!0}:{valid:!1,message:"Must be a single function"},default:s=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:s=>ne(s,cu)?{value:s,valid:!0}:cu(s)?{value:[s],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!1}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:s=>{const a=Qe(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:s=>{const a=Qe(["inherited","collapsed","expanded"],s);return a?{value:s,valid:a}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("force_hex_color",{processor:s=>{const a=["always","rgb_only","off"],f=Qe(a,s);return f?{value:s,valid:f}:{valid:!1,message:`Must be one of: ${a.join(", ")}.`}},default:"off"}),n("sandbox_iframes",{processor:"boolean",default:!1}),n("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:lu.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Q0.getAttrib(e.getElement(),"placeholder")})})},Lk=fn("iframe_attrs"),g3=fn("doctype"),$k=fn("document_base_url"),Hk=fn("body_id"),o7=fn("body_class"),Vk=fn("content_security_policy"),s7=fn("br_in_pre"),Ia=fn("forced_root_block"),eb=fn("forced_root_block_attrs"),r7=fn("newline_behavior"),i7=fn("br_newline_selector"),zk=fn("no_newline_selector"),a7=fn("keep_styles"),p3=fn("end_container_on_empty_block"),b3=fn("automatic_uploads"),tb=fn("images_reuse_filename"),l7=fn("images_replace_blob_uris"),v3=fn("icons"),c7=fn("icons_url"),u7=fn("images_upload_url"),d7=fn("images_upload_base_path"),Uk=fn("images_upload_credentials"),f7=fn("images_upload_handler"),xp=fn("content_css_cors"),or=fn("referrer_policy"),Wk=fn("language"),Qa=fn("language_url"),Ew=fn("indent_use_margin"),y3=fn("indentation"),w3=fn("content_css"),Aw=fn("content_style"),x3=fn("font_css"),h7=fn("directionality"),m7=fn("inline_boundaries_selector"),C3=fn("object_resizing"),g7=fn("resize_img_proportional"),p7=fn("placeholder"),S3=fn("event_root"),b7=fn("service_message"),Cp=fn("theme"),v7=fn("theme_url"),jk=fn("model"),y7=fn("model_url"),nb=fn("inline_boundaries"),w7=fn("formats"),k3=fn("preview_styles"),E3=fn("format_empty_lines"),Sp=fn("format_noneditable_selector"),A3=fn("custom_ui_selector"),Zk=fn("inline"),x7=fn("hidden_input"),C7=fn("submit_patch"),Hf=fn("add_form_submit_trigger"),Tw=fn("add_unload_trigger"),Ow=fn("custom_undo_redo_levels"),qk=fn("disable_nodechange"),T3=fn("readonly"),Vf=fn("editable_root"),_w=fn("content_css_cors"),Dw=fn("plugins"),Mh=fn("external_plugins"),Mw=fn("block_unsupported_drop"),S7=fn("visual"),k7=fn("visual_table_class"),O3=fn("visual_anchor_class"),E7=fn("iframe_aria_text"),_3=fn("setup"),A7=fn("init_instance_callback"),T7=fn("urlconverter_callback"),D3=fn("auto_focus"),O7=fn("browser_spellcheck"),M3=fn("protect"),_7=fn("paste_block_drop"),Pw=fn("paste_data_images"),D7=fn("paste_preprocess"),P3=fn("paste_postprocess"),Gk=fn("newdocument_content"),R3=fn("paste_webkit_styles"),M7=fn("paste_remove_styles_if_webkit"),P7=fn("paste_merge_formats"),R7=fn("smart_paste"),N7=fn("paste_as_text"),oee=fn("paste_tab_spaces"),Kk=fn("allow_html_data_urls"),Yk=fn("text_patterns"),B7=fn("text_patterns_lookup"),N3=fn("noneditable_class"),F7=fn("editable_class"),I7=fn("noneditable_regexp"),L7=fn("preserve_cdata"),$7=fn("highlight_on_focus"),kp=fn("xss_sanitization"),H7=fn("init_content_sync"),V7=e=>e.options.isSet("text_patterns_lookup"),z7=e=>Lt.explode(e.options.get("font_size_style_values")),U7=e=>Lt.explode(e.options.get("font_size_classes")),W7=e=>e.options.get("encoding")==="xml",B3=e=>Lt.explode(e.options.get("images_file_types")),j7=fn("table_tab_navigation"),ob=fn("details_initial_state"),Z7=fn("details_serialized_state"),q7=fn("force_hex_color"),Rw=fn("sandbox_iframes"),F3=xn,Xk=Vt,I3=e=>{const n=e.parentNode;n&&n.removeChild(e)},L3=e=>{const n=nc(e);return{count:e.length-n.length,text:n}},Ep=e=>{let n;for(;(n=e.data.lastIndexOf(Yi))!==-1;)e.deleteData(n,1)},Jk=(e,n)=>(Oi(e),n),G7=(e,n)=>{const s=L3(e.data.substr(0,n.offset())),a=L3(e.data.substr(n.offset()));return(s.text+a.text).length>0?(Ep(e),bt(e,n.offset()-s.count)):n},K7=(e,n)=>{const s=n.container(),a=Ss(so(s.childNodes),e).map(f=>f<n.offset()?bt(s,n.offset()-1):n).getOr(n);return Oi(e),a},Y7=(e,n)=>Xk(e)&&n.container()===e?G7(e,n):Jk(e,n),$3=(e,n)=>n.container()===e.parentNode?K7(e,n):Jk(e,n),H3=(e,n)=>bt.isTextPosition(n)?Y7(e,n):$3(e,n),Oi=e=>{F3(e)&&Ba(e)&&(DM(e)?e.removeAttribute("data-mce-caret"):I3(e)),Xk(e)&&(Ep(e),e.data.length===0&&I3(e))},X7=gs,J7=Xr,Q7=_0,V3="*[contentEditable=false],video,audio,embed,object",z3=(e,n,s)=>{const a=Oh(n.getBoundingClientRect(),s);let f,g;if(e.tagName==="BODY"){const S=e.ownerDocument.documentElement;f=e.scrollLeft||S.scrollLeft,g=e.scrollTop||S.scrollTop}else{const S=e.getBoundingClientRect();f=e.scrollLeft-S.left,g=e.scrollTop-S.top}a.left+=f,a.right+=f,a.top+=g,a.bottom+=g,a.width=1;let y=n.offsetWidth-n.clientWidth;return y>0&&(s&&(y*=-1),a.left+=y,a.right+=y),a},eH=e=>{var n,s;const a=va(ye.fromDom(e),V3);for(let f=0;f<a.length;f++){const g=a[f].dom;let y=g.previousSibling;if(P0(y)){const S=y.data;S.length===1?(n=y.parentNode)===null||n===void 0||n.removeChild(y):y.deleteData(S.length-1,1)}y=g.nextSibling,Fm(y)&&(y.data.length===1?(s=y.parentNode)===null||s===void 0||s.removeChild(y):y.deleteData(0,1))}},U3=(e,n,s,a)=>{const f=Th();let g,y;const S=Ia(e),E=e.dom,P=(te,he)=>{let Le;if(L(),Q7(he))return null;if(s(he)){const ze=MM(S,he,te),Ve=z3(n,he,te);E.setStyle(ze,"top",Ve.top),y=ze;const ot=E.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});E.setStyles(ot,ie({},Ve)),E.add(n,ot),f.set({caret:ot,element:he,before:te}),te&&E.addClass(ot,"mce-visual-caret-before"),$(),Le=he.ownerDocument.createRange(),Le.setStart(ze,0),Le.setEnd(ze,0)}else return y=s8(he,te),Le=he.ownerDocument.createRange(),Nw(y.nextSibling)?(Le.setStart(y,0),Le.setEnd(y,0)):(Le.setStart(y,1),Le.setEnd(y,1)),Le;return Le},L=()=>{eH(n),y&&(Oi(y),y=null),f.on(te=>{E.remove(te.caret),f.clear()}),g&&(clearInterval(g),g=void 0)},$=()=>{g=setInterval(()=>{f.on(te=>{a()?E.toggleClass(te.caret,"mce-visual-caret-hidden"):E.addClass(te.caret,"mce-visual-caret-hidden")})},500)};return{show:P,hide:L,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{f.on(te=>{const he=z3(n,te.element,te.before);E.setStyles(te.caret,ie({},he))})},destroy:()=>clearInterval(g)}},W3=()=>on.browser.isFirefox(),Nw=e=>X7(e)||J7(e),sb=e=>(Nw(e)||Dd(e)&&W3())&&Lu(ye.fromDom(e)).exists(_o),tH=dl,Ap=gs,nH=Xr,Qk=Mm("display","block table table-cell table-caption list-item"),Bw=Ba,eE=sp,oH=xn,sH=Vt,Fw=bi,Xm=e=>e>0,Ph=e=>e<0,rb=(e,n)=>{let s;for(;s=e(n);)if(!eE(s))return s;return null},Tp=(e,n,s,a,f)=>{const g=new er(e,a),y=Ap(e)||eE(e);let S;if(Ph(n)){if(y&&(S=rb(g.prev.bind(g),!0),s(S)))return S;for(;S=rb(g.prev.bind(g),f);)if(s(S))return S}if(Xm(n)){if(y&&(S=rb(g.next.bind(g),!0),s(S)))return S;for(;S=rb(g.next.bind(g),f);)if(s(S))return S}return null},j3=(e,n)=>{const s=f=>tH(f.dom),a=f=>f.dom===n;return Sr(ye.fromDom(e),s,a).map(f=>f.dom).getOr(n)},zf=(e,n)=>{for(;e&&e!==n;){if(Qk(e))return e;e=e.parentNode}return null},td=(e,n,s)=>zf(e.container(),s)===zf(n.container(),s),Iw=(e,n)=>{if(!n)return V.none();const s=n.container(),a=n.offset();return oH(s)?V.from(s.childNodes[a+e]):V.none()},tE=(e,n)=>{var s;const f=((s=n.ownerDocument)!==null&&s!==void 0?s:document).createRange();return e?(f.setStartBefore(n),f.setEndBefore(n)):(f.setStartAfter(n),f.setEndAfter(n)),f},Z3=(e,n,s)=>zf(n,e)===zf(s,e),q3=(e,n,s)=>{const a=e?"previousSibling":"nextSibling";let f=s;for(;f&&f!==n;){let g=f[a];if(g&&Bw(g)&&(g=g[a]),Ap(g)||nH(g)){if(Z3(n,g,f))return g;break}if(Fw(g))break;f=f.parentNode}return null},ib=Be(tE,!0),ab=Be(tE,!1),nE=(e,n,s)=>{let a;const f=Be(q3,!0,n),g=Be(q3,!1,n),y=s.startContainer,S=s.startOffset;if(sp(y)){const E=sH(y)?y.parentNode:y,P=E.getAttribute("data-mce-caret");if(P==="before"&&(a=E.nextSibling,sb(a)))return ib(a);if(P==="after"&&(a=E.previousSibling,sb(a)))return ab(a)}if(!s.collapsed)return s;if(Vt(y)){if(Bw(y)){if(e===1){if(a=g(y),a)return ib(a);if(a=f(y),a)return ab(a)}if(e===-1){if(a=f(y),a)return ab(a);if(a=g(y),a)return ib(a)}return s}if(P0(y)&&S>=y.data.length-1)return e===1&&(a=g(y),a)?ib(a):s;if(Fm(y)&&S<=1)return e===-1&&(a=f(y),a)?ab(a):s;if(S===y.data.length)return a=g(y),a?ib(a):s;if(S===0)return a=f(y),a?ab(a):s}return s},G3=(e,n)=>Iw(e?0:-1,n).filter(Ap),lb=(e,n,s)=>{const a=nE(e,n,s);return e===-1?bt.fromRangeStart(a):bt.fromRangeEnd(a)},Lw=e=>V.from(e.getNode()).map(ye.fromDom),rH=e=>V.from(e.getNode(!0)).map(ye.fromDom),oE=(e,n)=>{let s=n;for(;s=e(s);)if(s.isVisible())return s;return s},$w=(e,n)=>{const s=td(e,n);return!s&&Us(e.getNode())?!0:s};var Hi;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Hi||(Hi={}));const see=gs,Uf=Vt,K3=xn,Y3=Us,Op=bi,xa=Pf,_p=X2,cb=(e,n)=>{const s=[];let a=e;for(;a&&a!==n;)s.push(a),a=a.parentNode;return s},Dp=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,sE=(e,n)=>{if(Xm(e)){if(Op(n.previousSibling)&&!Uf(n.previousSibling))return bt.before(n);if(Uf(n))return bt(n,0)}if(Ph(e)){if(Op(n.nextSibling)&&!Uf(n.nextSibling))return bt.after(n);if(Uf(n))return bt(n,n.data.length)}return Ph(e)?Y3(n)?bt.before(n):bt.after(n):bt.before(n)},rE=(e,n)=>{const s=n.nextSibling;return s&&Op(s)?Uf(s)?bt(s,0):bt.before(s):Hw(Hi.Forwards,bt.after(n),e)},Hw=(e,n,s)=>{let a,f,g,y;if(!K3(s)||!n)return null;if(n.isEqual(bt.after(s))&&s.lastChild){if(y=bt.after(s.lastChild),Ph(e)&&Op(s.lastChild)&&K3(s.lastChild))return Y3(s.lastChild)?bt.before(s.lastChild):y}else y=n;const S=y.container();let E=y.offset();if(Uf(S)){if(Ph(e)&&E>0)return bt(S,--E);if(Xm(e)&&E<S.length)return bt(S,++E);a=S}else{if(Ph(e)&&E>0&&(f=Dp(S,E-1),Op(f)))return!xa(f)&&(g=Tp(f,e,_p,f),g)?Uf(g)?bt(g,g.data.length):bt.after(g):Uf(f)?bt(f,f.data.length):bt.before(f);if(Xm(e)&&E<S.childNodes.length&&(f=Dp(S,E),Op(f)))return Y3(f)?rE(s,f):!xa(f)&&(g=Tp(f,e,_p,f),g)?Uf(g)?bt(g,0):bt.before(g):Uf(f)?bt(f,0):bt.after(f);a=f||y.getNode()}if(a&&(Xm(e)&&y.isAtEnd()||Ph(e)&&y.isAtStart())&&(a=Tp(a,e,je,s,!0),_p(a,s)))return sE(e,a);f=a&&Tp(a,e,_p,s);const P=ut(Ne(cb(S,s),see));return P&&(!f||!P.contains(f))?(Xm(e)?y=bt.after(P):y=bt.before(P),y):f?sE(e,f):null},Ld=e=>({next:n=>Hw(Hi.Forwards,n,e),prev:n=>Hw(Hi.Backwards,n,e)}),iH=(e,n,s)=>{const a=e?bt.before(s):bt.after(s);return Ml(e,n,a)},aH=e=>Us(e)?bt.before(e):bt.after(e),Rh=e=>bt.isTextPosition(e)?e.offset()===0:bi(e.getNode()),iE=e=>{if(bt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return bi(e.getNode(!0))},aE=(e,n)=>!bt.isTextPosition(e)&&!bt.isTextPosition(n)&&e.getNode()===n.getNode(!0),Wf=e=>!bt.isTextPosition(e)&&Us(e.getNode()),X3=(e,n,s)=>e?!aE(n,s)&&!Wf(n)&&iE(n)&&Rh(s):!aE(s,n)&&Rh(n)&&iE(s),Ml=(e,n,s)=>{const a=Ld(n);return V.from(e?a.next(s):a.prev(s))},jf=(e,n,s)=>Ml(e,n,s).bind(a=>td(s,a,n)&&X3(e,s,a)?Ml(e,n,a):V.some(a)),lE=(e,n,s,a)=>jf(e,n,s).bind(f=>a(f)?lE(e,n,f,a):V.some(f)),Mp=(e,n)=>{const s=e?n.firstChild:n.lastChild;return Vt(s)?V.some(bt(s,e?0:s.data.length)):s?bi(s)?V.some(e?bt.before(s):aH(s)):iH(e,n,s):V.none()},el=Be(Ml,!0),hl=Be(Ml,!1),La=Be(Mp,!0),uu=Be(Mp,!1),Vw="_mce_caret",uc=e=>xn(e)&&e.id===Vw,Jm=(e,n)=>{let s=n;for(;s&&s!==e;){if(uc(s))return s;s=s.parentNode}return null},lH=e=>Z(e.start),cH=e=>Bn(e,"rng"),uH=e=>Bn(e,"id"),cE=e=>Bn(e,"name"),J3=e=>Lt.isArray(e.start),ub=e=>!cE(e)&&qe(e.forward)?e.forward:!0,Q3=(e,n)=>(xn(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),ree=(e,n)=>{const s=V.from(Ja(e.getRoot(),n.start)),a=V.from(Ja(e.getRoot(),n.end));return qr(s,a,(f,g)=>{const y=e.createRng();return y.setStart(f.container(),f.offset()),y.setEnd(g.container(),g.offset()),{range:y,forward:ub(n)}})},dH=(e,n)=>{var s;const f=((s=e.ownerDocument)!==null&&s!==void 0?s:document).createTextNode(Yi);e.appendChild(f),n.setStart(f,0),n.setEnd(f,0)},fH=e=>!e.hasChildNodes(),iee=(e,n)=>uu(e).fold(ue,s=>(n.setStart(s.container(),s.offset()),n.setEnd(s.container(),s.offset()),!0)),e4=(e,n,s)=>fH(n)&&Jm(e,n)?(dH(n,s),!0):!1,ss=(e,n,s,a)=>{const f=s[n?"start":"end"],g=e.getRoot();if(f){let y=g,S=f[0];for(let E=f.length-1;y&&E>=1;E--){const P=y.childNodes;if(e4(g,y,a))return!0;if(f[E]>P.length-1)return e4(g,y,a)?!0:iee(y,a);y=P[f[E]]}Vt(y)&&(S=Math.min(f[0],y.data.length)),xn(y)&&(S=Math.min(f[0],y.childNodes.length)),n?a.setStart(y,S):a.setEnd(y,S)}return!0},$d=e=>Vt(e)&&e.data.length>0,Qm=(e,n,s)=>{const a=e.get(s.id+"_"+n),f=a==null?void 0:a.parentNode,g=s.keep;if(a&&f){let y,S;if(n==="start"?g?a.hasChildNodes()?(y=a.firstChild,S=1):$d(a.nextSibling)?(y=a.nextSibling,S=0):$d(a.previousSibling)?(y=a.previousSibling,S=a.previousSibling.data.length):(y=f,S=e.nodeIndex(a)+1):(y=f,S=e.nodeIndex(a)):g?a.hasChildNodes()?(y=a.firstChild,S=1):$d(a.previousSibling)?(y=a.previousSibling,S=a.previousSibling.data.length):(y=f,S=e.nodeIndex(a)):(y=f,S=e.nodeIndex(a)),!g){const E=a.previousSibling,P=a.nextSibling;Lt.each(Lt.grep(a.childNodes),$=>{Vt($)&&($.data=$.data.replace(/\uFEFF/g,""))});let L;for(;L=e.get(s.id+"_"+n);)e.remove(L,!0);if(Vt(P)&&Vt(E)&&!on.browser.isOpera()){const $=E.data.length;E.appendData(P.data),e.remove(P),y=E,S=$}}return V.some(bt(y,S))}else return V.none()},uE=(e,n)=>{const s=e.createRng();return ss(e,!0,n,s)&&ss(e,!1,n,s)?V.some({range:s,forward:ub(n)}):V.none()},hH=(e,n)=>{const s=Qm(e,"start",n),a=Qm(e,"end",n);return qr(s,a.or(s),(f,g)=>{const y=e.createRng();return y.setStart(Q3(e,f.container()),f.offset()),y.setEnd(Q3(e,g.container()),g.offset()),{range:y,forward:ub(n)}})},dE=(e,n)=>V.from(e.select(n.name)[n.index]).map(s=>{const a=e.createRng();return a.selectNode(s),{range:a,forward:!0}}),mH=(e,n)=>{const s=e.dom;if(n){if(J3(n))return uE(s,n);if(lH(n))return ree(s,n);if(uH(n))return hH(s,n);if(cE(n))return dE(s,n);if(cH(n))return V.some({range:n.rng,forward:ub(n)})}return V.none()},fE=(e,n,s)=>J8(e,n,s),hE=(e,n)=>{mH(e,n).each(({range:s,forward:a})=>{e.setRng(s,a)})},dc=e=>xn(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",mE=(e=>n=>e===n)(xs),db=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,gE=e=>!db(e)&&!mE(e)&&!Uu(e),t4=e=>{const n=[];if(e)for(let s=0;s<e.rangeCount;s++)n.push(e.getRangeAt(s));return n},gH=e=>On(e,n=>{const s=gw(n);return s?[ye.fromDom(s)]:[]}),n4=e=>t4(e).length>1,pH=e=>Ne(gH(e),tc),o4=e=>va(e,"td[data-mce-selected],th[data-mce-selected]"),bH=(e,n)=>{const s=o4(n);return s.length>0?s:pH(e)},Pp=e=>bH(t4(e.selection.getSel()),ye.fromDom(e.getBody())),Rp=(e,n)=>Ef(e,"table",n),vH=e=>{const n=e.startContainer,s=e.startOffset;return Vt(n)?s===0?V.some(ye.fromDom(n)):V.none():V.from(n.childNodes[s]).map(ye.fromDom)},yH=e=>{const n=e.endContainer,s=e.endOffset;return Vt(n)?s===n.data.length?V.some(ye.fromDom(n)):V.none():V.from(n.childNodes[s-1]).map(ye.fromDom)},s4=e=>Em(e).fold(me([e]),n=>[e].concat(s4(n))),pE=e=>Dc(e).fold(me([e]),n=>ts(n)==="br"?_c(n).map(s=>[e].concat(pE(s))).getOr([]):[e].concat(pE(n))),bE=(e,n)=>qr(vH(n),yH(n),(s,a)=>{const f=st(s4(e),Be(ws,s)),g=st(pE(e),Be(ws,a));return f.isSome()&&g.isSome()}).getOr(!1),vE=(e,n,s,a)=>{const f=s,g=new er(s,f),y=di(e.schema.getMoveCaretBeforeOnEnterElements(),(E,P)=>!Qe(["td","th","table"],P.toLowerCase()));let S=s;do{if(Vt(S)&&Lt.trim(S.data).length!==0){a?n.setStart(S,0):n.setEnd(S,S.data.length);return}if(y[S.nodeName]){a?n.setStartBefore(S):S.nodeName==="BR"?n.setEndBefore(S):n.setEndAfter(S);return}}while(S=a?g.next():g.prev());f.nodeName==="BODY"&&(a?n.setStart(f,0):n.setEnd(f,f.childNodes.length))},zw=e=>{const n=e.selection.getSel();return le(n)&&n.rangeCount>0},yE=(e,n)=>{const s=Pp(e);s.length>0?de(s,a=>{const f=a.dom,g=e.dom.createRng();g.setStartBefore(f),g.setEndAfter(f),n(g,!0)}):n(e.selection.getRng(),!1)},r4=(e,n,s)=>{const a=u3(e,n);s(a),e.moveToBookmark(a)},fb=e=>ft(e==null?void 0:e.nodeType),wE=e=>xn(e)&&!dc(e)&&!uc(e)&&!zu(e),wH=(e,n)=>{if(wE(n)&&!/^(TD|TH)$/.test(n.nodeName)){const s=e.getAttrib(n,"data-mce-selected"),a=parseInt(s,10);return!isNaN(a)&&a>0}else return!1},i4=(e,n,s)=>{const{selection:a,dom:f}=e,g=a.getNode(),y=gs(g);r4(a,!0,()=>{n()}),y&&gs(g)&&f.isChildOf(g,e.getBody())?e.selection.select(g):s(a.getStart())&&xH(f,a)},xH=(e,n)=>{var s,a;const f=n.getRng(),{startContainer:g,startOffset:y}=f,S=n.getNode();if(!wH(e,S)&&xn(g)){const E=g.childNodes,P=e.getRoot();let L;if(y<E.length){const $=E[y];L=new er($,(s=e.getParent($,e.isBlock))!==null&&s!==void 0?s:P)}else{const $=E[E.length-1];L=new er($,(a=e.getParent($,e.isBlock))!==null&&a!==void 0?a:P),L.next(!0)}for(let $=L.current();$;$=L.next()){if(e.getContentEditable($)==="false")return;if(Vt($)&&!_i($)){f.setStart($,0),n.setRng(f);return}}}},ln=(e,n,s)=>{if(e){const a=n?"nextSibling":"previousSibling";for(e=e[a];e;e=e[a])if(xn(e)||!_i(e))return e}},yi=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||ns(e,n),Zf=(e,n,s)=>e.schema.isValidChild(n,s),_i=(e,n=!1)=>{if(le(e)&&Vt(e)){const s=n?e.data.replace(/ /g," "):e.data;return kh(s)}else return!1},du=e=>le(e)&&Vt(e)&&e.length===0,a4=(e,n)=>{const s="[data-mce-cef-wrappable]",a=Sp(e),f=Io(a)?s:`${s},${a}`;return El(ye.fromDom(n),f)},hb=(e,n)=>{const s=e.dom;return wE(n)&&s.getContentEditable(n)==="false"&&a4(e,n)&&s.select('[contenteditable="true"]',n).length===0},Hd=(e,n)=>Ee(e)?e(n):(le(n)&&(e=e.replace(/%(\w+)/g,(s,a)=>n[a]||s)),e),xE=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),CE=(e,n)=>{if($e(e))return null;{let s=String(e);return(n==="color"||n==="backgroundColor")&&(s=z0(s)),n==="fontWeight"&&e===700&&(s="bold"),n==="fontFamily"&&(s=s.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),s}},mb=(e,n,s)=>{const a=e.getStyle(n,s);return CE(a,s)},l4=(e,n)=>{let s;return e.getParent(n,a=>xn(a)?(s=e.getStyle(a,"text-decoration"),!!s&&s!=="none"):!1),s},Uw=(e,n,s)=>e.getParents(n,s,e.getRoot()),SE=(e,n,s)=>{const a=e.formatter.get(n);return le(a)&&Bt(a,s)},c4=(e,n)=>SE(e,n,a=>{const f=g=>Ee(g)||g.length>1&&g.charAt(0)==="%";return Bt(["styles","attributes"],g=>us(a,g).exists(y=>{const S=De(y)?y:fi(y);return Bt(S,f)}))}),CH=(e,n,s)=>{const a=["inline","block","selector","attributes","styles","classes"],f=g=>di(g,(y,S)=>Bt(a,E=>E===S));return SE(e,n,g=>{const y=f(g);return SE(e,s,S=>{const E=f(S);return Ke(y,E)})})},nd=e=>hi(e,"block"),Ww=e=>nd(e)&&e.wrapper===!0,jw=e=>nd(e)&&e.wrapper!==!0,Pl=e=>hi(e,"selector"),si=e=>hi(e,"inline"),kE=e=>Pl(e)&&si(e)&&Qs(us(e,"mixed"),!0),EE=e=>Pl(e)&&e.expand!==!1&&!si(e),Zw=e=>{const n=[];let s=e;for(;s;){if(Vt(s)&&s.data!==Yi||s.childNodes.length>1)return[];xn(s)&&n.push(s),s=s.firstChild}return n},gb=e=>Zw(e).length>0,AE=e=>uc(e.dom)&&gb(e.dom),Np=dc,u4=Uw,d4=_i,f4=yi,h4=e=>Us(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,m4=(e,n)=>{let s=n;for(;s;){if(xn(s)&&e.getContentEditable(s))return e.getContentEditable(s)==="false"?s:n;s=s.parentNode}return n},pb=(e,n,s,a)=>{const f=n.data;if(e){for(let g=s;g>0;g--)if(a(f.charAt(g-1)))return g}else for(let g=s;g<f.length;g++)if(a(f.charAt(g)))return g;return-1},Ca=(e,n,s)=>pb(e,n,s,a=>mE(a)||db(a)),fu=(e,n,s)=>pb(e,n,s,gE),fc=(e,n,s,a,f,g)=>{let y;const S=e.getParent(s,e.isBlock)||n,E=(L,$,W)=>{const re=Zm(e),fe=f?re.backwards:re.forwards;return V.from(fe(L,$,(te,he)=>Np(te.parentNode)?-1:(y=te,W(f,te,he)),S))};return E(s,a,Ca).bind(L=>g?E(L.container,L.offset+(f?-1:0),fu):V.some(L)).orThunk(()=>y?V.some({container:y,offset:f?0:y.length}):V.none())},bb=(e,n,s,a,f)=>{const g=a[f];Vt(a)&&Io(a.data)&&g&&(a=g);const y=u4(e,a);for(let S=0;S<y.length;S++)for(let E=0;E<n.length;E++){const P=n[E];if(!(le(P.collapsed)&&P.collapsed!==s.collapsed)&&Pl(P)&&e.is(y[S],P.selector))return y[S]}return a},qw=(e,n,s,a)=>{var f;let g=s;const y=e.getRoot(),S=n[0];if(nd(S)&&(g=S.wrapper?null:e.getParent(s,S.block,y)),!g){const E=(f=e.getParent(s,"LI,TD,TH,SUMMARY"))!==null&&f!==void 0?f:y;g=e.getParent(Vt(s)?s.parentNode:s,P=>P!==y&&f4(e.schema,P),E)}if(g&&nd(S)&&S.wrapper&&(g=u4(e,g,"ul,ol").reverse()[0]||g),!g)for(g=s;g&&g[a]&&!e.isBlock(g[a])&&(g=g[a],!xE(g,"br")););return g||s},g4=(e,n,s,a)=>{const f=s.parentNode;return le(s[a])?!1:f===n||$e(f)||e.isBlock(f)?!0:g4(e,n,f,a)},Bp=(e,n,s,a,f)=>{let g=s;const y=f?"previousSibling":"nextSibling",S=e.getRoot();if(Vt(s)&&!d4(s)&&(f?a>0:a<s.data.length))return s;for(;g;){if(!n[0].block_expand&&e.isBlock(g))return g;for(let E=g[y];E;E=E[y]){const P=Vt(E)&&!g4(e,S,E,y);if(!Np(E)&&!h4(E)&&!d4(E,P))return g}if(g===S||g.parentNode===S){s=g;break}g=g.parentNode}return s},p4=e=>Np(e.parentNode)||Np(e),qf=(e,n,s,a=!1)=>{let{startContainer:f,startOffset:g,endContainer:y,endOffset:S}=n;const E=s[0];return xn(f)&&f.hasChildNodes()&&(f=Lf(f,g),Vt(f)&&(g=0)),xn(y)&&y.hasChildNodes()&&(y=Lf(y,n.collapsed?S:S-1),Vt(y)&&(S=y.data.length)),f=m4(e,f),y=m4(e,y),p4(f)&&(f=Np(f)?f:f.parentNode,n.collapsed?f=f.previousSibling||f:f=f.nextSibling||f,Vt(f)&&(g=n.collapsed?f.length:0)),p4(y)&&(y=Np(y)?y:y.parentNode,n.collapsed?y=y.nextSibling||y:y=y.previousSibling||y,Vt(y)&&(S=n.collapsed?0:y.length)),n.collapsed&&(fc(e,e.getRoot(),f,g,!0,a).each(({container:$,offset:W})=>{f=$,g=W}),fc(e,e.getRoot(),y,S,!1,a).each(({container:$,offset:W})=>{y=$,S=W})),(si(E)||E.block_expand)&&((!si(E)||!Vt(f)||g===0)&&(f=Bp(e,s,f,g,!0)),(!si(E)||!Vt(y)||S===y.data.length)&&(y=Bp(e,s,y,S,!1))),EE(E)&&(f=bb(e,s,n,f,"previousSibling"),y=bb(e,s,n,y,"nextSibling")),(nd(E)||Pl(E))&&(f=qw(e,s,f,"previousSibling"),y=qw(e,s,y,"nextSibling"),nd(E)&&(e.isBlock(f)||(f=Bp(e,s,f,g,!0)),e.isBlock(y)||(y=Bp(e,s,y,S,!1)))),xn(f)&&f.parentNode&&(g=e.nodeIndex(f),f=f.parentNode),xn(y)&&y.parentNode&&(S=e.nodeIndex(y)+1,y=y.parentNode),{startContainer:f,startOffset:g,endContainer:y,endOffset:S}},vb=(e,n,s)=>{var a;const f=n.startOffset,g=Lf(n.startContainer,f),y=n.endOffset,S=Lf(n.endContainer,y-1),E=he=>{const Le=he[0];Vt(Le)&&Le===g&&f>=Le.data.length&&he.splice(0,1);const ze=he[he.length-1];return y===0&&he.length>0&&ze===S&&Vt(ze)&&he.splice(he.length-1,1),he},P=(he,Le,ze)=>{const Ve=[];for(;he&&he!==ze;he=he[Le])Ve.push(he);return Ve},L=(he,Le)=>e.getParent(he,ze=>ze.parentNode===Le,Le),$=(he,Le,ze)=>{const Ve=ze?"nextSibling":"previousSibling";for(let ot=he,Nt=ot.parentNode;ot&&ot!==Le;ot=Nt){Nt=ot.parentNode;const Wt=P(ot===he?ot:ot[Ve],Ve);Wt.length&&(ze||Wt.reverse(),s(E(Wt)))}};if(g===S)return s(E([g]));const W=(a=e.findCommonAncestor(g,S))!==null&&a!==void 0?a:e.getRoot();if(e.isChildOf(g,S))return $(g,W,!0);if(e.isChildOf(S,g))return $(S,W);const re=L(g,W)||g,fe=L(S,W)||S;$(g,re,!0);const te=P(re===g?re:re.nextSibling,"nextSibling",fe===S?fe.nextSibling:fe);te.length&&s(E(te)),$(S,fe)},TE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],b4=e=>Oo(e)&&ju(e)===Yi,v4=(e,n,s,a)=>sa(n).fold(()=>"skipping",f=>a==="br"||b4(n)?"valid":XM(n)?"existing":uc(n.dom)?"caret":Bt(TE,g=>El(n,g))?"valid-block":!Zf(e,s,a)||!Zf(e,ts(f),s)?"invalid-child":"valid"),OE=(e,n)=>{const s=qf(e.dom,n,[{inline:"span"}]);n.setStart(s.startContainer,s.startOffset),n.setEnd(s.endContainer,s.endOffset),e.selection.setRng(n)},Gw=(e,n,s,a,f,g)=>{const L=s,{uid:y=n}=L,S=sy(L,["uid"]);Cf(e,Z0()),Xs(e,`${bp()}`,y),Xs(e,`${jm()}`,a);const{attributes:E={},classes:P=[]}=f(y,S);if(Vr(e,E),z8(e,P),g){P.length>0&&Xs(e,`${G0()}`,P.join(","));const $=Bo(E);$.length>0&&Xs(e,`${K0()}`,$.join(","))}},js=e=>{Bu(e,Z0()),Nr(e,`${bp()}`),Nr(e,`${jm()}`),Nr(e,`${q0()}`);const n=Da(e,`${K0()}`).map(a=>a.split(",")).getOr([]),s=Da(e,`${G0()}`).map(a=>a.split(",")).getOr([]);de(n,a=>Nr(e,a)),U8(e,s),Nr(e,`${G0()}`),Nr(e,`${K0()}`)},Gf=(e,n,s,a,f)=>{const g=ye.fromTag("span",e);return Gw(g,n,s,a,f,!1),g},y4=(e,n,s,a,f,g)=>{const y=[],S=Gf(e.getDoc(),s,g,a,f),E=Th(),P=()=>{E.clear()},L=()=>E.get().getOrThunk(()=>{const fe=ic(S);return y.push(fe),E.set(fe),fe}),$=fe=>{de(fe,W)},W=fe=>{switch(v4(e,fe,"span",ts(fe))){case"invalid-child":{P();const he=pi(fe);$(he),P();break}case"valid-block":{P(),Gw(fe,s,g,a,f,!0);break}case"valid":{const he=L();Wy(fe,he);break}}},re=fe=>{const te=nt(fe,ye.fromDom);$(te)};return vb(e.dom,n,fe=>{P(),re(fe)}),y},w4=(e,n,s,a)=>{e.undoManager.transact(()=>{const f=e.selection,g=f.getRng(),y=Pp(e).length>0,S=vp("mce-annotation");if(g.collapsed&&!y&&OE(e,g),f.getRng().collapsed&&!y){const E=Gf(e.getDoc(),S,a,n,s.decorate);np(E,xs),f.getRng().insertNode(E.dom),f.select(E.dom)}else r4(f,!1,()=>{yE(e,E=>{y4(e,E,S,n,s.decorate,a)})})})},_E=e=>{const n=e3();Pc(e,n);const s=ya(e,n),a=Hr("span"),f=g=>{de(g,y=>{a(y)?Yl(y):js(y)})};return{register:(g,y)=>{n.register(g,y)},annotate:(g,y)=>{n.lookup(g).each(S=>{w4(e,g,S,y)})},annotationChanged:(g,y)=>{s.addListener(g,y)},remove:g=>{Br(e,V.some(g)).each(({elements:y})=>{const S=e.selection.getBookmark();f(y),e.selection.moveToBookmark(S)})},removeAll:g=>{const y=e.selection.getBookmark();$t(hw(e,g),(S,E)=>{f(S)}),e.selection.moveToBookmark(y)},getAll:g=>{const y=hw(e,g);return So(y,S=>nt(S,E=>E.dom))}}},eg=e=>({getBookmark:Be(fE,e),moveToBookmark:Be(hE,e)});eg.isBookmarkNode=dc;const DE=(e,n,s)=>s.collapsed?!1:Bt(s.getClientRects(),a=>W8(a,e,n)),ME=(e,n)=>e.dispatch("PreProcess",n),SH=(e,n)=>e.dispatch("PostProcess",n),kH=e=>{e.dispatch("remove")},x4=e=>{e.dispatch("detach")},EH=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},PE=(e,n,s,a,f)=>{e.dispatch("ObjectResizeStart",{target:n,width:s,height:a,origin:f})},AH=(e,n,s,a,f)=>{e.dispatch("ObjectResized",{target:n,width:s,height:a,origin:f})},C4=e=>{e.dispatch("PreInit")},TH=e=>{e.dispatch("PostRender")},OH=e=>{e.dispatch("Init")},_H=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Rl=(e,n,s)=>{e.dispatch(n,s)},Sa=(e,n,s,a)=>{e.dispatch("FormatApply",{format:n,node:s,vars:a})},tg=(e,n,s,a)=>{e.dispatch("FormatRemove",{format:n,node:s,vars:a})},aee=(e,n)=>e.dispatch("BeforeSetContent",n),S4=(e,n)=>e.dispatch("SetContent",n),DH=(e,n)=>e.dispatch("BeforeGetContent",n),qo=(e,n)=>e.dispatch("GetContent",n),MH=(e,n)=>{e.dispatch("AutocompleterStart",n)},k4=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},RE=e=>{e.dispatch("AutocompleterEnd")},PH=(e,n,s)=>e.dispatch("PastePreProcess",{content:n,internal:s}),RH=(e,n,s)=>e.dispatch("PastePostProcess",{node:n,internal:s}),E4=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),NH=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),mn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||mn.metaKeyPressed(e),metaKeyPressed:e=>on.os.isMacOS()||on.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ng="data-mce-selected",NE="table,img,figure.image,hr,video,span.mce-preview-object,details",Kw=Math.abs,yb=Math.round,A4={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},BH=e=>e.type==="longpress"||e.type.indexOf("touch")===0,FH=(e,n)=>{const s=n.dom,a=n.getDoc(),f=document,g=n.getBody();let y,S,E,P,L,$,W,re,fe,te,he,Le,ze,Ve,ot,Nt,Wt;const sn=Gt=>le(Gt)&&(Ya(Gt)||s.is(Gt,"figure.image")),vt=Gt=>Xr(Gt)||s.hasClass(Gt,"mce-preview-object"),dt=(Gt,uo)=>{if(BH(Gt)){const Ko=Gt.touches[0];return sn(Gt.target)&&!DE(Ko.clientX,Ko.clientY,uo)}else return sn(Gt.target)&&!DE(Gt.clientX,Gt.clientY,uo)},Mt=Gt=>{const uo=Gt.target;dt(Gt,n.selection.getRng())&&!Gt.isDefaultPrevented()&&n.selection.select(uo)},gn=Gt=>s.hasClass(Gt,"mce-preview-object")&&le(Gt.firstElementChild)?[Gt,Gt.firstElementChild]:s.is(Gt,"figure.image")?[Gt.querySelector("img")]:[Gt],Mn=Gt=>{const uo=C3(n);return!uo||Gt.getAttribute("data-mce-resize")==="false"||Gt===n.getBody()?!1:s.hasClass(Gt,"mce-preview-object")&&le(Gt.firstElementChild)?El(ye.fromDom(Gt.firstElementChild),uo):El(ye.fromDom(Gt),uo)},ko=Gt=>vt(Gt)?s.create("img",{src:on.transparentSrc}):Gt.cloneNode(!0),Ho=(Gt,uo,Ko)=>{if(le(Ko)){const Is=gn(Gt);de(Is,Ps=>{Ps.style[uo]||!n.schema.isValid(Ps.nodeName.toLowerCase(),uo)?s.setStyle(Ps,uo,Ko):s.setAttrib(Ps,uo,""+Ko)})}},Ms=(Gt,uo,Ko)=>{Ho(Gt,"width",uo),Ho(Gt,"height",Ko)},qs=Gt=>{let uo,Ko,Is,Ps,Mi;uo=Gt.screenX-$,Ko=Gt.screenY-W,Ve=uo*P[2]+te,ot=Ko*P[3]+he,Ve=Ve<5?5:Ve,ot=ot<5?5:ot,(sn(y)||vt(y))&&g7(n)!==!1?Is=!mn.modifierPressed(Gt):Is=mn.modifierPressed(Gt),Is&&(Kw(uo)>Kw(Ko)?(ot=yb(Ve*Le),Ve=yb(ot/Le)):(Ve=yb(ot/Le),ot=yb(Ve*Le))),Ms(S,Ve,ot),Ps=P.startPos.x+uo,Mi=P.startPos.y+Ko,Ps=Ps>0?Ps:0,Mi=Mi>0?Mi:0,s.setStyles(E,{left:Ps,top:Mi,display:"block"}),E.innerHTML=Ve+" &times; "+ot,P[2]<0&&S.clientWidth<=Ve&&s.setStyle(S,"left",re+(te-Ve)),P[3]<0&&S.clientHeight<=ot&&s.setStyle(S,"top",fe+(he-ot)),uo=g.scrollWidth-Nt,Ko=g.scrollHeight-Wt,uo+Ko!==0&&s.setStyles(E,{left:Ps-uo,top:Mi-Ko}),ze||(PE(n,y,te,he,"corner-"+P.name),ze=!0)},Tr=()=>{const Gt=ze;ze=!1,Gt&&(Ho(y,"width",Ve),Ho(y,"height",ot)),s.unbind(a,"mousemove",qs),s.unbind(a,"mouseup",Tr),f!==a&&(s.unbind(f,"mousemove",qs),s.unbind(f,"mouseup",Tr)),s.remove(S),s.remove(E),s.remove(L),Qi(y),Gt&&(AH(n,y,Ve,ot,"corner-"+P.name),s.setAttrib(y,"style",s.getAttrib(y,"style"))),n.nodeChanged()},Qi=Gt=>{zo();const uo=s.getPos(Gt,g),Ko=uo.x,Is=uo.y,Ps=Gt.getBoundingClientRect(),Mi=Ps.width||Ps.right-Ps.left,Eu=Ps.height||Ps.bottom-Ps.top;y!==Gt&&(Xt(),y=Gt,Ve=ot=0);const of=n.dispatch("ObjectSelected",{target:Gt});Mn(Gt)&&!of.isDefaultPrevented()?$t(A4,(nl,Vc)=>{const go=Ts=>{const Rr=gn(y)[0];$=Ts.screenX,W=Ts.screenY,te=Rr.clientWidth,he=Rr.clientHeight,Le=he/te,P=nl,P.name=Vc,P.startPos={x:Mi*nl[0]+Ko,y:Eu*nl[1]+Is},Nt=g.scrollWidth,Wt=g.scrollHeight,L=s.add(g,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(L,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),S=ko(y),s.addClass(S,"mce-clonedresizable"),s.setAttrib(S,"data-mce-bogus","all"),S.contentEditable="false",s.setStyles(S,{left:Ko,top:Is,margin:0}),Ms(S,Mi,Eu),S.removeAttribute(ng),g.appendChild(S),s.bind(a,"mousemove",qs),s.bind(a,"mouseup",Tr),f!==a&&(s.bind(f,"mousemove",qs),s.bind(f,"mouseup",Tr)),E=s.add(g,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},te+" &times; "+he)};let hs=s.get("mceResizeHandle"+Vc);hs&&s.remove(hs),hs=s.add(g,"div",{id:"mceResizeHandle"+Vc,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Vc+"-resize; margin:0; padding:0"}),s.bind(hs,"mousedown",Ts=>{Ts.stopImmediatePropagation(),Ts.preventDefault(),go(Ts)}),nl.elm=hs,s.setStyles(hs,{left:Mi*nl[0]+Ko-hs.offsetWidth/2,top:Eu*nl[1]+Is-hs.offsetHeight/2})}):Xt(!1)},Bs=fw(Qi,0),Xt=(Gt=!0)=>{Bs.cancel(),zo(),y&&Gt&&y.removeAttribute(ng),$t(A4,(uo,Ko)=>{const Is=s.get("mceResizeHandle"+Ko);Is&&(s.unbind(Is),s.remove(Is))})},cn=(Gt,uo)=>s.isChildOf(Gt,uo),as=Gt=>{if(ze||n.removed||n.composing)return;const uo=Gt.type==="mousedown"?Gt.target:e.getNode(),Ko=Td(ye.fromDom(uo),NE).map(Ps=>Ps.dom).filter(Ps=>s.isEditable(Ps.parentElement)||Ps.nodeName==="IMG"&&s.isEditable(Ps)).getOrUndefined(),Is=le(Ko)?s.getAttrib(Ko,ng,"1"):"1";if(de(s.select(`img[${ng}],hr[${ng}]`),Ps=>{Ps.removeAttribute(ng)}),le(Ko)&&cn(Ko,g)&&n.hasFocus()){yn();const Ps=e.getStart(!0);if(cn(Ps,Ko)&&cn(e.getEnd(!0),Ko)){s.setAttrib(Ko,ng,Is),Bs.throttle(Ko);return}}Xt()},zo=()=>{$t(A4,Gt=>{Gt.elm&&(s.unbind(Gt.elm),delete Gt.elm)})},yn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(Gt){}};return n.on("init",()=>{yn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",as),n.on("keyup compositionend",Gt=>{y&&y.nodeName==="TABLE"&&as(Gt)}),n.on("hide blur",Xt),n.on("contextmenu longpress",Mt,!0)}),n.on("remove",zo),{isResizable:Mn,showResizeRect:Qi,hideResizeRect:Xt,updateResizeRect:as,destroy:()=>{Bs.cancel(),y=S=L=null}}},lee=(e,n)=>{n.fold(s=>{e.setStartBefore(s.dom)},(s,a)=>{e.setStart(s.dom,a)},s=>{e.setStartAfter(s.dom)})},IH=(e,n)=>{n.fold(s=>{e.setEndBefore(s.dom)},(s,a)=>{e.setEnd(s.dom,a)},s=>{e.setEndAfter(s.dom)})},T4=(e,n,s)=>{const a=e.document.createRange();return lee(a,n),IH(a,s),a},Gn=(e,n,s,a,f)=>{const g=e.document.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,f),g},Fp=ed.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),O4=(e,n,s)=>n(ye.fromDom(s.startContainer),s.startOffset,ye.fromDom(s.endContainer),s.endOffset),LH=(e,n)=>n.match({domRange:s=>({ltr:me(s),rtl:V.none}),relative:(s,a)=>({ltr:xt(()=>T4(e,s,a)),rtl:xt(()=>V.some(T4(e,a,s)))}),exact:(s,a,f,g)=>({ltr:xt(()=>Gn(e,s,a,f,g)),rtl:xt(()=>V.some(Gn(e,f,g,s,a)))})}),wb=(e,n)=>{const s=n.ltr();return s.collapsed?n.rtl().filter(f=>f.collapsed===!1).map(f=>Fp.rtl(ye.fromDom(f.endContainer),f.endOffset,ye.fromDom(f.startContainer),f.startOffset)).getOrThunk(()=>O4(e,Fp.ltr,s)):O4(e,Fp.ltr,s)},$H=(e,n)=>{const s=LH(e,n);return wb(e,s)};Fp.ltr,Fp.rtl;const _4={create:(e,n,s,a)=>({start:e,soffset:n,finish:s,foffset:a})},HH=(e,n,s)=>{var a,f;return V.from((f=(a=e.dom).caretPositionFromPoint)===null||f===void 0?void 0:f.call(a,n,s)).bind(g=>{if(g.offsetNode===null)return V.none();const y=e.dom.createRange();return y.setStart(g.offsetNode,g.offset),y.collapse(),V.some(y)})},BE=(e,n,s)=>{var a,f;return V.from((f=(a=e.dom).caretRangeFromPoint)===null||f===void 0?void 0:f.call(a,n,s))},VH=document.caretPositionFromPoint?HH:document.caretRangeFromPoint?BE:V.none,zH=(e,n,s)=>{const a=ye.fromDom(e.document);return VH(a,n,s).map(f=>_4.create(ye.fromDom(f.startContainer),f.startOffset,ye.fromDom(f.endContainer),f.endOffset))},Yw=ed.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),D4=(e,n,s,a)=>e.fold(n,s,a),M4=e=>e.fold(lt,lt,lt),UH=Yw.before,WH=Yw.on,P4=Yw.after,Kf={before:UH,on:WH,after:P4,cata:D4,getStart:M4},Xw=ed.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ps=e=>Xw.exact(e.start,e.soffset,e.finish,e.foffset),jH=e=>e.match({domRange:n=>ye.fromDom(n.startContainer),relative:(n,s)=>Kf.getStart(n),exact:(n,s,a,f)=>n}),Yf=Xw.domRange,Vd=Xw.relative,Jw=Xw.exact,Nl=e=>{const n=jH(e);return ou(n)},Qw=_4.create,zd={domRange:Yf,relative:Vd,exact:Jw,exactFromRange:ps,getWin:Nl,range:Qw},og=(e,n)=>{const s=ts(e);return s==="input"?Kf.after(e):Qe(["br","img"],s)?n===0?Kf.before(e):Kf.after(e):Kf.on(e,n)},Ip=(e,n)=>{const s=e.fold(Kf.before,og,Kf.after),a=n.fold(Kf.before,og,Kf.after);return zd.relative(s,a)},R4=(e,n,s,a)=>{const f=og(e,n),g=og(s,a);return zd.relative(f,g)},ZH=e=>e.match({domRange:n=>{const s=ye.fromDom(n.startContainer),a=ye.fromDom(n.endContainer);return R4(s,n.startOffset,a,n.endOffset)},relative:Ip,exact:R4}),FE=(e,n)=>{const a=document.createDocumentFragment();return de(e,f=>{a.appendChild(f.dom)}),ye.fromDom(a)},qH=e=>{const n=zd.getWin(e).dom,s=(f,g,y,S)=>Gn(n,f,g,y,S),a=ZH(e);return $H(n,a).match({ltr:s,rtl:s})},rs=(e,n,s)=>zH(e,n,s),hu=(e,n,s)=>{const a=ou(ye.fromDom(s));return rs(a.dom,e,n).map(f=>{const g=s.createRange();return g.setStart(f.start.dom,f.soffset),g.setEnd(f.finish.dom,f.foffset),g}).getOrUndefined()},Xf=(e,n)=>le(e)&&le(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,GH=(e,n,s)=>{let a=e;for(;a&&a!==n;){if(s(a))return a;a=a.parentNode}return null},Lp=(e,n,s)=>GH(e,n,s)!==null,fs=(e,n,s)=>Lp(e,n,a=>a.nodeName===s),KH=(e,n)=>Ba(e)&&!Lp(e,n,uc),IE=(e,n,s)=>{const a=n.parentNode;if(a){const f=new er(n,e.getParent(a,e.isBlock)||e.getRoot());let g;for(;g=f[s?"prev":"next"]();)if(Us(g))return!0}return!1},LE=(e,n)=>{var s;return((s=e.previousSibling)===null||s===void 0?void 0:s.nodeName)===n},YH=(e,n)=>{let s=n;for(;s&&s!==e;){if(gs(s))return!0;s=s.parentNode}return!1},Nh=(e,n,s,a,f)=>{const g=e.getRoot(),y=e.schema.getNonEmptyElements(),S=f.parentNode;let E,P;if(!S)return V.none();const L=e.getParent(S,e.isBlock)||g;if(a&&Us(f)&&n&&e.isEmpty(L))return V.some(bt(S,e.nodeIndex(f)));const $=new er(f,L);for(;P=$[a?"prev":"next"]();){if(e.getContentEditableParent(P)==="false"||KH(P,g))return V.none();if(Vt(P)&&P.data.length>0)return fs(P,g,"A")?V.none():V.some(bt(P,a?P.data.length:0));if(e.isBlock(P)||y[P.nodeName.toLowerCase()])return V.none();E=P}return Of(E)?V.none():s&&E?V.some(bt(E,0)):V.none()},Bh=(e,n,s,a)=>{const f=e.getRoot();let g,y=!1,S=s?a.startContainer:a.endContainer,E=s?a.startOffset:a.endOffset;const P=xn(S)&&E===S.childNodes.length,L=e.schema.getNonEmptyElements();let $=s;if(Ba(S))return V.none();if(xn(S)&&E>S.childNodes.length-1&&($=!1),O0(S)&&(S=f,E=0),S===f){if($&&(g=S.childNodes[E>0?E-1:0],g&&(Ba(g)||L[g.nodeName]||Dd(g))))return V.none();if(S.hasChildNodes()){if(E=Math.min(!$&&E>0?E-1:E,S.childNodes.length-1),S=S.childNodes[E],E=Vt(S)&&P?S.data.length:0,!n&&S===f.lastChild&&Dd(S)||YH(f,S)||Ba(S)||Rt(S))return V.none();if(S.hasChildNodes()&&!Dd(S)){g=S;const W=new er(S,f);do{if(gs(g)||Ba(g)){y=!1;break}if(Vt(g)&&g.data.length>0){E=$?0:g.data.length,S=g,y=!0;break}if(L[g.nodeName.toLowerCase()]&&!ra(g)){E=e.nodeIndex(g),S=g.parentNode,$||E++,y=!0;break}}while(g=$?W.next():W.prev())}}}return n&&(Vt(S)&&E===0&&Nh(e,P,n,!0,S).each(W=>{S=W.container(),E=W.offset(),y=!0}),xn(S)&&(g=S.childNodes[E],g||(g=S.childNodes[E-1]),g&&Us(g)&&!LE(g,"A")&&!IE(e,g,!1)&&!IE(e,g,!0)&&Nh(e,P,n,!0,g).each(W=>{S=W.container(),E=W.offset(),y=!0}))),$&&!n&&Vt(S)&&E===S.data.length&&Nh(e,P,n,!1,S).each(W=>{S=W.container(),E=W.offset(),y=!0}),y&&S?V.some(bt(S,E)):V.none()},xb=(e,n)=>{const s=n.collapsed,a=n.cloneRange(),f=bt.fromRangeStart(n);return Bh(e,s,!0,a).each(g=>{(!s||!bt.isAbove(f,g))&&a.setStart(g.container(),g.offset())}),s||Bh(e,s,!1,a).each(g=>{a.setEnd(g.container(),g.offset())}),s&&a.collapse(!0),Xf(n,a)?V.none():V.some(a)},ex=(e,n)=>e.splitText(n),tx=e=>{let n=e.startContainer,s=e.startOffset,a=e.endContainer,f=e.endOffset;if(n===a&&Vt(n)){if(s>0&&s<n.data.length)if(a=ex(n,s),n=a.previousSibling,f>s){f=f-s;const g=ex(a,f).previousSibling;n=a=g,f=g.data.length,s=0}else f=0}else if(Vt(n)&&s>0&&s<n.data.length&&(n=ex(n,s),s=0),Vt(a)&&f>0&&f<a.data.length){const g=ex(a,f).previousSibling;a=g,f=g.data.length}return{startContainer:n,startOffset:s,endContainer:a,endOffset:f}},sg=e=>({walk:(g,y)=>vb(e,g,y),split:tx,expand:(g,y={type:"word"})=>{if(y.type==="word"){const S=qf(e,g,[{inline:"span"}]),E=e.createRng();return E.setStart(S.startContainer,S.startOffset),E.setEnd(S.endContainer,S.endOffset),E}return g},normalize:g=>xb(e,g).fold(ue,y=>(g.setStart(y.startContainer,y.startOffset),g.setEnd(y.endContainer,y.endOffset),!0))});sg.compareRanges=Xf,sg.getCaretRangeFromPoint=hu,sg.getSelectedNode=gw,sg.getNode=Lf;const $p=((e,n)=>{const s=(S,E)=>{if(!ft(E)&&!E.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+E);const P=S.dom;Af(P)&&(P.style[e]=E+"px")},a=S=>{const E=n(S);if(E<=0||E===null){const P=ru(S,e);return parseFloat(P)||0}return E},f=a,g=(S,E)=>ve(E,(P,L)=>{const $=ru(S,L),W=$===void 0?0:parseInt($,10);return isNaN(W)?P:P+W},0);return{set:s,get:a,getOuter:f,aggregate:g,max:(S,E,P)=>{const L=g(S,P);return E>L?E-L:0}}})("height",e=>{const n=e.dom;return yh(e)?n.getBoundingClientRect().height:n.offsetHeight}),XH=e=>$p.get(e),$E=()=>ye.fromDom(document),N4=(e,n)=>e.view(n).fold(me([]),a=>{const f=e.owner(a),g=N4(e,f);return[a].concat(g)}),JH=(e,n)=>{const s=n.owner(e);return N4(n,s)};var dee=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?V.none():V.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ye.fromDom)},owner:e=>Iu(e)});const e9=e=>{const n=$E(),s=Nn(n),a=JH(e,dee),f=Ht(e),g=kt(a,(y,S)=>{const E=Ht(S);return{left:y.left+E.left,top:y.top+E.top}},{left:0,top:0});return F(g.left+f.left+s.left,g.top+f.top+s.top)},ox=e=>ts(e)==="textarea",HE=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),VE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},zE=(e,n)=>{const s=pi(e);if(s.length===0||ox(e))return{element:e,offset:n};if(n<s.length&&!ox(s[n]))return{element:s[n],offset:0};{const a=s[s.length-1];return ox(a)?{element:e,offset:n}:ts(a)==="img"?{element:a,offset:1}:Oo(a)?{element:a,offset:ju(a).length}:{element:a,offset:pi(a).length}}},UE=(e,n)=>{const s=Me(e),a=XH(e);return{element:e,bottom:s.top+a,height:a,pos:s,cleanup:n}},B4=(e,n)=>{const s=zE(e,n),a=ye.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Yi+"</span>");return Ra(s.element,a),UE(a,()=>ks(a))},F4=e=>UE(ye.fromDom(e),ge),Cb=(e,n,s,a)=>{H4(e,(f,g)=>L4(e,n,s,a),s)},I4=(e,n,s,a,f)=>{const g={elm:a.element.dom,alignToTop:f};if(HE(e,g))return;const y=Nn(n).top;s(e,n,y,a,f),VE(e,g)},L4=(e,n,s,a)=>{const f=ye.fromDom(e.getBody()),g=ye.fromDom(e.getDoc());zr(f);const y=B4(ye.fromDom(s.startContainer),s.startOffset);I4(e,g,n,y,a),y.cleanup()},$4=(e,n,s,a)=>{const f=ye.fromDom(e.getDoc());I4(e,f,s,F4(n),a)},H4=(e,n,s)=>{const a=s.startContainer,f=s.startOffset,g=s.endContainer,y=s.endOffset;n(ye.fromDom(a),ye.fromDom(g));const S=e.dom.createRng();S.setStart(a,f),S.setEnd(g,y),e.selection.setRng(s)},sx=(e,n,s,a,f)=>{const g=n.pos;if(a)wo(g.left,g.top,f);else{const y=g.top-s+n.height;wo(-e.getBody().getBoundingClientRect().left,y,f)}},WE=(e,n,s,a,f,g)=>{const y=a+s,S=f.pos.top,E=f.bottom,P=E-S>=a;S<s?sx(e,f,a,g!==!1,n):S>y?sx(e,f,a,P?g!==!1:g===!0,n):E>y&&!P&&sx(e,f,a,g===!0,n)},jE=(e,n,s,a,f)=>{const g=ou(n).dom.innerHeight;WE(e,n,s,g,a,f)},ZE=(e,n,s,a,f)=>{const g=ou(n).dom.innerHeight;WE(e,n,s,g,a,f);const y=e9(a.element),S=qi(window);y.top<S.y?xo(a.element,f!==!1):y.top>S.bottom&&xo(a.element,f===!0)},t9=(e,n,s)=>Cb(e,jE,n,s),n9=(e,n,s)=>$4(e,n,jE,s),o9=(e,n,s)=>Cb(e,ZE,n,s),s9=(e,n,s)=>$4(e,n,ZE,s),r9=(e,n,s)=>{(e.inline?n9:s9)(e,n,s)},Sb=(e,n,s)=>{(e.inline?t9:o9)(e,n,s)},V4=(e,n=!1)=>e.dom.focus({preventScroll:n}),z4=e=>{const n=$u(e).dom;return e.dom===n.activeElement},Hp=(e=$E())=>V.from(e.dom.activeElement).map(ye.fromDom),U4=e=>Hp($u(e)).filter(n=>e.dom.contains(n.dom)),W4=(e,n)=>{const s=Oo(n)?ju(n).length:pi(n).length+1;return e>s?s:e<0?0:e},j4=e=>zd.range(e.start,W4(e.soffset,e.start),e.finish,W4(e.foffset,e.finish)),qE=(e,n)=>!Vu(n.dom)&&(Fu(e,n)||ws(e,n)),Z4=e=>n=>qE(e,n.start)&&qE(e,n.finish),i9=e=>e.inline||on.browser.isFirefox(),a9=e=>zd.range(ye.fromDom(e.startContainer),e.startOffset,ye.fromDom(e.endContainer),e.endOffset),l9=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?V.none():V.from(n.getRangeAt(0))).map(a9)},c9=e=>{const n=ou(e);return l9(n.dom).filter(Z4(e))},q4=(e,n)=>V.from(n).filter(Z4(e)).map(j4),G4=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),V.some(n)}catch(s){return V.none()}},Vp=e=>{const n=i9(e)?c9(ye.fromDom(e.getBody())):V.none();e.bookmark=n.isSome()?n:e.bookmark},GE=e=>(e.bookmark?e.bookmark:V.none()).bind(s=>q4(ye.fromDom(e.getBody()),s)).bind(G4),u9=e=>{GE(e).each(n=>e.selection.setRng(n))},Y4={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},X4=(e,n)=>(ft(n)||(n=0),setTimeout(e,n)),J4=(e,n)=>(ft(n)||(n=0),setInterval(e,n)),hc={setEditorTimeout:(e,n,s)=>X4(()=>{e.removed||n()},s),setEditorInterval:(e,n,s)=>{const a=J4(()=>{e.removed?clearInterval(a):n()},s);return a}},d9=e=>e.type==="nodechange"&&e.selectionChange,f9=(e,n)=>{const s=()=>{n.throttle()};nr.DOM.bind(document,"mouseup",s),e.on("remove",()=>{nr.DOM.unbind(document,"mouseup",s)})},h9=(e,n)=>{e.on("mouseup touchend",s=>{n.throttle()})},m9=(e,n)=>{h9(e,n),e.on("keyup NodeChange AfterSetSelectionRange",s=>{d9(s)||Vp(e)})},rx=e=>{const n=fw(()=>{Vp(e)},0);e.on("init",()=>{e.inline&&f9(e,n),m9(e,n)}),e.on("remove",()=>{n.cancel()})};let rg;const ix=nr.DOM,Q4=e=>xn(e)&&Y4.isEditorUIElement(e),ax=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},lx=(e,n)=>{const s=A3(e);return ix.getParent(n,f=>Q4(f)||(s?e.dom.is(f,s):!1))!==null},KE=e=>{try{const n=$u(ye.fromDom(e.getElement()));return Hp(n).fold(()=>document.body,s=>s.dom)}catch(n){return document.body}},g9=(e,n)=>{const s=n.editor;rx(s);const a=(f,g)=>{if($7(f)&&f.inline!==!0){const y=ye.fromDom(f.getContainer());g(y,"tox-edit-focus")}};s.on("focusin",()=>{const f=e.focusedEditor;ax(KE(s))&&a(s,Cf),f!==s&&(f&&f.dispatch("blur",{focusedEditor:s}),e.setActive(s),e.focusedEditor=s,s.dispatch("focus",{blurredEditor:f}),s.focus(!0))}),s.on("focusout",()=>{hc.setEditorTimeout(s,()=>{const f=e.focusedEditor;(!ax(KE(s))||f!==s)&&a(s,Bu),!lx(s,KE(s))&&f===s&&(s.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),rg||(rg=f=>{const g=e.activeEditor;g&&vh(f).each(y=>{const S=y;S.ownerDocument===document&&S!==document.body&&!lx(g,S)&&e.focusedEditor===g&&(g.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},ix.bind(document,"focusin",rg))},p9=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&rg&&(ix.unbind(document,"focusin",rg),rg=null)},b9=e=>{e.on("AddEditor",Be(g9,e)),e.on("RemoveEditor",Be(p9,e))},v9=(e,n)=>e.dom.getParent(n,s=>e.dom.getContentEditable(s)==="true"),y9=e=>e.collapsed?V.from(Lf(e.startContainer,e.startOffset)).map(ye.fromDom):V.none(),w9=(e,n)=>y9(n).bind(s=>_f(s)?V.some(s):Fu(e,s)?V.none():V.some(e)),eP=(e,n)=>{w9(ye.fromDom(e.getBody()),n).bind(s=>La(s.dom)).fold(()=>{e.selection.normalize()},s=>e.selection.setRng(s.toRange()))},YE=e=>{if(e.setActive)try{e.setActive()}catch(n){e.focus()}else e.focus()},x9=e=>z4(e)||U4(e).isSome(),C9=e=>le(e.iframeElement)&&z4(ye.fromDom(e.iframeElement)),cx=e=>{const n=e.getBody();return n&&x9(ye.fromDom(n))},tP=e=>{const n=$u(ye.fromDom(e.getElement()));return Hp(n).filter(s=>!ax(s.dom)&&lx(e,s.dom)).isSome()},Fh=e=>e.inline?cx(e):C9(e),nP=e=>Fh(e)||tP(e),S9=e=>{const n=e.selection,s=e.getBody();let a=n.getRng();e.quirks.refreshContentEditable(),le(e.bookmark)&&!Fh(e)&&GE(e).each(g=>{e.selection.setRng(g),a=g});const f=v9(e,n.getNode());if(f&&e.dom.isChildOf(f,s)){YE(f),eP(e,a),XE(e);return}e.inline||(on.browser.isOpera()||YE(s),e.getWin().focus()),(on.browser.isFirefox()||e.inline)&&(YE(s),eP(e,a)),XE(e)},XE=e=>e.editorManager.setActive(e),k9=(e,n)=>{e.removed||(n?XE(e):S9(e))},oP=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),sP=(e,n,s,a,f)=>{const g=s?n.startContainer:n.endContainer,y=s?n.startOffset:n.endOffset;return V.from(g).map(ye.fromDom).map(S=>!a||!n.collapsed?kf(S,f(S,y)).getOr(S):S).bind(S=>pn(S)?V.some(S):sa(S).filter(pn)).map(S=>S.dom).getOr(e)},JE=(e,n,s=!1)=>sP(e,n,!0,s,(a,f)=>Math.min(Pa(a),f)),rP=(e,n,s=!1)=>sP(e,n,!1,s,(a,f)=>f>0?f-1:f),QE=(e,n)=>{const s=e;for(;e&&Vt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||s},iP=(e,n)=>{if(!n)return e;let s=n.startContainer,a=n.endContainer;const f=n.startOffset,g=n.endOffset;let y=n.commonAncestorContainer;n.collapsed||(s===a&&g-f<2&&s.hasChildNodes()&&(y=s.childNodes[f]),Vt(s)&&Vt(a)&&(s.length===f?s=QE(s.nextSibling,!0):s=s.parentNode,g===0?a=QE(a.previousSibling,!1):a=a.parentNode,s&&s===a&&(y=s)));const S=Vt(y)?y.parentNode:y;return Tf(S)?S:e},E9=(e,n,s,a)=>{const f=[],g=e.getRoot(),y=e.getParent(s||JE(g,n,n.collapsed),e.isBlock),S=e.getParent(a||rP(g,n,n.collapsed),e.isBlock);if(y&&y!==g&&f.push(y),y&&S&&y!==S){let E;const P=new er(y,g);for(;(E=P.next())&&E!==S;)e.isBlock(E)&&f.push(E)}return S&&y!==S&&S!==g&&f.push(S),f},A9=(e,n,s)=>V.from(n).bind(a=>V.from(a.parentNode).map(f=>{const g=e.nodeIndex(a),y=e.createRng();return y.setStart(f,g),y.setEnd(f,g+1),s&&(vE(e,y,a,!0),vE(e,y,a,!1)),y})),eA=(e,n)=>nt(n,s=>{const a=e.dispatch("GetSelectionRange",{range:s});return a.range!==s?a.range:s}),T9=e=>ts(e)==="img"?1:G2(e).fold(()=>pi(e).length,n=>n.length),O9=e=>G2(e).filter(n=>n.trim().length!==0||n.indexOf(xs)>-1).isSome(),_9=e=>Et(e)&&gi(e,"contenteditable")==="false",D9=["img","br"],aP=e=>O9(e)||Qe(D9,ts(e))||_9(e),M9=e=>Zi(e,aP),P9=e=>R9(e,aP),R9=(e,n)=>{const s=a=>{const f=pi(a);for(let g=f.length-1;g>=0;g--){const y=f[g];if(n(y))return V.some(y);const S=s(y);if(S.isSome())return S}return V.none()};return s(e)},lP="[data-mce-autocompleter]",N9=(e,n)=>{if(cP(ye.fromDom(e.getBody())).isNone()){const s=ye.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Yr(s,ye.fromDom(n.extractContents())),n.insertNode(s.dom),sa(s).each(a=>a.dom.normalize()),P9(s).map(a=>{e.selection.setCursorLocation(a.dom,T9(a))})}},B9=e=>Td(e,lP),cP=e=>wh(e,lP),F9=(e,n)=>cP(n).each(s=>{const a=e.selection.getBookmark();Yl(s),e.selection.moveToBookmark(a)}),I9={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ux=(e,n,s)=>{const a=s?"lastChild":"firstChild",f=s?"prev":"next";if(e[a])return e[a];if(e!==n){let g=e[f];if(g)return g;for(let y=e.parent;y&&y!==n;y=y.parent)if(g=y[f],g)return g}},L9=e=>{var n;const s=(n=e.value)!==null&&n!==void 0?n:"";if(!kh(s))return!1;const a=e.parent;return!(a&&(a.name!=="span"||a.attr("style"))&&/^[ ]+$/.test(s))},Fn=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class $a{static create(n,s){const a=new $a(n,I9[n]||1);return s&&$t(s,(f,g)=>{a.attr(g,f)}),a}constructor(n,s){this.name=n,this.type=s,s===1&&(this.attributes=[],this.attributes.map={})}replace(n){const s=this;return n.parent&&n.remove(),s.insert(n,s),s.remove(),s}attr(n,s){const a=this;if(!Z(n))return le(n)&&$t(n,(g,y)=>{a.attr(y,g)}),a;const f=a.attributes;if(f){if(s!==void 0){if(s===null){if(n in f.map){delete f.map[n];let g=f.length;for(;g--;)if(f[g].name===n)return f.splice(g,1),a}return a}if(n in f.map){let g=f.length;for(;g--;)if(f[g].name===n){f[g].value=s;break}}else f.push({name:n,value:s});return f.map[n]=s,a}return f.map[n]}}clone(){const n=this,s=new $a(n.name,n.type),a=n.attributes;if(a){const f=[];f.map={};for(let g=0,y=a.length;g<y;g++){const S=a[g];S.name!=="id"&&(f[f.length]={name:S.name,value:S.value},f.map[S.name]=S.value)}s.attributes=f}return s.value=n.value,s}wrap(n){const s=this;return s.parent&&(s.parent.insert(n,s),n.append(s)),s}unwrap(){const n=this;for(let s=n.firstChild;s;){const a=s.next;n.insert(s,n,!0),s=a}n.remove()}remove(){const n=this,s=n.parent,a=n.next,f=n.prev;return s&&(s.firstChild===n?(s.firstChild=a,a&&(a.prev=null)):f&&(f.next=a),s.lastChild===n?(s.lastChild=f,f&&(f.next=null)):a&&(a.prev=f),n.parent=n.next=n.prev=null),n}append(n){const s=this;n.parent&&n.remove();const a=s.lastChild;return a?(a.next=n,n.prev=a,s.lastChild=n):s.lastChild=s.firstChild=n,n.parent=s,n}insert(n,s,a){n.parent&&n.remove();const f=s.parent||this;return a?(s===f.firstChild?f.firstChild=n:s.prev&&(s.prev.next=n),n.prev=s.prev,n.next=s,s.prev=n):(s===f.lastChild?f.lastChild=n:s.next&&(s.next.prev=n),n.next=s.next,n.prev=s,s.next=n),n.parent=f,n}getAll(n){const s=this,a=[];for(let f=s.firstChild;f;f=ux(f,s))f.name===n&&a.push(f);return a}children(){const n=this,s=[];for(let a=n.firstChild;a;a=a.next)s.push(a);return s}empty(){const n=this;if(n.firstChild){const s=[];for(let f=n.firstChild;f;f=ux(f,n))s.push(f);let a=s.length;for(;a--;){const f=s[a];f.parent=f.firstChild=f.lastChild=f.next=f.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,s={},a){var f;const g=this;let y=g.firstChild;if(Fn(g))return!1;if(y)do{if(y.type===1){if(y.attr("data-mce-bogus"))continue;if(n[y.name]||Fn(y))return!1}if(y.type===8||y.type===3&&!L9(y)||y.type===3&&y.parent&&s[y.parent.name]&&kh((f=y.value)!==null&&f!==void 0?f:"")||a&&a(y))return!1}while(y=ux(y,g));return!0}walk(n){return ux(this,null,n)}}const uP=Lt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),dP=e=>Z(e.nodeValue)&&e.nodeValue.includes(Yi),dx=e=>`${e.length===0?"":`${nt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,$9=(e,n)=>n.querySelectorAll(dx(e)),fP=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>dP(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),hP=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(dP(n)){const s=n.parentNode;return s&&Bn(uP,s.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),H9=e=>fP(e).nextNode()!==null,V9=e=>hP(e).nextNode()!==null,fx=(e,n)=>n.querySelector(dx(e))!==null,mP=(e,n)=>{de($9(e,n),s=>{const a=ye.fromDom(s);gi(a,"data-mce-bogus")==="all"?ks(a):de(e,f=>{Ed(a,f)&&Nr(a,f)})})},z9=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},U9=O(z9,fP),vo=O(z9,hP),gP=(e,n)=>{const s=[{condition:Be(fx,n),action:Be(mP,n)},{condition:H9,action:U9},{condition:V9,action:vo}];let a=e,f=!1;return de(s,({condition:g,action:y})=>{g(a)&&(f||(a=e.cloneNode(!0),f=!0),y(a))}),a},Eo=e=>{const n=va(e,"[data-mce-bogus]");de(n,s=>{gi(s,"data-mce-bogus")==="all"?ks(s):Nm(s)?(Ra(s,ye.fromText(D0)),ks(s)):Yl(s)})},tA=e=>{const n=va(e,"input");de(n,s=>{Nr(s,"name")})},fee=(e,n)=>{const s=Ia(e),a=new RegExp(`^(<${s}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${s}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(a,"")},hee=(e,n)=>{const s=e.getDoc(),a=$u(ye.fromDom(e.getBody())),f=ye.fromTag("div",s);Xs(f,"data-mce-bogus","all"),xh(f,{position:"fixed",left:"-9999999px",top:"0"}),np(f,n.innerHTML),Eo(f),tA(f);const g=kM(a);Yr(g,f);const y=nc(f.dom.innerText);return ks(f),y},W9=(e,n,s)=>{let a;return n.format==="raw"?a=Lt.trim(nc(gP(s,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?a=hee(e,s):n.format==="tree"?a=e.serializer.serialize(s,n):a=fee(e,e.serializer.serialize(s,n)),n.format!=="text"&&!Li(ye.fromDom(s))&&Z(a)?Lt.trim(a):a},mee=(e,n)=>V.from(e.getBody()).fold(me(n.format==="tree"?new $a("body",11):""),s=>W9(e,n,s)),j9=Lt.makeMap,pP=e=>{const n=[];e=e||{};const s=e.indent,a=j9(e.indent_before||""),f=j9(e.indent_after||""),g=Wm.getEncodeFunc(e.entity_encoding||"raw",e.entities),y=e.element_format!=="xhtml";return{start:(S,E,P)=>{if(s&&a[S]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}if(n.push("<",S),E)for(let L=0,$=E.length;L<$;L++){const W=E[L];n.push(" ",W.name,'="',g(W.value,!0),'"')}if(!P||y?n[n.length]=">":n[n.length]=" />",P&&s&&f[S]&&n.length>0){const L=n[n.length-1];L.length>0&&L!==`
`&&n.push(`
`)}},end:S=>{let E;n.push("</",S,">"),s&&f[S]&&n.length>0&&(E=n[n.length-1],E.length>0&&E!==`
`&&n.push(`
`))},text:(S,E)=>{S.length>0&&(n[n.length]=E?S:g(S))},cdata:S=>{n.push("<![CDATA[",S,"]]>")},comment:S=>{n.push("<!--",S,"-->")},pi:(S,E)=>{E?n.push("<?",S," ",g(E),"?>"):n.push("<?",S,"?>"),s&&n.push(`
`)},doctype:S=>{n.push("<!DOCTYPE",S,">",s?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Ih=(e={},n=If())=>{const s=pP(e);return e.validate="validate"in e?e.validate:!0,{serialize:f=>{const g=e.validate,y={3:E=>{var P;s.text((P=E.value)!==null&&P!==void 0?P:"",E.raw)},8:E=>{var P;s.comment((P=E.value)!==null&&P!==void 0?P:"")},7:E=>{s.pi(E.name,E.value)},10:E=>{var P;s.doctype((P=E.value)!==null&&P!==void 0?P:"")},4:E=>{var P;s.cdata((P=E.value)!==null&&P!==void 0?P:"")},11:E=>{let P=E;if(P=P.firstChild)do S(P);while(P=P.next)}};s.reset();const S=E=>{var P;const L=y[E.type];if(L)L(E);else{const $=E.name,W=$ in n.getVoidElements();let re=E.attributes;if(g&&re&&re.length>1){const fe=[];fe.map={};const te=n.getElementRule(E.name);if(te){for(let he=0,Le=te.attributesOrder.length;he<Le;he++){const ze=te.attributesOrder[he];if(ze in re.map){const Ve=re.map[ze];fe.map[ze]=Ve,fe.push({name:ze,value:Ve})}}for(let he=0,Le=re.length;he<Le;he++){const ze=re[he].name;if(!(ze in fe.map)){const Ve=re.map[ze];fe.map[ze]=Ve,fe.push({name:ze,value:Ve})}}re=fe}}if(s.start($,re,W),Gu($))Z(E.value)&&s.text(E.value,!0),s.end($);else if(!W){let fe=E.firstChild;if(fe){($==="pre"||$==="textarea")&&fe.type===3&&((P=fe.value)===null||P===void 0?void 0:P[0])===`
`&&s.text(`
`,!0);do S(fe);while(fe=fe.next)}s.end($)}}};return f.type===1&&!e.inner?S(f):f.type===3?y[3](f):y[11](f),s.getContent()}}},Jn=new Set;de(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{Jn.add(n)});const bP=["font","text-decoration","text-emphasis"],nA=(e,n)=>Bo(e.parseStyle(e.getAttrib(n,"style"))),Z9=e=>Jn.has(e),kb=(e,n)=>ao(nA(e,n),s=>!Z9(s)),vP=e=>Ne(e,n=>Bt(bP,s=>Vn(n,s))),q9=(e,n,s)=>{const a=nA(e,n),f=nA(e,s),g=y=>{var S,E;const P=(S=e.getStyle(n,y))!==null&&S!==void 0?S:"",L=(E=e.getStyle(s,y))!==null&&E!==void 0?E:"";return Po(P)&&Po(L)&&P!==L};return Bt(a,y=>{const S=E=>Bt(E,P=>P===y);if(!S(f)&&S(bP)){const E=vP(f);return Bt(E,g)}else return g(y)})},yP=(e,n,s)=>V.from(s.container()).filter(Vt).exists(a=>{const f=e?0:-1;return n(a.data.charAt(s.offset()+f))}),oA=Be(yP,!0,db),hx=Be(yP,!1,db),G9=e=>{const n=e.container();return Vt(n)&&(n.data.length===0||Ol(n.data)&&eg.isBookmarkNode(n.parentNode))},ig=(e,n)=>s=>Iw(e?0:-1,s).filter(n).isSome(),K9=e=>Ya(e)&&ru(ye.fromDom(e),"display")==="block",wP=e=>gs(e)&&!W2(e),Y9=ig(!0,K9),X9=ig(!1,K9),Eb=ig(!0,Xr),zp=ig(!1,Xr),xP=ig(!0,Dd),Ro=ig(!1,Dd),Jf=ig(!0,wP),od=ig(!1,wP),CP=e=>e.slice(0,-1),SP=(e,n,s)=>Fu(n,e)?CP(Fy(e,a=>s(a)||ws(a,n))):[],sA=(e,n)=>SP(e,n,ue),Ud=(e,n)=>[e].concat(sA(e,n)),mx=(e,n,s)=>lE(e,n,s,G9),J9=e=>n=>e.isBlock(ts(n)),rA=(e,n,s)=>st(Ud(ye.fromDom(n.container()),e),J9(s)),kP=(e,n,s,a)=>mx(e,n.dom,s).forall(f=>rA(n,s,a).fold(()=>!td(f,s,n.dom),g=>!td(f,s,n.dom)&&Fu(g,ye.fromDom(f.container())))),EP=(e,n,s,a)=>rA(n,s,a).fold(()=>mx(e,n.dom,s).forall(f=>!td(f,s,n.dom)),f=>mx(e,f.dom,s).isNone()),iA=Be(EP,!1),AP=Be(EP,!0),Q9=Be(kP,!1),eV=Be(kP,!0),tV=e=>Lw(e).exists(Nm),gx=(e,n,s,a)=>{const f=Ne(Ud(ye.fromDom(s.container()),n),y=>a.isBlock(ts(y))),g=jt(f).getOr(n);return Ml(e,g.dom,s).filter(tV)},Ab=(e,n,s)=>Lw(n).exists(Nm)||gx(!0,e,n,s).isSome(),Tb=(e,n,s)=>rH(n).exists(Nm)||gx(!1,e,n,s).isSome(),nV=Be(gx,!1),oV=Be(gx,!0),TP=e=>bt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),OP=(e,n,s)=>{const a=Ne(Ud(ye.fromDom(n.container()),e),f=>s.isBlock(ts(f)));return jt(a).getOr(e)},_P=(e,n,s)=>TP(n)?hx(n):hx(n)||hl(OP(e,n,s).dom,n).exists(hx),DP=(e,n,s)=>TP(n)?oA(n):oA(n)||el(OP(e,n,s).dom,n).exists(oA),sV=e=>Qe(["pre","pre-wrap"],e),aA=e=>Lw(e).bind(n=>ul(n,pn)).exists(n=>sV(ru(n,"white-space"))),MP=(e,n)=>hl(e.dom,n).isNone(),rV=(e,n)=>el(e.dom,n).isNone(),iV=(e,n,s)=>MP(e,n)||rV(e,n)||iA(e,n,s)||AP(e,n,s)||Tb(e,n,s)||Ab(e,n,s),ag=e=>le(e)&&gs(e)&&Qk(e),PP=(e,n)=>s=>ag(new er(s,e)[n]()),RP=(e,n)=>{const s=el(e.dom,n).getOr(n),a=PP(e.dom,"next");return n.isAtEnd()&&(a(n.container())||a(s.container()))},aV=(e,n)=>{const s=hl(e.dom,n).getOr(n),a=PP(e.dom,"prev");return n.isAtStart()&&(a(n.container())||a(s.container()))},NP=(e,n,s)=>aA(n)?!1:iV(e,n,s)||_P(e,n,s)||DP(e,n,s),Up=(e,n,s)=>aA(n)?!1:iA(e,n,s)||Q9(e,n,s)||Tb(e,n,s)||_P(e,n,s)||aV(e,n),BP=e=>{const n=e.container(),s=e.offset();return Vt(n)&&s<n.data.length?bt(n,s+1):e},Wp=(e,n,s)=>aA(n)?!1:AP(e,n,s)||eV(e,n,s)||Ab(e,n,s)||DP(e,n,s)||RP(e,n),px=(e,n,s)=>Up(e,n,s)||Wp(e,BP(n),s),Ha=(e,n)=>mE(e.charAt(n)),FP=(e,n)=>db(e.charAt(n)),lV=e=>{const n=e.container();return Vt(n)&&$n(n.data,xs)},cV=e=>{const n=e.split("");return nt(n,(s,a)=>mE(s)&&a>0&&a<n.length-1&&gE(n[a-1])&&gE(n[a+1])?" ":s).join("")},IP=(e,n,s,a)=>{const f=n.data,g=bt(n,0);return!s&&Ha(f,0)&&!px(e,g,a)?(n.data=" "+f.slice(1),!0):s&&FP(f,0)&&Up(e,g,a)?(n.data=xs+f.slice(1),!0):!1},uV=e=>{const n=e.data,s=cV(n);return s!==n?(e.data=s,!0):!1},Lh=(e,n,s,a)=>{const f=n.data,g=bt(n,f.length-1);return!s&&Ha(f,f.length-1)&&!px(e,g,a)?(n.data=f.slice(0,-1)+" ",!0):s&&FP(f,f.length-1)&&Wp(e,g,a)?(n.data=f.slice(0,-1)+xs,!0):!1},dV=(e,n,s)=>{const a=n.container();if(!Vt(a))return V.none();if(lV(n)){const f=IP(e,a,!1,s)||uV(a)||Lh(e,a,!1,s);return es(f,n)}else if(px(e,n,s)){const f=IP(e,a,!0,s)||Lh(e,a,!0,s);return es(f,n)}else return V.none()},fV=e=>{const n=ye.fromDom(e.getBody());e.selection.isCollapsed()&&dV(n,bt.fromRangeStart(e.selection.getRng()),e.schema).each(s=>{e.selection.setRng(s.toRange())})},gr=(e,n,s,a)=>{if(s===0)return;const f=ye.fromDom(e),g=Sr(f,P=>a.isBlock(ts(P))).getOr(f),y=e.data.slice(n,n+s),S=n+s>=e.data.length&&Wp(g,bt(e,e.data.length),a),E=n===0&&Up(g,bt(e,0),a);e.replaceData(n,s,ap(y,4,E,S))},lg=(e,n,s)=>{const a=e.data.slice(n),f=a.length-Oa(a).length;gr(e,n,f,s)},LP=(e,n,s)=>{const a=e.data.slice(0,n),f=a.length-ql(a).length;gr(e,n-f,f,s)},Di=(e,n,s,a,f=!0)=>{const g=ql(e.data).length,y=f?e:n,S=f?n:e;return f?y.appendData(S.data):y.insertData(0,S.data),ks(ye.fromDom(S)),a&&lg(y,g,s),y},hV=(e,n)=>{const s=e.container(),a=e.offset();return!bt.isTextPosition(e)&&s===n.parentNode&&a>bt.before(n).offset()},mV=(e,n)=>hV(n,e)?bt(n.container(),n.offset()-1):n,Qf=e=>Vt(e)?bt(e,0):bt.before(e),Es=e=>Vt(e)?bt(e,e.data.length):bt.after(e),lA=e=>bi(e.previousSibling)?V.some(Es(e.previousSibling)):e.previousSibling?uu(e.previousSibling):V.none(),cA=e=>bi(e.nextSibling)?V.some(Qf(e.nextSibling)):e.nextSibling?La(e.nextSibling):V.none(),gV=(e,n)=>V.from(n.previousSibling?n.previousSibling:n.parentNode).bind(s=>hl(e,bt.before(s))).orThunk(()=>el(e,bt.after(n))),pV=(e,n)=>el(e,bt.after(n)).orThunk(()=>hl(e,bt.before(n))),bV=(e,n)=>lA(n).orThunk(()=>cA(n)).orThunk(()=>gV(e,n)),Bl=(e,n)=>cA(n).orThunk(()=>lA(n)).orThunk(()=>pV(e,n)),sd=(e,n,s)=>e?Bl(n,s):bV(n,s),vV=(e,n,s)=>sd(e,n,s).map(Be(mV,s)),bx=(e,n,s)=>{s.fold(()=>{e.focus()},a=>{e.selection.setRng(a.toRange(),n)})},uA=e=>n=>n.dom===e,yV=(e,n)=>n&&Bn(e.schema.getBlockElements(),ts(n)),wV=(e,n)=>{if(Mr(e)){const s=ye.fromHtml('<br data-mce-bogus="1">');return n?de(pi(e),a=>{AE(a)||ks(a)}):Od(e),Yr(e,s),V.some(bt.before(s.dom))}else return V.none()},Ob=(e,n,s,a)=>{const f=_c(e).filter(Oo),g=su(e).filter(Oo);return ks(e),Sd(f,g,n,(y,S,E)=>{const P=y.dom,L=S.dom,$=P.data.length;return Di(P,L,s,a),E.container()===L?bt(P,$):E}).orThunk(()=>(a&&(f.each(y=>LP(y.dom,y.dom.length,s)),g.each(y=>lg(y.dom,0,s))),n))},vx=(e,n)=>Bn(e.schema.getTextInlineElements(),ts(n)),eh=(e,n,s,a=!0,f=!1)=>{const g=vV(n,e.getBody(),s.dom),y=Sr(s,Be(yV,e),uA(e.getBody())),S=Ob(s,g,e.schema,vx(e,s));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):y.bind(E=>wV(E,f)).fold(()=>{a&&bx(e,n,S)},E=>{a&&bx(e,n,V.some(E))})},xV=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,rd=e=>xV.test(e),cg=(e,n)=>El(ye.fromDom(n),m7(e))&&!ns(e.schema,n)&&e.dom.isEditable(n),$P=e=>{var n;return nr.DOM.getStyle(e,"direction",!0)==="rtl"||rd((n=e.textContent)!==null&&n!==void 0?n:"")},Rc=(e,n,s)=>Ne(nr.DOM.getParents(s.container(),"*",n),e),mu=(e,n,s)=>{const a=Rc(e,n,s);return V.from(a[a.length-1])},gu=(e,n,s)=>{const a=zf(n,e),f=zf(s,e);return le(a)&&a===f},CV=e=>K2(e)||Gy(e),Go=(e,n)=>{const s=n.container(),a=n.offset();return e?oc(s)?Vt(s.nextSibling)?bt(s.nextSibling,0):bt.after(s):K2(n)?bt(s,a+1):n:oc(s)?Vt(s.previousSibling)?bt(s.previousSibling,s.previousSibling.data.length):bt.before(s):Gy(n)?bt(s,a-1):n},ug=Be(Go,!0),_b=Be(Go,!1),dA=(e,n)=>{const s=a=>a.stopImmediatePropagation();e.on("beforeinput input",s,!0),e.getDoc().execCommand(n),e.off("beforeinput input",s)},fA=e=>{e.execCommand("delete")},Db=e=>dA(e,"Delete"),SV=e=>dA(e,"ForwardDelete"),hA=e=>n=>Qs(sa(n),e,ws),kV=e=>tt(e)||Bm(e),Mb=(e,n)=>Fu(e,n)?ul(n,kV,hA(e)):V.none(),yx=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},wx=(e,n,s)=>qr(La(s),uu(s),(a,f)=>{const g=Go(!0,a),y=Go(!1,f),S=Go(!1,n);return e?el(s,S).exists(E=>E.isEqual(y)&&n.isEqual(g)):hl(s,S).exists(E=>E.isEqual(g)&&n.isEqual(y))}).getOr(!0),mA=e=>(rt(e)?_c(e):Dc(e)).bind(mA).orThunk(()=>V.some(e)),Pb=(e,n,s,a=!0)=>{var f;n.deleteContents();const g=mA(s).getOr(s),y=ye.fromDom((f=e.dom.getParent(g.dom,e.dom.isBlock))!==null&&f!==void 0?f:s.dom);if(y.dom===e.getBody()?yx(e,a):Mr(y)&&(Pd(y),a&&e.selection.setCursorLocation(y.dom,0)),!ws(s,y)){const S=Qs(sa(y),s)?[]:Iy(y);de(S.concat(pi(s)),E=>{!ws(E,y)&&!Fu(E,y)&&Mr(E)&&ks(E)})}},EV=(e,n,s)=>Sr(e,n,s).isSome(),AV=(e,n)=>x0(e,n).isSome(),HP=(e,n)=>Zi(e,n).isSome(),TV=e=>n=>ws(e,n),gA=e=>va(e,"td,th"),pA=(e,n)=>Rp(ye.fromDom(e),n),OV=e=>qr(e.startTable,e.endTable,(n,s)=>{const a=HP(n,g=>ws(g,s)),f=HP(s,g=>ws(g,n));return!a&&!f?e:Ot(ie({},e),{startTable:a?V.none():e.startTable,endTable:f?V.none():e.endTable,isSameTable:!1,isMultiTable:!1})}).getOr(e),_V=e=>OV(e),VP=(e,n)=>{const s=pA(e.startContainer,n),a=pA(e.endContainer,n),f=s.isSome(),g=a.isSome(),y=qr(s,a,ws).getOr(!1);return _V({startTable:s,endTable:a,isStartInTable:f,isEndInTable:g,isSameTable:y,isMultiTable:!y&&f&&g})},xx=(e,n)=>({start:e,end:n}),DV=(e,n,s)=>({rng:e,table:n,cells:s}),Rb=ed.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Nb=(e,n)=>Td(ye.fromDom(e),"td,th",n),zP=e=>!ws(e.start,e.end),bA=(e,n)=>Rp(e.start,n).bind(s=>Rp(e.end,n).bind(a=>es(ws(s,a),s))),mc=(e,n)=>!zP(e)&&bA(e,n).exists(s=>{const a=s.dom.rows;return a.length===1&&a[0].cells.length===1}),MV=(e,n)=>{const s=Nb(e.startContainer,n),a=Nb(e.endContainer,n);return qr(s,a,xx)},UP=e=>n=>Rp(n,e).bind(s=>vn(gA(s)).map(a=>xx(n,a))),vA=e=>n=>Rp(n,e).bind(s=>jt(gA(s)).map(a=>xx(a,n))),Bb=e=>n=>bA(n,e).map(s=>DV(n,s,gA(s))),yA=(e,n,s,a)=>{if(s.collapsed||!e.forall(zP))return V.none();if(n.isSameTable){const f=e.bind(Bb(a));return V.some({start:f,end:f})}else{const f=Nb(s.startContainer,a),g=Nb(s.endContainer,a),y=f.bind(UP(a)).bind(Bb(a)),S=g.bind(vA(a)).bind(Bb(a));return V.some({start:y,end:S})}},wA=(e,n)=>en(e,s=>ws(s,n)),xA=e=>qr(wA(e.cells,e.rng.start),wA(e.cells,e.rng.end),(n,s)=>e.cells.slice(n,s+1)),PV=(e,n,s)=>e.exists(a=>mc(a,s)&&bE(a.start,n)),Cx=(e,n)=>{const{startTable:s,endTable:a}=n,f=e.cloneRange();return s.each(g=>f.setStartAfter(g.dom)),a.each(g=>f.setEndBefore(g.dom)),f},WP=(e,n,s,a)=>yA(e,n,s,a).bind(({start:f,end:g})=>f.or(g)).bind(f=>{const{isSameTable:g}=n,y=xA(f).getOr([]);if(g&&f.cells.length===y.length)return V.some(Rb.fullTable(f.table));if(y.length>0){if(g)return V.some(Rb.partialTable(y,V.none()));{const S=Cx(s,n);return V.some(Rb.partialTable(y,V.some(Ot(ie({},n),{rng:S}))))}}else return V.none()}),pu=(e,n,s,a)=>yA(e,n,s,a).bind(({start:f,end:g})=>{const y=f.bind(xA).getOr([]),S=g.bind(xA).getOr([]);if(y.length>0&&S.length>0){const E=Cx(s,n);return V.some(Rb.multiTable(y,S,E))}else return V.none()}),RV=(e,n)=>{const s=TV(e),a=MV(n,s),f=VP(n,s);return PV(a,n,s)?a.map(g=>Rb.singleCellTable(n,g.start)):f.isMultiTable?pu(a,f,n,s):WP(a,f,n,s)},jP=e=>de(e,n=>{Nr(n,"contenteditable"),Pd(n)}),gee=(e,n)=>V.from(e.dom.getParent(n,e.dom.isBlock)).map(ye.fromDom),CA=(e,n,s)=>{s.each(a=>{n?ks(a):(Pd(a),e.selection.setCursorLocation(a.dom,0))})},SA=(e,n,s,a)=>{const f=s.cloneRange();a?(f.setStart(s.startContainer,s.startOffset),f.setEndAfter(n.dom.lastChild)):(f.setStartBefore(n.dom.firstChild),f.setEnd(s.endContainer,s.endOffset)),Fl(e,f,n,!1).each(g=>g())},dg=e=>{const n=Pp(e),s=ye.fromDom(e.selection.getNode());_0(s.dom)&&Mr(s)?e.selection.setCursorLocation(s.dom,0):e.selection.collapse(!0),n.length>1&&Bt(n,a=>ws(a,s))&&Xs(s,"data-mce-selected","1")},ZP=(e,n,s)=>V.some(()=>{const a=e.selection.getRng(),f=s.bind(({rng:g,isStartInTable:y})=>{const S=gee(e,y?g.endContainer:g.startContainer);g.deleteContents(),CA(e,y,S.filter(Mr));const E=y?n[0]:n[n.length-1];return SA(e,E,a,y),Mr(E)?V.none():V.some(y?n.slice(1):n.slice(0,-1))}).getOr(n);jP(f),dg(e)}),jp=(e,n,s,a)=>V.some(()=>{const f=e.selection.getRng(),g=n[0],y=s[s.length-1];SA(e,g,f,!0),SA(e,y,f,!1);const S=Mr(g)?n:n.slice(1),E=Mr(y)?s:s.slice(0,-1);jP(S.concat(E)),a.deleteContents(),dg(e)}),Fl=(e,n,s,a=!0)=>V.some(()=>{Pb(e,n,s,a)}),Fb=(e,n)=>V.some(()=>eh(e,!1,n)),Hs=(e,n,s)=>RV(n,s).bind(a=>a.fold(Be(Fl,e),Be(Fb,e),Be(ZP,e),Be(jp,e))),Ib=(e,n)=>Zp(e,n),qP=(e,n,s,a)=>Lb(n,a).fold(()=>Hs(e,n,s),f=>Ib(e,f)),GP=(e,n,s)=>{const a=ye.fromDom(e.getBody()),f=e.selection.getRng();return s.length!==0?ZP(e,s,V.none()):qP(e,a,f,n)},Sx=(e,n)=>st(Ud(n,e),tc),Lb=(e,n)=>st(Ud(n,e),Hr("caption")),kA=(e,n,s,a,f)=>jf(s,e.getBody(),f).bind(g=>Sx(n,ye.fromDom(g.getNode())).bind(y=>ws(y,a)?V.none():V.some(ge))),Zp=(e,n)=>V.some(()=>{Pd(n),e.selection.setCursorLocation(n.dom,0)}),kx=(e,n,s,a)=>La(e.dom).bind(f=>uu(e.dom).map(g=>n?s.isEqual(f)&&a.isEqual(g):s.isEqual(g)&&a.isEqual(f))).getOr(!0),EA=(e,n)=>Zp(e,n),KP=(e,n,s)=>Lb(e,ye.fromDom(s.getNode())).fold(()=>V.some(ge),a=>es(!ws(a,n),ge)),YP=(e,n,s,a,f)=>jf(s,e.getBody(),f).fold(()=>V.some(ge),g=>kx(a,s,f,g)?EA(e,a):KP(n,a,g)),XP=(e,n,s,a)=>{const f=bt.fromRangeStart(e.selection.getRng());return Sx(s,a).bind(g=>Mr(g)?Zp(e,g):kA(e,s,n,g,f))},JP=(e,n,s,a)=>{const f=bt.fromRangeStart(e.selection.getRng());return Mr(a)?Zp(e,a):YP(e,s,n,a,f)},AA=(e,n)=>e?xP(n):Ro(n),qp=(e,n)=>{const s=bt.fromRangeStart(e.selection.getRng());return AA(n,s)||Ml(n,e.getBody(),s).exists(a=>AA(n,a))},QP=(e,n,s)=>{const a=ye.fromDom(e.getBody());return Lb(a,s).fold(()=>XP(e,n,a,s).orThunk(()=>es(qp(e,n),ge)),f=>JP(e,n,a,f))},$b=(e,n)=>{const s=ye.fromDom(e.selection.getStart(!0)),a=Pp(e);return e.selection.isCollapsed()&&a.length===0?QP(e,n,s):GP(e,s,a)},fg=(e,n)=>{let s=n;for(;s&&s!==e;){if(dl(s)||gs(s))return s;s=s.parentNode}return null},NV=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],eR=Lt.each,Ex=e=>{const n=e.dom,s=new Set(e.serializer.getTempAttrs()),a=(g,y)=>{if(g.nodeName!==y.nodeName||g.nodeType!==y.nodeType)return!1;const S=P=>{const L={};return eR(n.getAttribs(P),$=>{const W=$.nodeName.toLowerCase();W!=="style"&&!f(W)&&(L[W]=n.getAttrib(P,W))}),L},E=(P,L)=>{for(const $ in P)if(Bn(P,$)){const W=L[$];if(Re(W)||P[$]!==W)return!1;delete L[$]}for(const $ in L)if(Bn(L,$))return!1;return!0};return xn(g)&&xn(y)&&(!E(S(g),S(y))||!E(n.parseStyle(n.getAttrib(g,"style")),n.parseStyle(n.getAttrib(y,"style"))))?!1:!dc(g)&&!dc(y)},f=g=>Bt(NV,y=>Vn(g,y))||s.has(g);return{compare:a,isAttributeInternal:f}},TA=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Ax=e=>e.name==="summary",tR=(e,n)=>{let s=e;for(;s=s.walk();)n(s)},OA=(e,n,s,a)=>{const f=s.name;for(let g=0,y=e.length;g<y;g++){const S=e[g];if(S.name===f){const E=a.nodes[f];E?E.nodes.push(s):a.nodes[f]={filter:S,nodes:[s]}}}if(s.attributes)for(let g=0,y=n.length;g<y;g++){const S=n[g],E=S.name;if(E in s.attributes.map){const P=a.attributes[E];P?P.nodes.push(s):a.attributes[E]={filter:S,nodes:[s]}}}},nR=(e,n,s)=>{const a={nodes:{},attributes:{}};return s.firstChild&&tR(s,f=>{OA(e,n,f,a)}),a},_A=(e,n)=>{const s=(a,f)=>{$t(a,g=>{const y=so(g.nodes);de(g.filter.callbacks,S=>{for(let E=y.length-1;E>=0;E--){const P=y[E];(!(f?P.attr(g.filter.name)!==void 0:P.name===g.filter.name)||$e(P.parent))&&y.splice(E,1)}y.length>0&&S(y,g.filter.name,n)})})};s(e.nodes,!1),s(e.attributes,!0)},DA=(e,n,s,a={})=>{const f=nR(e,n,s);_A(f,a)},Tx=(e,n,s,a)=>{if((e.pad_empty_with_br||n.insert)&&s(a)){const g=new $a("br",1);n.insert&&g.attr("data-mce-bogus","1"),a.empty().append(g)}else a.empty().append(new $a("#text",3)).value=xs},oR=e=>{var n;return MA(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===xs},MA=(e,n)=>{const s=e==null?void 0:e.firstChild;return le(s)&&s===e.lastChild&&s.name===n},sR=(e,n)=>{const s=e.getElementRule(n.name);return(s==null?void 0:s.paddEmpty)===!0},Gp=(e,n,s,a)=>a.isEmpty(n,s,f=>sR(e,f)),PA=(e,n)=>le(e)&&(n(e)||e.name==="br"),rR=e=>{let n;for(let s=e;s;s=s.parent){const a=s.attr("contenteditable");if(a==="false")break;a==="true"&&(n=s)}return V.from(n)},Ox=(e,n,s=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const a=e.children();for(const f of a)s&&!n.isValidChild(s.name,f.name)&&Ox(f,n,s);e.unwrap()}},_x=(e,n,s,a=ge)=>{const f=n.getTextBlockElements(),g=n.getNonEmptyElements(),y=n.getWhitespaceElements(),S=Lt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),E=new Set,P=L=>L!==s&&!S[L.name];for(let L=0;L<e.length;L++){const $=e[L];let W,re,fe;if(!$.parent||E.has($))continue;if(f[$.name]&&$.parent.name==="li"){let he=$.next;for(;he&&f[he.name];){he.name="li",E.add(he),$.parent.insert(he,$.parent);he=he.next}$.unwrap();continue}const te=[$];for(W=$.parent;W&&!n.isValidChild(W.name,$.name)&&P(W);W=W.parent)te.push(W);if(W&&te.length>1)if(Dx(n,$,W))Ox($,n);else{te.reverse(),re=te[0].clone(),a(re);let he=re;for(let Le=0;Le<te.length-1;Le++){n.isValidChild(he.name,te[Le].name)&&Le>0?(fe=te[Le].clone(),a(fe),he.append(fe)):fe=he;for(let ze=te[Le].firstChild;ze&&ze!==te[Le+1];){const Ve=ze.next;fe.append(ze),ze=Ve}he=fe}Gp(n,g,y,re)?W.insert($,te[0],!0):(W.insert(re,te[0],!0),W.insert($,re)),W=te[0],(Gp(n,g,y,W)||MA(W,"br"))&&W.empty().remove()}else if($.parent){if($.name==="li"){let he=$.prev;if(he&&(he.name==="ul"||he.name==="ol")){he.append($);continue}if(he=$.next,he&&(he.name==="ul"||he.name==="ol")&&he.firstChild){he.insert($,he.firstChild,!0);continue}const Le=new $a("ul",1);a(Le),$.wrap(Le);continue}if(n.isValidChild($.parent.name,"div")&&n.isValidChild("div",$.name)){const he=new $a("div",1);a(he),$.wrap(he)}else Ox($,n)}}},iR=(e,n)=>{let s=e;for(;s;){if(s.name===n)return!0;s=s.parent}return!1},Dx=(e,n,s=n.parent)=>s?e.children[n.name]&&!e.isValidChild(s.name,n.name)||n.name==="a"&&iR(s,"a")?!0:Ax(s)&&TA(n)?!((s==null?void 0:s.firstChild)===n&&(s==null?void 0:s.lastChild)===n):!1:!1,aR=(e,n,s,a)=>{const f=document.createRange();return f.setStart(e,n),f.setEnd(s,a),f},RA=e=>{const n=bt.fromRangeStart(e),s=bt.fromRangeEnd(e),a=e.commonAncestorContainer;return Ml(!1,a,s).map(f=>!td(n,s,a)&&td(n,f,a)?aR(n.container(),n.offset(),f.container(),f.offset()):e).getOr(e)},Kp=e=>e.collapsed?e:RA(e),Mx=e=>le(e.firstChild)&&e.firstChild===e.lastChild,Px=e=>e.name==="br"||e.value===xs,lR=(e,n)=>e.getBlockElements()[n.name]&&Mx(n)&&Px(n.firstChild),Rx=(e,n)=>{const s=e.getNonEmptyElements();return le(n)&&(n.isEmpty(s)||lR(e,n))},NA=(e,n)=>{let s=n.firstChild,a=n.lastChild;return s&&s.name==="meta"&&(s=s.next),a&&a.attr("id")==="mce_marker"&&(a=a.prev),Rx(e,a)&&(a=a==null?void 0:a.prev),!s||s!==a?!1:s.name==="ul"||s.name==="ol"},Hb=e=>{var n,s;const a=e.firstChild,f=e.lastChild;return a&&a.nodeName==="META"&&((n=a.parentNode)===null||n===void 0||n.removeChild(a)),f&&f.id==="mce_marker"&&((s=f.parentNode)===null||s===void 0||s.removeChild(f)),e},BA=(e,n,s)=>{const a=n.serialize(s),f=e.createFragment(a);return Hb(f)},cR=e=>{var n;return Ne((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],s=>s.nodeName==="LI")},Yp=e=>e.data===xs||Us(e),FA=e=>le(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&Yp(e.firstChild),IA=e=>!e.firstChild||FA(e),Vb=e=>e.length>0&&IA(e[e.length-1])?e.slice(0,-1):e,Wd=(e,n)=>{const s=e.getParent(n,e.isBlock);return s&&s.nodeName==="LI"?s:null},uR=(e,n)=>!!Wd(e,n),BV=(e,n)=>{const s=n.cloneRange(),a=n.cloneRange();return s.setStartBefore(e),a.setEndAfter(e),[s.cloneContents(),a.cloneContents()]},dR=(e,n)=>{const s=bt.before(e),f=Ld(n).next(s);return f?f.toRange():null},LA=(e,n)=>{const s=bt.after(e),f=Ld(n).prev(s);return f?f.toRange():null},FV=(e,n,s,a)=>{const f=BV(e,a),g=e.parentNode;return g&&(g.insertBefore(f[0],e),Lt.each(n,y=>{g.insertBefore(y,e)}),g.insertBefore(f[1],e),g.removeChild(e)),LA(n[n.length-1],s)},pee=(e,n,s)=>{const a=e.parentNode;return a&&Lt.each(n,f=>{a.insertBefore(f,e)}),dR(e,s)},IV=(e,n,s,a)=>(a.insertAfter(n.reverse(),e),LA(n[0],s)),$A=(e,n,s,a)=>{const f=BA(n,e,a),g=Wd(n,s.startContainer),y=Vb(cR(f.firstChild)),S=1,E=2,P=n.getRoot(),L=$=>{const W=bt.fromRangeStart(s),re=Ld(n.getRoot()),fe=$===S?re.prev(W):re.next(W),te=fe==null?void 0:fe.getNode();return te?Wd(n,te)!==g:!0};return g?L(S)?pee(g,y,P):L(E)?IV(g,y,P,n):FV(g,y,P,s):null},id=["pre"],HA=(e,n,s,a)=>{var f;const g=n.firstChild,y=n.lastChild,S=y.attr("data-mce-type")==="bookmark"?y.prev:y,E=g===S,P=Qe(id,g.name);if(E&&P){const L=g.attr("contenteditable")!=="false",$=((f=e.getParent(s,e.isBlock))===null||f===void 0?void 0:f.nodeName.toLowerCase())===g.name,W=V.from(fg(a,s)).forall(dl);return L&&$&&W}else return!1},Xp=_0,VA=(e,n,s)=>{if(le(s)){const a=e.getParent(n.endContainer,Xp);return s===a&&bE(ye.fromDom(s),n)}else return!1},LV=(e,n,s)=>{var a;if(s.getAttribute("data-mce-bogus")==="all")(a=s.parentNode)===null||a===void 0||a.insertBefore(e.dom.createFragment(n),s);else{const f=s.firstChild,g=s.lastChild;!f||f===g&&f.nodeName==="BR"?e.dom.setHTML(s,n):e.selection.setContent(n,{no_events:!0})}},fR=(e,n,s)=>{V.from(e.getParent(n,"td,th")).map(ye.fromDom).each(a=>qn(a,s))},$V=(e,n)=>{const s=e.schema.getTextInlineElements(),a=e.dom;if(n){const f=e.getBody(),g=Ex(e);Lt.each(a.select("*[data-mce-fragment]"),y=>{if(le(s[y.nodeName.toLowerCase()])&&kb(a,y)){for(let E=y.parentElement;le(E)&&E!==f&&!q9(a,y,E);E=E.parentElement)if(g.compare(E,y)){a.remove(y,!0);break}}})}},hR=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},zA=e=>{Lt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},HV=e=>!!e.getAttribute("data-mce-fragment"),mR=(e,n)=>le(n)&&!e.schema.getVoidElements()[n.nodeName],VV=(e,n)=>{var s,a,f;let g;const y=e.dom,S=e.selection;if(!n)return;S.scrollIntoView(n);const E=fg(e.getBody(),n);if(E&&y.getContentEditable(E)==="false"){y.remove(n),S.select(E);return}let P=y.createRng();const L=n.previousSibling;if(Vt(L)){P.setStart(L,(a=(s=L.nodeValue)===null||s===void 0?void 0:s.length)!==null&&a!==void 0?a:0);const re=n.nextSibling;Vt(re)&&(L.appendData(re.data),(f=re.parentNode)===null||f===void 0||f.removeChild(re))}else P.setStartBefore(n),P.setEndBefore(n);const $=re=>{let fe=bt.fromRangeStart(re);return fe=Ld(e.getBody()).next(fe),fe==null?void 0:fe.toRange()},W=y.getParent(n,y.isBlock);if(y.remove(n),W&&y.isEmpty(W)){const re=Xp(W);Od(ye.fromDom(W)),P.setStart(W,0),P.setEnd(W,0),!re&&!HV(W)&&(g=$(P))?(P=g,y.remove(W)):y.add(W,y.create("br",re?{}:{"data-mce-bogus":"1"}))}S.setRng(P)},zb=e=>{const n=e.dom,s=Kp(e.selection.getRng());e.selection.setRng(s);const a=n.getParent(s.startContainer,Xp);VA(n,s,a)?Fl(e,s,ye.fromDom(a)):s.startContainer===s.endContainer&&s.endOffset-s.startOffset===1&&Vt(s.startContainer.childNodes[s.startOffset])?s.deleteContents():e.getDoc().execCommand("Delete",!1)},gR=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return V.some(n);return V.none()},zV=(e,n,s)=>{var a;return Bt(s.children(),TA)&&((a=e.getParent(n,e.isBlock))===null||a===void 0?void 0:a.nodeName)==="SUMMARY"},pR=(e,n,s)=>{var a,f;const g=e.selection,y=e.dom,S=e.parser,E=s.merge,P=Ih({validate:!0},e.schema),L='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';s.preserve_zwsp||(n=nc(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,L);let $=g.getRng();const W=$.startContainer,re=e.getBody();W===re&&g.isCollapsed()&&y.isBlock(re.firstChild)&&mR(e,re.firstChild)&&y.isEmpty(re.firstChild)&&($=y.createRng(),$.setStart(re.firstChild,0),$.setEnd(re.firstChild,0),g.setRng($)),g.isCollapsed()||zb(e);const fe=g.getNode(),te={context:fe.nodeName.toLowerCase(),data:s.data,insert:!0},he=S.parse(n,te);if(s.paste===!0&&NA(e.schema,he)&&uR(y,fe))return $=$A(P,y,g.getRng(),he),$&&g.setRng($),n;s.paste===!0&&HA(y,he,fe,e.getBody())&&((a=he.firstChild)===null||a===void 0||a.unwrap()),hR(he);let Le=he.lastChild;if(Le&&Le.attr("id")==="mce_marker"){const ze=Le;for(Le=Le.prev;Le;Le=Le.walk(!0))if(Le.type===3||!y.isBlock(Le.name)){Le.parent&&e.schema.isValidChild(Le.parent.name,"span")&&Le.parent.insert(ze,Le,Le.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(fe),!te.invalid&&!zV(y,fe,he))n=P.serialize(he),LV(e,n,fe);else{e.selection.setContent(L);let ze=g.getNode(),Ve;const ot=e.getBody();for(O0(ze)?ze=Ve=ot:Ve=ze;Ve&&Ve!==ot;)ze=Ve,Ve=Ve.parentNode;n=ze===ot?ot.innerHTML:y.getOuterHTML(ze);const Nt=S.parse(n),Wt=gR(Nt),sn=Wt.bind(rR).getOr(Nt);Wt.each(gn=>gn.replace(he));const vt=he.children(),dt=(f=he.parent)!==null&&f!==void 0?f:Nt;he.unwrap();const Mt=Ne(vt,gn=>Dx(e.schema,gn,dt));_x(Mt,e.schema,sn),DA(S.getNodeFilters(),S.getAttributeFilters(),Nt),n=P.serialize(Nt),ze===ot?y.setHTML(ot,n):y.setOuterHTML(ze,n)}return $V(e,E),VV(e,y.get("mce_marker")),zA(e.getBody()),fR(y,g.getStart(),e.schema),IM(e.schema,e.getBody(),g.getStart()),n},Nx=e=>e instanceof $a,UV=e=>{Fh(e)&&La(e.getBody()).each(n=>{const s=n.getNode(),a=Dd(s)?La(s).getOr(n):n;e.selection.setRng(a.toRange())})},UA=(e,n,s)=>{e.dom.setHTML(e.getBody(),n),s!==!0&&UV(e)},WV=(e,n,s,a)=>{if(s=nc(s),s.length===0||/^\s+$/.test(s)){const f='<br data-mce-bogus="1">';n.nodeName==="TABLE"?s="<tr><td>"+f+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(s="<li>"+f+"</li>");const g=Ia(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),g.toLowerCase())?(s=f,s=e.dom.createHTML(g,eb(e),s)):s||(s=f),UA(e,s,a.no_selection),{content:s,html:s}}else{a.format!=="raw"&&(s=Ih({validate:!1},e.schema).serialize(e.parser.parse(s,{isRootContent:!0,insert:!0})));const f=Li(ye.fromDom(n))?s:Lt.trim(s);return UA(e,f,a.no_selection),{content:f,html:f}}},jV=(e,n,s,a)=>{DA(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),s);const f=Ih({validate:!1},e.schema).serialize(s),g=nc(Li(ye.fromDom(n))?f:Lt.trim(f));return UA(e,g,a.no_selection),{content:s,html:g}},bR=(e,n,s)=>V.from(e.getBody()).map(a=>Nx(n)?jV(e,a,n,s):WV(e,a,n,s)).getOr({content:n,html:Nx(s.content)?"":s.content}),vR=e=>Ee(e)?e:ue,WA=(e,n,s)=>{let a=e.dom;const f=vR(s);for(;a.parentNode;){a=a.parentNode;const g=ye.fromDom(a),y=n(g);if(y.isSome())return y;if(f(g))break}return V.none()},th=(e,n,s)=>{const a=n(e),f=vR(s);return a.orThunk(()=>f(e)?V.none():WA(e,n,f))},jA=xE,yR=(e,n,s)=>{const a=e.formatter.get(s);if(a)for(let f=0;f<a.length;f++){const g=a[f];if(Pl(g)&&g.inherit===!1&&e.dom.is(n,g.selector))return!0}return!1},Jp=(e,n,s,a,f)=>{const g=e.dom.getRoot();if(n===g)return!1;const y=e.dom.getParent(n,S=>yR(e,S,s)?!0:S.parentNode===g||!!jd(e,S,s,a,!0));return!!jd(e,y,s,a,f)},Ub=(e,n,s)=>si(s)&&jA(n,s.inline)||nd(s)&&jA(n,s.block)?!0:Pl(s)?xn(n)&&e.is(n,s.selector):!1,ZA=(e,n,s,a,f,g)=>{const y=s[a],S=a==="attributes";if(Ee(s.onmatch))return s.onmatch(n,s,a);if(y){if(tn(y)){for(let E=0;E<y.length;E++)if(S?e.getAttrib(n,y[E]):mb(e,n,y[E]))return!0}else for(const E in y)if(Bn(y,E)){const P=S?e.getAttrib(n,E):mb(e,n,E),L=Hd(y[E],g),$=$e(P)||Io(P);if($&&$e(L))continue;if(f&&$&&!s.exact||(!f||s.exact)&&!jA(P,CE(L,E)))return!1}}return!0},jd=(e,n,s,a,f)=>{const g=e.formatter.get(s),y=e.dom;if(g&&xn(n))for(let S=0;S<g.length;S++){const E=g[S];if(Ub(e.dom,n,E)&&ZA(y,n,E,"attributes",f,a)&&ZA(y,n,E,"styles",f,a)){const P=E.classes;if(P){for(let L=0;L<P.length;L++)if(!e.dom.hasClass(n,Hd(P[L],a)))return}return E}}},Bx=(e,n,s,a,f)=>{if(a)return Jp(e,a,n,s,f);if(a=e.selection.getNode(),Jp(e,a,n,s,f))return!0;const g=e.selection.getStart();return!!(g!==a&&Jp(e,g,n,s,f))},ZV=(e,n,s)=>{const a=[],f={},g=e.selection.getStart();return e.dom.getParent(g,y=>{for(let S=0;S<n.length;S++){const E=n[S];!f[E]&&jd(e,y,E,s)&&(f[E]=!0,a.push(E))}},e.dom.getRoot()),a},hg=(e,n)=>{const s=f=>ws(f,ye.fromDom(e.getBody())),a=(f,g)=>jd(e,f.dom,g)?V.some(g):V.none();return V.from(e.selection.getStart(!0)).bind(f=>th(ye.fromDom(f),g=>lo(n,y=>a(g,y)),s)).getOrNull()},wR=(e,n)=>{const s=e.formatter.get(n),a=e.dom;if(s&&e.selection.isEditable()){const f=e.selection.getStart(),g=Uw(a,f);for(let y=s.length-1;y>=0;y--){const S=s[y];if(!Pl(S))return!0;for(let E=g.length-1;E>=0;E--)if(a.is(g[E],S.selector))return!0}}return!1},xR=(e,n,s)=>ve(s,(a,f)=>{const g=c4(e,f);return e.formatter.matchNode(n,f,{},g)?a.concat([f]):a},[]),Qp=Yi,Fx=(e,n)=>e.importNode(n,!0),qA=e=>{if(e){const n=new er(e,e);for(let s=n.current();s;s=n.next())if(Vt(s))return s}return null},GA=e=>{const n=ye.fromTag("span");return Vr(n,{id:Vw,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Yr(n,ye.fromText(Qp)),n},CR=e=>{const n=qA(e);return n&&n.data.charAt(0)===Qp&&n.deleteData(0,1),n},KA=(e,n,s)=>{const a=e.dom,f=e.selection;if(gb(n))eh(e,!1,ye.fromDom(n),s,!0);else{const g=f.getRng(),y=a.getParent(n,a.isBlock),S=g.startContainer,E=g.startOffset,P=g.endContainer,L=g.endOffset,$=CR(n);a.remove(n,!0),S===$&&E>0&&g.setStart($,E-1),P===$&&L>0&&g.setEnd($,L-1),y&&a.isEmpty(y)&&Pd(ye.fromDom(y)),f.setRng(g)}},YA=(e,n,s)=>{const a=e.dom,f=e.selection;if(n)KA(e,n,s);else if(n=Jm(e.getBody(),f.getStart()),!n)for(;n=a.get(Vw);)KA(e,n,s)},Ix=(e,n,s)=>{var a,f;const g=e.dom,y=g.getParent(s,Be(yi,e.schema));y&&g.isEmpty(y)?(a=s.parentNode)===null||a===void 0||a.replaceChild(n,s):(t8(ye.fromDom(s)),g.isEmpty(s)?(f=s.parentNode)===null||f===void 0||f.replaceChild(n,s):g.insertAfter(n,s))},XA=(e,n)=>(e.appendChild(n),n),Lx=(e,n)=>{var s;const a=kt(e,(g,y)=>XA(g,y.cloneNode(!1)),n),f=(s=a.ownerDocument)!==null&&s!==void 0?s:document;return XA(a,f.createTextNode(Qp))},qV=(e,n,s,a,f,g)=>{const y=e.formatter,S=e.dom,E=Ne(Bo(y.get()),$=>$!==a&&!$n($,"removeformat")),P=xR(e,s,E);if(Ne(P,$=>!CH(e,$,a)).length>0){const $=s.cloneNode(!1);return S.add(n,$),y.remove(a,f,$,g),S.remove($),V.some($)}else return V.none()},GV=(e,n,s)=>{let a;const f=e.selection,g=e.formatter.get(n);if(!g)return;const y=f.getRng();let S=y.startOffset;const P=y.startContainer.nodeValue;a=Jm(e.getBody(),f.getStart());const L=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(P&&S>0&&S<P.length&&L.test(P.charAt(S))&&L.test(P.charAt(S-1))){const $=f.getBookmark();y.collapse(!0);let W=qf(e.dom,y,g);W=tx(W),e.formatter.apply(n,s,W),f.moveToBookmark($)}else{let $=a?qA(a):null;(!a||($==null?void 0:$.data)!==Qp)&&(a=Fx(e.getDoc(),GA(!0).dom),$=a.firstChild,y.insertNode(a),S=1),e.formatter.apply(n,s,a),f.setCursorLocation($,S)}},SR=(e,n,s,a)=>{const f=e.dom,g=e.selection;let y=!1;const S=e.formatter.get(n);if(!S)return;const E=g.getRng(),P=E.startContainer,L=E.startOffset;let $=P;Vt(P)&&(L!==P.data.length&&(y=!0),$=$.parentNode);const W=[];let re;for(;$;){if(jd(e,$,n,s,a)){re=$;break}$.nextSibling&&(y=!0),W.push($),$=$.parentNode}if(re)if(y){const fe=g.getBookmark();E.collapse(!0);let te=qf(f,E,S,!0);te=tx(te),e.formatter.remove(n,s,te,a),g.moveToBookmark(fe)}else{const fe=Jm(e.getBody(),re),te=le(fe)?f.getParents(re.parentNode,je,fe):[],he=GA(!1).dom;Ix(e,he,fe!=null?fe:re);const Le=qV(e,he,re,n,s,a),ze=Lx([...W,...Le.toArray(),...te],he);fe&&KA(e,fe,le(fe)),g.setCursorLocation(ze,1),f.isEmpty(re)&&f.remove(re)}},JA=(e,n,s)=>{const a=e.selection,f=e.getBody();YA(e,null,s),(n===8||n===46)&&a.isCollapsed()&&a.getStart().innerHTML===Qp&&YA(e,Jm(f,a.getStart()),!0),(n===37||n===39)&&YA(e,Jm(f,a.getStart()),!0)},kR=e=>Vt(e)&&Xo(e.data,xs),KV=e=>{e.on("mouseup keydown",n=>{JA(e,n.keyCode,kR(e.selection.getRng().endContainer))})},ER=e=>{const n=GA(!1),s=Lx(e,n.dom);return{caretContainer:n,caretPosition:bt(s,0)}},AR=(e,n)=>{const{caretContainer:s,caretPosition:a}=ER(n);return Ra(ye.fromDom(e),s),ks(ye.fromDom(e)),a},$x=(e,n)=>{const{caretContainer:s,caretPosition:a}=ER(n);return e.insertNode(s.dom),a},Zd=(e,n)=>{if(uc(n.dom))return!1;const s=e.schema.getTextInlineElements();return Bn(s,ts(n))&&!uc(n.dom)&&!zu(n.dom)},Wb={},Hx=Gi(["pre"]),jr=(e,n)=>{Wb[e]||(Wb[e]=[]),Wb[e].push(n)},QA=(e,n)=>{Bn(Wb,e)&&de(Wb[e],s=>{s(n)})};jr("pre",e=>{const n=e.selection.getRng(),s=f=>g=>{const y=g.previousSibling;return Hx(y)&&Qe(f,y)},a=(f,g)=>{const y=ye.fromDom(g),S=Iu(y).dom;ks(y),$s(ye.fromDom(f),[ye.fromTag("br",S),ye.fromTag("br",S),...pi(y)])};if(!n.collapsed){const f=e.selection.getSelectedBlocks(),g=Ne(Ne(f,Hx),s(f));de(g,y=>{a(y.previousSibling,y)})}});const Vx=["fontWeight","fontStyle","color","fontSize","fontFamily"],nh=e=>ce(e.styles)&&Bt(Bo(e.styles),n=>Qe(Vx,n)),TR=e=>st(e,n=>si(n)&&n.inline==="span"&&nh(n)),eT=(e,n)=>{const s=e.get(n);return De(s)?TR(s):V.none()},e1=(e,n)=>hl(n,bt.fromRangeStart(e)).isNone(),OR=(e,n)=>el(n,bt.fromRangeEnd(e)).exists(s=>!Us(s.getNode())||el(n,s).isSome())===!1,_R=e=>n=>Z2(n)&&e.isEditable(n),t1=e=>{const n=e.getSelectedBlocks(),s=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return e1(s,n[0])&&OR(s,n[0])?n:[];{const a=jt(n).filter(y=>e1(s,y)).toArray(),f=vn(n).filter(y=>OR(s,y)).toArray(),g=n.slice(1,-1);return a.concat(g).concat(f)}},YV=e=>Ne(t1(e),_R(e.dom)),$h=e=>Ne(e.getSelectedBlocks(),_R(e.dom)),tT=Lt.each,qd=e=>xn(e)&&!dc(e)&&!uc(e)&&!zu(e),gc=(e,n)=>{for(let s=e;s;s=s[n]){if(Vt(s)&&Po(s.data))return e;if(xn(s)&&!dc(s))return s}return e},jb=(e,n,s)=>{const a=Ex(e),f=Tf(n)&&e.dom.isEditable(n),g=Tf(s)&&e.dom.isEditable(s);if(f&&g){const y=gc(n,"previousSibling"),S=gc(s,"nextSibling");if(a.compare(y,S)){for(let E=y.nextSibling;E&&E!==S;){const P=E;E=E.nextSibling,y.appendChild(P)}return e.dom.remove(S),Lt.each(Lt.grep(S.childNodes),E=>{y.appendChild(E)}),y}}return s},zx=(e,n,s,a)=>{var f;if(a&&n.merge_siblings!==!1){const g=(f=jb(e,ln(a),a))!==null&&f!==void 0?f:a;jb(e,g,ln(g,!0))}},XV=(e,n,s)=>{if(n.clear_child_styles){const a=n.links?"*:not(a)":"*";tT(e.select(a,s),f=>{qd(f)&&e.isEditable(f)&&tT(n.styles,(g,y)=>{e.setStyle(f,y,"")})})}},nT=(e,n,s)=>{tT(e.childNodes,a=>{qd(a)&&(n(a)&&s(a),a.hasChildNodes()&&nT(a,n,s))})},Ux=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},DR=(e,n)=>s=>!!(s&&mb(e,s,n)),Nc=(e,n,s)=>a=>{e.setStyle(a,n,s),a.getAttribute("style")===""&&a.removeAttribute("style"),Ux(e,a)},Gd=ed.generate([{keep:[]},{rename:["name"]},{removed:[]}]),MR=/^(src|href|style)$/,Zb=Lt.each,n1=xE,mg=e=>/^(TR|TH|TD)$/.test(e.nodeName),Wx=(e,n,s)=>e.isChildOf(n,s)&&n!==s&&!e.isBlock(s),PR=(e,n,s)=>{let a=n[s?"startContainer":"endContainer"],f=n[s?"startOffset":"endOffset"];if(xn(a)){const g=a.childNodes.length-1;!s&&f&&f--,a=a.childNodes[f>g?g:f]}return Vt(a)&&s&&f>=a.data.length&&(a=new er(a,e.getBody()).next()||a),Vt(a)&&!s&&f===0&&(a=new er(a,e.getBody()).prev()||a),a},oT=(e,n)=>{const s=n?"firstChild":"lastChild",a=e[s];return mg(e)&&a?e.nodeName==="TR"&&a[s]||a:e},sT=(e,n,s,a)=>{var f;const g=e.create(s,a);return(f=n.parentNode)===null||f===void 0||f.insertBefore(g,n),g.appendChild(n),g},RR=(e,n,s,a,f)=>{const g=ye.fromDom(n),y=ye.fromDom(e.create(a,f)),S=s?Ma(g):Ly(g);return $s(y,S),s?(Ra(g,y),Om(y,g)):(Hu(g,y),Yr(y,g)),y.dom},JV=(e,n)=>n.links&&e.nodeName==="A",NR=(e,n,s)=>{const a=n.parentNode;let f;const g=e.dom,y=Ia(e);nd(s)&&a===g.getRoot()&&(!s.list_block||!n1(n,s.list_block))&&de(so(n.childNodes),S=>{Zf(e,y,S.nodeName.toLowerCase())?f?f.appendChild(S):(f=sT(g,S,y),g.setAttribs(f,eb(e))):f=null}),!(kE(s)&&!n1(s.inline,n))&&g.remove(n,!0)},o1=(e,n,s)=>ft(e)?{name:n,value:null}:{name:e,value:Hd(n,s)},BR=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},rT=(e,n,s,a,f)=>{let g=!1;Zb(s.styles,(y,S)=>{const{name:E,value:P}=o1(S,y,a),L=CE(P,E);(s.remove_similar||G(P)||!xn(f)||n1(mb(e,f,E),L))&&e.setStyle(n,E,""),g=!0}),g&&BR(e,n)},iT=(e,n,s)=>{n==="removeformat"?de($h(e.selection),a=>{de(Vx,f=>e.dom.setStyle(a,f,"")),BR(e.dom,a)}):eT(e.formatter,n).each(a=>{de($h(e.selection),f=>rT(e.dom,f,a,s,null))})},FR=(e,n,s,a,f)=>{const g=e.dom,y=Ex(e),S=e.schema;if(si(n)&&L0(S,n.inline)&&ns(S,a)&&a.parentElement===e.getBody())return NR(e,a,n),Gd.removed();if(!n.ceFalseOverride&&a&&g.getContentEditableParent(a)==="false"||a&&!Ub(g,a,n)&&!JV(a,n))return Gd.keep();const E=a,P=n.preserve_attributes;if(si(n)&&n.remove==="all"&&De(P)){const L=Ne(g.getAttribs(E),$=>Qe(P,$.name.toLowerCase()));if(g.removeAllAttribs(E),de(L,$=>g.setAttrib(E,$.name,$.value)),L.length>0)return Gd.rename("span")}if(n.remove!=="all"){rT(g,E,n,s,f),Zb(n.attributes,($,W)=>{const{name:re,value:fe}=o1(W,$,s);if(n.remove_similar||G(fe)||!xn(f)||n1(g.getAttrib(f,re),fe)){if(re==="class"){const te=g.getAttrib(E,re);if(te){let he="";if(de(te.split(/\s+/),Le=>{/mce\-\w+/.test(Le)&&(he+=(he?" ":"")+Le)}),he){g.setAttrib(E,re,he);return}}}if(MR.test(re)&&E.removeAttribute("data-mce-"+re),re==="style"&&Gi(["li"])(E)&&g.getStyle(E,"list-style-type")==="none"){E.removeAttribute(re),g.setStyle(E,"list-style-type","none");return}re==="class"&&E.removeAttribute("className"),E.removeAttribute(re)}}),Zb(n.classes,$=>{$=Hd($,s),(!xn(f)||g.hasClass(f,$))&&g.removeClass(E,$)});const L=g.getAttribs(E);for(let $=0;$<L.length;$++){const W=L[$].nodeName;if(!y.isAttributeInternal(W))return Gd.keep()}}return n.remove!=="none"?(NR(e,E,n),Gd.removed()):Gd.keep()},IR=(e,n,s,a,f)=>{let g;return n.parentNode&&de(Uw(e.dom,n.parentNode).reverse(),y=>{if(!g&&xn(y)&&y.id!=="_start"&&y.id!=="_end"){const S=jd(e,y,s,a,f);S&&S.split!==!1&&(g=y)}}),g},LR=(e,n,s,a)=>FR(e,n,s,a,a).fold(me(a),f=>(e.dom.createFragment().appendChild(a),e.dom.rename(a,f)),me(null)),QV=(e,n,s,a,f,g,y,S)=>{var E,P;let L,$;const W=e.dom;if(s){const re=s.parentNode;for(let fe=a.parentNode;fe&&fe!==re;fe=fe.parentNode){let te=W.clone(fe,!1);for(let he=0;he<n.length&&(te=LR(e,n[he],S,te),te!==null);he++);te&&(L&&te.appendChild(L),$||($=te),L=te)}(!y.mixed||!W.isBlock(s))&&(a=(E=W.split(s,a))!==null&&E!==void 0?E:a),L&&$&&((P=f.parentNode)===null||P===void 0||P.insertBefore(L,f),$.appendChild(f),si(y)&&zx(e,y,S,L))}return a},ez=(e,n,s,a,f)=>{const g=e.formatter.get(n),y=g[0],S=e.dom,E=e.selection,P=te=>{const he=IR(e,te,n,s,f);return QV(e,g,he,te,te,!0,y,s)},L=te=>dc(te)&&xn(te)&&(te.id==="_start"||te.id==="_end"),$=te=>Bt(g,he=>qb(e,he,s,te,te)),W=te=>{const he=so(te.childNodes),ze=$(te)||Bt(g,Nt=>Ub(S,te,Nt)),Ve=te.parentNode;if(!ze&&le(Ve)&&EE(y)&&$(Ve),y.deep&&he.length)for(let Nt=0;Nt<he.length;Nt++)W(he[Nt]);de(["underline","line-through","overline"],Nt=>{xn(te)&&e.dom.getStyle(te,"text-decoration")===Nt&&te.parentNode&&l4(S,te.parentNode)===Nt&&qb(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Nt}},void 0,te)})},re=te=>{const he=S.get(te?"_start":"_end");if(he){let Le=he[te?"firstChild":"lastChild"];return L(Le)&&(Le=Le[te?"firstChild":"lastChild"]),Vt(Le)&&Le.data.length===0&&(Le=te?he.previousSibling||he.nextSibling:he.nextSibling||he.previousSibling),S.remove(he,!0),Le}else return null},fe=te=>{let he,Le,ze=qf(S,te,g,te.collapsed);if(y.split){if(ze=tx(ze),he=PR(e,ze,!0),Le=PR(e,ze),he!==Le){if(he=oT(he,!0),Le=oT(Le,!1),Wx(S,he,Le)){const ot=V.from(he.firstChild).getOr(he);P(RR(S,ot,!0,"span",{id:"_start","data-mce-type":"bookmark"})),re(!0);return}if(Wx(S,Le,he)){const ot=V.from(Le.lastChild).getOr(Le);P(RR(S,ot,!1,"span",{id:"_end","data-mce-type":"bookmark"})),re(!1);return}he=sT(S,he,"span",{id:"_start","data-mce-type":"bookmark"}),Le=sT(S,Le,"span",{id:"_end","data-mce-type":"bookmark"});const Ve=S.createRng();Ve.setStartAfter(he),Ve.setEndBefore(Le),vb(S,Ve,ot=>{de(ot,Nt=>{!dc(Nt)&&!dc(Nt.parentNode)&&P(Nt)})}),P(he),P(Le),he=re(!0),Le=re()}else he=Le=P(he);ze.startContainer=he.parentNode?he.parentNode:he,ze.startOffset=S.nodeIndex(he),ze.endContainer=Le.parentNode?Le.parentNode:Le,ze.endOffset=S.nodeIndex(Le)+1}vb(S,ze,Ve=>{de(Ve,W)})};if(a){if(fb(a)){const te=S.createRng();te.setStartBefore(a),te.setEndAfter(a),fe(te)}else fe(a);tg(e,n,a,s);return}!E.isCollapsed()||!si(y)||Pp(e).length?(i4(e,()=>yE(e,fe),te=>si(y)&&Bx(e,n,s,te)),e.nodeChanged()):SR(e,n,s,f),iT(e,n,s),tg(e,n,a,s)},$R=(e,n,s,a,f)=>{(a||e.selection.isEditable())&&ez(e,n,s,a,f)},qb=(e,n,s,a,f)=>FR(e,n,s,a,f).fold(ue,g=>(e.dom.rename(a,g),!0),je),HR=Lt.each,tz=(e,n,s,a)=>{const f=g=>{if(Tf(g)&&xn(g.parentNode)&&e.isEditable(g)){const y=l4(e,g.parentNode);e.getStyle(g,"color")&&y?e.setStyle(g,"text-decoration",y):e.getStyle(g,"text-decoration")===y&&e.setStyle(g,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Lt.walk(a,f,"childNodes"),f(a))},nz=(e,n,s,a)=>{if(n.styles&&n.styles.backgroundColor){const f=DR(e,"fontSize");nT(a,g=>f(g)&&e.isEditable(g),Nc(e,"backgroundColor",Hd(n.styles.backgroundColor,s)))}},oz=(e,n,s,a)=>{if(si(n)&&(n.inline==="sub"||n.inline==="sup")){const f=DR(e,"fontSize");nT(a,y=>f(y)&&e.isEditable(y),Nc(e,"fontSize",""));const g=Ne(e.select(n.inline==="sup"?"sub":"sup",a),e.isEditable);e.remove(g,!0)}},sz=(e,n,s,a)=>{HR(n,f=>{si(f)&&HR(e.dom.select(f.inline,a),g=>{qd(g)&&qb(e,f,s,g,f.exact?g:null)}),XV(e.dom,f,a)})},rz=(e,n,s,a,f)=>{const g=f.parentNode;jd(e,g,s,a)&&qb(e,n,a,f)||n.merge_with_parents&&g&&e.dom.getParent(g,y=>jd(e,y,s,a)?(qb(e,n,a,f),!0):!1)},jx=Lt.each,iz=(e,n,s,a)=>{if(E3(e)&&si(n)&&s.parentNode){const f=zM(e.schema),g=AV(ye.fromDom(s),y=>uc(y.dom));return hi(f,a)&&Mr(ye.fromDom(s.parentNode),!1)&&!g}else return!1},VR=(e,n,s,a)=>{if(jx(s.styles,(f,g)=>{e.setStyle(n,g,Hd(f,a))}),s.styles){const f=e.getAttrib(n,"style");f&&e.setAttrib(n,"data-mce-style",f)}},zR=(e,n,s,a)=>{const f=e.formatter.get(n),g=f[0],y=!a&&e.selection.isCollapsed(),S=e.dom,E=e.selection,P=(fe,te=g)=>{Ee(te.onformat)&&te.onformat(fe,te,s,a),VR(S,fe,te,s),jx(te.attributes,(he,Le)=>{S.setAttrib(fe,Le,Hd(he,s))}),jx(te.classes,he=>{const Le=Hd(he,s);S.hasClass(fe,Le)||S.addClass(fe,Le)})},L=(fe,te)=>{let he=!1;return jx(fe,Le=>Pl(Le)?S.getContentEditable(te)==="false"&&!Le.ceFalseOverride||le(Le.collapsed)&&Le.collapsed!==y?!0:S.is(te,Le.selector)&&!uc(te)?(P(te,Le),he=!0,!1):!0:!1),he},$=fe=>{if(Z(fe)){const te=S.create(fe);return P(te),te}else return null},W=(fe,te,he)=>{const Le=[];let ze=!0;const Ve=g.inline||g.block,ot=$(Ve),Nt=vt=>Ww(g)&&jd(e,vt,n,s),Wt=(vt,dt,Mt)=>{const gn=jw(g)&&yi(e.schema,vt)&&Zf(e,dt,Ve);return Mt&&gn},sn=(vt,dt,Mt,gn)=>{const Mn=vt.nodeName.toLowerCase(),ko=Zf(e,Ve,Mn)&&Zf(e,dt,Ve),Ho=!he&&Vt(vt)&&Ol(vt.data),Ms=uc(vt),qs=!si(g)||!fe.isBlock(vt);return(Mt||gn)&&ko&&!Ho&&!Ms&&qs};vb(fe,te,vt=>{let dt;const Mt=gn=>{let Mn=!1,ko=ze,Ho=!1;const Ms=gn.parentNode,qs=Ms.nodeName.toLowerCase(),Tr=fe.getContentEditable(gn);le(Tr)&&(ko=ze,ze=Tr==="true",Mn=!0,Ho=hb(e,gn));const Qi=ze&&!Mn;if(Us(gn)&&!iz(e,g,gn,qs)){dt=null,nd(g)&&fe.remove(gn);return}if(Nt(gn)){dt=null;return}if(Wt(gn,qs,Qi)){const Bs=fe.rename(gn,Ve);P(Bs),Le.push(Bs),dt=null;return}if(Pl(g)){let Bs=L(f,gn);if(!Bs&&le(Ms)&&EE(g)&&(Bs=L(f,Ms)),!si(g)||Bs){dt=null;return}}le(ot)&&sn(gn,qs,Qi,Ho)?(dt||(dt=fe.clone(ot,!1),Ms.insertBefore(dt,gn),Le.push(dt)),Ho&&Mn&&(ze=ko),dt.appendChild(gn)):(dt=null,de(so(gn.childNodes),Mt),Mn&&(ze=ko),dt=null)};de(vt,Mt)}),g.links===!0&&de(Le,vt=>{const dt=Mt=>{Mt.nodeName==="A"&&P(Mt,g),de(so(Mt.childNodes),dt)};dt(vt)}),de(Le,vt=>{const dt=Mn=>{let ko=0;return de(Mn.childNodes,Ho=>{!du(Ho)&&!dc(Ho)&&ko++}),ko},Mt=Mn=>st(Mn.childNodes,wE).filter(Ho=>fe.getContentEditable(Ho)!=="false"&&Ub(fe,Ho,g)).map(Ho=>{const Ms=fe.clone(Ho,!1);return P(Ms),fe.replace(Ms,Mn,!0),fe.remove(Ho,!0),Ms}).getOr(Mn),gn=dt(vt);if((Le.length>1||!fe.isBlock(vt))&&gn===0){fe.remove(vt,!0);return}(si(g)||nd(g)&&g.wrapper)&&(!g.exact&&gn===1&&(vt=Mt(vt)),sz(e,f,s,vt),rz(e,g,n,s,vt),nz(fe,g,s,vt),tz(fe,g,s,vt),oz(fe,g,s,vt),zx(e,g,s,vt))})},re=fb(a)?a:E.getNode();if(S.getContentEditable(re)==="false"&&!hb(e,re)){a=re,L(f,a),Sa(e,n,a,s);return}if(g){if(a)if(fb(a)){if(!L(f,a)){const fe=S.createRng();fe.setStartBefore(a),fe.setEndAfter(a),W(S,qf(S,fe,f),!0)}}else W(S,a,!0);else!y||!si(g)||Pp(e).length?(E.setRng(Kp(E.getRng())),i4(e,()=>{yE(e,(fe,te)=>{const he=te?fe:qf(S,fe,f);W(S,he,!1)})},je),e.nodeChanged()):GV(e,n,s),eT(e.formatter,n).each(fe=>{de(YV(e.selection),te=>VR(S,te,fe,s))});QA(n,e)}Sa(e,n,a,s)},UR=(e,n,s,a)=>{(a||e.selection.isEditable())&&zR(e,n,s,a)},gg=e=>Bn(e,"vars"),az=(e,n)=>{e.set({}),n.on("NodeChange",s=>{aT(n,s.element,e.get())}),n.on("FormatApply FormatRemove",s=>{const a=V.from(s.node).map(f=>fb(f)?f:f.startContainer).bind(f=>xn(f)?V.some(f):V.from(f.parentElement)).getOrThunk(()=>WR(n));aT(n,a,e.get())})},WR=e=>e.selection.getStart(),jR=(e,n,s,a,f)=>We(n,S=>{const E=e.formatter.matchNode(S,s,f!=null?f:{},a);return!Re(E)},S=>yR(e,S,s)?!0:a?!1:le(e.formatter.matchNode(S,s,f,!0))),ZR=(e,n)=>{const s=n!=null?n:WR(e);return Ne(Uw(e.dom,s),a=>xn(a)&&!zu(a))},aT=(e,n,s)=>{const a=ZR(e,n);$t(s,(f,g)=>{const y=S=>{const E=jR(e,a,g,S.similar,gg(S)?S.vars:void 0),P=E.isSome();if(S.state.get()!==P){S.state.set(P);const L=E.getOr(n);gg(S)?S.callback(P,{node:L,format:g,parents:a}):de(S.callbacks,$=>$(P,{node:L,format:g,parents:a}))}};de([f.withSimilar,f.withoutSimilar],y),de(f.withVars,y)})},lz=(e,n,s,a,f,g)=>{const y=n.get();de(s.split(","),S=>{const E=us(y,S).getOrThunk(()=>{const L={withSimilar:{state:Ur(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ur(!1),similar:!1,callbacks:[]},withVars:[]};return y[S]=L,L}),P=()=>{const L=ZR(e);return jR(e,L,S,f,g).isSome()};if(Re(g)){const L=f?E.withSimilar:E.withoutSimilar;L.callbacks.push(a),L.callbacks.length===1&&L.state.set(P())}else E.withVars.push({state:Ur(P()),similar:f,vars:g,callback:a})}),n.set(y)},cz=(e,n,s)=>{const a=e.get();de(n.split(","),f=>us(a,f).each(g=>{a[f]={withSimilar:Ot(ie({},g.withSimilar),{callbacks:Ne(g.withSimilar.callbacks,y=>y!==s)}),withoutSimilar:Ot(ie({},g.withoutSimilar),{callbacks:Ne(g.withoutSimilar.callbacks,y=>y!==s)}),withVars:Ne(g.withVars,y=>y.callback!==s)}})),e.set(a)},uz=(e,n,s,a,f,g)=>(lz(e,n,s,a,f,g),{unbind:()=>cz(n,s,a)}),dz=(e,n,s,a)=>{const f=e.formatter.get(n);f&&(Bx(e,n,s,a)&&(!("toggle"in f[0])||f[0].toggle)?$R(e,n,s,a):UR(e,n,s,a))},qR=Lt.explode,GR=()=>{const e={};return{addFilter:(f,g)=>{de(qR(f),y=>{Bn(e,y)||(e[y]={name:y,callbacks:[]}),e[y].callbacks.push(g)})},getFilters:()=>fi(e),removeFilter:(f,g)=>{de(qR(f),y=>{if(Bn(e,y))if(le(g)){const S=e[y],E=Ne(S.callbacks,P=>P!==g);E.length>0?S.callbacks=E:delete e[y]}else delete e[y]})}}},fz=(e,n)=>{de(n,s=>{e.attr(s,null)})},hz=(e,n,s)=>{e.addNodeFilter("font",a=>{de(a,f=>{const g=n.parse(f.attr("style")),y=f.attr("color"),S=f.attr("face"),E=f.attr("size");y&&(g.color=y),S&&(g["font-family"]=S),E&&Wi(E).each(P=>{g["font-size"]=s[P-1]}),f.name="span",f.attr("style",n.serialize(g)),fz(f,["color","face","size"])})})},mz=(e,n,s)=>{e.addNodeFilter("strike",a=>{const f=n.type!=="html4";de(a,g=>{if(f)g.name="s";else{const y=s.parse(g.attr("style"));y["text-decoration"]="line-through",g.name="span",g.attr("style",s.serialize(y))}})})},gz=(e,n,s)=>{var a;const f=dk();n.convert_fonts_to_spans&&hz(e,f,Lt.explode((a=n.font_size_legacy_values)!==null&&a!==void 0?a:"")),mz(e,s,f)},lT=(e,n,s)=>{n.inline_styles&&gz(e,n,s)},cT=(e,n,s)=>{n.addNodeFilter("br",(a,f,g)=>{const y=Lt.extend({},s.getBlockElements()),S=s.getNonEmptyElements(),E=s.getWhitespaceElements();y.body=1;const P=L=>L.name in y||Rf(s,L);for(let L=0,$=a.length;L<$;L++){let W=a[L],re=W.parent;if(re&&P(re)&&W===re.lastChild){let fe=W.prev;for(;fe;){const te=fe.name;if(te!=="span"||fe.attr("data-mce-type")!=="bookmark"){te==="br"&&(W=null);break}fe=fe.prev}if(W&&(W.remove(),Gp(s,S,E,re))){const te=s.getElementRule(re.name);te&&(te.removeEmpty?re.remove():te.paddEmpty&&Tx(e,g,P,re))}}else{let fe=W;for(;re&&re.firstChild===fe&&re.lastChild===fe&&(fe=re,!y[re.name]);)re=re.parent;if(fe===re){const te=new $a("#text",3);te.value=xs,W.replace(te)}}}})},bee=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Gb=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},Zx=e=>{const[n,...s]=e.split(","),a=s.join(","),f=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(f){const g=f[2]===";base64",y=g?Gb(a):decodeURIComponent(a);return V.some({type:f[1],data:y,base64Encoded:g})}else return V.none()},s1=(e,n,s=!0)=>{let a=n;if(s)try{a=atob(n)}catch(g){return V.none()}const f=new Uint8Array(a.length);for(let g=0;g<f.length;g++)f[g]=a.charCodeAt(g);return V.some(new Blob([f],{type:e}))},Kb=e=>new Promise((n,s)=>{Zx(e).bind(({type:a,data:f,base64Encoded:g})=>s1(a,f,g)).fold(()=>s("Invalid data URI"),n)}),KR=e=>Vn(e,"blob:")?bee(e):Vn(e,"data:")?Kb(e):Promise.reject("Unknown URI format"),pz=e=>new Promise((n,s)=>{const a=new FileReader;a.onloadend=()=>{n(a.result)},a.onerror=()=>{var f;s((f=a.error)===null||f===void 0?void 0:f.message)},a.readAsDataURL(e)});let bz=0;const vee=e=>"blobid"+bz++,YR=(e,n,s)=>Zx(e).bind(({data:a,type:f,base64Encoded:g})=>{if(n&&!g)return V.none();{const y=g?a:btoa(a);return s(y,f)}}),XR=(e,n,s)=>{const a=e.create(vee(),n,s);return e.add(a),a},vz=(e,n,s=!1)=>YR(n,s,(a,f)=>V.from(e.getByData(a,f)).orThunk(()=>s1(f,a).map(g=>XR(e,g,a)))),yz=(e,n)=>{const s=()=>Promise.reject("Invalid data URI");if(Vn(n,"blob:")){const a=e.getByUri(n);return le(a)?Promise.resolve(a):KR(n).then(f=>pz(f).then(g=>YR(g,!1,y=>V.some(XR(e,f,y))).getOrThunk(s)))}else return Vn(n,"data:")?vz(e,n).fold(s,a=>Promise.resolve(a)):Promise.reject("Unknown image data format")},JR=e=>le(e.attr("data-mce-bogus")),wz=e=>e.attr("src")===on.transparentSrc||le(e.attr("data-mce-placeholder")),QR=(e,n)=>{const{blob_cache:s}=n;if(s){const a=f=>{const g=f.attr("src");wz(f)||JR(f)||$e(g)||vz(s,g,!0).each(y=>{f.attr("src",y.blobUri())})};e.addAttributeFilter("src",f=>de(f,a))}},uT=(e,n)=>Vn(e,`${n}/`),qx=(e,n,s,a,f)=>{let g;Re(e)?g="iframe":uT(e,"image")?g="img":uT(e,"video")?g="video":uT(e,"audio")?g="audio":g="iframe";const y=new $a(g,1);return y.attr(g==="audio"?{src:n}:{src:n,width:s,height:a}),(g==="audio"||g==="video")&&y.attr("controls",""),g==="iframe"&&f&&y.attr("sandbox",""),y},eN=(e,n)=>{const s=e.schema;n.remove_trailing_brs&&cT(n,e,s),e.addAttributeFilter("href",f=>{let g=f.length;const y=E=>E.split(" ").filter(L=>L.length>0).concat(["noopener"]).sort().join(" "),S=E=>{const P=E?Lt.trim(E):"";return/\b(noopener)\b/g.test(P)?P:y(P)};if(!n.allow_unsafe_link_target)for(;g--;){const E=f[g];E.name==="a"&&E.attr("target")==="_blank"&&E.attr("rel",S(E.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let g=f.length,y,S,E,P;for(;g--;)if(P=f[g],P.name==="a"&&P.firstChild&&!P.attr("href"))for(E=P.parent,y=P.lastChild;y&&E;)S=y.prev,E.insert(y,P),y=S}),n.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let g=f.length,y,S;for(;g--;)if(y=f[g],S=y.parent,S&&(S.name==="ul"||S.name==="ol"))if(y.prev&&y.prev.name==="li")y.prev.append(y);else{const E=new $a("li",1);E.attr("style","list-style-type: none"),y.wrap(E)}});const a=s.getValidClasses();n.validate&&a&&e.addAttributeFilter("class",f=>{var g;let y=f.length;for(;y--;){const S=f[y],E=(g=S.attr("class"))!==null&&g!==void 0?g:"",P=Lt.explode(E," ");let L="";for(let $=0;$<P.length;$++){const W=P[$];let re=!1,fe=a["*"];fe&&fe[W]&&(re=!0),fe=a[S.name],!re&&fe&&fe[W]&&(re=!0),re&&(L&&(L+=" "),L+=W)}L.length||(L=null),S.attr("class",L)}}),QR(e,n),n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>de(f,g=>{g.replace(qx(g.attr("type"),g.name==="object"?g.attr("data"):g.attr("src"),g.attr("width"),g.attr("height"),n.sandbox_iframes))})),n.sandbox_iframes&&e.addNodeFilter("iframe",f=>de(f,g=>g.attr("sandbox","")))},{entries:ri,setPrototypeOf:xz,isFrozen:yee,getPrototypeOf:wee,getOwnPropertyDescriptor:xee}=Object;let{freeze:ei,seal:pc,create:Hh}=Object,{apply:Kd,construct:dT}=typeof Reflect!="undefined"&&Reflect;Kd||(Kd=function(n,s,a){return n.apply(s,a)}),ei||(ei=function(n){return n}),pc||(pc=function(n){return n}),dT||(dT=function(n,s){return new n(...s)});const Cz=vu(Array.prototype.forEach),r1=vu(Array.prototype.pop),Yd=vu(Array.prototype.push),oh=vu(String.prototype.toLowerCase),Gx=vu(String.prototype.toString),fT=vu(String.prototype.match),bu=vu(String.prototype.replace),tN=vu(String.prototype.indexOf),Sz=vu(String.prototype.trim),Bc=vu(RegExp.prototype.test),i1=kz(TypeError);function vu(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),f=1;f<s;f++)a[f-1]=arguments[f];return Kd(e,n,a)}}function kz(e){return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return dT(e,s)}}function Ns(e,n,s){var a;s=(a=s)!==null&&a!==void 0?a:oh,xz&&xz(e,null);let f=n.length;for(;f--;){let g=n[f];if(typeof g=="string"){const y=s(g);y!==g&&(yee(n)||(n[f]=y),g=y)}e[g]=!0}return e}function a1(e){const n=Hh(null);for(const[s,a]of ri(e))n[s]=a;return n}function Kx(e,n){for(;e!==null;){const a=xee(e,n);if(a){if(a.get)return vu(a.get);if(typeof a.value=="function")return vu(a.value)}e=wee(e)}function s(a){return null}return s}const hT=ei(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mT=ei(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pg=ei(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),nN=ei(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gT=ei(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oN=ei(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sN=ei(["#text"]),pT=ei(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),bT=ei(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rN=ei(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yb=ei(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),iN=pc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),aN=pc(/<%[\w\W]*|[\w\W]*%>/gm),lN=pc(/\${[\w\W]*}/gm),cN=pc(/^data-[\-\w.\u00B7-\uFFFF]/),uN=pc(/^aria-[\-\w]+$/),dN=pc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ez=pc(/^(?:\w+script|data):/i),Az=pc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Yx=pc(/^html$/i);var l1=Object.freeze({__proto__:null,MUSTACHE_EXPR:iN,ERB_EXPR:aN,TMPLIT_EXPR:lN,DATA_ATTR:cN,ARIA_ATTR:uN,IS_ALLOWED_URI:dN,IS_SCRIPT_OR_DATA:Ez,ATTR_WHITESPACE:Az,DOCTYPE_NAME:Yx});const fN=()=>typeof window=="undefined"?null:window,hN=function(n,s){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let a=null;const f="data-tt-policy-suffix";s&&s.hasAttribute(f)&&(a=s.getAttribute(f));const g="dompurify"+(a?"#"+a:"");try{return n.createPolicy(g,{createHTML(y){return y},createScriptURL(y){return y}})}catch(y){return null}};function Xb(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fN();const n=$o=>Xb($o);if(n.version="3.0.5",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;const s=e.document,a=s.currentScript;let{document:f}=e;const{DocumentFragment:g,HTMLTemplateElement:y,Node:S,Element:E,NodeFilter:P,NamedNodeMap:L=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:$,DOMParser:W,trustedTypes:re}=e,fe=E.prototype,te=Kx(fe,"cloneNode"),he=Kx(fe,"nextSibling"),Le=Kx(fe,"childNodes"),ze=Kx(fe,"parentNode");if(typeof y=="function"){const $o=f.createElement("template");$o.content&&$o.content.ownerDocument&&(f=$o.content.ownerDocument)}let Ve,ot="";const{implementation:Nt,createNodeIterator:Wt,createDocumentFragment:sn,getElementsByTagName:vt}=f,{importNode:dt}=s;let Mt={};n.isSupported=typeof ri=="function"&&typeof ze=="function"&&Nt&&Nt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:gn,ERB_EXPR:Mn,TMPLIT_EXPR:ko,DATA_ATTR:Ho,ARIA_ATTR:Ms,IS_SCRIPT_OR_DATA:qs,ATTR_WHITESPACE:Tr}=l1;let{IS_ALLOWED_URI:Qi}=l1,Bs=null;const Xt=Ns({},[...hT,...mT,...pg,...gT,...sN]);let cn=null;const as=Ns({},[...pT,...bT,...rN,...Yb]);let zo=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yn=null,co=null,Gt=!0,uo=!0,Ko=!1,Is=!0,Ps=!1,Mi=!1,Eu=!1,of=!1,nl=!1,Vc=!1,go=!1,hs=!0,Ts=!1;const Rr="user-content-";let pr=!0,wl=!1,hd={},uh=null;const Ng=Ns({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let U1=null;const GS=Ns({},["audio","video","img","source","image","track"]);let Bg=null;const Kv=Ns({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),W1="http://www.w3.org/1998/Math/MathML",lm="http://www.w3.org/2000/svg",md="http://www.w3.org/1999/xhtml";let sf=md,Yv=!1,j1=null;const Xv=Ns({},[W1,lm,md],Gx);let rf;const KS=["application/xhtml+xml","text/html"],Jv="text/html";let fa,cm=null;const YS=f.createElement("form"),XS=function(mt){return mt instanceof RegExp||mt instanceof Function},Qv=function(mt){if(!(cm&&cm===mt)){if((!mt||typeof mt!="object")&&(mt={}),mt=a1(mt),rf=KS.indexOf(mt.PARSER_MEDIA_TYPE)===-1?rf=Jv:rf=mt.PARSER_MEDIA_TYPE,fa=rf==="application/xhtml+xml"?Gx:oh,Bs="ALLOWED_TAGS"in mt?Ns({},mt.ALLOWED_TAGS,fa):Xt,cn="ALLOWED_ATTR"in mt?Ns({},mt.ALLOWED_ATTR,fa):as,j1="ALLOWED_NAMESPACES"in mt?Ns({},mt.ALLOWED_NAMESPACES,Gx):Xv,Bg="ADD_URI_SAFE_ATTR"in mt?Ns(a1(Kv),mt.ADD_URI_SAFE_ATTR,fa):Kv,U1="ADD_DATA_URI_TAGS"in mt?Ns(a1(GS),mt.ADD_DATA_URI_TAGS,fa):GS,uh="FORBID_CONTENTS"in mt?Ns({},mt.FORBID_CONTENTS,fa):Ng,yn="FORBID_TAGS"in mt?Ns({},mt.FORBID_TAGS,fa):{},co="FORBID_ATTR"in mt?Ns({},mt.FORBID_ATTR,fa):{},hd="USE_PROFILES"in mt?mt.USE_PROFILES:!1,Gt=mt.ALLOW_ARIA_ATTR!==!1,uo=mt.ALLOW_DATA_ATTR!==!1,Ko=mt.ALLOW_UNKNOWN_PROTOCOLS||!1,Is=mt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ps=mt.SAFE_FOR_TEMPLATES||!1,Mi=mt.WHOLE_DOCUMENT||!1,nl=mt.RETURN_DOM||!1,Vc=mt.RETURN_DOM_FRAGMENT||!1,go=mt.RETURN_TRUSTED_TYPE||!1,of=mt.FORCE_BODY||!1,hs=mt.SANITIZE_DOM!==!1,Ts=mt.SANITIZE_NAMED_PROPS||!1,pr=mt.KEEP_CONTENT!==!1,wl=mt.IN_PLACE||!1,Qi=mt.ALLOWED_URI_REGEXP||dN,sf=mt.NAMESPACE||md,zo=mt.CUSTOM_ELEMENT_HANDLING||{},mt.CUSTOM_ELEMENT_HANDLING&&XS(mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(zo.tagNameCheck=mt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),mt.CUSTOM_ELEMENT_HANDLING&&XS(mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(zo.attributeNameCheck=mt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),mt.CUSTOM_ELEMENT_HANDLING&&typeof mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(zo.allowCustomizedBuiltInElements=mt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ps&&(uo=!1),Vc&&(nl=!0),hd&&(Bs=Ns({},[...sN]),cn=[],hd.html===!0&&(Ns(Bs,hT),Ns(cn,pT)),hd.svg===!0&&(Ns(Bs,mT),Ns(cn,bT),Ns(cn,Yb)),hd.svgFilters===!0&&(Ns(Bs,pg),Ns(cn,bT),Ns(cn,Yb)),hd.mathMl===!0&&(Ns(Bs,gT),Ns(cn,rN),Ns(cn,Yb))),mt.ADD_TAGS&&(Bs===Xt&&(Bs=a1(Bs)),Ns(Bs,mt.ADD_TAGS,fa)),mt.ADD_ATTR&&(cn===as&&(cn=a1(cn)),Ns(cn,mt.ADD_ATTR,fa)),mt.ADD_URI_SAFE_ATTR&&Ns(Bg,mt.ADD_URI_SAFE_ATTR,fa),mt.FORBID_CONTENTS&&(uh===Ng&&(uh=a1(uh)),Ns(uh,mt.FORBID_CONTENTS,fa)),pr&&(Bs["#text"]=!0),Mi&&Ns(Bs,["html","head","body"]),Bs.table&&(Ns(Bs,["tbody"]),delete yn.tbody),mt.TRUSTED_TYPES_POLICY){if(typeof mt.TRUSTED_TYPES_POLICY.createHTML!="function")throw i1('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof mt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw i1('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ve=mt.TRUSTED_TYPES_POLICY,ot=Ve.createHTML("")}else Ve===void 0&&(Ve=hN(re,a)),Ve!==null&&typeof ot=="string"&&(ot=Ve.createHTML(""));ei&&ei(mt),cm=mt}},af=Ns({},["mi","mo","mn","ms","mtext"]),ey=Ns({},["foreignobject","desc","title","annotation-xml"]),it=Ns({},["title","style","font","a","script"]),at=Ns({},mT);Ns(at,pg),Ns(at,nN);const Yt=Ns({},gT);Ns(Yt,oN);const zt=function(mt){let Sn=ze(mt);(!Sn||!Sn.tagName)&&(Sn={namespaceURI:sf,tagName:"template"});const Qn=oh(mt.tagName),Ir=oh(Sn.tagName);return j1[mt.namespaceURI]?mt.namespaceURI===lm?Sn.namespaceURI===md?Qn==="svg":Sn.namespaceURI===W1?Qn==="svg"&&(Ir==="annotation-xml"||af[Ir]):!!at[Qn]:mt.namespaceURI===W1?Sn.namespaceURI===md?Qn==="math":Sn.namespaceURI===lm?Qn==="math"&&ey[Ir]:!!Yt[Qn]:mt.namespaceURI===md?Sn.namespaceURI===lm&&!ey[Ir]||Sn.namespaceURI===W1&&!af[Ir]?!1:!Yt[Qn]&&(it[Qn]||!at[Qn]):!!(rf==="application/xhtml+xml"&&j1[mt.namespaceURI]):!1},Dn=function(mt){Yd(n.removed,{element:mt});try{mt.parentNode.removeChild(mt)}catch(Sn){mt.remove()}},Lo=function(mt,Sn){try{Yd(n.removed,{attribute:Sn.getAttributeNode(mt),from:Sn})}catch(Qn){Yd(n.removed,{attribute:null,from:Sn})}if(Sn.removeAttribute(mt),mt==="is"&&!cn[mt])if(nl||Vc)try{Dn(Sn)}catch(Qn){}else try{Sn.setAttribute(mt,"")}catch(Qn){}},fr=function(mt){let Sn,Qn;if(of)mt="<remove></remove>"+mt;else{const Uc=fT(mt,/^[\r\n\t ]+/);Qn=Uc&&Uc[0]}rf==="application/xhtml+xml"&&sf===md&&(mt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+mt+"</body></html>");const Ir=Ve?Ve.createHTML(mt):mt;if(sf===md)try{Sn=new W().parseFromString(Ir,rf)}catch(Uc){}if(!Sn||!Sn.documentElement){Sn=Nt.createDocument(sf,"template",null);try{Sn.documentElement.innerHTML=Yv?ot:Ir}catch(Uc){}}const Ea=Sn.body||Sn.documentElement;return mt&&Qn&&Ea.insertBefore(f.createTextNode(Qn),Ea.childNodes[0]||null),sf===md?vt.call(Sn,Mi?"html":"body")[0]:Mi?Sn.documentElement:Ea},Ua=function(mt){return Wt.call(mt.ownerDocument||mt,mt,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,null,!1)},ea=function(mt){return mt instanceof $&&(typeof mt.nodeName!="string"||typeof mt.textContent!="string"||typeof mt.removeChild!="function"||!(mt.attributes instanceof L)||typeof mt.removeAttribute!="function"||typeof mt.setAttribute!="function"||typeof mt.namespaceURI!="string"||typeof mt.insertBefore!="function"||typeof mt.hasChildNodes!="function")},um=function(mt){return typeof S=="object"?mt instanceof S:mt&&typeof mt=="object"&&typeof mt.nodeType=="number"&&typeof mt.nodeName=="string"},zc=function(mt,Sn,Qn){Mt[mt]&&Cz(Mt[mt],Ir=>{Ir.call(n,Sn,Qn,cm)})},JS=function(mt){let Sn;if(zc("beforeSanitizeElements",mt,null),ea(mt))return Dn(mt),!0;const Qn=fa(mt.nodeName);if(zc("uponSanitizeElement",mt,{tagName:Qn,allowedTags:Bs}),mt.hasChildNodes()&&!um(mt.firstElementChild)&&(!um(mt.content)||!um(mt.content.firstElementChild))&&Bc(/<[/\w]/g,mt.innerHTML)&&Bc(/<[/\w]/g,mt.textContent))return Dn(mt),!0;if(!Bs[Qn]||yn[Qn]){if(!yn[Qn]&&AD(Qn)&&(zo.tagNameCheck instanceof RegExp&&Bc(zo.tagNameCheck,Qn)||zo.tagNameCheck instanceof Function&&zo.tagNameCheck(Qn)))return!1;if(pr&&!uh[Qn]){const Ir=ze(mt)||mt.parentNode,Ea=Le(mt)||mt.childNodes;if(Ea&&Ir){const Uc=Ea.length;for(let Pi=Uc-1;Pi>=0;--Pi)Ir.insertBefore(te(Ea[Pi],!0),he(mt))}}return Dn(mt),!0}return mt instanceof E&&!zt(mt)||(Qn==="noscript"||Qn==="noembed"||Qn==="noframes")&&Bc(/<\/no(script|embed|frames)/i,mt.innerHTML)?(Dn(mt),!0):(Ps&&mt.nodeType===3&&(Sn=mt.textContent,Sn=bu(Sn,gn," "),Sn=bu(Sn,Mn," "),Sn=bu(Sn,ko," "),mt.textContent!==Sn&&(Yd(n.removed,{element:mt.cloneNode()}),mt.textContent=Sn)),zc("afterSanitizeElements",mt,null),!1)},ED=function(mt,Sn,Qn){if(hs&&(Sn==="id"||Sn==="name")&&(Qn in f||Qn in YS))return!1;if(!(uo&&!co[Sn]&&Bc(Ho,Sn))){if(!(Gt&&Bc(Ms,Sn))){if(!cn[Sn]||co[Sn]){if(!(AD(mt)&&(zo.tagNameCheck instanceof RegExp&&Bc(zo.tagNameCheck,mt)||zo.tagNameCheck instanceof Function&&zo.tagNameCheck(mt))&&(zo.attributeNameCheck instanceof RegExp&&Bc(zo.attributeNameCheck,Sn)||zo.attributeNameCheck instanceof Function&&zo.attributeNameCheck(Sn))||Sn==="is"&&zo.allowCustomizedBuiltInElements&&(zo.tagNameCheck instanceof RegExp&&Bc(zo.tagNameCheck,Qn)||zo.tagNameCheck instanceof Function&&zo.tagNameCheck(Qn))))return!1}else if(!Bg[Sn]){if(!Bc(Qi,bu(Qn,Tr,""))){if(!((Sn==="src"||Sn==="xlink:href"||Sn==="href")&&mt!=="script"&&tN(Qn,"data:")===0&&U1[mt])){if(!(Ko&&!Bc(qs,bu(Qn,Tr,"")))){if(Qn)return!1}}}}}}return!0},AD=function(mt){return mt.indexOf("-")>0},f$=function(mt){let Sn,Qn,Ir,Ea;zc("beforeSanitizeAttributes",mt,null);const{attributes:Uc}=mt;if(!Uc)return;const Pi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:cn};for(Ea=Uc.length;Ea--;){Sn=Uc[Ea];const{name:Wc,namespaceURI:TD}=Sn;Qn=Wc==="value"?Sn.value:Sz(Sn.value);const m$=Qn;if(Ir=fa(Wc),Pi.attrName=Ir,Pi.attrValue=Qn,Pi.keepAttr=!0,Pi.forceKeepAttr=void 0,zc("uponSanitizeAttribute",mt,Pi),Qn=Pi.attrValue,Pi.forceKeepAttr)continue;if(!Pi.keepAttr){Lo(Wc,mt);continue}if(!Is&&Bc(/\/>/i,Qn)){Lo(Wc,mt);continue}Ps&&(Qn=bu(Qn,gn," "),Qn=bu(Qn,Mn," "),Qn=bu(Qn,ko," "));const QS=fa(mt.nodeName);if(!ED(QS,Ir,Qn)){Lo(Wc,mt);continue}if(Ts&&(Ir==="id"||Ir==="name")&&(Lo(Wc,mt),Qn=Rr+Qn),Ve&&typeof re=="object"&&typeof re.getAttributeType=="function"&&!TD)switch(re.getAttributeType(QS,Ir)){case"TrustedHTML":{Qn=Ve.createHTML(Qn);break}case"TrustedScriptURL":{Qn=Ve.createScriptURL(Qn);break}}if(Qn!==m$)try{TD?mt.setAttributeNS(TD,Wc,Qn):mt.setAttribute(Wc,Qn)}catch(hte){Lo(Wc,mt)}}zc("afterSanitizeAttributes",mt,null)},h$=function $o(mt){let Sn;const Qn=Ua(mt);for(zc("beforeSanitizeShadowDOM",mt,null);Sn=Qn.nextNode();)zc("uponSanitizeShadowNode",Sn,null),!JS(Sn)&&(Sn.content instanceof g&&$o(Sn.content),f$(Sn));zc("afterSanitizeShadowDOM",mt,null)};return n.sanitize=function($o){let mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Sn,Qn,Ir,Ea;if(Yv=!$o,Yv&&($o="<!-->"),typeof $o!="string"&&!um($o))if(typeof $o.toString=="function"){if($o=$o.toString(),typeof $o!="string")throw i1("dirty is not a string, aborting")}else throw i1("toString is not a function");if(!n.isSupported)return $o;if(Eu||Qv(mt),n.removed=[],typeof $o=="string"&&(wl=!1),wl){if($o.nodeName){const Wc=fa($o.nodeName);if(!Bs[Wc]||yn[Wc])throw i1("root node is forbidden and cannot be sanitized in-place")}}else if($o instanceof S)Sn=fr("<!---->"),Qn=Sn.ownerDocument.importNode($o,!0),Qn.nodeType===1&&Qn.nodeName==="BODY"||Qn.nodeName==="HTML"?Sn=Qn:Sn.appendChild(Qn);else{if(!nl&&!Ps&&!Mi&&$o.indexOf("<")===-1)return Ve&&go?Ve.createHTML($o):$o;if(Sn=fr($o),!Sn)return nl?null:go?ot:""}Sn&&of&&Dn(Sn.firstChild);const Uc=Ua(wl?$o:Sn);for(;Ir=Uc.nextNode();)JS(Ir)||(Ir.content instanceof g&&h$(Ir.content),f$(Ir));if(wl)return $o;if(nl){if(Vc)for(Ea=sn.call(Sn.ownerDocument);Sn.firstChild;)Ea.appendChild(Sn.firstChild);else Ea=Sn;return(cn.shadowroot||cn.shadowrootmode)&&(Ea=dt.call(s,Ea,!0)),Ea}let Pi=Mi?Sn.outerHTML:Sn.innerHTML;return Mi&&Bs["!doctype"]&&Sn.ownerDocument&&Sn.ownerDocument.doctype&&Sn.ownerDocument.doctype.name&&Bc(Yx,Sn.ownerDocument.doctype.name)&&(Pi="<!DOCTYPE "+Sn.ownerDocument.doctype.name+`>
`+Pi),Ps&&(Pi=bu(Pi,gn," "),Pi=bu(Pi,Mn," "),Pi=bu(Pi,ko," ")),Ve&&go?Ve.createHTML(Pi):Pi},n.setConfig=function($o){Qv($o),Eu=!0},n.clearConfig=function(){cm=null,Eu=!1},n.isValidAttribute=function($o,mt,Sn){cm||Qv({});const Qn=fa($o),Ir=fa(mt);return ED(Qn,Ir,Sn)},n.addHook=function($o,mt){typeof mt=="function"&&(Mt[$o]=Mt[$o]||[],Yd(Mt[$o],mt))},n.removeHook=function($o){if(Mt[$o])return r1(Mt[$o])},n.removeHooks=function($o){Mt[$o]&&(Mt[$o]=[])},n.removeAllHooks=function(){Mt={}},n}var mN=Xb();const gN=Lt.each,Vh=Lt.trim,vT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],pN={ftp:21,http:80,https:443,mailto:25},Jb=["img","video"],bN=(e,n)=>le(e)?!e:le(n)?!Qe(Jb,n):!0,yT=e=>{try{return decodeURIComponent(e)}catch(n){return unescape(e)}},wT=(e,n,s)=>{const a=yT(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(a)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(a)?bN(e.allow_svg_data_urls,s)&&/^data:image\/svg\+xml/i.test(a):/^data:/i.test(a)};class Fc{static parseDataUri(n){let s;const a=decodeURIComponent(n).split(","),f=/data:([^;]+)/.exec(a[0]);return f&&(s=f[1]),{type:s,data:a[1]}}static isDomSafe(n,s,a={}){if(a.allow_script_urls)return!0;{const f=Wm.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!wT(a,f,s)}}static getDocumentBaseUrl(n){var s;let a;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?a=(s=n.href)!==null&&s!==void 0?s:"":a=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/")),a}constructor(n,s={}){this.path="",this.directory="",n=Vh(n),this.settings=s;const a=s.base_uri,f=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){f.source=n;return}const g=n.indexOf("//")===0;if(n.indexOf("/")===0&&!g&&(n=(a&&a.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const S=a?a.path:new Fc(document.location.href).directory;if((a==null?void 0:a.protocol)==="")n="//mce_host"+f.toAbsPath(S,n);else{const E=/([^#?]*)([#?]?.*)/.exec(n);E&&(n=(a&&a.protocol||"http")+"://mce_host"+f.toAbsPath(S,E[1])+E[2])}}n=n.replace(/@@/g,"(mce_at)");const y=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);y&&gN(vT,(S,E)=>{let P=y[E];P&&(P=P.replace(/\(mce_at\)/g,"@@")),f[S]=P}),a&&(f.protocol||(f.protocol=a.protocol),f.userInfo||(f.userInfo=a.userInfo),!f.port&&f.host==="mce_host"&&(f.port=a.port),(!f.host||f.host==="mce_host")&&(f.host=a.host),f.source=""),g&&(f.protocol="")}setPath(n){const s=/^(.*?)\/?(\w+)?$/.exec(n);s&&(this.path=s[0],this.directory=s[1],this.file=s[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const s=new Fc(n,{base_uri:this});if(s.host!=="mce_host"&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&s.protocol!=="")return s.getURI();const a=this.getURI(),f=s.getURI();if(a===f||a.charAt(a.length-1)==="/"&&a.substr(0,a.length-1)===f)return a;let g=this.toRelPath(this.path,s.path);return s.query&&(g+="?"+s.query),s.anchor&&(g+="#"+s.anchor),g}toAbsolute(n,s){const a=new Fc(n,{base_uri:this});return a.getURI(s&&this.isSameOrigin(a))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const s=this.protocol?pN[this.protocol]:null;if(s&&(this.port||s)==(n.port||s))return!0}return!1}toRelPath(n,s){let a=0,f="",g,y;const S=n.substring(0,n.lastIndexOf("/")).split("/"),E=s.split("/");if(S.length>=E.length){for(g=0,y=S.length;g<y;g++)if(g>=E.length||S[g]!==E[g]){a=g+1;break}}if(S.length<E.length){for(g=0,y=E.length;g<y;g++)if(g>=S.length||S[g]!==E[g]){a=g+1;break}}if(a===1)return s;for(g=0,y=S.length-(a-1);g<y;g++)f+="../";for(g=a-1,y=E.length;g<y;g++)g!==a-1?f+="/"+E[g]:f+=E[g];return f}toAbsPath(n,s){let a=0;const f=/\/$/.test(s)?"/":"",g=n.split("/"),y=s.split("/"),S=[];gN(g,$=>{$&&S.push($)});const E=[];for(let $=y.length-1;$>=0;$--)if(!(y[$].length===0||y[$]===".")){if(y[$]===".."){a++;continue}if(a>0){a--;continue}E.push(y[$])}const P=S.length-a;let L;return P<=0?L=Yn(E).join("/"):L=S.slice(0,P).join("/")+"/"+Yn(E).join("/"),L.indexOf("/")!==0&&(L="/"+L),f&&L.lastIndexOf("/")!==L.length-1&&(L+=f),L}getURI(n=!1){let s;return(!this.source||n)&&(s="",n||(this.protocol?s+=this.protocol+"://":s+="//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}}const Tz=Lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),xT="data-mce-type";let vN=0;const Xx=(e,n,s,a,f)=>{var g,y,S,E;const P=n.validate,L=s.getSpecialElements();e.nodeType===Sm&&!n.allow_conditional_comments&&/^\[if/i.test((g=e.nodeValue)!==null&&g!==void 0?g:"")&&(e.nodeValue=" "+e.nodeValue);const $=(y=f==null?void 0:f.tagName)!==null&&y!==void 0?y:e.nodeName.toLowerCase();if(a!=="html"&&s.isValid(a)){le(f)&&(f.allowedTags[$]=!0);return}if(e.nodeType!==cl||$==="body")return;const W=ye.fromDom(e),re=Ed(W,xT),fe=gi(W,"data-mce-bogus");if(!re&&Z(fe)){fe==="all"?ks(W):Yl(W);return}const te=s.getElementRule($);if(P&&!te){Bn(L,$)?ks(W):Yl(W);return}else le(f)&&(f.allowedTags[$]=!0);if(P&&te&&!re){if(de((S=te.attributesForced)!==null&&S!==void 0?S:[],he=>{Xs(W,he.name,he.value==="{$uid}"?`mce_${vN++}`:he.value)}),de((E=te.attributesDefault)!==null&&E!==void 0?E:[],he=>{Ed(W,he.name)||Xs(W,he.name,he.value==="{$uid}"?`mce_${vN++}`:he.value)}),te.attributesRequired&&!Bt(te.attributesRequired,he=>Ed(W,he))){Yl(W);return}if(te.removeEmptyAttrs&&Gr(W)){Yl(W);return}te.outputName&&te.outputName!==$&&Ju(W,te.outputName)}},Oz=(e,n,s,a,f)=>{const g=e.tagName.toLowerCase(),{attrName:y,attrValue:S}=f;f.keepAttr=CT(n,s,a,g,y,S),f.keepAttr?(f.allowedAttributes[y]=!0,wN(y,s)&&(f.attrValue=y),n.allow_svg_data_urls&&Vn(S,"data:image/svg+xml")&&(f.forceKeepAttr=!0)):yN(e,y)&&(f.forceKeepAttr=!0)},CT=(e,n,s,a,f,g)=>s!=="html"&&!Gu(a)?!0:!(f in Tz&&wT(e,g,a))&&(!e.validate||n.isValid(a,f)||Vn(f,"data-")||Vn(f,"aria-")),yN=(e,n)=>e.hasAttribute(xT)&&(n==="id"||n==="class"||n==="style"),wN=(e,n)=>e in n.getBoolAttrs(),_z=(e,n,s,a)=>{const{attributes:f}=e;for(let g=f.length-1;g>=0;g--){const y=f[g],S=y.name,E=y.value;!CT(n,s,a,e.tagName.toLowerCase(),S,E)&&!yN(e,S)?e.removeAttribute(S):wN(S,s)&&e.setAttribute(S,S)}},Dz=(e,n,s)=>{const a=mN();return a.addHook("uponSanitizeElement",(f,g)=>{Xx(f,e,n,s.track(f),g)}),a.addHook("uponSanitizeAttribute",(f,g)=>{Oz(f,e,n,s.current(),g)}),a},Mz=(e,n)=>{const a=ie({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return a.PARSER_MEDIA_TYPE=n,e.allow_script_urls?a.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(a.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),a},Pz=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(a=>`xlink:${a}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};return mN().sanitize(e,s),e.innerHTML},Rz=(e,n)=>{const s=Xy();if(e.sanitize){const a=Dz(e,n,s);return{sanitizeHtmlElement:(g,y)=>{a.sanitize(g,Mz(e,y)),a.removed=[],s.reset()},sanitizeNamespaceElement:Pz}}else return{sanitizeHtmlElement:(g,y)=>{const S=document.createNodeIterator(g,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let E;for(;E=S.nextNode();){const P=s.track(E);Xx(E,e,n,P),xn(E)&&_z(E,e,n,P)}s.reset()},sanitizeNamespaceElement:ge}},xN=Lt.makeMap,CN=Lt.extend,Qb=(e,n,s,a)=>{const f=e.name,g=f in s&&f!=="title"&&f!=="textarea"&&f!=="noscript",y=n.childNodes;for(let S=0,E=y.length;S<E;S++){const P=y[S],L=new $a(P.nodeName.toLowerCase(),P.nodeType);if(xn(P)){const $=P.attributes;for(let W=0,re=$.length;W<re;W++){const fe=$[W];L.attr(fe.name,fe.value)}Gu(L.name)&&(a(P),L.value=P.innerHTML)}else Vt(P)?(L.value=P.data,g&&(L.raw=!0)):(Of(P)||Q6(P)||T0(P))&&(L.value=P.data);Gu(L.name)||Qb(L,P,s,a),e.append(L)}},Va=(e,n,s)=>{const a=[];for(let f=e,g=f;f;g=f,f=f.walk()){const y=f;de(n,S=>S(y)),$e(y.parent)&&y!==e?f=g:a.push(y)}for(let f=a.length-1;f>=0;f--){const g=a[f];de(s,y=>y(g))}},Nz=(e,n,s,a)=>{const f=s.validate,g=n.getNonEmptyElements(),y=n.getWhitespaceElements(),S=CN(xN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),E=zM(n),P=/[ \t\r\n]+/g,L=/^[ \t\r\n]+/,$=/[ \t\r\n]+$/,W=ze=>{let Ve=ze.parent;for(;le(Ve);){if(Ve.name in y)return!0;Ve=Ve.parent}return!1},re=ze=>{let Ve=ze;for(;le(Ve);){if(Ve.name in E)return Gp(n,g,y,Ve);Ve=Ve.parent}return!1},fe=ze=>ze.name in S||Rf(n,ze)||Gu(ze.name)&&ze.parent===e,te=(ze,Ve)=>{const ot=Ve?ze.prev:ze.next;return le(ot)||$e(ze.parent)?!1:fe(ze.parent)&&(ze.parent!==e||a.isRootContent===!0)};return[ze=>{var Ve;if(ze.type===3&&!W(ze)){let ot=(Ve=ze.value)!==null&&Ve!==void 0?Ve:"";ot=ot.replace(P," "),(PA(ze.prev,fe)||te(ze,!0))&&(ot=ot.replace(L,"")),ot.length===0?ze.remove():ze.value=ot}},ze=>{var Ve;if(ze.type===1){const ot=n.getElementRule(ze.name);if(f&&ot){const Nt=Gp(n,g,y,ze);ot.paddInEmptyBlock&&Nt&&re(ze)?Tx(s,a,fe,ze):ot.removeEmpty&&Nt?fe(ze)?ze.remove():ze.unwrap():ot.paddEmpty&&(Nt||oR(ze))&&Tx(s,a,fe,ze)}}else if(ze.type===3&&!W(ze)){let ot=(Ve=ze.value)!==null&&Ve!==void 0?Ve:"";(ze.next&&fe(ze.next)||te(ze,!1))&&(ot=ot.replace($,"")),ot.length===0?ze.remove():ze.value=ot}}]},Jx=(e,n)=>{var s;const a=(s=n.forced_root_block)!==null&&s!==void 0?s:e.forced_root_block;return a===!1?"":a===!0?"p":a},yu=(e={},n=If())=>{const s=GR(),a=GR(),f=ie({validate:!0,root_name:"body",sanitize:!0},e),g=new DOMParser,y=Rz(f,n),S=(Ve,ot,Nt="html")=>{const Wt=Nt==="xhtml"?"application/xhtml+xml":"text/html",sn=Bn(n.getSpecialElements(),ot.toLowerCase()),vt=sn?`<${ot}>${Ve}</${ot}>`:Ve,dt=Nt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${vt}</body></html>`:`<body>${vt}</body>`,Mt=g.parseFromString(dt,Wt).body;return y.sanitizeHtmlElement(Mt,Wt),sn?Mt.firstChild:Mt},E=s.addFilter,P=s.getFilters,L=s.removeFilter,$=a.addFilter,W=a.getFilters,re=a.removeFilter,fe=(Ve,ot)=>{Dx(n,Ve)&&ot.push(Ve)},te=(Ve,ot)=>{const Nt=Z(ot.attr(xT)),Wt=ot.type===1&&!Bn(Ve,ot.name)&&!Rf(n,ot)&&!Gu(ot.name);return ot.type===3||Wt&&!Nt},he=(Ve,ot)=>{const Nt=CN(xN("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Wt=/^[ \t\r\n]+/,sn=/[ \t\r\n]+$/;let vt=Ve.firstChild,dt=null;const Mt=gn=>{var Mn,ko;gn&&(vt=gn.firstChild,vt&&vt.type===3&&(vt.value=(Mn=vt.value)===null||Mn===void 0?void 0:Mn.replace(Wt,"")),vt=gn.lastChild,vt&&vt.type===3&&(vt.value=(ko=vt.value)===null||ko===void 0?void 0:ko.replace(sn,"")))};if(n.isValidChild(Ve.name,ot.toLowerCase())){for(;vt;){const gn=vt.next;te(Nt,vt)?(dt||(dt=new $a(ot,1),dt.attr(f.forced_root_block_attrs),Ve.insert(dt,vt)),dt.append(vt)):(Mt(dt),dt=null),vt=gn}Mt(dt)}},ze={schema:n,addAttributeFilter:$,getAttributeFilters:W,removeAttributeFilter:re,addNodeFilter:E,getNodeFilters:P,removeNodeFilter:L,parse:(Ve,ot={})=>{var Nt;const Wt=f.validate,sn=(Nt=ot.context)!==null&&Nt!==void 0?Nt:f.root_name,vt=S(Ve,sn,ot.format);I0(n,vt);const dt=new $a(sn,11);Qb(dt,vt,n.getSpecialElements(),y.sanitizeNamespaceElement),vt.innerHTML="";const[Mt,gn]=Nz(dt,n,f,ot),Mn=[],ko=Wt?Tr=>fe(Tr,Mn):ge,Ho={nodes:{},attributes:{}},Ms=Tr=>OA(P(),W(),Tr,Ho);if(Va(dt,[Mt,Ms],[gn,ko]),Mn.reverse(),Wt&&Mn.length>0)if(ot.context){const{pass:Tr,fail:Qi}=Fe(Mn,Bs=>Bs.parent===dt);_x(Qi,n,dt,Ms),ot.invalid=Tr.length>0}else _x(Mn,n,dt,Ms);const qs=Jx(f,ot);return qs&&(dt.name==="body"||ot.isRootContent)&&he(dt,qs),ot.invalid||_A(Ho,ot),dt}};return eN(ze,f),lT(ze,f,n),ze},SN=e=>Nx(e)?Ih({validate:!1}).serialize(e):e,ml=(e,n,s)=>{const a=SN(e),f=n(a);if(f.isDefaultPrevented())return f;if(Nx(e))if(f.content!==a){const g=yu(ie({validate:!1,forced_root_block:!1},s)).parse(f.content,{context:e.name});return Ot(ie({},f),{content:g})}else return Ot(ie({},f),{content:e});else return f},zh=(e,n)=>{if(n.no_events)return fl.value(n);{const s=DH(e,n);return s.isDefaultPrevented()?fl.error(qo(e,ie({content:""},s)).content):fl.value(s)}},ST=(e,n,s)=>s.no_events?n:ml(n,f=>qo(e,Ot(ie({},s),{content:f})),{sanitize:kp(e),sandbox_iframes:Rw(e)}).content,kT=(e,n)=>{if(n.no_events)return fl.value(n);{const s=ml(n.content,a=>aee(e,Ot(ie({},n),{content:a})),{sanitize:kp(e),sandbox_iframes:Rw(e)});return s.isDefaultPrevented()?(S4(e,s),fl.error(void 0)):fl.value(s)}},Qx=(e,n,s)=>{s.no_events||S4(e,Ot(ie({},s),{content:n}))},ET=(e,n,s)=>({element:e,width:n,rows:s}),AT=(e,n)=>({element:e,cells:n}),ev=(e,n)=>({x:e,y:n}),eC=(e,n)=>Da(e,n).bind(Wi).getOr(1),Bz=(e,n,s,a,f)=>{const g=eC(f,"rowspan"),y=eC(f,"colspan"),S=e.rows;for(let E=s;E<s+g;E++){S[E]||(S[E]=AT(mw(a),[]));for(let P=n;P<n+y;P++){const L=S[E].cells;L[P]=E===s&&P===n?f:ic(f)}}},kN=(e,n,s)=>{const a=e.rows;return!!(a[s]?a[s].cells:[])[n]},Fz=(e,n,s)=>{for(;kN(e,n,s);)n++;return n},tC=e=>ve(e,(n,s)=>s.cells.length>n?s.cells.length:n,0),nC=(e,n)=>{const s=e.rows;for(let a=0;a<s.length;a++){const f=s[a].cells;for(let g=0;g<f.length;g++)if(ws(f[g],n))return V.some(ev(g,a))}return V.none()},EN=(e,n,s,a,f)=>{const g=[],y=e.rows;for(let S=s;S<=f;S++){const E=y[S].cells,P=n<a?E.slice(n,a+1):E.slice(a,n+1);g.push(AT(y[S].element,P))}return g},Iz=(e,n,s)=>{const a=n.x,f=n.y,g=s.x,y=s.y,S=f<y?EN(e,a,f,g,y):EN(e,a,y,g,f);return ET(e.element,tC(S),S)},Xd=(e,n)=>{const s=ic(e.element),a=ye.fromTag("tbody");return $s(a,n),Yr(s,a),s},TT=e=>nt(e.rows,n=>{const s=nt(n.cells,f=>{const g=mw(f);return Nr(g,"colspan"),Nr(g,"rowspan"),g}),a=ic(n.element);return $s(a,s),a}),Lz=e=>{const n=ET(ic(e),0,[]);return de(va(e,"tr"),(s,a)=>{de(va(s,"td,th"),(f,g)=>{Bz(n,Fz(n,g,a),a,s,f)})}),ET(n.element,tC(n.rows),n.rows)},oC=e=>Xd(e,TT(e)),OT=(e,n,s)=>nC(e,n).bind(a=>nC(e,s).map(f=>Iz(e,a,f))),AN=e=>st(e,n=>ts(n)==="ul"||ts(n)==="ol"),TN=(e,n)=>st(e,s=>ts(s)==="li"&&bE(s,n)).fold(me([]),s=>AN(e).map(a=>{const f=ye.fromTag(ts(a)),g=di(S0(a),(y,S)=>Vn(S,"list-style"));return xh(f,g),[ye.fromTag("li"),f]}).getOr([])),ON=(e,n)=>{const s=ve(n,(a,f)=>(Yr(f,a),f),e);return n.length>0?FE([s]):s},$z=e=>Bm(e)?sa(e).filter(Tl).fold(me([]),n=>[e,n]):Tl(e)?[e]:[],Hz=(e,n,s)=>{const a=ye.fromDom(n.commonAncestorContainer),f=Ud(a,e),g=Ne(f,E=>s.isWrapper(ts(E))),y=TN(f,n),S=g.concat(y.length?y:$z(a));return nt(S,ic)},_N=()=>FE([]),Vz=(e,n,s)=>ON(ye.fromDom(n.cloneContents()),Hz(e,n,s)),zz=(e,n)=>Ef(n,"table",Be(ws,e)),DN=(e,n)=>zz(e,n[0]).bind(s=>{const a=n[0],f=n[n.length-1],g=Lz(s);return OT(g,a,f).map(y=>FE([oC(y)]))}).getOrThunk(_N),Uz=(e,n,s)=>n.length>0&&n[0].collapsed?_N():Vz(e,n[0],s),Wz=(e,n,s)=>{const a=bH(n,e);return a.length>0?DN(e,a):Uz(e,n,s)},sC=(e,n)=>n>=0&&n<e.length&&db(e.charAt(n)),_T=e=>nc(e.innerText),DT=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),MT=e=>V.from(e.selection.getRng()).map(n=>{var s;const a=V.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),f=e.getBody(),g=DT(a),y=ye.fromDom(n.cloneContents());Eo(y),tA(y);const S=e.dom.add(f,g,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},y.dom),E=_T(S),P=nc((s=S.textContent)!==null&&s!==void 0?s:"");if(e.dom.remove(S),sC(P,0)||sC(P,P.length-1)){const L=a.getOr(f),$=_T(L),W=$.indexOf(E);if(W===-1)return E;{const re=sC($,W-1),fe=sC($,W+E.length);return(re?" ":"")+E+(fe?" ":"")}}else return E}).getOr(""),MN=(e,n)=>{const s=e.selection.getRng(),a=e.dom.create("body"),f=e.selection.getSel(),g=eA(e,t4(f)),y=n.contextual?Wz(ye.fromDom(e.getBody()),g,e.schema).dom:s.cloneContents();return y&&a.appendChild(y),e.selection.serializer.serialize(a,n)},PT=(e,n)=>{if(n.format==="text")return MT(e);{const s=MN(e,n);return n.format==="tree"?s:e.selection.isCollapsed()?"":s}},PN=(e,n)=>Ot(ie({},e),{format:n,get:!0,selection:!0,getInner:!0}),RN=(e,n,s={})=>{const a=PN(s,n);return zh(e,a).fold(lt,f=>{const g=PT(e,f);return ST(e,g,f)})},tv=0,RT=1,NT=2,NN=(e,n)=>{const s=e.length+n.length+2,a=new Array(s),f=new Array(s),g=(L,$,W)=>({start:L,end:$,diag:W}),y=(L,$,W,re,fe)=>{const te=E(L,$,W,re);if(te===null||te.start===$&&te.diag===$-re||te.end===L&&te.diag===L-W){let he=L,Le=W;for(;he<$||Le<re;)he<$&&Le<re&&e[he]===n[Le]?(fe.push([tv,e[he]]),++he,++Le):$-L>re-W?(fe.push([NT,e[he]]),++he):(fe.push([RT,n[Le]]),++Le)}else{y(L,te.start,W,te.start-te.diag,fe);for(let he=te.start;he<te.end;++he)fe.push([tv,e[he]]);y(te.end,$,te.end-te.diag,re,fe)}},S=(L,$,W,re)=>{let fe=L;for(;fe-$<re&&fe<W&&e[fe]===n[fe-$];)++fe;return g(L,fe,$)},E=(L,$,W,re)=>{const fe=$-L,te=re-W;if(fe===0||te===0)return null;const he=fe-te,Le=te+fe,ze=(Le%2===0?Le:Le+1)/2;a[1+ze]=L,f[1+ze]=$+1;let Ve,ot,Nt,Wt,sn;for(Ve=0;Ve<=ze;++Ve){for(ot=-Ve;ot<=Ve;ot+=2){for(Nt=ot+ze,ot===-Ve||ot!==Ve&&a[Nt-1]<a[Nt+1]?a[Nt]=a[Nt+1]:a[Nt]=a[Nt-1]+1,Wt=a[Nt],sn=Wt-L+W-ot;Wt<$&&sn<re&&e[Wt]===n[sn];)a[Nt]=++Wt,++sn;if(he%2!==0&&he-Ve<=ot&&ot<=he+Ve&&f[Nt-he]<=a[Nt])return S(f[Nt-he],ot+L-W,$,re)}for(ot=he-Ve;ot<=he+Ve;ot+=2){for(Nt=ot+ze-he,ot===he-Ve||ot!==he+Ve&&f[Nt+1]<=f[Nt-1]?f[Nt]=f[Nt+1]-1:f[Nt]=f[Nt-1],Wt=f[Nt]-1,sn=Wt-L+W-ot;Wt>=L&&sn>=W&&e[Wt]===n[sn];)f[Nt]=Wt--,sn--;if(he%2===0&&-Ve<=ot&&ot<=Ve&&f[Nt]<=a[Nt+he])return S(f[Nt],ot+L-W,$,re)}}return null},P=[];return y(0,e.length,0,n.length,P),P},BN=e=>xn(e)?e.outerHTML:Vt(e)?Wm.encodeRaw(e.data,!1):Of(e)?"<!--"+e.data+"-->":"",BT=e=>{let n;const s=document.createElement("div"),a=document.createDocumentFragment();for(e&&(s.innerHTML=e);n=s.firstChild;)a.appendChild(n);return a},jz=(e,n,s)=>{const a=BT(n);if(e.hasChildNodes()&&s<e.childNodes.length){const f=e.childNodes[s];e.insertBefore(a,f)}else e.appendChild(a)},rC=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const s=e.childNodes[n];e.removeChild(s)}},Zz=(e,n)=>{let s=0;de(e,a=>{a[0]===tv?s++:a[0]===RT?(jz(n,a[1],s),s++):a[0]===NT&&rC(n,s)})},qz=(e,n)=>Ne(nt(so(e.childNodes),O(nc,BN)),s=>s.length>0),Gz=(e,n)=>{const s=nt(so(n.childNodes),BN);return Zz(NN(s,e),n),n},FN=xt(()=>document.implementation.createHTMLDocument("undo")),IN=e=>e.querySelector("iframe")!==null,Kz=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),Yz=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),iC=e=>{const n=e.serializer.getTempAttrs(),s=gP(e.getBody(),n);return IN(s)?Kz(qz(s)):Yz(nc(s.innerHTML))},FT=(e,n,s)=>{const a=s?n.beforeBookmark:n.bookmark;n.type==="fragmented"?Gz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:le(a)&&J3(a)?!a.isFakeCaret:!0}),a&&(e.selection.moveToBookmark(a),e.selection.scrollIntoView())},IT=e=>e.type==="fragmented"?e.fragments.join(""):e.content,LT=e=>{const n=ye.fromTag("body",FN());return np(n,IT(e)),de(va(n,"*[data-mce-bogus]"),Yl),tp(n)},Cee=(e,n)=>IT(e)===IT(n),Xz=(e,n)=>LT(e)===LT(n),$T=(e,n)=>!e||!n?!1:Cee(e,n)?!0:Xz(e,n),HT=e=>e.get()===0,aC=(e,n,s)=>{HT(s)&&(e.typing=n)},LN=(e,n)=>{e.typing&&(aC(e,!1,n),e.add())},Jz=e=>{e.typing&&(e.typing=!1,e.add())},Qz=(e,n,s)=>{HT(n)&&s.set(Bk(e.selection))},$N=(e,n,s,a,f,g,y)=>{const S=iC(e),E=Lt.extend(g||{},S);if(!HT(a)||e.removed)return null;const P=n.data[s.get()];if(e.dispatch("BeforeAddUndo",{level:E,lastLevel:P,originalEvent:y}).isDefaultPrevented()||P&&$T(P,E))return null;n.data[s.get()]&&f.get().each(W=>{n.data[s.get()].beforeBookmark=W});const L=Ow(e);if(L&&n.data.length>L){for(let W=0;W<n.data.length-1;W++)n.data[W]=n.data[W+1];n.data.length--,s.set(n.data.length)}E.bookmark=Bk(e.selection),s.get()<n.data.length-1&&(n.data.length=s.get()+1),n.data.push(E),s.set(n.data.length-1);const $={level:E,lastLevel:P,originalEvent:y};return s.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",$),e.dispatch("change",$)):e.dispatch("AddUndo",$),E},eU=(e,n,s)=>{n.data=[],s.set(0),n.typing=!1,e.dispatch("ClearUndos")},tU=(e,n,s,a,f)=>{if(n.transact(a)){const g=n.data[s.get()].bookmark,y=n.data[s.get()-1];FT(e,y,!0),n.transact(f)&&(n.data[s.get()-1].beforeBookmark=g)}},nU=(e,n,s)=>{let a;return n.get()<s.length-1&&(n.set(n.get()+1),a=s[n.get()],FT(e,a,!1),e.setDirty(!0),e.dispatch("Redo",{level:a})),a},oU=(e,n,s,a)=>{let f;return n.typing&&(n.add(),n.typing=!1,aC(n,!1,s)),a.get()>0&&(a.set(a.get()-1),f=n.data[a.get()],FT(e,f,!0),e.setDirty(!0),e.dispatch("Undo",{level:f})),f},sU=e=>{e.clear(),e.add()},See=(e,n,s)=>s.get()>0||n.typing&&n.data[0]&&!$T(iC(e),n.data[0]),kee=(e,n)=>n.get()<e.data.length-1&&!e.typing,rU=(e,n,s)=>(LN(e,n),e.beforeChange(),e.ignore(s),e.add()),iU=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},Eee=(e,n)=>{const s=e.dom,a=le(n)?n:e.getBody();de(s.select("table,a",a),f=>{switch(f.nodeName){case"TABLE":const g=k7(e),y=s.getAttrib(f,"border");(!y||y==="0")&&e.hasVisual?s.addClass(f,g):s.removeClass(f,g);break;case"A":if(!s.getAttrib(f,"href")){const S=s.getAttrib(f,"name")||f.id,E=O3(e);S&&e.hasVisual?s.addClass(f,E):s.removeClass(f,E)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},HN=e=>({init:{bindEvents:ge},undoManager:{beforeChange:(n,s)=>Qz(e,n,s),add:(n,s,a,f,g,y)=>$N(e,n,s,a,f,g,y),undo:(n,s,a)=>oU(e,n,s,a),redo:(n,s)=>nU(e,n,s),clear:(n,s)=>eU(e,n,s),reset:n=>sU(n),hasUndo:(n,s)=>See(e,n,s),hasRedo:(n,s)=>kee(n,s),transact:(n,s,a)=>rU(n,s,a),ignore:(n,s)=>iU(n,s),extra:(n,s,a,f)=>tU(e,n,s,a,f)},formatter:{match:(n,s,a,f)=>Bx(e,n,s,a,f),matchAll:(n,s)=>ZV(e,n,s),matchNode:(n,s,a,f)=>jd(e,n,s,a,f),canApply:n=>wR(e,n),closest:n=>hg(e,n),apply:(n,s,a)=>UR(e,n,s,a),remove:(n,s,a,f)=>$R(e,n,s,a,f),toggle:(n,s,a)=>dz(e,n,s,a),formatChanged:(n,s,a,f,g)=>uz(e,n,s,a,f,g)},editor:{getContent:n=>mee(e,n),setContent:(n,s)=>bR(e,n,s),insertContent:(n,s)=>pR(e,n,s),addVisual:n=>Eee(e,n)},selection:{getContent:(n,s)=>RN(e,n,s)},autocompleter:{addDecoration:n=>N9(e,n),removeDecoration:()=>F9(e,ye.fromDom(e.getBody()))},raw:{getModel:()=>V.none()}}),Pr=e=>{const n=P=>ce(P)?P:{},{init:s,undoManager:a,formatter:f,editor:g,selection:y,autocompleter:S,raw:E}=e;return{init:{bindEvents:s.bindEvents},undoManager:{beforeChange:a.beforeChange,add:a.add,undo:a.undo,redo:a.redo,clear:a.clear,reset:a.reset,hasUndo:a.hasUndo,hasRedo:a.hasRedo,transact:(P,L,$)=>a.transact($),ignore:(P,L)=>a.ignore(L),extra:(P,L,$,W)=>a.extra($,W)},formatter:{match:(P,L,$,W)=>f.match(P,n(L),W),matchAll:f.matchAll,matchNode:f.matchNode,canApply:P=>f.canApply(P),closest:P=>f.closest(P),apply:(P,L,$)=>f.apply(P,n(L)),remove:(P,L,$,W)=>f.remove(P,n(L)),toggle:(P,L,$)=>f.toggle(P,n(L)),formatChanged:(P,L,$,W,re)=>f.formatChanged(L,$,W,re)},editor:{getContent:P=>g.getContent(P),setContent:(P,L)=>({content:g.setContent(P,L),html:""}),insertContent:(P,L)=>(g.insertContent(P),""),addVisual:g.addVisual},selection:{getContent:(P,L)=>y.getContent(L)},autocompleter:{addDecoration:S.addDecoration,removeDecoration:S.removeDecoration},raw:{getModel:()=>V.some(E.getRawModel())}}},VT=()=>{const e=me(null),n=me("");return{init:{bindEvents:ge},undoManager:{beforeChange:ge,add:e,undo:e,redo:e,clear:ge,reset:ge,hasUndo:ue,hasRedo:ue,transact:e,ignore:ge,extra:ge},formatter:{match:ue,matchAll:me([]),matchNode:me(void 0),canApply:ue,closest:n,apply:ge,remove:ge,toggle:ge,formatChanged:me({unbind:ge})},editor:{getContent:n,setContent:me({content:"",html:""}),insertContent:me(""),addVisual:ge},selection:{getContent:n},autocompleter:{addDecoration:ge,removeDecoration:ge},raw:{getModel:me(V.none())}}},sh=e=>Bn(e.plugins,"rtc"),aU=e=>us(e.plugins,"rtc").bind(n=>V.from(n.setup)),lU=e=>{const n=e;return aU(e).fold(()=>(n.rtcInstance=HN(e),V.none()),s=>(n.rtcInstance=VT(),V.some(()=>s().then(a=>(n.rtcInstance=Pr(a),a.rtc.isRemote)))))},Uh=e=>e.rtcInstance?e.rtcInstance:HN(e),wi=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},Aee=(e,n,s)=>{wi(e).undoManager.beforeChange(n,s)},ua=(e,n,s,a,f,g,y)=>wi(e).undoManager.add(n,s,a,f,g,y),VN=(e,n,s,a)=>wi(e).undoManager.undo(n,s,a),zN=(e,n,s)=>wi(e).undoManager.redo(n,s),UN=(e,n,s)=>{wi(e).undoManager.clear(n,s)},cU=(e,n)=>{wi(e).undoManager.reset(n)},uU=(e,n,s)=>wi(e).undoManager.hasUndo(n,s),lC=(e,n,s)=>wi(e).undoManager.hasRedo(n,s),dU=(e,n,s,a)=>wi(e).undoManager.transact(n,s,a),zT=(e,n,s)=>{wi(e).undoManager.ignore(n,s)},fU=(e,n,s,a,f)=>{wi(e).undoManager.extra(n,s,a,f)},WN=(e,n,s,a,f)=>wi(e).formatter.match(n,s,a,f),jN=(e,n,s)=>wi(e).formatter.matchAll(n,s),UT=(e,n,s,a,f)=>wi(e).formatter.matchNode(n,s,a,f),ZN=(e,n)=>wi(e).formatter.canApply(n),WT=(e,n)=>wi(e).formatter.closest(n),hU=(e,n,s,a)=>{wi(e).formatter.apply(n,s,a)},mU=(e,n,s,a,f)=>{wi(e).formatter.remove(n,s,a,f)},gU=(e,n,s,a)=>{wi(e).formatter.toggle(n,s,a)},Ic=(e,n,s,a,f,g)=>wi(e).formatter.formatChanged(n,s,a,f,g),pU=(e,n)=>Uh(e).editor.getContent(n),bU=(e,n,s)=>Uh(e).editor.setContent(n,s),vU=(e,n,s)=>Uh(e).editor.insertContent(n,s),yU=(e,n,s)=>wi(e).selection.getContent(n,s),wU=(e,n)=>wi(e).editor.addVisual(n),jT=e=>wi(e).init.bindEvents(),xU=(e,n)=>wi(e).autocompleter.addDecoration(n),CU=e=>wi(e).autocompleter.removeDecoration(),SU=(e,n={})=>{const s=n.format?n.format:"html";return yU(e,s,n)},nv=e=>e.dom.length===0?(ks(e),V.none()):V.some(e),kU=(e,n)=>e.filter(s=>eg.isBookmarkNode(s.dom)).bind(n?su:_c),EU=(e,n,s,a,f)=>{const g=e.dom,y=n.dom,S=a?g.length:y.length;a?(Di(g,y,f,!1,!a),s.setStart(y,S)):(Di(y,g,f,!1,!a),s.setEnd(y,S))},qN=(e,n,s)=>{sa(e).each(a=>{const f=e.dom;n&&Up(a,bt(f,0),s)?lg(f,0,s):!n&&Wp(a,bt(f,f.length),s)&&LP(f,f.length,s)})},cC=(e,n,s,a,f)=>{e.bind(g=>((a?LP:lg)(g.dom,a?g.dom.length:0,f),n.filter(Oo).map(S=>EU(g,S,s,a,f)))).orThunk(()=>kU(n,a).or(n).filter(Oo).map(y=>qN(y,a,f)))},AU=(e,n,s)=>{const a=V.from(n.firstChild).map(ye.fromDom),f=V.from(n.lastChild).map(ye.fromDom);e.deleteContents(),e.insertNode(n);const g=a.bind(_c).filter(Oo).bind(nv),y=f.bind(su).filter(Oo).bind(nv);cC(g,a,e,!0,s),cC(y,f,e,!1,s),e.collapse(!1)},TU=(e,n)=>Ot(ie({format:"html"},e),{set:!0,selection:!0,content:n}),Tee=(e,n)=>{if(n.format!=="raw"){const s=e.selection.getRng(),a=e.dom.getParent(s.commonAncestorContainer,e.dom.isBlock),f=a?{context:a.nodeName.toLowerCase()}:{},g=e.parser.parse(n.content,ie(ie({forced_root_block:!1},f),n));return Ih({validate:!1},e.schema).serialize(g)}else return n.content},OU=(e,n,s={})=>{const a=TU(s,n);kT(e,a).each(f=>{const g=Tee(e,f),y=e.selection.getRng();AU(y,y.createContextualFragment(g),e.schema),e.selection.setRng(y),Sb(e,y),Qx(e,g,f)})},GN=(e,n,s)=>{if(Bn(e,n)){const a=Ne(e[n],f=>f!==s);a.length===0?delete e[n]:e[n]=a}};var KN=(e,n)=>{let s,a;const f=(S,E)=>st(E,P=>e.is(P,S)),g=S=>e.getParents(S,void 0,e.getRoot()),y=()=>{s={},a={},n.on("NodeChange",S=>{const E=S.element,P=g(E),L={};$t(s,($,W)=>{f(W,P).each(re=>{a[W]||(de($,fe=>{fe(!0,{node:re,selector:W,parents:P})}),a[W]=$),L[W]=$})}),$t(a,($,W)=>{L[W]||(delete a[W],de($,re=>{re(!1,{node:E,selector:W,parents:P})}))})})};return{selectorChangedWithUnbind:(S,E)=>(s||y(),s[S]||(s[S]=[]),s[S].push(E),f(S,g(n.selection.getStart())).each(()=>{a[S]=s[S]}),{unbind:()=>{GN(s,S,E),GN(a,S,E)}})}};const ZT=e=>!!(e&&e.ownerDocument)&&Fu(ye.fromDom(e.ownerDocument),ye.fromDom(e)),_U=e=>e?ZT(e.startContainer)&&ZT(e.endContainer):!1,Wh=(e,n,s,a)=>{let f,g;const{selectorChangedWithUnbind:y}=KN(e,a),S=(Xt,cn)=>{const as=e.createRng();le(Xt)&&le(cn)?(as.setStart(Xt,cn),as.setEnd(Xt,cn),ot(as),Le(!1)):(vE(e,as,a.getBody(),!0),ot(as))},E=Xt=>SU(a,Xt),P=(Xt,cn)=>OU(a,Xt,cn),L=Xt=>JE(a.getBody(),Ve(),Xt),$=Xt=>rP(a.getBody(),Ve(),Xt),W=(Xt,cn)=>Qi.getBookmark(Xt,cn),re=Xt=>Qi.moveToBookmark(Xt),fe=(Xt,cn)=>(A9(e,Xt,cn).each(ot),Xt),te=()=>{const Xt=Ve(),cn=ze();return!Xt||Xt.item?!1:Xt.compareEndPoints?Xt.compareEndPoints("StartToEnd",Xt)===0:!cn||Xt.collapsed},he=()=>{const Xt=Ve(),cn=a.getBody().querySelectorAll('[data-mce-selected="1"]');return cn.length>0?ao(cn,as=>e.isEditable(as.parentElement)):oP(e,Xt)},Le=Xt=>{const cn=Ve();cn.collapse(!!Xt),ot(cn)},ze=()=>n.getSelection?n.getSelection():n.document.selection,Ve=()=>{let Xt;const cn=(zo,yn,co)=>{try{return yn.compareBoundaryPoints(zo,co)}catch(Gt){return-1}},as=n.document;if(le(a.bookmark)&&!Fh(a)){const zo=GE(a);if(zo.isSome())return zo.map(yn=>eA(a,[yn])[0]).getOr(as.createRange())}try{const zo=ze();zo&&!Vu(zo.anchorNode)&&(zo.rangeCount>0?Xt=zo.getRangeAt(0):Xt=as.createRange(),Xt=eA(a,[Xt])[0])}catch(zo){}if(Xt||(Xt=as.createRange()),O0(Xt.startContainer)&&Xt.collapsed){const zo=e.getRoot();Xt.setStart(zo,0),Xt.setEnd(zo,0)}return f&&g&&(cn(Xt.START_TO_START,Xt,f)===0&&cn(Xt.END_TO_END,Xt,f)===0?Xt=g:(f=null,g=null)),Xt},ot=(Xt,cn)=>{if(!_U(Xt))return;const as=ze();if(Xt=a.dispatch("SetSelectionRange",{range:Xt,forward:cn}).range,as){g=Xt;try{as.removeAllRanges(),as.addRange(Xt)}catch(yn){}cn===!1&&as.extend&&(as.collapse(Xt.endContainer,Xt.endOffset),as.extend(Xt.startContainer,Xt.startOffset)),f=as.rangeCount>0?as.getRangeAt(0):null}if(!Xt.collapsed&&Xt.startContainer===Xt.endContainer&&(as!=null&&as.setBaseAndExtent)&&Xt.endOffset-Xt.startOffset<2&&Xt.startContainer.hasChildNodes()){const yn=Xt.startContainer.childNodes[Xt.startOffset];yn&&yn.nodeName==="IMG"&&(as.setBaseAndExtent(Xt.startContainer,Xt.startOffset,Xt.endContainer,Xt.endOffset),(as.anchorNode!==Xt.startContainer||as.focusNode!==Xt.endContainer)&&as.setBaseAndExtent(yn,0,yn,1))}a.dispatch("AfterSetSelectionRange",{range:Xt,forward:cn})},Nt=Xt=>(P(e.getOuterHTML(Xt)),Xt),Wt=()=>iP(a.getBody(),Ve()),sn=(Xt,cn)=>E9(e,Ve(),Xt,cn),vt=()=>{const Xt=ze(),cn=Xt==null?void 0:Xt.anchorNode,as=Xt==null?void 0:Xt.focusNode;if(!Xt||!cn||!as||Vu(cn)||Vu(as))return!0;const zo=e.createRng(),yn=e.createRng();try{zo.setStart(cn,Xt.anchorOffset),zo.collapse(!0),yn.setStart(as,Xt.focusOffset),yn.collapse(!0)}catch(co){return!0}return zo.compareBoundaryPoints(zo.START_TO_START,yn)<=0},Tr={dom:e,win:n,serializer:s,editor:a,expand:(Xt={type:"word"})=>ot(sg(e).expand(Ve(),Xt)),collapse:Le,setCursorLocation:S,getContent:E,setContent:P,getBookmark:W,moveToBookmark:re,select:fe,isCollapsed:te,isEditable:he,isForward:vt,setNode:Nt,getNode:Wt,getSel:ze,setRng:ot,getRng:Ve,getStart:L,getEnd:$,getSelectedBlocks:sn,normalize:()=>{const Xt=Ve(),cn=ze();if(!n4(cn)&&zw(a)){const as=xb(e,Xt);return as.each(zo=>{ot(zo,vt())}),as.getOr(Xt)}return Xt},selectorChanged:(Xt,cn)=>(y(Xt,cn),Tr),selectorChangedWithUnbind:y,getScrollContainer:()=>{let Xt,cn=e.getRoot();for(;cn&&cn.nodeName!=="BODY";){if(cn.scrollHeight>cn.clientHeight){Xt=cn;break}cn=cn.parentNode}return Xt},scrollIntoView:(Xt,cn)=>{le(Xt)?r9(a,Xt,cn):Sb(a,Ve(),cn)},placeCaretAt:(Xt,cn)=>ot(hu(Xt,cn,a.getDoc())),getBoundingClientRect:()=>{const Xt=Ve();return Xt.collapsed?bt.fromRangeStart(Xt).getClientRects()[0]:Xt.getBoundingClientRect()},destroy:()=>{n=f=g=null,Bs.destroy()}},Qi=eg(Tr),Bs=FH(Tr,a);return Tr.bookmarkManager=Qi,Tr.controlSelection=Bs,Tr},c1=(e,n,s)=>{e.addAttributeFilter("data-mce-tabindex",(a,f)=>{let g=a.length;for(;g--;){const y=a[g];y.attr("tabindex",y.attr("data-mce-tabindex")),y.attr(f,null)}}),e.addAttributeFilter("src,href,style",(a,f)=>{const g="data-mce-"+f,y=n.url_converter,S=n.url_converter_scope;let E=a.length;for(;E--;){const P=a[E];let L=P.attr(g);L!==void 0?(P.attr(f,L.length>0?L:null),P.attr(g,null)):(L=P.attr(f),f==="style"?L=s.serializeStyle(s.parseStyle(L),P.name):y&&(L=y.call(S,L,f,P.name)),P.attr(f,L.length>0?L:null))}}),e.addAttributeFilter("class",a=>{let f=a.length;for(;f--;){const g=a[f];let y=g.attr("class");y&&(y=y.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),g.attr("class",y.length>0?y:null))}}),e.addAttributeFilter("data-mce-type",(a,f,g)=>{let y=a.length;for(;y--;){const S=a[y];S.attr("data-mce-type")==="bookmark"&&!g.cleanup&&(V.from(S.firstChild).exists(P=>{var L;return!Ol((L=P.value)!==null&&L!==void 0?L:"")})?S.unwrap():S.remove())}}),e.addNodeFilter("script,style",(a,f)=>{var g;const y=E=>E.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let S=a.length;for(;S--;){const E=a[S],P=E.firstChild,L=(g=P==null?void 0:P.value)!==null&&g!==void 0?g:"";if(f==="script"){const $=E.attr("type");$&&E.attr("type",$==="mce-no/type"?null:$.replace(/^mce\-/,"")),n.element_format==="xhtml"&&P&&L.length>0&&(P.value=`// <![CDATA[
`+y(L)+`
// ]]>`)}else n.element_format==="xhtml"&&P&&L.length>0&&(P.value=`<!--
`+y(L)+`
-->`)}}),e.addNodeFilter("#comment",a=>{let f=a.length;for(;f--;){const g=a[f],y=g.value;n.preserve_cdata&&(y==null?void 0:y.indexOf("[CDATA["))===0?(g.name="#cdata",g.type=4,g.value=s.decode(y.replace(/^\[CDATA\[|\]\]$/g,""))):(y==null?void 0:y.indexOf("mce:protected "))===0&&(g.name="#text",g.type=3,g.raw=!0,g.value=unescape(y).substr(14))}}),e.addNodeFilter("xml:namespace,input",(a,f)=>{let g=a.length;for(;g--;){const y=a[g];y.type===7?y.remove():y.type===1&&f==="input"&&!y.attr("type")&&y.attr("type","text")}}),e.addAttributeFilter("data-mce-type",a=>{de(a,f=>{f.attr("data-mce-type")==="format-caret"&&(f.isEmpty(e.schema.getNonEmptyElements())?f.remove():f.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(a,f)=>{let g=a.length;for(;g--;)a[g].attr(f,null)}),n.remove_trailing_brs&&cT(n,e,e.schema)},ov=e=>{const n=a=>(a==null?void 0:a.name)==="br",s=e.lastChild;if(n(s)){const a=s.prev;n(a)&&(s.remove(),a.remove())}},YN=(e,n,s)=>{let a;const f=e.dom;let g=n.cloneNode(!0);const y=document.implementation;if(y.createHTMLDocument){const S=y.createHTMLDocument("");Lt.each(g.nodeName==="BODY"?g.childNodes:[g],E=>{S.body.appendChild(S.importNode(E,!0))}),g.nodeName!=="BODY"?g=S.body.firstChild:g=S.body,a=f.doc,f.doc=S}return ME(e,Ot(ie({},s),{node:g})),a&&(f.doc=a),g},XN=(e,n)=>le(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,DU=(e,n,s)=>XN(e,s)?YN(e,n,s):n,JN=(e,n,s)=>{Lt.inArray(n,s)===-1&&(e.addAttributeFilter(s,(a,f)=>{let g=a.length;for(;g--;)a[g].attr(f,null)}),n.push(s))},MU=(e,n,s)=>!n.no_events&&e?SH(e,Ot(ie({},n),{content:s})).content:s,PU=(e,n,s)=>{const a=nc(s.getInner?n.innerHTML:e.getOuterHTML(n));return s.selection||Li(ye.fromDom(n))?a:Lt.trim(a)},RU=(e,n,s)=>{const a=s.selection?ie({forced_root_block:!1},s):s,f=e.parse(n,a);return ov(f),f},NU=(e,n,s)=>Ih(e,n).serialize(s),QN=(e,n,s,a,f)=>{const g=NU(n,s,a);return MU(e,f,g)},BU=(e,n)=>{const s=["data-mce-selected"],a=ie({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),f=n&&n.dom?n.dom:nr.DOM,g=n&&n.schema?n.schema:If(a),y=yu(a,g);c1(y,a,f);const S=(E,P={})=>{const L=ie({format:"html"},P),$=DU(n,E,L),W=PU(f,$,L),re=RU(y,W,L);return L.format==="tree"?re:QN(n,a,g,re,L)};return{schema:g,addNodeFilter:y.addNodeFilter,addAttributeFilter:y.addAttributeFilter,serialize:S,addRules:g.addValidElements,setRules:g.setValidElements,addTempAttr:Be(JN,y,s),getTempAttrs:me(s),getNodeFilters:y.getNodeFilters,getAttributeFilters:y.getAttributeFilters,removeNodeFilter:y.removeNodeFilter,removeAttributeFilter:y.removeAttributeFilter}},eB=(e,n)=>{const s=BU(e,n);return{schema:s.schema,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:s.serialize,addRules:s.addRules,setRules:s.setRules,addTempAttr:s.addTempAttr,getTempAttrs:s.getTempAttrs,getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter}},sv="html",tB=(e,n)=>Ot(ie({},e),{format:n,get:!0,getInner:!0}),nB=(e,n={})=>{const s=n.format?n.format:sv,a=tB(n,s);return zh(e,a).fold(lt,f=>{const g=pU(e,f);return ST(e,g,f)})},FU="html",IU=(e,n)=>Ot(ie({format:FU},e),{set:!0,content:n}),qT=(e,n,s={})=>{const a=IU(s,n);return kT(e,a).map(f=>{const g=bU(e,f.content,f);return Qx(e,g.html,f),g.content}).getOr(n)},oB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),LU="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),$U="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),sB=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],rB=(e,n)=>{const s=Ne(n,a=>Bn(e,a));return pt(s)},Oee=e=>{const n=rB(e,oB),s=e.forced_root_block;return(s===!1||s==="")&&n.push("forced_root_block (false only)"),pt(n)},ad=e=>rB(e,LU),uC=(e,n)=>{const s=Lt.makeMap(e.plugins," "),f=Ne(n,g=>Bn(s,g));return pt(f)},HU=e=>uC(e,$U),VU=e=>uC(e,sB.map(n=>n.name)),zU=(e,n)=>{const s=Oee(e),a=HU(n),f=a.length>0,g=s.length>0,y=n.theme==="mobile";if(f||g||y){const S=`
- `,E=y?`

Themes:${S}mobile`:"",P=f?`

Plugins:${S}${a.join(S)}`:"",L=g?`

Options:${S}${s.join(S)}`:""}},UU=e=>st(sB,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),As=(e,n)=>{const s=ad(e),a=VU(n),f=a.length>0,g=s.length>0;if(f||g){const y=`
- `,S=f?`

Plugins:${y}${a.map(UU).join(y)}`:"",E=g?`

Options:${y}${s.join(y)}`:""}},_ee=(e,n)=>{zU(e,n),As(e,n)},dC=nr.DOM,WU=e=>{dC.setStyle(e.id,"display",e.orgDisplay)},ar=e=>V.from(e).each(n=>n.destroy()),jU=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const s=e.selection;if(s){const a=s.dom;n.selection=s.win=s.dom=a.doc=null}},rv=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),dC.unbind(n,"submit reset",e.formEventDelegate))},ZU=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:s}=e,a=e.getBody(),f=e.getElement();a&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&le(f==null?void 0:f.nextSibling)&&dC.remove(f.nextSibling),kH(e),e.editorManager.remove(e),!e.inline&&a&&WU(e),x4(e),dC.remove(e.getContainer()),ar(n),ar(s),e.destroy()}},qU=(e,n)=>{const{selection:s,dom:a}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),ar(s),ar(a)),rv(e),jU(e),e.destroyed=!0}},iv=(()=>{const e={};return{add:(f,g)=>{e[f]=g},get:f=>e[f]?e[f]:{icons:{}},has:f=>Bn(e,f)}})(),Lc=Xa.ModelManager,gl=(e,n)=>n.dom[e],u1=(e,n)=>parseInt(ru(n,e),10),jh=Be(gl,"clientWidth"),Jd=Be(gl,"clientHeight"),av=Be(u1,"margin-top"),GT=Be(u1,"margin-left"),KT=e=>e.dom.getBoundingClientRect(),iB=(e,n,s)=>{const a=jh(e),f=Jd(e);return n>=0&&s>=0&&n<=a&&s<=f},aB=(e,n,s,a)=>{const f=KT(n),g=e?f.left+n.dom.clientLeft+GT(n):0,y=e?f.top+n.dom.clientTop+av(n):0,S=s-g,E=a-y;return{x:S,y:E}},GU=(e,n,s)=>{const a=ye.fromDom(e.getBody()),f=e.inline?a:Sf(a),g=aB(e.inline,f,n,s);return iB(f,g.x,g.y)},KU=e=>V.from(e).map(ye.fromDom),lB=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return KU(n).map(yh).getOr(!1)};var cB=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const YT=e=>{const n=[],s=()=>{const W=e.theme;return W&&W.getNotificationManagerImpl?W.getNotificationManagerImpl():cB()},a=()=>V.from(n[0]),f=(W,re)=>W.type===re.type&&W.text===re.text&&!W.progressBar&&!W.timeout&&!re.progressBar&&!re.timeout,g=()=>{de(n,W=>{W.reposition()})},y=W=>{n.push(W)},S=W=>{en(n,re=>re===W).each(re=>{n.splice(re,1)})},E=(W,re=!0)=>e.removed||!lB(e)?{}:(re&&e.dispatch("BeforeOpenNotification",{notification:W}),st(n,fe=>f(s().getArgs(fe),W)).getOrThunk(()=>{e.editorManager.setActive(e);const fe=s().open(W,()=>{S(fe),g(),nP(e)&&a().fold(()=>e.focus(),te=>V4(ye.fromDom(te.getEl())))});return y(fe),g(),e.dispatch("OpenNotification",{notification:ie({},fe)}),fe})),P=()=>{a().each(W=>{s().close(W),S(W),g()})},L=me(n);return(W=>{W.on("SkinLoaded",()=>{const re=b7(W);re&&E({text:re,type:"warning",timeout:0},!1),g()}),W.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(g)}),W.on("remove",()=>{de(n.slice(),re=>{s().close(re)})})})(e),{open:E,close:P,getNotifications:L}},bg=Xa.PluginManager,rh=Xa.ThemeManager;var Mee=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const uB=e=>{let n=[];const s=()=>{const te=e.theme;return te&&te.getWindowManagerImpl?te.getWindowManagerImpl():Mee()},a=(te,he)=>(...Le)=>he?he.apply(te,Le):void 0,f=te=>{e.dispatch("OpenWindow",{dialog:te})},g=te=>{e.dispatch("CloseWindow",{dialog:te})},y=te=>{n.push(te),f(te)},S=te=>{g(te),n=Ne(n,he=>he!==te),n.length===0&&e.focus()},E=()=>V.from(n[n.length-1]),P=te=>{e.editorManager.setActive(e),Vp(e),e.ui.show();const he=te();return y(he),he},L=(te,he)=>P(()=>s().open(te,he,S)),$=te=>P(()=>s().openUrl(te,S)),W=(te,he,Le)=>{const ze=s();ze.alert(te,a(Le||ze,he))},re=(te,he,Le)=>{const ze=s();ze.confirm(te,a(Le||ze,he))},fe=()=>{E().each(te=>{s().close(te),S(te)})};return e.on("remove",()=>{de(n,te=>{s().close(te)})}),{open:L,openUrl:$,alert:W,confirm:re,close:fe}},YU=(e,n)=>{e.notificationManager.open({type:"error",text:n})},fC=(e,n)=>{e._skinLoaded?YU(e,n):e.on("SkinLoaded",()=>{YU(e,n)})},XU=(e,n)=>{fC(e,lu.translate(["Failed to upload image: {0}",n]))},bc=(e,n,s)=>{Rl(e,n,{message:s})},hC=(e,n,s)=>s?`Failed to load ${e}: ${s} from url ${n}`:`Failed to load ${e} url: ${n}`,Pee=(e,n,s)=>{bc(e,"PluginLoadError",hC("plugin",n,s))},JU=(e,n,s)=>{bc(e,"IconsLoadError",hC("icons",n,s))},lv=(e,n,s)=>{bc(e,"LanguageLoadError",hC("language",n,s))},QU=(e,n,s)=>{bc(e,"ThemeLoadError",hC("theme",n,s))},dB=(e,n,s)=>{bc(e,"ModelLoadError",hC("model",n,s))},fB=(e,n,s)=>{const a=lu.translate(["Failed to initialize plugin: {0}",n]);Rl(e,"PluginLoadError",{message:a}),cv(a,s),fC(e,a)},cv=(e,...n)=>{const s=window.console;s&&(s.error?s.error(e,...n):s.log(e,...n))},eW=e=>/^[a-z0-9\-]+$/i.test(e),XT=e=>"content/"+e+"/content.css",Zh=e=>tinymce.Resource.has(XT(e)),tW=e=>hB(e,w3(e)),nW=e=>hB(e,x3(e)),hB=(e,n)=>{const s=e.editorManager.baseURL+"/skins/content",f=`content${e.editorManager.suffix}.css`;return nt(n,g=>Zh(g)?g:eW(g)&&!e.inline?`${s}/${g}/${f}`:e.documentBaseURI.toAbsolute(g))},oW=e=>{e.contentCSS=e.contentCSS.concat(tW(e),nW(e))},sW=e=>e?so(e.getElementsByTagName("img")):[],rW=(e,n)=>{const s={};return{findAll:(f,g=je)=>{const y=Ne(sW(f),E=>{const P=E.src;return E.hasAttribute("data-mce-bogus")||E.hasAttribute("data-mce-placeholder")||!P||P===on.transparentSrc?!1:Vn(P,"blob:")?!e.isUploaded(P)&&g(E):Vn(P,"data:")?g(E):!1}),S=nt(y,E=>{const P=E.src;if(Bn(s,P))return s[P].then(L=>Z(L)?L:{image:E,blobInfo:L.blobInfo});{const L=yz(n,P).then($=>(delete s[P],{image:E,blobInfo:$})).catch($=>(delete s[P],$));return s[P]=L,L}});return Promise.all(S)}}},mB=()=>{let s={};const a=(W,re)=>({status:W,resultUri:re}),f=W=>W in s;return{hasBlobUri:f,getResultUri:W=>{const re=s[W];return re?re.resultUri:null},isPending:W=>f(W)?s[W].status===1:!1,isUploaded:W=>f(W)?s[W].status===2:!1,markPending:W=>{s[W]=a(1,null)},markUploaded:(W,re)=>{s[W]=a(2,re)},removeFailed:W=>{delete s[W]},destroy:()=>{s={}}}};let iW=0;const aW=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},mC=e=>e+iW+++aW(),lW=()=>{let e=[];const n=$=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[$.toLowerCase()]||"dat",s=($,W,re,fe,te)=>{if(Z($))return a({id:$,name:fe,filename:te,blob:W,base64:re});if(ce($))return a($);throw new Error("Unknown input type")},a=$=>{if(!$.blob||!$.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const W=$.id||mC("blobid"),re=$.name||W,fe=$.blob;return{id:me(W),name:me(re),filename:me($.filename||re+"."+n(fe.type)),blob:me(fe),base64:me($.base64),blobUri:me($.blobUri||URL.createObjectURL(fe)),uri:me($.uri)}},f=$=>{y($.id())||e.push($)},g=$=>st(e,$).getOrUndefined(),y=$=>g(W=>W.id()===$);return{create:s,add:f,get:y,getByUri:$=>g(W=>W.blobUri()===$),getByData:($,W)=>g(re=>re.base64()===$&&re.blob().type===W),findFirst:g,removeByUri:$=>{e=Ne(e,W=>W.blobUri()===$?(URL.revokeObjectURL(W.blobUri()),!1):!0)},destroy:()=>{de(e,$=>{URL.revokeObjectURL($.blobUri())}),e=[]}}},cW=(e,n)=>{const s={},a=(te,he)=>te?te.replace(/\/$/,"")+"/"+he.replace(/^\//,""):he,f=(te,he)=>new Promise((Le,ze)=>{const Ve=new XMLHttpRequest;Ve.open("POST",n.url),Ve.withCredentials=n.credentials,Ve.upload.onprogress=Nt=>{he(Nt.loaded/Nt.total*100)},Ve.onerror=()=>{ze("Image upload failed due to a XHR Transport error. Code: "+Ve.status)},Ve.onload=()=>{if(Ve.status<200||Ve.status>=300){ze("HTTP Error: "+Ve.status);return}const Nt=JSON.parse(Ve.responseText);if(!Nt||!Z(Nt.location)){ze("Invalid JSON: "+Ve.responseText);return}Le(a(n.basePath,Nt.location))};const ot=new FormData;ot.append("file",te.blob(),te.filename()),Ve.send(ot)}),g=Ee(n.handler)?n.handler:f,y=()=>new Promise(te=>{te([])}),S=(te,he)=>({url:he,blobInfo:te,status:!0}),E=(te,he)=>({url:"",blobInfo:te,status:!1,error:he}),P=(te,he)=>{Lt.each(s[te],Le=>{Le(he)}),delete s[te]},L=(te,he,Le)=>(e.markPending(te.blobUri()),new Promise(ze=>{let Ve,ot;try{const Nt=()=>{Ve&&(Ve.close(),ot=ge)},Wt=vt=>{Nt(),e.markUploaded(te.blobUri(),vt),P(te.blobUri(),S(te,vt)),ze(S(te,vt))},sn=vt=>{Nt(),e.removeFailed(te.blobUri()),P(te.blobUri(),E(te,vt)),ze(E(te,vt))};ot=vt=>{vt<0||vt>100||V.from(Ve).orThunk(()=>V.from(Le).map(Ie)).each(dt=>{Ve=dt,dt.progressBar.value(vt)})},he(te,ot).then(Wt,vt=>{sn(Z(vt)?{message:vt}:vt)})}catch(Nt){ze(E(te,Nt))}})),$=te=>te===f,W=te=>{const he=te.blobUri();return new Promise(Le=>{s[he]=s[he]||[],s[he].push(Le)})},re=(te,he)=>(te=Lt.grep(te,Le=>!e.isUploaded(Le.blobUri())),Promise.all(Lt.map(te,Le=>e.isPending(Le.blobUri())?W(Le):L(Le,g,he))));return{upload:(te,he)=>!n.url&&$(g)?y():re(te,he)}},uW=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),d1=(e,n)=>cW(n,{url:u7(e),basePath:d7(e),credentials:Uk(e),handler:f7(e)}),dW=e=>{const n=mB(),s=d1(e,n);return{upload:(a,f=!0)=>s.upload(a,f?uW(e):void 0)}},JT=(e,n)=>e.dom.isEmpty(n.dom)&&le(e.schema.getTextBlockElements()[ts(n)]),fW=e=>n=>{JT(e,n)&&Yr(n,ye.fromHtml('<br data-mce-bogus="1" />'))},hW=e=>{const n=lW();let s,a;const f=mB(),g=[],y=Ve=>ot=>e.selection?Ve(ot):[],S=Ve=>Ve+(Ve.indexOf("?")===-1?"?":"&")+new Date().getTime(),E=(Ve,ot,Nt)=>{let Wt=0;do Wt=Ve.indexOf(ot,Wt),Wt!==-1&&(Ve=Ve.substring(0,Wt)+Nt+Ve.substr(Wt+ot.length),Wt+=Nt.length-ot.length+1);while(Wt!==-1);return Ve},P=(Ve,ot,Nt)=>{const Wt=`src="${Nt}"${Nt===on.transparentSrc?' data-mce-placeholder="1"':""}`;return Ve=E(Ve,`src="${ot}"`,Wt),Ve=E(Ve,'data-mce-src="'+ot+'"','data-mce-src="'+Nt+'"'),Ve},L=(Ve,ot)=>{de(e.undoManager.data,Nt=>{Nt.type==="fragmented"?Nt.fragments=nt(Nt.fragments,Wt=>P(Wt,Ve,ot)):Nt.content=P(Nt.content,Ve,ot)})},$=(Ve,ot)=>{const Nt=e.convertURL(ot,"src");L(Ve.src,ot),Vr(ye.fromDom(Ve),{src:tb(e)?S(ot):ot,"data-mce-src":Nt})},W=()=>(s||(s=d1(e,f)),he().then(y(Ve=>{const ot=nt(Ve,Nt=>Nt.blobInfo);return s.upload(ot,uW(e)).then(y(Nt=>{const Wt=[];let sn=!1;const vt=nt(Nt,(dt,Mt)=>{const{blobInfo:gn,image:Mn}=Ve[Mt];let ko=!1;return dt.status&&l7(e)?(dt.url&&!$n(Mn.src,dt.url)&&(sn=!0),n.removeByUri(Mn.src),sh(e)||$(Mn,dt.url)):dt.error&&(dt.error.remove&&(L(Mn.src,on.transparentSrc),Wt.push(Mn),ko=!0),XU(e,dt.error.message)),{element:Mn,status:dt.status,uploadUri:dt.url,blobInfo:gn,removed:ko}});return Wt.length>0&&!sh(e)?e.undoManager.transact(()=>{de(Ch(Wt),dt=>{const Mt=sa(dt);ks(dt),Mt.each(fW(e)),n.removeByUri(dt.dom.src)})}):sn&&e.undoManager.dispatchChange(),vt}))}))),re=()=>b3(e)?W():Promise.resolve([]),fe=Ve=>ao(g,ot=>ot(Ve)),te=Ve=>{g.push(Ve)},he=()=>(a||(a=rW(f,n)),a.findAll(e.getBody(),fe).then(y(Ve=>{const ot=Ne(Ve,Nt=>Z(Nt)?(fC(e,Nt),!1):Nt.uriType!=="blob");return sh(e)||de(ot,Nt=>{L(Nt.image.src,Nt.blobInfo.blobUri()),Nt.image.src=Nt.blobInfo.blobUri(),Nt.image.removeAttribute("data-mce-src")}),ot}))),Le=()=>{n.destroy(),f.destroy(),a=s=null},ze=Ve=>Ve.replace(/src="(blob:[^"]+)"/g,(ot,Nt)=>{const Wt=f.getResultUri(Nt);if(Wt)return'src="'+Wt+'"';let sn=n.getByUri(Nt);return sn||(sn=ve(e.editorManager.get(),(vt,dt)=>vt||dt.editorUpload&&dt.editorUpload.blobCache.getByUri(Nt),void 0)),sn?'src="data:'+sn.blob().type+";base64,"+sn.base64()+'"':ot});return e.on("SetContent",()=>{b3(e)?re():he()}),e.on("RawSaveContent",Ve=>{Ve.content=ze(Ve.content)}),e.on("GetContent",Ve=>{Ve.source_view||Ve.format==="raw"||Ve.format==="tree"||(Ve.content=ze(Ve.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ve=>{de(Ve,ot=>{const Nt=ot.attr("src");if(!Nt||n.getByUri(Nt))return;const Wt=f.getResultUri(Nt);Wt&&ot.attr("src",Wt)})})}),{blobCache:n,addFilter:te,uploadImages:W,uploadImagesAuto:re,scanForImages:he,destroy:Le}},mW=e=>{const n=e.dom,s=e.schema.type,a={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:f=>{n.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:f=>{n.setStyle(f,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const f={inline:"span",styles:{textDecoration:"line-through"},exact:!0},g={inline:"strike",remove:"all",preserve_attributes:["class","style"]},y={inline:"s",remove:"all",preserve_attributes:["class","style"]};return s!=="html4"?[y,f,g]:[f,y,g]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(f,g,y)=>xn(f)&&f.hasAttribute("href"),onformat:(f,g,y)=>{Lt.each(y,(S,E)=>{n.setAttrib(f,E,S)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":f=>{var g;return(g=f==null?void 0:f.customValue)!==null&&g!==void 0?g:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),f=>{a[f]={block:f,remove:"all"}}),a},gB={remove_similar:!0,inherit:!1},wu=ie({selector:"td,th"},gB),vg={tablecellbackgroundcolor:ie({styles:{backgroundColor:"%value"}},wu),tablecellverticalalign:ie({styles:{"vertical-align":"%value"}},wu),tablecellbordercolor:ie({styles:{borderColor:"%value"}},wu),tablecellclass:ie({classes:["%value"]},wu),tableclass:ie({selector:"table",classes:["%value"]},gB),tablecellborderstyle:ie({styles:{borderStyle:"%value"}},wu),tablecellborderwidth:ie({styles:{borderWidth:"%value"}},wu)},gC=me(vg),pC=e=>{const n={},s=y=>le(y)?n[y]:n,a=y=>Bn(n,y),f=(y,S)=>{y&&(Z(y)?(De(S)||(S=[S]),de(S,E=>{Re(E.deep)&&(E.deep=!Pl(E)),Re(E.split)&&(E.split=!Pl(E)||si(E)),Re(E.remove)&&Pl(E)&&!si(E)&&(E.remove="none"),Pl(E)&&si(E)&&(E.mixed=!0,E.block_expand=!0),Z(E.classes)&&(E.classes=E.classes.split(/\s+/))}),n[y]=S):$t(y,(E,P)=>{f(P,E)}))},g=y=>(y&&n[y]&&delete n[y],n);return f(mW(e)),f(gC()),f(w7(e)),{get:s,has:a,register:f,unregister:g}},Qd=Lt.each,ka=nr.DOM,f1=e=>le(e)&&ce(e),uv=(e,n)=>{const s=n&&n.schema||If({}),a=(E,P)=>{P.classes.length>0&&ka.addClass(E,P.classes.join(" ")),ka.setAttribs(E,P.attrs)},f=E=>{const P=Z(E)?{name:E,classes:[],attrs:{}}:E,L=ka.create(P.name);return a(L,P),L},g=(E,P)=>{const L=s.getElementRule(E.nodeName.toLowerCase()),$=L==null?void 0:L.parentsRequired;return $&&$.length?P&&Qe($,P)?P:$[0]:!1},y=(E,P,L)=>{let $;const W=P[0],re=f1(W)?W.name:void 0,fe=g(E,re);if(fe)re===fe?($=W,P=P.slice(1)):$=fe;else if(W)$=W,P=P.slice(1);else if(!L)return E;const te=$?f($):ka.create("div");te.appendChild(E),L&&Lt.each(L,Le=>{const ze=f(Le);te.insertBefore(ze,E)});const he=f1($)?$.siblings:void 0;return y(te,P,he)},S=ka.create("div");if(e.length>0){const E=e[0],P=f(E),L=f1(E)?E.siblings:void 0;S.appendChild(y(P,e.slice(1),L))}return S},pB=e=>{e=Lt.trim(e);let n="div";const s={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(a,f,g,y,S)=>{switch(f){case"#":s.attrs.id=g;break;case".":s.classes.push(g);break;case":":Lt.inArray("checked disabled enabled read-only required".split(" "),g)!==-1&&(s.attrs[g]=g);break}if(y==="["){const E=S.match(/([\w\-]+)(?:\=\"([^\"]+))?/);E&&(s.attrs[E[1]]=E[2])}return""})),s.name=n||"div",s},QT=e=>Z(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Lt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const s=Lt.map(n.split(/(?:~\+|~|\+)/),pB),a=s.pop();return s.length&&(a.siblings=s),a}).reverse()):[],eO=(e,n)=>{let s="",a=k3(e);if(a==="")return"";const f=W=>Z(W)?W.replace(/%(\w+)/g,""):"",g=(W,re)=>ka.getStyle(re!=null?re:e.getBody(),W,!0);if(Z(n)){const W=e.formatter.get(n);if(!W)return"";n=W[0]}if("preview"in n){const W=n.preview;if(W===!1)return"";a=W||a}let y=n.block||n.inline||"span",S;const E=QT(n.selector);E.length>0?(E[0].name||(E[0].name=y),y=n.selector,S=uv(E,e)):S=uv([y],e);const P=ka.select(y,S)[0]||S.firstChild;Qd(n.styles,(W,re)=>{const fe=f(W);fe&&ka.setStyle(P,re,fe)}),Qd(n.attributes,(W,re)=>{const fe=f(W);fe&&ka.setAttrib(P,re,fe)}),Qd(n.classes,W=>{const re=f(W);ka.hasClass(P,re)||ka.addClass(P,re)}),e.dispatch("PreviewFormats"),ka.setStyles(S,{position:"absolute",left:-65535}),e.getBody().appendChild(S);const L=g("fontSize"),$=/px$/.test(L)?parseInt(L,10):0;return Qd(a.split(" "),W=>{let re=g(W,P);if(!(W==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(re)&&(re=g(W),z0(re).toLowerCase()==="#ffffff"))&&!(W==="color"&&z0(re).toLowerCase()==="#000000")){if(W==="font-size"&&/em|%$/.test(re)){if($===0)return;re=parseFloat(re)/(/%$/.test(re)?100:1)*$+"px"}W==="border"&&re&&(s+="padding:0 2px;"),s+=W+":"+re+";"}}),e.dispatch("AfterPreviewFormats"),ka.remove(S),s},bB=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},tO=e=>{const n=pC(e),s=Ur({});return bB(e),KV(e),sh(e)||az(s,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(a,f,g)=>{hU(e,a,f,g)},remove:(a,f,g,y)=>{mU(e,a,f,g,y)},toggle:(a,f,g)=>{gU(e,a,f,g)},match:(a,f,g,y)=>WN(e,a,f,g,y),closest:a=>WT(e,a),matchAll:(a,f)=>jN(e,a,f),matchNode:(a,f,g,y)=>UT(e,a,f,g,y),canApply:a=>ZN(e,a),formatChanged:(a,f,g,y)=>Ic(e,s,a,f,g,y),getCssText:Be(eO,e)}},yg=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},vB=(e,n,s)=>{const a=Ur(!1),f=E=>{aC(n,!1,s),n.add({},E)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",E=>{const P=E.command;yg(P)||(LN(n,s),n.beforeChange())}),e.on("ExecCommand",E=>{const P=E.command;yg(P)||f(E)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",f),e.on("dragend",f),e.on("keyup",E=>{const P=E.keyCode;if(E.isDefaultPrevented())return;const L=on.os.isMacOS()&&E.key==="Meta";(P>=33&&P<=36||P>=37&&P<=40||P===45||E.ctrlKey||L)&&(f(),e.nodeChanged()),(P===46||P===8)&&e.nodeChanged(),a.get()&&n.typing&&!$T(iC(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),a.set(!1),e.nodeChanged())}),e.on("keydown",E=>{const P=E.keyCode;if(E.isDefaultPrevented())return;if(P>=33&&P<=36||P>=37&&P<=40||P===45){n.typing&&f(E);return}const L=E.ctrlKey&&!E.altKey||E.metaKey;if((P<16||P>20)&&P!==224&&P!==91&&!n.typing&&!L){n.beforeChange(),aC(n,!0,s),n.add({},E),a.set(!0);return}(on.os.isMacOS()?E.metaKey:E.ctrlKey&&!E.altKey)&&n.beforeChange()}),e.on("mousedown",E=>{n.typing&&f(E)});const g=E=>E.inputType==="insertReplacementText",y=E=>E.inputType==="insertText"&&E.data===null,S=E=>E.inputType==="insertFromPaste"||E.inputType==="insertFromDrop";e.on("input",E=>{E.inputType&&(g(E)||y(E)||S(E))&&f(E)}),e.on("AddUndo Undo Redo ClearUndos",E=>{E.isDefaultPrevented()||e.nodeChanged()})},yB=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},nO=e=>{const n=Th(),s=Ur(0),a=Ur(0),f={data:[],typing:!1,beforeChange:()=>{Aee(e,s,n)},add:(g,y)=>ua(e,f,a,s,n,g,y),dispatchChange:()=>{e.setDirty(!0);const g=iC(e);g.bookmark=Bk(e.selection),e.dispatch("change",{level:g,lastLevel:Pt(f.data,a.get()).getOrUndefined()})},undo:()=>VN(e,f,s,a),redo:()=>zN(e,a,f.data),clear:()=>{UN(e,f,a)},reset:()=>{cU(e,f)},hasUndo:()=>uU(e,f,a),hasRedo:()=>lC(e,f,a),transact:g=>dU(e,f,s,g),ignore:g=>{zT(e,s,g)},extra:(g,y)=>{fU(e,f,a,g,y)}};return sh(e)||vB(e,f,s),yB(e),f},bC=[9,27,mn.HOME,mn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,mn.DOWN,mn.UP,mn.LEFT,mn.RIGHT].concat(on.browser.isFirefox()?[224]:[]),oO="data-mce-placeholder",sO=e=>e.type==="keydown"||e.type==="keyup",rO=e=>{const n=e.keyCode;return n===mn.BACKSPACE||n===mn.DELETE},wB=e=>{if(sO(e)){const n=e.keyCode;return!rO(e)&&(mn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Qe(bC,n))}else return!1},ih=e=>sO(e)&&!(rO(e)||e.type==="keyup"&&e.keyCode===229),qh=(e,n,s)=>{if(Mr(ye.fromDom(n),!1)){const a=n.firstElementChild;return a?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:s===a.nodeName.toLowerCase():!0}else return!1},xu=e=>{var n;const s=e.dom,a=Ia(e),f=(n=p7(e))!==null&&n!==void 0?n:"",g=(y,S)=>{if(wB(y))return;const E=e.getBody(),P=ih(y)?!1:qh(s,E,a);(s.getAttrib(E,oO)!==""!==P||S)&&(s.setAttrib(E,oO,P?f:null),s.setAttrib(E,"aria-placeholder",P?f:null),_H(e,P),e.on(P?"keydown":"keyup",g),e.off(P?"keyup":"keydown",g))};Po(f)&&e.on("init",y=>{g(y,!0),e.on("change SetContent ExecCommand",g),e.on("paste",S=>hc.setEditorTimeout(e,()=>g(S)))})},gW=(e,n)=>({block:e,position:n}),pW=(e,n)=>({from:e,to:n}),iO=(e,n)=>{const s=ye.fromDom(e),a=ye.fromDom(n.container());return Mb(s,a).map(f=>gW(f,n))},bW=e=>!ws(e.from.block,e.to.block),xB=(e,n)=>ul(n,f=>tc(f)||dl(f.dom),f=>ws(f,e)).filter(pn).getOr(e),vW=(e,n)=>{const s=ye.fromDom(e);return ws(xB(s,n.from.block),xB(s,n.to.block))},yW=e=>gs(e.from.block.dom)===!1&&gs(e.to.block.dom)===!1,wW=e=>{const n=s=>tt(s)||ew(s.dom);return n(e.from.block)&&n(e.to.block)},xW=(e,n,s)=>Us(s.position.getNode())&&!Mr(s.block)?Mp(!1,s.block.dom).bind(a=>a.isEqual(s.position)?Ml(n,e,a).bind(f=>iO(e,f)):V.some(s)).getOr(s):s,CW=(e,n,s)=>{const a=iO(e,bt.fromRangeStart(s)),f=a.bind(g=>Ml(n,e,g.position).bind(y=>iO(e,y).map(S=>xW(e,n,S))));return qr(a,f,pW).filter(g=>bW(g)&&vW(e,g)&&yW(g)&&wW(g))},SW=(e,n,s)=>s.collapsed?CW(e,n,s):V.none(),kW=(e,n)=>{const s=pi(e);return en(s,a=>n.isBlock(ts(a))).fold(me(s),a=>s.slice(0,a))},vC=(e,n)=>{const s=kW(e,n);return de(s,ks),s},yC=(e,n)=>{const s=Ud(n,e);return st(s.reverse(),a=>Mr(a)).each(ks)},CB=e=>Ne(Ly(e),n=>!Mr(n)).length===0,EW=(e,n,s,a,f)=>{if(Mr(s))return Pd(s),La(s.dom);CB(f)&&Mr(n)&&Ra(f,ye.fromTag("br"));const g=hl(s.dom,bt.before(f.dom));return de(vC(n,a),y=>{Ra(f,y)}),yC(e,n),g},AW=(e,n)=>e.isInline(ts(n)),SB=(e,n,s,a)=>{if(Mr(s)){if(Mr(n)){const y=kt((S=>{const E=(P,L)=>Em(P).fold(()=>L,$=>AW(a,$)?E($,L.concat(ic($))):L);return E(S,[])})(s),(S,E)=>(Wy(S,E),E),Zu());Od(n),Yr(n,y)}return ks(s),La(n.dom)}const f=uu(s.dom);return de(vC(n,a),g=>{Yr(s,g)}),yC(e,n),f},kB=(e,n)=>{const s=Ud(n,e);return V.from(s[s.length-1])},aO=(e,n)=>Fu(n,e)?kB(n,e):V.none(),lO=(e,n)=>{Mp(e,n.dom).bind(s=>V.from(s.getNode())).map(ye.fromDom).filter(Nm).each(ks)},cO=(e,n,s,a)=>(lO(!0,n),lO(!1,s),aO(n,s).fold(Be(SB,e,n,s,a),Be(EW,e,n,s,a))),wC=(e,n,s,a,f)=>n?cO(e,a,s,f):cO(e,s,a,f),uO=(e,n)=>{const s=ye.fromDom(e.getBody());return SW(s.dom,n,e.selection.getRng()).map(f=>()=>{wC(s,n,f.from.block,f.to.block,e.schema).each(g=>{e.selection.setRng(g.toRange())})})},TW=(e,n,s)=>{const a=n.getRng();return qr(Mb(e,ye.fromDom(a.startContainer)),Mb(e,ye.fromDom(a.endContainer)),(f,g)=>ws(f,g)?V.none():V.some(()=>{a.deleteContents(),wC(e,!0,f,g,s).each(y=>{n.setRng(y.toRange())})})).getOr(V.none())},ld=(e,n)=>{const s=ye.fromDom(n),a=Be(ws,e);return Sr(s,tc,a).isSome()},Cu=(e,n)=>ld(e,n.startContainer)||ld(e,n.endContainer),xC=(e,n)=>{const s=hl(e.dom,bt.fromRangeStart(n)).isNone(),a=el(e.dom,bt.fromRangeEnd(n)).isNone();return!Cu(e,n)&&s&&a},EB=e=>V.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),CC=e=>{const n=ye.fromDom(e.getBody()),s=e.selection.getRng();return xC(n,s)?EB(e):TW(n,e.selection,e.schema)},SC=(e,n)=>e.selection.isCollapsed()?V.none():CC(e),ef=(e,n,s,a,f)=>V.from(n._selectionOverrides.showCaret(e,s,a,f)),AB=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},h1=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?V.none():V.some(AB(n)),TB=(e,n,s)=>{const a=nE(1,e.getBody(),n),f=bt.fromRangeStart(a),g=f.getNode();if(Nw(g))return ef(1,e,g,!f.isAtEnd(),!1);const y=f.getNode(!0);if(Nw(y))return ef(1,e,y,!1,!1);const S=fg(e.dom.getRoot(),f.getNode());return Nw(S)?ef(1,e,S,!1,s):V.none()},kC=(e,n,s)=>n.collapsed?TB(e,n,s).getOr(n):n,EC=e=>Jf(e)||Eb(e),dO=e=>od(e)||zp(e),OW=(e,n)=>{Vt(n)&&n.data.length===0&&e.remove(n)},OB=(e,n,s,a,f,g)=>{ef(a,e,g.getNode(!f),f,!0).each(y=>{if(n.collapsed){const S=n.cloneRange();f?S.setEnd(y.startContainer,y.startOffset):S.setStart(y.endContainer,y.endOffset),S.deleteContents()}else n.deleteContents();e.selection.setRng(y)}),OW(e.dom,s)},_W=(e,n)=>{const s=e.selection.getRng();if(!Vt(s.commonAncestorContainer))return V.none();const a=n?Hi.Forwards:Hi.Backwards,f=Ld(e.getBody()),g=Be(oE,n?f.next:f.prev),y=n?EC:dO,S=lb(a,e.getBody(),s),E=g(S),P=E&&Go(n,E);if(!P||!$w(S,P))return V.none();if(y(P))return V.some(()=>OB(e,s,S.getNode(),a,n,P));const L=g(P);return L&&y(L)&&$w(P,L)?V.some(()=>OB(e,s,S.getNode(),a,n,L)):V.none()},fO=(e,n)=>_W(e,n),AC=(e,n)=>{const s=e.getBody();return n?La(s).filter(Jf):uu(s).filter(od)},hO=e=>{const n=e.selection.getRng();return!n.collapsed&&(AC(e,!0).exists(s=>s.isEqual(bt.fromRangeStart(n)))||AC(e,!1).exists(s=>s.isEqual(bt.fromRangeEnd(n))))},DW=e=>le(e)&&(tc(ye.fromDom(e))||Bm(ye.fromDom(e))),pl=ed.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),MW=(e,n)=>{const s=n.getNode(!e),a=e?"after":"before";return xn(s)&&s.getAttribute("data-mce-caret")===a},PW=(e,n,s,a,f)=>{const g=y=>f.isInline(y.nodeName.toLowerCase())&&!td(s,a,e);return G3(!n,s).fold(()=>G3(n,a).fold(ue,g),g)},_B=(e,n,s,a)=>{const f=a.getNode(!n);return Mb(ye.fromDom(e),ye.fromDom(s.getNode())).map(g=>Mr(g)?pl.remove(g.dom):pl.moveToElement(f)).orThunk(()=>V.some(pl.moveToElement(f)))},DB=(e,n,s,a)=>Ml(n,e,s).bind(f=>DW(f.getNode())||PW(e,n,s,f,a)?V.none():n&&gs(f.getNode())||!n&&gs(f.getNode(!0))?_B(e,n,s,f):n&&od(s)||!n&&Jf(s)?V.some(pl.moveToPosition(f)):V.none()),RW=(e,n)=>$e(n)?V.none():e&&gs(n.nextSibling)?V.some(pl.moveToElement(n.nextSibling)):!e&&gs(n.previousSibling)?V.some(pl.moveToElement(n.previousSibling)):V.none(),NW=(e,n,s)=>s.fold(a=>V.some(pl.remove(a)),a=>V.some(pl.moveToElement(a)),a=>td(n,a,e)?V.none():V.some(pl.moveToPosition(a))),BW=(e,n,s,a)=>MW(n,s)?RW(n,s.getNode(!n)).orThunk(()=>DB(e,n,s,a)):DB(e,n,s,a).bind(f=>NW(e,s,f)),TC=(e,n,s,a)=>{const f=nE(n?1:-1,e,s),g=bt.fromRangeStart(f),y=ye.fromDom(e);return!n&&od(g)?V.some(pl.remove(g.getNode(!0))):n&&Jf(g)?V.some(pl.remove(g.getNode())):!n&&Jf(g)&&Tb(y,g,a)?nV(y,g,a).map(S=>pl.remove(S.getNode())):n&&od(g)&&Ab(y,g,a)?oV(y,g,a).map(S=>pl.remove(S.getNode())):BW(e,n,g,a)},mO=(e,n)=>s=>(e._selectionOverrides.hideFakeCaret(),eh(e,n,ye.fromDom(s)),!0),FW=(e,n)=>s=>{const a=n?bt.before(s):bt.after(s);return e.selection.setRng(a.toRange()),!0},IW=e=>n=>(e.selection.setRng(n.toRange()),!0),MB=(e,n)=>V.from(fg(e.getBody(),n)),LW=(e,n)=>{const s=e.selection.getNode();return MB(e,s).filter(gs).fold(()=>TC(e.getBody(),n,e.selection.getRng(),e.schema).map(a=>()=>a.fold(mO(e,n),FW(e,n),IW(e))),()=>V.some(ge))},PB=e=>{de(va(e,".mce-offscreen-selection"),ks)},$W=(e,n)=>{const s=e.selection.getNode();return gs(s)&&!_0(s)?MB(e,s.parentNode).filter(gs).fold(()=>V.some(()=>{PB(ye.fromDom(e.getBody())),eh(e,n,ye.fromDom(e.selection.getNode())),yx(e)}),()=>V.some(ge)):hO(e)?V.some(()=>{Pb(e,e.selection.getRng(),ye.fromDom(e.getBody()))}):V.none()},RB=e=>{const n=e.dom,s=e.selection,a=fg(e.getBody(),s.getNode());if(dl(a)&&n.isBlock(a)&&n.isEmpty(a)){const f=n.create("br",{"data-mce-bogus":"1"});n.setHTML(a,""),a.appendChild(f),s.setRng(bt.before(f).toRange())}return!0},dv=(e,n)=>e.selection.isCollapsed()?LW(e,n):$W(e,n),HW=(e,n)=>{const s=bt.fromRangeStart(e.selection.getRng());return Ml(n,e.getBody(),s).filter(a=>n?Y9(a):X9(a)).bind(a=>Iw(n?0:-1,a)).map(a=>()=>e.selection.select(a))},gO=(e,n)=>e.selection.isCollapsed()?HW(e,n):V.none(),m1=Vt,NB=e=>m1(e)&&e.data[0]===Yi,BB=e=>m1(e)&&e.data[e.data.length-1]===Yi,FB=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Yi)},VW=e=>{var n;if(m1(e.previousSibling))return BB(e.previousSibling)||e.previousSibling.appendData(Yi),e.previousSibling;if(m1(e))return NB(e)||e.insertData(0,Yi),e;{const s=FB(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(s,e),s}},OC=e=>{var n,s;if(m1(e.nextSibling))return NB(e.nextSibling)||e.nextSibling.insertData(0,Yi),e.nextSibling;if(m1(e))return BB(e)||e.appendData(Yi),e;{const a=FB(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(a,e.nextSibling):(s=e.parentNode)===null||s===void 0||s.appendChild(a),a}},wg=(e,n)=>e?VW(n):OC(n),zW=Be(wg,!0),UW=Be(wg,!1),fv=(e,n)=>Vt(e.container())?wg(n,e.container()):wg(n,e.getNode()),IB=(e,n)=>{const s=n.get();return s&&e.container()===s&&oc(s)},pO=(e,n)=>n.fold(s=>{Oi(e.get());const a=zW(s);return e.set(a),V.some(bt(a,a.length-1))},s=>La(s).map(a=>{if(IB(a,e)){const f=e.get();return bt(f,1)}else{Oi(e.get());const f=fv(a,!0);return e.set(f),bt(f,1)}}),s=>uu(s).map(a=>{if(IB(a,e)){const f=e.get();return bt(f,f.length-1)}else{Oi(e.get());const f=fv(a,!1);return e.set(f),bt(f,f.length-1)}}),s=>{Oi(e.get());const a=UW(s);return e.set(a),V.some(bt(a,1))}),LB=(e,n)=>{for(let s=0;s<e.length;s++){const a=e[s].apply(null,n);if(a.isSome())return a}return V.none()},tl=ed.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),$B=(e,n)=>{const s=zf(n,e);return s||e},WW=(e,n,s)=>{const a=ug(s),f=$B(n,a.container());return mu(e,f,a).fold(()=>el(f,a).bind(Be(mu,e,f)).map(g=>tl.before(g)),V.none)},jW=(e,n)=>Jm(e,n)===null,HB=(e,n,s)=>mu(e,n,s).filter(Be(jW,n)),ZW=(e,n,s)=>{const a=_b(s);return HB(e,n,a).bind(f=>hl(f,a).isNone()?V.some(tl.start(f)):V.none())},qW=(e,n,s)=>{const a=ug(s);return HB(e,n,a).bind(f=>el(f,a).isNone()?V.some(tl.end(f)):V.none())},GW=(e,n,s)=>{const a=_b(s),f=$B(n,a.container());return mu(e,f,a).fold(()=>hl(f,a).bind(Be(mu,e,f)).map(g=>tl.after(g)),V.none)},KW=e=>!$P(hv(e)),Ji=(e,n,s)=>LB([WW,ZW,qW,GW],[e,n,s]).filter(KW),hv=e=>e.fold(lt,lt,lt,lt),bO=e=>e.fold(me("before"),me("start"),me("end"),me("after")),mv=e=>e.fold(tl.before,tl.before,tl.after,tl.after),vO=e=>e.fold(tl.start,tl.start,tl.end,tl.end),VB=(e,n)=>bO(e)===bO(n)&&hv(e)===hv(n),YW=(e,n,s,a,f,g)=>qr(mu(n,s,a),mu(n,s,f),(y,S)=>y!==S&&gu(s,y,S)?tl.after(e?y:S):g).getOr(g),zB=(e,n)=>e.fold(je,s=>!VB(s,n)),XW=(e,n,s,a,f)=>{const g=Go(e,f);return Ml(e,s,g).map(Be(Go,e)).fold(()=>a.map(mv),E=>Ji(n,s,E).map(Be(YW,e,n,s,g,E)).filter(Be(zB,a))).filter(KW)},JW=(e,n)=>e?n.fold(O(V.some,tl.start),V.none,O(V.some,tl.after),V.none):n.fold(V.none,O(V.some,tl.before),V.none,O(V.some,tl.end)),QW=(e,n,s,a)=>{const f=Go(e,a),g=Ji(n,s,f);return Ji(n,s,f).bind(Be(JW,e)).orThunk(()=>XW(e,n,s,g,a))},g1=e=>Ee(e.selection.getSel().modify),yO=(e,n,s)=>{const a=e?1:-1;return n.setRng(bt(s.container(),s.offset()+a).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},UB=(e,n)=>{const s=n.selection.getRng(),a=e?bt.fromRangeEnd(s):bt.fromRangeStart(s);return g1(n)?e&&K2(a)?yO(!0,n.selection,a):!e&&Gy(a)?yO(!1,n.selection,a):!1:!1};var cd;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(cd||(cd={}));const p1=(e,n)=>e===Hi.Backwards?Yn(n):n,ej=(e,n,s)=>e===Hi.Forwards?n.next(s):n.prev(s),tj=(e,n,s,a)=>Us(a.getNode(n===Hi.Forwards))?cd.Br:td(s,a)===!1?cd.Block:cd.Wrap,WB=(e,n,s,a)=>{const f=Ld(s);let g=a;const y=[];for(;g;){const S=ej(n,f,g);if(!S)break;if(Us(S.getNode(!1)))return n===Hi.Forwards?{positions:p1(n,y).concat([S]),breakType:cd.Br,breakAt:V.some(S)}:{positions:p1(n,y),breakType:cd.Br,breakAt:V.some(S)};if(!S.isVisible()){g=S;continue}if(e(g,S)){const E=tj(s,n,g,S);return{positions:p1(n,y),breakType:E,breakAt:V.some(S)}}y.push(S),g=S}return{positions:p1(n,y),breakType:cd.Eol,breakAt:V.none()}},nj=(e,n,s,a)=>n(s,a).breakAt.map(f=>{const g=n(s,f).positions;return e===Hi.Backwards?g.concat(f):[f].concat(g)}).getOr([]),jB=(e,n)=>ve(e,(s,a)=>s.fold(()=>V.some(a),f=>qr(jt(f.getClientRects()),jt(a.getClientRects()),(g,y)=>{const S=Math.abs(n-g.left);return Math.abs(n-y.left)<=S?a:f}).or(s)),V.none()),wO=(e,n)=>jt(n.getClientRects()).bind(s=>jB(e,s.left)),bl=Be(WB,bt.isAbove,-1),gv=Be(WB,bt.isBelow,1),ZB=Be(nj,-1,bl),Gh=Be(nj,1,gv),xO=(e,n)=>bl(e,n).breakAt.isNone(),qB=(e,n)=>gv(e,n).breakAt.isNone(),_C=e=>La(e).map(n=>[n].concat(gv(e,n).positions)).getOr([]),oj=e=>uu(e).map(n=>bl(e,n).positions.concat(n)).getOr([]),sj=(e,n)=>wO(ZB(e,n),n),rj=(e,n)=>wO(Gh(e,n),n),ij=gs,GB=(e,n)=>Math.abs(e.left-n),KB=(e,n)=>Math.abs(e.right-n),ah=e=>hi(e,"node"),YB=(e,n)=>ke(e,(s,a)=>{const f=Math.min(GB(s,n),KB(s,n)),g=Math.min(GB(a,n),KB(a,n));return g===f&&ah(a)&&ij(a.node)||g<f?a:s}),aj=e=>{const n=s=>nt(s,a=>{const f=Gm(a);return f.node=e,f});if(xn(e))return n(e.getClientRects());if(Vt(e)){const s=e.ownerDocument.createRange();return s.setStart(e,0),s.setEnd(e,e.data.length),n(s.getClientRects())}else return[]},XB=e=>On(e,aj);var pv;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(pv||(pv={}));const lj=(e,n,s,a)=>{let f=a;for(;f=Tp(f,e,X2,n);)if(s(f))return},DC=(e,n,s,a,f,g)=>{let y=0;const S=[],E=$=>{let W=XB([$]);e===-1&&(W=W.reverse());for(let re=0;re<W.length;re++){const fe=W[re];if(!s(fe,P)){if(S.length>0&&n(fe,ut(S))&&y++,fe.line=y,f(fe))return!0;S.push(fe)}}return!1},P=ut(g.getClientRects());if(!P)return S;const L=g.getNode();return L&&(E(L),lj(e,a,E,L)),S},CO=(e,n)=>n.line>e,SO=(e,n)=>n.line===e,JB=Be(DC,pv.Up,Ym,Y0),QB=Be(DC,pv.Down,Y0,Ym),kO=e=>ut(e.getClientRects()),cj=(e,n,s,a)=>{const f=Ld(n);let g,y,S,E;const P=[];let L=0;e===1?(g=f.next,y=Y0,S=Ym,E=bt.after(a)):(g=f.prev,y=Ym,S=Y0,E=bt.before(a));const $=kO(E);do{if(!E.isVisible())continue;const W=kO(E);if(S(W,$))continue;P.length>0&&y(W,ut(P))&&L++;const re=Gm(W);if(re.position=E,re.line=L,s(re))return P;P.push(re)}while(E=g(E));return P},b1=e=>n=>CO(e,n),v1=e=>n=>SO(e,n),tf=(e,n)=>{e.selection.setRng(n),Sb(e,e.selection.getRng())},MC=(e,n,s)=>V.some(kC(e,n,s)),EO=(e,n,s,a,f,g)=>{const y=n===Hi.Forwards,S=Ld(e.getBody()),E=Be(oE,y?S.next:S.prev),P=y?a:f;if(!s.collapsed){const fe=gw(s);if(g(fe))return ef(n,e,fe,n===Hi.Backwards,!1);if(hO(e)){const te=s.cloneRange();return te.collapse(n===Hi.Backwards),V.from(te)}}const L=lb(n,e.getBody(),s);if(P(L))return h1(e,L.getNode(!y));let $=E(L);const W=PM(s);if($)$=Go(y,$);else return W?V.some(s):V.none();if(P($))return ef(n,e,$.getNode(!y),y,!1);const re=E($);return re&&P(re)&&$w($,re)?ef(n,e,re.getNode(!y),y,!1):W?MC(e,$.toRange(),!1):V.none()},AO=(e,n,s,a,f,g)=>{const y=lb(n,e.getBody(),s),S=ut(y.getClientRects()),E=n===pv.Down,P=e.getBody();if(!S)return V.none();if(hO(e)){const he=E?bt.fromRangeEnd(s):bt.fromRangeStart(s);return(E?rj:sj)(P,he).orThunk(()=>V.from(he)).map(ze=>ze.toRange())}const $=(E?QB:JB)(P,b1(1),y),W=Ne($,v1(1)),re=S.left,fe=YB(W,re);if(fe&&g(fe.node)){const he=Math.abs(re-fe.left),Le=Math.abs(re-fe.right);return ef(n,e,fe.node,he<Le,!1)}let te;if(a(y)?te=y.getNode():f(y)?te=y.getNode(!0):te=gw(s),te){const he=cj(n,P,b1(1),te);let Le=YB(Ne(he,v1(1)),re);if(Le||(Le=ut(Ne(he,v1(0))),Le))return MC(e,Le.position.toRange(),!1)}return W.length===0?y1(e,E).filter(E?f:a).map(he=>kC(e,he.toRange(),!1)):V.none()},y1=(e,n)=>{const s=e.selection.getRng(),a=n?bt.fromRangeEnd(s):bt.fromRangeStart(s),f=j3(a.container(),e.getBody());if(n){const g=gv(f,a);return vn(g.positions)}else{const g=bl(f,a);return jt(g.positions)}},PC=(e,n,s)=>y1(e,n).filter(s).exists(a=>(e.selection.setRng(a.toRange()),!0)),Kh=(e,n)=>{const s=e.dom.createRng();s.setStart(n.container(),n.offset()),s.setEnd(n.container(),n.offset()),e.selection.setRng(s)},eF=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},TO=(e,n,s)=>pO(n,s).map(a=>(Kh(e,a),s)),uj=(e,n,s)=>{const a=bt.fromRangeStart(e);if(e.collapsed)return a;{const f=bt.fromRangeEnd(e);return s?hl(n,f).getOr(f):el(n,a).getOr(a)}},dj=(e,n,s)=>{const a=e.getBody(),f=uj(e.selection.getRng(),a,s),g=Be(cg,e);return QW(s,g,a,f).bind(S=>TO(e,n,S))},tF=(e,n,s)=>{const a=nt(va(ye.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),y=>y.dom),f=Ne(a,e),g=Ne(s,e);de(ls(f,g),Be(eF,!1)),de(ls(g,f),Be(eF,!0))},fj=(e,n)=>{const s=n.get();if(e.selection.isCollapsed()&&!e.composing&&s){const a=bt.fromRangeStart(e.selection.getRng());bt.isTextPosition(a)&&!CV(a)&&(Kh(e,H3(s,a)),n.set(null))}},nF=(e,n,s,a)=>{if(n.selection.isCollapsed()){const f=Ne(a,e);de(f,g=>{const y=bt.fromRangeStart(n.selection.getRng());Ji(e,n.getBody(),y).bind(S=>TO(n,s,S))})}},hj=(e,n,s)=>nb(e)?dj(e,n,s).isSome():!1,oF=(e,n,s)=>nb(n)?UB(e,n):!1,mj=e=>{const n=Ur(null),s=Be(cg,e);return e.on("NodeChange",a=>{nb(e)&&(tF(s,e.dom,a.parents),fj(e,n),nF(s,e,n,a.parents))}),n},gj=Be(oF,!0),pj=Be(oF,!1),RC=(e,n,s)=>{if(nb(e)){const a=y1(e,n).getOrThunk(()=>{const f=e.selection.getRng();return n?bt.fromRangeEnd(f):bt.fromRangeStart(f)});return Ji(Be(cg,e),e.getBody(),a).exists(f=>{const g=mv(f);return pO(s,g).exists(y=>(Kh(e,y),!0))})}else return!1},bj=(e,n)=>{const s=document.createRange();return s.setStart(e.container(),e.offset()),s.setEnd(n.container(),n.offset()),s},vj=e=>qr(La(e),uu(e),(n,s)=>{const a=Go(!0,n),f=Go(!1,s);return el(e,a).forall(g=>g.isEqual(f))}).getOr(!0),sF=(e,n)=>s=>pO(n,s).map(a=>()=>Kh(e,a)),OO=(e,n,s,a)=>{const f=e.getBody(),g=Be(cg,e);e.undoManager.ignore(()=>{e.selection.setRng(bj(s,a)),Db(e),Ji(g,f,bt.fromRangeStart(e.selection.getRng())).map(vO).bind(sF(e,n)).each(wt)}),e.nodeChanged()},yj=(e,n)=>{const s=zf(n,e);return s||e},xg=(e,n,s,a)=>{const f=yj(e.getBody(),a.container()),g=Be(cg,e),y=Ji(g,f,a);return y.bind(E=>s?E.fold(me(V.some(vO(E))),V.none,me(V.some(mv(E))),V.none):E.fold(V.none,me(V.some(mv(E))),V.none,me(V.some(vO(E))))).map(sF(e,n)).getOrThunk(()=>{const E=jf(s,f,a),P=E.bind(L=>Ji(g,f,L));return qr(y,P,()=>mu(g,f,a).bind(L=>vj(L)?V.some(()=>{eh(e,s,ye.fromDom(L))}):V.none())).getOrThunk(()=>P.bind(()=>E.map(L=>()=>{s?OO(e,n,a,L):OO(e,n,L,a)})))})},NC=(e,n,s)=>{if(e.selection.isCollapsed()&&nb(e)){const a=bt.fromRangeStart(e.selection.getRng());return xg(e,n,s,a)}return V.none()},_O=e=>Pa(e)>1,DO=(e,n)=>{const s=ye.fromDom(e.getBody()),a=ye.fromDom(e.selection.getStart()),f=Ud(a,s);return en(f,n).fold(me(f),g=>f.slice(0,g))},MO=e=>Pa(e)===1,Yh=e=>DO(e,n=>e.schema.isBlock(ts(n))||_O(n)),rF=e=>DO(e,n=>e.schema.isBlock(ts(n))),vc=(e,n)=>{const s=Be(Zd,e);return On(n,a=>s(a)?[a.dom]:[])},Xh=e=>{const n=rF(e);return vc(e,n)},PO=(e,n,s,a)=>{const f=vc(n,a);if(f.length===0)eh(n,e,s);else{const g=AR(s.dom,f);n.selection.setRng(g.toRange())}},wj=(e,n)=>{const s=Ne(Yh(e),MO);return vn(s).bind(a=>{const f=bt.fromRangeStart(e.selection.getRng());return wx(n,f,a.dom)&&!AE(a)?V.some(()=>PO(n,e,a,s)):V.none()})},iF=(e,n)=>{const s=n.parentElement;return Us(n)&&!G(s)&&e.dom.isEmpty(s)},xj=e=>AE(ye.fromDom(e)),aF=(e,n)=>{const s=e.selection.getStart(),a=iF(e,s)||xj(s)?AR(s,n):$x(e.selection.getRng(),n);e.selection.setRng(a.toRange())},Cj=(e,n)=>{const s=ls(n,Xh(e));s.length>0&&aF(e,s)},lF=e=>Vt(e.startContainer),Sj=e=>e.startOffset===0&&lF(e),cF=(e,n)=>{const s=n.startContainer.parentElement;return!G(s)&&Zd(e,ye.fromDom(s))},kj=e=>{const n=e.startContainer.parentNode,s=e.endContainer.parentNode;return!G(n)&&!G(s)&&n.isEqualNode(s)},Ej=e=>{const n=e.endContainer;return e.endOffset===(Vt(n)?n.length:n.childNodes.length)},w1=e=>kj(e)&&Ej(e),RO=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),uF=e=>w1(e)||RO(e),dF=e=>{const n=e.selection.getRng();return Sj(n)&&cF(e,n)&&uF(n)},NO=e=>{if(dF(e)){const n=Xh(e);return V.some(()=>{Db(e),Cj(e,n)})}else return V.none()},BO=(e,n)=>e.selection.isCollapsed()?wj(e,n):NO(e),Aj=(e,n)=>EV(e,s=>uc(s.dom),s=>n.isBlock(ts(s))),Tj=e=>Aj(ye.fromDom(e.selection.getStart()),e.schema),Oj=e=>{const n=e.selection.getRng();return n.collapsed&&(lF(n)||e.dom.isEmpty(n.startContainer))&&!Tj(e)},bv=e=>(Oj(e)&&aF(e,[]),!0),FO=(e,n,s)=>le(s)?V.some(()=>{e._selectionOverrides.hideFakeCaret(),eh(e,n,ye.fromDom(s))}):V.none(),_j=(e,n)=>{const s=n?Eb:zp,a=n?Hi.Forwards:Hi.Backwards,f=lb(a,e.getBody(),e.selection.getRng());return s(f)?FO(e,n,f.getNode(!n)):V.from(Go(n,f)).filter(g=>s(g)&&$w(f,g)).bind(g=>FO(e,n,g.getNode(!n)))},fF=(e,n)=>{const s=e.selection.getNode();return Xr(s)?FO(e,n,s):V.none()},IO=(e,n)=>e.selection.isCollapsed()?_j(e,n):fF(e,n),Dj=e=>ul(e,n=>dl(n.dom)||gs(n.dom)).exists(n=>dl(n.dom)),vl=e=>Wi(e!=null?e:"").getOr(0),hF=(e,n)=>{const s=e||ec(n)?"margin":"padding",a=ru(n,"direction")==="rtl"?"-right":"-left";return s+a},LO=(e,n,s,a,f,g)=>{const y=hF(s,ye.fromDom(g)),S=vl(e.getStyle(g,y));if(n==="outdent"){const E=Math.max(0,S-a);e.setStyle(g,y,E?E+f:"")}else{const E=S+a+f;e.setStyle(g,y,E)}},mF=(e,n)=>ao(n,s=>{const a=hF(Ew(e),s),f=Tm(s,a).map(vl).getOr(0);return e.dom.getContentEditable(s.dom)!=="false"&&f>0}),BC=e=>{const n=pF(e);return!e.mode.isReadOnly()&&(n.length>1||mF(e,n))},gF=e=>Tl(e)||Bm(e),Mj=e=>sa(e).exists(gF),pF=e=>Ne(Ch(e.selection.getSelectedBlocks()),n=>!gF(n)&&!Mj(n)&&Dj(n)),bF=(e,n)=>{var s,a;const{dom:f}=e,g=y3(e),y=(a=(s=/[a-z%]+$/i.exec(g))===null||s===void 0?void 0:s[0])!==null&&a!==void 0?a:"px",S=vl(g),E=Ew(e);de(pF(e),P=>{LO(f,n,E,S,y,P.dom)})},Pj=e=>bF(e,"indent"),$O=e=>bF(e,"outdent"),vF=e=>{if(e.selection.isCollapsed()&&BC(e)){const n=e.dom,s=e.selection.getRng(),a=bt.fromRangeStart(s),f=n.getParent(s.startContainer,n.isBlock);if(f!==null&&iA(ye.fromDom(f),a,e.schema))return V.some(()=>$O(e))}return V.none()},yF=(e,n,s)=>lo([vF,dv,fO,(a,f)=>NC(a,n,f),uO,$b,gO,IO,SC,BO],a=>a(e,s)).filter(a=>e.selection.isEditable()),vv=(e,n)=>{yF(e,n,!1).fold(()=>{e.selection.isEditable()&&(Db(e),yx(e))},wt)},lh=(e,n)=>{yF(e,n,!0).fold(()=>{e.selection.isEditable()&&SV(e)},wt)},Cg=(e,n)=>{e.addCommand("delete",()=>{vv(e,n)}),e.addCommand("forwardDelete",()=>{lh(e,n)})},yv=5,HO=400,FC=e=>e.touches===void 0||e.touches.length!==1?V.none():V.some(e.touches[0]),wF=(e,n)=>{const s=Math.abs(e.clientX-n.x),a=Math.abs(e.clientY-n.y);return s>yv||a>yv},Rj=e=>{const n=Th(),s=Ur(!1),a=pk(f=>{e.dispatch("longpress",Ot(ie({},f),{type:"longpress"})),s.set(!0)},HO);e.on("touchstart",f=>{FC(f).each(g=>{a.cancel();const y={x:g.clientX,y:g.clientY,target:f.target};a.throttle(f),s.set(!1),n.set(y)})},!0),e.on("touchmove",f=>{a.cancel(),FC(f).each(g=>{n.on(y=>{wF(g,y)&&(n.clear(),s.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",f=>{a.cancel(),f.type!=="touchcancel"&&n.get().filter(g=>g.target.isEqualNode(f.target)).each(()=>{s.get()?f.preventDefault():e.dispatch("tap",Ot(ie({},f),{type:"tap"}))})},!0)},IC=(e,n)=>Bn(e,n.nodeName),xF=(e,n)=>Vt(n)?!0:xn(n)?!IC(e.getBlockElements(),n)&&!dc(n)&&!ns(e,n)&&!ek(n):!1,Nj=(e,n,s)=>Bt(sA(ye.fromDom(s),ye.fromDom(n)),a=>IC(e,a.dom)),Bj=(e,n)=>{if(Vt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||IC(e,n.nextSibling)||ek(n.nextSibling)}return!1},CF=e=>e.dom.create(Ia(e),eb(e)),Fj=e=>{const n=e.dom,s=e.selection,a=e.schema,f=a.getBlockElements(),g=s.getStart(),y=e.getBody();let S,E,P=!1;const L=Ia(e);if(!g||!xn(g))return;const $=y.nodeName.toLowerCase();if(!a.isValidChild($,L.toLowerCase())||Nj(f,y,g))return;const W=s.getRng(),{startContainer:re,startOffset:fe,endContainer:te,endOffset:he}=W,Le=Fh(e);let ze=y.firstChild;for(;ze;)if(xn(ze)&&FM(a,ze),xF(a,ze)){if(Bj(f,ze)){E=ze,ze=ze.nextSibling,n.remove(E);continue}S||(S=CF(e),y.insertBefore(S,ze),P=!0),E=ze,ze=ze.nextSibling,S.appendChild(E)}else S=null,ze=ze.nextSibling;P&&Le&&(W.setStart(re,fe),W.setEnd(te,he),s.setRng(W),e.nodeChanged())},SF=(e,n,s)=>{const a=ye.fromDom(CF(e)),f=Zu();Yr(a,f),s(n,a);const g=document.createRange();return g.setStartBefore(f.dom),g.setEndBefore(f.dom),g},Ij=e=>{e.on("NodeChange",Be(Fj,e))},VO=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,kF=(e,n,s)=>function(a){const f=arguments,g=f[f.length-2],y=g>0?n.charAt(g-1):"";if(y==='"')return a;if(y===">"){const S=n.lastIndexOf("<",g);if(S!==-1&&n.substring(S,g).indexOf('contenteditable="false"')!==-1)return a}return'<span class="'+s+'" data-mce-content="'+e.dom.encode(f[0])+'">'+e.dom.encode(typeof f[1]=="string"?f[1]:f[0])+"</span>"},Ree=(e,n,s)=>{let a=n.length,f=s.content;if(s.format!=="raw"){for(;a--;)f=f.replace(n[a],kF(e,f,N3(e)));s.content=f}},Nee=(e,n)=>ao(e,s=>{const a=n.match(s);return a!==null&&a[0].length===n.length}),Bee=e=>{const n="contenteditable",s=" "+Lt.trim(F7(e))+" ",a=" "+Lt.trim(N3(e))+" ",f=VO(s),g=VO(a),y=I7(e);y.length>0&&e.on("BeforeSetContent",S=>{Ree(e,y,S)}),e.parser.addAttributeFilter("class",S=>{let E=S.length;for(;E--;){const P=S[E];f(P)?P.attr(n,"true"):g(P)&&P.attr(n,"false")}}),e.serializer.addAttributeFilter(n,S=>{let E=S.length;for(;E--;){const P=S[E];if(!f(P)&&!g(P))continue;const L=P.attr("data-mce-content");y.length>0&&L?Nee(y,L)?(P.name="#text",P.type=3,P.raw=!0,P.value=L):P.remove():P.attr(n,null)}})},Lj=e=>wh(ye.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),$j=(e,n)=>{n.hasAttribute("data-mce-caret")&&(Sh(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},Fee=(e,n)=>{const s=Lj(e);if(s){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),$j(e,s);return}DM(s)&&($j(e,s),e.undoManager.add())}},Hj=e=>{e.on("keyup compositionstart",Be(Fee,e))},EF=gs,Iee=(e,n,s)=>EO(n,e,s,Jf,od,EF),Vj=(e,n,s)=>AO(n,e,s,g=>Jf(g)||xP(g),g=>od(g)||Ro(g),EF),Il=e=>{const n=e.dom.create(Ia(e));return n.innerHTML='<br data-mce-bogus="1">',n},zO=(e,n,s)=>{const a=Ld(e.getBody()),f=Be(oE,n===1?a.next:a.prev);if(s.collapsed){const g=e.dom.getParent(s.startContainer,"PRE");if(!g)return;if(!f(bt.fromRangeStart(s))){const S=ye.fromDom(Il(e));n===1?Hu(ye.fromDom(g),S):Ra(ye.fromDom(g),S),e.selection.select(S.dom,!0),e.selection.collapse()}}},wv=(e,n)=>{const s=n?Hi.Forwards:Hi.Backwards,a=e.selection.getRng();return Iee(s,e,a).orThunk(()=>(zO(e,s,a),V.none()))},zj=(e,n)=>{const s=n?1:-1,a=e.selection.getRng();return Vj(s,e,a).orThunk(()=>(zO(e,s,a),V.none()))},AF=(e,n)=>{const s=n?e.getEnd(!0):e.getStart(!0);return $P(s)?!n:n},UO=(e,n)=>wv(e,AF(e.selection,n)).exists(s=>(tf(e,s),!0)),LC=(e,n)=>zj(e,n).exists(s=>(tf(e,s),!0)),TF=(e,n)=>PC(e,n,n?od:Jf),$C=(e,n)=>AC(e,!n).map(s=>{const a=s.toRange(),f=e.selection.getRng();return n?a.setStart(f.startContainer,f.startOffset):a.setEnd(f.endContainer,f.endOffset),a}).exists(s=>(tf(e,s),!0)),OF=e=>Qe(["figcaption"],ts(e)),Uj=(e,n,s)=>{const a=Be(ws,n);return ul(ye.fromDom(e.container()),f=>s.isBlock(ts(f)),a).filter(OF)},Wj=(e,n,s)=>n?qB(e.dom,s):xO(e.dom,s),jj=(e,n)=>{const s=ye.fromDom(e.getBody()),a=bt.fromRangeStart(e.selection.getRng());return Uj(a,s,e.schema).exists(()=>{if(Wj(s,n,a)){const g=SF(e,s,n?Yr:Om);return e.selection.setRng(g),!0}else return!1})},HC=(e,n)=>e.selection.isCollapsed()?jj(e,n):!1,Zj=(e,n,s)=>{const a=e.selection.getRng(),f=bt.fromRangeStart(a);return e.getBody().firstChild===n&&xO(s,f)?(e.execCommand("InsertNewBlockBefore"),!0):!1},qj=(e,n)=>{const s=e.selection.getRng(),a=bt.fromRangeStart(s);return e.getBody().lastChild===n&&qB(n,a)?(e.execCommand("InsertNewBlockAfter"),!0):!1},Lee=(e,n)=>n?V.from(e.dom.getParent(e.selection.getNode(),"details")).map(s=>qj(e,s)).getOr(!1):V.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(s=>V.from(e.dom.getParent(s,"details")).map(a=>Zj(e,a,s))).getOr(!1),_F=(e,n)=>Lee(e,n),WO={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},$ee=e=>nt(e,n=>ie(ie({},WO),n)),Gj=e=>nt(e,n=>ie(ie({},WO),n)),DF=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Kj=(e,n)=>On($ee(e),s=>DF(s,n)?[s]:[]),jO=(e,n)=>On(Gj(e),s=>DF(s,n)?[s]:[]),no=(e,...n)=>()=>e.apply(null,n),x1=(e,n)=>st(Kj(e,n),s=>s.action()),ZO=(e,n)=>lo(jO(e,n),s=>s.action()),MF=(e,n)=>{const s=n?Hi.Forwards:Hi.Backwards,a=e.selection.getRng();return EO(e,s,a,Eb,zp,Xr).exists(f=>(tf(e,f),!0))},PF=(e,n)=>{const s=n?1:-1,a=e.selection.getRng();return AO(e,s,a,Eb,zp,Xr).exists(f=>(tf(e,f),!0))},VC=(e,n)=>PC(e,n,n?zp:Eb),RF=ed.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Yj=e=>RF.none(e),xv=Ot(ie({},RF),{none:Yj}),Xj=(e,n)=>$c(e,n,je),$c=(e,n,s)=>On(pi(e),a=>El(a,n)?s(a)?[a]:[]:$c(a,n,s)),NF=(e,n,s=ue)=>{if(s(n))return V.none();if(Qe(e,ts(n)))return V.some(n);const a=f=>El(f,"table")||s(f);return Ef(n,e.join(","),a)},BF=(e,n)=>NF(["td","th"],e,n),Hee=e=>Xj(e,"th,td"),Jj=(e,n)=>Td(e,"table",n),FF=(e,n,s,a,f=je)=>{const g=a===1;if(!g&&s<=0)return xv.first(e[0]);if(g&&s>=e.length-1)return xv.last(e[e.length-1]);{const y=s+a,S=e[y];return f(S)?xv.middle(n,S):FF(e,n,y,a,f)}},Qj=(e,n)=>Jj(e,n).bind(s=>{const a=Hee(s);return en(a,g=>ws(e,g)).map(g=>({index:g,all:a}))}),eZ=(e,n,s)=>Qj(e,s).fold(()=>xv.none(e),f=>FF(f.all,e,f.index,1,n)),zC=(e,n,s)=>Qj(e,s).fold(()=>xv.none(),f=>FF(f.all,e,f.index,-1,n)),tZ=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),qO=(e,n)=>On(n,s=>{const a=tZ(Gm(s.getBoundingClientRect()),-1);return[{x:a.left,y:e(a),cell:s},{x:a.right,y:e(a),cell:s}]}),IF=(e,n,s)=>ve(e,(a,f)=>a.fold(()=>V.some(f),g=>{const y=Math.sqrt(Math.abs(g.x-n)+Math.abs(g.y-s)),S=Math.sqrt(Math.abs(f.x-n)+Math.abs(f.y-s));return V.some(S<y?f:g)}),V.none()),GO=(e,n,s,a,f)=>{const g=va(ye.fromDom(s),"td,th,caption").map(S=>S.dom),y=Ne(qO(e,g),S=>n(S,f));return IF(y,a,f).map(S=>S.cell)},LF=e=>e.bottom,nZ=e=>e.top,oZ=(e,n)=>e.y<n,sZ=(e,n)=>e.y>n,rZ=Be(GO,LF,oZ),UC=Be(GO,nZ,sZ),iZ=(e,n)=>jt(n.getClientRects()).bind(s=>rZ(e,s.left,s.top)).bind(s=>wO(oj(s),n)),aZ=(e,n)=>vn(n.getClientRects()).bind(s=>UC(e,s.left,s.top)).bind(s=>wO(_C(s),n)),lZ=(e,n,s)=>s.breakAt.exists(a=>e(n,a).breakAt.isSome()),KO=e=>e.breakType===cd.Wrap&&e.positions.length===0,cZ=e=>e.breakType===cd.Br&&e.positions.length===1,$F=(e,n,s)=>{const a=e(n,s);return KO(a)||!Us(s.getNode())&&cZ(a)?!lZ(e,n,a):a.breakAt.isNone()},HF=Be($F,bl),uZ=Be($F,gv),dZ=(e,n,s)=>{const a=bt.fromRangeStart(n);return Mp(!e,s).exists(f=>f.isEqual(a))},fZ=(e,n,s,a)=>{const f=e.selection.getRng(),g=n?1:-1;return W3()&&dZ(n,f,s)?(ef(g,e,s,!n,!1).each(y=>{tf(e,y)}),!0):!1},hZ=(e,n,s)=>iZ(n,s).orThunk(()=>jt(s.getClientRects()).bind(a=>jB(ZB(e,bt.before(n)),a.left))).getOr(bt.before(n)),mZ=(e,n,s)=>aZ(n,s).orThunk(()=>jt(s.getClientRects()).bind(a=>jB(Gh(e,bt.after(n)),a.left))).getOr(bt.after(n)),VF=(e,n)=>{const s=n.getNode(e);return Dd(s)?V.some(s):V.none()},YO=(e,n,s)=>{n.undoManager.transact(()=>{const a=e?Hu:Ra,f=SF(n,ye.fromDom(s),a);tf(n,f)})},zF=(e,n,s)=>{const a=VF(!!n,s),f=n===!1;a.fold(()=>tf(e,s.toRange()),g=>Mp(f,e.getBody()).filter(y=>y.isEqual(s)).fold(()=>tf(e,s.toRange()),y=>YO(n,e,g)))},UF=(e,n,s,a)=>{const f=e.selection.getRng(),g=bt.fromRangeStart(f),y=e.getBody();if(!n&&HF(a,g)){const S=hZ(y,s,g);return zF(e,n,S),!0}else if(n&&uZ(a,g)){const S=mZ(y,s,g);return zF(e,n,S),!0}else return!1},WF=(e,n,s)=>V.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(a=>V.from(e.dom.getParent(a,"table")).map(f=>s(e,n,f,a))).getOr(!1),jF=(e,n)=>WF(e,n,fZ),XO=(e,n)=>WF(e,n,UF),gZ=e=>{const n=zd.exact(e,0,e,0);return qH(n)},ZF=(e,n,s)=>s.fold(V.none,V.none,(a,f)=>M9(f).map(g=>gZ(g)),a=>(e.execCommand("mceTableInsertRowAfter"),qF(e,n,a))),qF=(e,n,s)=>ZF(e,n,eZ(s,_o)),xi=(e,n,s)=>ZF(e,n,zC(s,_o)),GF=(e,n)=>{const s=["table","li","dl"],a=ye.fromDom(e.getBody()),f=S=>{const E=ts(S);return ws(S,a)||Qe(s,E)},g=e.selection.getRng(),y=ye.fromDom(n?g.endContainer:g.startContainer);return BF(y,f).map(S=>(Jj(S,f).each(L=>{e.model.table.clearSelectedCells(L.dom)}),e.selection.collapse(!n),(n?qF:xi)(e,f,S).each(L=>{e.selection.setRng(L)}),!0)).getOr(!1)},pZ=(e,n,s)=>{const a=on.os.isMacOS()||on.os.isiOS();x1([{keyCode:mn.RIGHT,action:no(UO,e,!0)},{keyCode:mn.LEFT,action:no(UO,e,!1)},{keyCode:mn.UP,action:no(LC,e,!1)},{keyCode:mn.DOWN,action:no(LC,e,!0)},...a?[{keyCode:mn.UP,action:no($C,e,!1),metaKey:!0,shiftKey:!0},{keyCode:mn.DOWN,action:no($C,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:mn.RIGHT,action:no(jF,e,!0)},{keyCode:mn.LEFT,action:no(jF,e,!1)},{keyCode:mn.UP,action:no(XO,e,!1)},{keyCode:mn.DOWN,action:no(XO,e,!0)},{keyCode:mn.UP,action:no(XO,e,!1)},{keyCode:mn.UP,action:no(_F,e,!1)},{keyCode:mn.DOWN,action:no(_F,e,!0)},{keyCode:mn.RIGHT,action:no(MF,e,!0)},{keyCode:mn.LEFT,action:no(MF,e,!1)},{keyCode:mn.UP,action:no(PF,e,!1)},{keyCode:mn.DOWN,action:no(PF,e,!0)},{keyCode:mn.RIGHT,action:no(hj,e,n,!0)},{keyCode:mn.LEFT,action:no(hj,e,n,!1)},{keyCode:mn.RIGHT,ctrlKey:!a,altKey:a,action:no(gj,e,n)},{keyCode:mn.LEFT,ctrlKey:!a,altKey:a,action:no(pj,e,n)},{keyCode:mn.UP,action:no(HC,e,!1)},{keyCode:mn.DOWN,action:no(HC,e,!0)}],s).each(f=>{s.preventDefault()})},bZ=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||pZ(e,n,s)})},Su=(e,n)=>({container:e,offset:n}),C1=nr.DOM,Cv=e=>n=>e===n?-1:0,Jh=e=>n=>e.isBlock(n)||Qe(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",Sv=(e,n,s)=>{if(Vt(e)&&n>=0)return V.some(Su(e,n));{const a=Zm(C1);return V.from(a.backwards(e,n,Cv(e),s)).map(f=>Su(f.container,f.container.data.length))}},KF=(e,n,s)=>{if(Vt(e)&&n>=e.length)return V.some(Su(e,n));{const a=Zm(C1);return V.from(a.forwards(e,n,Cv(e),s)).map(f=>Su(f.container,0))}},kv=(e,n,s)=>{if(!Vt(e))return V.none();const a=e.data;if(n>=0&&n<=a.length)return V.some(Su(e,n));{const f=Zm(C1);return V.from(f.backwards(e,n,Cv(e),s)).bind(g=>{const y=g.container.data;return kv(g.container,n+y.length,s)})}},WC=(e,n,s)=>{if(!Vt(e))return V.none();const a=e.data;if(n<=a.length)return V.some(Su(e,n));{const f=Zm(C1);return V.from(f.forwards(e,n,Cv(e),s)).bind(g=>WC(g.container,n-a.length,s))}},Ev=(e,n,s,a,f)=>{const g=Zm(e,Jh(e));return V.from(g.backwards(n,s,a,f))},YF=e=>e.collapsed&&Vt(e.startContainer),Av=e=>nc(e.toString().replace(/\u00A0/g," ")),Tv=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,Sg=(e,n)=>e.substring(n.length),Ov=(e,n,s)=>{let a;const f=s.charAt(0);for(a=n-1;a>=0;a--){const g=e.charAt(a);if(Tv(g))return V.none();if(f===g&&$n(e,s,a,n))break}return V.some(a)},ku=(e,n,s,a=0)=>{if(!YF(n))return V.none();const f={text:"",offset:0},g=(S,E,P)=>(f.text=P+f.text,f.offset+=E,Ov(f.text,f.offset,s).getOr(E)),y=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Ev(e,n.startContainer,n.startOffset,g,y).bind(S=>{const E=n.cloneRange();if(E.setStart(S.container,S.offset),E.setEnd(n.endContainer,n.endOffset),E.collapsed)return V.none();const P=Av(E);return P.lastIndexOf(s)!==0||Sg(P,s).length<a?V.none():V.some({text:Sg(P,s),range:E,trigger:s})})},S1=(e,n,s,a=0)=>B9(ye.fromDom(n.startContainer)).fold(()=>ku(e,n,s,a),f=>{const g=e.createRng();g.selectNode(f.dom);const y=Av(g);return V.some({range:g,text:Sg(y,s),trigger:s})}),XF=e=>e.nodeType===xf,JF=e=>e.nodeType===cl,QF=e=>{if(XF(e))return Su(e,e.data.length);{const n=e.childNodes;return n.length>0?QF(n[n.length-1]):Su(e,n.length)}},JO=(e,n)=>{const s=e.childNodes;return s.length>0&&n<s.length?JO(s[n],0):s.length>0&&JF(e)&&s.length===n?QF(s[s.length-1]):Su(e,n)},vZ=(e,n)=>{var s;const a=(s=e.getParent(n.container,e.isBlock))!==null&&s!==void 0?s:e.getRoot();return Ev(e,n.container,n.offset,(f,g)=>g===0?-1:g,a).filter(f=>{const g=f.container.data.charAt(f.offset-1);return!Tv(g)}).isSome()},yZ=e=>n=>{const s=JO(n.startContainer,n.startOffset);return!vZ(e,s)},_v=(e,n,s)=>lo(s.triggers,a=>S1(e,n,a)),wZ=(e,n)=>{const s=n(),a=e.selection.getRng();return _v(e.dom,a,s).bind(f=>eI(e,n,f))},eI=(e,n,s,a={})=>{var f;const g=n(),S=(f=e.selection.getRng().startContainer.nodeValue)!==null&&f!==void 0?f:"",E=Ne(g.lookupByTrigger(s.trigger),L=>s.text.length>=L.minChars&&L.matches.getOrThunk(()=>yZ(e.dom))(s.range,S,s.text));if(E.length===0)return V.none();const P=Promise.all(nt(E,L=>L.fetch(s.text,L.maxResults,a).then(W=>({matchText:s.text,items:W,columns:L.columns,onAction:L.onAction,highlightOn:L.highlightOn}))));return V.some({lookupData:P,context:s})};var ud;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ud||(ud={}));const QO=(e,n,s)=>e.stype===ud.Error?n(e.serror):s(e.svalue),xZ=e=>{const n=[],s=[];return de(e,a=>{QO(a,f=>s.push(f),f=>n.push(f))}),{values:n,errors:s}},CZ=(e,n)=>e.stype===ud.Error?{stype:ud.Error,serror:n(e.serror)}:e,SZ=(e,n)=>e.stype===ud.Value?{stype:ud.Value,svalue:n(e.svalue)}:e,kZ=(e,n)=>e.stype===ud.Value?n(e.svalue):e,EZ=(e,n)=>e.stype===ud.Error?n(e.serror):e,tI=e=>({stype:ud.Value,svalue:e}),nI=e=>({stype:ud.Error,serror:e}),da={fromResult:e=>e.fold(nI,tI),toResult:e=>QO(e,fl.error,fl.value),svalue:tI,partition:xZ,serror:nI,bind:kZ,bindError:EZ,map:SZ,mapError:CZ,fold:QO},jC=e=>ce(e)&&Bo(e).length>100?" removed due to size":JSON.stringify(e,null,2),oI=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:me("... (only showing first ten failures)")}]):e;return nt(n,s=>"Failed path: ("+s.path.join(" > ")+`)
`+s.getErrorInfo())},Dv=(e,n)=>da.serror([{path:e,getErrorInfo:n}]),AZ=(e,n,s)=>Dv(e,()=>'Could not find valid *required* value for "'+n+'" in '+jC(s)),TZ=(e,n)=>Dv(e,()=>'Choice schema did not contain choice key: "'+n+'"'),OZ=(e,n,s)=>Dv(e,()=>'The chosen schema: "'+s+'" did not exist in branches: '+jC(n)),_Z=(e,n)=>Dv(e,me(n)),sI=(e,n,s,a)=>us(s,a).fold(()=>OZ(e,s,a),g=>g.extract(e.concat(["branch: "+a]),n)),DZ=(e,n)=>({extract:(f,g)=>us(g,e).fold(()=>TZ(f,e),S=>sI(f,g,n,S)),toString:()=>"chooseOn("+e+"). Possible values: "+Bo(n)}),rI=(e,n)=>n,MZ=(e,n)=>_e(e)&&_e(n)?Mv(e,n):n,e_=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const s={};for(let a=0;a<n.length;a++){const f=n[a];for(const g in f)Bn(f,g)&&(s[g]=e(s[g],f[g]))}return s},Mv=e_(MZ),PZ=e_(rI),iI=()=>({tag:"required",process:{}}),RZ=e=>({tag:"defaultedThunk",process:e}),t_=e=>RZ(me(e)),NZ=()=>({tag:"option",process:{}}),BZ=(e,n)=>e.length>0?da.svalue(Mv(n,PZ.apply(void 0,e))):da.svalue(n),n_=e=>O(da.serror,jn)(e),aI={consolidateObj:(e,n)=>{const s=da.partition(e);return s.errors.length>0?n_(s.errors):BZ(s.values,n)},consolidateArr:e=>{const n=da.partition(e);return n.errors.length>0?n_(n.errors):da.svalue(n.values)}},FZ=(e,n,s,a)=>({tag:"field",key:e,newKey:n,presence:s,prop:a}),IZ=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),lI=(e,n,s)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return s(e.newKey,e.instantiator)}},ZC=e=>{const n=(a,f)=>da.bindError(e(f),g=>_Z(a,g)),s=me("val");return{extract:n,toString:s}},cI=ZC(da.svalue),LZ=(e,n,s,a)=>us(n,s).fold(()=>AZ(e,s,n),a),uI=(e,n,s,a)=>{const f=us(e,n).getOrThunk(()=>s(e));return a(f)},$Z=(e,n,s)=>s(us(e,n)),HZ=(e,n,s,a)=>{const f=us(e,n).map(g=>g===!0?s(e):g);return a(f)},VZ=(e,n,s,a,f)=>{const g=S=>f.extract(n.concat([a]),S),y=S=>S.fold(()=>da.svalue(V.none()),E=>{const P=f.extract(n.concat([a]),E);return da.map(P,V.some)});switch(e.tag){case"required":return LZ(n,s,a,g);case"defaultedThunk":return uI(s,a,e.process,g);case"option":return $Z(s,a,y);case"defaultedOptionThunk":return HZ(s,a,e.process,y);case"mergeWithThunk":return uI(s,a,me({}),S=>{const E=Mv(e.process(s),S);return g(E)})}},zZ=(e,n,s)=>{const a={},f=[];for(const g of s)lI(g,(y,S,E,P)=>{const L=VZ(E,e,n,y,P);da.fold(L,$=>{f.push(...$)},$=>{a[S]=$})},(y,S)=>{a[y]=S(n)});return f.length>0?da.serror(f):da.svalue(a)},o_=e=>({extract:(a,f)=>zZ(a,f,e),toString:()=>`obj{
`+nt(e,f=>lI(f,(g,y,S,E)=>g+" -> "+E.toString(),(g,y)=>"state("+g+")")).join(`
`)+"}"}),dI=e=>({extract:(a,f)=>{const g=nt(f,(y,S)=>e.extract(a.concat(["["+S+"]"]),y));return aI.consolidateArr(g)},toString:()=>"array("+e.toString()+")"}),jee=e=>ZC(n=>e(n).fold(da.serror,da.svalue)),UZ=(e,n,s)=>{const a=n.extract([e],s);return da.mapError(a,f=>({input:s,errors:f}))},fI=(e,n,s)=>da.toResult(UZ(e,n,s)),hI=e=>`Errors: 
`+oI(e.errors).join(`
`)+`

Input object: `+jC(e.input),s_=(e,n)=>DZ(e,So(n,o_)),WZ=me(cI),Pv=(e,n)=>ZC(s=>{const a=typeof s;return e(s)?da.svalue(s):da.serror(`Expected type: ${n} but got: ${a}`)}),mI=Pv(ft,"number"),qC=Pv(Z,"string"),jZ=Pv(qe,"boolean"),r_=Pv(Ee,"function"),k1=FZ,gI=IZ,i_=e=>jee(n=>Qe(e,n)?fl.value(n):fl.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),pI=(e,n)=>k1(e,e,iI(),n),bI=e=>pI(e,qC),vI=e=>pI(e,r_),yI=(e,n)=>k1(e,e,iI(),dI(n)),a_=(e,n)=>k1(e,e,NZ(),n),GC=e=>a_(e,qC),ZZ=e=>a_(e,r_),qZ=(e,n)=>k1(e,e,t_(n),WZ()),E1=(e,n,s)=>k1(e,e,t_(n),s),Ci=(e,n)=>E1(e,n,mI),nf=(e,n)=>E1(e,n,qC),wI=(e,n,s)=>E1(e,n,i_(s)),xI=(e,n)=>E1(e,n,jZ),l_=(e,n)=>E1(e,n,r_),GZ=(e,n,s)=>E1(e,n,dI(s)),KZ=bI("type"),YZ=vI("fetch"),KC=vI("onAction"),A1=l_("onSetup",()=>ge),Zee=GC("text"),XZ=GC("icon"),JZ=GC("tooltip"),dd=GC("label"),QZ=xI("active",!1),eq=xI("enabled",!0),c_=xI("primary",!1),tq=e=>qZ("columns",e),kg=e=>nf("type",e),CI=o_([KZ,bI("trigger"),Ci("minChars",1),tq(1),Ci("maxResults",10),ZZ("matches"),YZ,KC,GZ("highlightOn",[],qC)]),nq=e=>fI("Autocompleter",CI,ie({trigger:e.ch},e)),u_=[eq,JZ,XZ,Zee,A1],SI=[QZ].concat(u_),kI=[l_("predicate",ue),wI("scope","node",["node","editor"]),wI("position","selection",["node","selection","line"])],EI=u_.concat([kg("contextformbutton"),c_,KC,gI("original",lt)]),d_=SI.concat([kg("contextformbutton"),c_,KC,gI("original",lt)]),f_=u_.concat([kg("contextformbutton")]),h_=SI.concat([kg("contextformtogglebutton")]),oq=s_("type",{contextformbutton:EI,contextformtogglebutton:d_});o_([kg("contextform"),l_("initValue",me("")),dd,yI("commands",oq),a_("launch",s_("type",{contextformbutton:f_,contextformtogglebutton:h_}))].concat(kI));const sq=e=>{const n=e.ui.registry.getAll().popups,s=So(n,y=>nq(y).fold(S=>{throw new Error(hI(S))},lt)),a=ht(xr(s,y=>y.trigger)),f=fi(s);return{dataset:s,triggers:a,lookupByTrigger:y=>Ne(f,S=>S.trigger===y)}},rq=(e,n)=>{const s=pk(n.load,50);e.on("keypress compositionend",a=>{a.which!==27&&s.throttle()}),e.on("keydown",a=>{const f=a.which;f===8?s.throttle():f===27&&n.cancelIfNecessary()}),e.on("remove",s.cancel)},iq=e=>{const n=Th(),s=Ur(!1),a=n.isSet,f=()=>{a()&&(CU(e),RE(e),s.set(!1),n.clear())},g=P=>{a()||(xU(e,P.range),n.set({trigger:P.trigger,matchLength:P.text.length}))},y=xt(()=>sq(e)),S=P=>n.get().map(L=>S1(e.dom,e.selection.getRng(),L.trigger).bind($=>eI(e,y,$,P))).getOrThunk(()=>wZ(e,y)),E=P=>{S(P).fold(f,L=>{g(L.context),L.lookupData.then($=>{n.get().map(W=>{const re=L.context;W.trigger===re.trigger&&(re.text.length-W.matchLength>=10?f():(n.set(Ot(ie({},W),{matchLength:re.text.length})),s.get()?k4(e,{lookupData:$}):(s.set(!0),MH(e,{lookupData:$}))))})})})};e.addCommand("mceAutocompleterReload",(P,L)=>{const $=ce(L)?L.fetchOptions:{};E($)}),e.addCommand("mceAutocompleterClose",f),rq(e,{cancelIfNecessary:f,load:E})},TI=Rs().browser.isSafari(),OI=e=>Pd(ye.fromDom(e)),m_=(e,n)=>{var s;return e.startOffset===0&&e.endOffset===((s=n.textContent)===null||s===void 0?void 0:s.length)},YC=(e,n)=>V.from(e.getParent(n.container(),"details")),XC=(e,n)=>YC(e,n).isSome(),aq=(e,n)=>{const s=V.from(e.getParent(n.startContainer,"details")),a=V.from(e.getParent(n.endContainer,"details"));if(s.isSome()||a.isSome()){const f=s.bind(g=>V.from(e.select("summary",g)[0]));return V.some({startSummary:f,startDetails:s,endDetails:a})}else return V.none()},lq=(e,n)=>La(n).exists(s=>s.isEqual(e)),cq=(e,n)=>uu(n).exists(s=>Us(s.getNode())&&hl(n,s).exists(a=>a.isEqual(e))||s.isEqual(e)),uq=(e,n)=>n.startSummary.exists(s=>lq(e,s)),dq=(e,n)=>n.startSummary.exists(s=>cq(e,s)),_I=(e,n)=>n.startDetails.exists(s=>hl(s,e).forall(a=>n.startSummary.exists(f=>!f.contains(e.container())&&f.contains(a.container())))),g_=(e,n,s)=>s.startDetails.exists(a=>el(e,n).forall(f=>!a.contains(f.container()))),p_=(e,n)=>{const s=n.getNode();Re(s)||e.selection.setCursorLocation(s,n.offset())},b_=(e,n,s)=>{const a=e.dom.getParent(n.container(),"details");if(a&&!a.open){const f=e.dom.select("summary",a)[0];f&&(s?La(f):uu(f)).each(y=>p_(e,y))}else p_(e,n)},fq=(e,n)=>{const s=E=>E.contains(e.startContainer),a=E=>E.contains(e.endContainer),f=n.startSummary.exists(s),g=n.startSummary.exists(a),y=n.startDetails.forall(E=>n.endDetails.forall(P=>E!==P));return(f||g)&&!(f&&g)||y},DI=(e,n,s)=>{const{dom:a,selection:f}=e,g=e.getBody();if(s==="character"){const y=bt.fromRangeStart(f.getRng()),S=a.getParent(y.container(),a.isBlock),E=YC(a,y),P=S&&a.isEmpty(S),L=G(S==null?void 0:S.previousSibling),$=G(S==null?void 0:S.nextSibling);return P&&(n?$:L)&&jf(!n,g,y).exists(fe=>XC(a,fe)&&!pa(E,YC(a,fe)))?!0:jf(n,g,y).fold(ue,W=>{const re=YC(a,W);if(XC(a,W)&&!pa(E,re)){if(n||b_(e,W,!1),S&&P){if(n&&L)return!0;if(!n&&$)return!0;b_(e,W,n),e.dom.remove(S)}return!0}else return!1})}else return!1},hq=(e,n,s,a)=>{const g=e.selection.getRng(),y=bt.fromRangeStart(g),S=e.getBody();return a==="selection"?fq(g,n):s?dq(y,n)||g_(S,y,n):uq(y,n)||_I(y,n)},JC=(e,n,s)=>aq(e.dom,e.selection.getRng()).fold(()=>DI(e,n,s),a=>hq(e,a,n,s)||DI(e,n,s)),MI=(e,n,s)=>{const a=e.selection,f=a.getNode(),g=a.getRng(),y=bt.fromRangeStart(g);return Jl(f)?(s==="selection"&&m_(g,f)||wx(n,y,f)?OI(f):e.undoManager.transact(()=>{const S=a.getSel();let{anchorNode:E,anchorOffset:P,focusNode:L,focusOffset:$}=S!=null?S:{};const W=()=>{le(E)&&le(P)&&le(L)&&le($)&&(S==null||S.setBaseAndExtent(E,P,L,$))},re=()=>{E=S==null?void 0:S.anchorNode,P=S==null?void 0:S.anchorOffset,L=S==null?void 0:S.focusNode,$=S==null?void 0:S.focusOffset},fe=(he,Le)=>{de(he.childNodes,ze=>{fb(ze)&&Le.appendChild(ze)})},te=e.dom.create("span",{"data-mce-bogus":"1"});fe(f,te),f.appendChild(te),W(),(s==="word"||s==="line")&&(S==null||S.modify("extend",n?"right":"left",s)),!a.isCollapsed()&&m_(a.getRng(),te)?OI(f):(e.execCommand(n?"ForwardDelete":"Delete"),re(),fe(te,f),W()),e.dom.remove(te)}),!0):!1},Qh=(e,n,s)=>JC(e,n,s)||TI&&MI(e,n,s)?V.some(ge):V.none(),PI=e=>(n,s,a={})=>{const f=n.getBody(),g={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:f,currentTarget:f,eventPhase:Event.AT_TARGET,originalTarget:f,explicitOriginalTarget:f,isTrusted:!1,srcElement:f,cancelable:!1,preventDefault:ge,inputType:s},y=aw(new InputEvent(e));return n.dispatch(e,ie(ie(ie({},y),g),a))},Rv=PI("input"),v_=PI("beforeinput"),mq=Rs(),gq=mq.os,RI=gq.isMacOS()||gq.isiOS(),pq=mq.browser.isFirefox(),bq=(e,n,s)=>{const a=s.keyCode===mn.BACKSPACE?"deleteContentBackward":"deleteContentForward",f=e.selection.isCollapsed(),g=f?"character":"selection",y=S=>f?S?"word":"line":"selection";ZO([{keyCode:mn.BACKSPACE,action:no(vF,e)},{keyCode:mn.BACKSPACE,action:no(dv,e,!1)},{keyCode:mn.DELETE,action:no(dv,e,!0)},{keyCode:mn.BACKSPACE,action:no(fO,e,!1)},{keyCode:mn.DELETE,action:no(fO,e,!0)},{keyCode:mn.BACKSPACE,action:no(NC,e,n,!1)},{keyCode:mn.DELETE,action:no(NC,e,n,!0)},{keyCode:mn.BACKSPACE,action:no($b,e,!1)},{keyCode:mn.DELETE,action:no($b,e,!0)},{keyCode:mn.BACKSPACE,action:no(Qh,e,!1,g)},{keyCode:mn.DELETE,action:no(Qh,e,!0,g)},...RI?[{keyCode:mn.BACKSPACE,altKey:!0,action:no(Qh,e,!1,y(!0))},{keyCode:mn.DELETE,altKey:!0,action:no(Qh,e,!0,y(!0))},{keyCode:mn.BACKSPACE,metaKey:!0,action:no(Qh,e,!1,y(!1))}]:[{keyCode:mn.BACKSPACE,ctrlKey:!0,action:no(Qh,e,!1,y(!0))},{keyCode:mn.DELETE,ctrlKey:!0,action:no(Qh,e,!0,y(!0))}],{keyCode:mn.BACKSPACE,action:no(gO,e,!1)},{keyCode:mn.DELETE,action:no(gO,e,!0)},{keyCode:mn.BACKSPACE,action:no(IO,e,!1)},{keyCode:mn.DELETE,action:no(IO,e,!0)},{keyCode:mn.BACKSPACE,action:no(SC,e,!1)},{keyCode:mn.DELETE,action:no(SC,e,!0)},{keyCode:mn.BACKSPACE,action:no(uO,e,!1)},{keyCode:mn.DELETE,action:no(uO,e,!0)},{keyCode:mn.BACKSPACE,action:no(BO,e,!1)},{keyCode:mn.DELETE,action:no(BO,e,!0)}],s).filter(S=>e.selection.isEditable()).each(S=>{s.preventDefault(),v_(e,a).isDefaultPrevented()||(S(),Rv(e,a))})},qee=(e,n,s)=>x1([{keyCode:mn.BACKSPACE,action:no(RB,e)},{keyCode:mn.DELETE,action:no(RB,e)},...RI?[{keyCode:mn.BACKSPACE,altKey:!0,action:no(bv,e)},{keyCode:mn.DELETE,altKey:!0,action:no(bv,e)},...s?[{keyCode:pq?224:91,action:no(bv,e)}]:[]]:[{keyCode:mn.BACKSPACE,ctrlKey:!0,action:no(bv,e)},{keyCode:mn.DELETE,ctrlKey:!0,action:no(bv,e)}]],n),vq=(e,n)=>{let s=!1;e.on("keydown",a=>{s=a.keyCode===mn.BACKSPACE,a.isDefaultPrevented()||bq(e,n,a)}),e.on("keyup",a=>{a.isDefaultPrevented()||qee(e,a,s),s=!1})},Fr=e=>{for(;e;){if(xn(e)||Vt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},em=(e,n)=>{const s=e.dom,a=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const g=Fr(n.firstChild);g&&/^(UL|OL|DL)$/.test(g.nodeName)&&n.insertBefore(s.doc.createTextNode(xs),n.firstChild)}const f=s.createRng();if(n.normalize(),n.hasChildNodes()){const g=new er(n,n);let y=n,S;for(;S=g.current();){if(Vt(S)){f.setStart(S,0),f.setEnd(S,0);break}if(a[S.nodeName.toLowerCase()]){f.setStartBefore(S),f.setEndBefore(S);break}y=S,S=g.next()}S||(f.setStart(y,0),f.setEnd(y,0))}else Us(n)?n.nextSibling&&s.isBlock(n.nextSibling)?(f.setStartBefore(n),f.setEndBefore(n)):(f.setStartAfter(n),f.setEndAfter(n)):(f.setStart(n,0),f.setEnd(n,0));e.selection.setRng(f),Sb(e,f)},yc=(e,n)=>{const s=e.getRoot();let a,f=n;for(;f!==s&&f&&e.getContentEditable(f)!=="false";){if(e.getContentEditable(f)==="true"){a=f;break}f=f.parentNode}return f!==s?a:s},QC=e=>V.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),NI=e=>QC(e).fold(me(""),n=>n.nodeName.toUpperCase()),yq=e=>QC(e).filter(n=>Bm(ye.fromDom(n))).isSome(),T1=e=>{e.innerHTML='<br data-mce-bogus="1">'},y_=(e,n,s)=>{const a=e.dom;V.from(s.style).map(a.parseStyle).each(E=>{const P=S0(ye.fromDom(n)),L=ie(ie({},P),E);a.setStyles(n,L)});const f=V.from(s.class).map(E=>E.split(/\s+/)),g=V.from(n.className).map(E=>Ne(E.split(/\s+/),P=>P!==""));qr(f,g,(E,P)=>{const L=Ne(P,W=>!Qe(E,W)),$=[...E,...L];a.setAttrib(n,"class",$.join(" "))});const y=["style","class"],S=di(s,(E,P)=>!Qe(y,P));a.setAttribs(n,S)},O1=(e,n)=>{if(Ia(e).toLowerCase()===n.tagName.toLowerCase()){const a=eb(e);y_(e,n,a)}},w_=(e,n,s,a,f=!0,g,y)=>{const S=e.dom,E=e.schema,P=Ia(e),L=s?s.nodeName.toUpperCase():"";let $=n;const W=E.getTextInlineElements();let re;g||L==="TABLE"||L==="HR"?re=S.create(g||P,y||{}):re=s.cloneNode(!1);let fe=re;if(!f)S.setAttrib(re,"style",null),S.setAttrib(re,"class",null);else do if(W[$.nodeName]){if(uc($)||dc($))continue;const te=$.cloneNode(!1);S.setAttrib(te,"id",""),re.hasChildNodes()?(te.appendChild(re.firstChild),re.appendChild(te)):(fe=te,re.appendChild(te))}while(($=$.parentNode)&&$!==a);return O1(e,re),T1(fe),re},wq=(e,n)=>e.dom.getParent(n,Rt),xq=(e,n,s)=>{let a=n;for(;a&&a!==e&&G(a.nextSibling);){const f=a.parentElement;if(!f||!s(f))return Rt(f);a=f}return!1},Cq=(e,n,s)=>!n&&s.nodeName.toLowerCase()===Ia(e)&&e.dom.isEmpty(s)&&xq(e.getBody(),s,a=>Bn(e.schema.getTextBlockElements(),a.nodeName.toLowerCase())),Sq=(e,n,s)=>{var a,f,g;const y=n(Ia(e)),S=wq(e,s);S&&(e.dom.insertAfter(y,S),em(e,y),((g=(f=(a=s.parentElement)===null||a===void 0?void 0:a.childNodes)===null||f===void 0?void 0:f.length)!==null&&g!==void 0?g:0)>1&&e.dom.remove(s))},kq=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,BI=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},FI=(e,n)=>{const s=e==null?void 0:e.parentNode;return le(s)&&s.nodeName===n},II=e=>le(e)&&/^(OL|UL|LI)$/.test(e.nodeName),x_=e=>le(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Eq=e=>II(e)&&II(e.parentNode),eS=e=>{const n=e.parentNode;return x_(n)?n:e},Nv=(e,n,s)=>{let a=e[s?"firstChild":"lastChild"];for(;a&&!xn(a);)a=a[s?"nextSibling":"previousSibling"];return a===n},C_=e=>ve(xr(S0(ye.fromDom(e)),(n,s)=>`${s}: ${n};`),(n,s)=>n+s,""),Aq=(e,n,s,a,f)=>{const g=e.dom,y=e.selection.getRng(),S=s.parentNode;if(s===e.getBody()||!S)return;Eq(s)&&(f="LI");const E=x_(a)?C_(a):void 0;let P=x_(a)&&E?n(f,{style:C_(a)}):n(f);if(Nv(s,a,!0)&&Nv(s,a,!1))if(FI(s,"LI")){const L=eS(s);g.insertAfter(P,L),BI(s)?g.remove(L):g.remove(s)}else g.replace(P,s);else if(Nv(s,a,!0))FI(s,"LI")?(g.insertAfter(P,eS(s)),P.appendChild(g.doc.createTextNode(" ")),P.appendChild(s)):S.insertBefore(P,s),g.remove(a);else if(Nv(s,a,!1))g.insertAfter(P,eS(s)),g.remove(a);else{s=eS(s);const L=y.cloneRange();L.setStartAfter(a),L.setEndAfter(s);const $=L.extractContents();if(f==="LI"&&kq($,"LI")){const W=Ne(nt(P.children,ye.fromDom),Ue(Hr("br")));P=$.firstChild,g.insertAfter($,s),de(W,re=>Om(ye.fromDom(P),re)),E&&P.setAttribute("style",E)}else g.insertAfter($,s),g.insertAfter(P,s);g.remove(a)}em(e,P)},Tq=e=>{de(_d(ye.fromDom(e),Oo),n=>{const s=n.dom;s.nodeValue=nc(s.data)})},Gee=(e,n)=>{const s=e.dom.getParent(n,"ol,ul,dl");return s!==null&&e.dom.getContentEditableParent(s)==="false"},S_=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),k_=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,E_=(e,n)=>le(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",Oq=(e,n,s)=>{var a;const f=[];if(!s)return;let g=s;for(;g=g.firstChild;){if(e.isBlock(g))return;xn(g)&&!n[g.nodeName.toLowerCase()]&&f.push(g)}let y=f.length;for(;y--;)g=f[y],(!g.hasChildNodes()||g.firstChild===g.lastChild&&((a=g.firstChild)===null||a===void 0?void 0:a.nodeValue)===""||S_(e,g))&&e.remove(g)},tS=(e,n,s)=>Vt(n)?e?s===1&&n.data.charAt(s-1)===Yi?0:s:s===n.data.length-1&&n.data.charAt(s)===Yi?n.data.length:s:s,_q=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,tS(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,tS(!1,e.endContainer,e.endOffset)),n},LI=e=>{let n=e;do Vt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},Dq=(e,n,s,a,f)=>{var g,y;const S=e.dom,E=(g=yc(S,a))!==null&&g!==void 0?g:S.getRoot();let P=S.getParent(a,S.isBlock);if(!P||!E_(S,P)){if(P=P||E,!P.hasChildNodes()){const re=S.create(n);return O1(e,re),P.appendChild(re),s.setStart(re,0),s.setEnd(re,0),re}let L=a;for(;L&&L.parentNode!==P;)L=L.parentNode;let $;for(;L&&!S.isBlock(L);)$=L,L=L.previousSibling;const W=(y=$==null?void 0:$.parentElement)===null||y===void 0?void 0:y.nodeName;if($&&W&&e.schema.isValidChild(W,n.toLowerCase())){const re=$.parentNode,fe=S.create(n);for(O1(e,fe),re.insertBefore(fe,$),L=$;L&&!S.isBlock(L);){const te=L.nextSibling;fe.appendChild(L),L=te}s.setStart(a,f),s.setEnd(a,f)}}return a},Mq=(e,n)=>{n.normalize();const s=n.lastChild;(!s||xn(s)&&/^(left|right)$/gi.test(e.getStyle(s,"float",!0)))&&e.add(n,"br")},Pq=(e,n)=>{const s=p3(e);return $e(n)?!1:Z(s)?Qe(Lt.explode(s),n.nodeName.toLowerCase()):s},$I={insert:(e,n)=>{let s,a,f,g,y=!1;const S=e.dom,E=e.schema,P=E.getNonEmptyElements(),L=e.selection.getRng(),$=Ia(e),W=ye.fromDom(L.startContainer),re=kf(W,L.startOffset),fe=re.exists(Mt=>Et(Mt)&&!_o(Mt)),te=L.collapsed&&fe,he=(Mt,gn)=>w_(e,s,Wt,Nt,a7(e),Mt,gn),Le=Mt=>{const gn=tS(Mt,s,a);if(Vt(s)&&(Mt?gn>0:gn<s.data.length))return!1;if(s.parentNode===Wt&&y&&!Mt||Mt&&xn(s)&&s===Wt.firstChild)return!0;if(k_(s,"TABLE")||k_(s,"HR"))return y&&!Mt||!y&&Mt;const Mn=new er(s,Wt);Vt(s)&&(Mt&&gn===0?Mn.prev():!Mt&&gn===s.data.length&&Mn.next());let ko;for(;ko=Mn.current();){if(xn(ko)){if(!ko.getAttribute("data-mce-bogus")){const Ho=ko.nodeName.toLowerCase();if(P[Ho]&&Ho!=="br")return!1}}else if(Vt(ko)&&!kh(ko.data))return!1;Mt?Mn.prev():Mn.next()}return!0},ze=()=>{let Mt;return/^(H[1-6]|PRE|FIGURE)$/.test(f)&&sn!=="HGROUP"?Mt=he($):Mt=he(),Pq(e,g)&&E_(S,g)&&S.isEmpty(Wt,void 0,{includeZwsp:!0})?Mt=S.split(g,Wt):S.insertAfter(Mt,Wt),em(e,Mt),Mt};xb(S,L).each(Mt=>{L.setStart(Mt.startContainer,Mt.startOffset),L.setEnd(Mt.endContainer,Mt.endOffset)}),s=L.startContainer,a=L.startOffset;const Ve=!!(n&&n.shiftKey),ot=!!(n&&n.ctrlKey);xn(s)&&s.hasChildNodes()&&!te&&(y=a>s.childNodes.length-1,s=s.childNodes[Math.min(a,s.childNodes.length-1)]||s,y&&Vt(s)?a=s.data.length:a=0);const Nt=yc(S,s);if(!Nt||Gee(e,s))return;Ve||(s=Dq(e,$,L,s,a));let Wt=S.getParent(s,S.isBlock)||S.getRoot();g=le(Wt==null?void 0:Wt.parentNode)?S.getParent(Wt.parentNode,S.isBlock):null,f=Wt?Wt.nodeName.toUpperCase():"";const sn=g?g.nodeName.toUpperCase():"";if(sn==="LI"&&!ot){const Mt=g;Wt=Mt,g=Mt.parentNode,f=sn}if(xn(g)&&Cq(e,Ve,Wt))return Sq(e,he,Wt);if(/^(LI|DT|DD)$/.test(f)&&xn(g)&&S.isEmpty(Wt)){Aq(e,he,g,Wt,$);return}if(!te&&(Wt===e.getBody()||!E_(S,Wt)))return;const vt=Wt.parentNode;let dt;if(te)dt=he($),re.fold(()=>{Yr(W,ye.fromDom(dt))},Mt=>{Ra(Mt,ye.fromDom(dt))}),e.selection.setCursorLocation(dt,0);else if(sp(Wt))dt=Sh(Wt),S.isEmpty(Wt)&&T1(Wt),O1(e,dt),em(e,dt);else if(Le(!1))dt=ze();else if(Le(!0)&&vt){dt=vt.insertBefore(he(),Wt);const Mt=$y(ye.fromDom(L.startContainer))&&L.collapsed;em(e,k_(Wt,"HR")||Mt?dt:Wt)}else{const Mt=_q(L).cloneRange();Mt.setEndAfter(Wt);const gn=Mt.extractContents();Tq(gn),LI(gn),dt=gn.firstChild,S.insertAfter(gn,Wt),Oq(S,P,dt),Mq(S,Wt),S.isEmpty(Wt)&&T1(Wt),dt.normalize(),S.isEmpty(dt)?(S.remove(dt),ze()):(O1(e,dt),em(e,dt))}S.setAttrib(dt,"id",""),e.dispatch("NewBlock",{newBlock:dt})},fakeEventName:"insertParagraph"},Rq=(e,n,s)=>{const a=new er(n,s);let f;const g=e.getNonEmptyElements();for(;f=a.next();)if(g[f.nodeName.toLowerCase()]||Vt(f)&&f.length>0)return!0;return!1},HI=(e,n,s)=>{const a=e.dom.createRng();s?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),e.selection.setRng(a),Sb(e,a)},Nq=(e,n)=>{const s=e.selection,a=e.dom,f=s.getRng();let g,y=!1;xb(a,f).each(re=>{f.setStart(re.startContainer,re.startOffset),f.setEnd(re.endContainer,re.endOffset)});let S=f.startOffset,E=f.startContainer;if(xn(E)&&E.hasChildNodes()){const re=S>E.childNodes.length-1;E=E.childNodes[Math.min(S,E.childNodes.length-1)]||E,re&&Vt(E)?S=E.data.length:S=0}let P=a.getParent(E,a.isBlock);const L=P&&P.parentNode?a.getParent(P.parentNode,a.isBlock):null,$=L?L.nodeName.toUpperCase():"",W=!!(n&&n.ctrlKey);$==="LI"&&!W&&(P=L),Vt(E)&&S>=E.data.length&&(Rq(e.schema,E,P||a.getRoot())||(g=a.create("br"),f.insertNode(g),f.setStartAfter(g),f.setEndAfter(g),y=!0)),g=a.create("br"),Ak(a,f,g),HI(e,g,y),e.undoManager.add()},Bq=(e,n)=>{const s=ye.fromTag("br");Ra(ye.fromDom(n),s),e.undoManager.add()},Fq=(e,n)=>{Iq(e.getBody(),n)||Hu(ye.fromDom(n),ye.fromTag("br"));const s=ye.fromTag("br");Hu(ye.fromDom(n),s),HI(e,s.dom,!1),e.undoManager.add()},nS=e=>Us(e.getNode()),Iq=(e,n)=>nS(bt.after(n))?!0:el(e,bt.after(n)).map(s=>Us(s.getNode())).getOr(!1),VI=e=>e&&e.nodeName==="A"&&"href"in e,A_=e=>e.fold(ue,VI,VI,ue),T_=e=>{const n=Be(cg,e),s=bt.fromRangeStart(e.selection.getRng());return Ji(n,e.getBody(),s).filter(A_)},Lq=(e,n)=>{n.fold(ge,Be(Bq,e),Be(Fq,e),ge)},$q={insert:(e,n)=>{const s=T_(e);s.isSome()?s.each(Be(Lq,e)):Nq(e,n)},fakeEventName:"insertLineBreak"},zI=(e,n)=>QC(e).filter(s=>n.length>0&&El(ye.fromDom(s),n)).isSome(),Hq=e=>zI(e,i7(e)),Yee=e=>zI(e,zk(e)),wc=ed.generate([{br:[]},{block:[]},{none:[]}]),fd=(e,n)=>Yee(e),UI=e=>(n,s)=>yq(n)===e,O_=(e,n)=>(s,a)=>NI(s)===e.toUpperCase()===n,Vq=e=>{const n=yc(e.dom,e.selection.getStart());return $e(n)},Bv=e=>O_("pre",e),zq=()=>O_("summary",!0),oS=e=>(n,s)=>s7(n)===e,Uq=(e,n)=>Hq(e),sS=(e,n)=>n,Wq=e=>{const n=Ia(e),s=yc(e.dom,e.selection.getStart());return le(s)&&e.schema.isValidChild(s.nodeName,n)},__=e=>{const n=e.selection.getRng(),s=ye.fromDom(n.startContainer),f=kf(s,n.startOffset).map(g=>Et(g)&&!_o(g));return n.collapsed&&f.getOr(!0)},xc=(e,n)=>(s,a)=>ve(e,(g,y)=>g&&y(s,a),!0)?V.some(n):V.none(),rS=(e,n)=>LB([xc([fd],wc.none()),xc([Bv(!0),Vq],wc.none()),xc([zq()],wc.br()),xc([Bv(!0),oS(!1),sS],wc.br()),xc([Bv(!0),oS(!1)],wc.block()),xc([Bv(!0),oS(!0),sS],wc.block()),xc([Bv(!0),oS(!0)],wc.br()),xc([UI(!0),sS],wc.br()),xc([UI(!0)],wc.block()),xc([Uq],wc.br()),xc([sS],wc.br()),xc([Wq],wc.block()),xc([__],wc.block())],[e,!!(n&&n.shiftKey)]).getOr(wc.none()),iS=(e,n,s)=>{n.selection.isCollapsed()||fA(n),!(le(s)&&v_(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,s),le(s)&&Rv(n,e.fakeEventName))},WI=(e,n)=>{const s=()=>iS($q,e,n),a=()=>iS($I,e,n),f=rS(e,n);switch(r7(e)){case"linebreak":f.fold(s,s,ge);break;case"block":f.fold(a,a,ge);break;case"invert":f.fold(a,s,ge);break;default:f.fold(s,a,ge);break}},jI=Rs(),jq=jI.os.isiOS()&&jI.browser.isSafari(),ZI=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),Jz(e.undoManager),e.undoManager.transact(()=>{WI(e,n)}))},qI=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(Vt(n)){const s=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,a=n.data.charAt(e.startOffset-1);return s.test(a)}else return!1},Zq=e=>{let n=V.none();const s=f=>{n=V.some(f.selection.getBookmark()),f.undoManager.add()},a=(f,g)=>{f.undoManager.undo(),n.fold(ge,y=>f.selection.moveToBookmark(y)),ZI(f,g),n=V.none()};e.on("keydown",f=>{f.keyCode===mn.ENTER&&(jq&&qI(e.selection.getRng())?s(e):ZI(e,f))}),e.on("keyup",f=>{f.keyCode===mn.ENTER&&n.each(()=>a(e,f))})},GI=(e,n,s)=>{const a=on.os.isMacOS()||on.os.isiOS();x1([{keyCode:mn.END,action:no(TF,e,!0)},{keyCode:mn.HOME,action:no(TF,e,!1)},...a?[]:[{keyCode:mn.HOME,action:no($C,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:mn.END,action:no($C,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:mn.END,action:no(VC,e,!0)},{keyCode:mn.HOME,action:no(VC,e,!1)},{keyCode:mn.END,action:no(RC,e,!0,n)},{keyCode:mn.HOME,action:no(RC,e,!1,n)}],s).each(f=>{s.preventDefault()})},KI=(e,n)=>{e.on("keydown",s=>{s.isDefaultPrevented()||GI(e,n,s)})},qq=e=>{e.on("input",n=>{n.isComposing||fV(e)})},Gq=Rs(),D_=(e,n,s)=>{x1([{keyCode:mn.PAGE_UP,action:no(RC,e,!1,n)},{keyCode:mn.PAGE_DOWN,action:no(RC,e,!0,n)}],s)},YI=e=>e.stopImmediatePropagation(),XI=e=>e.keyCode===mn.PAGE_UP||e.keyCode===mn.PAGE_DOWN,Fv=(e,n,s)=>{s&&!e.get()?n.on("NodeChange",YI,!0):!s&&e.get()&&n.off("NodeChange",YI),e.set(s)},Kq=(e,n)=>{if(Gq.os.isMacOS())return;const s=Ur(!1);e.on("keydown",a=>{XI(a)&&Fv(s,e,!0)}),e.on("keyup",a=>{a.isDefaultPrevented()||D_(e,n,a),XI(a)&&s.get()&&(Fv(s,e,!1),e.nodeChanged())})},M_=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||Bt(n.getTargetRanges(),s=>!oP(e.dom,s)))&&n.preventDefault()})},aS=(e,n)=>{const s=n.container(),a=n.offset();return Vt(s)?(s.insertData(a,e),V.some(bt(s,a+e.length))):Lw(n).map(f=>{const g=ye.fromText(e);return n.isAtEnd()?Hu(f,g):Ra(f,g),bt(g.dom,e.length)})},P_=Be(aS,xs),JI=Be(aS," "),Xee=(e,n,s)=>NP(e,n,s)?P_(n):JI(n),tm=e=>n=>n.fold(s=>hl(e.dom,bt.before(s)),s=>La(s),s=>uu(s),s=>el(e.dom,bt.after(s))),Yq=(e,n,s)=>a=>NP(e,a,s)?P_(n):JI(n),QI=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},Xq=(e,n)=>e.isEditable(e.getParent(n,"summary")),lS=e=>{const n=bt.fromRangeStart(e.selection.getRng()),s=ye.fromDom(e.getBody());if(e.selection.isCollapsed()){const a=Be(cg,e),f=bt.fromRangeStart(e.selection.getRng());return Ji(a,e.getBody(),f).bind(tm(s)).map(g=>()=>Yq(s,n,e.schema)(g).each(QI(e)))}else return V.none()},eL=e=>{const n=()=>{const s=ye.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const a=bt.fromRangeStart(e.selection.getRng());Xee(s,a,e.schema).each(QI(e))};return es(on.browser.isFirefox()&&e.selection.isEditable()&&Xq(e.dom,e.selection.getRng().startContainer),n)},tL=(e,n)=>{ZO([{keyCode:mn.SPACEBAR,action:no(lS,e)},{keyCode:mn.SPACEBAR,action:no(eL,e)}],n).each(s=>{n.preventDefault(),v_(e,"insertText",{data:" "}).isDefaultPrevented()||(s(),Rv(e,"insertText",{data:" "}))})},Jq=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||tL(e,n)})},nL=e=>j7(e)?[{keyCode:mn.TAB,action:no(GF,e,!0)},{keyCode:mn.TAB,shiftKey:!0,action:no(GF,e,!1)}]:[],Qq=(e,n)=>{x1([...nL(e)],n).each(s=>{n.preventDefault()})},eG=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||Qq(e,n)})},tG=e=>{if(e.addShortcut("Meta+P","","mcePrint"),iq(e),sh(e))return Ur(null);{const n=mj(e);return M_(e),Hj(e),bZ(e,n),vq(e,n),Zq(e),Jq(e),qq(e),eG(e),KI(e,n),Kq(e,n),n}};class oL{constructor(n){this.lastPath=[],this.editor=n;let s;const a=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",f=>{const g=n.selection.getRng(),y={startContainer:g.startContainer,startOffset:g.startOffset,endContainer:g.endContainer,endOffset:g.endOffset};(f.type==="nodechange"||!Xf(y,s))&&n.dispatch("SelectionChange"),s=y}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const f=n.selection.getStart(!0);f&&zw(n)&&!a.isSameElementPath(f)&&n.dom.isChildOf(f,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",f=>{!f.isDefaultPrevented()&&zw(n)&&(n.selection.getNode().nodeName==="IMG"?hc.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const s=this.editor.selection;let a;if(this.editor.initialized&&s&&!qk(this.editor)&&!this.editor.mode.isReadOnly()){const f=this.editor.getBody();a=s.getStart(!0)||f,(a.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(a,f))&&(a=f);const g=[];this.editor.dom.getParent(a,y=>y===f?!0:(g.push(y),!1)),this.editor.dispatch("NodeChange",Ot(ie({},n),{element:a,parents:g}))}}isSameElementPath(n){let s;const a=this.editor,f=Yn(a.dom.getParents(n,je,a.getBody()));if(f.length===this.lastPath.length){for(s=f.length;s>=0&&f[s]===this.lastPath[s];s--);if(s===-1)return this.lastPath=f,!0}return this.lastPath=f,!1}}const cS=vp("image"),nG=e=>{const n=e;return V.from(n[cS])},R_=(e,n)=>{const s=e;s[cS]=n},uS=vp("event"),dS=e=>{const n=e;return V.from(n[uS])},Iv=e=>n=>{const s=n;s[uS]=e},sL=(e,n)=>Iv(n)(e),rL=Iv(0),oG=Iv(2),fS=Iv(1),rG=(e=>n=>{const s=n;return V.from(s[uS]).exists(a=>a===e)})(0),iG=()=>Object.freeze({length:0,item:e=>null}),hS=vp("mode"),aG=e=>{const n=e;return V.from(n[hS])},mS=e=>n=>{const s=n;s[hS]=e},iL=(e,n)=>mS(n)(e),aL=mS(0),N_=mS(2),lL=mS(1),cL=e=>n=>{const s=n;return V.from(s[hS]).exists(a=>a===e)},Eg=cL(0),uL=cL(1),lG=(e,n)=>Ot(ie({},n),{get length(){return n.length},add:(s,a)=>{if(Eg(e))if(Z(s)){if(!Re(a))return n.add(s,a)}else return n.add(s);return null},remove:s=>{Eg(e)&&n.remove(s)},clear:()=>{Eg(e)&&n.clear()}}),cG=["none","copy","link","move"],uG=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],B_=()=>{const e=new window.DataTransfer;let n="move",s="all";const a={get dropEffect(){return n},set dropEffect(f){Qe(cG,f)&&(n=f)},get effectAllowed(){return s},set effectAllowed(f){rG(a)&&Qe(uG,f)&&(s=f)},get items(){return lG(a,e.items)},get files(){return uL(a)?iG():e.files},get types(){return e.types},setDragImage:(f,g,y)=>{Eg(a)&&(R_(a,{image:f,x:g,y}),e.setDragImage(f,g,y))},getData:f=>uL(a)?"":e.getData(f),setData:(f,g)=>{Eg(a)&&e.setData(f,g)},clearData:f=>{Eg(a)&&e.clearData(f)}};return aL(a),a},_1=e=>{const n=B_(),s=aG(e);return N_(e),rL(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,nG(e).each(a=>n.setDragImage(a.image,a.x,a.y)),de(e.types,a=>{a!=="Files"&&n.setData(a,e.getData(a))}),de(e.files,a=>n.items.add(a)),dS(e).each(a=>{sL(n,a)}),s.each(a=>{iL(e,a),iL(n,a)}),n},dG=e=>{const n=e.getData("text/html");return n===""?V.none():V.some(n)},dL=(e,n)=>e.setData("text/html",n),F_="x-tinymce/html",gS=me(F_),I_="<!-- "+F_+" -->",fG=e=>I_+e,fL=e=>e.replace(I_,""),hL=e=>e.indexOf(I_)!==-1,hG=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),Jee=(e,n)=>{let s="<"+e;const a=xr(n,(f,g)=>g+'="'+Wm.encodeAllRaw(f)+'"');return a.length&&(s+=" "+a.join(" ")),s+">"},pS=(e,n,s)=>{const a=e.split(/\n\n/),f=Jee(n,s),g="</"+n+">",y=nt(a,E=>E.split(/\n/).join("<br />")),S=E=>f+E+g;return y.length===1?y[0]:nt(y,S).join("")},mL="%MCEPASTEBIN%",mG=(e,n)=>{const{dom:s,selection:a}=e,f=e.getBody();n.set(a.getRng());const g=s.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},mL);on.browser.isFirefox()&&s.setStyle(g,"left",s.getStyle(f,"direction",!0)==="rtl"?65535:-65535),s.bind(g,"beforedeactivate focusin focusout",y=>{y.stopPropagation()}),g.focus(),a.select(g,!0)},gG=(e,n)=>{const s=e.dom;if(L_(e)){let a;const f=n.get();for(;a=L_(e);)s.remove(a),s.unbind(a);f&&e.selection.setRng(f)}n.set(null)},L_=e=>e.dom.get("mcepastebin"),pG=e=>le(e)&&e.id==="mcepastebin",bG=e=>{const n=e.dom,s=(y,S)=>{y.appendChild(S),n.remove(S,!0)},[a,...f]=Ne(e.getBody().childNodes,pG);de(f,y=>{s(a,y)});const g=n.select("div[id=mcepastebin]",a);for(let y=g.length-1;y>=0;y--){const S=n.create("div");a.insertBefore(S,g[y]),s(S,g[y])}return a?a.innerHTML:""},gL=e=>e===mL,vG=e=>{const n=Ur(null);return{create:()=>mG(e,n),remove:()=>gG(e,n),getEl:()=>L_(e),getHtml:()=>bG(e),getLastRng:n.get}},pL=(e,n)=>(Lt.each(n,s=>{ae(s,RegExp)?e=e.replace(s,""):e=e.replace(s[0],s[1])}),e),yG=e=>{const n=If(),s=yu({},n);let a="";const f=n.getVoidElements(),g=Lt.makeMap("script noscript style textarea video audio iframe object"," "),y=n.getBlockElements(),S=E=>{const P=E.name,L=E;if(P==="br"){a+=`
`;return}if(P!=="wbr"){if(f[P]&&(a+=" "),g[P]){a+=" ";return}if(E.type===3&&(a+=E.value),!(E.name in n.getVoidElements())){let $=E.firstChild;if($)do S($);while($=$.next)}y[P]&&L.next&&(a+=`
`,P==="p"&&(a+=`
`))}};return e=pL(e,[/<!\[[^\]]+\]>/g]),S(s.parse(e)),a},bL=e=>(e=pL(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(s,a,f)=>!a&&!f?" ":xs],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),wG=e=>{let n=0;return()=>e+n++},xG=e=>{const n=e.toLowerCase(),s={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Lt.hasOwn(s,n)?"image/"+s[n]:"image/"+n},Zs=(e,n)=>{const s=yu({sanitize:kp(e),sandbox_iframes:Rw(e)},e.schema);s.addNodeFilter("meta",f=>{Lt.each(f,g=>{g.remove()})});const a=s.parse(n,{forced_root_block:!1,isRootContent:!0});return Ih({validate:!0},e.schema).serialize(a)},vL=(e,n)=>({content:e,cancelled:n}),yL=(e,n,s)=>{const a=e.dom.create("div",{style:"display:none"},n),f=RH(e,a,s);return vL(f.node.innerHTML,f.isDefaultPrevented())},CG=(e,n,s)=>{const a=PH(e,n,s),f=Zs(e,a.content);return e.hasEventListeners("PastePostProcess")&&!a.isDefaultPrevented()?yL(e,f,s):vL(f,a.isDefaultPrevented())},$_=(e,n,s)=>CG(e,n,s),bS=(e,n)=>(e.insertContent(n,{merge:P7(e),paste:!0}),!0),H_=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),SG=(e,n)=>H_(n)&&Bt(B3(e),s=>Xo(n.toLowerCase(),`.${s.toLowerCase()}`)),wL=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),V_=(e,n,s)=>(e.undoManager.extra(()=>{s(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),kG=(e,n,s)=>!e.selection.isCollapsed()&&H_(n)?V_(e,n,s):!1,EG=(e,n,s)=>SG(e,n)?wL(e,n,s):!1,AG=(e,n)=>{Lt.each([kG,EG,bS],s=>!s(e,n,bS))},xL=(e,n,s)=>{s||!R7(e)?bS(e,n):AG(e,n)},TG=wG("mceclip"),OG=e=>{const n=B_();return dL(n,e),N_(n),n},Ag=(e,n,s,a,f)=>{const g=$_(e,n,s);if(!g.cancelled){const y=g.content,S=()=>xL(e,y,a);f?v_(e,"insertFromPaste",{dataTransfer:OG(y)}).isDefaultPrevented()||(S(),Rv(e,"insertFromPaste")):S()}},vS=(e,n,s,a)=>{const f=s||hL(n);Ag(e,fL(n),f,!1,a)},nm=(e,n,s)=>{const a=e.dom.encode(n).replace(/\r\n/g,`
`),f=ap(a,oee(e)),g=pS(f,Ia(e),eb(e));Ag(e,g,!1,!0,s)},D1=e=>{const n={};if(e&&e.types)for(let s=0;s<e.types.length;s++){const a=e.types[s];try{n[a]=e.getData(a)}catch(f){n[a]=""}}return n},om=(e,n)=>n in e&&e[n].length>0,CL=e=>om(e,"text/html")||om(e,"text/plain"),M1=(e,n)=>{const s=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return le(s)?e.dom.encode(s[1]):void 0},_G=(e,n,s,a)=>{const f=TG(),g=tb(e)&&le(s.name),y=g?M1(e,s.name):f,S=g?s.name:void 0,E=n.create(f,s,a,y,S);return n.add(E),E},z_=(e,n)=>{Zx(n.uri).each(({data:s,type:a,base64Encoded:f})=>{const g=f?s:btoa(s),y=n.file,S=e.editorUpload.blobCache,E=S.getByData(g,a),P=E!=null?E:_G(e,S,y,g);vS(e,`<img src="${P.blobUri()}">`,!1,!0)})},DG=e=>e.type==="paste",SL=e=>Promise.all(nt(e,n=>pz(n).then(s=>({file:n,uri:s})))),kL=e=>{const n=B3(e);return s=>Vn(s.type,"image/")&&Bt(n,a=>xG(a)===s.type)},U_=(e,n)=>{const s=n.items?On(so(n.items),f=>f.kind==="file"?[f.getAsFile()]:[]):[],a=n.files?so(n.files):[];return Ne(s.length>0?s:a,kL(e))},W_=(e,n,s)=>{const a=DG(n)?n.clipboardData:n.dataTransfer;if(Pw(e)&&a){const f=U_(e,a);if(f.length>0)return n.preventDefault(),SL(f).then(g=>{s&&e.selection.setRng(s),de(g,y=>{z_(e,y)})}),!0}return!1},MG=e=>{var n,s;return on.os.isAndroid()&&((s=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||s===void 0?void 0:s.length)===0},PG=e=>mn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,yS=(e,n,s,a,f)=>{let g=bL(s);const y=om(n,gS())||hL(s),S=!y&&hG(g),E=H_(g);(gL(g)||!g.length||S&&!E)&&(a=!0),(a||E)&&(om(n,"text/plain")&&S?g=n["text/plain"]:g=yG(g)),!gL(g)&&(a?nm(e,g,f):vS(e,g,y,f))},RG=(e,n,s)=>{let a;const f=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",g=>{PG(g)&&!g.isDefaultPrevented()&&(a=g.shiftKey&&g.keyCode===86)}),e.on("paste",g=>{if(g.isDefaultPrevented()||MG(g))return;const y=s.get()==="text"||a;a=!1;const S=D1(g.clipboardData);!CL(S)&&W_(e,g,f())||(om(S,"text/html")?(g.preventDefault(),yS(e,S,S["text/html"],y,!0)):om(S,"text/plain")&&om(S,"text/uri-list")?(g.preventDefault(),yS(e,S,S["text/plain"],y,!0)):(n.create(),hc.setEditorTimeout(e,()=>{const E=n.getHtml();n.remove(),yS(e,S,E,y,!1)},0)))})},EL=e=>{const n=f=>Vn(f,"webkit-fake-url"),s=f=>Vn(f,"data:"),a=f=>{var g;return((g=f.data)===null||g===void 0?void 0:g.paste)===!0};e.parser.addNodeFilter("img",(f,g,y)=>{if(!Pw(e)&&a(y))for(const S of f){const E=S.attr("src");Z(E)&&!S.attr("data-mce-object")&&E!==on.transparentSrc&&(n(E)||!Kk(e)&&s(E))&&S.remove()}})},j_=(e,n,s)=>{RG(e,n,s),EL(e)},AL=(e,n)=>{n.get()==="text"?(n.set("html"),E4(e,!1)):(n.set("text"),E4(e,!0)),e.focus()},NG=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{AL(e,n)}),e.addCommand("mceInsertClipboardContent",(s,a)=>{a.html&&vS(e,a.html,a.internal,!1),a.text&&nm(e,a.text,!1)})},BG=(e,n,s)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",s),e.setData(gS(),n),!0}catch(a){return!1}else return!1},TL=(e,n,s,a)=>{BG(e.clipboardData,n.html,n.text)?(e.preventDefault(),a()):s(n.html,a)},Z_=e=>(n,s)=>{const{dom:a,selection:f}=e,g=a.create("div",{contenteditable:"false","data-mce-bogus":"all"}),y=a.create("div",{contenteditable:"true"},n);a.setStyles(g,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),g.appendChild(y),a.add(e.getBody(),g);const S=f.getRng();y.focus();const E=a.createRng();E.selectNodeContents(y),f.setRng(E),hc.setEditorTimeout(e,()=>{f.setRng(S),a.remove(g),s()},0)},wS=e=>({html:fG(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),FG=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),q_=e=>!e.selection.isCollapsed()||FG(e),OL=e=>n=>{!n.isDefaultPrevented()&&q_(e)&&e.selection.isEditable()&&TL(n,wS(e),Z_(e),()=>{if(on.browser.isChromium()||on.browser.isFirefox()){const s=e.selection.getRng();hc.setEditorTimeout(e,()=>{e.selection.setRng(s),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},IG=e=>n=>{!n.isDefaultPrevented()&&q_(e)&&TL(n,wS(e),Z_(e),ge)},_L=e=>{e.on("cut",OL(e)),e.on("copy",IG(e))},DL=(e,n)=>{var s,a;return sg.getCaretRangeFromPoint((s=n.clientX)!==null&&s!==void 0?s:0,(a=n.clientY)!==null&&a!==void 0?a:0,e.getDoc())},LG=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},ML=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},$G=e=>Bt(e.files,n=>/^image\//.test(n.type)),HG=(e,n,s,a)=>{const f=e.getParent(s,y=>ns(n,y));if(!G(e.getParent(s,"summary")))return!0;if(f&&Bn(a,"text/html")){const y=new DOMParser().parseFromString(a["text/html"],"text/html").body;return!G(y.querySelector(f.nodeName.toLowerCase()))}else return!1},xS=e=>{e.on("input",n=>{const s=a=>G(a.querySelector("summary"));if(n.inputType==="deleteByDrag"){const a=Ne(e.dom.select("details"),s);de(a,f=>{Us(f.firstChild)&&f.firstChild.remove();const g=e.dom.create("summary");g.appendChild(Zu().dom),f.prepend(g)})}})},VG=(e,n)=>{_7(e)&&e.on("dragend dragover draggesture dragdrop drop drag",s=>{s.preventDefault(),s.stopPropagation()}),Pw(e)||e.on("drop",s=>{const a=s.dataTransfer;a&&$G(a)&&s.preventDefault()}),e.on("drop",s=>{if(s.isDefaultPrevented())return;const a=DL(e,s);if($e(a))return;const f=D1(s.dataTransfer),g=om(f,gS());if((!CL(f)||LG(f))&&W_(e,s,a))return;const y=f[gS()],S=y||f["text/html"]||f["text/plain"],E=HG(e.dom,e.schema,a.startContainer,f),P=n.get();P&&!E||S&&(s.preventDefault(),hc.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(y||P&&E)&&e.execCommand("Delete"),ML(e,a);const L=bL(S);f["text/html"]?vS(e,L,g,!0):nm(e,L,!0)})}))}),e.on("dragstart",s=>{n.set(!0)}),e.on("dragover dragend",s=>{Pw(e)&&!n.get()&&(s.preventDefault(),ML(e,DL(e,s))),s.type==="dragend"&&n.set(!1)}),xS(e)},PL=e=>{const n=f=>g=>{f(e,g)},s=D7(e);Ee(s)&&e.on("PastePreProcess",n(s));const a=P3(e);Ee(a)&&e.on("PastePostProcess",n(a))},zG=(e,n)=>{e.on("PastePreProcess",s=>{s.content=n(e,s.content,s.internal)})},UG=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,G_=e=>Lt.trim(e).replace(UG,z0).toLowerCase(),RL=(e,n,s)=>{const a=R3(e);if(s||a==="all"||!M7(e))return n;const f=a?a.split(/[, ]/):[];if(f&&a!=="none"){const g=e.dom,y=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(S,E,P,L)=>{const $=g.parseStyle(g.decode(P)),W={};for(let fe=0;fe<f.length;fe++){const te=$[f[fe]];let he=te,Le=g.getStyle(y,f[fe],!0);/color/.test(f[fe])&&(he=G_(he),Le=G_(Le)),Le!==he&&(W[f[fe]]=te)}const re=g.serializeStyle(W,"span");return re?E+' style="'+re+'"'+L:E+L})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(g,y,S,E)=>y+' style="'+S+'"'+E),n},WG=e=>{(on.browser.isChromium()||on.browser.isSafari())&&zG(e,RL)},jG=e=>{const n=Ur(!1),s=Ur(N7(e)?"text":"html"),a=vG(e);WG(e),NG(e,s),PL(e),e.on("PreInit",()=>{_L(e),VG(e,n),j_(e,a,s)})},ZG=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},qG=e=>{e.parser.addNodeFilter("details",n=>{const s=ob(e);de(n,a=>{s==="expanded"?a.attr("open","open"):s==="collapsed"&&a.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const s=Z7(e);de(n,a=>{s==="expanded"?a.attr("open","open"):s==="collapsed"&&a.attr("open",null)})})},GG=e=>{ZG(e),qG(e)},NL=Us,BL=Vt,KG=e=>gs(e.dom),YG=e=>dl(e.dom),FL=e=>n=>ws(ye.fromDom(e),n),XG=(e,n,s)=>ul(ye.fromDom(e),a=>YG(a)||s.isBlock(ts(a)),FL(n)).getOr(ye.fromDom(n)).dom,IL=(e,n)=>ul(ye.fromDom(e),KG,FL(n)),LL=(e,n,s)=>{const a=new er(e,n),f=s?a.next.bind(a):a.prev.bind(a);let g=e;for(let y=s?e:f();y&&!NL(y);y=f())bi(y)&&(g=y);return g},JG=(e,n,s)=>{const f=bt.fromRangeStart(e).getNode(),g=XG(f,n,s),y=LL(f,g,!1),S=LL(f,g,!0),E=document.createRange();return IL(y,g).fold(()=>{BL(y)?E.setStart(y,0):E.setStartBefore(y)},P=>E.setStartBefore(P.dom)),IL(S,g).fold(()=>{BL(S)?E.setEnd(S,S.data.length):E.setEndAfter(S)},P=>E.setEndAfter(P.dom)),E},$L=e=>{const n=JG(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Kp(n))},HL=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),$L(e))})};var P1;(function(e){e.Before="before",e.After="after"})(P1||(P1={}));const QG=(e,n)=>Math.abs(e.left-n),eK=(e,n)=>Math.abs(e.right-n),tK=(e,n)=>e>=n.top&&e<=n.bottom,nK=(e,n)=>e.top<n.bottom&&e.bottom>n.top,oK=(e,n)=>{const s=Z8(e,n)/Math.min(e.height,n.height);return nK(e,n)&&s>.5},sK=(e,n)=>{const s=Ne(e,a=>tK(n,a));return j8(s).fold(()=>[[],e],a=>{const{pass:f,fail:g}=Fe(e,y=>oK(y,a));return[f,g]})},CS=(e,n)=>({node:e.node,position:QG(e,n)<eK(e,n)?P1.Before:P1.After}),VL=(e,n,s)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),K_=(e,n,s,a)=>{const f=$=>bi($.node)?V.some($):xn($.node)?K_(so($.node.childNodes),n,s,!1):V.none(),g=($,W,re)=>f(W).filter(fe=>Math.abs(re($,n,s)-re(fe,n,s))<2&&Vt(fe.node)),y=($,W)=>{const re=pt($,(fe,te)=>W(fe,n,s)-W(te,n,s));return lo(re,f).map(fe=>a&&!Vt(fe.node)&&re.length>1?g(fe,re[1],W).getOr(fe):fe)},[S,E]=sK(XB(e),s),{pass:P,fail:L}=Fe(E,$=>$.top<s);return y(S,VL).orThunk(()=>y(L,n3)).orThunk(()=>y(P,n3))},zL=(e,n,s,a)=>{const f=(g,y)=>{const S=P=>xn(P)&&P.classList.contains("mce-drag-container"),E=Ne(g.dom.childNodes,Ue(S));return y.fold(()=>K_(E,s,a,!0),P=>{const L=Ne(E,$=>$!==P.dom);return K_(L,s,a,!0)}).orThunk(()=>(ws(g,e)?V.none():Lu(g)).bind(L=>f(L,V.some(g))))};return f(n,V.none())},UL=(e,n,s)=>{const a=ye.fromDom(e),f=Iu(a),y=ye.fromPoint(f,n,s).filter(S=>Fu(a,S)).getOr(a);return zL(a,y,n,s)},SS=(e,n,s)=>UL(e,n,s).filter(a=>sb(a.node)).map(a=>CS(a,n)),WL=e=>{var n,s;const a=e.getBoundingClientRect(),f=e.ownerDocument,g=f.documentElement,y=f.defaultView;return{top:a.top+((n=y==null?void 0:y.scrollY)!==null&&n!==void 0?n:0)-g.clientTop,left:a.left+((s=y==null?void 0:y.scrollX)!==null&&s!==void 0?s:0)-g.clientLeft}},jL=e=>e.inline?WL(e.getBody()):{left:0,top:0},rK=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},ZL=e=>{const n=e.getBody(),s=e.getDoc().documentElement,a={left:n.scrollLeft,top:n.scrollTop},f={left:n.scrollLeft||s.scrollLeft,top:n.scrollTop||s.scrollTop};return e.inline?a:f},iK=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const s=WL(e.getContentAreaContainer()),a=ZL(e);return{left:n.pageX-s.left+a.left,top:n.pageY-s.top+a.top}}return{left:n.pageX,top:n.pageY}},qL=(e,n,s)=>({pageX:s.left-e.left+n.left,pageY:s.top-e.top+n.top}),aK=(e,n)=>qL(jL(e),rK(e),iK(e,n)),GL=e=>({target:e,srcElement:e}),lK=(e,n,s,a)=>ie(Ot(ie({},n),{dataTransfer:a,type:e}),GL(s)),Lv=(e,n,s)=>{const a=yt("Function not supported on simulated event.");return ie({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:a,initEvent:a,preventDefault:ge,stopImmediatePropagation:ge,stopPropagation:ge,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:a,initMouseEvent:a,getModifierState:a,dataTransfer:s},GL(n))},cK=(e,n)=>{const s=_1(e);return n==="dragstart"?(rL(s),aL(s)):n==="drop"?(oG(s),N_(s)):(fS(s),lL(s)),s},uK=(e,n,s,a)=>{const f=cK(s,e);return Re(a)?Lv(e,n,f):lK(e,a,n,f)},$v=32,dK=100,kS=8,ES=16,KL=gs,fK=G8(KL,dl),AS=(e,n,s)=>KL(s)&&s!==n&&e.isEditable(s.parentElement),YL=(e,n,s)=>$e(n)||n===s||e.dom.isChildOf(n,s)?!1:e.dom.isEditable(n),XL=(e,n,s,a)=>{const f=e.dom,g=n.cloneNode(!0);f.setStyles(g,{width:s,height:a}),f.setAttrib(g,"data-mce-selected",null);const y=f.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return f.setStyles(y,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:s,height:a}),f.setStyles(g,{margin:0,boxSizing:"border-box"}),y.appendChild(g),y},hK=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},TS=(e,n)=>s=>()=>{const a=e==="left"?s.scrollX:s.scrollY;s.scroll({[e]:a+n,behavior:"smooth"})},JL=TS("left",-$v),mK=TS("left",$v),QL=TS("top",-$v),OS=TS("top",$v),Y_=(e,n,s,a,f,g,y,S,E,P,L,$)=>{let W=0,re=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+s>f&&(W=n.pageX+s-f),n.pageY+a>g&&(re=n.pageY+a-g),e.style.width=s-W+"px",e.style.height=a-re+"px";const fe=E.clientHeight,te=E.clientWidth,he=y+E.getBoundingClientRect().top,Le=S+E.getBoundingClientRect().left;L.on(ze=>{ze.intervalId.clear(),ze.dragging&&$&&(y+kS>=fe?ze.intervalId.set(OS(P)):y-kS<=0?ze.intervalId.set(QL(P)):S+kS>=te?ze.intervalId.set(mK(P)):S-kS<=0?ze.intervalId.set(JL(P)):he+ES>=window.innerHeight?ze.intervalId.set(OS(window)):he-ES<=0?ze.intervalId.set(QL(window)):Le+ES>=window.innerWidth?ze.intervalId.set(mK(window)):Le-ES<=0&&ze.intervalId.set(JL(window)))})},Hv=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},gK=(e,n)=>{const s=e.getParent(n.parentNode,e.isBlock);Hv(n),s&&s!==e.getRoot()&&e.isEmpty(s)&&Pd(ye.fromDom(s))},pK=e=>e.button===0,e5=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),bK=(e,n)=>s=>{if(pK(s)){const a=st(n.dom.getParents(s.target),fK).getOr(null);if(le(a)&&AS(n.dom,n.getBody(),a)){const f=n.dom.getPos(a),g=n.getBody(),y=n.getDoc().documentElement;e.set({element:a,dataTransfer:B_(),dragging:!1,screenX:s.screenX,screenY:s.screenY,maxX:(n.inline?g.scrollWidth:y.offsetWidth)-2,maxY:(n.inline?g.scrollHeight:y.offsetHeight)-2,relX:s.pageX-f.x,relY:s.pageY-f.y,width:a.offsetWidth,height:a.offsetHeight,ghost:XL(n,a,a.offsetWidth,a.offsetHeight),intervalId:V8(dK)})}}},X_=(e,n,s)=>{e._selectionOverrides.hideFakeCaret(),SS(e.getBody(),n,s).fold(()=>e.selection.placeCaretAt(n,s),a=>{const f=e._selectionOverrides.showCaret(1,a.node,a.position===P1.Before,!1);f?e.selection.setRng(f):e.selection.placeCaretAt(n,s)})},R1=(e,n,s,a,f)=>{n==="dragstart"&&dL(a,e.dom.getOuterHTML(s));const g=uK(n,s,a,f);return e.dispatch(n,g)},vK=(e,n)=>{const s=fw((f,g)=>X_(n,f,g),0);n.on("remove",s.cancel);const a=e;return f=>e.on(g=>{const y=Math.max(Math.abs(f.screenX-g.screenX),Math.abs(f.screenY-g.screenY));if(!g.dragging&&y>10){const S=R1(n,"dragstart",g.element,g.dataTransfer,f);if(le(S.dataTransfer)&&(g.dataTransfer=S.dataTransfer),S.isDefaultPrevented())return;g.dragging=!0,n.focus()}if(g.dragging){const S=f.currentTarget===n.getDoc().documentElement,E=e5(g,aK(n,f));hK(g.ghost,n.getBody()),Y_(g.ghost,E,g.width,g.height,g.maxX,g.maxY,f.clientY,f.clientX,n.getContentAreaContainer(),n.getWin(),a,S),s.throttle(f.clientX,f.clientY)}})},yK=e=>{const n=e.getSel();if(le(n)){const a=n.getRangeAt(0).startContainer;return Vt(a)?a.parentNode:a}else return null},t5=(e,n)=>s=>{e.on(a=>{var f;if(a.intervalId.clear(),a.dragging){if(YL(n,yK(n.selection),a.element)){const g=(f=n.getDoc().elementFromPoint(s.clientX,s.clientY))!==null&&f!==void 0?f:n.getBody();R1(n,"drop",g,a.dataTransfer,s).isDefaultPrevented()||n.undoManager.transact(()=>{gK(n.dom,a.element),dG(a.dataTransfer).each(S=>n.insertContent(S)),n._selectionOverrides.hideFakeCaret()})}R1(n,"dragend",n.getBody(),a.dataTransfer,s)}}),o5(e)},n5=(e,n,s)=>{e.on(a=>{a.intervalId.clear(),a.dragging&&s.fold(()=>R1(n,"dragend",a.element,a.dataTransfer),f=>R1(n,"dragend",a.element,a.dataTransfer,f))}),o5(e)},Qee=(e,n)=>s=>n5(e,n,V.some(s)),o5=e=>{e.on(n=>{n.intervalId.clear(),Hv(n.ghost)}),e.clear()},wK=e=>{const n=Th(),s=nr.DOM,a=document,f=bK(n,e),g=vK(n,e),y=t5(n,e),S=Qee(n,e);e.on("mousedown",f),e.on("mousemove",g),e.on("mouseup",y),s.bind(a,"mousemove",g),s.bind(a,"mouseup",S),e.on("remove",()=>{s.unbind(a,"mousemove",g),s.unbind(a,"mouseup",S)}),e.on("keydown",E=>{E.keyCode===mn.ESC&&n5(n,e,V.none())})},xK=e=>{const n=f=>{if(!f.isDefaultPrevented()){const g=f.dataTransfer;g&&(Qe(g.types,"Files")||g.files.length>0)&&(f.preventDefault(),f.type==="drop"&&fC(e,"Dropped file type is not supported"))}},s=f=>{lx(e,f.target)&&n(f)},a=()=>{const f=nr.DOM,g=e.dom,y=document,S=e.inline?e.getBody():e.getDoc(),E=["drop","dragover"];de(E,P=>{f.bind(y,P,s),g.bind(S,P,n)}),e.on("remove",()=>{de(E,P=>{f.unbind(y,P,s),g.unbind(S,P,n)})})};e.on("init",()=>{hc.setEditorTimeout(e,a,0)})},s5=e=>{wK(e),Mw(e)&&xK(e)},CK=e=>{const n=fw(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const s=e.selection.getRng();if(s.collapsed){const a=kC(e,s,!1);e.selection.setRng(a)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},r5=e=>{e.on("init",()=>{e.on("focusin",n=>{const s=n.target;if(Xr(s)){const a=fg(e.getBody(),s),f=gs(a)?a:s;e.selection.getNode()!==f&&h1(e,f).each(g=>e.selection.setRng(g))}})})},Vv=gs,i5=(e,n)=>fg(e.getBody(),n),SK=e=>{const n=e.selection,s=e.dom,a=e.getBody(),f=U3(e,a,s.isBlock,()=>Fh(e)),g="sel-"+s.uniqueId(),y="data-mce-selected";let S;const E=sn=>le(sn)&&s.hasClass(sn,"mce-offscreen-selection"),P=sn=>sn!==a&&(Vv(sn)||Xr(sn))&&s.isChildOf(sn,a)&&s.isEditable(sn.parentNode),L=sn=>{sn&&n.setRng(sn)},$=(sn,vt,dt,Mt=!0)=>e.dispatch("ShowCaret",{target:vt,direction:sn,before:dt}).isDefaultPrevented()?null:(Mt&&n.scrollIntoView(vt,sn===-1),f.show(dt,vt)),W=sn=>{sn.hasAttribute("data-mce-caret")&&(Sh(sn),n.scrollIntoView(sn))},re=()=>{e.on("click",vt=>{s.isEditable(vt.target)||(vt.preventDefault(),e.focus())}),e.on("blur NewBlock",ot),e.on("ResizeWindow FullscreenStateChanged",f.reposition),e.on("tap",vt=>{const dt=vt.target,Mt=i5(e,dt);Vv(Mt)?(vt.preventDefault(),h1(e,Mt).each(Ve)):P(dt)&&h1(e,dt).each(Ve)},!0),e.on("mousedown",vt=>{const dt=vt.target;if(dt!==a&&dt.nodeName!=="HTML"&&!s.isChildOf(dt,a)||!GU(e,vt.clientX,vt.clientY))return;ot(),Wt();const Mt=i5(e,dt);Vv(Mt)?(vt.preventDefault(),h1(e,Mt).each(Ve)):SS(a,vt.clientX,vt.clientY).each(gn=>{vt.preventDefault();const Mn=$(1,gn.node,gn.position===P1.Before,!1);L(Mn),Tf(Mt)?Mt.focus():e.getBody().focus()})}),e.on("keypress",vt=>{mn.modifierPressed(vt)||Vv(n.getNode())&&vt.preventDefault()}),e.on("GetSelectionRange",vt=>{let dt=vt.range;if(S){if(!S.parentNode){S=null;return}dt=dt.cloneRange(),dt.selectNode(S),vt.range=dt}}),e.on("SetSelectionRange",vt=>{vt.range=he(vt.range);const dt=Ve(vt.range,vt.forward);dt&&(vt.range=dt)});const sn=vt=>xn(vt)&&vt.id==="mcepastebin";e.on("AfterSetSelectionRange",vt=>{const dt=vt.range,Mt=dt.startContainer.parentElement;!te(dt)&&!sn(Mt)&&Wt(),E(Mt)||ot()}),s5(e),CK(e),r5(e)},fe=sn=>Ba(sn)||Fm(sn)||P0(sn),te=sn=>fe(sn.startContainer)||fe(sn.endContainer),he=sn=>{const vt=e.schema.getVoidElements(),dt=s.createRng(),Mt=sn.startContainer,gn=sn.startOffset,Mn=sn.endContainer,ko=sn.endOffset;return Bn(vt,Mt.nodeName.toLowerCase())?gn===0?dt.setStartBefore(Mt):dt.setStartAfter(Mt):dt.setStart(Mt,gn),Bn(vt,Mn.nodeName.toLowerCase())?ko===0?dt.setEndBefore(Mn):dt.setEndAfter(Mn):dt.setEnd(Mn,ko),dt},Le=(sn,vt)=>{const dt=ye.fromDom(e.getBody()),Mt=e.getDoc(),gn=wh(dt,"#"+g).getOrThunk(()=>{const Ho=ye.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Mt);return Xs(Ho,"id",g),Yr(dt,Ho),Ho}),Mn=s.createRng();Od(gn),$s(gn,[ye.fromText(xs,Mt),ye.fromDom(vt),ye.fromText(xs,Mt)]),Mn.setStart(gn.dom.firstChild,1),Mn.setEnd(gn.dom.lastChild,0),xh(gn,{top:s.getPos(sn,e.getBody()).y+"px"}),V4(gn);const ko=n.getSel();return ko&&(ko.removeAllRanges(),ko.addRange(Mn)),Mn},ze=sn=>{const vt=sn.cloneNode(!0),dt=e.dispatch("ObjectSelected",{target:sn,targetClone:vt});if(dt.isDefaultPrevented())return null;const Mt=Le(sn,dt.targetClone),gn=ye.fromDom(sn);return de(va(ye.fromDom(e.getBody()),`*[${y}]`),Mn=>{ws(gn,Mn)||Nr(Mn,y)}),s.getAttrib(sn,y)||sn.setAttribute(y,"1"),S=sn,Wt(),Mt},Ve=(sn,vt)=>{if(!sn)return null;if(sn.collapsed){if(!te(sn)){const Mn=vt?1:-1,ko=lb(Mn,a,sn),Ho=ko.getNode(!vt);if(le(Ho)){if(sb(Ho))return $(Mn,Ho,vt?!ko.isAtEnd():!1,!1);if(oc(Ho)&&gs(Ho.nextSibling)){const qs=s.createRng();return qs.setStart(Ho,0),qs.setEnd(Ho,0),qs}}const Ms=ko.getNode(vt);if(le(Ms)){if(sb(Ms))return $(Mn,Ms,vt?!1:!ko.isAtEnd(),!1);if(oc(Ms)&&gs(Ms.previousSibling)){const qs=s.createRng();return qs.setStart(Ms,1),qs.setEnd(Ms,1),qs}}}return null}let dt=sn.startContainer,Mt=sn.startOffset;const gn=sn.endOffset;if(Vt(dt)&&Mt===0&&Vv(dt.parentNode)&&(dt=dt.parentNode,Mt=s.nodeIndex(dt),dt=dt.parentNode),!xn(dt))return null;if(gn===Mt+1&&dt===sn.endContainer){const Mn=dt.childNodes[Mt];if(P(Mn))return ze(Mn)}return null},ot=()=>{S&&S.removeAttribute(y),wh(ye.fromDom(e.getBody()),"#"+g).each(ks),S=null},Nt=()=>{f.destroy(),S=null},Wt=()=>{f.hide()};return sh(e)||re(),{showCaret:$,showBlockCaretContainer:W,hideFakeCaret:Wt,destroy:Nt}},kK=(e,n)=>{let s=n;for(let a=e.previousSibling;Vt(a);a=a.previousSibling)s+=a.data.length;return s},a5=(e,n,s,a,f)=>{if(Vt(s)&&(a<0||a>s.data.length))return[];const g=f&&Vt(s)?[kK(s,a)]:[a];let y=s;for(;y!==n&&y.parentNode;)g.push(e.nodeIndex(y,f)),y=y.parentNode;return y===n?g.reverse():[]},_S=(e,n,s,a,f,g,y=!1)=>{const S=a5(e,n,s,a,y),E=a5(e,n,f,g,y);return{start:S,end:E}},EK=(e,n)=>{const s=n.slice(),a=s.pop();return ft(a)?ve(s,(g,y)=>g.bind(S=>V.from(S.childNodes[y])),V.some(e)).bind(g=>Vt(g)&&(a<0||a>g.data.length)?V.none():V.some({node:g,offset:a})):V.none()},l5=(e,n)=>EK(e,n.start).bind(({node:s,offset:a})=>EK(e,n.end).map(({node:f,offset:g})=>{const y=document.createRange();return y.setStart(s,a),y.setEnd(f,g),y})),c5=(e,n,s,a=!1)=>_S(e,n,s.startContainer,s.startOffset,s.endContainer,s.endOffset,a),N1=(e,n,s)=>{if(n&&e.isEmpty(n)&&!s(n)){const a=n.parentNode;e.remove(n,Vt(n.firstChild)&&kh(n.firstChild.data)),N1(e,a,s)}},B1=(e,n,s,a=!0)=>{const f=n.startContainer.parentNode,g=n.endContainer.parentNode;n.deleteContents(),a&&!s(n.startContainer)&&(Vt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Vt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),N1(e,f,s),f!==g&&N1(e,g,s))},J_=(e,n)=>V.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),u5=(e,n,s)=>{const a=e.dynamicPatternsLookup({text:s,block:n});return Ot(ie({},e),{blockPatterns:Fk(a).concat(e.blockPatterns),inlinePatterns:f3(a).concat(e.inlinePatterns)})},d5=(e,n,s,a)=>{const f=e.createRng();return f.setStart(n,0),f.setEnd(s,a),f.toString()},f5=e=>/^\s[^\s]/.test(e),zv=(e,n,s)=>{KF(n,0,n).each(f=>{const g=f.container;WC(g,s.start.length,n).each(E=>{const P=e.createRng();P.setStart(g,0),P.setEnd(E.container,E.offset),B1(e,P,L=>L===n)});const y=ye.fromDom(g),S=ju(y);f5(S)&&Ql(y,S.slice(1))})},h5=(e,n)=>{const s=e.dom,a=n.pattern,f=l5(s.getRoot(),n.range).getOrDie("Unable to resolve path range"),g=(y,S)=>{const E=S.get(y);return De(E)&&jt(E).exists(P=>Bn(P,"block"))};return J_(e,f).each(y=>{a.type==="block-format"?g(a.format,e.formatter)&&e.undoManager.transact(()=>{zv(e.dom,y,a),e.formatter.apply(a.format)}):a.type==="block-command"&&e.undoManager.transact(()=>{zv(e.dom,y,a),e.execCommand(a.cmd,!1,a.value)})}),!0},m5=e=>pt(e,(n,s)=>s.start.length-n.start.length),AK=(e,n)=>{const s=m5(e),a=n.replace(xs," ");return st(s,f=>n.indexOf(f.start)===0||a.indexOf(f.start)===0)},TK=(e,n,s,a)=>{var f;const g=e.dom,y=Ia(e);if(!g.is(n,y))return[];const S=(f=n.textContent)!==null&&f!==void 0?f:"";return AK(s.blockPatterns,S).map(E=>Lt.trim(S).length===E.start.length?[]:[{pattern:E,range:_S(g,g.getRoot(),n,0,n,0,a)}]).getOr([])},g5=(e,n)=>{if(n.length===0)return;const s=e.selection.getBookmark();de(n,a=>h5(e,a)),e.selection.moveToBookmark(s)},p5=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),DS=(e,n)=>{const s=e.createRng();return s.setStartAfter(n.start),s.setEndBefore(n.end),s},b5=(e,n,s)=>{const a=l5(e.getRoot(),s).getOrDie("Unable to resolve path range"),f=a.startContainer,g=a.endContainer,y=a.endOffset===0?g:g.splitText(a.endOffset),S=a.startOffset===0?f:f.splitText(a.startOffset),E=S.parentNode,P=y.parentNode;return{prefix:n,end:P.insertBefore(p5(e,n+"-end"),y),start:E.insertBefore(p5(e,n+"-start"),S)}},MS=(e,n,s)=>{N1(e,e.get(n.prefix+"-end"),s),N1(e,e.get(n.prefix+"-start"),s)},Q_=e=>e.start.length===0,OK=e=>(n,s)=>{const f=n.data.substring(0,s),g=f.lastIndexOf(e.charAt(e.length-1)),y=f.lastIndexOf(e);return y!==-1?y+e.length:g!==-1?g+1:-1},v5=(e,n,s,a)=>{const f=n.start;return Ev(e,a.container,a.offset,OK(f),s).bind(y=>{var S,E;const P=(E=(S=s.textContent)===null||S===void 0?void 0:S.indexOf(f))!==null&&E!==void 0?E:-1;if(P!==-1&&y.offset>=P+f.length){const $=e.createRng();return $.setStart(y.container,y.offset-f.length),$.setEnd(y.container,y.offset),V.some($)}else{const $=y.offset-f.length;return kv(y.container,$,s).map(W=>{const re=e.createRng();return re.setStart(W.container,W.offset),re.setEnd(y.container,y.offset),re}).filter(W=>W.toString()===f).orThunk(()=>v5(e,n,s,Su(y.container,0)))}})},_K=(e,n,s,a,f,g=!1)=>{if(n.start.length===0&&!g){const y=e.createRng();return y.setStart(s,a),y.setEnd(s,a),V.some(y)}return Sv(s,a,f).bind(y=>v5(e,n,f,y).bind(E=>{var P;if(g){if(E.endContainer===y.container&&E.endOffset===y.offset)return V.none();if(y.offset===0&&((P=E.endContainer.textContent)===null||P===void 0?void 0:P.length)===E.endOffset)return V.none()}return V.some(E)}))},DK=(e,n,s,a)=>{const f=e.dom,g=f.getRoot(),y=s.pattern,S=s.position.container,E=s.position.offset;return kv(S,E-s.pattern.end.length,n).bind(P=>{const L=_S(f,g,P.container,P.offset,S,E,a);if(Q_(y))return V.some({matches:[{pattern:y,startRng:L,endRng:L}],position:P});{const $=PS(e,s.remainingPatterns,P.container,P.offset,n,a),W=$.getOr({matches:[],position:P}),re=W.position;return _K(f,y,re.container,re.offset,n,$.isNone()).map(te=>{const he=c5(f,g,te,a);return{matches:W.matches.concat([{pattern:y,startRng:he,endRng:L}]),position:Su(te.startContainer,te.startOffset)}})}})},PS=(e,n,s,a,f,g)=>{const y=e.dom;return Sv(s,a,y.getRoot()).bind(S=>{const E=d5(y,f,s,a);for(let P=0;P<n.length;P++){const L=n[P];if(!Xo(E,L.end))continue;const $=n.slice();$.splice(P,1);const W=DK(e,f,{pattern:L,remainingPatterns:$,position:S},g);if(W.isNone()&&a>0)return PS(e,n,s,a-1,f,g);if(W.isSome())return W}return V.none()})},eD=(e,n,s)=>{e.selection.setRng(s),n.type==="inline-format"?de(n.format,a=>{e.formatter.apply(a)}):e.execCommand(n.cmd,!1,n.value)},y5=(e,n,s,a)=>{const f=DS(e.dom,s);B1(e.dom,f,a),eD(e,n,f)},tD=(e,n,s,a,f)=>{const g=e.dom,y=DS(g,a),S=DS(g,s);B1(g,S,f),B1(g,y,f);const E={prefix:s.prefix,start:s.end,end:a.start},P=DS(g,E);eD(e,n,P)},nD=(e,n)=>{const s=vp("mce_textpattern"),a=kt(n,(f,g)=>{const y=b5(e,s+`_end${f.length}`,g.endRng);return f.concat([Ot(ie({},g),{endMarker:y})])},[]);return kt(a,(f,g)=>{const y=a.length-f.length-1,S=Q_(g.pattern)?g.endMarker:b5(e,s+`_start${y}`,g.startRng);return f.concat([Ot(ie({},g),{startMarker:S})])},[])},MK=e=>pt(e,(n,s)=>s.end.length-n.end.length),oD=(e,n)=>{const s=ao(e,a=>Bt(n,f=>a.pattern.start===f.pattern.start&&a.pattern.end===f.pattern.end));return e.length===n.length?s?e:n:e.length>n.length?e:n},w5=(e,n,s,a,f,g)=>{const y=PS(e,f.inlinePatterns,s,a,n,g).fold(()=>[],E=>E.matches),S=PS(e,MK(f.inlinePatterns),s,a,n,g).fold(()=>[],E=>E.matches);return oD(y,S)},x5=(e,n)=>{if(n.length===0)return;const s=e.dom,a=e.selection.getBookmark(),f=nD(s,n);de(f,g=>{const y=s.getParent(g.startMarker.start,s.isBlock),S=E=>E===y;Q_(g.pattern)?y5(e,g.pattern,g.endMarker,S):tD(e,g.pattern,g.startMarker,g.endMarker,S),MS(s,g.endMarker,S),MS(s,g.startMarker,S)}),e.selection.moveToBookmark(a)},C5=(e,n)=>{const s=e.selection.getRng();return J_(e,s).map(a=>{var f;const g=Math.max(0,s.startOffset),y=u5(n,a,(f=a.textContent)!==null&&f!==void 0?f:""),S=w5(e,a,s.startContainer,g,y,!0),E=TK(e,a,y,!0);return E.length>0||S.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{n8(e),x5(e,S),g5(e,E);const P=e.selection.getRng(),L=Sv(P.startContainer,P.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),L.each($=>{const W=$.container;W.data.charAt($.offset-1)===D0&&(W.deleteData($.offset-1,1),N1(e.dom,W.parentNode,re=>re===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},PK=(e,n)=>{const s=e.selection.getRng();J_(e,s).map(a=>{const f=Math.max(0,s.startOffset-1),g=d5(e.dom,a,s.startContainer,f),y=u5(n,a,g),S=w5(e,a,s.startContainer,f,y,!1);S.length>0&&e.undoManager.transact(()=>{x5(e,S)})})},S5=(e,n,s)=>{for(let a=0;a<e.length;a++)if(s(e[a],n))return!0;return!1},RK=(e,n)=>S5(e,n,(s,a)=>s===a.keyCode&&!mn.modifierPressed(a)),NK=(e,n)=>S5(e,n,(s,a)=>s.charCodeAt(0)===a.charCode),BK=e=>{const n=[",",".",";",":","!","?"],s=[32],a=()=>Dl(Yk(e),B7(e)),f=()=>V7(e);e.on("keydown",y=>{if(y.keyCode===13&&!mn.modifierPressed(y)&&e.selection.isCollapsed()){const S=a();(S.inlinePatterns.length>0||S.blockPatterns.length>0||f())&&C5(e,S)&&y.preventDefault()}},!0);const g=()=>{if(e.selection.isCollapsed()){const y=a();(y.inlinePatterns.length>0||f())&&PK(e,y)}};e.on("keyup",y=>{RK(s,y)&&g()}),e.on("keypress",y=>{NK(n,y)&&hc.setEditorTimeout(e,g)})},FK=e=>{BK(e)},IK=e=>{const n=Lt.each,s=mn.BACKSPACE,a=mn.DELETE,f=e.dom,g=e.selection,y=e.parser,S=on.browser,E=S.isFirefox(),P=S.isChromium()||S.isSafari(),L=on.deviceType.isiPhone()||on.deviceType.isiPad(),$=on.os.isMacOS()||on.os.isiOS(),W=(yn,co)=>{try{e.getDoc().execCommand(yn,!1,String(co))}catch(Gt){}},re=yn=>yn.isDefaultPrevented(),fe=()=>{const yn=Gt=>{const uo=f.create("body"),Ko=Gt.cloneContents();return uo.appendChild(Ko),g.serializer.serialize(uo,{format:"html"})},co=Gt=>{const uo=yn(Gt),Ko=f.createRng();Ko.selectNode(e.getBody());const Is=yn(Ko);return uo===Is};e.on("keydown",Gt=>{const uo=Gt.keyCode;if(!re(Gt)&&(uo===a||uo===s)&&e.selection.isEditable()){const Ko=e.selection.isCollapsed(),Is=e.getBody();if(Ko&&!Mr(ye.fromDom(Is))||!Ko&&!co(e.selection.getRng()))return;Gt.preventDefault(),e.setContent(""),Is.firstChild&&f.isBlock(Is.firstChild)?e.selection.setCursorLocation(Is.firstChild,0):e.selection.setCursorLocation(Is,0),e.nodeChanged()}})},te=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},he=()=>{e.inline||f.bind(e.getDoc(),"mousedown mouseup",yn=>{let co;if(yn.target===e.getDoc().documentElement)if(co=g.getRng(),e.getBody().focus(),yn.type==="mousedown"){if(Ba(co.startContainer))return;g.placeCaretAt(yn.clientX,yn.clientY)}else g.setRng(co)})},Le=()=>{e.on("keydown",yn=>{if(!re(yn)&&yn.keyCode===s){if(!e.getBody().getElementsByTagName("hr").length)return;if(g.isCollapsed()&&g.getRng().startOffset===0){const co=g.getNode(),Gt=co.previousSibling;if(co.nodeName==="HR"){f.remove(co),yn.preventDefault();return}Gt&&Gt.nodeName&&Gt.nodeName.toLowerCase()==="hr"&&(f.remove(Gt),yn.preventDefault())}}})},ze=()=>{Range.prototype.getClientRects||e.on("mousedown",yn=>{if(!re(yn)&&yn.target.nodeName==="HTML"){const co=e.getBody();co.blur(),hc.setEditorTimeout(e,()=>{co.focus()})}})},Ve=()=>{const yn=O3(e);e.on("click",co=>{const Gt=co.target;/^(IMG|HR)$/.test(Gt.nodeName)&&f.isEditable(Gt)&&(co.preventDefault(),e.selection.select(Gt),e.nodeChanged()),Gt.nodeName==="A"&&f.hasClass(Gt,yn)&&Gt.childNodes.length===0&&f.isEditable(Gt.parentNode)&&(co.preventDefault(),g.select(Gt))})},ot=()=>{const yn=()=>{const Gt=f.getAttribs(g.getStart().cloneNode(!1));return()=>{const uo=g.getStart();uo!==e.getBody()&&(f.setAttrib(uo,"style",null),n(Gt,Ko=>{uo.setAttributeNode(Ko.cloneNode(!0))}))}},co=()=>!g.isCollapsed()&&f.getParent(g.getStart(),f.isBlock)!==f.getParent(g.getEnd(),f.isBlock);e.on("keypress",Gt=>{let uo;return!re(Gt)&&(Gt.keyCode===8||Gt.keyCode===46)&&co()?(uo=yn(),e.getDoc().execCommand("delete",!1),uo(),Gt.preventDefault(),!1):!0}),f.bind(e.getDoc(),"cut",Gt=>{if(!re(Gt)&&co()){const uo=yn();hc.setEditorTimeout(e,()=>{uo()})}})},Nt=()=>{e.on("keydown",yn=>{if(!re(yn)&&yn.keyCode===s&&g.isCollapsed()&&g.getRng().startOffset===0){const co=g.getNode().previousSibling;if(co&&co.nodeName&&co.nodeName.toLowerCase()==="table")return yn.preventDefault(),!1}return!0})},Wt=()=>{e.on("keydown",yn=>{if(re(yn)||yn.keyCode!==mn.BACKSPACE)return;let co=g.getRng();const Gt=co.startContainer,uo=co.startOffset,Ko=f.getRoot();let Is=Gt;if(!(!co.collapsed||uo!==0)){for(;Is.parentNode&&Is.parentNode.firstChild===Is&&Is.parentNode!==Ko;)Is=Is.parentNode;Is.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Is),co=f.createRng(),co.setStart(Gt,0),co.setEnd(Gt,0),g.setRng(co))}})},sn=()=>{const yn=()=>{W("StyleWithCSS",!1),W("enableInlineTableEditing",!1),C3(e)||W("enableObjectResizing",!1)};T3(e)||e.on("BeforeExecCommand mousedown",yn)},vt=()=>{const yn=()=>{n(f.select("a:not([data-mce-block])"),co=>{var Gt;let uo=co.parentNode;const Ko=f.getRoot();if((uo==null?void 0:uo.lastChild)===co){for(;uo&&!f.isBlock(uo);){if(((Gt=uo.parentNode)===null||Gt===void 0?void 0:Gt.lastChild)!==uo||uo===Ko)return;uo=uo.parentNode}f.add(uo,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",co=>{(co.type==="setcontent"||co.command==="mceInsertLink")&&yn()})},dt=()=>{e.on("init",()=>{W("DefaultParagraphSeparator",Ia(e))})},Mt=yn=>{const co=yn.getBody(),Gt=yn.selection.getRng();return Gt.startContainer===Gt.endContainer&&Gt.startContainer===co&&Gt.startOffset===0&&Gt.endOffset===co.childNodes.length},gn=()=>{e.on("keyup focusin mouseup",yn=>{!mn.modifierPressed(yn)&&!Mt(e)&&g.normalize()},!0)},Mn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ko=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Ho=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",yn=>{let co;yn.target.nodeName==="HTML"&&(co=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(co),e.selection.normalize(),e.nodeChanged())}))},Ms=()=>{$&&e.on("keydown",yn=>{mn.metaKeyPressed(yn)&&!yn.shiftKey&&(yn.keyCode===37||yn.keyCode===39)&&(yn.preventDefault(),e.selection.getSel().modify("move",yn.keyCode===37?"backward":"forward","lineboundary"))})},qs=()=>{e.on("click",yn=>{let co=yn.target;do if(co.tagName==="A"){yn.preventDefault();return}while(co=co.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Tr=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",yn=>{yn.preventDefault()})})},Qi=()=>{y.addNodeFilter("br",yn=>{let co=yn.length;for(;co--;)yn[co].attr("class")==="Apple-interchange-newline"&&yn[co].remove()})},Bs=ge,Xt=()=>{if(!E||e.removed)return!1;const yn=e.selection.getSel();return!yn||!yn.rangeCount||yn.rangeCount===0},cn=()=>{P&&(he(),Ve(),Tr(),te(),L&&(ko(),Ho(),qs())),E&&(ze(),sn(),Mn(),Ms())},as=()=>{e.on("drop",yn=>{var co;const Gt=(co=yn.dataTransfer)===null||co===void 0?void 0:co.getData("text/html");Z(Gt)&&/^<img[^>]*>$/.test(Gt)&&e.dispatch("dragend",new window.DragEvent("dragend",yn))})},zo=()=>{Wt(),fe(),on.windowsPhone||gn(),P&&(he(),Ve(),dt(),Tr(),Nt(),Qi(),L?(ko(),Ho(),qs()):te()),E&&(Le(),ze(),ot(),sn(),vt(),Mn(),Ms(),Nt(),as())};return sh(e)?cn():zo(),{refreshContentEditable:Bs,isHidden:Xt}},RS=nr.DOM,LK=(e,n)=>{const s=ye.fromDom(e.getBody()),a=w0($u(s)),f=ye.fromTag("style");Xs(f,"type","text/css"),Yr(f,ye.fromText(n)),Yr(a,f),e.on("remove",()=>{ks(f)})},sD=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,rD=e=>di(e,n=>Re(n)===!1),k5=e=>{const n=e.options.get,s=e.editorUpload.blobCache;return rD({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:sD(e),sandbox_iframes:n("sandbox_iframes"),sanitize:n("xss_sanitization"),validate:!0,blob_cache:s,document:e.getDoc()})},E5=e=>{const n=e.options.get;return rD({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},$K=e=>{const n=e.options.get;return ie(ie(ie({},k5(e)),E5(e)),rD({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")}))},HK=e=>{const n=yu(k5(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(s,a)=>{const f=e.dom,g="data-mce-"+a;let y=s.length;for(;y--;){const S=s[y];let E=S.attr(a);if(E&&!S.attr(g)){if(E.indexOf("data:")===0||E.indexOf("blob:")===0)continue;a==="style"?(E=f.serializeStyle(f.parseStyle(E),S.name),E.length||(E=null),S.attr(g,E),S.attr(a,E)):a==="tabindex"?(S.attr(g,E),S.attr(a,null)):S.attr(g,e.convertURL(E,a,S.name))}}}),n.addNodeFilter("script",s=>{let a=s.length;for(;a--;){const f=s[a],g=f.attr("type")||"no/type";g.indexOf("mce-")!==0&&f.attr("type","mce-"+g)}}),L7(e)&&n.addNodeFilter("#cdata",s=>{var a;let f=s.length;for(;f--;){const g=s[f];g.type=8,g.name="#comment",g.value="[CDATA["+e.dom.encode((a=g.value)!==null&&a!==void 0?a:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",s=>{let a=s.length;const f=e.schema.getNonEmptyElements();for(;a--;){const g=s[a];g.isEmpty(f)&&g.getAll("br").length===0&&g.append(new $a("br",1))}}),n},VK=e=>{const n=D3(e);n&&hc.setEditorTimeout(e,()=>{let s;n===!0?s=e:s=e.editorManager.get(n),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)},NS=e=>{const n=e.dom.getRoot();!e.inline&&(!zw(e)||e.selection.getStart(!0)===n)&&La(n).each(s=>{const a=s.getNode(),f=Dd(a)?La(a).getOr(s):s;e.selection.setRng(f.toRange())})},zK=e=>{e.bindPendingEventDelegates(),e.initialized=!0,OH(e),e.focus(!0),NS(e),e.nodeChanged({initial:!0});const n=A7(e);Ee(n)&&n.call(e,e),VK(e)},iD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,UK=(e,n,s)=>{const{pass:a,fail:f}=Fe(n,S=>tinymce.Resource.has(XT(S))),y=[...a.map(S=>{const E=tinymce.Resource.get(XT(S));return Z(E)?Promise.resolve(iD(e).loadRawCss(S,E)):Promise.resolve()}),iD(e).loadAll(f)];return e.inline?y:y.concat([e.ui.styleSheetLoader.loadAll(s)])},A5=e=>{const n=iD(e),s=x3(e),a=e.contentCSS,f=()=>{n.unloadAll(a),e.inline||e.ui.styleSheetLoader.unloadAll(s)},g=()=>{e.removed?f():e.on("remove",f)};if(e.contentStyles.length>0){let E="";Lt.each(e.contentStyles,P=>{E+=P+`\r
`}),e.dom.addStyle(E)}const y=Promise.all(UK(e,a,s)).then(g).catch(g),S=Aw(e);return S&&LK(e,S),y},WK=e=>{const n=e.getDoc(),s=e.getBody();C4(e),O7(e)||(n.body.spellcheck=!1,RS.setAttrib(s,"spellcheck","false")),e.quirks=IK(e),TH(e);const a=h7(e);a!==void 0&&(s.dir=a);const f=M3(e);f&&e.on("BeforeSetContent",g=>{Lt.each(f,y=>{g.content=g.content.replace(y,S=>"<!--mce:protected "+escape(S)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",g=>{e.composing=g.type==="compositionstart"})},jK=e=>{sh(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},aD=e=>{e.removed!==!0&&(jK(e),zK(e))},ZK=e=>{let n=!1;const s=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(s),n=!0,e.setProgressState(!1)}},T5=e=>{const n=e.getElement();let s=e.getDoc();e.inline&&(RS.addClass(n,"mce-content-body"),e.contentDocument=s=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const a=e.getBody();a.disabled=!0,e.readonly=T3(e),e._editableRoot=Vf(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&RS.getStyle(a,"position",!0)==="static"&&(a.style.position="relative"),a.contentEditable="true"),a.disabled=!1,e.editorUpload=hW(e),e.schema=If(E5(e)),e.dom=nr(s,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:xp(e),referrerPolicy:or(e),onSetAttrib:y=>{e.dispatch("SetAttrib",y)},force_hex_color:q7(e)}),e.parser=HK(e),e.serializer=eB($K(e),e),e.selection=Wh(e.dom,e.getWin(),e.serializer,e),e.annotator=_E(e),e.formatter=tO(e),e.undoManager=nO(e),e._nodeChangeDispatcher=new oL(e),e._selectionOverrides=SK(e),Rj(e),GG(e),Bee(e),sh(e)||(HL(e),FK(e));const f=tG(e);Cg(e,f),Ij(e),xu(e),jG(e);const g=lU(e);WK(e),g.fold(()=>{const y=ZK(e);A5(e).then(()=>{aD(e),y()})},y=>{e.setProgressState(!0),A5(e).then(()=>{y().then(S=>{e.setProgressState(!1),aD(e),jT(e)},S=>{e.notificationManager.open({type:"error",text:String(S)}),aD(e),jT(e)})})})},O5=je,qK=(e,n,s)=>E0(e,n,O5,s),BS=nr.DOM,GK=(e,n,s,a)=>{const f=ye.fromTag("iframe");return a.each(g=>Xs(f,"tabindex",g)),Vr(f,s),Vr(f,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Cf(f,"tox-edit-area__iframe"),f},KK=e=>{let n=g3(e)+"<html><head>";$k(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const s=Hk(e),a=o7(e),f=e.translate(E7(e));return Vk(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Vk(e)+'" />'),n+=`</head><body id="${s}" class="mce-content-body ${a}" data-id="${e.id}" aria-label="${f}"><br></body></html>`,n},_5=(e,n)=>{const s=e.translate("Rich Text Area"),a=Da(ye.fromDom(e.getElement()),"tabindex").bind(Wi),f=GK(e.id,s,Lk(e),a).dom;f.onload=()=>{f.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=f,e.iframeHTML=KK(e),BS.add(n.iframeContainer,f)},Uv=e=>{const n=e.iframeElement,s=()=>{e.contentDocument=n.contentDocument,T5(e)};if(H7(e)||on.browser.isFirefox()){const a=e.getDoc();a.open(),a.write(e.iframeHTML),a.close(),s()}else{const a=qK(ye.fromDom(n),"load",()=>{a.unbind(),s()});n.srcdoc=e.iframeHTML}},YK=(e,n)=>{_5(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=BS.isHidden(n.editorContainer)),e.getElement().style.display="none",BS.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,Uv(e)},lD=nr.DOM,XK=(e,n,s)=>{const a=bg.get(s),f=bg.urls[s]||e.documentBaseUrl.replace(/\/$/,"");if(s=Lt.trim(s),a&&Lt.inArray(n,s)===-1){if(e.plugins[s])return;try{const g=a(e,f)||{};e.plugins[s]=g,Ee(g.init)&&(g.init(e,f),n.push(s))}catch(g){fB(e,s,g)}}},JK=e=>e.replace(/^\-/,""),QK=e=>{const n=[];de(Dw(e),s=>{XK(e,n,JK(s))})},eY=e=>{const n=Lt.trim(v3(e)),s=e.ui.registry.getAll().icons,a=ie(ie({},iv.get("default").icons),iv.get(n).icons);$t(a,(f,g)=>{Bn(s,g)||e.ui.registry.addIcon(g,f)})},D5=e=>{const n=Cp(e);if(Z(n)){const s=rh.get(n);e.theme=s(e,rh.urls[n])||{},Ee(e.theme.init)&&e.theme.init(e,rh.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},tY=e=>{const n=jk(e),s=Lc.get(n);e.model=s(e,Lc.urls[n])},M5=e=>{const n=e.theme.renderUI;return n?n():R5(e)},nY=e=>{const n=e.getElement(),a=Cp(e)(e,n);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||e.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||e.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:n.offsetHeight,a},P5=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),oY=e=>{const n=lD.create("div");return lD.insertAfter(n,e),P5(n,n)},R5=e=>{const n=e.getElement();return e.inline?P5(null):oY(n)},sY=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Z(Cp(e))?M5(e):Ee(Cp(e))?nY(e):R5(e)},rY=(e,n)=>{const s={show:V.from(n.show).getOr(ge),hide:V.from(n.hide).getOr(ge),isEnabled:V.from(n.isEnabled).getOr(je),setEnabled:a=>{e.mode.isReadOnly()||V.from(n.setEnabled).each(f=>f(a))}};e.ui=ie(ie({},e.ui),s)},iY=e=>jo(this,null,function*(){e.dispatch("ScriptsLoaded"),eY(e),D5(e),tY(e),QK(e);const n=yield sY(e);rY(e,V.from(n.api).getOr({})),e.editorContainer=n.editorContainer,oW(e),e.inline?T5(e):YK(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})}),Tg=nr.DOM,N5=e=>e.charAt(0)==="-",B5=(e,n)=>{const s=Wk(n),a=Qa(n);if(!lu.hasCode(s)&&s!=="en"){const f=Po(a)?a:`${n.editorManager.baseURL}/langs/${s}.js`;e.add(f).catch(()=>{lv(n,f,s)})}},cD=(e,n)=>{const s=Cp(e);if(Z(s)&&!N5(s)&&!Bn(rh.urls,s)){const a=v7(e),f=a?e.documentBaseURI.toAbsolute(a):`themes/${s}/theme${n}.js`;rh.load(s,f).catch(()=>{QU(e,f,s)})}},F5=(e,n)=>{const s=jk(e);if(s!=="plugin"&&!Bn(Lc.urls,s)){const a=y7(e),f=Z(a)?e.documentBaseURI.toAbsolute(a):`models/${s}/model${n}.js`;Lc.load(s,f).catch(()=>{dB(e,f,s)})}},I5=e=>V.from(c7(e)).filter(Po).map(n=>({url:n,name:V.none()})),L5=(e,n,s)=>V.from(n).filter(a=>Po(a)&&!iv.has(a)).map(a=>({url:`${e.editorManager.baseURL}/icons/${a}/icons${s}.js`,name:V.some(a)})),aY=(e,n,s)=>{const a=L5(n,"default",s),f=I5(n).orThunk(()=>L5(n,v3(n),""));de(zs([a,f]),g=>{e.add(g.url).catch(()=>{JU(n,g.url,g.name.getOrUndefined())})})},lY=(e,n)=>{const s=(a,f)=>{bg.load(a,f).catch(()=>{Pee(e,f,a)})};$t(Mh(e),(a,f)=>{s(f,a),e.options.set("plugins",Dw(e).concat(f))}),de(Dw(e),a=>{a=Lt.trim(a),a&&!bg.urls[a]&&!N5(a)&&s(a,`plugins/${a}/plugin${n}.js`)})},$5=e=>{const n=Cp(e);return!Z(n)||le(rh.get(n))},H5=e=>{const n=jk(e);return le(Lc.get(n))},cY=(e,n)=>{const s=vi.ScriptLoader,a=()=>{!e.removed&&$5(e)&&H5(e)&&iY(e)};cD(e,n),F5(e,n),B5(s,e),aY(s,e,n),lY(e,n),s.loadQueue().then(a,a)},uY=(e,n)=>rk.forElement(e,{contentCssCors:_w(n),referrerPolicy:or(n)}),uD=e=>{const n=e.id;lu.setCode(Wk(e));const s=()=>{Tg.unbind(window,"ready",s),e.render()};if(!Mc.Event.domLoaded){Tg.bind(window,"ready",s);return}if(!e.getElement())return;const a=ye.fromDom(e.getElement()),f=Kl(a);e.on("remove",()=>{xe(a.dom.attributes,y=>Nr(a,y.name)),Vr(a,f)}),e.ui.styleSheetLoader=uY(a,e),Zk(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const g=e.getElement().form||Tg.getParent(n,"form");g&&(e.formElement=g,x7(e)&&!j2(e.getElement())&&(Tg.insertAfter(Tg.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=y=>{e.dispatch(y.type,y)},Tg.bind(g,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),C7(e)&&!g.submit.nodeType&&!g.submit.length&&!g._mceOldSubmit&&(g._mceOldSubmit=g.submit,g.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),g._mceOldSubmit(g)))),e.windowManager=uB(e),e.notificationManager=YT(e),W7(e)&&e.on("GetContent",y=>{y.save&&(y.content=Tg.encode(y.content))}),Hf(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Tw(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),cY(e,e.suffix)},FS=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),NH(e,n))},IS=e=>e._editableRoot,ch=(e,n)=>({sections:me(e),options:me(n)}),Wv=Rs().deviceType,Og=Wv.isPhone(),V5=Wv.isTablet(),jv=e=>{if($e(e))return[];{const n=De(e)?e:e.split(/[ ,]/),s=nt(n,Bi);return Ne(s,Po)}},dY=(e,n)=>{const s=hr(n,(a,f)=>Qe(e,f));return ch(s.t,s.f)},z5=(e,n,s={})=>{const a=e.sections(),f=us(a,n).getOr({});return Lt.extend({},s,f)},dD=(e,n)=>Bn(e.sections(),n),fD=(e,n)=>dD(e,n)?e.sections()[n]:{},LS=(e,n)=>{const s={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:us(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},a={menubar:!1};return ie(ie({},s),n?a:{})},sm=(e,n)=>{var s;const a=(s=n.external_plugins)!==null&&s!==void 0?s:{};return e&&e.external_plugins?Lt.extend({},e.external_plugins,a):a},_g=(e,n)=>[...jv(e),...jv(n)],U5=(e,n,s,a)=>e&&dD(n,"mobile")?a:s,fY=(e,n,s,a)=>{const f=jv(s.forced_plugins),g=jv(a.plugins),y=fD(n,"mobile"),S=y.plugins?jv(y.plugins):g,E=U5(e,n,g,S),P=_g(f,E);return Lt.extend(a,{forced_plugins:f,plugins:P})},hY=(e,n)=>e&&dD(n,"mobile"),mY=(e,n,s,a,f)=>{var g;const y=e?{mobile:LS((g=f.mobile)!==null&&g!==void 0?g:{},n)}:{},S=dY(["mobile"],Mv(y,f)),E=Lt.extend(s,a,S.options(),hY(e,S)?z5(S,"mobile"):{},{external_plugins:sm(a,S.options())});return fY(e,S,a,E)},gY=(e,n)=>mY(Og||V5,Og,n,e,n),pY=(e,n)=>wU(e,n),bY=e=>{const n=(a,f)=>{e.formatter.toggle(a,f),e.nodeChanged()},s=a=>()=>{de("left,center,right,justify".split(","),f=>{a!==f&&e.formatter.remove("align"+f)}),a!=="none"&&n("align"+a)};e.editorCommands.addCommands({JustifyLeft:s("left"),JustifyCenter:s("center"),JustifyRight:s("right"),JustifyFull:s("justify"),JustifyNone:s("none")})},W5=e=>{const n=s=>()=>{const a=e.selection,f=a.isCollapsed()?[e.dom.getParent(a.getNode(),e.dom.isBlock)]:a.getSelectedBlocks();return Bt(f,g=>le(e.formatter.matchNode(g,s)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},vY=e=>{bY(e),W5(e)},yY=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const s=e.getDoc();let a;try{s.execCommand(n)}catch(f){a=!0}if(n==="paste"&&!s.queryCommandEnabled(n)&&(a=!0),a||!s.queryCommandSupported(n)){let f=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(on.os.isMacOS()||on.os.isiOS())&&(f=f.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:f,type:"error"})}}})},wY=(e,n,s,a)=>{const f=ye.fromDom(e.getRoot());return Up(f,bt.fromRangeStart(n),a)?s=s.replace(/^ /,"&nbsp;"):s=s.replace(/^&nbsp;/," "),Wp(f,bt.fromRangeEnd(n),a)?s=s.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):s=s.replace(/&nbsp;(<br( \/)?>)?$/," "),s},ete=e=>{if(typeof e!="string"){const n=Lt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},xY=(e,n)=>{const s=e.selection,a=e.dom;return/^ | $/.test(n)?wY(a,s.getRng(),n,e.schema):n},F1=(e,n)=>{if(e.selection.isEditable()){const{content:s,details:a}=ete(n);kT(e,Ot(ie({},a),{content:xY(e,s),format:"html",set:!1,selection:!0})).each(f=>{const g=vU(e,f.content,a);Qx(e,g,f),e.addVisual()})}},CY=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,s,a)=>{F1(e,e.dom.createHTML("img",{src:a}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,s,a)=>{F1(e,e.dom.encode(a))},insertHTML:(n,s,a)=>{F1(e,a)},mceInsertContent:(n,s,a)=>{F1(e,a)},mceSetContent:(n,s,a)=>{e.setContent(a)},mceReplaceContent:(n,s,a)=>{e.execCommand("mceInsertContent",!1,a.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Gk(e))}})},SY={"font-size":"size","font-family":"face"},j5=Hr("font"),kY=(e,n,s)=>{const a=g=>Tm(g,e).orThunk(()=>j5(g)?us(SY,e).bind(y=>Da(g,y)):V.none()),f=g=>ws(ye.fromDom(n),g);return th(ye.fromDom(s),g=>a(g),f)},Z5=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),EY=(e,n)=>V.from(nr.DOM.getStyle(n,e,!0)),$S=e=>(n,s)=>V.from(s).map(ye.fromDom).filter(pn).bind(a=>kY(e,n,a.dom).or(EY(e,a.dom))).getOr(""),AY=$S("font-size"),TY=O(Z5,$S("font-family")),OY=e=>La(e.getBody()).bind(n=>{const s=n.container();return V.from(Vt(s)?s.parentNode:s)}),_Y=e=>V.from(e.selection.getRng()).bind(n=>{const s=e.getBody();return n.startContainer===s&&n.startOffset===0?V.none():V.from(e.selection.getStart(!0))}),q5=(e,n)=>_Y(e).orThunk(Be(OY,e)).map(ye.fromDom).filter(pn).bind(n),Zv=(e,n)=>q5(e,Ye(V.some,n)),hD=(e,n)=>{if(/^[0-9.]+$/.test(n)){const s=parseInt(n,10);if(s>=1&&s<=7){const a=z7(e),f=U7(e);return f.length>0?f[s-1]||n:a[s-1]||n}else return n}else return n},mD=e=>{const n=e.split(/\s*,\s*/);return nt(n,s=>s.indexOf(" ")!==-1&&!(Vn(s,'"')||Vn(s,"'"))?`'${s}'`:s).join(",")},DY=(e,n)=>{const s=hD(e,n);e.formatter.toggle("fontname",{value:mD(s)}),e.nodeChanged()},tte=e=>Zv(e,n=>TY(e.getBody(),n.dom)).getOr(""),nte=(e,n)=>{e.formatter.toggle("fontsize",{value:hD(e,n)}),e.nodeChanged()},MY=e=>Zv(e,n=>AY(e.getBody(),n.dom)).getOr(""),G5=e=>Zv(e,n=>{const s=ye.fromDom(e.getBody()),a=th(n,g=>Tm(g,"line-height"),Be(ws,s)),f=()=>{const g=parseFloat(ru(n,"line-height")),y=parseFloat(ru(n,"font-size"));return String(g/y)};return a.getOrThunk(f)}).getOr(""),PY=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},RY=e=>{const n=(s,a)=>{e.formatter.toggle(s,a),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>{n(s)},"ForeColor,HiliteColor":(s,a,f)=>{n(s,{value:f})},BackColor:(s,a,f)=>{n("hilitecolor",{value:f})},FontName:(s,a,f)=>{DY(e,f)},FontSize:(s,a,f)=>{nte(e,f)},LineHeight:(s,a,f)=>{PY(e,f)},Lang:(s,a,f)=>{var g;n(s,{value:f.code,customValue:(g=f.customCode)!==null&&g!==void 0?g:null})},RemoveFormat:s=>{e.formatter.remove(s)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(s,a,f)=>{n(Z(f)?f:"p")},mceToggleFormat:(s,a,f)=>{n(f)}})},NY=e=>{const n=s=>e.formatter.match(s);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":s=>n(s),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>tte(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>MY(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>G5(e))},ote=e=>{RY(e),NY(e)},ste=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},K5=e=>{e.editorCommands.addCommands({Indent:()=>{Pj(e)},Outdent:()=>{$O(e)}}),e.editorCommands.addCommands({Outdent:()=>BC(e)},"state")},Y5=e=>{const n=(s,a,f)=>{const g=Z(f)?{href:f}:f,y=e.dom.getParent(e.selection.getNode(),"a");ce(g)&&Z(g.href)&&(g.href=g.href.replace(/ /g,"%20"),(!y||!g.href)&&e.formatter.remove("link"),g.href&&e.formatter.apply("link",g,y))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const s=e.dom.getParent(e.selection.getStart(),"a");s&&e.dom.remove(s,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},BY=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const s=e.dom.getParent(e.selection.getNode(),"ol,ul");if(s){const a=s.parentNode;if(a&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(a.nodeName)){const f=e.selection.getBookmark();e.dom.split(a,s),e.selection.moveToBookmark(f)}}}})},FY=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const s=e.dom.getParent(e.selection.getNode(),"ul,ol");return s&&(n==="insertunorderedlist"&&s.tagName==="UL"||n==="insertorderedlist"&&s.tagName==="OL")}},"state")},IY=e=>{BY(e),FY(e)},rte=(e,n,s,a)=>{const f=e.dom,g=S=>f.isBlock(S)&&S.parentElement===s,y=g(n)?n:f.getParent(a,g,s);return V.from(y).map(ye.fromDom)},LY=(e,n)=>{const s=e.dom,a=e.selection.getRng(),f=n?e.selection.getStart():e.selection.getEnd(),g=n?a.startContainer:a.endContainer,y=yc(s,g);if(!y||!y.isContentEditable)return;const S=n?Ra:Hu,E=Ia(e);rte(e,f,y,g).each(P=>{const L=w_(e,g,P.dom,y,!1,E);S(P,ye.fromDom(L)),e.selection.setCursorLocation(L,0),e.dispatch("NewBlock",{newBlock:L}),Rv(e,"insertParagraph")})},ite=e=>LY(e,!0),$Y=e=>LY(e,!1),ate=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{ite(e)},InsertNewBlockAfter:()=>{$Y(e)}})},HY=e=>{e.editorCommands.addCommands({insertParagraph:()=>{iS($I,e)},mceInsertNewLine:(n,s,a)=>{WI(e,a)},InsertLineBreak:(n,s,a)=>{iS($q,e)}})},Dg=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,s,a)=>{let f=0;e.dom.getParent(e.selection.getNode(),g=>xn(g)&&f++===a?(e.selection.select(g),!1):!0,e.getBody())},mceSelectNode:(n,s,a)=>{e.selection.select(a)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),dl);if(n){const s=e.dom.createRng();s.selectNodeContents(n),e.selection.setRng(s)}}})},gD=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,s,a)=>{const f=a!=null?a:e.selection.getNode();if(f!==e.getBody()){const g=e.selection.getBookmark();e.dom.remove(f,!0),e.selection.moveToBookmark(g)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,s,a)=>{k9(e,a===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},HS=e=>{vY(e),yY(e),ste(e),Dg(e),CY(e),Y5(e),K5(e),ate(e),HY(e),IY(e),ote(e),gD(e)},X5=["toggleview"],pD=e=>Qe(X5,e.toLowerCase());class bD{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,s=!1,a,f){const g=this.editor,y=n.toLowerCase(),S=f==null?void 0:f.skip_focus;if(g.removed||(y!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(y)&&!S?g.focus():u9(g)),g.dispatch("BeforeExecCommand",{command:n,ui:s,value:a}).isDefaultPrevented()))return!1;const P=this.commands.exec[y];return Ee(P)?(P(y,s,a),g.dispatch("ExecCommand",{command:n,ui:s,value:a}),!0):!1}queryCommandState(n){if(!pD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const s=n.toLowerCase(),a=this.commands.state[s];return Ee(a)?a(s):!1}queryCommandValue(n){if(!pD(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const s=n.toLowerCase(),a=this.commands.value[s];return Ee(a)?a(s):""}addCommands(n,s="exec"){const a=this.commands;$t(n,(f,g)=>{de(g.toLowerCase().split(","),y=>{a[s][y]=f})})}addCommand(n,s,a){const f=n.toLowerCase();this.commands.exec[f]=(g,y,S)=>s.call(a!=null?a:this.editor,y,S)}queryCommandSupported(n){const s=n.toLowerCase();return!!this.commands.exec[s]}addQueryStateHandler(n,s,a){this.commands.state[n.toLowerCase()]=()=>s.call(a!=null?a:this.editor)}addQueryValueHandler(n,s,a){this.commands.value[n.toLowerCase()]=()=>s.call(a!=null?a:this.editor)}}const Mg="data-mce-contenteditable",VY=(e,n,s)=>{Xg(e,n)&&!s?Bu(e,n):s&&Cf(e,n)},vD=(e,n,s)=>{try{e.getDoc().execCommand(n,!1,String(s))}catch(a){}},VS=(e,n)=>{e.dom.contentEditable=n?"true":"false"},rm=e=>{de(va(e,'*[contenteditable="true"]'),n=>{Xs(n,Mg,"true"),VS(n,!1)})},zY=e=>{de(va(e,`*[${Mg}="true"]`),n=>{Nr(n,Mg),VS(n,!0)})},J5=e=>{V.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},UY=e=>{e.selection.setRng(e.selection.getRng())},zS=(e,n)=>{const s=ye.fromDom(e.getBody());VY(s,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),J5(e),e.readonly=!0,VS(s,!1),rm(s)):(e.readonly=!1,e.hasEditableRoot()&&VS(s,!0),zY(s),vD(e,"StyleWithCSS",!1),vD(e,"enableInlineTableEditing",!1),vD(e,"enableObjectResizing",!1),nP(e)&&e.focus(),UY(e),e.nodeChanged())},Pg=e=>e.readonly,Q5=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Pg(e)&&de(n,s=>{s.attr(Mg,s.attr("contenteditable")),s.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Mg,n=>{Pg(e)&&de(n,s=>{s.attr("contenteditable",s.attr(Mg))})}),e.serializer.addTempAttr(Mg)},WY=e=>{e.serializer?Q5(e):e.on("PreInit",()=>{Q5(e)})},e$=e=>e.type==="click",jY=["copy"],ZY=e=>Qe(jY,e.type),qY=(e,n)=>Td(n,"a",a=>ws(a,ye.fromDom(e.getBody()))).bind(a=>Da(a,"href")),yD=(e,n)=>{if(e$(n)&&!mn.metaKeyPressed(n)){const s=ye.fromDom(n.target);qY(e,s).each(a=>{if(n.preventDefault(),/^#/.test(a)){const f=e.dom.select(`${a},[name="${An(a,"#")}"]`);f.length&&e.selection.scrollIntoView(f[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else ZY(n)&&e.dispatch(n.type,n)},GY=e=>{e.on("ShowCaret",n=>{Pg(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Pg(e)&&n.preventDefault()})},KY=Lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class ti{static isNative(n){return!!KY[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ue}fire(n,s){return this.dispatch(n,s)}dispatch(n,s){const a=n.toLowerCase(),f=fk(a,s!=null?s:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(f);const g=this.bindings[a];if(g)for(let y=0,S=g.length;y<S;y++){const E=g[y];if(!E.removed){if(E.once&&this.off(a,E.func),f.isImmediatePropagationStopped())return f;if(E.func.call(this.scope,f)===!1)return f.preventDefault(),f}}return f}on(n,s,a,f){if(s===!1&&(s=ue),s){const g={func:s,removed:!1};f&&Lt.extend(g,f);const y=n.toLowerCase().split(" ");let S=y.length;for(;S--;){const E=y[S];let P=this.bindings[E];P||(P=[],this.toggleEvent(E,!0)),a?P=[g,...P]:P=[...P,g],this.bindings[E]=P}}return this}off(n,s){if(n){const a=n.toLowerCase().split(" ");let f=a.length;for(;f--;){const g=a[f];let y=this.bindings[g];if(!g)return $t(this.bindings,(S,E)=>{this.toggleEvent(E,!1),delete this.bindings[E]}),this;if(y){if(!s)y.length=0;else{const S=Fe(y,E=>E.func===s);y=S.fail,this.bindings[g]=y,de(S.pass,E=>{E.removed=!0})}y.length||(this.toggleEvent(n,!1),delete this.bindings[g])}}}else $t(this.bindings,(a,f)=>{this.toggleEvent(f,!1)}),this.bindings={};return this}once(n,s,a){return this.on(n,s,a,{once:!0})}has(n){n=n.toLowerCase();const s=this.bindings[n];return!(!s||s.length===0)}}const qv=e=>(e._eventDispatcher||(e._eventDispatcher=new ti({scope:e,toggleEvent:(n,s)=>{ti.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,s)}})),e._eventDispatcher),wD={fire(e,n,s){return this.dispatch(e,n,s)},dispatch(e,n,s){const a=this;if(a.removed&&e!=="remove"&&e!=="detach")return fk(e.toLowerCase(),n!=null?n:{},a);const f=qv(a).dispatch(e,n);if(s!==!1&&a.parent){let g=a.parent();for(;g&&!f.isPropagationStopped();)g.dispatch(e,f,!1),g=g.parent?g.parent():void 0}return f},on(e,n,s){return qv(this).on(e,n,s)},off(e,n){return qv(this).off(e,n)},once(e,n){return qv(this).once(e,n)},hasEventListeners(e){return qv(this).has(e)}},I1=nr.DOM;let im;const L1=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const s=S3(e);return s?(e.eventRoot||(e.eventRoot=I1.select(s)[0]),e.eventRoot):e.getBody()},YY=e=>!e.hidden&&!Pg(e),t$=(e,n,s)=>{YY(e)?e.dispatch(n,s):Pg(e)&&yD(e,s)},n$=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const s=L1(e,n);if(S3(e)){if(im||(im={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||im&&($t(im,(f,g)=>{e.dom.unbind(L1(e,g))}),im=null)})),im[n])return;const a=f=>{const g=f.target,y=e.editorManager.get();let S=y.length;for(;S--;){const E=y[S].getBody();(E===g||I1.isChildOf(g,E))&&t$(y[S],n,f)}};im[n]=a,I1.bind(s,n,a)}else{const a=f=>{t$(e,n,f)};I1.bind(s,n,a),e.delegates[n]=a}},o$=Ot(ie({},wD),{bindPendingEventDelegates(){const e=this;Lt.each(e._pendingNativeEvents,n=>{n$(e,n)})},toggleNativeEvent(e,n){const s=this;e==="focus"||e==="blur"||s.removed||(n?s.initialized?n$(s,e):s._pendingNativeEvents?s._pendingNativeEvents.push(e):s._pendingNativeEvents=[e]:s.initialized&&s.delegates&&(s.dom.unbind(L1(s,e),e,s.delegates[e]),delete s.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),s=e.dom;e.delegates&&($t(e.delegates,(a,f)=>{e.dom.unbind(L1(e,f),f,a)}),delete e.delegates),!e.inline&&n&&s&&(n.onload=null,s.unbind(e.getWin()),s.unbind(e.getDoc())),s&&(s.unbind(n),s.unbind(e.getContainer()))}}),XY=e=>Z(e)?{value:e.split(/[ ,]/),valid:!0}:ne(e,Z)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},JY=e=>{const n=(()=>{switch(e){case"array":return De;case"boolean":return qe;case"function":return Ee;case"number":return ft;case"object":return ce;case"string":return Z;case"string[]":return XY;case"object[]":return s=>ne(s,ce);case"regexp":return s=>ae(s,RegExp);default:return je}})();return s=>Hc(s,n,`The value must be a ${e}.`)},QY=e=>Z(e.processor),lte=(e,n)=>{const s=Io(n.message)?"":`. ${n.message}`;return e+s},Rg=e=>e.valid,Hc=(e,n,s="")=>{const a=n(e);return qe(a)?a?{value:e,valid:!0}:{valid:!1,message:s}:a},eX=(e,n,s)=>{if(!Re(n)){const a=Hc(n,s);if(Rg(a))return a.value}},tX=(e,n)=>{const s={},a={},f=($,W,re)=>{const fe=Hc(W,re);return Rg(fe)?(a[$]=fe.value,!0):!1},g=($,W)=>{const re=QY(W)?JY(W.processor):W.processor,fe=eX($,W.default,re);s[$]=Ot(ie({},W),{default:fe,processor:re}),us(a,$).orThunk(()=>us(n,$)).each(he=>f($,he,re))},y=$=>Bn(s,$);return{register:g,isRegistered:y,get:$=>us(a,$).orThunk(()=>us(s,$).map(W=>W.default)).getOrUndefined(),set:($,W)=>{if(y($)){const re=s[$];return re.immutable?!1:f($,W,re.processor)}else return!1},unset:$=>{const W=y($);return W&&delete a[$],W},isSet:$=>Bn(a,$)}},nX=["design","readonly"],s$=(e,n,s,a)=>{const f=s[n.get()],g=s[a];try{g.activate()}catch(y){return}f.deactivate(),f.editorReadOnly!==g.editorReadOnly&&zS(e,g.editorReadOnly),n.set(a),EH(e,a)},oX=(e,n,s,a)=>{if(a!==s.get()){if(!Bn(n,a))throw new Error(`Editor mode '${a}' is invalid`);e.initialized?s$(e,s,n,a):e.on("init",()=>s$(e,s,n,a))}},sX=(e,n,s)=>{if(Qe(nX,n))throw new Error(`Cannot override default mode ${n}`);return Ot(ie({},e),{[n]:Ot(ie({},s),{deactivate:()=>{try{s.deactivate()}catch(a){}}})})},rX=e=>{const n=Ur("design"),s=Ur({design:{activate:ge,deactivate:ge,editorReadOnly:!1},readonly:{activate:ge,deactivate:ge,editorReadOnly:!0}});return WY(e),GY(e),{isReadOnly:()=>Pg(e),set:a=>oX(e,s.get(),n,a),get:()=>n.get(),register:(a,f)=>{s.set(sX(s.get(),a,f))}}},xD=Lt.each,CD=Lt.explode,cte={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},r$=Lt.makeMap("alt,ctrl,shift,meta,access"),iX=e=>e in r$,aX=e=>{const n={},s=on.os.isMacOS()||on.os.isiOS();xD(CD(e.toLowerCase(),"+"),g=>{iX(g)?n[g]=!0:/^[0-9]{2,}$/.test(g)?n.keyCode=parseInt(g,10):(n.charCode=g.charCodeAt(0),n.keyCode=cte[g]||g.toUpperCase().charCodeAt(0))});const a=[n.keyCode];let f;for(f in r$)n[f]?a.push(f):n[f]=!1;return n.id=a.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class i${constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const s=this;n.on("keyup keypress keydown",a=>{(s.hasModifier(a)||s.isFunctionKey(a))&&!a.isDefaultPrevented()&&(xD(s.shortcuts,f=>{s.matchShortcut(a,f)&&(s.pendingPatterns=f.subpatterns.slice(0),a.type==="keydown"&&s.executeShortcutAction(f))}),s.matchShortcut(a,s.pendingPatterns[0])&&(s.pendingPatterns.length===1&&a.type==="keydown"&&s.executeShortcutAction(s.pendingPatterns[0]),s.pendingPatterns.shift()))})}add(n,s,a,f){const g=this,y=g.normalizeCommandFunc(a);return xD(CD(Lt.trim(n)),S=>{const E=g.createShortcut(S,s,y,f);g.shortcuts[E.id]=E}),!0}remove(n){const s=this.createShortcut(n);return this.shortcuts[s.id]?(delete this.shortcuts[s.id],!0):!1}normalizeCommandFunc(n){const s=this,a=n;return typeof a=="string"?()=>{s.editor.execCommand(a,!1,null)}:Lt.isArray(a)?()=>{s.editor.execCommand(a[0],a[1],a[2])}:a}createShortcut(n,s,a,f){const g=Lt.map(CD(n,">"),aX);return g[g.length-1]=Lt.extend(g[g.length-1],{func:a,scope:f||this.editor}),Lt.extend(g[0],{desc:this.editor.translate(s),subpatterns:g.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,s){return!s||s.ctrl!==n.ctrlKey||s.meta!==n.metaKey||s.alt!==n.altKey||s.shift!==n.shiftKey?!1:n.keyCode===s.keyCode||n.charCode&&n.charCode===s.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const lX=()=>{const e={},n={},s={},a={},f={},g={},y={},S={},E=(L,$)=>(W,re)=>{L[W.toLowerCase()]=Ot(ie({},re),{type:$})},P=(L,$)=>a[L.toLowerCase()]=$;return{addButton:E(e,"button"),addGroupToolbarButton:E(e,"grouptoolbarbutton"),addToggleButton:E(e,"togglebutton"),addMenuButton:E(e,"menubutton"),addSplitButton:E(e,"splitbutton"),addMenuItem:E(n,"menuitem"),addNestedMenuItem:E(n,"nestedmenuitem"),addToggleMenuItem:E(n,"togglemenuitem"),addAutocompleter:E(s,"autocompleter"),addContextMenu:E(f,"contextmenu"),addContextToolbar:E(g,"contexttoolbar"),addContextForm:E(g,"contextform"),addSidebar:E(y,"sidebar"),addView:E(S,"views"),addIcon:P,getAll:()=>({buttons:e,menuItems:n,icons:a,popups:s,contextMenus:f,contextToolbars:g,sidebars:y,views:S})}},cX=()=>{const e=lX();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},$1=nr.DOM,a$=Lt.extend,uX=Lt.each;class US{constructor(n,s,a){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=a,this.documentBaseUrl=a.documentBaseURL,a$(this,o$);const f=this;this.id=n,this.hidden=!1;const g=gY(a.defaultOptions,s);this.options=tX(f,g),m3(f);const y=this.options.get;y("deprecation_warnings")&&_ee(s,g);const S=y("suffix");S&&(a.suffix=S),this.suffix=a.suffix;const E=y("base_url");E&&a._setBaseUrl(E),this.baseUri=a.baseURI;const P=or(f);P&&(vi.ScriptLoader._setReferrerPolicy(P),nr.DOM.styleSheetLoader._setReferrerPolicy(P));const L=_w(f);le(L)&&nr.DOM.styleSheetLoader._setContentCssCors(L),Xa.languageLoad=y("language_load"),Xa.baseURL=a.baseURL,this.setDirty(!1),this.documentBaseURI=new Fc($k(f),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Zk(f),this.hasVisual=S7(f),this.shortcuts=new i$(this),this.editorCommands=new bD(this),HS(this);const $=y("cache_suffix");$&&(on.cacheSuffix=$.replace(/^[\?\&]+/,"")),this.ui={registry:cX(),styleSheetLoader:void 0,show:ge,hide:ge,setEnabled:ge,isEnabled:je},this.mode=rX(f),a.dispatch("SetupEditor",{editor:this});const W=_3(f);Ee(W)&&W.call(f,f)}render(){uD(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Fh(this)}translate(n){return lu.translate(n)}getParam(n,s,a){const f=this.options;return f.isRegistered(n)||(le(a)?f.register(n,{processor:a,default:s}):f.register(n,{processor:je,default:s})),!f.isSet(n)&&!Re(s)?s:f.get(n)}hasPlugin(n,s){return Qe(Dw(this),n)?s?bg.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,s,a){this.editorCommands.addCommand(n,s,a)}addQueryStateHandler(n,s,a){this.editorCommands.addQueryStateHandler(n,s,a)}addQueryValueHandler(n,s,a){this.editorCommands.addQueryValueHandler(n,s,a)}addShortcut(n,s,a,f){this.shortcuts.add(n,s,a,f)}execCommand(n,s,a,f){return this.editorCommands.execCommand(n,s,a,f)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":($1.show(n.getContainer()),$1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):($1.hide(n.getContainer()),$1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,s){this.dispatch("ProgressState",{state:n,time:s})}load(n={}){const s=this,a=s.getElement();if(s.removed)return"";if(a){const f=Ot(ie({},n),{load:!0}),g=j2(a)?a.value:a.innerHTML,y=s.setContent(g,f);return f.no_events||s.dispatch("LoadContent",Ot(ie({},f),{element:a})),y}else return""}save(n={}){const s=this;let a=s.getElement();if(!a||!s.initialized||s.removed)return"";const f=Ot(ie({},n),{save:!0,element:a});let g=s.getContent(f);const y=Ot(ie({},f),{content:g});if(y.no_events||s.dispatch("SaveContent",y),y.format==="raw"&&s.dispatch("RawSaveContent",y),g=y.content,j2(a))a.value=g;else{(n.is_removing||!s.inline)&&(a.innerHTML=g);const S=$1.getParent(s.id,"form");S&&uX(S.elements,E=>E.name===s.id?(E.value=g,!1):!0)}return y.element=f.element=a=null,y.set_dirty!==!1&&s.setDirty(!1),g}setContent(n,s){return qT(this,n,s)}getContent(n){return nB(this,n)}insertContent(n,s){s&&(n=a$({content:n},s)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?qT(this,this.startContent,{format:"raw"}):qT(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const s=!this.isNotDirty;this.isNotDirty=!n,n&&n!==s&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||$1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=$1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const s=n.iframeElement;s&&(n.contentWindow=s.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const s=n.getWin();s&&(n.contentDocument=s.document)}return n.contentDocument}getBody(){var n,s;const a=this.getDoc();return(s=(n=this.bodyElement)!==null&&n!==void 0?n:a==null?void 0:a.body)!==null&&s!==void 0?s:null}convertURL(n,s,a){const f=this,g=f.options.get,y=T7(f);if(Ee(y))return y.call(f,n,a,!0,s);if(!g("convert_urls")||a==="link"||ce(a)&&a.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const S=new Fc(n);return S.protocol!=="http"&&S.protocol!=="https"&&S.protocol!==""?n:g("relative_urls")?f.documentBaseURI.toRelative(n):(n=f.documentBaseURI.toAbsolute(n,g("remove_script_host")),n)}addVisual(n){pY(this,n)}setEditableRoot(n){FS(this,n)}hasEditableRoot(){return IS(this)}remove(){ZU(this)}destroy(n){qU(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const H1=nr.DOM,WS=Lt.each;let l$=!1,jS,yl=[];const ZS=e=>{const n=e.type;WS(am.get(),s=>{switch(n){case"scroll":s.dispatch("ScrollWindow",e);break;case"resize":s.dispatch("ResizeWindow",e);break}})},c$=e=>{if(e!==l$){const n=nr.DOM;e?(n.bind(window,"resize",ZS),n.bind(window,"scroll",ZS)):(n.unbind(window,"resize",ZS),n.unbind(window,"scroll",ZS)),l$=e}},u$=e=>{const n=yl;return yl=Ne(yl,s=>e!==s),am.activeEditor===e&&(am.activeEditor=yl.length>0?yl[0]:null),am.focusedEditor===e&&(am.focusedEditor=null),n.length!==yl.length},dX=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(u$(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},fX=document.compatMode!=="CSS1Compat",am=Ot(ie({},wD),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.4",releaseDate:"2024-06-19",i18n:lu,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",s="",a=Fc.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(a)&&(a=a.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a)||(a+="/"));const f=window.tinymce||window.tinyMCEPreInit;if(f)n=f.base||f.baseURL,s=f.suffix;else{const g=document.getElementsByTagName("script");for(let y=0;y<g.length;y++){const S=g[y].src||"";if(S==="")continue;const E=S.substring(S.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(S)){E.indexOf(".min")!==-1&&(s=".min"),n=S.substring(0,S.lastIndexOf("/"));break}}if(!n&&document.currentScript){const y=document.currentScript.src;y.indexOf(".min")!==-1&&(s=".min"),n=y.substring(0,y.lastIndexOf("/"))}}e.baseURL=new Fc(a).toAbsolute(n),e.documentBaseURL=a,e.baseURI=new Fc(e.baseURL),e.suffix=s,b9(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const s=e.suffix;s&&(this.suffix=s),this.defaultOptions=e;const a=e.plugin_base_urls;a!==void 0&&$t(a,(f,g)=>{Xa.PluginManager.urls[g]=f})},init(e){const n=this;let s;const a=Lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),f=(L,$)=>L.inline&&$.tagName.toLowerCase()in a,g=L=>{let $=L.id;return $||($=us(L,"name").filter(W=>!H1.get(W)).getOrThunk(H1.uniqueId),L.setAttribute("id",$)),$},y=L=>{const $=e[L];if($)return $.apply(n,[])},S=L=>on.browser.isIE()||on.browser.isEdge()?(cv("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):fX?(cv("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Z(L.selector)?H1.select(L.selector):le(L.target)?[L.target]:[];let E=L=>{s=L};const P=()=>{let L=0;const $=[];let W;const re=(fe,te,he)=>{const Le=new US(fe,te,n);$.push(Le),Le.on("init",()=>{++L===W.length&&E($)}),Le.targetElm=Le.targetElm||he,Le.render()};H1.unbind(window,"ready",P),y("onpageload"),W=Qo(S(e)),Lt.each(W,fe=>{dX(n.get(fe.id))}),W=Lt.grep(W,fe=>!n.get(fe.id)),W.length===0?E([]):WS(W,fe=>{f(e,fe)?cv("Could not initialize inline editor on invalid inline target element",fe):re(g(fe),e,fe)})};return H1.bind(window,"ready",P),new Promise(L=>{s?L(s):E=$=>{L($)}})},get(e){return arguments.length===0?yl.slice(0):Z(e)?st(yl,n=>n.id===e).getOr(null):ft(e)&&yl[e]?yl[e]:null},add(e){const n=this,s=n.get(e.id);return s===e||(s===null&&yl.push(e),c$(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),jS||(jS=a=>{const f=n.dispatch("BeforeUnload");if(f.returnValue)return a.preventDefault(),a.returnValue=f.returnValue,f.returnValue},window.addEventListener("beforeunload",jS))),e},createEditor(e,n){return this.add(new US(e,n,this))},remove(e){const n=this;let s;if(!e){for(let a=yl.length-1;a>=0;a--)n.remove(yl[a]);return}if(Z(e)){WS(H1.select(e),a=>{s=n.get(a.id),s&&n.remove(s)});return}return s=e,G(n.get(s.id))?null:(u$(s)&&n.dispatch("RemoveEditor",{editor:s}),yl.length===0&&window.removeEventListener("beforeunload",jS),s.remove(),c$(yl.length>0),s)},execCommand(e,n,s){var a;const f=this,g=ce(s)?(a=s.id)!==null&&a!==void 0?a:s.index:s;switch(e){case"mceAddEditor":{if(!f.get(g)){const y=s.options;new US(g,y,f).render()}return!0}case"mceRemoveEditor":{const y=f.get(g);return y&&y.remove(),!0}case"mceToggleEditor":{const y=f.get(g);return y?(y.isHidden()?y.show():y.hide(),!0):(f.execCommand("mceAddEditor",!1,s),!0)}}return f.activeEditor?f.activeEditor.execCommand(e,n,s):!1},triggerSave:()=>{WS(yl,e=>{e.save()})},addI18n:(e,n)=>{lu.add(e,n)},translate:e=>lu.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Fc(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Fc(this.baseURL)}});am.setup();const hX=(()=>{const e=Th(),n=g=>({items:g,types:Bo(g),getType:y=>us(g,y).getOrUndefined()}),s=g=>{e.set(g)},a=()=>e.get().getOrUndefined(),f=e.clear;return{FakeClipboardItem:n,write:s,read:a,clear:f}})(),SD=Math.min,V1=Math.max,qS=Math.round,d$=(e,n,s)=>{let a=n.x,f=n.y;const g=e.w,y=e.h,S=n.w,E=n.h,P=(s||"").split("");return P[0]==="b"&&(f+=E),P[1]==="r"&&(a+=S),P[0]==="c"&&(f+=qS(E/2)),P[1]==="c"&&(a+=qS(S/2)),P[3]==="b"&&(f-=y),P[4]==="r"&&(a-=g),P[3]==="c"&&(f-=qS(y/2)),P[4]==="c"&&(a-=qS(g/2)),z1(a,f,g,y)},mX=(e,n,s,a)=>{for(let f=0;f<a.length;f++){const g=d$(e,n,a[f]);if(g.x>=s.x&&g.x+g.w<=s.w+s.x&&g.y>=s.y&&g.y+g.h<=s.h+s.y)return a[f]}return null},gX=(e,n,s)=>z1(e.x-n,e.y-s,e.w+n*2,e.h+s*2),pX=(e,n)=>{const s=V1(e.x,n.x),a=V1(e.y,n.y),f=SD(e.x+e.w,n.x+n.w),g=SD(e.y+e.h,n.y+n.h);return f-s<0||g-a<0?null:z1(s,a,f-s,g-a)},bX=(e,n,s)=>{let a=e.x,f=e.y,g=e.x+e.w,y=e.y+e.h;const S=n.x+n.w,E=n.y+n.h,P=V1(0,n.x-a),L=V1(0,n.y-f),$=V1(0,g-S),W=V1(0,y-E);return a+=P,f+=L,s&&(g+=P,y+=L,a-=$,f-=W),g-=$,y-=W,z1(a,f,g-a,y-f)},z1=(e,n,s,a)=>({x:e,y:n,w:s,h:a}),yX={inflate:gX,relativePosition:d$,findBestRelativePosition:mX,intersect:pX,clamp:bX,create:z1,fromClientRect:e=>z1(e.left,e.top,e.width,e.height)},wX=(e,n,s=1e3)=>{let a=!1,f=null;const g=P=>(...L)=>{a||(a=!0,f!==null&&(clearTimeout(f),f=null),P.apply(null,L))},y=g(e),S=g(n);return{start:(...P)=>{!a&&f===null&&(f=setTimeout(()=>S.apply(null,P),s))},resolve:y,reject:S}},xX=(()=>{const e={},n={},s={};return{load:(E,P)=>{const L=`Script at URL "${P}" failed to load`,$=`Script at URL "${P}" did not call \`tinymce.Resource.add('${E}', data)\` within 1 second`;if(e[E]!==void 0)return e[E];{const W=new Promise((re,fe)=>{const te=wX(re,fe);n[E]=te.resolve,vi.ScriptLoader.loadScript(P).then(()=>te.start($),()=>te.reject(L))});return e[E]=W,W}},add:(E,P)=>{n[E]!==void 0&&(n[E](P),delete n[E]),e[E]=Promise.resolve(P),s[E]=P},has:E=>E in s,get:E=>s[E],unload:E=>{delete e[E]}}})(),CX=()=>(()=>{let e={},n=[];const s={getItem:a=>{const f=e[a];return f||null},setItem:(a,f)=>{n.push(a),e[a]=String(f)},key:a=>n[a],removeItem:a=>{n=n.filter(f=>f===a),delete e[a]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(s,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),s})();let Gv;try{const e="__storage_test__";Gv=window.localStorage,Gv.setItem(e,e),Gv.removeItem(e)}catch(e){Gv=CX()}var SX=Gv;const kX={geom:{Rect:yX},util:{Delay:hc,Tools:Lt,VK:mn,URI:Fc,EventDispatcher:ti,Observable:wD,I18n:lu,LocalStorage:SX,ImageUploader:dW},dom:{EventUtils:Mc,TreeWalker:er,TextSeeker:Zm,DOMUtils:nr,ScriptLoader:vi,RangeUtils:sg,Serializer:eB,StyleSheetLoader:sk,ControlSelection:FH,BookmarkManager:eg,Selection:Wh,Event:Mc.Event},html:{Styles:dk,Entities:Wm,Node:$a,Schema:If,DomParser:yu,Writer:pP,Serializer:Ih},Env:on,AddOnManager:Xa,Annotator:_E,Formatter:tO,UndoManager:nO,EditorCommands:bD,WindowManager:uB,NotificationManager:YT,EditorObservable:o$,Shortcuts:i$,Editor:US,FocusManager:Y4,EditorManager:am,DOM:nr.DOM,ScriptLoader:vi.ScriptLoader,PluginManager:bg,ThemeManager:rh,ModelManager:Lc,IconManager:iv,Resource:xX,FakeClipboard:hX,trim:Lt.trim,isArray:Lt.isArray,is:Lt.is,toArray:Lt.toArray,makeMap:Lt.makeMap,each:Lt.each,map:Lt.map,grep:Lt.grep,inArray:Lt.inArray,extend:Lt.extend,walk:Lt.walk,resolve:Lt.resolve,explode:Lt.explode,_addCacheSuffix:Lt._addCacheSuffix},kD=Lt.extend(am,kX),fte=e=>{try{u.exports=e}catch(n){}};(e=>{window.tinymce=e,window.tinyMCE=e})(kD),fte(kD)})()})(bae);var L1e=bae.exports;const iy=Goe(L1e);(function(){const u=Object.getPrototypeOf,o=(t,r,c)=>{var h;return c(t,r.prototype)?!0:((h=t.constructor)===null||h===void 0?void 0:h.name)===r.name},i=t=>{const r=typeof t;return t===null?"null":r==="object"&&Array.isArray(t)?"array":r==="object"&&o(t,String,(c,h)=>h.isPrototypeOf(c))?"string":r},l=t=>r=>i(r)===t,d=t=>r=>typeof r===t,m=t=>r=>t===r,p=(t,r)=>x(t)&&o(t,r,(c,h)=>u(c)===h),v=l("string"),x=l("object"),k=t=>p(t,Object),T=l("array"),M=m(null),N=d("boolean"),I=m(void 0),z=t=>t==null,Y=t=>!z(t),J=d("function"),q=d("number"),ae=(t,r)=>{if(T(t)){for(let c=0,h=t.length;c<h;++c)if(!r(t[c]))return!1;return!0}return!1},Z=()=>{},ce=t=>()=>t(),_e=(t,r)=>(...c)=>t(r.apply(null,c)),De=(t,r)=>c=>t(r(c)),G=t=>()=>t,qe=t=>t,Re=(t,r)=>t===r;function $e(t,...r){return(...c)=>{const h=r.concat(c);return t.apply(null,h)}}const le=t=>r=>!t(r),Ee=t=>()=>{throw new Error(t)},ft=t=>t(),ne=G(!1),ge=G(!0);class O{constructor(r,c){this.tag=r,this.value=c}static some(r){return new O(!0,r)}static none(){return O.singletonNone}fold(r,c){return this.tag?c(this.value):r()}isSome(){return this.tag}isNone(){return!this.tag}map(r){return this.tag?O.some(r(this.value)):O.none()}bind(r){return this.tag?r(this.value):O.none()}exists(r){return this.tag&&r(this.value)}forall(r){return!this.tag||r(this.value)}filter(r){return!this.tag||r(this.value)?this:O.none()}getOr(r){return this.tag?this.value:r}or(r){return this.tag?this:r}getOrThunk(r){return this.tag?this.value:r()}orThunk(r){return this.tag?this:r()}getOrDie(r){if(this.tag)return this.value;throw new Error(r!=null?r:"Called getOrDie on None")}static from(r){return Y(r)?O.some(r):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(r){this.tag&&r(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Ye=Array.prototype.slice,me=Array.prototype.indexOf,lt=Array.prototype.push,qt=(t,r)=>me.call(t,r),Be=(t,r)=>{const c=qt(t,r);return c===-1?O.none():O.some(c)},Ue=(t,r)=>qt(t,r)>-1,yt=(t,r)=>{for(let c=0,h=t.length;c<h;c++){const b=t[c];if(r(b,c))return!0}return!1},Ie=(t,r)=>{const c=[];for(let h=0;h<t;h++)c.push(r(h));return c},wt=(t,r)=>{const c=[];for(let h=0;h<t.length;h+=r){const b=Ye.call(t,h,h+r);c.push(b)}return c},ue=(t,r)=>{const c=t.length,h=new Array(c);for(let b=0;b<c;b++){const w=t[b];h[b]=r(w,b)}return h},je=(t,r)=>{for(let c=0,h=t.length;c<h;c++){const b=t[c];r(b,c)}},V=(t,r)=>{for(let c=t.length-1;c>=0;c--){const h=t[c];r(h,c)}},kn=(t,r)=>{const c=[],h=[];for(let b=0,w=t.length;b<w;b++){const C=t[b];(r(C,b)?c:h).push(C)}return{pass:c,fail:h}},un=(t,r)=>{const c=[];for(let h=0,b=t.length;h<b;h++){const w=t[h];r(w,h)&&c.push(w)}return c},oo=(t,r,c)=>(V(t,(h,b)=>{c=r(c,h,b)}),c),Do=(t,r,c)=>(je(t,(h,b)=>{c=r(c,h,b)}),c),Ss=(t,r,c)=>{for(let h=0,b=t.length;h<b;h++){const w=t[h];if(r(w,h))return O.some(w);if(c(w,h))break}return O.none()},Qe=(t,r)=>Ss(t,r,ne),Bt=(t,r)=>{for(let c=0,h=t.length;c<h;c++){const b=t[c];if(r(b,c))return O.some(c)}return O.none()},nt=t=>{const r=[];for(let c=0,h=t.length;c<h;++c){if(!T(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);lt.apply(r,t[c])}return r},de=(t,r)=>nt(ue(t,r)),xe=(t,r)=>{for(let c=0,h=t.length;c<h;++c){const b=t[c];if(r(b,c)!==!0)return!1}return!0},Fe=t=>{const r=Ye.call(t,0);return r.reverse(),r},Ne=(t,r)=>un(t,c=>!Ue(r,c)),kt=(t,r)=>{const c={};for(let h=0,b=t.length;h<b;h++){const w=t[h];c[String(w)]=r(w,h)}return c},ve=t=>[t],We=(t,r)=>{const c=Ye.call(t,0);return c.sort(r),c},st=(t,r)=>r>=0&&r<t.length?O.some(t[r]):O.none(),en=t=>st(t,0),jn=t=>st(t,t.length-1),On=J(Array.from)?Array.from:t=>Ye.call(t),ao=(t,r)=>{for(let c=0;c<t.length;c++){const h=r(t[c],c);if(h.isSome())return h}return O.none()},Yn=Object.keys,ls=Object.hasOwnProperty,Xe=(t,r)=>{const c=Yn(t);for(let h=0,b=c.length;h<b;h++){const w=c[h],C=t[w];r(C,w)}},pt=(t,r)=>Pt(t,(c,h)=>({k:h,v:r(c,h)})),Pt=(t,r)=>{const c={};return Xe(t,(h,b)=>{const w=r(h,b);c[w.k]=w.v}),c},jt=t=>(r,c)=>{t[c]=r},vn=(t,r,c,h)=>{Xe(t,(b,w)=>{(r(b,w)?c:h)(b,w)})},so=(t,r)=>{const c={},h={};return vn(t,r,jt(c),jt(h)),{t:c,f:h}},lo=(t,r)=>{const c={};return vn(t,r,jt(c),Z),c},Qo=(t,r)=>{const c=[];return Xe(t,(h,b)=>{c.push(r(h,b))}),c},Bo=(t,r)=>{const c=Yn(t);for(let h=0,b=c.length;h<b;h++){const w=c[h],C=t[w];if(r(C,w,t))return O.some(C)}return O.none()},cs=t=>Qo(t,qe),$t=(t,r)=>So(t,r)?O.from(t[r]):O.none(),So=(t,r)=>ls.call(t,r),Js=(t,r)=>So(t,r)&&t[r]!==void 0&&t[r]!==null,wr=(t,r,c=Re)=>t.exists(h=>c(h,r)),Zr=(t,r,c=Re)=>xr(t,r,c).getOr(t.isNone()&&r.isNone()),hr=t=>{const r=[],c=h=>{r.push(h)};for(let h=0;h<t.length;h++)t[h].each(c);return r},di=t=>{const r=[];for(let c=0;c<t.length;c++){const h=t[c];if(h.isSome())r.push(h.getOrDie());else return O.none()}return O.some(r)},xr=(t,r,c)=>t.isSome()&&r.isSome()?O.some(c(t.getOrDie(),r.getOrDie())):O.none(),fi=(t,r,c,h)=>t.isSome()&&r.isSome()&&c.isSome()?O.some(h(t.getOrDie(),r.getOrDie(),c.getOrDie())):O.none(),us=(t,r)=>t!=null?O.some(r(t)):O.none(),Bn=(t,r)=>t?O.some(r):O.none(),hi=(t,r)=>t+r,Ke=(t,r)=>t.substring(r),ht=(t,r,c)=>r===""||t.length>=r.length&&t.substr(c,c+r.length)===r,tn=(t,r)=>Ks(t,r)?Ke(t,r.length):t,In=(t,r)=>Lr(t,r)?t:hi(t,r),bo=(t,r,c=0,h)=>{const b=t.indexOf(r,c);return b!==-1?I(h)?!0:b+r.length<=h:!1},Ks=(t,r)=>ht(t,r,0),Lr=(t,r)=>ht(t,r,t.length-r.length),_r=(t=>r=>r.replace(t,""))(/^\s+|\s+$/g),ke=t=>t.length>0,Ae=t=>!ke(t),ut=t=>t.style!==void 0&&J(t.style.getPropertyValue),xt=(t,r)=>{const h=(r||document).createElement("div");if(h.innerHTML=t,!h.hasChildNodes()||h.childNodes.length>1){const b="HTML does not have a single root node";throw new Error(b)}return Mo(h.childNodes[0])},En=(t,r)=>{const h=(r||document).createElement(t);return Mo(h)},Rn=(t,r)=>{const h=(r||document).createTextNode(t);return Mo(h)},Mo=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Tt={fromHtml:xt,fromTag:En,fromText:Rn,fromDom:Mo,fromPoint:(t,r,c)=>O.from(t.dom.elementFromPoint(r,c)).map(Mo)},Fo=typeof window!="undefined"?window:Function("return this;")(),Ce=(t,r)=>{let c=r!=null?r:Fo;for(let h=0;h<t.length&&c!==void 0&&c!==null;++h)c=c[t[h]];return c},Te=(t,r)=>{const c=t.split(".");return Ce(c,r)},_t=(t,r)=>Te(t,r),nn=(t,r)=>{const c=_t(t,r);if(c==null)throw new Error(t+" not available on this browser");return c},an=Object.getPrototypeOf,_n=t=>nn("HTMLElement",t),Pn=t=>{const r=Te("ownerDocument.defaultView",t);return x(t)&&(_n(r).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(an(t).constructor.name))},An=9,$n=11,Vn=1,Xo=3,Os=t=>t.dom.nodeName.toLowerCase(),Bi=t=>t.dom.nodeType,Oa=t=>r=>Bi(r)===t,ql=t=>Po(t)&&Pn(t.dom),Po=Oa(Vn),Io=Oa(Xo),ds=Oa(An),Wi=Oa($n),Fi=t=>r=>Po(r)&&Os(r)===t,Dr=(t,r)=>{const c=t.dom;if(c.nodeType!==Vn)return!1;{const h=c;if(h.matches!==void 0)return h.matches(r);if(h.msMatchesSelector!==void 0)return h.msMatchesSelector(r);if(h.webkitMatchesSelector!==void 0)return h.webkitMatchesSelector(r);if(h.mozMatchesSelector!==void 0)return h.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}},il=t=>t.nodeType!==Vn&&t.nodeType!==An&&t.nodeType!==$n||t.childElementCount===0,ki=(t,r)=>{const c=r===void 0?document:r.dom;return il(c)?[]:ue(c.querySelectorAll(t),Tt.fromDom)},Ac=(t,r)=>{const c=r===void 0?document:r.dom;return il(c)?O.none():O.from(c.querySelector(t)).map(Tt.fromDom)},vs=(t,r)=>t.dom===r.dom,ha=(t,r)=>{const c=t.dom,h=r.dom;return c===h?!1:c.contains(h)},ji=t=>Tt.fromDom(t.dom.ownerDocument),qa=t=>ds(t)?t:ji(t),na=t=>Tt.fromDom(qa(t).dom.documentElement),_a=t=>Tt.fromDom(qa(t).dom.defaultView),mi=t=>O.from(t.dom.parentNode).map(Tt.fromDom),Tc=t=>mi(t),ma=t=>O.from(t.dom.parentElement).map(Tt.fromDom),eu=(t,r)=>{const c=J(r)?r:ne;let h=t.dom;const b=[];for(;h.parentNode!==null&&h.parentNode!==void 0;){const w=h.parentNode,C=Tt.fromDom(w);if(b.push(C),c(C)===!0)break;h=w}return b},ga=t=>O.from(t.dom.offsetParent).map(Tt.fromDom),Gl=t=>O.from(t.dom.nextSibling).map(Tt.fromDom),Ii=t=>ue(t.dom.childNodes,Tt.fromDom),al=(t,r)=>{const c=t.dom.childNodes;return O.from(c[r]).map(Tt.fromDom)},Oc=t=>al(t,0),tu=(t,r)=>({element:t,offset:r}),Cd=(t,r)=>{const c=Ii(t);return c.length>0&&r<c.length?tu(c[r],0):tu(t,r)},Q=t=>Wi(t)&&Y(t.dom.host),Oe=J(Element.prototype.attachShadow)&&J(Node.prototype.getRootNode),Ze=G(Oe),St=Oe?t=>Tt.fromDom(t.dom.getRootNode()):qa,Ut=t=>Q(t)?t:Tt.fromDom(qa(t).dom.body),Zn=t=>_s(t).isSome(),_s=t=>{const r=St(t);return Q(r)?O.some(r):O.none()},Rs=t=>Tt.fromDom(t.dom.host),ys=t=>{if(Ze()&&Y(t.target)){const r=Tt.fromDom(t.target);if(Po(r)&&Ys(r)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return en(c)}}return O.from(t.target)},Ys=t=>Y(t.dom.shadowRoot),Wo=t=>{const r=Io(t)?t.dom.parentNode:t.dom;if(r==null||r.ownerDocument===null)return!1;const c=r.ownerDocument;return _s(Tt.fromDom(r)).fold(()=>c.body.contains(r),De(Wo,Rs))},ur=()=>Ei(Tt.fromDom(document)),Ei=t=>{const r=t.dom.body;if(r==null)throw new Error("Body is not available yet");return Tt.fromDom(r)},Mu=(t,r,c)=>{if(v(c)||N(c)||q(c))t.setAttribute(r,c+"");else throw new Error("Attribute value was not simple")},on=(t,r,c)=>{Mu(t.dom,r,c)},Pu=(t,r)=>{const c=t.dom;Xe(r,(h,b)=>{Mu(c,b,h)})},$r=(t,r)=>{const c=t.dom.getAttribute(r);return c===null?void 0:c},U=(t,r)=>O.from($r(t,r)),se=(t,r)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(r):!1},be=(t,r)=>{t.dom.removeAttribute(r)},ct=t=>Do(t.dom.attributes,(r,c)=>(r[c.name]=c.value,r),{}),dn=(t,r,c)=>{if(!v(c))throw new Error("CSS value must be a string: "+c);ut(t)&&t.style.setProperty(r,c)},Vo=(t,r)=>{ut(t)&&t.style.removeProperty(r)},Cn=(t,r,c)=>{const h=t.dom;dn(h,r,c)},oi=(t,r)=>{const c=t.dom;Xe(r,(h,b)=>{dn(c,b,h)})},Lt=(t,r)=>{const c=t.dom;Xe(r,(h,b)=>{h.fold(()=>{Vo(c,b)},w=>{dn(c,b,w)})})},Qs=(t,r)=>{const c=t.dom,b=window.getComputedStyle(c).getPropertyValue(r);return b===""&&!Wo(t)?pa(c,r):b},pa=(t,r)=>ut(t)?t.style.getPropertyValue(r):"",zs=(t,r)=>{const c=t.dom,h=pa(c,r);return O.from(h).filter(b=>b.length>0)},qr=t=>{const r={},c=t.dom;if(ut(c))for(let h=0;h<c.style.length;h++){const b=c.style.item(h);r[b]=c.style[b]}return r},Sd=(t,r,c)=>{const h=Tt.fromTag(t);return Cn(h,r,c),zs(h,r).isSome()},es=(t,r)=>{const c=t.dom;Vo(c,r),wr(U(t,"style").map(_r),"")&&be(t,"style")},ll=t=>t.dom.offsetWidth,Ga=(t,r)=>{const c=(A,_)=>{if(!q(_)&&!_.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+_);const R=A.dom;ut(R)&&(R.style[t]=_+"px")},h=A=>{const _=r(A);if(_<=0||_===null){const R=Qs(A,t);return parseFloat(R)||0}return _},b=h,w=(A,_)=>Do(_,(R,B)=>{const H=Qs(A,B),j=H===void 0?0:parseInt(H,10);return isNaN(j)?R:R+j},0);return{set:c,get:h,getOuter:b,aggregate:w,max:(A,_,R)=>{const B=w(A,R);return _>B?_-B:0}}},Ru=Ga("height",t=>{const r=t.dom;return Wo(t)?r.getBoundingClientRect().height:r.offsetHeight}),rr=t=>Ru.get(t),Nu=t=>Ru.getOuter(t),Gg=(t,r)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],h=Ru.max(t,r,c);Cn(t,"max-height",h+"px")},Kg=(t,r)=>({left:t,top:r,translate:(h,b)=>Kg(t+h,r+b)}),dr=Kg,Sm=t=>{const r=t.getBoundingClientRect();return dr(r.left,r.top)},kd=(t,r)=>t!==void 0?t:r!==void 0?r:0,Ka=t=>{const r=t.dom.ownerDocument,c=r.body,h=r.defaultView,b=r.documentElement;if(c===t.dom)return dr(c.offsetLeft,c.offsetTop);const w=kd(h==null?void 0:h.pageYOffset,b.scrollTop),C=kd(h==null?void 0:h.pageXOffset,b.scrollLeft),A=kd(b.clientTop,c.clientTop),_=kd(b.clientLeft,c.clientLeft);return cl(t).translate(C-_,w-A)},cl=t=>{const r=t.dom,h=r.ownerDocument.body;return h===r?dr(h.offsetLeft,h.offsetTop):Wo(t)?Sm(r):dr(0,0)},xf=Ga("width",t=>t.dom.offsetWidth),ts=(t,r)=>xf.set(t,r),ee=t=>xf.get(t),pe=t=>xf.getOuter(t),rt=(t,r)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],h=xf.max(t,r,c);Cn(t,"max-width",h+"px")},Et=t=>{let r=!1,c;return(...h)=>(r||(r=!0,c=t.apply(null,h)),c)},pn=(t,r,c,h)=>{const b=t.isiOS()&&/ipad/i.test(c)===!0,w=t.isiOS()&&!b,C=t.isiOS()||t.isAndroid(),A=C||h("(pointer:coarse)"),_=b||!w&&C&&h("(min-device-width:768px)"),R=w||C&&!_,B=r.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,H=!R&&!_&&!B;return{isiPad:G(b),isiPhone:G(w),isTablet:G(_),isPhone:G(R),isTouch:G(A),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:G(B),isDesktop:G(H)}},Oo=(t,r)=>{for(let c=0;c<t.length;c++){const h=t[c];if(h.test(r))return h}},Cr=(t,r)=>{const c=Oo(t,r);if(!c)return{major:0,minor:0};const h=b=>Number(r.replace(c,"$"+b));return oa(h(1),h(2))},ba=(t,r)=>{const c=String(r).toLowerCase();return t.length===0?Hr():Cr(t,c)},Hr=()=>oa(0,0),oa=(t,r)=>({major:t,minor:r}),Xs={nu:oa,detect:ba,unknown:Hr},Vr=(t,r)=>ao(r.brands,c=>{const h=c.brand.toLowerCase();return Qe(t,b=>{var w;return h===((w=b.brand)===null||w===void 0?void 0:w.toLowerCase())}).map(b=>({current:b.name,version:Xs.nu(parseInt(c.version,10),0)}))}),gi=(t,r)=>{const c=String(r).toLowerCase();return Qe(t,h=>h.search(c))},Da=(t,r)=>gi(t,r).map(c=>{const h=Xs.detect(c.versionRegexes,r);return{current:c.name,version:h}}),Ed=(t,r)=>gi(t,r).map(c=>{const h=Xs.detect(c.versionRegexes,r);return{current:c.name,version:h}}),Nr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gr=t=>r=>bo(r,t),Kl=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>bo(t,"edge/")&&bo(t,"chrome")&&bo(t,"safari")&&bo(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Nr],search:t=>bo(t,"chrome")&&!bo(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>bo(t,"msie")||bo(t,"trident")},{name:"Opera",versionRegexes:[Nr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gr("firefox")},{name:"Safari",versionRegexes:[Nr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(bo(t,"safari")||bo(t,"mobile/"))&&bo(t,"applewebkit")}],Ad=[{name:"Windows",search:Gr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>bo(t,"iphone")||bo(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gr("linux"),versionRegexes:[]},{name:"Solaris",search:Gr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],_y={browsers:G(Kl),oses:G(Ad)},Dy="Edge",ph="Chromium",p0="IE",b0="Opera",Yg="Firefox",My="Safari",Cf=()=>v0({current:void 0,version:Xs.unknown()}),v0=t=>{const r=t.current,c=t.version,h=b=>()=>r===b;return{current:r,version:c,isEdge:h(Dy),isChromium:h(ph),isIE:h(p0),isOpera:h(b0),isFirefox:h(Yg),isSafari:h(My)}},Bu={unknown:Cf,nu:v0,edge:G(Dy),chromium:G(ph),ie:G(p0),opera:G(b0),firefox:G(Yg),safari:G(My)},Py="Windows",Xg="iOS",Ry="Android",Ny="Linux",By="macOS",bh="Solaris",B2="FreeBSD",ye="ChromeOS",Jg=()=>El({current:void 0,version:Xs.unknown()}),El=t=>{const r=t.current,c=t.version,h=b=>()=>r===b;return{current:r,version:c,isWindows:h(Py),isiOS:h(Xg),isAndroid:h(Ry),isMacOS:h(By),isLinux:h(Ny),isSolaris:h(bh),isFreeBSD:h(B2),isChromeOS:h(ye)}},km={unknown:Jg,nu:El,windows:G(Py),ios:G(Xg),android:G(Ry),linux:G(Ny),macos:G(By),solaris:G(bh),freebsd:G(B2),chromeos:G(ye)},F2={detect:(t,r,c)=>{const h=_y.browsers(),b=_y.oses(),w=r.bind(_=>Vr(h,_)).orThunk(()=>Da(h,t)).fold(Bu.unknown,Bu.nu),C=Ed(b,t).fold(km.unknown,km.nu),A=pn(C,w,t,c);return{browser:w,os:C,deviceType:A}}},ws=t=>window.matchMedia(t).matches;let Fu=Et(()=>F2.detect(navigator.userAgent,O.from(navigator.userAgentData),ws));const nu=()=>Fu(),Iu=(t,r,c,h,b,w,C)=>({target:t,x:r,y:c,stop:h,prevent:b,kill:w,raw:C}),Sf=t=>{const r=Tt.fromDom(ys(t).getOr(t.target)),c=()=>t.stopPropagation(),h=()=>t.preventDefault(),b=_e(h,c);return Iu(r,t.clientX,t.clientY,c,h,b,t)},ou=(t,r)=>c=>{t(c)&&r(Sf(c))},sa=(t,r,c,h,b)=>{const w=ou(c,h);return t.dom.addEventListener(r,w,b),{unbind:$e(Iy,t,r,w,b)}},Lu=(t,r,c,h)=>sa(t,r,c,h,!1),Fy=(t,r,c,h)=>sa(t,r,c,h,!0),Iy=(t,r,c,h)=>{t.dom.removeEventListener(r,c,h)},_c=(t,r)=>{mi(t).each(h=>{h.dom.insertBefore(r.dom,t.dom)})},su=(t,r)=>{Gl(t).fold(()=>{mi(t).each(b=>{Ma(b,r)})},h=>{_c(h,r)})},Ly=(t,r)=>{Oc(t).fold(()=>{Ma(t,r)},h=>{t.dom.insertBefore(r.dom,h.dom)})},Ma=(t,r)=>{t.dom.appendChild(r.dom)},pi=(t,r,c)=>{al(t,c).fold(()=>{Ma(t,r)},h=>{_c(h,r)})},kf=(t,r)=>{je(r,c=>{Ma(t,c)})},Em=t=>{t.dom.textContent="",je(Ii(t),r=>{Dc(r)})},Dc=t=>{const r=t.dom;r.parentNode!==null&&r.parentNode.removeChild(r)},Pa=t=>{const r=t!==void 0?t.dom:document,c=r.body.scrollLeft||r.documentElement.scrollLeft,h=r.body.scrollTop||r.documentElement.scrollTop;return dr(c,h)},$y=(t,r,c)=>{const b=(c!==void 0?c.dom:document).defaultView;b&&b.scrollTo(t,r)},I2=t=>{const r=t===void 0?window:t;return nu().browser.isFirefox()?O.none():O.from(r.visualViewport)},Qg=(t,r,c,h)=>({x:t,y:r,width:c,height:h,right:t+c,bottom:r+h}),ep=t=>{const r=t===void 0?window:t,c=r.document,h=Pa(Tt.fromDom(c));return I2(r).fold(()=>{const b=r.document.documentElement,w=b.clientWidth,C=b.clientHeight;return Qg(h.left,h.top,w,C)},b=>Qg(Math.max(b.pageLeft,h.left),Math.max(b.pageTop,h.top),b.width,b.height))},Am=()=>Tt.fromDom(document),$u=(t,r)=>t.view(r).fold(G([]),h=>{const b=t.owner(h),w=$u(t,b);return[h].concat(w)}),w0=(t,r)=>{const c=r.owner(t),h=$u(r,c);return O.some(h)};var $2=Object.freeze({__proto__:null,view:t=>{var r;return(t.dom===document?O.none():O.from((r=t.dom.defaultView)===null||r===void 0?void 0:r.frameElement)).map(Tt.fromDom)},owner:t=>ji(t)});const vh=t=>{const r=Am(),c=Pa(r);return w0(t,$2).fold($e(Ka,t),b=>{const w=cl(t),C=oo(b,(A,_)=>{const R=cl(_);return{left:A.left+R.left,top:A.top+R.top}},{left:0,top:0});return dr(C.left+w.left+c.left,C.top+w.top+c.top)})},Hy=(t,r,c)=>({point:t,width:r,height:c}),yh=(t,r,c,h)=>({x:t,y:r,width:c,height:h}),Kr=(t,r,c,h)=>({x:t,y:r,width:c,height:h,right:t+c,bottom:r+h}),Sr=t=>{const r=Ka(t),c=pe(t),h=Nu(t);return Kr(r.left,r.top,c,h)},ul=t=>{const r=vh(t),c=pe(t),h=Nu(t);return Kr(r.left,r.top,c,h)},x0=(t,r)=>{const c=Math.max(t.x,r.x),h=Math.max(t.y,r.y),b=Math.min(t.right,r.right),w=Math.min(t.bottom,r.bottom),C=b-c,A=w-h;return Kr(c,h,C,A)},H2=(t,r)=>Do(r,(c,h)=>x0(c,h),t),Zi=()=>ep(window);var Ef=tinymce.util.Tools.resolve("tinymce.ThemeManager");const wh=t=>{const r=w=>w(t),c=G(t),h=()=>b,b={tag:!0,inner:t,fold:(w,C)=>C(t),isValue:ge,isError:ne,map:w=>_o.value(w(t)),mapError:h,bind:r,exists:r,forall:r,getOr:c,or:h,getOrThunk:c,orThunk:h,getOrDie:c,each:w=>{w(t)},toOptional:()=>O.some(t)};return b},Td=t=>{const r=()=>c,c={tag:!1,inner:t,fold:(h,b)=>h(t),isValue:ne,isError:ge,map:r,mapError:h=>_o.error(h(t)),bind:r,exists:ne,forall:ge,getOr:qe,or:qe,getOrThunk:ft,orThunk:ft,getOrDie:Ee(String(t)),each:Z,toOptional:O.none};return c},_o={value:wh,error:Td,fromOption:(t,r)=>t.fold(()=>Td(r),wh)};var Al;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Al||(Al={}));const Af=(t,r,c)=>t.stype===Al.Error?r(t.serror):c(t.svalue),Vy=t=>{const r=[],c=[];return je(t,h=>{Af(h,b=>c.push(b),b=>r.push(b))}),{values:r,errors:c}},zy=(t,r)=>t.stype===Al.Error?{stype:Al.Error,serror:r(t.serror)}:t,Uy=(t,r)=>t.stype===Al.Value?{stype:Al.Value,svalue:r(t.svalue)}:t,xh=(t,r)=>t.stype===Al.Value?r(t.svalue):t,ru=(t,r)=>t.stype===Al.Error?r(t.serror):t,C0=t=>({stype:Al.Value,svalue:t}),Tm=t=>({stype:Al.Error,serror:t}),zr={fromResult:t=>t.fold(Tm,C0),toResult:t=>Af(t,_o.error,_o.value),svalue:C0,partition:Vy,serror:Tm,bind:xh,bindError:ru,map:Uy,mapError:zy,fold:Af},Ra=(t,r,c,h)=>({tag:"field",key:t,newKey:r,presence:c,prop:h}),Hu=(t,r)=>({tag:"custom",newKey:t,instantiator:r}),Om=(t,r,c)=>{switch(t.tag){case"field":return r(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Yr=(t,r)=>r,Wy=(t,r)=>k(t)&&k(r)?$s(t,r):r,jy=t=>(...r)=>{if(r.length===0)throw new Error("Can't merge zero objects");const c={};for(let h=0;h<r.length;h++){const b=r[h];for(const w in b)So(b,w)&&(c[w]=t(c[w],b[w]))}return c},$s=jy(Wy),Od=jy(Yr),ks=()=>({tag:"required",process:{}}),Yl=t=>({tag:"defaultedThunk",process:t}),_m=t=>Yl(G(t)),Ch=()=>({tag:"option",process:{}}),tp=t=>({tag:"mergeWithThunk",process:t}),np=t=>tp(G(t)),V2=(t,r)=>t.length>0?zr.svalue($s(r,Od.apply(void 0,t))):zr.svalue(r),Zy=t=>_e(zr.serror,nt)(t),qy={consolidateObj:(t,r)=>{const c=zr.partition(t);return c.errors.length>0?Zy(c.errors):V2(c.values,r)},consolidateArr:t=>{const r=zr.partition(t);return r.errors.length>0?Zy(r.errors):zr.svalue(r.values)}},E0=t=>x(t)&&Yn(t).length>100?" removed due to size":JSON.stringify(t,null,2),U2=t=>{const r=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):t;return ue(r,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},D=(t,r)=>zr.serror([{path:t,getErrorInfo:r}]),F=(t,r,c)=>D(t,()=>'Could not find valid *required* value for "'+r+'" in '+E0(c)),K=(t,r)=>D(t,()=>'Choice schema did not contain choice key: "'+r+'"'),we=(t,r,c)=>D(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+E0(r)),Me=(t,r)=>D(t,()=>"There are unsupported fields: ["+r.join(", ")+"] specified"),Ht=(t,r)=>D(t,G(r)),Nn=t=>{const r=(h,b)=>zr.bindError(t(b),w=>Ht(h,w)),c=G("val");return{extract:r,toString:c}},wo=Nn(zr.svalue),xo=(t,r,c,h)=>$t(r,c).fold(()=>F(t,c,r),h),to=(t,r,c,h)=>{const b=$t(t,r).getOrThunk(()=>c(t));return h(b)},kr=(t,r,c)=>c($t(t,r)),qi=(t,r,c,h)=>{const b=$t(t,r).map(w=>w===!0?c(t):w);return h(b)},Xl=(t,r,c,h,b)=>{const w=A=>b.extract(r.concat([h]),A),C=A=>A.fold(()=>zr.svalue(O.none()),_=>{const R=b.extract(r.concat([h]),_);return zr.map(R,O.some)});switch(t.tag){case"required":return xo(r,c,h,w);case"defaultedThunk":return to(c,h,t.process,w);case"option":return kr(c,h,C);case"defaultedOptionThunk":return qi(c,h,t.process,C);case"mergeWithThunk":return to(c,h,G({}),A=>{const _=$s(t.process(c),A);return w(_)})}},_d=(t,r,c)=>{const h={},b=[];for(const w of c)Om(w,(C,A,_,R)=>{const B=Xl(_,t,r,C,R);zr.fold(B,H=>{b.push(...H)},H=>{h[A]=H})},(C,A)=>{h[C]=A(r)});return b.length>0?zr.serror(b):zr.svalue(h)},va=t=>({extract:(h,b)=>t().extract(h,b),toString:()=>t().toString()}),TM=t=>Yn(lo(t,Y)),er=t=>{const r=Ln(t),c=oo(t,(b,w)=>Om(w,C=>$s(b,{[C]:!0}),G(b)),{});return{extract:(b,w)=>{const C=N(w)?[]:TM(w),A=un(C,_=>!Js(c,_));return A.length===0?r.extract(b,w):Me(b,A)},toString:r.toString}},Ln=t=>({extract:(h,b)=>_d(h,b,t),toString:()=>`obj{
`+ue(t,b=>Om(b,(w,C,A,_)=>w+" -> "+_.toString(),(w,C)=>"state("+w+")")).join(`
`)+"}"}),Vu=t=>({extract:(h,b)=>{const w=ue(b,(C,A)=>t.extract(h.concat(["["+A+"]"]),C));return qy.consolidateArr(w)},toString:()=>"array("+t.toString()+")"}),xn=(t,r)=>{const c=r!==void 0?r:qe;return{extract:(w,C)=>{const A=[];for(const _ of t){const R=_.extract(w,C);if(R.stype===Al.Value)return{stype:Al.Value,svalue:c(R.svalue)};A.push(R)}return qy.consolidateArr(A)},toString:()=>"oneOf("+ue(t,w=>w.toString()).join(", ")+")"}},Tf=(t,r)=>{const c=(w,C)=>Vu(Nn(t)).extract(w,C);return{extract:(w,C)=>{const A=Yn(C),_=c(w,A);return zr.bind(_,R=>{const B=ue(R,H=>Ra(H,H,ks(),r));return Ln(B).extract(w,C)})},toString:()=>"setOf("+r.toString()+")"}},J6=(t,r)=>{const c=Et(r);return{extract:(w,C)=>c().extract(w,C),toString:()=>c().toString()}},Dm=_e(Vu,Ln),Gi=G(wo),Mm=(t,r)=>Nn(c=>{const h=typeof c;return t(c)?zr.svalue(c):zr.serror(`Expected type: ${r} but got: ${h}`)}),A0=Mm(q,"number"),Ki=Mm(v,"string"),zu=Mm(N,"boolean"),W2=Mm(J,"function"),Dd=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(r=>Dd(t[r]));default:return!1}},OM=Nn(t=>Dd(t)?zr.svalue(t):zr.serror("Expected value to be acceptable for sending via postMessage")),j2=(t,r,c,h)=>$t(c,h).fold(()=>we(t,c,h),w=>w.extract(t.concat(["branch: "+h]),r)),Vt=(t,r)=>({extract:(b,w)=>$t(w,t).fold(()=>K(b,t),A=>j2(b,w,r,A)),toString:()=>"chooseOn("+t+"). Possible values: "+Yn(r)}),Q6=()=>Vu(wo),T0=t=>Nn(r=>t(r).fold(zr.serror,zr.svalue)),Of=(t,r)=>Tf(c=>zr.fromResult(t(c)),r),O0=(t,r,c)=>{const h=r.extract([t],c);return zr.mapError(h,b=>({input:c,errors:b}))},Er=(t,r,c)=>zr.toResult(O0(t,r,c)),Us=t=>t.fold(r=>{throw new Error(dl(r))},qe),Ya=(t,r,c)=>Us(Er(t,r,c)),dl=t=>`Errors: 
`+U2(t.errors).join(`
`)+`

Input object: `+E0(t.input),gs=(t,r)=>Vt(t,pt(r,Ln)),_0=(t,r)=>J6(t,r),ra=Ra,Xr=Hu,Z2=t=>T0(r=>Ue(t,r)?_o.value(r):_o.error(`Unsupported value: "${r}", choose one of "${t.join(", ")}".`)),Rt=t=>ra(t,t,ks(),Gi()),Jl=(t,r)=>ra(t,t,ks(),r),D0=t=>Jl(t,A0),xs=t=>Jl(t,Ki),Uu=(t,r)=>ra(t,t,ks(),Z2(r)),e8=t=>Jl(t,zu),Wu=t=>Jl(t,W2),q2=(t,r)=>ra(t,t,Ch(),Nn(c=>zr.serror("The field: "+t+" is forbidden. "+r))),ju=(t,r)=>ra(t,t,ks(),Ln(r)),G2=(t,r)=>ra(t,t,ks(),Dm(r)),Ql=(t,r)=>ra(t,t,ks(),Vu(r)),Ds=t=>ra(t,t,Ch(),Gi()),Md=(t,r)=>ra(t,t,Ch(),r),M0=t=>Md(t,A0),Na=t=>Md(t,Ki),_M=(t,r)=>Md(t,Z2(r)),Pm=t=>Md(t,W2),Rm=(t,r)=>Md(t,Vu(r)),ec=(t,r)=>Md(t,Ln(r)),Nm=(t,r)=>Md(t,er(r)),tt=(t,r)=>ra(t,t,_m(r),Gi()),Tl=(t,r,c)=>ra(t,t,_m(r),c),Bm=(t,r)=>Tl(t,r,A0),_f=(t,r)=>Tl(t,r,Ki),tc=(t,r,c)=>Tl(t,r,Z2(c)),Li=(t,r)=>Tl(t,r,zu),$i=(t,r)=>Tl(t,r,W2),t8=(t,r)=>Tl(t,r,OM),Zu=(t,r,c)=>Tl(t,r,Vu(c)),Pd=(t,r,c)=>Tl(t,r,Ln(c)),qn=t=>{let r=t;return{get:()=>r,set:b=>{r=b}}},Ol={generate:t=>{if(!T(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const r=[],c={};return je(t,(h,b)=>{const w=Yn(h);if(w.length!==1)throw new Error("one and only one name per case");const C=w[0],A=h[C];if(c[C]!==void 0)throw new Error("duplicate key detected:"+C);if(C==="cata")throw new Error("cannot have a case named cata (sorry)");if(!T(A))throw new Error("case arguments must be an array");r.push(C),c[C]=(..._)=>{const R=_.length;if(R!==A.length)throw new Error("Wrong number of arguments to case "+C+". Expected "+A.length+" ("+A+"), got "+R);return{fold:(...H)=>{if(H.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+H.length);return H[b].apply(null,_)},match:H=>{const j=Yn(H);if(r.length!==j.length)throw new Error("Wrong number of arguments to match. Expected: "+r.join(",")+`
Actual: `+j.join(","));if(!xe(r,oe=>Ue(j,oe)))throw new Error("Not all branches were specified when using match. Specified: "+j.join(", ")+`
Required: `+r.join(", "));return H[C].apply(null,_)},log:H=>{}}}}),c}};Ol.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const nc=t=>{const r=[],c=[];return je(t,h=>{h.fold(b=>{r.push(b)},b=>{c.push(b)})}),{errors:r,values:c}},n8=(t,r)=>{const c={};return Xe(t,(h,b)=>{Ue(r,b)||(c[b]=h)}),c},o8=(t,r)=>({[t]:r}),op=t=>{const r={};return je(t,c=>{r[c.key]=c.value}),r},sp=(t,r)=>n8(t,r),oc=(t,r)=>o8(t,r),Ba=t=>op(t),DM=(t,r)=>t.length===0?_o.value(r):_o.value($s(r,Od.apply(void 0,t))),s8=t=>_o.error(nt(t)),K2=(t,r)=>{const c=nc(t);return c.errors.length>0?s8(c.errors):DM(c.values,r)},Gy=t=>J(t)?t:ne,MM=(t,r,c)=>{let h=t.dom;const b=Gy(c);for(;h.parentNode;){h=h.parentNode;const w=Tt.fromDom(h),C=r(w);if(C.isSome())return C;if(b(w))break}return O.none()},Fm=(t,r,c)=>{const h=r(t),b=Gy(c);return h.orThunk(()=>b(t)?O.none():MM(t,r,b))},P0=(t,r)=>vs(t.element,r.event.target),r8={can:ge,abort:ne,run:Z},Sh=t=>{if(!Js(t,"can")&&!Js(t,"abort")&&!Js(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return ie(ie({},r8),t)},PM=(t,r)=>(...c)=>Do(t,(h,b)=>h&&r(b).apply(void 0,c),!0),RM=(t,r)=>(...c)=>Do(t,(h,b)=>h||r(b).apply(void 0,c),!1),i8=t=>J(t)?{can:ge,abort:ne,run:t}:t,a8=t=>{const r=PM(t,b=>b.can),c=RM(t,b=>b.abort);return{can:r,abort:c,run:(...b)=>{je(t,w=>{w.run.apply(void 0,b)})}}},ia=G,Df=ia("touchstart"),rp=ia("touchmove"),Im=ia("touchend"),NM=ia("touchcancel"),bi=ia("mousedown"),Ky=ia("mousemove"),R0=ia("mouseout"),Y2=ia("mouseup"),Mf=ia("mouseover"),Pf=ia("focusin"),X2=ia("focusout"),qu=ia("keydown"),kh=ia("keyup"),Lm=ia("input"),ip=ia("change"),Eh=ia("click"),l8=ia("transitioncancel"),ap=ia("transitionend"),c8=ia("transitionstart"),u8=ia("selectstart"),Jr=t=>G("alloy."+t),Yy={tap:Jr("tap")},lp=Jr("focus"),J2=Jr("blur.post"),Q2=Jr("paste.post"),$m=Jr("receive"),sc=Jr("execute"),Mr=Jr("focus.item"),Gu=Yy.tap,ek=Jr("longpress"),N0=Jr("sandbox.close"),tk=Jr("typeahead.cancel"),Xy=Jr("system.init"),Jy=Jr("system.touchmove"),d8=Jr("system.touchend"),B0=Jr("system.scroll"),F0=Jr("system.resize"),Ku=Jr("system.attached"),Hm=Jr("system.detached"),Vm=Jr("system.dismissRequested"),BM=Jr("system.repositionRequested"),Qy=Jr("focusmanager.shifted"),I0=Jr("slotcontainer.visibility"),FM=Jr("system.external.element.scroll"),IM=Jr("change.tab"),ew=Jr("dismiss.tab"),L0=Jr("highlight"),$0=Jr("dehighlight"),ns=(t,r)=>{tw(t,t.element,r,{})},Hn=(t,r,c)=>{tw(t,t.element,r,c)},Rf=t=>{ns(t,sc())},nk=(t,r,c)=>{tw(t,r,c,{})},tw=(t,r,c,h)=>{const b=ie({target:r},h);t.getSystem().triggerEvent(c,r,b)},f8=(t,r,c,h)=>{const b=Ot(ie({},h),{target:r});t.getSystem().triggerEvent(c,r,b)},ok=(t,r,c,h)=>{t.getSystem().triggerEvent(c,r,h.event)},ir=t=>Ba(t),sk=(t,r)=>({key:t,value:Sh({abort:r})}),KQ=(t,r)=>({key:t,value:Sh({can:r})}),rk=t=>({key:t,value:Sh({run:(r,c)=>{c.event.prevent()}})}),Dt=(t,r)=>({key:t,value:Sh({run:r})}),nw=(t,r,c)=>({key:t,value:Sh({run:(h,b)=>{r.apply(void 0,[h,b].concat(c))}})}),h8=t=>r=>Dt(t,r),H0=t=>r=>({key:t,value:Sh({run:(c,h)=>{P0(c,h)&&r(c,h)}})}),m8=(t,r)=>Dt(t,(c,h)=>{c.getSystem().getByUid(r).each(b=>{ok(b,b.element,t,h)})}),cp=(t,r,c)=>{const h=r.partUids[c];return m8(t,h)},ik=(t,r)=>Dt(t,(c,h)=>{const b=h.event,w=c.getSystem().getByDom(b.target).getOrThunk(()=>Fm(b.target,A=>c.getSystem().getByDom(A).toOptional(),ne).getOr(c));r(c,w,h)}),Nf=t=>Dt(t,(r,c)=>{c.cut()}),g8=t=>Dt(t,(r,c)=>{c.stop()}),Bf=(t,r)=>H0(t)(r),tr=H0(Ku()),Rd=H0(Hm()),p8=H0(Xy()),Ff=h8(sc()),zm=(t,r)=>{const h=(r||document).createElement("div");return h.innerHTML=t,Ii(Tt.fromDom(h))},ak=t=>t.dom.innerHTML,up=(t,r)=>{const h=ji(t).dom,b=Tt.fromDom(h.createDocumentFragment()),w=zm(r,h);kf(b,w),Em(t),Ma(t,b)},LM=t=>{const r=Tt.fromTag("div"),c=Tt.fromDom(t.dom.cloneNode(!0));return Ma(r,c),ak(r)},ow=(t,r)=>Tt.fromDom(t.dom.cloneNode(r)),$M=t=>ow(t,!1),b8=t=>ow(t,!0),HM=t=>{if(Q(t))return"#shadow-root";{const r=$M(t);return LM(r)}},Um=t=>HM(t),YQ=(t,r,c)=>vs(r,t.element)&&!vs(r,c),XQ=ir([KQ(lp(),(t,r)=>{const c=r.event,h=c.originator,b=c.target;return!YQ(t,h,b)})]);var Wm=Object.freeze({__proto__:null,events:XQ});let aa=0;const bn=t=>{const c=new Date().getTime(),h=Math.floor(Math.random()*1e9);return aa++,t+"_"+h+aa+String(c)},v8=G("alloy-id-"),y8=G("data-alloy-id"),w8=v8(),VM=y8(),x8=(t,r)=>{const c=bn(w8+t);return lk(r,c),c},lk=(t,r)=>{Object.defineProperty(t.dom,VM,{value:r,writable:!0})},V0=t=>{const r=Po(t)?t.dom[VM]:null;return O.from(r)},dp=t=>bn(t),sw=qe,Ah=t=>{const r=b=>`The component must be in a context to execute: ${b}`+(t?`
`+Um(t().element)+" is not in context.":""),c=b=>()=>{throw new Error(r(b))},h=b=>()=>{};return{debugInfo:G("fake"),triggerEvent:h("triggerEvent"),triggerFocus:h("triggerFocus"),triggerEscape:h("triggerEscape"),broadcast:h("broadcast"),broadcastOn:h("broadcastOn"),broadcastEvent:h("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:ne}},Yu=Ah(),ck=(t,r,c)=>{const h=c.toString(),b=h.indexOf(")")+1,w=h.indexOf("("),C=h.substring(w+1,b-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:rw(C.slice(0,1).concat(C.slice(3)))}),t},rw=t=>ue(t,r=>Lr(r,"/*")?r.substring(0,r.length-2):r),iw=(t,r)=>{const c=t.toString(),h=c.indexOf(")")+1,b=c.indexOf("("),w=c.substring(b+1,h-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:r,parameters:rw(w)}),t},zM=(t,r)=>{const c=r.toString(),h=c.indexOf(")")+1,b=c.indexOf("("),w=c.substring(b+1,h-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:rw(w.slice(1))}),t},fp=bn("alloy-premade"),If=t=>(Object.defineProperty(t.element.dom,fp,{value:t.uid,writable:!0}),oc(fp,t)),C8=t=>So(t.dom,fp),UM=t=>$t(t,fp),hp=t=>zM((r,...c)=>t(r.getApis(),r,...c),t),Xu={init:()=>rc({readState:G("No State required")})},rc=t=>t,S8=(t,r)=>{const c=ue(r,b=>ec(b.name(),[Rt("config"),tt("state",Xu)])),h=Er("component.behaviours",Ln(c),t.behaviours).fold(b=>{throw new Error(dl(b)+`
Complete spec:
`+JSON.stringify(t,null,2))},qe);return{list:r,data:pt(h,b=>{const w=b.map(C=>({config:C.config,state:C.state.init(C.config)}));return G(w)})}},WM=t=>t.list,jM=t=>t.data,uk=(t,r)=>{const c={};return Xe(t,(h,b)=>{Xe(h,(w,C)=>{const A=$t(c,C).getOr([]);c[C]=A.concat([r(b,w)])})}),c},iu=t=>({classes:I(t.classes)?[]:t.classes,attributes:I(t.attributes)?{}:t.attributes,styles:I(t.styles)?{}:t.styles}),z0=(t,r)=>Ot(ie({},t),{attributes:ie(ie({},t.attributes),r.attributes),styles:ie(ie({},t.styles),r.styles),classes:t.classes.concat(r.classes)}),dk=(t,r,c,h)=>{const b=ie({},r);je(c,B=>{b[B.name()]=B.exhibit(t,h)});const w=uk(b,(B,H)=>({name:B,modification:H})),C=B=>oo(B,(H,j)=>ie(ie({},j.modification),H),{}),A=oo(w.classes,(B,H)=>H.modification.concat(B),[]),_=C(w.attributes),R=C(w.styles);return iu({classes:A,attributes:_,styles:R})},k8=(t,r,c,h)=>{try{const b=We(c,(w,C)=>{const A=w[r],_=C[r],R=h.indexOf(A),B=h.indexOf(_);if(R===-1)throw new Error("The ordering for "+t+" does not have an entry for "+A+`.
Order specified: `+JSON.stringify(h,null,2));if(B===-1)throw new Error("The ordering for "+t+" does not have an entry for "+_+`.
Order specified: `+JSON.stringify(h,null,2));return R<B?-1:B<R?1:0});return _o.value(b)}catch(b){return _o.error([b])}},E8=(t,r)=>({handler:t,purpose:r}),A8=(t,r)=>({cHandler:t,purpose:r}),T8=(t,r)=>A8($e.apply(void 0,[t.handler].concat(r)),t.purpose),aw=t=>t.cHandler,fk=(t,r)=>({name:t,handler:r}),O8=(t,r)=>{const c={};return je(t,h=>{c[h.name()]=h.handlers(r)}),c},_8=(t,r,c)=>{const h=ie(ie({},c),O8(r,t));return uk(h,fk)},hk=(t,r,c,h)=>{const b=_8(t,c,h);return M8(b,r)},lw=t=>{const r=i8(t);return(c,h,...b)=>{const w=[c,h].concat(b);r.abort.apply(void 0,w)?h.stop():r.can.apply(void 0,w)&&r.run.apply(void 0,w)}},D8=(t,r)=>_o.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ue(r,c=>c.name),null,2)]),U0=(t,r,c)=>{const h=r[c];return h?k8("Event: "+c,"name",t,h).map(b=>{const w=ue(b,C=>C.handler);return a8(w)}):D8(c,t)},M8=(t,r)=>{const c=Qo(t,(h,b)=>(h.length===1?_o.value(h[0].handler):U0(h,r,b)).map(C=>{const A=lw(C),_=h.length>1?un(r[b],R=>yt(h,B=>B.name===R)).join(" > "):h[0].name;return oc(b,E8(A,_))}));return K2(c,{})},Mc="alloy.base.behaviour",mk=Ln([ra("dom","dom",ks(),Ln([Rt("tag"),tt("styles",{}),tt("classes",[]),tt("attributes",{}),Ds("value"),Ds("innerHtml")])),Rt("components"),Rt("uid"),tt("events",{}),tt("apis",{}),ra("eventOrder","eventOrder",np({[sc()]:["disabling",Mc,"toggling","typeaheadevents"],[lp()]:[Mc,"focusing","keying"],[Xy()]:[Mc,"disabling","toggling","representing"],[Lm()]:[Mc,"representing","streaming","invalidating"],[Hm()]:[Mc,"representing","item-events","tooltipping"],[bi()]:["focusing",Mc,"item-type-events"],[Df()]:["focusing",Mc,"item-type-events"],[Mf()]:["item-type-events","tooltipping"],[$m()]:["receiving","reflecting","tooltipping"]}),Gi()),Ds("domModification")]),P8=t=>Er("custom.definition",mk,t),gk=t=>Ot(ie({},t.dom),{uid:t.uid,domChildren:ue(t.components,r=>r.element)}),R8=t=>t.domModification.fold(()=>iu({}),iu),W0=t=>t.events,cw=(t,r)=>{const c=$r(t,r);return c===void 0||c===""?[]:c.split(" ")},mp=(t,r,c)=>{const b=cw(t,r).concat([c]);return on(t,r,b.join(" ")),!0},ZM=(t,r,c)=>{const h=un(cw(t,r),b=>b!==c);return h.length>0?on(t,r,h.join(" ")):be(t,r),!1},gp=t=>t.dom.classList!==void 0,uw=t=>cw(t,"class"),qM=(t,r)=>mp(t,"class",r),nr=(t,r)=>ZM(t,"class",r),N8=(t,r)=>Ue(uw(t),r)?nr(t,r):qM(t,r),Qr=(t,r)=>{gp(t)?t.dom.classList.add(r):qM(t,r)},GM=t=>{(gp(t)?t.dom.classList:uw(t)).length===0&&be(t,"class")},br=(t,r)=>{gp(t)?t.dom.classList.remove(r):nr(t,r),GM(t)},KM=(t,r)=>{const c=gp(t)?t.dom.classList.toggle(r):N8(t,r);return GM(t),c},vi=(t,r)=>gp(t)&&t.dom.classList.contains(r),Ur=(t,r)=>{je(r,c=>{Qr(t,c)})},au=(t,r)=>{je(r,c=>{br(t,c)})},B8=(t,r)=>{je(r,c=>{KM(t,c)})},F8=(t,r)=>xe(r,c=>vi(t,c)),j0=t=>{const r=t.dom.classList,c=new Array(r.length);for(let h=0;h<r.length;h++){const b=r.item(h);b!==null&&(c[h]=b)}return c},dw=t=>gp(t)?j0(t):uw(t),Nd=t=>t.dom.value,pp=(t,r)=>{if(r===void 0)throw new Error("Value.set was undefined");t.dom.value=r},JQ=(t,r,c)=>al(t,r).map(b=>{if(c.exists(C=>!vs(C,b))){const C=c.map(Os).getOr("span"),A=Tt.fromTag(C);return _c(b,A),A}else return b}),I8=(t,r,c)=>{c.fold(()=>Ma(t,r),h=>{vs(h,r)||(_c(h,r),Dc(h))})},L8=(t,r,c)=>{const h=ue(r,c),b=Ii(t);return je(b.slice(h.length),Dc),h},$8=(t,r,c,h)=>{const b=al(t,r),w=h(c,b),C=JQ(t,r,b);return I8(t,w.element,C),w},QQ=(t,r,c)=>L8(t,r,(h,b)=>$8(t,b,h,c)),eee=(t,r)=>L8(t,r,(c,h)=>{const b=al(t,h);return I8(t,c,b),c}),lu=(t,r)=>{const c=Yn(t),h=Yn(r),b=Ne(h,c),w=so(t,(C,A)=>!So(r,A)||C!==r[A]).t;return{toRemove:b,toSet:w}},Xa=(t,r)=>{const Je=ct(r),{class:c,style:h}=Je,b=sy(Je,["class","style"]),{toSet:w,toRemove:C}=lu(t.attributes,b),A=()=>{je(C,It=>be(r,It)),Pu(r,w)},_=qr(r),{toSet:R,toRemove:B}=lu(t.styles,_),H=()=>{je(B,It=>es(r,It)),oi(r,R)},j=dw(r),X=Ne(j,t.classes),oe=Ne(t.classes,j),Se=()=>{Ur(r,oe),au(r,X)},et=It=>{up(r,It)},He=()=>{const It=t.domChildren;eee(r,It)},Pe=()=>{const It=r,At=t.value.getOrUndefined();At!==Nd(It)&&pp(It,At!=null?At:"")};return A(),Se(),H(),t.innerHtml.fold(He,et),Pe(),r},H8=t=>{const r=Tt.fromTag(t.tag);Pu(r,t.attributes),Ur(r,t.classes),oi(r,t.styles),t.innerHtml.each(h=>up(r,h));const c=t.domChildren;return kf(r,c),t.value.each(h=>{pp(r,h)}),r},V8=(t,r)=>{try{const c=Xa(t,r);return O.some(c)}catch(c){return O.none()}},Th=t=>t.innerHtml.isSome()&&t.domChildren.length>0,fw=(t,r)=>{const c=b=>Os(b)===t.tag&&!Th(t)&&!C8(b),h=r.filter(c).bind(b=>V8(t,b)).getOrThunk(()=>H8(t));return lk(h,t.uid),h},pk=t=>{const r=$t(t,"behaviours").getOr({});return de(Yn(r),c=>{const h=r[c];return Y(h)?[h.me]:[]})},Z0=(t,r)=>S8(t,r),jm=t=>{const r=pk(t);return Z0(t,r)},bp=(t,r,c)=>{const h=gk(t),b=R8(t),w={"alloy.base.modification":b},C=r.length>0?dk(c,w,r,h):b;return z0(h,C)},q0=(t,r,c)=>{const h={"alloy.base.behaviour":W0(t)};return hk(c,t.eventOrder,r,h).getOrDie()},G0=(t,r)=>{const c=()=>Je,h=qn(Yu),b=Us(P8(t)),w=jm(t),C=WM(w),A=jM(w),_=bp(b,C,A),R=fw(_,r),B=q0(b,C,A),H=qn(b.components),j=It=>{h.set(It)},X=()=>{h.set(Ah(c))},oe=()=>{const It=Ii(R),At=de(It,Ct=>h.get().getByDom(Ct).fold(()=>[],ve));H.set(At)},Se=It=>{const At=A;return(J(At[It.name()])?At[It.name()]:()=>{throw new Error("Could not find "+It.name()+" in "+JSON.stringify(t,null,2))})()},et=It=>J(A[It.name()]),He=()=>b.apis,Pe=It=>A[It]().map(At=>At.state.readState()).getOr("not enabled"),Je={uid:t.uid,getSystem:h.get,config:Se,hasConfigured:et,spec:t,readState:Pe,getApis:He,connect:j,disconnect:X,element:R,syncComponents:oe,components:H.get,events:B};return Je},K0=(t,r)=>{const c=$t(t,"components").getOr([]);return r.fold(()=>ue(c,ya),h=>ue(c,(b,w)=>hw(b,al(h,w))))},YM=(t,r)=>{const C=sw(t),{events:c}=C,h=sy(C,["events"]),b=K0(h,r),w=Ot(ie({},h),{events:ie(ie({},Wm),c),components:b});return _o.value(G0(w,r))},Br=t=>{const r=Tt.fromText(t);return XM({element:r})},XM=t=>{const r=Ya("external.component",er([Rt("element"),Ds("uid")]),t),c=qn(Ah()),h=A=>{c.set(A)},b=()=>{c.set(Ah(()=>C))},w=r.uid.getOrThunk(()=>dp("external"));lk(r.element,w);const C={uid:w,getSystem:c.get,config:O.none,hasConfigured:ne,connect:h,disconnect:b,getApis:()=>({}),element:r.element,spec:t,readState:G("No state"),syncComponents:Z,components:G([]),events:{}};return If(C)},JM=dp,QM=t=>So(t,"uid"),hw=(t,r)=>UM(t).getOrThunk(()=>{const c=QM(t)?t:ie({uid:JM("")},t);return YM(c,r).getOrDie()}),ya=t=>hw(t,O.none()),Pc=If;var e3=(t,r,c,h,b)=>t(c,h)?O.some(c):J(b)&&b(c)?O.none():r(c,h,b);const bk=(t,r,c)=>{let h=t.dom;const b=J(c)?c:ne;for(;h.parentNode;){h=h.parentNode;const w=Tt.fromDom(h);if(r(w))return O.some(w);if(b(w))break}return O.none()},vp=(t,r,c)=>e3((b,w)=>w(b),bk,t,r,c),z8=(t,r)=>{const c=b=>r(Tt.fromDom(b));return Qe(t.dom.childNodes,c).map(Tt.fromDom)},U8=(t,r)=>{const c=h=>{for(let b=0;b<h.childNodes.length;b++){const w=Tt.fromDom(h.childNodes[b]);if(r(w))return O.some(w);const C=c(h.childNodes[b]);if(C.isSome())return C}return O.none()};return c(t.dom)},vk=(t,r,c)=>vp(t,r,c).isSome(),ic=(t,r,c)=>bk(t,h=>Dr(h,r),c),mw=(t,r)=>z8(t,c=>Dr(c,r)),Wr=(t,r)=>Ac(r,t),Ju=(t,r,c)=>e3((b,w)=>Dr(b,w),ic,t,r,c),yp="aria-controls",Zm=t=>vp(t,c=>{if(!Po(c))return!1;const h=$r(c,"id");return h!==void 0&&h.indexOf(yp)>-1}).bind(c=>{const h=$r(c,"id"),b=St(c);return Wr(b,`[${yp}="${h}"]`)}),qm=()=>{const t=bn(yp);return{id:t,link:h=>{on(h,yp,t)},unlink:h=>{be(h,yp)}}},Gm=(t,r)=>Zm(r).exists(c=>Oh(t,c)),Oh=(t,r)=>vk(r,c=>vs(c,t.element),ne)||Gm(t,r),t3="unknown";var Km;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Km||(Km={}));const Ym=qn({}),Y0=(t,r)=>{const c=[],h=new Date().getTime();return{logEventCut:(b,w,C)=>{c.push({outcome:"cut",target:w,purpose:C})},logEventStopped:(b,w,C)=>{c.push({outcome:"stopped",target:w,purpose:C})},logNoParent:(b,w,C)=>{c.push({outcome:"no-parent",target:w,purpose:C})},logEventNoHandlers:(b,w)=>{c.push({outcome:"no-handlers-left",target:w})},logEventResponse:(b,w,C)=>{c.push({outcome:"response",purpose:C,target:w})},write:()=>{const b=new Date().getTime();Ue(["mousemove","mouseover","mouseout",Xy()],t)}}},W8=(t,r,c)=>{switch($t(Ym.get(),t).orThunk(()=>{const b=Yn(Ym.get());return ao(b,w=>t.indexOf(w)>-1?O.some(Ym.get()[w]):O.none())}).getOr(Km.NORMAL)){case Km.NORMAL:return c(gw());case Km.LOGGING:{const b=Y0(t,r),w=c(b);return b.write(),w}case Km.STOP:return!0}},j8=["alloy/data/Fields","alloy/debugging/Debugging"],n3=()=>{const t=new Error;if(t.stack!==void 0){const r=t.stack.split(`
`);return Qe(r,c=>c.indexOf("alloy")>0&&!yt(j8,h=>c.indexOf(h)>-1)).getOr(t3)}else return t3},Z8={logEventCut:Z,logEventStopped:Z,logNoParent:Z,logEventNoHandlers:Z,logEventResponse:Z,write:Z},yk=(t,r,c)=>W8(t,r,c),gw=G(Z8),Lf=G([Rt("menu"),Rt("selectedMenu")]),wk=G([Rt("item"),Rt("selectedItem")]);G(Ln(wk().concat(Lf())));const q8=G(Ln(wk())),o3=ju("initSize",[Rt("numColumns"),Rt("numRows")]),G8=()=>Jl("markers",q8()),pw=()=>ju("markers",[Rt("backgroundMenu")].concat(Lf()).concat(wk())),_h=t=>ju("markers",ue(t,Rt)),bw=(t,r,c)=>(n3(),ra(r,r,c,T0(h=>_o.value((...b)=>h.apply(void 0,b))))),os=t=>bw("onHandler",t,_m(Z)),_l=t=>bw("onKeyboardHandler",t,_m(O.none)),Qu=t=>bw("onHandler",t,ks()),xk=t=>bw("onKeyboardHandler",t,ks()),Ws=(t,r)=>Xr(t,G(r)),vw=t=>Xr(t,qe),Ck=G(o3),Ai=(t,r,c,h,b,w,C,A=!1)=>({x:t,y:r,bubble:c,direction:h,placement:b,restriction:w,label:`${C}-${b}`,alwaysFit:A}),Bd=Ol.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Sk=(t,r,c,h,b,w,C,A,_)=>t.fold(r,c,h,b,w,C,A,_),s3=(t,r,c,h)=>t.fold(r,r,h,h,r,h,c,c),kk=(t,r,c,h)=>t.fold(r,h,r,h,c,c,r,h),yw=Bd.southeast,Ek=Bd.southwest,ww=Bd.northeast,Fd=Bd.northwest,Dh=Bd.south,r3=Bd.north,bt=Bd.east,X0=Bd.west,wp=(t,r,c,h)=>{const b=t+r;return b>h?c:b<c?h:b},ac=(t,r,c)=>Math.min(Math.max(t,r),c),Ak=(t,r)=>{switch(r){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},Ar=(t,r)=>kt(["left","right","top","bottom"],c=>$t(r,c).map(h=>Ak(t,h))),i3=(t,r,c)=>{const h=(_,R)=>r[_].map(B=>{const H=_==="top"||_==="bottom",j=H?c.top:c.left,oe=(_==="left"||_==="top"?Math.max:Math.min)(B,R)+j;return H?ac(oe,t.y,t.bottom):ac(oe,t.x,t.right)}).getOr(R),b=h("left",t.x),w=h("top",t.y),C=h("right",t.right),A=h("bottom",t.bottom);return Kr(b,w,C-b,A-w)},$f="layout",Tk=t=>t.x,xw=(t,r)=>t.x+t.width/2-r.width/2,a3=(t,r)=>t.x+t.width-r.width,Cw=(t,r)=>t.y-r.height,Ok=t=>t.y+t.height,_k=(t,r)=>t.y+t.height/2-r.height/2,K8=t=>t.x+t.width,l3=(t,r)=>t.x-r.width,la=(t,r,c)=>Ai(Tk(t),Ok(t),c.southeast(),yw(),"southeast",Ar(t,{left:1,top:3}),$f),ca=(t,r,c)=>Ai(a3(t,r),Ok(t),c.southwest(),Ek(),"southwest",Ar(t,{right:0,top:3}),$f),Ja=(t,r,c)=>Ai(Tk(t),Cw(t,r),c.northeast(),ww(),"northeast",Ar(t,{left:1,bottom:2}),$f),wa=(t,r,c)=>Ai(a3(t,r),Cw(t,r),c.northwest(),Fd(),"northwest",Ar(t,{right:0,bottom:2}),$f),Fa=(t,r,c)=>Ai(xw(t,r),Cw(t,r),c.north(),r3(),"north",Ar(t,{bottom:2}),$f),Ti=(t,r,c)=>Ai(xw(t,r),Ok(t),c.south(),Dh(),"south",Ar(t,{top:3}),$f),Dk=(t,r,c)=>Ai(K8(t),_k(t,r),c.east(),bt(),"east",Ar(t,{left:0}),$f),J0=(t,r,c)=>Ai(l3(t,r),_k(t,r),c.west(),X0(),"west",Ar(t,{right:1}),$f),Mk=()=>[la,ca,Ja,wa,Ti,Fa,Dk,J0],Pk=()=>[ca,la,wa,Ja,Ti,Fa,Dk,J0],Rk=()=>[Ja,wa,la,ca,Fa,Ti],c3=()=>[wa,Ja,ca,la,Fa,Ti],Sw=()=>[la,ca,Ja,wa,Ti,Fa],Nk=()=>[ca,la,wa,Ja,Ti,Fa],Y8=(t,r)=>r.universal?t:un(t,c=>Ue(r.channels,c));var u3=Object.freeze({__proto__:null,events:t=>ir([Dt($m(),(r,c)=>{const h=t.channels,b=Yn(h),w=c,C=Y8(b,w);je(C,A=>{const _=h[A],R=_.schema,B=Ya("channel["+A+`] data
Receiver: `+Um(r.element),R,w.data);_.onReceive(r,B)})})])}),J8=[Jl("channels",Of(_o.value,er([Qu("onReceive"),tt("schema",Gi())])))];const Bk=(t,r,c)=>Ff(h=>{c(h,t,r)}),kw=(t,r,c)=>p8((h,b)=>{c(h,t,r)}),d3=(t,r,c,h,b,w)=>{const C=er(t),A=ec(r,[Nm("config",t)]);return ed(C,A,r,c,h,b,w)},tee=(t,r,c,h,b,w)=>{const C=t,A=ec(r,[Md("config",t)]);return ed(C,A,r,c,h,b,w)},fl=(t,r,c)=>ck((b,...w)=>{const C=[b].concat(w);return b.config({name:G(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},A=>{const _=Array.prototype.slice.call(C,1);return r.apply(void 0,[b,A.config,A.state].concat(_))})},c,r),nee=t=>({key:t,value:void 0}),ed=(t,r,c,h,b,w,C)=>{const A=H=>Js(H,c)?H[c]():O.none(),_=pt(b,(H,j)=>fl(c,H,j)),R=pt(w,(H,j)=>iw(H,j)),B=Ot(ie(ie({},R),_),{revoke:$e(nee,c),config:H=>{const j=Ya(c+"-config",t,H);return{key:c,value:{config:j,me:B,configAsRaw:Et(()=>Ya(c+"-config",t,H)),initialConfig:H,state:C}}},schema:G(r),exhibit:(H,j)=>xr(A(H),$t(h,"exhibit"),(X,oe)=>oe(j,X.config,X.state)).getOrThunk(()=>iu({})),name:G(c),handlers:H=>A(H).map(j=>$t(h,"events").getOr(()=>({}))(j.config,j.state)).getOr({})});return B},Kt=t=>Ba(t),Q8=er([Rt("fields"),Rt("name"),tt("active",{}),tt("apis",{}),tt("state",Xu),tt("extra",{})]),Xi=t=>{const r=Ya("Creating behaviour: "+t.name,Q8,t);return d3(r.fields,r.name,r.active,r.apis,r.extra,r.state)},e7=er([Rt("branchKey"),Rt("branches"),Rt("name"),tt("active",{}),tt("apis",{}),tt("state",Xu),tt("extra",{})]),Fk=t=>{const r=Ya("Creating behaviour: "+t.name,e7,t);return tee(gs(r.branchKey,r.branches),r.name,r.active,r.apis,r.extra,r.state)},f3=G(void 0),Dl=Xi({fields:J8,name:"receiving",active:u3});var n7=Object.freeze({__proto__:null,exhibit:(t,r)=>iu({classes:[],styles:r.useFixed()?{}:{position:"relative"}})});const lc=(t,r=!1)=>t.dom.focus({preventScroll:r}),Ik=t=>t.dom.blur(),Q0=t=>{const r=St(t).dom;return t.dom===r.activeElement},Id=(t=Am())=>O.from(t.dom.activeElement).map(Tt.fromDom),cu=t=>Id(St(t)).filter(r=>t.dom.contains(r.dom)),fn=(t,r)=>{const c=St(r),h=Id(c).bind(w=>{const C=A=>vs(w,A);return C(r)?O.some(r):U8(r,C)}),b=t(r);return h.each(w=>{Id(c).filter(C=>vs(C,w)).fold(()=>{lc(w)},Z)}),b},cc=(t,r,c,h,b)=>{const w=C=>C+"px";return{position:t,left:r.map(w),top:c.map(w),right:h.map(w),bottom:b.map(w)}},h3=t=>Ot(ie({},t),{position:O.some(t.position)}),m3=(t,r)=>{Lt(t,h3(r))},Lk=Ol.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),g3=(t,r,c,h,b,w)=>{const C=r.rect,A=C.x-c,_=C.y-h,R=C.width,B=C.height,H=b-(A+R),j=w-(_+B),X=O.some(A),oe=O.some(_),Se=O.some(H),et=O.some(j),He=O.none();return Sk(r.direction,()=>cc(t,X,oe,He,He),()=>cc(t,He,oe,Se,He),()=>cc(t,X,He,He,et),()=>cc(t,He,He,Se,et),()=>cc(t,X,oe,He,He),()=>cc(t,X,He,He,et),()=>cc(t,X,oe,He,He),()=>cc(t,He,oe,Se,He))},$k=(t,r)=>t.fold(()=>{const c=r.rect;return cc("absolute",O.some(c.x),O.some(c.y),O.none(),O.none())},(c,h,b,w)=>g3("absolute",r,c,h,b,w),(c,h,b,w)=>g3("fixed",r,c,h,b,w)),Hk=(t,r)=>{const c=$e(vh,r),h=t.fold(c,c,()=>{const C=Pa();return vh(r).translate(-C.left,-C.top)}),b=pe(r),w=Nu(r);return Kr(h.left,h.top,b,w)},o7=(t,r)=>r.fold(()=>t.fold(Zi,Zi,Kr),c=>t.fold(G(c),G(c),()=>{const h=Vk(t,c.x,c.y);return Kr(h.left,h.top,c.width,c.height)})),Vk=(t,r,c)=>{const h=dr(r,c),b=()=>{const w=Pa();return h.translate(-w.left,-w.top)};return t.fold(G(h),G(h),b)},s7=(t,r,c,h)=>t.fold(r,c,h);Lk.none;const Ia=Lk.relative,eb=Lk.fixed,r7=(t,r)=>({anchorBox:t,origin:r}),i7=(t,r)=>r7(t,r),zk="data-alloy-placement",a7=(t,r)=>{on(t,zk,r)},p3=t=>U(t,zk),b3=t=>be(t,zk),tb=Ol.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),l7=(t,r)=>{const{x:c,y:h,right:b,bottom:w}=r,{x:C,y:A,right:_,bottom:R,width:B,height:H}=t,j=C>=c&&C<=b,X=A>=h&&A<=w,oe=j&&X,Se=_<=b&&_>=c,et=R<=w&&R>=h,He=Se&&et,Pe=Math.min(B,C>=c?b-C:_-c),Je=Math.min(H,A>=h?w-A:R-h);return{originInBounds:oe,sizeInBounds:He,visibleW:Pe,visibleH:Je}},v3=(t,r)=>{const{x:c,y:h,right:b,bottom:w}=r,{x:C,y:A,width:_,height:R}=t,B=Math.max(c,b-_),H=Math.max(h,w-R),j=ac(C,c,B),X=ac(A,h,H),oe=Math.min(j+_,b)-j,Se=Math.min(X+R,w)-X;return Kr(j,X,oe,Se)},c7=(t,r,c)=>{const h=G(r.bottom-c.y),b=G(c.bottom-r.y),w=s3(t,b,b,h),C=G(r.right-c.x),A=G(c.right-r.x);return{maxWidth:kk(t,A,A,C),maxHeight:w}},u7=(t,r,c,h)=>{const b=t.bubble,w=b.offset,C=i3(h,t.restriction,w),A=t.x+w.left,_=t.y+w.top,R=Kr(A,_,r,c),{originInBounds:B,sizeInBounds:H,visibleW:j,visibleH:X}=l7(R,C),oe=B&&H,Se=oe?R:v3(R,C),et=Se.width>0&&Se.height>0,{maxWidth:He,maxHeight:Pe}=c7(t.direction,Se,h),Je={rect:Se,maxHeight:Pe,maxWidth:He,direction:t.direction,placement:t.placement,classes:{on:b.classesOn,off:b.classesOff},layout:t.label,testY:_};return oe||t.alwaysFit?tb.fit(Je):tb.nofit(Je,j,X,et)},d7=(t,r,c,h,b,w)=>{const C=h.width,A=h.height,_=(B,H,j,X,oe)=>{const Se=B(c,h,b,t,w),et=u7(Se,C,A,w);return et.fold(G(et),(He,Pe,Je,It)=>(oe===It?Je>X||Pe>j:!oe&&It)?et:tb.nofit(H,j,X,oe))};return Do(r,(B,H)=>{const j=$e(_,H);return B.fold(G(B),j)},tb.nofit({rect:c,maxHeight:h.height,maxWidth:h.width,direction:yw(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(qe,qe)},Uk=t=>{const r=qn(O.none()),c=()=>r.get().each(t);return{clear:()=>{c(),r.set(O.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:A=>{c(),r.set(O.some(A))}}},f7=()=>Uk(t=>t.destroy()),xp=()=>Uk(t=>t.unbind()),or=()=>{const t=Uk(Z),r=c=>t.get().each(c);return Ot(ie({},t),{on:r})},Wk=ge,Qa=(t,r,c)=>Lu(t,r,Wk,c),Ew=(t,r,c)=>Fy(t,r,Wk,c),y3=Sf,w3=["top","bottom","right","left"],Aw="data-alloy-transition-timer",x3=(t,r)=>F8(t,r.classes),h7=(t,r,c)=>c.exists(h=>{const b=t.mode;return b==="all"?!0:h[b]!==r[b]}),m7=(t,r)=>{const c=h=>parseFloat(h).toFixed(3);return Bo(r,(h,b)=>{const w=t[b].map(c),C=h.map(c);return!Zr(w,C)}).isSome()},C3=t=>{const r=w=>{const A=Qs(t,w).split(/\s*,\s*/);return un(A,ke)},c=w=>{if(v(w)&&/^[\d.]+/.test(w)){const C=parseFloat(w);return Lr(w,"ms")?C:C*1e3}else return 0},h=r("transition-delay"),b=r("transition-duration");return Do(b,(w,C,A)=>{const _=c(h[A])+c(C);return Math.max(w,_)},0)},g7=(t,r)=>{const c=xp(),h=xp();let b;const w=R=>{var B;const H=(B=R.raw.pseudoElement)!==null&&B!==void 0?B:"";return vs(R.target,t)&&Ae(H)&&Ue(w3,R.raw.propertyName)},C=R=>{if(z(R)||w(R)){c.clear(),h.clear();const B=R==null?void 0:R.raw.type;(z(B)||B===ap())&&(clearTimeout(b),be(t,Aw),au(t,r.classes))}},A=Qa(t,c8(),R=>{w(R)&&(A.unbind(),c.set(Qa(t,ap(),C)),h.set(Qa(t,l8(),C)))}),_=C3(t);requestAnimationFrame(()=>{b=setTimeout(C,_+17),on(t,Aw,b)})},p7=(t,r)=>{Ur(t,r.classes),U(t,Aw).each(c=>{clearTimeout(parseInt(c,10)),be(t,Aw)}),g7(t,r)},S3=(t,r,c,h,b,w)=>{const C=h7(h,b,w);if(C||x3(t,h)){Cn(t,"position",c.position);const A=Hk(r,t),_=$k(r,Ot(ie({},b),{rect:A})),R=kt(w3,B=>_[B]);m7(c,R)&&(Lt(t,R),C&&p7(t,h),ll(t))}else au(t,h.classes)},b7=t=>({width:pe(t),height:Nu(t)}),Cp=(t,r,c,h)=>{es(r,"max-height"),es(r,"max-width");const b=b7(r);return d7(r,h.preference,t,b,c,h.bounds)},v7=(t,r)=>{const c=r.classes;au(t,c.off),Ur(t,c.on)},jk=(t,r,c)=>{const h=c.maxHeightFunction;h(t,r.maxHeight)},y7=(t,r,c)=>{const h=c.maxWidthFunction;h(t,r.maxWidth)},nb=(t,r,c)=>{const h=$k(c.origin,r);c.transition.each(b=>{S3(t,c.origin,h,b,r,c.lastPlacement)}),m3(t,h)},w7=(t,r)=>{a7(t,r.placement)},k3=(t,r)=>{Gg(t,Math.floor(r))},E3=G((t,r)=>{k3(t,r),oi(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Sp=G((t,r)=>{k3(t,r)}),A3=(t,r,c)=>t[r]===void 0?c:t[r],Zk=(t,r,c,h,b,w,C,A)=>{const _=A3(C,"maxHeightFunction",E3()),R=A3(C,"maxWidthFunction",Z),B=t.anchorBox,H=t.origin,j={bounds:o7(H,w),origin:H,preference:h,maxHeightFunction:_,maxWidthFunction:R,lastPlacement:b,transition:A};return x7(B,r,c,j)},x7=(t,r,c,h)=>{const b=Cp(t,r,c,h);return nb(r,b,h),w7(r,b),v7(r,b),jk(r,b,h),y7(r,b,h),{layout:b.layout,placement:b.placement}},C7=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Hf=(t,r,c,h=1)=>{const b=t*h,w=r*h,C=_=>$t(c,_).getOr([]),A=(_,R,B)=>{const H=Ne(C7,B);return{offset:dr(_,R),classesOn:de(B,C),classesOff:de(H,C)}};return{southeast:()=>A(-t,r,["top","alignLeft"]),southwest:()=>A(t,r,["top","alignRight"]),south:()=>A(-t/2,r,["top","alignCentre"]),northeast:()=>A(-t,-r,["bottom","alignLeft"]),northwest:()=>A(t,-r,["bottom","alignRight"]),north:()=>A(-t/2,-r,["bottom","alignCentre"]),east:()=>A(t,-r/2,["valignCentre","left"]),west:()=>A(-t,-r/2,["valignCentre","right"]),insetNortheast:()=>A(b,w,["top","alignLeft","inset"]),insetNorthwest:()=>A(-b,w,["top","alignRight","inset"]),insetNorth:()=>A(-b/2,w,["top","alignCentre","inset"]),insetSoutheast:()=>A(b,-w,["bottom","alignLeft","inset"]),insetSouthwest:()=>A(-b,-w,["bottom","alignRight","inset"]),insetSouth:()=>A(-b/2,-w,["bottom","alignCentre","inset"]),insetEast:()=>A(-b,-w/2,["valignCentre","right","inset"]),insetWest:()=>A(b,-w/2,["valignCentre","left","inset"])}},Tw=()=>Hf(0,0,{}),Ow=qe,qk=(t,r)=>c=>T3(c)==="rtl"?r:t,T3=t=>Qs(t,"direction")==="rtl"?"rtl":"ltr";var Vf;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Vf||(Vf={}));const _w="data-alloy-vertical-dir",Dw=t=>vk(t,r=>Po(r)&&$r(r,"data-alloy-vertical-dir")===Vf.BottomToTop),Mh=()=>ec("layouts",[Rt("onLtr"),Rt("onRtl"),Ds("onBottomLtr"),Ds("onBottomRtl")]),Mw=(t,r,c,h,b,w,C)=>{const A=C.map(Dw).getOr(!1),_=r.layouts.map(X=>X.onLtr(t)),R=r.layouts.map(X=>X.onRtl(t)),B=A?r.layouts.bind(X=>X.onBottomLtr.map(oe=>oe(t))).or(_).getOr(b):_.getOr(c),H=A?r.layouts.bind(X=>X.onBottomRtl.map(oe=>oe(t))).or(R).getOr(w):R.getOr(h);return qk(B,H)(t)},S7=(t,r,c)=>{const h=r.hotspot,b=Hk(c,h.element),w=Mw(t.element,r,Sw(),Nk(),Rk(),c3(),O.some(r.hotspot.element));return O.some(Ow({anchorBox:b,bubble:r.bubble.getOr(Tw()),overrides:r.overrides,layouts:w}))};var k7=[Rt("hotspot"),Ds("bubble"),tt("overrides",{}),Mh(),Ws("placement",S7)];const O3=(t,r,c)=>{const h=Vk(c,r.x,r.y),b=Kr(h.left,h.top,r.width,r.height),w=Mw(t.element,r,Mk(),Pk(),Mk(),Pk(),O.none());return O.some(Ow({anchorBox:b,bubble:r.bubble,overrides:r.overrides,layouts:w}))};var E7=[Rt("x"),Rt("y"),tt("height",0),tt("width",0),tt("bubble",Tw()),tt("overrides",{}),Mh(),Ws("placement",O3)];const _3=Ol.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),A7=t=>t.fold(qe,(r,c,h)=>r.translate(-c,-h)),T7=t=>t.fold(qe,qe),D3=t=>Do(t,(r,c)=>r.translate(c.left,c.top),dr(0,0)),O7=t=>{const r=ue(t,A7);return D3(r)},M3=t=>{const r=ue(t,T7);return D3(r)},_7=_3.screen,Pw=_3.absolute,D7=(t,r,c)=>{const h=_a(c.root).dom,b=w=>{const C=ji(w),A=ji(t.element);return vs(C,A)};return O.from(h.frameElement).map(Tt.fromDom).filter(b).map(Ka)},P3=(t,r,c)=>{const h=ji(t.element),b=Pa(h),w=D7(t,r,c).getOr(b);return Pw(w,b.left,b.top)},Gk=(t,r,c,h)=>{const b=_7(dr(t,r));return O.some(Hy(b,c,h))},R3=(t,r,c,h,b)=>t.map(w=>{const C=[r,w.point],A=s7(h,()=>M3(C),()=>M3(C),()=>O7(C)),_=yh(A.left,A.top,w.width,w.height),R=c.showAbove?Rk():Sw(),B=c.showAbove?c3():Nk(),H=Mw(b,c,R,B,R,B,O.none());return Ow({anchorBox:_,bubble:c.bubble.getOr(Tw()),overrides:c.overrides,layouts:H})}),M7=(t,r,c)=>{const h=P3(t,c,r);return r.node.filter(Wo).bind(b=>{const w=b.dom.getBoundingClientRect(),C=Gk(w.left,w.top,w.width,w.height),A=r.node.getOr(t.element);return R3(C,h,r,c,A)})};var P7=[Rt("node"),Rt("root"),Ds("bubble"),Mh(),tt("overrides",{}),tt("showAbove",!1),Ws("placement",M7)];const R7="\uFEFF",N7=" ",Kk={create:(t,r,c,h)=>({start:t,soffset:r,finish:c,foffset:h})},Yk=Ol.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),B7=(t,r,c,h)=>t.fold(r,c,h),N3=t=>t.fold(qe,qe,qe),F7=Yk.before,I7=Yk.on,L7=Yk.after,$7={before:F7,on:I7,after:L7,cata:B7,getStart:N3},kp=Ol.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),H7=t=>kp.exact(t.start,t.soffset,t.finish,t.foffset),V7=t=>t.match({domRange:r=>Tt.fromDom(r.startContainer),relative:(r,c)=>$7.getStart(r),exact:(r,c,h,b)=>r}),z7=kp.domRange,U7=kp.relative,W7=kp.exact,B3=t=>{const r=V7(t);return _a(r)},j7=Kk.create,ob={domRange:z7,relative:U7,exact:W7,exactFromRange:H7,getWin:B3,range:j7},Z7=(t,r)=>{r.fold(c=>{t.setStartBefore(c.dom)},(c,h)=>{t.setStart(c.dom,h)},c=>{t.setStartAfter(c.dom)})},q7=(t,r)=>{r.fold(c=>{t.setEndBefore(c.dom)},(c,h)=>{t.setEnd(c.dom,h)},c=>{t.setEndAfter(c.dom)})},Rw=(t,r,c)=>{const h=t.document.createRange();return Z7(h,r),q7(h,c),h},F3=(t,r,c,h,b)=>{const w=t.document.createRange();return w.setStart(r.dom,c),w.setEnd(h.dom,b),w},Xk=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),I3=t=>{const r=t.getClientRects(),c=r.length>0?r[0]:t.getBoundingClientRect();return c.width>0||c.height>0?O.some(c).map(Xk):O.none()},L3=t=>{const r=t.getBoundingClientRect();return r.width>0||r.height>0?O.some(r).map(Xk):O.none()},Ep=Ol.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jk=(t,r,c)=>r(Tt.fromDom(c.startContainer),c.startOffset,Tt.fromDom(c.endContainer),c.endOffset),G7=(t,r)=>r.match({domRange:c=>({ltr:G(c),rtl:O.none}),relative:(c,h)=>({ltr:Et(()=>Rw(t,c,h)),rtl:Et(()=>O.some(Rw(t,h,c)))}),exact:(c,h,b,w)=>({ltr:Et(()=>F3(t,c,h,b,w)),rtl:Et(()=>O.some(F3(t,b,w,c,h)))})}),K7=(t,r)=>{const c=r.ltr();return c.collapsed?r.rtl().filter(b=>b.collapsed===!1).map(b=>Ep.rtl(Tt.fromDom(b.endContainer),b.endOffset,Tt.fromDom(b.startContainer),b.startOffset)).getOrThunk(()=>Jk(t,Ep.ltr,c)):Jk(t,Ep.ltr,c)},Y7=(t,r)=>{const c=G7(t,r);return K7(t,c)},$3=(t,r)=>Y7(t,r).match({ltr:(h,b,w,C)=>{const A=t.document.createRange();return A.setStart(h.dom,b),A.setEnd(w.dom,C),A},rtl:(h,b,w,C)=>{const A=t.document.createRange();return A.setStart(w.dom,C),A.setEnd(h.dom,b),A}});Ep.ltr,Ep.rtl;const H3=(t,r,c)=>un(eu(t,c),r),Oi=(t,r)=>ki(r,t),X7=(t,r,c,h)=>{const w=ji(t).dom.createRange();return w.setStart(t.dom,r),w.setEnd(c.dom,h),w},J7=(t,r,c,h)=>{const b=X7(t,r,c,h),w=vs(t,c)&&r===h;return b.collapsed&&!w},Q7=t=>O.from(t.getSelection()),V3=t=>{if(t.rangeCount>0){const r=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return O.some(Kk.create(Tt.fromDom(r.startContainer),r.startOffset,Tt.fromDom(c.endContainer),c.endOffset))}else return O.none()},z3=t=>{if(t.anchorNode===null||t.focusNode===null)return V3(t);{const r=Tt.fromDom(t.anchorNode),c=Tt.fromDom(t.focusNode);return J7(r,t.anchorOffset,c,t.focusOffset)?O.some(Kk.create(r,t.anchorOffset,c,t.focusOffset)):V3(t)}},eH=t=>Q7(t).filter(r=>r.rangeCount>0).bind(z3),U3=(t,r)=>{const c=$3(t,r);return I3(c)},W3=(t,r)=>{const c=$3(t,r);return L3(c)},sb=((t,r)=>{const c=w=>{if(!t(w))throw new Error("Can only get "+r+" value of a "+r+" node");return h(w).getOr("")},h=w=>t(w)?O.from(w.dom.nodeValue):O.none();return{get:c,getOption:h,set:(w,C)=>{if(!t(w))throw new Error("Can only set raw "+r+" value of a "+r+" node");w.dom.nodeValue=C}}})(Io,"text"),tH=t=>sb.get(t),Ap=(t,r)=>({element:t,offset:r}),nH=(t,r)=>{const c=Ii(t);if(c.length===0)return Ap(t,r);if(r<c.length)return Ap(c[r],0);{const h=c[c.length-1],b=Io(h)?tH(h).length:Ii(h).length;return Ap(h,b)}},Qk=(t,r)=>Io(t)?Ap(t,r):nH(t,r),Bw=t=>t.foffset!==void 0,eE=(t,r)=>r.getSelection.getOrThunk(()=>()=>eH(t))().map(h=>{if(Bw(h)){const b=Qk(h.start,h.soffset),w=Qk(h.finish,h.foffset);return ob.range(b.element,b.offset,w.element,w.offset)}else return h}),oH=(t,r,c)=>{const h=_a(r.root).dom,b=P3(t,c,r),w=eE(h,r).bind(_=>{if(Bw(_))return W3(h,ob.exactFromRange(_)).orThunk(()=>{const B=Tt.fromText(R7);_c(_.start,B);const H=U3(h,ob.exact(B,0,B,1));return Dc(B),H}).bind(B=>Gk(B.left,B.top,B.width,B.height));{const R=pt(_,H=>H.dom.getBoundingClientRect()),B={left:Math.min(R.firstCell.left,R.lastCell.left),right:Math.max(R.firstCell.right,R.lastCell.right),top:Math.min(R.firstCell.top,R.lastCell.top),bottom:Math.max(R.firstCell.bottom,R.lastCell.bottom)};return Gk(B.left,B.top,B.right-B.left,B.bottom-B.top)}}),A=eE(h,r).bind(_=>Bw(_)?Po(_.start)?O.some(_.start):ma(_.start):O.some(_.firstCell)).getOr(t.element);return R3(w,b,r,c,A)};var sH=[Ds("getSelection"),Rt("root"),Ds("bubble"),Mh(),tt("overrides",{}),tt("showAbove",!1),Ws("placement",oH)];const Fw="link-layout",Xm=t=>t.x+t.width,Ph=(t,r)=>t.x-r.width,rb=(t,r)=>t.y-r.height+t.height,Tp=t=>t.y,j3=(t,r,c)=>Ai(Xm(t),Tp(t),c.southeast(),yw(),"southeast",Ar(t,{left:0,top:2}),Fw),zf=(t,r,c)=>Ai(Ph(t,r),Tp(t),c.southwest(),Ek(),"southwest",Ar(t,{right:1,top:2}),Fw),td=(t,r,c)=>Ai(Xm(t),rb(t,r),c.northeast(),ww(),"northeast",Ar(t,{left:0,bottom:3}),Fw),Iw=(t,r,c)=>Ai(Ph(t,r),rb(t,r),c.northwest(),Fd(),"northwest",Ar(t,{right:1,bottom:3}),Fw),tE=()=>[j3,zf,td,Iw],Z3=()=>[zf,j3,Iw,td],q3=(t,r,c)=>{const h=Hk(c,r.item.element),b=Mw(t.element,r,tE(),Z3(),tE(),Z3(),O.none());return O.some(Ow({anchorBox:h,bubble:Tw(),overrides:r.overrides,layouts:b}))};var ib=[Rt("item"),Mh(),tt("overrides",{}),Ws("placement",q3)],ab=gs("type",{selection:sH,node:P7,hotspot:k7,submenu:ib,makeshift:E7});const nE=[Ql("classes",Ki),tc("mode","all",["all","layout","placement"])],G3=[tt("useFixed",ne),Ds("getBounds")],lb=[Jl("anchor",ab),ec("transition",nE)],Lw=()=>{const t=document.documentElement;return eb(0,0,t.clientWidth,t.clientHeight)},rH=t=>{const r=Ka(t.element),c=t.element.dom.getBoundingClientRect();return Ia(r.left,r.top,c.width,c.height)},oE=(t,r,c,h,b,w)=>{const C=i7(r.anchorBox,t);return Zk(C,h.element,r.bubble,r.layouts,b,c,r.overrides,w)},$w=(t,r,c,h,b)=>{const w=O.none();Hi(t,r,c,h,b,w)},Hi=(t,r,c,h,b,w)=>{const C=Ya("placement.info",Ln(lb),b),A=C.anchor,_=h.element,R=c.get(h.uid);fn(()=>{Cn(_,"position","fixed");const B=zs(_,"visibility");Cn(_,"visibility","hidden");const H=r.useFixed()?Lw():rH(t);A.placement(t,A,H).each(j=>{const X=w.orThunk(()=>r.getBounds.map(ft)),oe=oE(H,j,X,h,R,C.transition);c.set(h.uid,oe)}),B.fold(()=>{es(_,"visibility")},j=>{Cn(_,"visibility",j)}),zs(_,"left").isNone()&&zs(_,"top").isNone()&&zs(_,"right").isNone()&&zs(_,"bottom").isNone()&&wr(zs(_,"position"),"fixed")&&es(_,"position")},_)};var K3=Object.freeze({__proto__:null,position:$w,positionWithinBounds:Hi,getMode:(t,r,c)=>r.useFixed()?"fixed":"absolute",reset:(t,r,c,h)=>{const b=h.element;je(["position","left","right","top","bottom"],w=>es(b,w)),b3(b),c.clear(h.uid)}}),Op=Object.freeze({__proto__:null,init:()=>{let t={};return rc({readState:()=>t,clear:b=>{Y(b)?delete t[b]:t={}},set:(b,w)=>{t[b]=w},get:b=>$t(t,b)})}});const xa=Xi({fields:G3,name:"positioning",active:n7,apis:K3,state:Op}),_p=t=>t.getSystem().isConnected(),cb=t=>{ns(t,Hm());const r=t.components();je(r,cb)},Dp=t=>{const r=t.components();je(r,Dp),ns(t,Ku())},sE=(t,r)=>{t.getSystem().addToWorld(r),Wo(t.element)&&Dp(r)},rE=t=>{cb(t),t.getSystem().removeFromWorld(t)},Hw=(t,r)=>{Ma(t.element,r.element)},Ld=t=>{je(t.components(),r=>Dc(r.element)),Em(t.element),t.syncComponents()},iH=(t,r,c)=>{const h=t.components();Ld(t);const b=c(r),w=Ne(h,b);je(w,C=>{cb(C),t.getSystem().removeFromWorld(C)}),je(b,C=>{_p(C)?Hw(t,C):(t.getSystem().addToWorld(C),Hw(t,C),Wo(t.element)&&Dp(C))}),t.syncComponents()},aH=(t,r,c)=>{const h=t.components(),b=de(r,A=>UM(A).toArray());je(h,A=>{Ue(b,A)||rE(A)});const w=c(r),C=Ne(h,w);je(C,A=>{_p(A)&&rE(A)}),je(w,A=>{_p(A)||sE(t,A)}),t.syncComponents()},Rh=(t,r)=>{iE(t,r,Ma)},iE=(t,r,c)=>{t.getSystem().addToWorld(r),c(t.element,r.element),Wo(t.element)&&Dp(r),t.syncComponents()},aE=t=>{cb(t),Dc(t.element),t.getSystem().removeFromWorld(t)},Wf=t=>{const r=mi(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());aE(t),r.each(c=>{c.syncComponents()})},X3=t=>{const r=t.components();je(r,aE),Em(t.element),t.syncComponents()},Ml=(t,r)=>{lE(t,r,Ma)},jf=(t,r)=>{lE(t,r,su)},lE=(t,r,c)=>{c(t,r.element);const h=Ii(r.element);je(h,b=>{r.getByDom(b).each(Dp)})},Mp=t=>{const r=Ii(t.element);je(r,c=>{t.getByDom(c).each(cb)}),Dc(t.element)},el=(t,r,c,h)=>{c.get().each(C=>{X3(t)});const b=r.getAttachPoint(t);Rh(b,t);const w=t.getSystem().build(h);return Rh(t,w),c.set(w),w},hl=(t,r,c,h)=>{const b=el(t,r,c,h);return r.onOpen(t,b),b},La=(t,r,c,h)=>c.get().map(()=>el(t,r,c,h)),uu=(t,r,c,h,b)=>{cE(t,r),hl(t,r,c,h),b(),ub(t,r)},Vw=(t,r,c)=>{c.get().each(h=>{X3(t),Wf(t),r.onClose(t,h),c.clear()})},uc=(t,r,c)=>c.isOpen(),Jm=(t,r,c,h)=>uc(t,r,c)&&c.get().exists(b=>r.isPartOf(t,b,h)),lH=(t,r,c)=>c.get(),cH=(t,r,c,h)=>{zs(t.element,r).fold(()=>{be(t.element,c)},b=>{on(t.element,c,b)}),Cn(t.element,r,h)},uH=(t,r,c)=>{U(t.element,c).fold(()=>es(t.element,r),h=>Cn(t.element,r,h))},cE=(t,r,c)=>{const h=r.getAttachPoint(t);Cn(t.element,"position",xa.getMode(h)),cH(t,"visibility",r.cloakVisibilityAttr,"hidden")},J3=t=>yt(["top","left","right","bottom"],r=>zs(t,r).isSome()),ub=(t,r,c)=>{J3(t.element)||es(t.element,"position"),uH(t,"visibility",r.cloakVisibilityAttr)};var Q3=Object.freeze({__proto__:null,cloak:cE,decloak:ub,open:hl,openWhileCloaked:uu,close:Vw,isOpen:uc,isPartOf:Jm,getState:lH,setContent:La}),dH=Object.freeze({__proto__:null,events:(t,r)=>ir([Dt(N0(),(c,h)=>{Vw(c,t,r)})])}),fH=[os("onOpen"),os("onClose"),Rt("isPartOf"),Rt("getAttachPoint"),tt("cloakVisibilityAttr","data-precloak-visibility")],e4=Object.freeze({__proto__:null,init:()=>{const t=or(),r=G("not-implemented");return rc({readState:r,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ss=Xi({fields:fH,name:"sandboxing",active:dH,apis:Q3,state:e4}),$d=G("dismiss.popups"),Qm=G("reposition.popups"),uE=G("mouse.released"),hH=er([tt("isExtraPart",ne),ec("fireEventInstead",[tt("event",Vm())])]),dE=t=>{const r=Ya("Dismissal",hH,t);return{[$d()]:{schema:er([Rt("target")]),onReceive:(c,h)=>{ss.isOpen(c)&&(ss.isPartOf(c,h.target)||r.isExtraPart(c,h.target)||r.fireEventInstead.fold(()=>ss.close(c),w=>ns(c,w.event)))}}}},mH=er([ec("fireEventInstead",[tt("event",BM())]),Wu("doReposition")]),fE=t=>{const r=Ya("Reposition",mH,t);return{[Qm()]:{onReceive:c=>{ss.isOpen(c)&&r.fireEventInstead.fold(()=>r.doReposition(c),h=>ns(c,h.event))}}}},hE=(t,r,c)=>{r.store.manager.onLoad(t,r,c)},dc=(t,r,c)=>{r.store.manager.onUnload(t,r,c)};var gE=Object.freeze({__proto__:null,onLoad:hE,onUnload:dc,setValue:(t,r,c,h)=>{r.store.manager.setValue(t,r,c,h)},getValue:(t,r,c)=>r.store.manager.getValue(t,r,c),getState:(t,r,c)=>c}),gH=Object.freeze({__proto__:null,events:(t,r)=>{const c=t.resetOnDom?[tr((h,b)=>{hE(h,t,r)}),Rd((h,b)=>{dc(h,t,r)})]:[kw(t,r,hE)];return ir(c)}});const n4=()=>{const t=qn(null),r=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,h=()=>{t.set(null)};return rc({set:t.set,get:t.get,isNotSet:c,clear:h,readState:r})},pH=()=>rc({readState:Z}),o4=()=>{const t=qn({}),r=qn({});return rc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:r.get()}),lookup:C=>$t(t.get(),C).orThunk(()=>$t(r.get(),C)),update:C=>{const A=t.get(),_=r.get(),R={},B={};je(C,H=>{R[H.value]=H,$t(H,"meta").each(j=>{$t(j,"text").each(X=>{B[X]=H})})}),t.set(ie(ie({},A),R)),r.set(ie(ie({},_),B))},clear:()=>{t.set({}),r.set({})}})};var Pp=Object.freeze({__proto__:null,memory:n4,dataset:o4,manual:pH,init:t=>t.store.manager.state(t)});const Rp=(t,r,c,h)=>{const b=r.store;c.update([h]),b.setValue(t,h),r.onSetValue(t,h)},vH=(t,r,c)=>{const h=r.store,b=h.getDataKey(t);return c.lookup(b).getOrThunk(()=>h.getFallbackEntry(b))},yH=(t,r,c)=>{r.store.initialValue.each(b=>{Rp(t,r,c,b)})},s4=(t,r,c)=>{c.clear()};var pE=[Ds("initialValue"),Rt("getFallbackEntry"),Rt("getDataKey"),Rt("setValue"),Ws("manager",{setValue:Rp,getValue:vH,onLoad:yH,onUnload:s4,state:o4})];const bE=(t,r,c)=>r.store.getValue(t),vE=(t,r,c,h)=>{r.store.setValue(t,h),r.onSetValue(t,h)},zw=(t,r,c)=>{r.store.initialValue.each(h=>{r.store.setValue(t,h)})};var yE=[Rt("getValue"),tt("setValue",Z),Ds("initialValue"),Ws("manager",{setValue:vE,getValue:bE,onLoad:zw,onUnload:Z,state:Xu.init})];const r4=(t,r,c,h)=>{c.set(h),r.onSetValue(t,h)},fb=(t,r,c)=>c.get(),wE=(t,r,c)=>{r.store.initialValue.each(h=>{c.isNotSet()&&c.set(h)})},wH=(t,r,c)=>{c.clear()};var i4=[Ds("initialValue"),Ws("manager",{setValue:r4,getValue:fb,onLoad:wE,onUnload:wH,state:n4})],xH=[Tl("store",{mode:"memory"},gs("mode",{memory:i4,manual:yE,dataset:pE})),os("onSetValue"),tt("resetOnDom",!1)];const ln=Xi({fields:xH,name:"representing",active:gH,apis:gE,extra:{setValueFrom:(t,r)=>{const c=ln.getValue(r);ln.setValue(t,c)}},state:Pp}),yi=(t,r)=>Pd(t,{},ue(r,c=>q2(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([Xr("dump",qe)])),Zf=t=>t.dump,_i=(t,r)=>ie(ie({},Kt(r)),t.dump),du={field:yi,augment:_i,get:Zf},a4="placeholder",hb=Ol.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Hd=t=>So(t,"uiType"),xE=(t,r,c,h)=>t.exists(b=>b!==c.owner)?hb.single(!0,G(c)):$t(h,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+Yn(h)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},b=>b.replace()),CE=(t,r,c,h)=>Hd(c)&&c.uiType===a4?xE(t,r,c,h):hb.single(!1,G(c)),mb=(t,r,c,h)=>CE(t,r,c,h).fold((w,C)=>{const A=Hd(c)?C(r,c.config,c.validated):C(r),_=$t(A,"components").getOr([]),R=de(_,B=>mb(t,r,B,h));return[Ot(ie({},A),{components:R})]},(w,C)=>{if(Hd(c)){const A=C(r,c.config,c.validated);return c.validated.preprocess.getOr(qe)(A)}else return C(r)}),l4=(t,r,c,h)=>de(c,b=>mb(t,r,b,h)),Uw=(t,r)=>{let c=!1;const h=()=>c,b=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,r},w=()=>r.fold((C,A)=>C,(C,A)=>C);return{name:G(t),required:w,used:h,replace:b}},SE=(t,r,c,h)=>{const b=pt(h,(C,A)=>Uw(A,C)),w=l4(t,r,c,b);return Xe(b,C=>{if(C.used()===!1&&C.required())throw new Error("Placeholder: "+C.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(r.components,null,2))}),w},c4=hb.single,CH=hb.multiple,nd=G(a4),Ww=Ol.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),jw=tt("factory",{sketch:qe}),Pl=tt("schema",[]),si=Rt("name"),kE=ra("pname","pname",Yl(t=>"<alloy."+bn(t.name)+">"),Gi()),EE=Xr("schema",()=>[Ds("preprocess")]),Zw=tt("defaults",G({})),gb=tt("overrides",G({})),AE=Ln([jw,Pl,si,kE,Zw,gb]),Np=Ln([jw,Pl,si,Zw,gb]),u4=Ln([jw,Pl,si,kE,Zw,gb]),d4=Ln([jw,EE,si,Rt("unit"),kE,Zw,gb]),f4=t=>t.fold(O.some,O.none,O.some,O.some),h4=t=>{const r=c=>c.name;return t.fold(r,r,r,r)},m4=t=>t.fold(qe,qe,qe,qe),pb=(t,r)=>c=>{const h=Ya("Converting part type",r,c);return t(h)},Ca=pb(Ww.required,AE),fu=pb(Ww.external,Np),fc=pb(Ww.optional,u4),bb=pb(Ww.group,d4),qw=G("entirety");var g4=Object.freeze({__proto__:null,required:Ca,external:fu,optional:fc,group:bb,asNamedPart:f4,name:h4,asCommon:m4,original:qw});const Bp=(t,r,c,h)=>$s(r.defaults(t,c,h),c,{uid:t.partUids[r.name]},r.overrides(t,c,h)),p4=(t,r,c)=>{const h={},b={};return je(c,w=>{w.fold(C=>{h[C.pname]=c4(!0,(A,_,R)=>C.factory.sketch(Bp(A,C,_,R)))},C=>{const A=r.parts[C.name];b[C.name]=G(C.factory.sketch(Bp(r,C,A[qw()]),A))},C=>{h[C.pname]=c4(!1,(A,_,R)=>C.factory.sketch(Bp(A,C,_,R)))},C=>{h[C.pname]=CH(!0,(A,_,R)=>{const B=A[C.name];return ue(B,H=>C.factory.sketch($s(C.defaults(A,H,R),H,C.overrides(A,H))))})})}),{internals:G(h),externals:G(b)}},qf=(t,r)=>{const c={};return je(r,h=>{f4(h).each(b=>{const w=vb(t,b.pname);c[b.name]=C=>{const A=Ya("Part: "+b.name+" in "+t,Ln(b.schema),C);return Ot(ie({},w),{config:C,validated:A})}})}),c},vb=(t,r)=>({uiType:nd(),owner:t,name:r}),TE=(t,r,c)=>({uiType:nd(),owner:t,name:r,config:c,validated:{}}),b4=t=>de(t,r=>r.fold(O.none,O.some,O.none,O.none).map(c=>ju(c.name,c.schema.concat([vw(qw())]))).toArray()),v4=t=>ue(t,h4),OE=(t,r,c)=>p4(t,r,c),Gw=(t,r,c)=>SE(O.some(t),r,r.components,c),js=(t,r,c)=>{const h=r.partUids[c];return t.getSystem().getByUid(h).toOptional()},Gf=(t,r,c)=>js(t,r,c).getOrDie("Could not find part: "+c),y4=(t,r,c)=>{const h={},b=r.partUids,w=t.getSystem();return je(c,C=>{h[C]=G(w.getByUid(b[C]))}),h},w4=(t,r)=>{const c=t.getSystem();return pt(r.partUids,(h,b)=>G(c.getByUid(h)))},_E=t=>Yn(t.partUids),eg=(t,r,c)=>{const h={},b=r.partUids,w=t.getSystem();return je(c,C=>{h[C]=G(w.getByUid(b[C]).getOrDie())}),h},DE=(t,r)=>{const c=v4(r);return Ba(ue(c,h=>({key:h,value:t+"-"+h})))},ME=t=>ra("partUids","partUids",tp(r=>DE(r.uid,t)),Gi());var SH=Object.freeze({__proto__:null,generate:qf,generateOne:TE,schemas:b4,names:v4,substitutes:OE,components:Gw,defaultUids:DE,defaultUidsSchema:ME,getAllParts:w4,getAllPartNames:_E,getPart:js,getPartOrDie:Gf,getParts:y4,getPartsOrDie:eg});const kH=(t,r)=>(t.length>0?[ju("parts",t)]:[]).concat([Rt("uid"),tt("dom",{}),tt("components",[]),vw("originalSpec"),tt("debug.sketcher",{})]).concat(r),x4=(t,r,c,h,b)=>{const w=kH(h,b);return Ya(t+" [SpecSchema]",er(w.concat(r)),c)},EH=(t,r,c,h)=>{const b=C4(h),w=x4(t,r,b,[],[]);return c(w,b)},PE=(t,r,c,h,b)=>{const w=C4(b),C=b4(c),A=ME(c),_=x4(t,r,w,C,[A]),R=OE(t,_,c),B=Gw(t,_,R.internals());return h(_,B,w,R.externals())},AH=t=>So(t,"uid"),C4=t=>AH(t)?t:Ot(ie({},t),{uid:dp("uid")}),TH=t=>t.uid!==void 0,OH=er([Rt("name"),Rt("factory"),Rt("configFields"),tt("apis",{}),tt("extraApis",{})]),_H=er([Rt("name"),Rt("factory"),Rt("configFields"),Rt("partFields"),tt("apis",{}),tt("extraApis",{})]),Rl=t=>{const r=Ya("Sketcher for "+t.name,OH,t),c=w=>EH(r.name,r.configFields,r.factory,w),h=pt(r.apis,hp),b=pt(r.extraApis,(w,C)=>iw(w,C));return ie(ie({name:r.name,configFields:r.configFields,sketch:c},h),b)},Sa=t=>{const r=Ya("Sketcher for "+t.name,_H,t),c=C=>PE(r.name,r.configFields,r.partFields,r.factory,C),h=qf(r.name,r.partFields),b=pt(r.apis,hp),w=pt(r.extraApis,(C,A)=>iw(C,A));return ie(ie({name:r.name,partFields:r.partFields,configFields:r.configFields,sketch:c,parts:h},b),w)},tg=t=>Fi("input")(t)&&$r(t,"type")!=="radio"||Fi("textarea")(t);var S4=Object.freeze({__proto__:null,getCurrent:(t,r,c)=>r.find(t)});const DH=[Rt("find")],qo=Xi({fields:DH,name:"composing",apis:S4}),MH=["input","button","textarea","select"],k4=(t,r,c)=>{(r.disabled()?NE:Kw)(t,r)},RE=(t,r)=>r.useNative===!0&&Ue(MH,Os(t.element)),PH=t=>se(t.element,"disabled"),RH=t=>{on(t.element,"disabled","disabled")},E4=t=>{be(t.element,"disabled")},NH=t=>$r(t.element,"aria-disabled")==="true",mn=t=>{on(t.element,"aria-disabled","true")},ng=t=>{on(t.element,"aria-disabled","false")},NE=(t,r,c)=>{r.disableClass.each(b=>{Qr(t.element,b)}),(RE(t,r)?RH:mn)(t),r.onDisabled(t)},Kw=(t,r,c)=>{r.disableClass.each(b=>{br(t.element,b)}),(RE(t,r)?E4:ng)(t),r.onEnabled(t)},yb=(t,r)=>RE(t,r)?PH(t):NH(t);var BH=Object.freeze({__proto__:null,enable:Kw,disable:NE,isDisabled:yb,onLoad:k4,set:(t,r,c,h)=>{(h?NE:Kw)(t,r)}}),IH=Object.freeze({__proto__:null,exhibit:(t,r)=>iu({classes:r.disabled()?r.disableClass.toArray():[]}),events:(t,r)=>ir([sk(sc(),(c,h)=>yb(c,t)),kw(t,r,k4)])}),T4=[$i("disabled",ne),tt("useNative",!0),Ds("disableClass"),os("onDisabled"),os("onEnabled")];const Gn=Xi({fields:T4,name:"disabling",active:IH,apis:BH}),Fp=(t,r,c,h)=>{const b=Oi(t.element,"."+r.highlightClass);je(b,w=>{yt(h,A=>vs(A.element,w))||(br(w,r.highlightClass),t.getSystem().getByDom(w).each(A=>{r.onDehighlight(t,A),ns(A,$0())}))})},O4=(t,r,c)=>Fp(t,r,c,[]),LH=(t,r,c,h)=>{BE(t,r,c,h)&&(br(h.element,r.highlightClass),r.onDehighlight(t,h),ns(h,$0()))},wb=(t,r,c,h)=>{Fp(t,r,c,[h]),BE(t,r,c,h)||(Qr(h.element,r.highlightClass),r.onHighlight(t,h),ns(h,L0()))},$H=(t,r,c)=>{Yw(t,r).each(h=>{wb(t,r,c,h)})},cee=(t,r,c)=>{D4(t,r).each(h=>{wb(t,r,c,h)})},_4=(t,r,c,h)=>{zH(t,r,c,h).fold(b=>{throw b},b=>{wb(t,r,c,b)})},HH=(t,r,c,h)=>{const b=P4(t,r);Qe(b,h).each(C=>{wb(t,r,c,C)})},BE=(t,r,c,h)=>vi(h.element,r.highlightClass),VH=(t,r,c)=>Wr(t.element,"."+r.highlightClass).bind(h=>t.getSystem().getByDom(h).toOptional()),zH=(t,r,c,h)=>{const b=Oi(t.element,"."+r.itemClass);return O.from(b[h]).fold(()=>_o.error(new Error("No element found with index "+h)),t.getSystem().getByDom)},Yw=(t,r,c)=>Wr(t.element,"."+r.itemClass).bind(h=>t.getSystem().getByDom(h).toOptional()),D4=(t,r,c)=>{const h=Oi(t.element,"."+r.itemClass);return(h.length>0?O.some(h[h.length-1]):O.none()).bind(w=>t.getSystem().getByDom(w).toOptional())},M4=(t,r,c,h)=>{const b=Oi(t.element,"."+r.itemClass);return Bt(b,C=>vi(C,r.highlightClass)).bind(C=>{const A=wp(C,h,0,b.length-1);return t.getSystem().getByDom(b[A]).toOptional()})},UH=(t,r,c)=>M4(t,r,c,-1),WH=(t,r,c)=>M4(t,r,c,1),P4=(t,r,c)=>{const h=Oi(t.element,"."+r.itemClass);return hr(ue(h,b=>t.getSystem().getByDom(b).toOptional()))};var Kf=Object.freeze({__proto__:null,dehighlightAll:O4,dehighlight:LH,highlight:wb,highlightFirst:$H,highlightLast:cee,highlightAt:_4,highlightBy:HH,isHighlighted:BE,getHighlighted:VH,getFirst:Yw,getLast:D4,getPrevious:UH,getNext:WH,getCandidates:P4}),Xw=[Rt("highlightClass"),Rt("itemClass"),os("onHighlight"),os("onDehighlight")];const ps=Xi({fields:Xw,name:"highlighting",apis:Kf}),jH=[8],Yf=[9],Vd=[13],Jw=[27],Nl=[32],Qw=[37],zd=[38],og=[39],Ip=[40],R4=(t,r,c)=>{const h=Fe(t.slice(0,r)),b=Fe(t.slice(r+1));return Qe(h.concat(b),c)},ZH=(t,r,c)=>{const h=Fe(t.slice(0,r));return Qe(h,c)},FE=(t,r,c)=>{const h=t.slice(0,r),b=t.slice(r+1);return Qe(b.concat(h),c)},qH=(t,r,c)=>{const h=t.slice(r+1);return Qe(h,c)},rs=t=>r=>{const c=r.raw;return Ue(t,c.which)},hu=t=>r=>xe(t,c=>c(r)),Xf=t=>t.raw.shiftKey===!0,GH=t=>t.raw.ctrlKey===!0,Lp=le(Xf),fs=(t,r)=>({matches:t,classification:r}),KH=(t,r)=>Qe(t,h=>h.matches(r)).map(h=>h.classification),IE=(t,r,c)=>{r.exists(b=>c.exists(w=>vs(w,b)))||Hn(t,Qy(),{prevFocus:r,newFocus:c})},LE=()=>{const t=c=>cu(c.element);return{get:t,set:(c,h)=>{const b=t(c);c.getSystem().triggerFocus(h,c.element);const w=t(c);IE(c,b,w)}}},YH=()=>{const t=c=>ps.getHighlighted(c).map(h=>h.element);return{get:t,set:(c,h)=>{const b=t(c);c.getSystem().getByDom(h).fold(Z,C=>{ps.highlight(c,C)});const w=t(c);IE(c,b,w)}}};var Nh;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Nh||(Nh={}));const Bh=(t,r,c,h,b)=>{const w=()=>t.concat([tt("focusManager",LE()),Tl("focusInside","onFocus",T0(R=>Ue(["onFocus","onEnterOrSpace","onApi"],R)?_o.value(R):_o.error("Invalid value for focusInside"))),Ws("handler",_),Ws("state",r),Ws("sendFocusIn",b)]),C=(R,B,H,j,X)=>{const oe=H(R,B,j,X);return KH(oe,B.event).bind(Se=>Se(R,B,j,X))},_={schema:w,processKey:C,toEvents:(R,B)=>{const H=R.focusInside!==Nh.OnFocusMode?O.none():b(R).map(oe=>Dt(lp(),(Se,et)=>{oe(Se,R,B),et.stop()})),j=(oe,Se)=>{const et=rs(Nl.concat(Vd))(Se.event);R.focusInside===Nh.OnEnterOrSpaceMode&&et&&P0(oe,Se)&&b(R).each(He=>{He(oe,R,B),Se.stop()})},X=[Dt(qu(),(oe,Se)=>{C(oe,Se,c,R,B).fold(()=>{j(oe,Se)},et=>{Se.stop()})}),Dt(kh(),(oe,Se)=>{C(oe,Se,h,R,B).each(et=>{Se.stop()})})];return ir(H.toArray().concat(X))}};return _},xb=t=>{const r=[Ds("onEscape"),Ds("onEnter"),tt("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),tt("firstTabstop",0),tt("useTabstopAt",ge),Ds("visibilitySelector")].concat([t]),c=(He,Pe)=>{const Je=He.visibilitySelector.bind(It=>Ju(Pe,It)).getOr(Pe);return rr(Je)>0},h=(He,Pe)=>{const Je=Oi(He.element,Pe.selector),It=un(Je,At=>c(Pe,At));return O.from(It[Pe.firstTabstop])},b=(He,Pe)=>Pe.focusManager.get(He).bind(Je=>Ju(Je,Pe.selector)),w=(He,Pe)=>c(He,Pe)&&He.useTabstopAt(Pe),C=(He,Pe,Je)=>{h(He,Pe).each(It=>{Pe.focusManager.set(He,It)})},A=(He,Pe,Je,It,At)=>At(Pe,Je,Ct=>w(It,Ct)).fold(()=>It.cyclic?O.some(!0):O.none(),Ct=>(It.focusManager.set(He,Ct),O.some(!0))),_=(He,Pe,Je,It)=>{const At=Oi(He.element,Je.selector);return b(He,Je).bind(Ct=>Bt(At,$e(vs,Ct)).bind(Jt=>A(He,At,Jt,Je,It)))},R=(He,Pe,Je)=>{const It=Je.cyclic?R4:ZH;return _(He,Pe,Je,It)},B=(He,Pe,Je)=>{const It=Je.cyclic?FE:qH;return _(He,Pe,Je,It)},H=He=>Tc(He).bind(Oc).exists(Pe=>vs(Pe,He)),j=(He,Pe,Je)=>b(He,Je).filter(It=>!Je.useTabstopAt(It)).bind(It=>(H(It)?R:B)(He,Pe,Je)),X=(He,Pe,Je)=>Je.onEnter.bind(It=>It(He,Pe)),oe=(He,Pe,Je)=>Je.onEscape.bind(It=>It(He,Pe)),Se=G([fs(hu([Xf,rs(Yf)]),R),fs(rs(Yf),B),fs(hu([Lp,rs(Vd)]),X)]),et=G([fs(rs(Jw),oe),fs(rs(Yf),j)]);return Bh(r,Xu.init,Se,et,()=>O.some(C))};var ex=xb(Xr("cyclic",ne)),tx=xb(Xr("cyclic",ge));const sg=(t,r,c)=>(nk(t,c,sc()),O.some(!0)),nx=(t,r,c)=>tg(c)&&rs(Nl)(r.event)?O.none():sg(t,r,c),$p=(t,r)=>O.some(!0),XH=[tt("execute",nx),tt("useSpace",!1),tt("useEnter",!0),tt("useControlEnter",!1),tt("useDown",!1)],$E=(t,r,c)=>c.execute(t,r,t.element),N4=(t,r,c,h)=>{const b=c.useSpace&&!tg(t.element)?Nl:[],w=c.useEnter?Vd:[],C=c.useDown?Ip:[],A=b.concat(w).concat(C);return[fs(rs(A),$E)].concat(c.useControlEnter?[fs(hu([GH,rs(Vd)]),$E)]:[])},JH=(t,r,c,h)=>c.useSpace&&!tg(t.element)?[fs(rs(Nl),$p)]:[];var uee=Bh(XH,Xu.init,N4,JH,()=>O.none());const QH=()=>{const t=or();return rc({readState:()=>t.get().map(b=>({numRows:String(b.numRows),numColumns:String(b.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(b,w)=>{t.set({numRows:b,numColumns:w})},getNumRows:()=>t.get().map(b=>b.numRows),getNumColumns:()=>t.get().map(b=>b.numColumns)})};var e9=Object.freeze({__proto__:null,flatgrid:QH,init:t=>t.state(t)});const ox=t=>(r,c,h,b)=>{const w=t(r.element);return UE(w,r,c,h,b)},HE=(t,r)=>{const c=qk(t,r);return ox(c)},VE=(t,r)=>{const c=qk(r,t);return ox(c)},zE=t=>(r,c,h,b)=>UE(t,r,c,h,b),UE=(t,r,c,h,b)=>h.focusManager.get(r).bind(C=>t(r.element,C,h,b)).map(C=>(h.focusManager.set(r,C),!0)),B4=zE,F4=zE,Cb=zE,I4=t=>t.offsetWidth<=0&&t.offsetHeight<=0,L4=t=>!I4(t.dom),$4=(t,r)=>Bt(t,r).map(c=>({index:c,candidates:t})),H4=(t,r,c)=>{const h=C=>vs(C,r),b=Oi(t,c),w=un(b,L4);return $4(w,h)},sx=(t,r)=>Bt(t,c=>vs(r,c)),WE=(t,r,c,h)=>{const b=Math.floor(r/c),w=r%c;return h(b,w).bind(C=>{const A=C.row*c+C.column;return A>=0&&A<t.length?O.some(t[A]):O.none()})},jE=(t,r,c,h,b)=>WE(t,r,h,(w,C)=>{const _=w===c-1?t.length-w*h:h,R=wp(C,b,0,_-1);return O.some({row:w,column:R})}),ZE=(t,r,c,h,b)=>WE(t,r,h,(w,C)=>{const A=wp(w,b,0,c-1),R=A===c-1?t.length-A*h:h,B=ac(C,0,R-1);return O.some({row:A,column:B})}),t9=(t,r,c,h)=>jE(t,r,c,h,1),n9=(t,r,c,h)=>jE(t,r,c,h,-1),o9=(t,r,c,h)=>ZE(t,r,c,h,-1),s9=(t,r,c,h)=>ZE(t,r,c,h,1),r9=[Rt("selector"),tt("execute",nx),_l("onEscape"),tt("captureTab",!1),Ck()],Sb=(t,r,c)=>{Wr(t.element,r.selector).each(h=>{r.focusManager.set(t,h)})},V4=(t,r)=>r.focusManager.get(t).bind(c=>Ju(c,r.selector)),z4=(t,r,c,h)=>V4(t,c).bind(b=>c.execute(t,r,b)),Hp=t=>(r,c,h,b)=>H4(r,c,h.selector).bind(w=>t(w.candidates,w.index,b.getNumRows().getOr(h.initSize.numRows),b.getNumColumns().getOr(h.initSize.numColumns))),U4=(t,r,c)=>c.captureTab?O.some(!0):O.none(),W4=(t,r,c)=>c.onEscape(t,r),j4=Hp(n9),qE=Hp(t9),Z4=Hp(o9),i9=Hp(s9),a9=G([fs(rs(Qw),HE(j4,qE)),fs(rs(og),VE(j4,qE)),fs(rs(zd),B4(Z4)),fs(rs(Ip),F4(i9)),fs(hu([Xf,rs(Yf)]),U4),fs(hu([Lp,rs(Yf)]),U4),fs(rs(Nl.concat(Vd)),z4)]),l9=G([fs(rs(Jw),W4),fs(rs(Nl),$p)]);var c9=Bh(r9,QH,a9,l9,()=>O.some(Sb));const q4=(t,r,c,h,b)=>{const w=A=>Os(A)==="button"&&$r(A,"disabled")==="disabled",C=(A,_,R)=>b(A,_,h,0,R.length-1,R[_],B=>w(R[B])?C(A,B,R):O.from(R[B]));return H4(t,c,r).bind(A=>{const _=A.index,R=A.candidates;return C(_,_,R)})},G4=(t,r,c,h)=>q4(t,r,c,h,(b,w,C,A,_,R,B)=>{const H=ac(w+C,A,_);return H===b?O.from(R):B(H)}),Vp=(t,r,c,h)=>q4(t,r,c,h,(b,w,C,A,_,R,B)=>{const H=wp(w,C,A,_);return H===b?O.none():B(H)}),GE=[Rt("selector"),tt("getInitial",O.none),tt("execute",nx),_l("onEscape"),tt("executeOnMove",!1),tt("allowVertical",!0),tt("allowHorizontal",!0),tt("cycles",!0)],u9=(t,r)=>r.focusManager.get(t).bind(c=>Ju(c,r.selector)),K4=(t,r,c)=>u9(t,c).bind(h=>c.execute(t,r,h)),Y4=(t,r,c)=>{r.getInitial(t).orThunk(()=>Wr(t.element,r.selector)).each(h=>{r.focusManager.set(t,h)})},X4=(t,r,c)=>(c.cycles?Vp:G4)(t,c.selector,r,-1),J4=(t,r,c)=>(c.cycles?Vp:G4)(t,c.selector,r,1),hc=t=>(r,c,h,b)=>t(r,c,h,b).bind(()=>h.executeOnMove?K4(r,c,h):O.some(!0)),d9=(t,r,c)=>c.onEscape(t,r),f9=(t,r,c,h)=>{const b=[...c.allowHorizontal?Qw:[]].concat(c.allowVertical?zd:[]),w=[...c.allowHorizontal?og:[]].concat(c.allowVertical?Ip:[]);return[fs(rs(b),hc(HE(X4,J4))),fs(rs(w),hc(VE(X4,J4))),fs(rs(Vd),K4),fs(rs(Nl),K4)]},h9=G([fs(rs(Nl),$p),fs(rs(Jw),d9)]);var m9=Bh(GE,Xu.init,f9,h9,()=>O.some(Y4));const rx=(t,r,c)=>O.from(t[r]).bind(h=>O.from(h[c]).map(b=>({rowIndex:r,columnIndex:c,cell:b}))),rg=(t,r,c,h)=>{const w=t[r].length,C=wp(c,h,0,w-1);return rx(t,r,C)},ix=(t,r,c,h)=>{const b=wp(c,h,0,t.length-1),w=t[b].length,C=ac(r,0,w-1);return rx(t,b,C)},Q4=(t,r,c,h)=>{const w=t[r].length,C=ac(c+h,0,w-1);return rx(t,r,C)},ax=(t,r,c,h)=>{const b=ac(c+h,0,t.length-1),w=t[b].length,C=ac(r,0,w-1);return rx(t,b,C)},lx=(t,r,c)=>rg(t,r,c,1),KE=(t,r,c)=>rg(t,r,c,-1),g9=(t,r,c)=>ix(t,c,r,-1),p9=(t,r,c)=>ix(t,c,r,1),b9=(t,r,c)=>Q4(t,r,c,-1),v9=(t,r,c)=>Q4(t,r,c,1),y9=(t,r,c)=>ax(t,c,r,-1),w9=(t,r,c)=>ax(t,c,r,1),eP=[ju("selectors",[Rt("row"),Rt("cell")]),tt("cycles",!0),tt("previousSelector",O.none),tt("execute",nx)],YE=(t,r,c)=>{r.previousSelector(t).orThunk(()=>{const b=r.selectors;return Wr(t.element,b.cell)}).each(b=>{r.focusManager.set(t,b)})},x9=(t,r,c)=>cu(t.element).bind(h=>c.execute(t,r,h)),C9=(t,r)=>ue(t,c=>Oi(c,r.selectors.cell)),cx=(t,r)=>(c,h,b)=>{const w=b.cycles?t:r;return Ju(h,b.selectors.row).bind(C=>{const A=Oi(C,b.selectors.cell);return sx(A,h).bind(_=>{const R=Oi(c,b.selectors.row);return sx(R,C).bind(B=>{const H=C9(R,b);return w(H,B,_).map(j=>j.cell)})})})},tP=cx(KE,b9),Fh=cx(lx,v9),nP=cx(g9,y9),S9=cx(p9,w9),XE=G([fs(rs(Qw),HE(tP,Fh)),fs(rs(og),VE(tP,Fh)),fs(rs(zd),B4(nP)),fs(rs(Ip),F4(S9)),fs(rs(Nl.concat(Vd)),x9)]),k9=G([fs(rs(Nl),$p)]);var oP=Bh(eP,Xu.init,XE,k9,()=>O.some(YE));const sP=[Rt("selector"),tt("execute",nx),tt("moveOnTab",!1)],JE=(t,r,c)=>c.focusManager.get(t).bind(h=>c.execute(t,r,h)),rP=(t,r,c)=>{Wr(t.element,r.selector).each(h=>{r.focusManager.set(t,h)})},QE=(t,r,c)=>Vp(t,c.selector,r,-1),iP=(t,r,c)=>Vp(t,c.selector,r,1),E9=(t,r,c,h)=>c.moveOnTab?Cb(QE)(t,r,c,h):O.none(),A9=(t,r,c,h)=>c.moveOnTab?Cb(iP)(t,r,c,h):O.none(),eA=G([fs(rs(zd),Cb(QE)),fs(rs(Ip),Cb(iP)),fs(hu([Xf,rs(Yf)]),E9),fs(hu([Lp,rs(Yf)]),A9),fs(rs(Vd),JE),fs(rs(Nl),JE)]),T9=G([fs(rs(Nl),$p)]);var O9=Bh(sP,Xu.init,eA,T9,()=>O.some(rP));const _9=[_l("onSpace"),_l("onEnter"),_l("onShiftEnter"),_l("onLeft"),_l("onRight"),_l("onTab"),_l("onShiftTab"),_l("onUp"),_l("onDown"),_l("onEscape"),tt("stopSpaceKeyup",!1),Ds("focusIn")],D9=(t,r,c)=>[fs(rs(Nl),c.onSpace),fs(hu([Lp,rs(Vd)]),c.onEnter),fs(hu([Xf,rs(Vd)]),c.onShiftEnter),fs(hu([Xf,rs(Yf)]),c.onShiftTab),fs(hu([Lp,rs(Yf)]),c.onTab),fs(rs(zd),c.onUp),fs(rs(Ip),c.onDown),fs(rs(Qw),c.onLeft),fs(rs(og),c.onRight),fs(rs(Nl),c.onSpace)],aP=(t,r,c)=>[...c.stopSpaceKeyup?[fs(rs(Nl),$p)]:[],fs(rs(Jw),c.onEscape)];var M9=Bh(_9,Xu.init,D9,aP,t=>t.focusIn);const P9=ex.schema(),R9=tx.schema(),lP=m9.schema(),N9=c9.schema(),B9=oP.schema(),cP=uee.schema(),F9=O9.schema(),I9=M9.schema();var ux=Object.freeze({__proto__:null,acyclic:P9,cyclic:R9,flow:lP,flatgrid:N9,matrix:B9,execution:cP,menu:F9,special:I9});const L9=t=>Js(t,"setGridSize"),Fn=Fk({branchKey:"mode",branches:ux,name:"keying",active:{events:(t,r)=>t.handler.toEvents(t,r)},apis:{focusIn:(t,r,c)=>{r.sendFocusIn(r).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},h=>{h(t,r,c)})},setGridSize:(t,r,c,h,b)=>{L9(c)&&c.setGridSize(h,b)}},state:e9}),$a=(t,r)=>{fn(()=>{iH(t,r,()=>ue(r,t.getSystem().build))},t.element)},uP=(t,r)=>{fn(()=>{aH(t,r,()=>QQ(t.element,r,t.getSystem().buildOrPatch))},t.element)},dP=(t,r,c,h)=>{rE(r);const b=$8(t.element,c,h,t.getSystem().buildOrPatch);sE(t,b),t.syncComponents()},dx=(t,r,c)=>{const h=t.getSystem().build(c);iE(t,h,r)},$9=(t,r,c,h)=>{Wf(r),dx(t,(b,w)=>pi(b,w,c),h)},fP=(t,r,c,h)=>(r.reuseDom?uP:$a)(t,h),hP=(t,r,c,h)=>{dx(t,Ma,h)},H9=(t,r,c,h)=>{dx(t,Ly,h)},V9=(t,r,c,h)=>{const b=fx(t);Qe(b,C=>vs(h.element,C.element)).each(Wf)},fx=(t,r)=>t.components(),mP=(t,r,c,h,b)=>{const w=fx(t);return O.from(w[h]).map(C=>(b.fold(()=>Wf(C),A=>{(r.reuseDom?dP:$9)(t,C,h,A)}),C))};var U9=Object.freeze({__proto__:null,append:hP,prepend:H9,remove:V9,replaceAt:mP,replaceBy:(t,r,c,h,b)=>{const w=fx(t);return Bt(w,h).bind(C=>mP(t,r,c,C,b))},set:fP,contents:fx});const vo=Xi({fields:[Li("reuseDom",!0)],name:"replacing",apis:U9}),gP=(t,r)=>{const c=ir(r);return Xi({fields:[Rt("enabled")],name:t,active:{events:G(c)}})},Eo=(t,r)=>{const c=gP(t,r);return{key:t,value:{config:{},me:c,configAsRaw:G({}),initialConfig:{},state:Xu}}},tA=(t,r)=>{r.ignore||(lc(t.element),r.onFocus(t))};var W9=Object.freeze({__proto__:null,focus:tA,blur:(t,r)=>{r.ignore||Ik(t.element)},isFocused:t=>Q0(t.element)}),pP=Object.freeze({__proto__:null,exhibit:(t,r)=>{const c=r.ignore?{}:{attributes:{tabindex:"-1"}};return iu(c)},events:t=>ir([Dt(lp(),(r,c)=>{tA(r,t),c.stop()})].concat(t.stopMousedown?[Dt(bi(),(r,c)=>{c.event.prevent()})]:[]))}),Ih=[os("onFocus"),tt("stopMousedown",!1),tt("ignore",!1)];const Jn=Xi({fields:Ih,name:"focusing",active:pP,apis:W9}),bP=t=>({init:()=>{const c=qn(t);return{get:()=>c.get(),set:A=>c.set(A),clear:()=>c.set(t),readState:()=>c.get()}}}),nA=(t,r,c)=>{const h=r.aria;h.update(t,h,c.get())},Z9=(t,r,c)=>{r.toggleClass.each(h=>{c.get()?Qr(t.element,h):br(t.element,h)})},kb=(t,r,c,h)=>{const b=c.get();c.set(h),Z9(t,r,c),nA(t,r,c),b!==h&&r.onToggled(t,h)},vP=(t,r,c)=>{kb(t,r,c,!c.get())},q9=(t,r,c)=>{kb(t,r,c,!0)},yP=(t,r,c)=>{kb(t,r,c,!1)},oA=(t,r,c)=>c.get(),hx=(t,r,c)=>{kb(t,r,c,r.selected)};var G9=Object.freeze({__proto__:null,onLoad:hx,toggle:vP,isOn:oA,on:q9,off:yP,set:kb}),wP=Object.freeze({__proto__:null,exhibit:()=>iu({}),events:(t,r)=>{const c=Bk(t,r,vP),h=kw(t,r,hx);return ir(nt([t.toggleOnExecute?[c]:[],[h]]))}});const Y9=(t,r,c)=>{on(t.element,"aria-pressed",c),r.syncWithExpanded&&zp(t,r,c)},X9=(t,r,c)=>{on(t.element,"aria-selected",c)},Eb=(t,r,c)=>{on(t.element,"aria-checked",c)},zp=(t,r,c)=>{on(t.element,"aria-expanded",c)};var xP=[tt("selected",!1),Ds("toggleClass"),tt("toggleOnExecute",!0),os("onToggled"),Tl("aria",{mode:"none"},gs("mode",{pressed:[tt("syncWithExpanded",!1),Ws("update",Y9)],checked:[Ws("update",Eb)],expanded:[Ws("update",zp)],selected:[Ws("update",X9)],none:[Ws("update",Z)]}))];const Ro=Xi({fields:xP,name:"toggling",active:wP,apis:G9,state:bP(!1)}),Jf=()=>{const t=(r,c)=>{c.stop(),Rf(r)};return[Dt(Eh(),t),Dt(Gu(),t),Nf(Df()),Nf(bi())]},od=t=>{const r=c=>Ff((h,b)=>{c(h),b.stop()});return ir(nt([t.map(r).toArray(),Jf()]))},CP="alloy.item-hover",SP="alloy.item-focus",sA="alloy.item-toggled",Ud=t=>{(cu(t.element).isNone()||Jn.isFocused(t))&&(Jn.isFocused(t)||Jn.focus(t),Hn(t,CP,{item:t}))},mx=t=>{Hn(t,SP,{item:t})},J9=(t,r)=>{Hn(t,sA,{item:t,state:r})},rA=G(CP),kP=G(SP),EP=G(sA),iA=t=>t.toggling.map(r=>r.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),AP=t=>Ot(ie({aria:{mode:"checked"}},lo(t,(r,c)=>c!=="exclusive")),{onToggled:(r,c)=>{J(t.onToggled)&&t.onToggled(r,c),J9(r,c)}}),Q9=t=>({dom:t.dom,domModification:Ot(ie({},t.domModification),{attributes:ie(Ot(ie({role:iA(t)},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:du.augment(t.itemBehaviours,[t.toggling.fold(Ro.revoke,r=>Ro.config(AP(r))),Jn.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:r=>{mx(r)}}),Fn.config({mode:"execution"}),ln.config({store:{mode:"memory",initialValue:t.data}}),Eo("item-type-events",[...Jf(),Dt(Mf(),Ud),Dt(Mr(),Jn.focus)])]),components:t.components,eventOrder:t.eventOrder}),eV=[Rt("data"),Rt("components"),Rt("dom"),tt("hasSubmenu",!1),Ds("toggling"),du.field("itemBehaviours",[Ro,Jn,Fn,ln]),tt("ignoreFocus",!1),tt("domModification",{}),Ws("builder",Q9),tt("eventOrder",{})],tV=t=>({dom:t.dom,components:t.components,events:ir([g8(Mr())])}),gx=[Rt("dom"),Rt("components"),Ws("builder",tV)],Ab=G("item-widget"),Tb=G([Ca({name:"widget",overrides:t=>({behaviours:Kt([ln.config({store:{mode:"manual",getValue:r=>t.data,setValue:Z}})])})})]),nV=t=>{const r=OE(Ab(),t,Tb()),c=Gw(Ab(),t,r.internals()),h=w=>js(w,t,"widget").map(C=>(Fn.focusIn(C),C)),b=(w,C)=>tg(C.event.target)?O.none():(t.autofocus&&C.setSource(w.element),O.none());return{dom:t.dom,components:c,domModification:t.domModification,events:ir([Ff((w,C)=>{h(w).each(A=>{C.stop()})}),Dt(Mf(),Ud),Dt(Mr(),(w,C)=>{t.autofocus?h(w):Jn.focus(w)})]),behaviours:du.augment(t.widgetBehaviours,[ln.config({store:{mode:"memory",initialValue:t.data}}),Jn.config({ignore:t.ignoreFocus,onFocus:w=>{mx(w)}}),Fn.config({mode:"special",focusIn:t.autofocus?w=>{h(w)}:f3(),onLeft:b,onRight:b,onEscape:(w,C)=>!Jn.isFocused(w)&&!t.autofocus?(Jn.focus(w),O.some(!0)):(t.autofocus&&C.setSource(w.element),O.none())})])}},oV=[Rt("uid"),Rt("data"),Rt("components"),Rt("dom"),tt("autofocus",!1),tt("ignoreFocus",!1),du.field("widgetBehaviours",[ln,Jn,Fn]),tt("domModification",{}),ME(Tb()),Ws("builder",nV)],TP=gs("type",{widget:oV,item:eV,separator:gx}),OP=(t,r)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:r.initSize.numColumns,numRows:r.initSize.numRows},focusManager:t.focusManager}),_P=(t,r)=>({mode:"matrix",selectors:{row:r.rowSelector,cell:"."+t.markers.item},previousSelector:r.previousSelector,focusManager:t.focusManager}),DP=(t,r)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:r.moveOnTab,focusManager:t.focusManager}),sV=G([bb({factory:{sketch:t=>{const r=Ya("menu.spec item",TP,t);return r.builder(r)}},name:"items",unit:"item",defaults:(t,r)=>So(r,"uid")?r:Ot(ie({},r),{uid:dp("item")}),overrides:(t,r)=>({type:r.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),aA=G([Rt("value"),Rt("items"),Rt("dom"),Rt("components"),tt("eventOrder",{}),yi("menuBehaviours",[ps,ln,qo,Fn]),Tl("movement",{mode:"menu",moveOnTab:!0},gs("mode",{grid:[Ck(),Ws("config",OP)],matrix:[Ws("config",_P),Rt("rowSelector"),tt("previousSelector",O.none)],menu:[tt("moveOnTab",!0),Ws("config",DP)]})),G8(),tt("fakeFocus",!1),tt("focusManager",LE()),os("onHighlight"),os("onDehighlight")]),MP=G("alloy.menu-focus"),rV=(t,r)=>{const c=Oi(t.element,'[role="menuitemradio"][aria-checked="true"]');je(c,h=>{vs(h,r.element)||t.getSystem().getByDom(h).each(b=>{Ro.off(b)})})},iV=(t,r,c,h)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:_i(t.menuBehaviours,[ps.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),ln.config({store:{mode:"memory",initialValue:t.value}}),qo.config({find:O.some}),Fn.config(t.movement.config(t,t.movement))]),events:ir([Dt(kP(),(b,w)=>{const C=w.event;b.getSystem().getByDom(C.target).each(A=>{ps.highlight(b,A),w.stop(),Hn(b,MP(),{menu:b,item:A})})}),Dt(rA(),(b,w)=>{const C=w.event.item;ps.highlight(b,C)}),Dt(EP(),(b,w)=>{const{item:C,state:A}=w.event;A&&$r(C.element,"role")==="menuitemradio"&&rV(b,C)})]),components:r,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),ag=Sa({name:"Menu",configFields:aA(),partFields:sV(),factory:iV}),PP=t=>Pt(t,(r,c)=>({k:r,v:c})),RP=(t,r,c,h)=>$t(c,h).bind(b=>$t(t,b).bind(w=>{const C=RP(t,r,c,w);return O.some([w].concat(C))})).getOr([]),aV=(t,r)=>{const c={};Xe(t,(C,A)=>{je(C,_=>{c[_]=A})});const h=r,b=PP(r),w=pt(b,(C,A)=>[A].concat(RP(c,h,b,A)));return pt(c,C=>$t(w,C).getOr([C]))},NP=()=>{const t=qn({}),r=qn({}),c=qn({}),h=or(),b=qn({}),w=()=>{t.set({}),r.set({}),c.set({}),h.clear()},C=()=>h.get().isNone(),A=(At,Ct)=>{r.set(Ot(ie({},r.get()),{[At]:{type:"prepared",menu:Ct}}))},_=(At,Ct,Zt,Jt)=>{h.set(At),t.set(Zt),r.set(Ct),b.set(Jt);const Ao=aV(Jt,Zt);c.set(Ao)},R=At=>Bo(t.get(),(Ct,Zt)=>Ct===At),B=(At,Ct,Zt)=>Se(At).bind(Jt=>R(At).bind(Ao=>Ct(Ao).map(hn=>({triggeredMenu:Jt,triggeringItem:hn,triggeringPath:Zt})))),H=(At,Ct)=>{const Zt=un(He(At).toArray(),Jt=>Se(Jt).isSome());return $t(c.get(),At).bind(Jt=>{const Ao=Fe(Zt.concat(Jt)),hn=de(Ao,(ro,eo)=>B(ro,Ct,Ao.slice(0,eo+1)).fold(()=>wr(h.get(),ro)?[]:[O.none()],Cs=>[O.some(Cs)]));return di(hn)})},j=At=>$t(t.get(),At).map(Ct=>{const Zt=$t(c.get(),At).getOr([]);return[Ct].concat(Zt)}),X=At=>$t(c.get(),At).bind(Ct=>Ct.length>1?O.some(Ct.slice(1)):O.none()),oe=At=>$t(c.get(),At),Se=At=>et(At).bind(Up),et=At=>$t(r.get(),At),He=At=>$t(t.get(),At);return{setMenuBuilt:A,setContents:_,expand:j,refresh:oe,collapse:X,lookupMenu:et,lookupItem:He,otherMenus:At=>{const Ct=b.get();return Ne(Yn(Ct),At)},getPrimary:()=>h.get().bind(Se),getMenus:()=>r.get(),clear:w,isClear:C,getTriggeringPath:H}},Up=t=>t.type==="prepared"?O.some(t.menu):O.none(),BP={init:NP,extractPreparedMenu:Up},Wp=bn("tiered-menu-item-highlight"),px=bn("tiered-menu-item-dehighlight");var Ha;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(Ha||(Ha={}));const FP=(t,r)=>{const c=or(),h=(Qt,wn,io)=>pt(io,(fo,Un)=>{const yo=()=>ag.sketch(Ot(ie({},fo),{value:Un,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Ls,is)=>{Hn(Ls,Wp,{menuComp:Ls,itemComp:is})},onDehighlight:(Ls,is)=>{Hn(Ls,px,{menuComp:Ls,itemComp:is})},focusManager:t.fakeFocus?YH():LE()}));return Un===wn?{type:"prepared",menu:Qt.getSystem().build(yo())}:{type:"notbuilt",nbMenu:yo}}),b=BP.init(),w=Qt=>{const wn=h(Qt,t.data.primary,t.data.menus),io=_();return b.setContents(t.data.primary,wn,t.data.expansions,io),b.getPrimary()},C=Qt=>ln.getValue(Qt).value,A=(Qt,wn,io)=>ao(wn,fo=>{if(!fo.getSystem().isConnected())return O.none();const Un=ps.getCandidates(fo);return Qe(Un,yo=>C(yo)===io)}),_=Qt=>pt(t.data.menus,(wn,io)=>de(wn.items,fo=>fo.type==="separator"?[]:[fo.data.value])),R=ps.highlight,B=(Qt,wn)=>{R(Qt,wn),ps.getHighlighted(wn).orThunk(()=>ps.getFirst(wn)).each(io=>{t.fakeFocus?ps.highlight(wn,io):nk(Qt,io.element,Mr())})},H=(Qt,wn)=>hr(ue(wn,io=>Qt.lookupMenu(io).bind(fo=>fo.type==="prepared"?O.some(fo.menu):O.none()))),j=(Qt,wn,io)=>{const fo=H(wn,wn.otherMenus(io));je(fo,Un=>{au(Un.element,[t.markers.backgroundMenu]),t.stayInDom||vo.remove(Qt,Un)})},X=Qt=>c.get().getOrThunk(()=>{const wn={},io=Oi(Qt.element,`.${t.markers.item}`),fo=un(io,Un=>$r(Un,"aria-haspopup")==="true");return je(fo,Un=>{Qt.getSystem().getByDom(Un).each(yo=>{const Ls=C(yo);wn[Ls]=yo})}),c.set(wn),wn}),oe=(Qt,wn)=>{const io=X(Qt);Xe(io,(fo,Un)=>{const yo=Ue(wn,Un);on(fo.element,"aria-expanded",yo)})},Se=(Qt,wn,io)=>O.from(io[0]).bind(fo=>wn.lookupMenu(fo).bind(Un=>{if(Un.type==="notbuilt")return O.none();{const yo=Un.menu,Ls=H(wn,io.slice(1));return je(Ls,is=>{Qr(is.element,t.markers.backgroundMenu)}),Wo(yo.element)||vo.append(Qt,Pc(yo)),au(yo.element,[t.markers.backgroundMenu]),B(Qt,yo),j(Qt,wn,io),O.some(yo)}}));let et;(function(Qt){Qt[Qt.HighlightSubmenu=0]="HighlightSubmenu",Qt[Qt.HighlightParent=1]="HighlightParent"})(et||(et={}));const He=(Qt,wn,io)=>{if(io.type==="notbuilt"){const fo=Qt.getSystem().build(io.nbMenu());return b.setMenuBuilt(wn,fo),fo}else return io.menu},Pe=(Qt,wn,io=et.HighlightSubmenu)=>{if(wn.hasConfigured(Gn)&&Gn.isDisabled(wn))return O.some(wn);{const fo=C(wn);return b.expand(fo).bind(Un=>(oe(Qt,Un),O.from(Un[0]).bind(yo=>b.lookupMenu(yo).bind(Ls=>{const is=He(Qt,yo,Ls);return Wo(is.element)||vo.append(Qt,Pc(is)),t.onOpenSubmenu(Qt,wn,is,Fe(Un)),io===et.HighlightSubmenu?(ps.highlightFirst(is),Se(Qt,b,Un)):(ps.dehighlightAll(is),O.some(wn))}))))}},Je=(Qt,wn)=>{const io=C(wn);return b.collapse(io).bind(fo=>(oe(Qt,fo),Se(Qt,b,fo).map(Un=>(t.onCollapseMenu(Qt,wn,Un),Un))))},It=(Qt,wn)=>{const io=C(wn);return b.refresh(io).bind(fo=>(oe(Qt,fo),Se(Qt,b,fo)))},At=(Qt,wn)=>tg(wn.element)?O.none():Pe(Qt,wn,et.HighlightSubmenu),Ct=(Qt,wn)=>tg(wn.element)?O.none():Je(Qt,wn),Zt=(Qt,wn)=>Je(Qt,wn).orThunk(()=>t.onEscape(Qt,wn).map(()=>Qt)),Jt=Qt=>(wn,io)=>Ju(io.getSource(),`.${t.markers.item}`).bind(fo=>wn.getSystem().getByDom(fo).toOptional().bind(Un=>Qt(wn,Un).map(ge))),Ao=ir([Dt(MP(),(Qt,wn)=>{const io=wn.event.item;b.lookupItem(C(io)).each(()=>{const fo=wn.event.menu;ps.highlight(Qt,fo);const Un=C(wn.event.item);b.refresh(Un).each(yo=>j(Qt,b,yo))})}),Ff((Qt,wn)=>{const io=wn.event.target;Qt.getSystem().getByDom(io).each(fo=>{C(fo).indexOf("collapse-item")===0&&Je(Qt,fo),Pe(Qt,fo,et.HighlightSubmenu).fold(()=>{t.onExecute(Qt,fo)},Z)})}),tr((Qt,wn)=>{w(Qt).each(io=>{vo.append(Qt,Pc(io)),t.onOpenMenu(Qt,io),t.highlightOnOpen===Ha.HighlightMenuAndItem?B(Qt,io):t.highlightOnOpen===Ha.HighlightJustMenu&&R(Qt,io)})}),Dt(Wp,(Qt,wn)=>{t.onHighlightItem(Qt,wn.event.menuComp,wn.event.itemComp)}),Dt(px,(Qt,wn)=>{t.onDehighlightItem(Qt,wn.event.menuComp,wn.event.itemComp)}),...t.navigateOnHover?[Dt(rA(),(Qt,wn)=>{const io=wn.event.item;It(Qt,io),Pe(Qt,io,et.HighlightParent),t.onHover(Qt,io)})]:[]]),hn=Qt=>ps.getHighlighted(Qt).bind(ps.getHighlighted),ro=Qt=>{hn(Qt).each(wn=>{Je(Qt,wn)})},eo=Qt=>{b.getPrimary().each(wn=>{B(Qt,wn)})},Cs=Qt=>O.from(Qt.components()[0]).filter(wn=>$r(wn.element,"role")==="menu"),Jo={collapseMenu:ro,highlightPrimary:eo,repositionMenus:Qt=>{b.getPrimary().bind(io=>hn(Qt).bind(fo=>{const Un=C(fo),yo=cs(b.getMenus()),Ls=hr(ue(yo,BP.extractPreparedMenu));return b.getTriggeringPath(Un,is=>A(Qt,Ls,is))}).map(fo=>({primary:io,triggeringPath:fo}))).fold(()=>{Cs(Qt).each(io=>{t.onRepositionMenu(Qt,io,[])})},({primary:io,triggeringPath:fo})=>{t.onRepositionMenu(Qt,io,fo)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:_i(t.tmenuBehaviours,[Fn.config({mode:"special",onRight:Jt(At),onLeft:Jt(Ct),onEscape:Jt(Zt),focusIn:(Qt,wn)=>{b.getPrimary().each(io=>{nk(Qt,io.element,Mr())})}}),ps.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),qo.config({find:Qt=>ps.getHighlighted(Qt)}),vo.config({})]),eventOrder:t.eventOrder,apis:Jo,events:Ao}},lV=G("collapse-item"),cV=(t,r,c)=>({primary:t,menus:r,expansions:c}),IP=(t,r)=>({primary:t,menus:oc(t,r),expansions:{}}),uV=t=>({value:bn(lV()),meta:{text:t}}),Lh=Rl({name:"TieredMenu",configFields:[xk("onExecute"),xk("onEscape"),Qu("onOpenMenu"),Qu("onOpenSubmenu"),os("onRepositionMenu"),os("onCollapseMenu"),tt("highlightOnOpen",Ha.HighlightMenuAndItem),ju("data",[Rt("primary"),Rt("menus"),Rt("expansions")]),tt("fakeFocus",!1),os("onHighlightItem"),os("onDehighlightItem"),os("onHover"),pw(),Rt("dom"),tt("navigateOnHover",!0),tt("stayInDom",!1),yi("tmenuBehaviours",[Fn,ps,qo,vo]),tt("eventOrder",{})],apis:{collapseMenu:(t,r)=>{t.collapseMenu(r)},highlightPrimary:(t,r)=>{t.highlightPrimary(r)},repositionMenus:(t,r)=>{t.repositionMenus(r)}},factory:FP,extraApis:{tieredData:cV,singleData:IP,collapseItem:uV}}),dV=(t,r,c,h,b)=>{const w=()=>t.lazySink(r),C=h.type==="horizontal"?{layouts:{onLtr:()=>Sw(),onRtl:()=>Nk()}}:{},A=R=>R.length===2,_=R=>A(R)?C:{};return Lh.sketch({dom:{tag:"div"},data:h.data,markers:h.menu.markers,highlightOnOpen:h.menu.highlightOnOpen,fakeFocus:h.menu.fakeFocus,onEscape:()=>(ss.close(r),t.onEscape.map(R=>R(r)),O.some(!0)),onExecute:()=>O.some(!0),onOpenMenu:(R,B)=>{xa.positionWithinBounds(w().getOrDie(),B,c,b())},onOpenSubmenu:(R,B,H,j)=>{const X=w().getOrDie();xa.position(X,H,{anchor:ie({type:"submenu",item:B},_(j))})},onRepositionMenu:(R,B,H)=>{const j=w().getOrDie();xa.positionWithinBounds(j,B,c,b()),je(H,X=>{const oe=_(X.triggeringPath);xa.position(j,X.triggeredMenu,{anchor:ie({type:"submenu",item:X.triggeringItem},oe)})})}})},fV=(t,r)=>{const c=(j,X)=>t.getRelated(j).exists(Se=>Oh(Se,X)),h=(j,X)=>{ss.setContent(j,X)},b=(j,X,oe)=>{const Se=O.none;w(j,X,oe,Se)},w=(j,X,oe,Se)=>{const et=t.lazySink(j).getOrDie();ss.openWhileCloaked(j,X,()=>xa.positionWithinBounds(et,j,oe,Se())),ln.setValue(j,O.some({mode:"position",config:oe,getBounds:Se}))},C=(j,X,oe)=>{A(j,X,oe,O.none)},A=(j,X,oe,Se)=>{const et=dV(t,j,X,oe,Se);ss.open(j,et),ln.setValue(j,O.some({mode:"menu",menu:et}))},_=j=>{ss.isOpen(j)&&(ln.setValue(j,O.none()),ss.close(j))},R=j=>ss.getState(j),B=j=>{ss.isOpen(j)&&ln.getValue(j).each(X=>{switch(X.mode){case"menu":ss.getState(j).each(Lh.repositionMenus);break;case"position":const oe=t.lazySink(j).getOrDie();xa.positionWithinBounds(oe,j,X.config,X.getBounds());break}})},H={setContent:h,showAt:b,showWithinBounds:w,showMenuAt:C,showMenuWithinBounds:A,hide:_,getContent:R,reposition:B,isOpen:ss.isOpen};return{uid:t.uid,dom:t.dom,behaviours:_i(t.inlineBehaviours,[ss.config({isPartOf:(j,X,oe)=>Oh(X,oe)||c(j,oe),getAttachPoint:j=>t.lazySink(j).getOrDie(),onOpen:j=>{t.onShow(j)},onClose:j=>{t.onHide(j)}}),ln.config({store:{mode:"memory",initialValue:O.none()}}),Dl.config({channels:ie(ie({},dE(ie({isExtraPart:r.isExtraPart},t.fireDismissalEventInstead.map(j=>({fireEventInstead:{event:j.event}})).getOr({})))),fE(Ot(ie({},t.fireRepositionEventInstead.map(j=>({fireEventInstead:{event:j.event}})).getOr({})),{doReposition:B})))})]),eventOrder:t.eventOrder,apis:H}},gr=Rl({name:"InlineView",configFields:[Rt("lazySink"),os("onShow"),os("onHide"),Pm("onEscape"),yi("inlineBehaviours",[ss,ln,Dl]),ec("fireDismissalEventInstead",[tt("event",Vm())]),ec("fireRepositionEventInstead",[tt("event",BM())]),tt("getRelated",O.none),tt("isExtraPart",ne),tt("eventOrder",O.none)],factory:fV,apis:{showAt:(t,r,c,h)=>{t.showAt(r,c,h)},showWithinBounds:(t,r,c,h,b)=>{t.showWithinBounds(r,c,h,b)},showMenuAt:(t,r,c,h)=>{t.showMenuAt(r,c,h)},showMenuWithinBounds:(t,r,c,h,b)=>{t.showMenuWithinBounds(r,c,h,b)},hide:(t,r)=>{t.hide(r)},isOpen:(t,r)=>t.isOpen(r),getContent:(t,r)=>t.getContent(r),setContent:(t,r,c)=>{t.setContent(r,c)},reposition:(t,r)=>{t.reposition(r)}}});var lg=tinymce.util.Tools.resolve("tinymce.util.Delay");const Di=Rl({name:"Button",factory:t=>{const r=od(t.action),c=t.dom.tag,h=w=>$t(t.dom,"attributes").bind(C=>$t(C,w)),b=()=>{if(c==="button"){const w=h("type").getOr("button"),C=h("role").map(A=>({role:A})).getOr({});return ie({type:w},C)}else return{role:t.role.getOr(h("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:r,behaviours:du.augment(t.buttonBehaviours,[Jn.config({}),Fn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:b()},eventOrder:t.eventOrder}},configFields:[tt("uid",void 0),Rt("dom"),tt("components",[]),du.field("buttonBehaviours",[Jn,Fn]),Ds("action"),Ds("role"),tt("eventOrder",{})]}),hV=t=>{const r=t.dom.attributes!==void 0?t.dom.attributes:[];return Do(r,(c,h)=>h.name==="class"?c:Ot(ie({},c),{[h.name]:h.value}),{})},mV=t=>Array.prototype.slice.call(t.dom.classList,0),Qf=t=>{const r=Tt.fromHtml(t),c=Ii(r),h=hV(r),b=mV(r),w=c.length===0?{}:{innerHtml:ak(r)};return ie({tag:Os(r),classes:b,attributes:h},w)},Es=t=>{const r=TH(t)&&Js(t,"uid")?t.uid:dp("memento");return{get:w=>w.getSystem().getByUid(r).getOrDie(),getOpt:w=>w.getSystem().getByUid(r).toOptional(),asSpec:()=>Ot(ie({},t),{uid:r})}},{entries:lA,setPrototypeOf:cA,isFrozen:gV,getPrototypeOf:pV,getOwnPropertyDescriptor:bV}=Object;let{freeze:Bl,seal:sd,create:vV}=Object,{apply:bx,construct:uA}=typeof Reflect!="undefined"&&Reflect;bx||(bx=function(r,c,h){return r.apply(c,h)}),Bl||(Bl=function(r){return r}),sd||(sd=function(r){return r}),uA||(uA=function(r,c){return new r(...c)});const yV=gu(Array.prototype.forEach),wV=gu(Array.prototype.pop),Ob=gu(Array.prototype.push),vx=gu(String.prototype.toLowerCase),eh=gu(String.prototype.toString),xV=gu(String.prototype.match),rd=gu(String.prototype.replace),cg=gu(String.prototype.indexOf),$P=gu(String.prototype.trim),Rc=gu(RegExp.prototype.test),mu=CV(TypeError);function gu(t){return function(r){for(var c=arguments.length,h=new Array(c>1?c-1:0),b=1;b<c;b++)h[b-1]=arguments[b];return bx(t,r,h)}}function CV(t){return function(){for(var r=arguments.length,c=new Array(r),h=0;h<r;h++)c[h]=arguments[h];return uA(t,c)}}function Go(t,r,c){var h;c=(h=c)!==null&&h!==void 0?h:vx,cA&&cA(t,null);let b=r.length;for(;b--;){let w=r[b];if(typeof w=="string"){const C=c(w);C!==w&&(gV(r)||(r[b]=C),w=C)}t[w]=!0}return t}function ug(t){const r=vV(null);for(const[c,h]of lA(t))r[c]=h;return r}function _b(t,r){for(;t!==null;){const h=bV(t,r);if(h){if(h.get)return gu(h.get);if(typeof h.value=="function")return gu(h.value)}t=pV(t)}function c(h){return null}return c}const dA=Bl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fA=Bl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Db=Bl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),SV=Bl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hA=Bl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),kV=Bl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Mb=Bl(["#text"]),yx=Bl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),wx=Bl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mA=Bl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Pb=Bl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),EV=sd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),AV=sd(/<%[\w\W]*|[\w\W]*%>/gm),HP=sd(/\${[\w\W]*}/gm),TV=sd(/^data-[\-\w.\u00B7-\uFFFF]/),gA=sd(/^aria-[\-\w]+$/),pA=sd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),OV=sd(/^(?:\w+script|data):/i),_V=sd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),VP=sd(/^html$/i);var xx=Object.freeze({__proto__:null,MUSTACHE_EXPR:EV,ERB_EXPR:AV,TMPLIT_EXPR:HP,DATA_ATTR:TV,ARIA_ATTR:gA,IS_ALLOWED_URI:pA,IS_SCRIPT_OR_DATA:OV,ATTR_WHITESPACE:_V,DOCTYPE_NAME:VP});const DV=()=>typeof window=="undefined"?null:window,Rb=function(r,c){if(typeof r!="object"||typeof r.createPolicy!="function")return null;let h=null;const b="data-tt-policy-suffix";c&&c.hasAttribute(b)&&(h=c.getAttribute(b));const w="dompurify"+(h?"#"+h:"");try{return r.createPolicy(w,{createHTML(C){return C},createScriptURL(C){return C}})}catch(C){return null}};function Nb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:DV();const r=Uo=>Nb(Uo);if(r.version="3.0.5",r.removed=[],!t||!t.document||t.document.nodeType!==9)return r.isSupported=!1,r;const c=t.document,h=c.currentScript;let{document:b}=t;const{DocumentFragment:w,HTMLTemplateElement:C,Node:A,Element:_,NodeFilter:R,NamedNodeMap:B=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:H,DOMParser:j,trustedTypes:X}=t,oe=_.prototype,Se=_b(oe,"cloneNode"),et=_b(oe,"nextSibling"),He=_b(oe,"childNodes"),Pe=_b(oe,"parentNode");if(typeof C=="function"){const Uo=b.createElement("template");Uo.content&&Uo.content.ownerDocument&&(b=Uo.content.ownerDocument)}let Je,It="";const{implementation:At,createNodeIterator:Ct,createDocumentFragment:Zt,getElementsByTagName:Jt}=b,{importNode:Ao}=c;let hn={};r.isSupported=typeof lA=="function"&&typeof Pe=="function"&&At&&At.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ro,ERB_EXPR:eo,TMPLIT_EXPR:Cs,DATA_ATTR:zn,ARIA_ATTR:Jo,IS_SCRIPT_OR_DATA:Qt,ATTR_WHITESPACE:wn}=xx;let{IS_ALLOWED_URI:io}=xx,fo=null;const Un=Go({},[...dA,...fA,...Db,...hA,...Mb]);let yo=null;const Ls=Go({},[...yx,...wx,...mA,...Pb]);let is=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Vi=null,xl=null,jc=!0,Au=!0,dm=!1,Fg=!0,gd=!1,dh=!1,ty=!1,OD=!1,Z1=!1,e2=!1,g$=!1,bte=!0,vte=!1;const Nae="user-content-";let AX=!0,_D=!1,t2={},n2=null;const yte=Go({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wte=null;const xte=Go({},["audio","video","img","source","image","track"]);let TX=null;const Cte=Go({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),p$="http://www.w3.org/1998/Math/MathML",b$="http://www.w3.org/2000/svg",Ig="http://www.w3.org/1999/xhtml";let o2=Ig,OX=!1,_X=null;const Bae=Go({},[p$,b$,Ig],eh);let ny;const Fae=["application/xhtml+xml","text/html"],Iae="text/html";let Cl,s2=null;const Lae=b.createElement("form"),Ste=function(gt){return gt instanceof RegExp||gt instanceof Function},DX=function(gt){if(!(s2&&s2===gt)){if((!gt||typeof gt!="object")&&(gt={}),gt=ug(gt),ny=Fae.indexOf(gt.PARSER_MEDIA_TYPE)===-1?ny=Iae:ny=gt.PARSER_MEDIA_TYPE,Cl=ny==="application/xhtml+xml"?eh:vx,fo="ALLOWED_TAGS"in gt?Go({},gt.ALLOWED_TAGS,Cl):Un,yo="ALLOWED_ATTR"in gt?Go({},gt.ALLOWED_ATTR,Cl):Ls,_X="ALLOWED_NAMESPACES"in gt?Go({},gt.ALLOWED_NAMESPACES,eh):Bae,TX="ADD_URI_SAFE_ATTR"in gt?Go(ug(Cte),gt.ADD_URI_SAFE_ATTR,Cl):Cte,wte="ADD_DATA_URI_TAGS"in gt?Go(ug(xte),gt.ADD_DATA_URI_TAGS,Cl):xte,n2="FORBID_CONTENTS"in gt?Go({},gt.FORBID_CONTENTS,Cl):yte,Vi="FORBID_TAGS"in gt?Go({},gt.FORBID_TAGS,Cl):{},xl="FORBID_ATTR"in gt?Go({},gt.FORBID_ATTR,Cl):{},t2="USE_PROFILES"in gt?gt.USE_PROFILES:!1,jc=gt.ALLOW_ARIA_ATTR!==!1,Au=gt.ALLOW_DATA_ATTR!==!1,dm=gt.ALLOW_UNKNOWN_PROTOCOLS||!1,Fg=gt.ALLOW_SELF_CLOSE_IN_ATTR!==!1,gd=gt.SAFE_FOR_TEMPLATES||!1,dh=gt.WHOLE_DOCUMENT||!1,Z1=gt.RETURN_DOM||!1,e2=gt.RETURN_DOM_FRAGMENT||!1,g$=gt.RETURN_TRUSTED_TYPE||!1,OD=gt.FORCE_BODY||!1,bte=gt.SANITIZE_DOM!==!1,vte=gt.SANITIZE_NAMED_PROPS||!1,AX=gt.KEEP_CONTENT!==!1,_D=gt.IN_PLACE||!1,io=gt.ALLOWED_URI_REGEXP||pA,o2=gt.NAMESPACE||Ig,is=gt.CUSTOM_ELEMENT_HANDLING||{},gt.CUSTOM_ELEMENT_HANDLING&&Ste(gt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(is.tagNameCheck=gt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),gt.CUSTOM_ELEMENT_HANDLING&&Ste(gt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(is.attributeNameCheck=gt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),gt.CUSTOM_ELEMENT_HANDLING&&typeof gt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(is.allowCustomizedBuiltInElements=gt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),gd&&(Au=!1),e2&&(Z1=!0),t2&&(fo=Go({},[...Mb]),yo=[],t2.html===!0&&(Go(fo,dA),Go(yo,yx)),t2.svg===!0&&(Go(fo,fA),Go(yo,wx),Go(yo,Pb)),t2.svgFilters===!0&&(Go(fo,Db),Go(yo,wx),Go(yo,Pb)),t2.mathMl===!0&&(Go(fo,hA),Go(yo,mA),Go(yo,Pb))),gt.ADD_TAGS&&(fo===Un&&(fo=ug(fo)),Go(fo,gt.ADD_TAGS,Cl)),gt.ADD_ATTR&&(yo===Ls&&(yo=ug(yo)),Go(yo,gt.ADD_ATTR,Cl)),gt.ADD_URI_SAFE_ATTR&&Go(TX,gt.ADD_URI_SAFE_ATTR,Cl),gt.FORBID_CONTENTS&&(n2===yte&&(n2=ug(n2)),Go(n2,gt.FORBID_CONTENTS,Cl)),AX&&(fo["#text"]=!0),dh&&Go(fo,["html","head","body"]),fo.table&&(Go(fo,["tbody"]),delete Vi.tbody),gt.TRUSTED_TYPES_POLICY){if(typeof gt.TRUSTED_TYPES_POLICY.createHTML!="function")throw mu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof gt.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw mu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Je=gt.TRUSTED_TYPES_POLICY,It=Je.createHTML("")}else Je===void 0&&(Je=Rb(X,h)),Je!==null&&typeof It=="string"&&(It=Je.createHTML(""));Bl&&Bl(gt),s2=gt}},kte=Go({},["mi","mo","mn","ms","mtext"]),Ete=Go({},["foreignobject","desc","title","annotation-xml"]),$ae=Go({},["title","style","font","a","script"]),v$=Go({},fA);Go(v$,Db),Go(v$,SV);const MX=Go({},hA);Go(MX,kV);const Hae=function(gt){let Tn=Pe(gt);(!Tn||!Tn.tagName)&&(Tn={namespaceURI:o2,tagName:"template"});const ho=vx(gt.tagName),ni=vx(Tn.tagName);return _X[gt.namespaceURI]?gt.namespaceURI===b$?Tn.namespaceURI===Ig?ho==="svg":Tn.namespaceURI===p$?ho==="svg"&&(ni==="annotation-xml"||kte[ni]):!!v$[ho]:gt.namespaceURI===p$?Tn.namespaceURI===Ig?ho==="math":Tn.namespaceURI===b$?ho==="math"&&Ete[ni]:!!MX[ho]:gt.namespaceURI===Ig?Tn.namespaceURI===b$&&!Ete[ni]||Tn.namespaceURI===p$&&!kte[ni]?!1:!MX[ho]&&($ae[ho]||!v$[ho]):!!(ny==="application/xhtml+xml"&&_X[gt.namespaceURI]):!1},oy=function(gt){Ob(r.removed,{element:gt});try{gt.parentNode.removeChild(gt)}catch(Tn){gt.remove()}},DD=function(gt,Tn){try{Ob(r.removed,{attribute:Tn.getAttributeNode(gt),from:Tn})}catch(ho){Ob(r.removed,{attribute:null,from:Tn})}if(Tn.removeAttribute(gt),gt==="is"&&!yo[gt])if(Z1||e2)try{oy(Tn)}catch(ho){}else try{Tn.setAttribute(gt,"")}catch(ho){}},Ate=function(gt){let Tn,ho;if(OD)gt="<remove></remove>"+gt;else{const lf=xV(gt,/^[\r\n\t ]+/);ho=lf&&lf[0]}ny==="application/xhtml+xml"&&o2===Ig&&(gt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+gt+"</body></html>");const ni=Je?Je.createHTML(gt):gt;if(o2===Ig)try{Tn=new j().parseFromString(ni,ny)}catch(lf){}if(!Tn||!Tn.documentElement){Tn=At.createDocument(o2,"template",null);try{Tn.documentElement.innerHTML=OX?It:ni}catch(lf){}}const Sl=Tn.body||Tn.documentElement;return gt&&ho&&Sl.insertBefore(b.createTextNode(ho),Sl.childNodes[0]||null),o2===Ig?Jt.call(Tn,dh?"html":"body")[0]:dh?Tn.documentElement:Sl},Tte=function(gt){return Ct.call(gt.ownerDocument||gt,gt,R.SHOW_ELEMENT|R.SHOW_COMMENT|R.SHOW_TEXT,null,!1)},Vae=function(gt){return gt instanceof H&&(typeof gt.nodeName!="string"||typeof gt.textContent!="string"||typeof gt.removeChild!="function"||!(gt.attributes instanceof B)||typeof gt.removeAttribute!="function"||typeof gt.setAttribute!="function"||typeof gt.namespaceURI!="string"||typeof gt.insertBefore!="function"||typeof gt.hasChildNodes!="function")},y$=function(gt){return typeof A=="object"?gt instanceof A:gt&&typeof gt=="object"&&typeof gt.nodeType=="number"&&typeof gt.nodeName=="string"},Lg=function(gt,Tn,ho){hn[gt]&&yV(hn[gt],ni=>{ni.call(r,Tn,ho,s2)})},Ote=function(gt){let Tn;if(Lg("beforeSanitizeElements",gt,null),Vae(gt))return oy(gt),!0;const ho=Cl(gt.nodeName);if(Lg("uponSanitizeElement",gt,{tagName:ho,allowedTags:fo}),gt.hasChildNodes()&&!y$(gt.firstElementChild)&&(!y$(gt.content)||!y$(gt.content.firstElementChild))&&Rc(/<[/\w]/g,gt.innerHTML)&&Rc(/<[/\w]/g,gt.textContent))return oy(gt),!0;if(!fo[ho]||Vi[ho]){if(!Vi[ho]&&Dte(ho)&&(is.tagNameCheck instanceof RegExp&&Rc(is.tagNameCheck,ho)||is.tagNameCheck instanceof Function&&is.tagNameCheck(ho)))return!1;if(AX&&!n2[ho]){const ni=Pe(gt)||gt.parentNode,Sl=He(gt)||gt.childNodes;if(Sl&&ni){const lf=Sl.length;for(let ta=lf-1;ta>=0;--ta)ni.insertBefore(Se(Sl[ta],!0),et(gt))}}return oy(gt),!0}return gt instanceof _&&!Hae(gt)||(ho==="noscript"||ho==="noembed"||ho==="noframes")&&Rc(/<\/no(script|embed|frames)/i,gt.innerHTML)?(oy(gt),!0):(gd&&gt.nodeType===3&&(Tn=gt.textContent,Tn=rd(Tn,ro," "),Tn=rd(Tn,eo," "),Tn=rd(Tn,Cs," "),gt.textContent!==Tn&&(Ob(r.removed,{element:gt.cloneNode()}),gt.textContent=Tn)),Lg("afterSanitizeElements",gt,null),!1)},_te=function(gt,Tn,ho){if(bte&&(Tn==="id"||Tn==="name")&&(ho in b||ho in Lae))return!1;if(!(Au&&!xl[Tn]&&Rc(zn,Tn))){if(!(jc&&Rc(Jo,Tn))){if(!yo[Tn]||xl[Tn]){if(!(Dte(gt)&&(is.tagNameCheck instanceof RegExp&&Rc(is.tagNameCheck,gt)||is.tagNameCheck instanceof Function&&is.tagNameCheck(gt))&&(is.attributeNameCheck instanceof RegExp&&Rc(is.attributeNameCheck,Tn)||is.attributeNameCheck instanceof Function&&is.attributeNameCheck(Tn))||Tn==="is"&&is.allowCustomizedBuiltInElements&&(is.tagNameCheck instanceof RegExp&&Rc(is.tagNameCheck,ho)||is.tagNameCheck instanceof Function&&is.tagNameCheck(ho))))return!1}else if(!TX[Tn]){if(!Rc(io,rd(ho,wn,""))){if(!((Tn==="src"||Tn==="xlink:href"||Tn==="href")&&gt!=="script"&&cg(ho,"data:")===0&&wte[gt])){if(!(dm&&!Rc(Qt,rd(ho,wn,"")))){if(ho)return!1}}}}}}return!0},Dte=function(gt){return gt.indexOf("-")>0},Mte=function(gt){let Tn,ho,ni,Sl;Lg("beforeSanitizeAttributes",gt,null);const{attributes:lf}=gt;if(!lf)return;const ta={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yo};for(Sl=lf.length;Sl--;){Tn=lf[Sl];const{name:cf,namespaceURI:PX}=Tn;ho=cf==="value"?Tn.value:$P(Tn.value);const Uae=ho;if(ni=Cl(cf),ta.attrName=ni,ta.attrValue=ho,ta.keepAttr=!0,ta.forceKeepAttr=void 0,Lg("uponSanitizeAttribute",gt,ta),ho=ta.attrValue,ta.forceKeepAttr)continue;if(!ta.keepAttr){DD(cf,gt);continue}if(!Fg&&Rc(/\/>/i,ho)){DD(cf,gt);continue}gd&&(ho=rd(ho,ro," "),ho=rd(ho,eo," "),ho=rd(ho,Cs," "));const Pte=Cl(gt.nodeName);if(!_te(Pte,ni,ho)){DD(cf,gt);continue}if(vte&&(ni==="id"||ni==="name")&&(DD(cf,gt),ho=Nae+ho),Je&&typeof X=="object"&&typeof X.getAttributeType=="function"&&!PX)switch(X.getAttributeType(Pte,ni)){case"TrustedHTML":{ho=Je.createHTML(ho);break}case"TrustedScriptURL":{ho=Je.createScriptURL(ho);break}}if(ho!==Uae)try{PX?gt.setAttributeNS(PX,cf,ho):gt.setAttribute(cf,ho)}catch(v0e){DD(cf,gt)}}Lg("afterSanitizeAttributes",gt,null)},zae=function Uo(gt){let Tn;const ho=Tte(gt);for(Lg("beforeSanitizeShadowDOM",gt,null);Tn=ho.nextNode();)Lg("uponSanitizeShadowNode",Tn,null),!Ote(Tn)&&(Tn.content instanceof w&&Uo(Tn.content),Mte(Tn));Lg("afterSanitizeShadowDOM",gt,null)};return r.sanitize=function(Uo){let gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Tn,ho,ni,Sl;if(OX=!Uo,OX&&(Uo="<!-->"),typeof Uo!="string"&&!y$(Uo))if(typeof Uo.toString=="function"){if(Uo=Uo.toString(),typeof Uo!="string")throw mu("dirty is not a string, aborting")}else throw mu("toString is not a function");if(!r.isSupported)return Uo;if(ty||DX(gt),r.removed=[],typeof Uo=="string"&&(_D=!1),_D){if(Uo.nodeName){const cf=Cl(Uo.nodeName);if(!fo[cf]||Vi[cf])throw mu("root node is forbidden and cannot be sanitized in-place")}}else if(Uo instanceof A)Tn=Ate("<!---->"),ho=Tn.ownerDocument.importNode(Uo,!0),ho.nodeType===1&&ho.nodeName==="BODY"||ho.nodeName==="HTML"?Tn=ho:Tn.appendChild(ho);else{if(!Z1&&!gd&&!dh&&Uo.indexOf("<")===-1)return Je&&g$?Je.createHTML(Uo):Uo;if(Tn=Ate(Uo),!Tn)return Z1?null:g$?It:""}Tn&&OD&&oy(Tn.firstChild);const lf=Tte(_D?Uo:Tn);for(;ni=lf.nextNode();)Ote(ni)||(ni.content instanceof w&&zae(ni.content),Mte(ni));if(_D)return Uo;if(Z1){if(e2)for(Sl=Zt.call(Tn.ownerDocument);Tn.firstChild;)Sl.appendChild(Tn.firstChild);else Sl=Tn;return(yo.shadowroot||yo.shadowrootmode)&&(Sl=Ao.call(c,Sl,!0)),Sl}let ta=dh?Tn.outerHTML:Tn.innerHTML;return dh&&fo["!doctype"]&&Tn.ownerDocument&&Tn.ownerDocument.doctype&&Tn.ownerDocument.doctype.name&&Rc(VP,Tn.ownerDocument.doctype.name)&&(ta="<!DOCTYPE "+Tn.ownerDocument.doctype.name+`>
`+ta),gd&&(ta=rd(ta,ro," "),ta=rd(ta,eo," "),ta=rd(ta,Cs," ")),Je&&g$?Je.createHTML(ta):ta},r.setConfig=function(Uo){DX(Uo),ty=!0},r.clearConfig=function(){s2=null,ty=!1},r.isValidAttribute=function(Uo,gt,Tn){s2||DX({});const ho=Cl(Uo),ni=Cl(gt);return _te(ho,ni,Tn)},r.addHook=function(Uo,gt){typeof gt=="function"&&(hn[Uo]=hn[Uo]||[],Ob(hn[Uo],gt))},r.removeHook=function(Uo){if(hn[Uo])return wV(hn[Uo])},r.removeHooks=function(Uo){hn[Uo]&&(hn[Uo]=[])},r.removeAllHooks=function(){hn={}},r}var zP=Nb();const bA=t=>zP().sanitize(t);var mc=tinymce.util.Tools.resolve("tinymce.util.I18n");const MV={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},UP="temporary-placeholder",vA=t=>()=>$t(t,UP).getOr("!not found!"),Bb=(t,r)=>{const c=t.toLowerCase();if(mc.isRtl()){const h=In(c,"-rtl");return So(r,h)?h:c}else return c},yA=(t,r)=>$t(r,Bb(t,r)),wA=(t,r)=>{const c=r();return yA(t,c).getOrThunk(vA(c))},xA=(t,r,c)=>{const h=r();return yA(t,h).or(c).getOrThunk(vA(h))},PV=t=>mc.isRtl()?So(MV,t):!1,Cx=()=>Eo("add-focusable",[tr(t=>{mw(t.element,"svg").each(r=>on(r,"focusable","false"))})]),WP=(t,r,c,h)=>{var b,w;const C=PV(r)?["tox-icon--flip"]:[],A=$t(c,Bb(r,c)).or(h).getOrThunk(vA(c));return{dom:{tag:t.tag,attributes:(b=t.attributes)!==null&&b!==void 0?b:{},classes:t.classes.concat(C),innerHtml:A},behaviours:Kt([...(w=t.behaviours)!==null&&w!==void 0?w:[],Cx()])}},pu=(t,r,c,h=O.none())=>WP(r,t,c(),h),RV=(t,r,c)=>{const h=c(),b=Qe(t,w=>So(h,Bb(w,h)));return WP(r,b.getOr(UP),h,O.none())},jP={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},CA=Rl({name:"Notification",factory:t=>{const r=Es({dom:Qf(`<p>${bA(t.translationProvider(t.text))}</p>`),behaviours:Kt([vo.config({})])}),c=X=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${X}%`}}}),h=X=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${X}%`}}),b=Es({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},h(0)],behaviours:Kt([vo.config({})])}),A={updateProgress:(X,oe)=>{X.getSystem().isConnected()&&b.getOpt(X).each(Se=>{vo.set(Se,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(oe)]},h(oe)])})},updateText:(X,oe)=>{if(X.getSystem().isConnected()){const Se=r.get(X);vo.set(Se,[Br(oe)])}}},_=nt([t.icon.toArray(),t.level.toArray(),t.level.bind(X=>O.from(jP[X])).toArray()]),R=Es(Di.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[pu("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:X=>{t.onAction(X)}})),B=RV(_,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:Kt([vo.config({})])},j=[B,H];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(X=>["tox-notification","tox-notification--in",`tox-notification--${X}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Kt([Jn.config({}),Eo("notification-events",[Dt(Pf(),X=>{R.getOpt(X).each(Jn.focus)})])]),components:j.concat(t.progress?[b.asSpec()]:[]).concat(t.closeButton?[R.asSpec()]:[]),apis:A}},configFields:[Ds("level"),Rt("progress"),Ds("icon"),Rt("onAction"),Rt("text"),Rt("iconProvider"),Rt("translationProvider"),Li("closeButton",!0)],apis:{updateProgress:(t,r,c)=>{t.updateProgress(r,c)},updateText:(t,r,c)=>{t.updateText(r,c)}}});var SA=(t,r,c)=>{const h=r.backstage.shared,b=()=>{const _=Sr(Tt.fromDom(t.getContentAreaContainer())),R=Zi(),B=ac(R.x,_.x,_.right),H=ac(R.y,_.y,_.bottom),j=Math.max(_.right,R.right),X=Math.max(_.bottom,R.bottom);return O.some(Kr(B,H,j-B,X-H))};return{open:(_,R)=>{const B=()=>{R(),gr.hide(j)},H=ya(CA.sketch({text:_.text,level:Ue(["success","error","warning","warn","info"],_.type)?_.type:void 0,progress:_.progressBar===!0,icon:_.icon,closeButton:_.closeButton,onAction:B,iconProvider:h.providers.icons,translationProvider:h.providers.translate})),j=ya(gr.sketch(ie({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:h.getSink,fireDismissalEventInstead:{}},h.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));c.add(j),q(_.timeout)&&_.timeout>0&&lg.setEditorTimeout(t,()=>{B()},_.timeout);const oe={close:B,reposition:()=>{const Se=Pc(H),et={maxHeightFunction:Sp()},He=t.notificationManager.getNotifications();if(He[0]===oe){const Pe=Ot(ie({},h.anchors.banner()),{overrides:et});gr.showWithinBounds(j,Se,{anchor:Pe},b)}else Be(He,oe).each(Pe=>{const Je=He[Pe-1].getEl(),It={type:"node",root:ur(),node:O.some(Tt.fromDom(Je)),overrides:et,layouts:{onRtl:()=>[Ti],onLtr:()=>[Ti]}};gr.showWithinBounds(j,Se,{anchor:It},b)})},text:Se=>{CA.updateText(H,Se)},settings:_,getEl:()=>H.element.dom,progressBar:{value:Se=>{CA.updateProgress(H,Se)}}};return oe},close:_=>{_.close()},getArgs:_=>_.settings}},dg=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ZP=tinymce.util.Tools.resolve("tinymce.EditorManager"),jp=tinymce.util.Tools.resolve("tinymce.Env"),Fl;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Fl||(Fl={}));var Fb;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Fb||(Fb={}));const Hs=t=>r=>r.options.get(t),Ib=t=>r=>O.from(t(r)),qP=t=>{const r=jp.deviceType.isPhone(),c=jp.deviceType.isTablet()||r,h=t.options.register,b=C=>v(C)||C===!1,w=C=>v(C)||q(C);h("skin",{processor:C=>v(C)||C===!1,default:"oxide"}),h("skin_url",{processor:"string"}),h("height",{processor:w,default:Math.max(t.getElement().offsetHeight,400)}),h("width",{processor:w,default:dg.DOM.getStyle(t.getElement(),"width")}),h("min_height",{processor:"number",default:100}),h("min_width",{processor:"number"}),h("max_height",{processor:"number"}),h("max_width",{processor:"number"}),h("style_formats",{processor:"object[]"}),h("style_formats_merge",{processor:"boolean",default:!1}),h("style_formats_autohide",{processor:"boolean",default:!1}),h("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),h("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),h("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),h("font_size_input_default_unit",{processor:"string",default:"pt"}),h("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),h("content_langs",{processor:"object[]"}),h("removed_menuitems",{processor:"string",default:""}),h("menubar",{processor:C=>v(C)||N(C),default:!r}),h("menu",{processor:"object",default:{}}),h("toolbar",{processor:C=>N(C)||v(C)||T(C)?{value:C,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Ie(9,C=>{h("toolbar"+(C+1),{processor:"string"})}),h("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),h("toolbar_groups",{processor:"object",default:{}}),h("toolbar_location",{processor:"string",default:Fb.auto}),h("toolbar_persist",{processor:"boolean",default:!1}),h("toolbar_sticky",{processor:"boolean",default:t.inline}),h("toolbar_sticky_offset",{processor:"number",default:0}),h("fixed_toolbar_container",{processor:"string",default:""}),h("fixed_toolbar_container_target",{processor:"object"}),h("ui_mode",{processor:"string",default:"combined"}),h("file_picker_callback",{processor:"function"}),h("file_picker_validator_handler",{processor:"function"}),h("file_picker_types",{processor:"string"}),h("typeahead_urls",{processor:"boolean",default:!0}),h("anchor_top",{processor:b,default:"#top"}),h("anchor_bottom",{processor:b,default:"#bottom"}),h("draggable_modal",{processor:"boolean",default:!1}),h("statusbar",{processor:"boolean",default:!0}),h("elementpath",{processor:"boolean",default:!0}),h("branding",{processor:"boolean",default:!0}),h("promotion",{processor:"boolean",default:!0}),h("resize",{processor:C=>C==="both"||N(C),default:!jp.deviceType.isTouch()}),h("sidebar_show",{processor:"string"}),h("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),h("default_font_stack",{processor:"string[]",default:[]})},GP=Hs("readonly"),Sx=Hs("height"),Lb=Hs("width"),kA=Ib(Hs("min_width")),Zp=Ib(Hs("min_height")),kx=Ib(Hs("max_width")),EA=Ib(Hs("max_height")),KP=Ib(Hs("style_formats")),YP=Hs("style_formats_merge"),XP=Hs("style_formats_autohide"),JP=Hs("content_langs"),AA=Hs("removed_menuitems"),qp=Hs("toolbar_mode"),QP=Hs("toolbar_groups"),$b=Hs("toolbar_location"),fg=Hs("fixed_toolbar_container"),NV=Hs("fixed_toolbar_container_target"),eR=Hs("toolbar_persist"),Ex=Hs("toolbar_sticky_offset"),TA=Hs("menubar"),Ax=Hs("toolbar"),tR=Hs("file_picker_callback"),OA=Hs("file_picker_validator_handler"),nR=Hs("font_size_input_default_unit"),_A=Hs("file_picker_types"),DA=Hs("typeahead_urls"),Tx=Hs("anchor_top"),oR=Hs("anchor_bottom"),MA=Hs("draggable_modal"),sR=Hs("statusbar"),Gp=Hs("elementpath"),PA=Hs("branding"),rR=Hs("resize"),Ox=Hs("paste_as_text"),_x=Hs("sidebar_show"),iR=Hs("promotion"),Dx=Hs("help_accessibility"),aR=Hs("default_font_stack"),RA=t=>t.options.get("skin")===!1,Kp=t=>t.options.get("menubar")!==!1,Mx=t=>{const r=t.options.get("skin_url");if(RA(t))return r;if(r)return t.documentBaseURI.toAbsolute(r);{const c=t.options.get("skin");return ZP.baseURL+"/skins/ui/"+c}},Px=t=>O.from(t.options.get("skin_url")),lR=t=>t.options.get("line_height_formats").split(" "),Rx=t=>{const r=Ax(t),c=v(r),h=T(r)&&r.length>0;return!Hb(t)&&(h||c||r===!0)},NA=t=>{const r=Ie(9,h=>t.options.get("toolbar"+(h+1))),c=un(r,v);return Bn(c.length>0,c)},Hb=t=>NA(t).fold(()=>{const r=Ax(t);return ae(r,v)&&r.length>0},ge),BA=t=>$b(t)===Fb.bottom,cR=t=>{var r;if(!t.inline)return O.none();const c=(r=fg(t))!==null&&r!==void 0?r:"";if(c.length>0)return Wr(ur(),c);const h=NV(t);return Y(h)?O.some(Tt.fromDom(h)):O.none()},Yp=t=>t.inline&&cR(t).isSome(),FA=t=>cR(t).getOrThunk(()=>Ut(St(Tt.fromDom(t.getElement())))),IA=t=>t.inline&&!Kp(t)&&!Rx(t)&&!Hb(t),Vb=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Yp(t)&&!IA(t),Wd=t=>!Yp(t)&&t.options.get("ui_mode")==="split",uR=t=>{const r=t.options.get("menu");return pt(r,c=>Ot(ie({},c),{items:c.items}))};var BV=Object.freeze({__proto__:null,get ToolbarMode(){return Fl},get ToolbarLocation(){return Fb},register:qP,getSkinUrl:Mx,getSkinUrlOption:Px,isReadOnly:GP,isSkinDisabled:RA,getHeightOption:Sx,getWidthOption:Lb,getMinWidthOption:kA,getMinHeightOption:Zp,getMaxWidthOption:kx,getMaxHeightOption:EA,getUserStyleFormats:KP,shouldMergeStyleFormats:YP,shouldAutoHideStyleFormats:XP,getLineHeightFormats:lR,getContentLanguages:JP,getRemovedMenuItems:AA,isMenubarEnabled:Kp,isMultipleToolbars:Hb,isToolbarEnabled:Rx,isToolbarPersist:eR,getMultipleToolbarsOption:NA,getUiContainer:FA,useFixedContainer:Yp,isSplitUiMode:Wd,getToolbarMode:qp,isDraggableModal:MA,isDistractionFree:IA,isStickyToolbar:Vb,getStickyToolbarOffset:Ex,getToolbarLocation:$b,isToolbarLocationBottom:BA,getToolbarGroups:QP,getMenus:uR,getMenubar:TA,getToolbar:Ax,getFilePickerCallback:tR,getFilePickerTypes:_A,useTypeaheadUrls:DA,getAnchorTop:Tx,getAnchorBottom:oR,getFilePickerValidatorHandler:OA,getFontSizeInputDefaultUnit:nR,useStatusBar:sR,useElementPath:Gp,promotionEnabled:iR,useBranding:PA,getResize:rR,getPasteAsText:Ox,getSidebarShow:_x,useHelpAccessibility:Dx,getDefaultFontStack:aR});const dR="[data-mce-autocompleter]",LA=t=>Ju(t,dR),FV=t=>Wr(t,dR),IV={setup:(t,r)=>{const c=(b,w)=>{Hn(b,qu(),{raw:w})},h=()=>t.getMenu().bind(ps.getHighlighted);r.on("keydown",b=>{const w=b.which;t.isActive()&&(t.isMenuOpen()?w===13?(h().each(Rf),b.preventDefault()):w===40?(h().fold(()=>{t.getMenu().each(ps.highlightFirst)},C=>{c(C,b)}),b.preventDefault(),b.stopImmediatePropagation()):(w===37||w===38||w===39)&&h().each(C=>{c(C,b),b.preventDefault(),b.stopImmediatePropagation()}):(w===13||w===38||w===40)&&t.cancelIfNecessary())}),r.on("NodeChange",b=>{t.isActive()&&!t.isProcessingAction()&&LA(Tt.fromDom(b.element)).isNone()&&t.cancelIfNecessary()})}};var $A;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})($A||($A={}));var id=$A;const HA="tox-menu-nav__js",Xp="tox-collection__item",VA="tox-swatch",LV={normal:HA,color:VA},fR="tox-collection__item--enabled",$V="tox-collection__group-heading",hR="tox-collection__item-icon",zA="tox-collection__item-label",HV="tox-collection__item-accessory",mR="tox-collection__item-caret",VV="tox-collection__item-checkmark",zb="tox-collection__item--active",gR="tox-collection__item-container",zV="tox-collection__item-container--column",pR="tox-collection__item-container--row",Nx="tox-collection__item-container--align-right",UV="tox-collection__item-container--align-left",UA="tox-collection__item-container--valign-top",WV="tox-collection__item-container--valign-middle",jV="tox-collection__item-container--valign-bottom",bR=t=>$t(LV,t).getOr(HA),vR=t=>t==="color"?"tox-swatches":"tox-menu",WA=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:vR(t),tieredMenu:"tox-tiered-menu"}),th=t=>{const r=WA(t);return{backgroundMenu:r.backgroundMenu,selectedMenu:r.selectedMenu,menu:r.menu,selectedItem:r.selectedItem,item:bR(t)}},jA=(t,r,c)=>{const h=WA(c);return{tag:"div",classes:nt([[h.menu,`tox-menu-${r}-column`],t?[h.hasIcons]:[]])}},yR=[ag.parts.items({})],Jp=(t,r,c)=>{const h=WA(c);return{dom:{tag:"div",classes:nt([[h.tieredMenu]])},markers:th(c)}},Ub=G([Ds("data"),tt("inputAttributes",{}),tt("inputStyles",{}),tt("tag","input"),tt("inputClasses",[]),os("onSetValue"),tt("styles",{}),tt("eventOrder",{}),yi("inputBehaviours",[ln,Jn]),tt("selectOnFocus",!0)]),ZA=t=>Kt([Jn.config({onFocus:t.selectOnFocus?r=>{const c=r.element,h=Nd(c);c.dom.setSelectionRange(0,h.length)}:Z})]),jd=t=>ie(ie({},ZA(t)),_i(t.inputBehaviours,[ln.config({store:Ot(ie({mode:"manual"},t.data.map(r=>({initialValue:r})).getOr({})),{getValue:r=>Nd(r.element),setValue:(r,c)=>{Nd(r.element)!==c&&pp(r.element,c)}}),onSetValue:t.onSetValue})])),Bx=t=>({tag:t.tag,attributes:ie({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}),ZV=(t,r)=>({uid:t.uid,dom:Bx(t),components:[],behaviours:jd(t),eventOrder:t.eventOrder}),hg=Rl({name:"Input",configFields:Ub(),factory:ZV}),wR=bn("refetch-trigger-event"),xR=bn("redirect-menu-item-interaction"),Qp="tox-menu__searcher",Fx=t=>Wr(t.element,`.${Qp}`).bind(r=>t.getSystem().getByDom(r).toOptional()),qA=Fx,GA=(t,r)=>{ln.setValue(t,r.fetchPattern),t.element.dom.selectionStart=r.selectionStart,t.element.dom.selectionEnd=r.selectionEnd},CR=t=>{const r=ln.getValue(t),c=t.element.dom.selectionStart,h=t.element.dom.selectionEnd;return{fetchPattern:r,selectionStart:c,selectionEnd:h}},KA=(t,r)=>{U(r.element,"id").each(c=>on(t.element,"aria-activedescendant",c))},YA=t=>{const r=(b,w)=>(w.cut(),O.none()),c=(b,w)=>{const C={interactionEvent:w.event,eventType:w.event.raw.type};return Hn(b,xR,C),O.some(!0)},h="searcher-events";return{dom:{tag:"div",classes:[Xp]},components:[hg.sketch({inputClasses:[Qp,"tox-textfield"],inputAttributes:Ot(ie({},t.placeholder.map(b=>({placeholder:t.i18n(b)})).getOr({})),{type:"search","aria-autocomplete":"list"}),inputBehaviours:Kt([Eo(h,[Dt(Lm(),b=>{ns(b,wR)}),Dt(qu(),(b,w)=>{w.event.raw.key==="Escape"&&w.stop()})]),Fn.config({mode:"special",onLeft:r,onRight:r,onSpace:r,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[h,Fn.name()]}})]}},Ix="tox-collection--results__js",XA=t=>{var r;return t.dom?Ot(ie({},t),{dom:Ot(ie({},t.dom),{attributes:Ot(ie({},(r=t.dom.attributes)!==null&&r!==void 0?r:{}),{id:bn("aria-item-search-result-id"),"aria-selected":"false"})})}):t},Lx=(t,r)=>c=>{const h=wt(c,r);return ue(h,b=>({dom:t,components:b}))},qV=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ag.parts.items({preprocess:t!=="auto"?Lx({tag:"div",classes:["tox-swatches__row"]},t):qe})]}]}),GV=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ag.parts.items({preprocess:Lx({tag:"div",classes:["tox-collection__group"]},t)})]}),SR=(t,r)=>{const c=[];let h=[];return je(t,(b,w)=>{r(b,w)?(h.length>0&&c.push(h),h=[],(So(b.dom,"innerHtml")||b.components&&b.components.length>0)&&h.push(b)):h.push(b)}),h.length>0&&c.push(h),ue(c,b=>({dom:{tag:"div",classes:["tox-collection__group"]},components:b}))},JA=(t,r,c)=>ag.parts.items({preprocess:h=>{const b=ue(h,c);return t!=="auto"&&t>1?Lx({tag:"div",classes:["tox-collection__group"]},t)(b):SR(b,(w,C)=>r[C].type==="separator")}}),kR=(t,r,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[JA(t,r,qe)]}),KV=(t,r,c=!0)=>{const h=bn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Ix].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:h}},components:[JA(t,r,XA)]}},ER=(t,r,c)=>{const h=bn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[YA({i18n:mc.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Ix],attributes:{id:h}},components:[JA(t,r,XA)]}]}},AR=(t,r=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[ag.parts.items({preprocess:c=>SR(c,(h,b)=>t[b].type==="separator")})]}),$x=t=>yt(t,r=>"icon"in r&&r.icon!==void 0),Zd=t=>O.none(),Wb=(t,r,c,h,b)=>{const w=AR(c);return{value:t,dom:w.dom,components:w.components,items:c}},Hx=(t,r,c,h,b)=>{const w=()=>b.menuType!=="searchable"?kR(h,c):b.searchMode.searchMode==="search-with-field"?ER(h,c,b.searchMode):KV(h,c);if(b.menuType==="color"){const C=qV(h);return{value:t,dom:C.dom,components:C.components,items:c}}else if(b.menuType==="normal"&&h==="auto"){const C=kR(h,c);return{value:t,dom:C.dom,components:C.components,items:c}}else if(b.menuType==="normal"||b.menuType==="searchable"){const C=w();return{value:t,dom:C.dom,components:C.components,items:c}}else if(b.menuType==="listpreview"&&h!=="auto"){const C=GV(h);return{value:t,dom:C.dom,components:C.components,items:c}}else return{value:t,dom:jA(r,h,b.menuType),components:yR,items:c}},jr=xs("type"),QA=xs("name"),Vx=xs("label"),nh=xs("text"),TR=xs("title"),eT=xs("icon"),e1=xs("value"),OR=Wu("fetch"),_R=Wu("getSubmenuItems"),t1=Wu("onAction"),YV=Wu("onItemAction"),$h=$i("onSetup",()=>Z),tT=Na("name"),qd=Na("text"),gc=Na("icon"),jb=Na("tooltip"),zx=Na("label"),XV=Na("shortcut"),nT=Pm("select"),Ux=Li("active",!1),DR=Li("borderless",!1),Nc=Li("enabled",!0),Gd=Li("primary",!1),MR=t=>tt("columns",t),Zb=tt("meta",{}),n1=$i("onAction",Z),mg=t=>_f("type",t),Wx=t=>ra("name","name",Yl(()=>bn(`${t}-name`)),Ki),PR=t=>ra("value","value",Yl(()=>bn(`${t}-value`)),Gi()),oT=Ln([jr,qd]),sT=t=>Er("separatormenuitem",oT,t),RR=Ln([mg("autocompleteitem"),Ux,Nc,Zb,e1,qd,gc]),JV=t=>Er("Autocompleter.Separator",oT,t),NR=t=>Er("Autocompleter.Item",RR,t),o1=[Nc,jb,gc,qd,$h],BR=Ln([jr,t1].concat(o1)),rT=t=>Er("toolbarbutton",BR,t),iT=[Ux].concat(o1),FR=Ln(iT.concat([jr,t1])),IR=t=>Er("ToggleButton",FR,t),LR=[$i("predicate",ne),tc("scope","node",["node","editor"]),tc("position","selection",["node","selection","line"])],QV=o1.concat([mg("contextformbutton"),Gd,t1,Xr("original",qe)]),ez=iT.concat([mg("contextformbutton"),Gd,t1,Xr("original",qe)]),$R=o1.concat([mg("contextformbutton")]),qb=iT.concat([mg("contextformtogglebutton")]),HR=gs("type",{contextformbutton:QV,contextformtogglebutton:ez}),tz=Ln([mg("contextform"),$i("initValue",G("")),zx,Ql("commands",HR),Md("launch",gs("type",{contextformbutton:$R,contextformtogglebutton:qb}))].concat(LR)),nz=t=>Er("ContextForm",tz,t),oz=Ln([mg("contexttoolbar"),xs("items")].concat(LR)),sz=t=>Er("ContextToolbar",oz,t),rz=[jr,xs("src"),Na("alt"),Zu("classes",[],Ki)],jx=Ln(rz),iz=[jr,nh,tT,Zu("classes",["tox-collection__item-label"],Ki)],VR=Ln(iz),zR=va(()=>Vt("type",{cardimage:jx,cardtext:VR,cardcontainer:UR})),UR=Ln([jr,_f("direction","horizontal"),_f("align","left"),_f("valign","middle"),Ql("items",zR)]),gg=[Nc,qd,XV,PR("menuitem"),Zb],az=Ln([jr,zx,Ql("items",zR),$h,n1].concat(gg)),WR=t=>Er("cardmenuitem",az,t),jR=Ln([jr,Ux,gc].concat(gg)),ZR=t=>Er("choicemenuitem",jR,t),aT=[jr,xs("fancytype"),n1],lz=[tt("initData",{})].concat(aT),cz=[Pm("select"),Pd("initData",{},[Li("allowCustomColors",!0),_f("storageKey","default"),Rm("colors",Gi())])].concat(aT),uz=gs("fancytype",{inserttable:lz,colorswatch:cz}),dz=t=>Er("fancymenuitem",uz,t),qR=Ln([jr,$h,n1,gc].concat(gg)),GR=t=>Er("menuitem",qR,t),fz=Ln([jr,_R,$h,gc].concat(gg)),hz=t=>Er("nestedmenuitem",fz,t),mz=Ln([jr,gc,Ux,$h,t1].concat(gg)),gz=t=>Er("togglemenuitem",mz,t),lT=(t,r,c)=>{const h=Oi(t.element,"."+c);if(h.length>0){const b=Bt(h,w=>{const C=w.dom.getBoundingClientRect().top,A=h[0].dom.getBoundingClientRect().top;return Math.abs(C-A)>r}).getOr(h.length);return O.some({numColumns:b,numRows:Math.ceil(h.length/b)})}else return O.none()},cT=(t,r)=>Kt([Eo(t,r)]),Gb={namedEvents:cT,unnamedEvents:t=>cT(bn("unnamed-events"),t)},Zx=bn("tooltip.exclusive"),s1=bn("tooltip.show"),Kb=bn("tooltip.hide"),KR=(t,r,c)=>{t.getSystem().broadcastOn([Zx],{})};var bz=Object.freeze({__proto__:null,hideAllExclusive:KR,setComponents:(t,r,c,h)=>{c.getTooltip().each(b=>{b.getSystem().isConnected()&&vo.set(b,h)})}}),YR=Object.freeze({__proto__:null,events:(t,r)=>{const c=b=>{r.getTooltip().each(w=>{Wf(w),t.onHide(b,w),r.clearTooltip()}),r.clearTimer()},h=b=>{if(!r.isShowing()){KR(b);const w=t.lazySink(b).getOrDie(),C=b.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:ir(t.mode==="normal"?[Dt(Mf(),A=>{ns(b,s1)}),Dt(R0(),A=>{ns(b,Kb)})]:[]),behaviours:Kt([vo.config({})])});r.setTooltip(C),Rh(w,C),t.onShow(b,C),xa.position(w,C,{anchor:t.anchor(b)})}};return ir(nt([[Dt(s1,b=>{r.resetTimer(()=>{h(b)},t.delay)}),Dt(Kb,b=>{r.resetTimer(()=>{c(b)},t.delay)}),Dt($m(),(b,w)=>{const C=w;C.universal||Ue(C.channels,Zx)&&c(b)}),Rd(b=>{c(b)})],t.mode==="normal"?[Dt(Pf(),b=>{ns(b,s1)}),Dt(J2(),b=>{ns(b,Kb)}),Dt(Mf(),b=>{ns(b,s1)}),Dt(R0(),b=>{ns(b,Kb)})]:[Dt(L0(),(b,w)=>{ns(b,s1)}),Dt($0(),b=>{ns(b,Kb)})]]))}}),XR=[Rt("lazySink"),Rt("tooltipDom"),tt("exclusive",!0),tt("tooltipComponents",[]),tt("delay",300),tc("mode","normal",["normal","follow-highlight"]),tt("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:G([Ti,Fa,la,Ja,ca,wa]),onRtl:G([Ti,Fa,la,Ja,ca,wa])}})),os("onHide"),os("onShow")],yz=Object.freeze({__proto__:null,init:()=>{const t=or(),r=or(),c=()=>{t.on(clearTimeout)},h=(w,C)=>{c(),t.set(setTimeout(w,C))},b=G("not-implemented");return rc({getTooltip:r.get,isShowing:r.isSet,setTooltip:r.set,clearTooltip:r.clear,clearTimer:c,resetTimer:h,readState:b})}});const JR=Xi({fields:XR,name:"tooltipping",active:YR,state:yz,apis:bz}),wz=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),QR="silver.readonly",uT=Ln([e8("readonly")]),qx=(t,r)=>{const h=t.mainUi.outerContainer.element,b=[t.mainUi.mothership,...t.uiMotherships];r&&je(b,w=>{w.broadcastOn([$d()],{target:h})}),je(b,w=>{w.broadcastOn([QR],{readonly:r})})},eN=(t,r)=>{t.on("init",()=>{t.mode.isReadOnly()&&qx(r,!0)}),t.on("SwitchMode",()=>qx(r,t.mode.isReadOnly())),GP(t)&&t.mode.set("readonly")},ri=()=>Dl.config({channels:{[QR]:{schema:uT,onReceive:(t,r)=>{Gn.set(t,r.readonly)}}}}),ei={item:t=>Gn.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Gn.config({disabled:t}),splitButton:t=>Gn.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Gn.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},pc=(t,r)=>{const c=t.getApi(r);return h=>{h(c)}},Hh=(t,r)=>tr(c=>{pc(t,c)(b=>{const w=t.onSetup(b);J(w)&&r.set(w)})}),Kd=(t,r)=>Rd(c=>pc(t,c)(r.get())),dT=(t,r)=>Ff((c,h)=>{pc(t,c)(t.onAction),!t.triggersSubmenu&&r===id.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&ns(c,N0()),h.stop())}),Cz={[sc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},r1=hr,Yd=(t,r,c,h)=>{const b=qn(Z);return{type:"item",dom:r.dom,components:r1(r.optComponents),data:t.data,eventOrder:Cz,hasSubmenu:t.triggersSubmenu,itemBehaviours:Kt([Eo("item-events",[dT(t,c),Hh(t,b),Kd(t,b)]),ei.item(()=>!t.enabled||h.isDisabled()),ri(),vo.config({})].concat(t.itemBehaviours))}},oh=t=>({value:t.value,meta:ie({text:t.text.getOr("")},t.meta)}),Gx=t=>{const r=jp.os.isMacOS()||jp.os.isiOS(),b=r?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},w=t.split("+"),C=ue(w,A=>{const _=A.toLowerCase().trim();return So(b,_)?b[_]:A});return r?C.join(""):C.join("+")},fT=(t,r,c=[hR])=>pu(t,{tag:"div",classes:c},r),bu=t=>({dom:{tag:"div",classes:[zA]},components:[Br(mc.translate(t))]}),tN=(t,r)=>({dom:{tag:"div",classes:r,innerHtml:t}}),Sz=(t,r)=>({dom:{tag:"div",classes:[zA]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Br(mc.translate(r))]}]}),Bc=t=>({dom:{tag:"div",classes:[HV]},components:[Br(Gx(t))]}),i1=t=>fT("checkmark",t,[VV]),vu=t=>fT("chevron-right",t,[mR]),kz=t=>fT("chevron-down",t,[mR]),Ns=(t,r)=>{const c=t.direction==="vertical"?zV:pR,h=t.align==="left"?UV:Nx;return{dom:{tag:"div",classes:[gR,c,h,(()=>{switch(t.valign){case"top":return UA;case"middle":return WV;case"bottom":return jV}})()]},components:r}},a1=(t,r,c)=>({dom:{tag:"img",classes:r,attributes:{src:t,alt:c.getOr("")}}}),Kx=(t,r,c)=>{const h="custom",b="remove",w=t.ariaLabel,C=t.value,A=t.iconContent.map(R=>xA(R,r.icons,c));return{dom:(()=>{const R=VA,B=A.getOr(""),j={tag:"div",attributes:w.map(X=>({title:r.translate(X)})).getOr({}),classes:[R]};return C===h?Ot(ie({},j),{tag:"button",classes:[...j.classes,"tox-swatches__picker-btn"],innerHtml:B}):C===b?Ot(ie({},j),{classes:[...j.classes,"tox-swatch--remove"],innerHtml:B}):Y(C)?Ot(ie({},j),{attributes:Ot(ie({},j.attributes),{"data-mce-color":C}),styles:{"background-color":C},innerHtml:B}):j})(),optComponents:[]}},hT=t=>{const r=t.map(c=>({attributes:{title:mc.translate(c),id:bn("menu-item")}})).getOr({});return ie({tag:"div",classes:[HA,Xp]},r)},mT=(t,r,c,h)=>{const b={tag:"div",classes:[hR]},w=j=>pu(j,b,r.icons,h),C=()=>O.some({dom:b}),A=c?t.iconContent.map(w).orThunk(C):O.none(),_=t.checkMark,R=O.from(t.meta).fold(()=>bu,j=>So(j,"style")?$e(Sz,j.style):bu),B=t.htmlContent.fold(()=>t.textContent.map(R),j=>O.some(tN(j,[zA])));return{dom:hT(t.ariaLabel),optComponents:[A,B,t.shortcutContent.map(Bc),_,t.caret]}},pg=(t,r,c,h=O.none())=>t.presets==="color"?Kx(t,r,h):mT(t,r,c,h),nN=(t,r)=>$t(t,"tooltipWorker").map(c=>[JR.config({lazySink:r.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:h=>({type:"submenu",item:h,overrides:{maxHeightFunction:Sp}}),mode:"follow-highlight",onShow:(h,b)=>{c(w=>{JR.setComponents(h,[XM({element:Tt.fromDom(w)})])})}})]).getOr([]),gT=t=>dg.DOM.encode(t),oN=(t,r)=>{const c=mc.translate(t),h=gT(c);if(r.length>0){const b=new RegExp(wz(r),"gi");return h.replace(b,w=>`<span class="tox-autocompleter-highlight">${w}</span>`)}else return h},sN=(t,r,c,h,b,w,C,A=!0)=>{const _=pg({presets:h,textContent:O.none(),htmlContent:c?t.text.map(R=>oN(R,r)):O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:O.none(),checkMark:O.none(),caret:O.none(),value:t.value},C.providers,A,t.icon);return Yd({data:oh(t),enabled:t.enabled,getApi:G({}),onAction:R=>b(t.value,t.meta),onSetup:G(Z),triggersSubmenu:!1,itemBehaviours:nN(t.meta,C)},_,w,C.providers)},pT=(t,r)=>ue(t,c=>{switch(c.type){case"cardcontainer":return Ns(c,pT(c.items,r));case"cardimage":return a1(c.src,c.classes,c.alt);case"cardtext":const b=c.name.exists(w=>Ue(r.cardText.highlightOn,w))?O.from(r.cardText.matchText).getOr(""):"";return tN(oN(c.text,b),c.classes)}}),bT=(t,r,c,h)=>{const b=C=>({isEnabled:()=>!Gn.isDisabled(C),setEnabled:A=>{Gn.set(C,!A),je(Oi(C.element,"*"),_=>{C.getSystem().getByDom(_).each(R=>{R.hasConfigured(Gn)&&Gn.set(R,!A)})})}}),w={dom:hT(t.label),optComponents:[O.some({dom:{tag:"div",classes:[gR,pR]},components:pT(t.items,h)})]};return Yd({data:oh(ie({text:O.none()},t)),enabled:t.enabled,getApi:b,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:O.from(h.itemBehaviours).getOr([])},w,r,c.providers)},rN=(t,r,c,h,b,w,C,A=!0)=>{const _=B=>({setActive:H=>{Ro.set(B,H)},isActive:()=>Ro.isOn(B),isEnabled:()=>!Gn.isDisabled(B),setEnabled:H=>Gn.set(B,!H)}),R=pg({presets:c,textContent:r?t.text:O.none(),htmlContent:O.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:r?t.shortcut:O.none(),checkMark:r?O.some(i1(C.icons)):O.none(),caret:O.none(),value:t.value},C,A);return $s(Yd({data:oh(t),enabled:t.enabled,getApi:_,onAction:B=>h(t.value),onSetup:B=>(B.setActive(b),Z),triggersSubmenu:!1,itemBehaviours:[]},R,w,C),{toggling:{toggleClass:fR,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},Yb=qf(Ab(),Tb()),iN=t=>({value:uN(t)}),aN=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,lN=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,cN=t=>aN.test(t)||lN.test(t),uN=t=>tn(t,"#").toUpperCase(),dN=t=>cN(t)?O.some({value:uN(t)}):O.none(),Ez=t=>({value:t.value.replace(aN,(c,h,b,w)=>h+h+b+b+w+w)}),Az=t=>{const r=Ez(t),c=lN.exec(r.value);return c===null?["FFFFFF","FF","FF","FF"]:c},Yx=t=>{const r=t.toString(16);return(r.length===1?"0"+r:r).toUpperCase()},l1=t=>{const r=Yx(t.red)+Yx(t.green)+Yx(t.blue);return iN(r)},fN=Math.min,hN=Math.max,Xb=Math.round,mN=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,gN=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Vh=(t,r,c,h)=>({red:t,green:r,blue:c,alpha:h}),vT=t=>{const r=parseInt(t,10);return r.toString()===t&&r>=0&&r<=255},pN=t=>{let r,c,h;const b=(t.hue||0)%360;let w=t.saturation/100,C=t.value/100;if(w=hN(0,fN(w,1)),C=hN(0,fN(C,1)),w===0)return r=c=h=Xb(255*C),Vh(r,c,h,1);const A=b/60,_=C*w,R=_*(1-Math.abs(A%2-1)),B=C-_;switch(Math.floor(A)){case 0:r=_,c=R,h=0;break;case 1:r=R,c=_,h=0;break;case 2:r=0,c=_,h=R;break;case 3:r=0,c=R,h=_;break;case 4:r=R,c=0,h=_;break;case 5:r=_,c=0,h=R;break;default:r=c=h=0}return r=Xb(255*(r+B)),c=Xb(255*(c+B)),h=Xb(255*(h+B)),Vh(r,c,h,1)},Jb=t=>{const r=Az(t),c=parseInt(r[1],16),h=parseInt(r[2],16),b=parseInt(r[3],16);return Vh(c,h,b,1)},bN=(t,r,c,h)=>{const b=parseInt(t,10),w=parseInt(r,10),C=parseInt(c,10),A=parseFloat(h);return Vh(b,w,C,A)},yT=t=>{if(t==="transparent")return O.some(Vh(0,0,0,0));const r=mN.exec(t);if(r!==null)return O.some(bN(r[1],r[2],r[3],"1"));const c=gN.exec(t);return c!==null?O.some(bN(c[1],c[2],c[3],c[4])):O.none()},wT=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Fc=Vh(255,0,0,1),Tz=t=>{t.dispatch("SkinLoaded")},xT=(t,r)=>{t.dispatch("SkinLoadError",r)},vN=t=>{t.dispatch("ResizeEditor")},Xx=(t,r)=>{t.dispatch("ResizeContent",r)},Oz=(t,r)=>{t.dispatch("ScrollContent",r)},CT=(t,r)=>{t.dispatch("TextColorChange",r)},yN=(t,r)=>{t.dispatch("AfterProgressState",{state:r})},wN=(t,r)=>t.dispatch("ResolveName",{name:r.nodeName.toLowerCase(),target:r}),_z=(t,r)=>{t.dispatch("ToggleToolbarDrawer",{state:r})},Dz=(t,r)=>{t.dispatch("StylesTextUpdate",r)},Mz=(t,r)=>{t.dispatch("AlignTextUpdate",r)},Pz=(t,r)=>{t.dispatch("FontSizeTextUpdate",r)},Rz=(t,r)=>{t.dispatch("FontSizeInputTextUpdate",r)},xN=(t,r)=>{t.dispatch("BlocksTextUpdate",r)},CN=(t,r)=>{t.dispatch("FontFamilyTextUpdate",r)},Qb=(t,r)=>()=>{t(),r()},Va=t=>yu(t,"NodeChange",r=>{r.setEnabled(t.selection.isEditable())}),Nz=(t,r)=>c=>{const h=xp(),b=()=>{c.setActive(t.formatter.match(r));const w=t.formatter.formatChanged(r,c.setActive);h.set(w)};return t.initialized?b():t.once("init",b),()=>{t.off("init",b),h.clear()}},Jx=(t,r)=>c=>{const h=Va(t)(c),b=Nz(t,r)(c);return()=>{h(),b()}},yu=(t,r,c)=>h=>{const b=()=>c(h),w=()=>{c(h),t.on(r,b)};return t.initialized?w():t.once("init",w),()=>{t.off("init",w),t.off(r,b)}},SN=t=>r=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,r.format)})},ml=(t,r)=>()=>t.execCommand(r);var zh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const ST={},kT=(t,r=10)=>{const c=zh.getItem(t),h=v(c)?JSON.parse(c):[],w=(R=>r-R.length<0?R.slice(0,r):R)(h),C=R=>{Be(w,R).each(A),w.unshift(R),w.length>r&&w.pop(),zh.setItem(t,JSON.stringify(w))},A=R=>{w.splice(R,1)};return{add:C,state:()=>w.slice(0)}},Qx=t=>$t(ST,t).getOrThunk(()=>{const r=`tinymce-custom-colors-${t}`,c=zh.getItem(r);if(z(c)){const b=zh.getItem("tinymce-custom-colors");zh.setItem(r,Y(b)?b:"[]")}const h=kT(r,10);return ST[t]=h,h}),ET=t=>ue(Qx(t).state(),r=>({type:"choiceitem",text:r,icon:"checkmark",value:r})),AT=(t,r)=>{Qx(t).add(r)},ev=(t,r,c)=>({hue:t,saturation:r,value:c}),eC=t=>{let r=0,c=0,h=0;const b=t.red/255,w=t.green/255,C=t.blue/255,A=Math.min(b,Math.min(w,C)),_=Math.max(b,Math.max(w,C));if(A===_)return h=A,ev(0,0,h*100);const R=b===A?w-C:C===A?b-w:C-b;return r=b===A?3:C===A?1:5,r=60*(r-R/(_-A)),c=(_-A)/_,h=_,ev(Math.round(r),Math.round(c*100),Math.round(h*100))},Bz=t=>eC(Jb(t)),kN=t=>l1(pN(t)),Fz=t=>dN(t).orThunk(()=>yT(t).map(l1)).getOrThunk(()=>{const r=document.createElement("canvas");r.height=1,r.width=1;const c=r.getContext("2d");c.clearRect(0,0,r.width,r.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const h=c.getImageData(0,0,1,1).data,b=h[0],w=h[1],C=h[2],A=h[3];return l1(Vh(b,w,C,A))}),tC="forecolor",nC="hilitecolor",EN=5,Iz=t=>{const r=[];for(let c=0;c<t.length;c+=2)r.push({text:t[c+1],value:"#"+Fz(t[c]).value,icon:"checkmark",type:"choiceitem"});return r},Xd=t=>r=>r.options.get(t),TT="#000000",Lz=t=>{const r=t.options.register,c=b=>ae(b,v)?{value:Iz(b),valid:!0}:{valid:!1,message:"Must be an array of strings."},h=b=>q(b)&&b>0?{value:b,valid:!0}:{valid:!1,message:"Must be a positive number."};r("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),r("color_map_background",{processor:c}),r("color_map_foreground",{processor:c}),r("color_cols",{processor:h,default:OT(t)}),r("color_cols_foreground",{processor:h,default:AN(t,tC)}),r("color_cols_background",{processor:h,default:AN(t,nC)}),r("custom_colors",{processor:"boolean",default:!0}),r("color_default_foreground",{processor:"string",default:TT}),r("color_default_background",{processor:"string",default:TT})},oC=(t,r)=>r===tC&&t.options.isSet("color_map_foreground")?Xd("color_map_foreground")(t):r===nC&&t.options.isSet("color_map_background")?Xd("color_map_background")(t):Xd("color_map")(t),OT=(t,r="default")=>Math.max(EN,Math.ceil(Math.sqrt(oC(t,r).length))),AN=(t,r)=>{const c=Xd("color_cols")(t),h=OT(t,r);return c===OT(t)?h:c},TN=(t,r="default")=>Math.round(r===tC?Xd("color_cols_foreground")(t):r===nC?Xd("color_cols_background")(t):Xd("color_cols")(t)),ON=Xd("custom_colors"),$z=Xd("color_default_foreground"),Hz=Xd("color_default_background"),_N="rgba(0, 0, 0, 0)",Vz=t=>yT(t).exists(r=>r.alpha!==0),zz=t=>Fm(t,r=>{if(Po(r)){const c=Qs(r,"background-color");return Bn(Vz(c),c)}else return O.none()}).getOr(_N),DN=(t,r)=>{const c=Tt.fromDom(t.selection.getStart()),h=r==="hilitecolor"?zz(c):Qs(c,"color");return yT(h).map(b=>"#"+l1(b).value)},Uz=(t,r,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(r,{value:c}),t.nodeChanged()})},Wz=(t,r)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(r,{value:null},void 0,!0),t.nodeChanged()})},sC=t=>{t.addCommand("mceApplyTextcolor",(r,c)=>{Uz(t,r,c)}),t.addCommand("mceRemoveTextcolor",r=>{Wz(t,r)})},_T=t=>{const r="choiceitem",c={type:r,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:r,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},DT=(t,r,c,h)=>{c==="custom"?NN(t)(w=>{w.each(C=>{AT(r,C),t.execCommand("mceApplyTextcolor",r,C),h(C)})},DN(t,r).getOr(TT)):c==="remove"?(h(""),t.execCommand("mceRemoveTextcolor",r)):(h(c),t.execCommand("mceApplyTextcolor",r,c))},MT=(t,r,c)=>t.concat(ET(r).concat(_T(c))),MN=(t,r,c)=>h=>{h(MT(t,r,c))},PT=(t,r,c)=>{const h=r==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(h,c)},PN=(t,r)=>{t.setTooltip(r)},RN=(t,r)=>c=>{const h=DN(t,r);return wr(h,c.toUpperCase())},tv=(t,r,c)=>{if(Ae(c))return r==="forecolor"?"Text color":"Background color";const h=r==="forecolor"?"Text color {0}":"Background color {0}",b=MT(oC(t,r),r,!1),w=Qe(b,C=>C.value===c).getOr({text:""}).text;return t.translate([h,t.translate(w)])},RT=(t,r,c,h)=>{t.ui.registry.addSplitButton(r,{tooltip:tv(t,c,h.get()),presets:"color",icon:r==="forecolor"?"text-color":"highlight-bg-color",select:RN(t,c),columns:TN(t,c),fetch:MN(oC(t,c),c,ON(t)),onAction:b=>{DT(t,c,h.get(),Z)},onItemAction:(b,w)=>{DT(t,c,w,C=>{h.set(C),CT(t,{name:r,color:C})})},onSetup:b=>{PT(b,r,h.get());const w=C=>{C.name===r&&(PT(b,C.name,C.color),PN(b,tv(t,c,C.color)))};return t.on("TextColorChange",w),Qb(Va(t)(b),()=>{t.off("TextColorChange",w)})}})},NT=(t,r,c,h,b)=>{t.ui.registry.addNestedMenuItem(r,{text:h,icon:r==="forecolor"?"text-color":"highlight-bg-color",onSetup:w=>(PN(w,tv(t,c,b.get())),PT(w,r,b.get()),Va(t)(w)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:RN(t,c),initData:{storageKey:c},onAction:w=>{DT(t,c,w.value,C=>{b.set(C),CT(t,{name:r,color:C})})}}]})},NN=t=>(r,c)=>{let h=!1;const b=A=>{const R=A.getData().colorpicker;h?(r(O.from(R)),A.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",R]))},w=(A,_)=>{_.name==="hex-valid"&&(h=_.value)},C={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:C,onAction:w,onSubmit:b,onClose:Z,onCancel:()=>{r(O.none())}})},BN=t=>{sC(t);const r=$z(t),c=Hz(t),h=qn(r),b=qn(c);RT(t,"forecolor","forecolor",h),RT(t,"backcolor","hilitecolor",b),NT(t,"forecolor","forecolor","Text color",h),NT(t,"backcolor","hilitecolor","Background color",b)},BT=(t,r,c,h,b,w,C,A)=>{const _=$x(r),B=jz(r,c,h,b!=="color"?"normal":"color",w,C,A);return Hx(t,_,B,h,{menuType:b})},jz=(t,r,c,h,b,w,C)=>hr(ue(t,A=>A.type==="choiceitem"?ZR(A).fold(Zd,_=>O.some(rN(_,c===1,h,r,w(_.value),b,C,$x(t)))):O.none())),rC=(t,r)=>{const c=th(r);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(r==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:b=>r==="color"?Wr(b.element,"[aria-checked=true]"):O.none()}},Zz=(t,r)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:r==="color"?".tox-swatches__row":".tox-collection__group",cell:r==="color"?`.${VA}`:`.${Xp}`}},qz=(t,r)=>{const c=Gz(t,r),h=r.colorinput.getColorCols(t.initData.storageKey),b="color",w=BT(bn("menu-value"),c,A=>{t.onAction({value:A})},h,b,id.CLOSE_ON_EXECUTE,t.select.getOr(ne),r.shared.providers),C=Ot(ie({},w),{markers:th(b),movement:rC(h,b)});return{type:"widget",data:{value:bn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Yb.widget(ag.sketch(C))]}},Gz=(t,r)=>{const c=t.initData.allowCustomColors&&r.colorinput.hasCustomColors();return t.initData.colors.fold(()=>MT(r.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),h=>h.concat(_T(c)))},FN=bn("cell-over"),IN=bn("cell-execute"),Kz=t=>(r,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,r]),Yz=(t,r,c)=>{const h=C=>Hn(C,FN,{row:t,col:r}),b=C=>Hn(C,IN,{row:t,col:r}),w=(C,A)=>{A.stop(),b(C)};return ya({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:Kt([Eo("insert-table-picker-cell",[Dt(Mf(),Jn.focus),Dt(sc(),b),Dt(Eh(),w),Dt(Gu(),w)]),Ro.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Jn.config({onFocus:h})])})},iC=(t,r,c)=>{const h=[];for(let b=0;b<r;b++){const w=[];for(let C=0;C<c;C++){const A=t(b+1,C+1);w.push(Yz(b,C,A))}h.push(w)}return h},FT=(t,r,c,h,b)=>{for(let w=0;w<h;w++)for(let C=0;C<b;C++)Ro.set(t[w][C],w<=r&&C<=c)},IT=t=>de(t,r=>ue(r,Pc)),LT=(t,r)=>Br(`${r}x${t}`),Xz={inserttable:(t,r)=>{const b=Kz(r),w=iC(b,10,10),C=LT(0,0),A=Es({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[C],behaviours:Kt([vo.config({})])});return{type:"widget",data:{value:bn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Yb.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:IT(w).concat(A.asSpec()),behaviours:Kt([Eo("insert-table-picker",[tr(_=>{vo.set(A.get(_),[C])}),ik(FN,(_,R,B)=>{const{row:H,col:j}=B.event;FT(w,H,j,10,10),vo.set(A.get(_),[LT(H+1,j+1)])}),ik(IN,(_,R,B)=>{const{row:H,col:j}=B.event;t.onAction({numRows:H+1,numColumns:j+1}),ns(_,N0())})]),Fn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:qz},$T=(t,r)=>$t(Xz,t.fancytype).map(c=>c(t,r)),HT=(t,r,c,h=!0,b=!1)=>{const w=b?kz(c.icons):vu(c.icons),C=_=>({isEnabled:()=>!Gn.isDisabled(_),setEnabled:R=>Gn.set(_,!R),setIconFill:(R,B)=>{Wr(_.element,`svg path[class="${R}"], rect[class="${R}"]`).each(H=>{on(H,"fill",B)})},setTooltip:R=>{const B=c.translate(R);Pu(_.element,{"aria-label":B,title:B})}}),A=pg({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.some(w),checkMark:O.none(),shortcutContent:t.shortcut},c,h);return Yd({data:oh(t),getApi:C,enabled:t.enabled,onAction:Z,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},A,r,c)},aC=(t,r,c,h=!0)=>{const b=C=>({isEnabled:()=>!Gn.isDisabled(C),setEnabled:A=>Gn.set(C,!A)}),w=pg({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,caret:O.none(),checkMark:O.none(),shortcutContent:t.shortcut},c,h);return Yd({data:oh(t),getApi:b,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},w,r,c)},LN=t=>({type:"separator",dom:{tag:"div",classes:[Xp,$V]},components:t.text.map(Br).toArray()}),Jz=(t,r,c,h=!0)=>{const b=C=>({setActive:A=>{Ro.set(C,A)},isActive:()=>Ro.isOn(C),isEnabled:()=>!Gn.isDisabled(C),setEnabled:A=>Gn.set(C,!A)}),w=pg({iconContent:t.icon,textContent:t.text,htmlContent:O.none(),ariaLabel:t.text,checkMark:O.some(i1(c.icons)),caret:O.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,h);return $s(Yd({data:oh(t),enabled:t.enabled,getApi:b,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},w,r,c),{toggling:{toggleClass:fR,toggleOnExecute:!1,selected:t.active}})},Qz=sN,$N=LN,eU=aC,tU=HT,nU=Jz,oU=$T,sU=bT;var rU=Object.freeze({__proto__:null,getCoupled:(t,r,c,h)=>c.getOrCreate(t,r,h),getExistingCoupled:(t,r,c,h)=>c.getExisting(t,r,h)}),iU=[Jl("others",Of(_o.value,Gi()))],HN=Object.freeze({__proto__:null,init:()=>{const t={},r=(w,C)=>{if(Yn(w.others).length===0)throw new Error("Cannot find any known coupled components");return $t(t,C)},c=(w,C,A)=>r(C,A).getOrThunk(()=>{const R=$t(C.others,A).getOrDie("No information found for coupled component: "+A)(w),B=w.getSystem().build(R);return t[A]=B,B}),h=(w,C,A)=>r(C,A).orThunk(()=>($t(C.others,A).getOrDie("No information found for coupled component: "+A),O.none())),b=G({});return rc({readState:b,getExisting:h,getOrCreate:c})}});const Pr=Xi({fields:iU,name:"coupling",apis:rU,state:HN}),VT=t=>{let r=O.none(),c=[];const h=R=>VT(B=>{b(H=>{B(R(H))})}),b=R=>{C()?_(R):c.push(R)},w=R=>{C()||(r=O.some(R),A(c),c=[])},C=()=>r.isSome(),A=R=>{je(R,_)},_=R=>{r.each(B=>{setTimeout(()=>{R(B)},0)})};return t(w),{get:b,map:h,isReady:C}},aU={nu:VT,pure:t=>VT(r=>{r(t)})},lU=t=>{setTimeout(()=>{throw t},0)},Uh=t=>{const r=_=>{t().then(_,lU)};return{map:_=>Uh(()=>t().then(_)),bind:_=>Uh(()=>t().then(R=>_(R).toPromise())),anonBind:_=>Uh(()=>t().then(()=>_.toPromise())),toLazy:()=>aU.nu(r),toCached:()=>{let _=null;return Uh(()=>(_===null&&(_=t()),_))},toPromise:t,get:r}},ua={nu:t=>Uh(()=>new Promise(t)),pure:t=>Uh(()=>Promise.resolve(t))},VN=G("sink"),zN=G(fc({name:VN(),overrides:G({dom:{tag:"div"},behaviours:Kt([xa.config({useFixed:ge})]),events:ir([Nf(qu()),Nf(bi()),Nf(Eh())])})})),UN=(t,r)=>{const c=t.getHotspot(r).getOr(r),h="hotspot",b=t.getAnchorOverrides();return t.layouts.fold(()=>({type:h,hotspot:c,overrides:b}),w=>({type:h,hotspot:c,overrides:b,layouts:w}))},cU=(t,r,c)=>{const h=t.fetch;return h(c).map(r)},uU=(t,r,c,h,b,w,C)=>{const A=cU(t,r,h),_=WN(h,t);return A.map(R=>R.bind(B=>O.from(Lh.sketch(Ot(ie({},w.menu()),{uid:dp(""),data:B,highlightOnOpen:C,onOpenMenu:(H,j)=>{const X=_().getOrDie();xa.position(X,j,{anchor:c}),ss.decloak(b)},onOpenSubmenu:(H,j,X)=>{const oe=_().getOrDie();xa.position(oe,X,{anchor:{type:"submenu",item:j}}),ss.decloak(b)},onRepositionMenu:(H,j,X)=>{const oe=_().getOrDie();xa.position(oe,j,{anchor:c}),je(X,Se=>{xa.position(oe,Se.triggeredMenu,{anchor:{type:"submenu",item:Se.triggeringItem}})})},onEscape:()=>(Jn.focus(h),ss.close(b),O.some(!0))})))))},lC=(t,r,c,h,b,w,C)=>{const A=UN(t,c);return uU(t,r,A,c,h,b,C).map(R=>(R.fold(()=>{ss.isOpen(h)&&ss.close(h)},B=>{ss.cloak(h),ss.open(h,B),w(h)}),h))},dU=(t,r,c,h,b,w,C)=>(ss.close(h),ua.pure(h)),zT=(t,r,c,h,b,w)=>{const C=Pr.getCoupled(c,"sandbox");return(ss.isOpen(C)?dU:lC)(t,r,c,C,h,b,w)},fU=(t,r,c)=>{const h=qo.getCurrent(r).getOr(r),b=ee(t.element);c?Cn(h.element,"min-width",b+"px"):ts(h.element,b)},WN=(t,r)=>t.getSystem().getByUid(r.uid+"-"+VN()).map(c=>()=>_o.value(c)).getOrThunk(()=>r.lazySink.fold(()=>()=>_o.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),jN=t=>{ss.getState(t).each(r=>{Lh.repositionMenus(r)})},UT=(t,r,c)=>{const h=qm(),b=(A,_)=>{const R=UN(t,r);h.link(r.element),t.matchWidth&&fU(R.hotspot,_,t.useMinWidth),t.onOpen(R,A,_),c!==void 0&&c.onOpen!==void 0&&c.onOpen(A,_)},w=(A,_)=>{h.unlink(r.element),c!==void 0&&c.onClose!==void 0&&c.onClose(A,_)},C=WN(r,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:h.id,role:"listbox"}},behaviours:du.augment(t.sandboxBehaviours,[ln.config({store:{mode:"memory",initialValue:r}}),ss.config({onOpen:b,onClose:w,isPartOf:(A,_,R)=>Oh(_,R)||Oh(r,R),getAttachPoint:()=>C().getOrDie()}),qo.config({find:A=>ss.getState(A).bind(_=>qo.getCurrent(_))}),Dl.config({channels:ie(ie({},dE({isExtraPart:ne})),fE({doReposition:jN}))})])}},ZN=t=>{const r=Pr.getCoupled(t,"sandbox");jN(r)},WT=()=>[tt("sandboxClasses",[]),du.field("sandboxBehaviours",[qo,Dl,ss,ln])],hU=G([Rt("dom"),Rt("fetch"),os("onOpen"),_l("onExecute"),tt("getHotspot",O.some),tt("getAnchorOverrides",G({})),Mh(),yi("dropdownBehaviours",[Ro,Pr,Fn,Jn]),Rt("toggleClass"),tt("eventOrder",{}),Ds("lazySink"),tt("matchWidth",!1),tt("useMinWidth",!1),Ds("role")].concat(WT())),mU=G([fu({schema:[pw(),tt("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),zN()]),gU=(t,r,c,h)=>{const b=B=>$t(t.dom,"attributes").bind(H=>$t(H,B)),w=B=>{ss.getState(B).each(H=>{Lh.highlightPrimary(H)})},C=(B,H,j)=>zT(t,qe,B,h,H,j),A=B=>{C(B,w,Ha.HighlightMenuAndItem).get(Z)},_={expand:B=>{Ro.isOn(B)||C(B,Z,Ha.HighlightNone).get(Z)},open:B=>{Ro.isOn(B)||C(B,Z,Ha.HighlightMenuAndItem).get(Z)},refetch:B=>Pr.getExistingCoupled(B,"sandbox").fold(()=>C(B,Z,Ha.HighlightMenuAndItem).map(Z),j=>lC(t,qe,B,j,h,Z,Ha.HighlightMenuAndItem).map(Z)),isOpen:Ro.isOn,close:B=>{Ro.isOn(B)&&C(B,Z,Ha.HighlightMenuAndItem).get(Z)},repositionMenus:B=>{Ro.isOn(B)&&ZN(B)}},R=(B,H)=>(Rf(B),O.some(!0));return{uid:t.uid,dom:t.dom,components:r,behaviours:_i(t.dropdownBehaviours,[Ro.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Pr.config({others:{sandbox:B=>UT(t,B,{onOpen:()=>Ro.on(B),onClose:()=>Ro.off(B)})}}),Fn.config({mode:"special",onSpace:R,onEnter:R,onDown:(B,H)=>{if(Ic.isOpen(B)){const j=Pr.getCoupled(B,"sandbox");w(j)}else Ic.open(B);return O.some(!0)},onEscape:(B,H)=>Ic.isOpen(B)?(Ic.close(B),O.some(!0)):O.none()}),Jn.config({})]),events:od(O.some(A)),eventOrder:Ot(ie({},t.eventOrder),{[sc()]:["disabling","toggling","alloy.base.behaviour"]}),apis:_,domModification:{attributes:ie(ie({"aria-haspopup":"true"},t.role.fold(()=>({}),B=>({role:B}))),t.dom.tag==="button"?{type:b("type").getOr("button")}:{})}}},Ic=Sa({name:"Dropdown",configFields:hU(),partFields:mU(),factory:gU,apis:{open:(t,r)=>t.open(r),refetch:(t,r)=>t.refetch(r),expand:(t,r)=>t.expand(r),close:(t,r)=>t.close(r),isOpen:(t,r)=>t.isOpen(r),repositionMenus:(t,r)=>t.repositionMenus(r)}}),pU=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},bU=t=>{const r=ln.getValue(t),c=Fx(t).map(CR);Ic.refetch(r).get(()=>{const h=Pr.getCoupled(r,"sandbox");c.each(b=>Fx(h).each(w=>GA(w,b)))})},vU=(t,r)=>{yU(t).each(c=>{f8(t,c.element,r.event.eventType,r.event.interactionEvent)})},yU=t=>ss.getState(t).bind(ps.getHighlighted).bind(ps.getHighlighted),wU=t=>vi(t.element,Ix)?O.some(t.element):Wr(t.element,"."+Ix),jT=(t,r,c)=>{qA(t).each(h=>{KA(h,c),wU(r).each(w=>{U(w,"id").each(C=>on(h.element,"aria-controls",C))})}),on(c.element,"aria-selected","true")},xU=(t,r,c)=>{on(c.element,"aria-selected","false")},CU=t=>{qA(t).each(r=>Jn.focus(r))},SU=t=>Pr.getExistingCoupled(t,"sandbox").bind(Fx).map(CR).map(c=>c.fetchPattern).getOr("");var nv;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(nv||(nv={}));const kU=(t,r,c,h,b)=>{const w=c.shared.providers,C=A=>b?Ot(ie({},A),{shortcut:O.none(),icon:A.text.isSome()?O.none():A.icon}):A;switch(t.type){case"menuitem":return GR(t).fold(Zd,A=>O.some(eU(C(A),r,w,h)));case"nestedmenuitem":return hz(t).fold(Zd,A=>O.some(tU(C(A),r,w,h,b)));case"togglemenuitem":return gz(t).fold(Zd,A=>O.some(nU(C(A),r,w,h)));case"separator":return sT(t).fold(Zd,A=>O.some($N(A)));case"fancymenuitem":return dz(t).fold(Zd,A=>oU(A,c));default:return O.none()}},EU=(t,r,c,h,b,w,C)=>{const A=h===1,_=!A||$x(t);return hr(ue(t,R=>{switch(R.type){case"separator":return JV(R).fold(Zd,B=>O.some($N(B)));case"cardmenuitem":return WR(R).fold(Zd,B=>O.some(sU(Ot(ie({},B),{onAction:H=>{B.onAction(H),c(B.value,B.meta)}}),b,w,{itemBehaviours:nN(B.meta,w),cardText:{matchText:r,highlightOn:C}})));case"autocompleteitem":default:return NR(R).fold(Zd,B=>O.some(Qz(B,r,A,"normal",c,b,w,_)))}}))},qN=(t,r,c,h,b,w)=>{const C=$x(r),A=hr(ue(r,B=>{const H=X=>b?!So(X,"text"):C,j=X=>kU(X,c,h,H(X),b);return B.type==="nestedmenuitem"&&B.getSubmenuItems().length<=0?j(Ot(ie({},B),{enabled:!1})):j(B)})),_=pU(w);return(b?Wb:Hx)(t,C,A,1,_)},cC=t=>Lh.singleData(t.value,t),AU=(t,r,c,h)=>{const b=rC(r,h),w=th(h);return{data:cC(Ot(ie({},t),{movement:b,menuBehaviours:Gb.unnamedEvents(r!=="auto"?[]:[tr((C,A)=>{lT(C,4,w.item).each(({numColumns:_,numRows:R})=>{Fn.setGridSize(C,R,_)})})])})),menu:{markers:th(h),fakeFocus:c===nv.ContentFocus}}},TU=(t,r)=>LA(Tt.fromDom(r.startContainer)).map(c=>{const h=t.createRng();return h.selectNode(c.dom),h}),OU={register:(t,r)=>{const c=bn("autocompleter"),h=qn(!1),b=qn(!1),w=ya(gr.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:Kt([Eo("dismissAutocompleter",[Dt(Vm(),()=>B()),Dt(L0(),(et,He)=>{U(He.event.target,"id").each(Pe=>on(Tt.fromDom(t.getBody()),"aria-activedescendant",Pe))})])]),lazySink:r.getSink})),C=()=>gr.isOpen(w),A=b.get,_=()=>{if(C()){gr.hide(w),t.dom.remove(c,!1);const et=Tt.fromDom(t.getBody());U(et,"aria-owns").filter(He=>He===c).each(()=>{be(et,"aria-owns"),be(et,"aria-activedescendant")})}},R=()=>gr.getContent(w).bind(et=>st(et.components(),0)),B=()=>t.execCommand("mceAutocompleterClose"),H=et=>{const He=ao(et,Pe=>O.from(Pe.columns)).getOr(1);return de(et,Pe=>{const Je=Pe.items;return EU(Je,Pe.matchText,(It,At)=>{const Ct=t.selection.getRng();TU(t.dom,Ct).each(Zt=>{const Jt={hide:()=>B(),reload:Ao=>{_(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ao})}};h.set(!0),Pe.onAction(Jt,Zt,It,At),h.set(!1)})},He,id.BUBBLE_TO_SANDBOX,r,Pe.highlightOn)})},j=(et,He)=>{FV(Tt.fromDom(t.getBody())).each(Pe=>{const Je=ao(et,It=>O.from(It.columns)).getOr(1);gr.showMenuAt(w,{anchor:{type:"node",root:Tt.fromDom(t.getBody()),node:O.from(Pe)}},AU(Hx("autocompleter-value",!0,He,Je,{menuType:"normal"}),Je,nv.ContentFocus,"normal"))}),R().each(ps.highlightFirst)},X=et=>{const He=H(et);He.length>0?(j(et,He),on(Tt.fromDom(t.getBody()),"aria-owns",c),t.inline||oe()):_()},oe=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const et=t.getDoc().documentElement,He=t.selection.getNode(),Pe=b8(w.element);oi(Pe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${He.offsetTop}px`,left:`${He.offsetLeft}px`}),t.dom.add(et,Pe.dom),Wr(Pe,'[role="menu"]').each(Je=>{es(Je,"position"),es(Je,"max-height")})};t.on("AutocompleterStart",({lookupData:et})=>{b.set(!0),h.set(!1),X(et)}),t.on("AutocompleterUpdate",({lookupData:et})=>X(et)),t.on("AutocompleterEnd",()=>{_(),b.set(!1),h.set(!1)});const Se={cancelIfNecessary:B,isMenuOpen:C,isActive:A,isProcessingAction:h.get,getMenu:R};IV.setup(Se,t)}},GN=["visible","hidden","clip"],KN=t=>_r(t).length>0&&!Ue(GN,t),ZT=t=>{if(ql(t)){const r=Qs(t,"overflow-x"),c=Qs(t,"overflow-y");return KN(r)||KN(c)}else return!1},_U=t=>{const r=H3(t,ZT),c=r.length===0?_s(t).map(Rs).map(h=>H3(h,ZT)).getOr([]):r;return en(c).map(h=>({element:h,others:c.slice(1)}))},Wh=(t,r)=>Wd(t)?_U(r):O.none(),c1=t=>{const r=[...ue(t.others,Sr),Zi()];return H2(Sr(t.element),r)},ov=(t,r,c)=>Ju(t,r,c).isSome(),YN=(t,r)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...w)=>{c=setTimeout(()=>{t.apply(null,w),c=null},r)}}},XN=5,DU=400,JN=t=>{const r=t.raw;return r.touches===void 0||r.touches.length!==1?O.none():O.some(r.touches[0])},MU=(t,r)=>{const c=Math.abs(t.clientX-r.x),h=Math.abs(t.clientY-r.y);return c>XN||h>XN},PU=t=>{const r=or(),c=qn(!1),h=YN(R=>{t.triggerEvent(ek(),R),c.set(!0)},DU),b=R=>(JN(R).each(B=>{h.cancel();const H={x:B.clientX,y:B.clientY,target:R.target};h.schedule(R),c.set(!1),r.set(H)}),O.none()),w=R=>(h.cancel(),JN(R).each(B=>{r.on(H=>{MU(B,H)&&r.clear()})}),O.none()),C=R=>{h.cancel();const B=H=>vs(H.target,R.target);return r.get().filter(B).map(H=>c.get()?(R.prevent(),!1):t.triggerEvent(Gu(),R))},A=Ba([{key:Df(),value:b},{key:rp(),value:w},{key:Im(),value:C}]);return{fireIfReady:(R,B)=>$t(A,B).bind(H=>H(R))}},RU=t=>t.raw.which===jH[0]&&!Ue(["input","textarea"],Os(t.target))&&!ov(t.target,'[contenteditable="true"]'),NU=(t,r)=>{const c=ie({stopBackspace:!0},r),h=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],b=PU(c),w=ue(h.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),X=>Qa(t,X,oe=>{b.fireIfReady(oe,X).each(et=>{et&&oe.kill()}),c.triggerEvent(X,oe)&&oe.kill()})),C=or(),A=Qa(t,"paste",X=>{b.fireIfReady(X,"paste").each(Se=>{Se&&X.kill()}),c.triggerEvent("paste",X)&&X.kill(),C.set(setTimeout(()=>{c.triggerEvent(Q2(),X)},0))}),_=Qa(t,"keydown",X=>{c.triggerEvent("keydown",X)?X.kill():c.stopBackspace&&RU(X)&&X.prevent()}),R=Qa(t,"focusin",X=>{c.triggerEvent("focusin",X)&&X.kill()}),B=or(),H=Qa(t,"focusout",X=>{c.triggerEvent("focusout",X)&&X.kill(),B.set(setTimeout(()=>{c.triggerEvent(J2(),X)},0))});return{unbind:()=>{je(w,X=>{X.unbind()}),_.unbind(),R.unbind(),H.unbind(),A.unbind(),C.on(clearTimeout),B.on(clearTimeout)}}},QN=(t,r)=>{const c=$t(t,"target").getOr(r);return qn(c)},BU=(t,r)=>{const c=qn(!1),h=qn(!1);return{stop:()=>{c.set(!0)},cut:()=>{h.set(!0)},isStopped:c.get,isCut:h.get,event:t,setSource:r.set,getSource:r.get}},eB=t=>{const r=qn(!1);return{stop:()=>{r.set(!0)},cut:Z,isStopped:r.get,isCut:ne,event:t,setSource:Ee("Cannot set source of a broadcasted event"),getSource:Ee("Cannot get source of a broadcasted event")}},sv=Ol.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),tB=(t,r,c,h,b,w)=>{const C=t(r,h),A=BU(c,b);return C.fold(()=>(w.logEventNoHandlers(r,h),sv.complete()),_=>{const R=_.descHandler;return aw(R)(A),A.isStopped()?(w.logEventStopped(r,_.element,R.purpose),sv.stopped()):A.isCut()?(w.logEventCut(r,_.element,R.purpose),sv.complete()):mi(_.element).fold(()=>(w.logNoParent(r,_.element,R.purpose),sv.complete()),H=>(w.logEventResponse(r,_.element,R.purpose),sv.resume(H)))})},nB=(t,r,c,h,b,w)=>tB(t,r,c,h,b,w).fold(ge,C=>nB(t,r,c,C,b,w),ne),FU=(t,r,c,h,b)=>{const w=QN(c,h);return tB(t,r,c,h,w,b)},IU=(t,r,c)=>{const h=eB(r);return je(t,b=>{const w=b.descHandler;aw(w)(h)}),h.isStopped()},qT=(t,r,c,h)=>oB(t,r,c,c.target,h),oB=(t,r,c,h,b)=>{const w=QN(c,h);return nB(t,r,c,h,w,b)},LU=(t,r)=>({element:t,descHandler:r}),$U=(t,r)=>({id:t,descHandler:r}),sB=()=>{const t={},r=(C,A,_)=>{Xe(_,(R,B)=>{const H=t[B]!==void 0?t[B]:{};H[A]=T8(R,C),t[B]=H})},c=(C,A)=>V0(A).bind(_=>$t(C,_)).map(_=>LU(A,_));return{registerId:r,unregisterId:C=>{Xe(t,(A,_)=>{So(A,C)&&delete A[C]})},filterByType:C=>$t(t,C).map(A=>Qo(A,(_,R)=>$U(R,_))).getOr([]),find:(C,A,_)=>$t(t,A).bind(R=>Fm(_,B=>c(R,B),C))}},rB=()=>{const t=sB(),r={},c=R=>{const B=R.element;return V0(B).getOrThunk(()=>x8("uid-",R.element))},h=(R,B)=>{const H=r[B];if(H===R)w(R);else throw new Error('The tagId "'+B+'" is already used by: '+Um(H.element)+`
Cannot use it for: `+Um(R.element)+`
The conflicting element is`+(Wo(H.element)?" ":" not ")+"already in the DOM")},b=R=>{const B=c(R);Js(r,B)&&h(R,B);const H=[R];t.registerId(H,B,R.events),r[B]=R},w=R=>{V0(R.element).each(B=>{delete r[B],t.unregisterId(B)})};return{find:(R,B,H)=>t.find(R,B,H),filter:R=>t.filterByType(R),register:b,unregister:w,getById:R=>$t(r,R)}},ad=Rl({name:"Container",factory:t=>{const h=t.dom,{attributes:r}=h,c=sy(h,["attributes"]);return{uid:t.uid,dom:ie({tag:"div",attributes:ie({role:"presentation"},r)},c),components:t.components,behaviours:Zf(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[tt("components",[]),yi("containerBehaviours",[]),tt("events",{}),tt("domModification",{}),tt("eventOrder",{})]}),uC=t=>{const r=He=>mi(t.element).fold(ge,Pe=>vs(He,Pe)),c=rB(),h=(He,Pe)=>c.find(r,He,Pe),b=NU(t.element,{triggerEvent:(He,Pe)=>yk(He,Pe.target,Je=>qT(h,He,Pe,Je))}),w={debugInfo:G("real"),triggerEvent:(He,Pe,Je)=>{yk(He,Pe,It=>oB(h,He,Je,Pe,It))},triggerFocus:(He,Pe)=>{V0(He).fold(()=>{lc(He)},Je=>{yk(lp(),He,It=>(FU(h,lp(),{originator:Pe,kill:Z,prevent:Z,target:He},He,It),!1))})},triggerEscape:(He,Pe)=>{w.triggerEvent("keydown",He.element,Pe.event)},getByUid:He=>Se(He),getByDom:He=>et(He),build:ya,buildOrPatch:hw,addToGui:He=>{_(He)},removeFromGui:He=>{R(He)},addToWorld:He=>{C(He)},removeFromWorld:He=>{A(He)},broadcast:He=>{j(He)},broadcastOn:(He,Pe)=>{X(He,Pe)},broadcastEvent:(He,Pe)=>{oe(He,Pe)},isConnected:ge},C=He=>{He.connect(w),Io(He.element)||(c.register(He),je(He.components(),C),w.triggerEvent(Xy(),He.element,{target:He.element}))},A=He=>{Io(He.element)||(je(He.components(),A),c.unregister(He)),He.disconnect()},_=He=>{Rh(t,He)},R=He=>{Wf(He)},B=()=>{b.unbind(),Dc(t.element)},H=He=>{const Pe=c.filter($m());je(Pe,Je=>{const It=Je.descHandler;aw(It)(He)})},j=He=>{H({universal:!0,data:He})},X=(He,Pe)=>{H({universal:!1,channels:He,data:Pe})},oe=(He,Pe)=>{const Je=c.filter(He);return IU(Je,Pe)},Se=He=>c.getById(He).fold(()=>_o.error(new Error('Could not find component with uid: "'+He+'" in system.')),_o.value),et=He=>{const Pe=V0(He).getOr("not found");return Se(Pe)};return C(t),{root:t,element:t.element,destroy:B,add:_,remove:R,getByUid:Se,getByDom:et,addToWorld:C,removeFromWorld:A,broadcast:j,broadcastOn:X,broadcastEvent:oe}},HU=(t,r)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ue(t.items,r.interpreter)}),VU=G([tt("prefix","form-field"),yi("fieldBehaviours",[qo,ln])]),zU=G([fc({schema:[Rt("dom")],name:"label"}),fc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Rt("text")],name:"aria-descriptor"}),Ca({factory:{sketch:t=>{const r=sp(t,["factory"]);return t.factory.sketch(r)}},schema:[Rt("factory")],name:"field"})]),UU=(t,r,c,h)=>{const b=_i(t.fieldBehaviours,[qo.config({find:A=>js(A,t,"field")}),ln.config({store:{mode:"manual",getValue:A=>qo.getCurrent(A).bind(ln.getValue),setValue:(A,_)=>{qo.getCurrent(A).each(R=>{ln.setValue(R,_)})}}})]),w=ir([tr((A,_)=>{const R=y4(A,t,["label","field","aria-descriptor"]);R.field().each(B=>{const H=bn(t.prefix);R.label().each(j=>{on(j.element,"for",H),on(B.element,"id",H)}),R["aria-descriptor"]().each(j=>{const X=bn(t.prefix);on(j.element,"id",X),on(B.element,"aria-describedby",X)})})})]),C={getField:A=>js(A,t,"field"),getLabel:A=>js(A,t,"label")};return{uid:t.uid,dom:t.dom,components:r,behaviours:b,events:w,apis:C}},As=Sa({name:"FormField",configFields:VU(),partFields:zU(),factory:UU,apis:{getField:(t,r)=>t.getField(r),getLabel:(t,r)=>t.getLabel(r)}});var dC=Object.freeze({__proto__:null,exhibit:(t,r)=>iu({attributes:Ba([{key:r.tabAttr,value:"true"}])})}),WU=[tt("tabAttr","data-alloy-tabstop")];const ar=Xi({fields:WU,name:"tabstopping",active:dC});var jU=tinymce.util.Tools.resolve("tinymce.html.Entities");const rv=(t,r,c,h)=>{const b=qU(t,r,c,h);return As.sketch(b)},ZU=(t,r)=>rv(t,r,[],[]),qU=(t,r,c,h)=>({dom:iv(c),components:t.toArray().concat([r]),fieldBehaviours:Kt(h)}),Dee=()=>iv([]),iv=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),Lc=(t,r)=>As.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Br(r.translate(t))]}),gl=bn("form-component-change"),u1=bn("form-close"),jh=bn("form-cancel"),Jd=bn("form-action"),av=bn("form-submit"),GT=bn("form-block"),KT=bn("form-unblock"),iB=bn("form-tabchange"),aB=bn("form-resize"),GU=(t,r,c)=>{const h=t.label.map(X=>Lc(X,r)),b=r.icons(),w=X=>{var oe;return(oe=b[X])!==null&&oe!==void 0?oe:X},C=X=>(oe,Se)=>{Ju(Se.event.target,"[data-collection-item-value]").each(et=>{X(oe,Se,et,$r(et,"data-collection-item-value"))})},A=(X,oe)=>{const Se=ue(oe,Pe=>{const Je=mc.translate(Pe.text),It=t.columns===1?`<div class="tox-collection__item-label">${Je}</div>`:"",At=`<div class="tox-collection__item-icon">${w(Pe.icon)}</div>`,Ct={_:" "," - ":" ","-":" "},Zt=Je.replace(/\_| \- |\-/g,Ao=>Ct[Ao]);return`<div class="tox-collection__item${r.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${jU.encodeAllRaw(Pe.value)}" title="${Zt}" aria-label="${Zt}">${At}${It}</div>`}),et=t.columns!=="auto"&&t.columns>1?wt(Se,t.columns):[Se],He=ue(et,Pe=>`<div class="tox-collection__group">${Pe.join("")}</div>`);up(X.element,He.join(""))},_=C((X,oe,Se,et)=>{oe.stop(),r.isDisabled()||Hn(X,Jd,{name:t.name,value:et})}),R=[Dt(Mf(),C((X,oe,Se)=>{lc(Se)})),Dt(Eh(),_),Dt(Gu(),_),Dt(Pf(),C((X,oe,Se)=>{Wr(X.element,"."+zb).each(et=>{br(et,zb)}),Qr(Se,zb)})),Dt(X2(),C(X=>{Wr(X.element,"."+zb).each(oe=>{br(oe,zb)})})),Ff(C((X,oe,Se,et)=>{Hn(X,Jd,{name:t.name,value:et})}))],B=(X,oe)=>ue(Oi(X.element,".tox-collection__item"),oe),H=As.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:qe},behaviours:Kt([Gn.config({disabled:r.isDisabled,onDisabled:X=>{B(X,oe=>{Qr(oe,"tox-collection__item--state-disabled"),on(oe,"aria-disabled",!0)})},onEnabled:X=>{B(X,oe=>{br(oe,"tox-collection__item--state-disabled"),be(oe,"aria-disabled")})}}),ri(),vo.config({}),ln.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(X,oe)=>{A(X,oe),t.columns==="auto"&&lT(X,5,"tox-collection__item").each(({numRows:Se,numColumns:et})=>{Fn.setGridSize(X,Se,et)}),ns(X,aB)}}),ar.config({}),Fn.config(Zz(t.columns,"normal")),Eo("collection-events",R)]),eventOrder:{[sc()]:["disabling","alloy.base.behaviour","collection-events"]}});return rv(h,H,["tox-form__group--collection"],[])},KU=["input","textarea"],lB=t=>{const r=Os(t);return Ue(KU,r)},cB=(t,r)=>{const c=r.getRoot(t).getOr(t.element);br(c,r.invalidClass),r.notify.each(h=>{lB(t.element)&&on(t.element,"aria-invalid",!1),h.getContainer(t).each(b=>{up(b,h.validHtml)}),h.onValid(t)})},YT=(t,r,c,h)=>{const b=r.getRoot(t).getOr(t.element);Qr(b,r.invalidClass),r.notify.each(w=>{lB(t.element)&&on(t.element,"aria-invalid",!0),w.getContainer(t).each(C=>{up(C,h)}),w.onInvalid(t,h)})},bg=(t,r,c)=>r.validator.fold(()=>ua.pure(_o.value(!0)),h=>h.validate(t)),rh=(t,r,c)=>(r.notify.each(h=>{h.onValidate(t)}),bg(t,r).map(h=>t.getSystem().isConnected()?h.fold(b=>(YT(t,r,c,b),_o.error(b)),b=>(cB(t,r),_o.value(b))):_o.error("No longer in system")));var uB=Object.freeze({__proto__:null,markValid:cB,markInvalid:YT,query:bg,run:rh,isInvalid:(t,r)=>{const c=r.getRoot(t).getOr(t.element);return vi(c,r.invalidClass)}}),fC=Object.freeze({__proto__:null,events:(t,r)=>t.validator.map(c=>ir([Dt(c.onEvent,h=>{rh(h,t,r).get(qe)})].concat(c.validateOnLoad?[tr(h=>{rh(h,t,r).get(Z)})]:[]))).getOr({})}),XU=[Rt("invalidClass"),tt("getRoot",O.none),ec("notify",[tt("aria","alert"),tt("getContainer",O.none),tt("validHtml",""),os("onValid"),os("onInvalid"),os("onValidate")]),ec("validator",[Rt("validate"),tt("onEvent","input"),tt("validateOnLoad",!0)])];const bc=Xi({fields:XU,name:"invalidating",active:fC,apis:uB,extra:{validation:t=>r=>{const c=ln.getValue(r);return ua.pure(t(c))}}});var JU=Object.freeze({__proto__:null,events:()=>ir([sk(u8(),ge)]),exhibit:()=>iu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const lv=Xi({fields:[],name:"unselecting",active:JU}),QU=(t,r)=>Ic.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Kt([ei.button(r.providers.isDisabled),ri(),lv.config({}),ar.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:c=>ua.nu(h=>t.fetch(h)).map(h=>O.from(cC($s(BT(bn("menu-value"),h,b=>{t.onItemAction(c,b)},t.columns,t.presets,id.CLOSE_ON_EXECUTE,ne,r.providers),{movement:rC(t.columns,t.presets)})))),parts:{menu:Jp(!1,1,t.presets)}}),dB=bn("color-input-change"),fB=bn("color-swatch-change"),cv=bn("color-picker-cancel"),eW=(t,r,c,h)=>{const b=As.parts.field({factory:hg,inputClasses:["tox-textfield"],data:h,onSetValue:R=>bc.run(R).get(Z),inputBehaviours:Kt([Gn.config({disabled:r.providers.isDisabled}),ri(),ar.config({}),bc.config({invalidClass:"tox-textbox-field-invalid",getRoot:R=>ma(R.element),notify:{onValid:R=>{const B=ln.getValue(R);Hn(R,dB,{color:B})}},validator:{validateOnLoad:!1,validate:R=>{const B=ln.getValue(R);if(B.length===0)return ua.pure(_o.value(!0));{const H=Tt.fromTag("span");Cn(H,"background-color",B);const j=zs(H,"background-color").fold(()=>_o.error("blah"),X=>_o.value(B));return ua.pure(j)}}}})]),selectOnFocus:!1}),w=t.label.map(R=>Lc(R,r.providers)),C=(R,B)=>{Hn(R,fB,{value:B})},A=(R,B)=>{_.getOpt(R).each(H=>{B==="custom"?c.colorPicker(j=>{j.fold(()=>ns(H,cv),X=>{C(H,X),AT(t.storageKey,X)})},"#ffffff"):B==="remove"?C(H,""):C(H,B)})},_=Es(QU({dom:{tag:"span",attributes:{"aria-label":r.providers.translate("Color swatch")}},layouts:{onRtl:()=>[ca,la,Ti],onLtr:()=>[la,ca,Ti]},components:[],fetch:MN(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:A},r));return As.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:w.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[b,_.asSpec()]}]),fieldBehaviours:Kt([Eo("form-field-events",[Dt(dB,(R,B)=>{_.getOpt(R).each(H=>{Cn(H.element,"background-color",B.event.color)}),Hn(R,gl,{name:t.name})}),Dt(fB,(R,B)=>{As.getField(R).each(H=>{ln.setValue(H,B.event.value),qo.getCurrent(R).each(Jn.focus)})}),Dt(cv,(R,B)=>{As.getField(R).each(H=>{qo.getCurrent(R).each(Jn.focus)})})])])})},XT=fc({schema:[Rt("dom")],name:"label"}),Zh=t=>fc({name:""+t+"-edge",overrides:r=>r.model.manager.edgeActions[t].fold(()=>({}),h=>({events:ir([nw(Df(),(b,w,C)=>h(b,C),[r]),nw(bi(),(b,w,C)=>h(b,C),[r]),nw(Ky(),(b,w,C)=>{C.mouseIsDown.get()&&h(b,C)},[r])])}))}),tW=Zh("top-left"),nW=Zh("top"),hB=Zh("top-right"),oW=Zh("right"),sW=Zh("bottom-right"),rW=Zh("bottom"),mB=Zh("bottom-left"),iW=Zh("left"),aW=Ca({name:"thumb",defaults:G({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:ir([cp(Df(),t,"spectrum"),cp(rp(),t,"spectrum"),cp(Im(),t,"spectrum"),cp(bi(),t,"spectrum"),cp(Ky(),t,"spectrum"),cp(Y2(),t,"spectrum")])})}),mC=t=>Xf(t.event),lW=Ca({schema:[Xr("mouseIsDown",()=>qn(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,h=(b,w)=>c.getValueFromEvent(w).map(C=>c.setValueFrom(b,t,C));return{behaviours:Kt([Fn.config({mode:"special",onLeft:(b,w)=>c.onLeft(b,t,mC(w)),onRight:(b,w)=>c.onRight(b,t,mC(w)),onUp:(b,w)=>c.onUp(b,t,mC(w)),onDown:(b,w)=>c.onDown(b,t,mC(w))}),ar.config({}),Jn.config({})]),events:ir([Dt(Df(),h),Dt(rp(),h),Dt(bi(),h),Dt(Ky(),(b,w)=>{t.mouseIsDown.get()&&h(b,w)})])}}});var cW=[XT,iW,oW,nW,rW,tW,hB,mB,sW,aW,lW];const d1=G("slider.change.value"),dW=t=>t.type.indexOf("touch")!==-1,JT=t=>{const r=t.event.raw;if(dW(r)){const c=r;return c.touches!==void 0&&c.touches.length===1?O.some(c.touches[0]).map(h=>dr(h.clientX,h.clientY)):O.none()}else{const c=r;return c.clientX!==void 0?O.some(c).map(h=>dr(h.clientX,h.clientY)):O.none()}},fW="top",hW="right",mW="bottom",gB="left",wu=t=>t.model.minX,vg=t=>t.model.minY,gC=t=>t.model.minX-1,pC=t=>t.model.minY-1,Qd=t=>t.model.maxX,ka=t=>t.model.maxY,f1=t=>t.model.maxX+1,uv=t=>t.model.maxY+1,pB=(t,r,c)=>r(t)-c(t),QT=t=>pB(t,Qd,wu),eO=t=>pB(t,ka,vg),bB=t=>QT(t)/2,tO=t=>eO(t)/2,yg=(t,r)=>r?t.stepSize*t.speedMultiplier:t.stepSize,vB=t=>t.snapToGrid,yB=t=>t.snapStart,nO=t=>t.rounded,bC=(t,r)=>t[r+"-edge"]!==void 0,oO=t=>bC(t,gB),sO=t=>bC(t,hW),rO=t=>bC(t,fW),wB=t=>bC(t,mW),ih=t=>t.model.value.get(),qh=(t,r)=>({x:t,y:r}),xu=(t,r)=>{Hn(t,d1(),{value:r})},gW=(t,r)=>{xu(t,qh(gC(r),pC(r)))},pW=(t,r)=>{xu(t,pC(r))},iO=(t,r)=>{xu(t,qh(bB(r),pC(r)))},bW=(t,r)=>{xu(t,qh(f1(r),pC(r)))},xB=(t,r)=>{xu(t,f1(r))},vW=(t,r)=>{xu(t,qh(f1(r),tO(r)))},yW=(t,r)=>{xu(t,qh(f1(r),uv(r)))},wW=(t,r)=>{xu(t,uv(r))},xW=(t,r)=>{xu(t,qh(bB(r),uv(r)))},CW=(t,r)=>{xu(t,qh(gC(r),uv(r)))},SW=(t,r)=>{xu(t,gC(r))},kW=(t,r)=>{xu(t,qh(gC(r),tO(r)))},vC=(t,r,c,h)=>t<r?t:t>c?c:t===r?r-1:Math.max(r,t-h),yC=(t,r,c,h)=>t>c?t:t<r?r:t===c?c+1:Math.min(c,t+h),CB=(t,r,c)=>Math.max(r,Math.min(c,t)),EW=(t,r,c,h,b)=>b.fold(()=>{const w=t-r,C=Math.round(w/h)*h;return CB(r+C,r-1,c+1)},w=>{const C=(t-w)%h,A=Math.round(C/h),_=Math.floor((t-w)/h),R=Math.floor((c-w)/h),B=Math.min(R,_+A),H=w+B*h;return Math.max(w,H)}),AW=(t,r,c)=>Math.min(c,Math.max(t,r))-r,SB=t=>{const{min:r,max:c,range:h,value:b,step:w,snap:C,snapStart:A,rounded:_,hasMinEdge:R,hasMaxEdge:B,minBound:H,maxBound:j,screenRange:X}=t,oe=R?r-1:r,Se=B?c+1:c;if(b<H)return oe;if(b>j)return Se;{const et=AW(b,H,j),He=CB(et/X*h+r,oe,Se);return C&&He>=r&&He<=c?EW(He,r,c,w,A):_?Math.round(He):He}},kB=t=>{const{min:r,max:c,range:h,value:b,hasMinEdge:w,hasMaxEdge:C,maxBound:A,maxOffset:_,centerMinEdge:R,centerMaxEdge:B}=t;return b<r?w?0:R:b>c?C?A:B:(b-r)/h*_},aO="top",lO="right",cO="bottom",wC="left",uO="width",TW="height",ld=t=>t.element.dom.getBoundingClientRect(),Cu=(t,r)=>t[r],xC=t=>{const r=ld(t);return Cu(r,wC)},EB=t=>{const r=ld(t);return Cu(r,lO)},CC=t=>{const r=ld(t);return Cu(r,aO)},SC=t=>{const r=ld(t);return Cu(r,cO)},ef=t=>{const r=ld(t);return Cu(r,uO)},AB=t=>{const r=ld(t);return Cu(r,TW)},h1=(t,r,c)=>(t+r)/2-c,TB=(t,r)=>{const c=ld(t),h=ld(r),b=Cu(c,wC),w=Cu(c,lO),C=Cu(h,wC);return h1(b,w,C)},kC=(t,r)=>{const c=ld(t),h=ld(r),b=Cu(c,aO),w=Cu(c,cO),C=Cu(h,aO);return h1(b,w,C)},EC=(t,r)=>{Hn(t,d1(),{value:r})},dO=(t,r,c)=>{const h={min:wu(r),max:Qd(r),range:QT(r),value:c,step:yg(r),snap:vB(r),snapStart:yB(r),rounded:nO(r),hasMinEdge:oO(r),hasMaxEdge:sO(r),minBound:xC(t),maxBound:EB(t),screenRange:ef(t)};return SB(h)},OW=(t,r,c)=>{const h=dO(t,r,c);return EC(t,h),h},OB=(t,r)=>{const c=wu(r);EC(t,c)},_W=(t,r)=>{const c=Qd(r);EC(t,c)},fO=(t,r,c,h)=>{const w=(t>0?yC:vC)(ih(c),wu(c),Qd(c),yg(c,h));return EC(r,w),O.some(w)},AC=t=>(r,c,h)=>fO(t,r,c,h).map(ge),hO=t=>JT(t).map(c=>c.left),DW=(t,r,c,h,b)=>{const C=ef(t),A=h.bind(B=>O.some(TB(B,t))).getOr(0),_=b.bind(B=>O.some(TB(B,t))).getOr(C),R={min:wu(r),max:Qd(r),range:QT(r),value:c,hasMinEdge:oO(r),hasMaxEdge:sO(r),minBound:xC(t),minOffset:0,maxBound:EB(t),maxOffset:C,centerMinEdge:A,centerMaxEdge:_};return kB(R)},pl=(t,r,c,h,b,w)=>{const C=DW(r,w,c,h,b);return xC(r)-xC(t)+C},MW=(t,r,c,h)=>{const b=ih(c),w=pl(t,h.getSpectrum(t),b,h.getLeftEdge(t),h.getRightEdge(t),c),C=ee(r.element)/2;Cn(r.element,"left",w-C+"px")},PW=AC(-1),_B=AC(1),DB=O.none,RW=O.none,NW={"top-left":O.none(),top:O.none(),"top-right":O.none(),right:O.some(xB),"bottom-right":O.none(),bottom:O.none(),"bottom-left":O.none(),left:O.some(SW)};var BW=Object.freeze({__proto__:null,setValueFrom:OW,setToMin:OB,setToMax:_W,findValueOfOffset:dO,getValueFromEvent:hO,findPositionOfValue:pl,setPositionFromValue:MW,onLeft:PW,onRight:_B,onUp:DB,onDown:RW,edgeActions:NW});const TC=(t,r)=>{Hn(t,d1(),{value:r})},mO=(t,r,c)=>{const h={min:vg(r),max:ka(r),range:eO(r),value:c,step:yg(r),snap:vB(r),snapStart:yB(r),rounded:nO(r),hasMinEdge:rO(r),hasMaxEdge:wB(r),minBound:CC(t),maxBound:SC(t),screenRange:AB(t)};return SB(h)},FW=(t,r,c)=>{const h=mO(t,r,c);return TC(t,h),h},IW=(t,r)=>{const c=vg(r);TC(t,c)},MB=(t,r)=>{const c=ka(r);TC(t,c)},LW=(t,r,c,h)=>{const w=(t>0?yC:vC)(ih(c),vg(c),ka(c),yg(c,h));return TC(r,w),O.some(w)},PB=t=>(r,c,h)=>LW(t,r,c,h).map(ge),$W=t=>JT(t).map(c=>c.top),RB=(t,r,c,h,b)=>{const C=AB(t),A=h.bind(B=>O.some(kC(B,t))).getOr(0),_=b.bind(B=>O.some(kC(B,t))).getOr(C),R={min:vg(r),max:ka(r),range:eO(r),value:c,hasMinEdge:rO(r),hasMaxEdge:wB(r),minBound:CC(t),minOffset:0,maxBound:SC(t),maxOffset:C,centerMinEdge:A,centerMaxEdge:_};return kB(R)},dv=(t,r,c,h,b,w)=>{const C=RB(r,w,c,h,b);return CC(r)-CC(t)+C},HW=(t,r,c,h)=>{const b=ih(c),w=dv(t,h.getSpectrum(t),b,h.getTopEdge(t),h.getBottomEdge(t),c),C=rr(r.element)/2;Cn(r.element,"top",w-C+"px")},gO=O.none,m1=O.none,NB=PB(-1),BB=PB(1),FB={"top-left":O.none(),top:O.some(pW),"top-right":O.none(),right:O.none(),"bottom-right":O.none(),bottom:O.some(wW),"bottom-left":O.none(),left:O.none()};var VW=Object.freeze({__proto__:null,setValueFrom:FW,setToMin:IW,setToMax:MB,findValueOfOffset:mO,getValueFromEvent:$W,findPositionOfValue:dv,setPositionFromValue:HW,onLeft:gO,onRight:m1,onUp:NB,onDown:BB,edgeActions:FB});const OC=(t,r)=>{Hn(t,d1(),{value:r})},wg=(t,r)=>({x:t,y:r}),zW=(t,r,c)=>{const h=dO(t,r,c.left),b=mO(t,r,c.top),w=wg(h,b);return OC(t,w),w},UW=(t,r,c,h,b)=>{const w=t>0?yC:vC,C=r?ih(h).x:w(ih(h).x,wu(h),Qd(h),yg(h,b)),A=r?w(ih(h).y,vg(h),ka(h),yg(h,b)):ih(h).y;return OC(c,wg(C,A)),O.some(C)},fv=(t,r)=>(c,h,b)=>UW(t,r,c,h,b).map(ge),IB=(t,r)=>{const c=wu(r),h=vg(r);OC(t,wg(c,h))},pO=(t,r)=>{const c=Qd(r),h=ka(r);OC(t,wg(c,h))},LB=t=>JT(t),tl=(t,r,c,h)=>{const b=ih(c),w=pl(t,h.getSpectrum(t),b.x,h.getLeftEdge(t),h.getRightEdge(t),c),C=dv(t,h.getSpectrum(t),b.y,h.getTopEdge(t),h.getBottomEdge(t),c),A=ee(r.element)/2,_=rr(r.element)/2;Cn(r.element,"left",w-A+"px"),Cn(r.element,"top",C-_+"px")},$B=fv(-1,!1),WW=fv(1,!1),jW=fv(-1,!0),HB=fv(1,!0),ZW={"top-left":O.some(gW),top:O.some(iO),"top-right":O.some(bW),right:O.some(vW),"bottom-right":O.some(yW),bottom:O.some(xW),"bottom-left":O.some(CW),left:O.some(kW)};var qW=Object.freeze({__proto__:null,setValueFrom:zW,setToMin:IB,setToMax:pO,getValueFromEvent:LB,setPositionFromValue:tl,onLeft:$B,onRight:WW,onUp:jW,onDown:HB,edgeActions:ZW});const GW=[tt("stepSize",1),tt("speedMultiplier",10),tt("onChange",Z),tt("onChoose",Z),tt("onInit",Z),tt("onDragStart",Z),tt("onDragEnd",Z),tt("snapToGrid",!1),tt("rounded",!0),Ds("snapStart"),Jl("model",gs("mode",{x:[tt("minX",0),tt("maxX",100),Xr("value",t=>qn(t.mode.minX)),Rt("getInitialValue"),Ws("manager",BW)],y:[tt("minY",0),tt("maxY",100),Xr("value",t=>qn(t.mode.minY)),Rt("getInitialValue"),Ws("manager",VW)],xy:[tt("minX",0),tt("maxX",100),tt("minY",0),tt("maxY",100),Xr("value",t=>qn({x:t.mode.minX,y:t.mode.minY})),Rt("getInitialValue"),Ws("manager",qW)]})),yi("sliderBehaviours",[Fn,ln]),Xr("mouseIsDown",()=>qn(!1))],Ji=Sa({name:"Slider",configFields:GW,partFields:cW,factory:(t,r,c,h)=>{const b=At=>Gf(At,t,"thumb"),w=At=>Gf(At,t,"spectrum"),C=At=>js(At,t,"left-edge"),A=At=>js(At,t,"right-edge"),_=At=>js(At,t,"top-edge"),R=At=>js(At,t,"bottom-edge"),B=t.model,H=B.manager,j=(At,Ct)=>{H.setPositionFromValue(At,Ct,t,{getLeftEdge:C,getRightEdge:A,getTopEdge:_,getBottomEdge:R,getSpectrum:w})},X=(At,Ct)=>{B.value.set(Ct);const Zt=b(At);j(At,Zt)},oe=(At,Ct)=>{X(At,Ct);const Zt=b(At);return t.onChange(At,Zt,Ct),O.some(!0)},Se=At=>{H.setToMin(At,t)},et=At=>{H.setToMax(At,t)},He=At=>{const Ct=()=>{js(At,t,"thumb").each(Jt=>{const Ao=B.value.get();t.onChoose(At,Jt,Ao)})},Zt=t.mouseIsDown.get();t.mouseIsDown.set(!1),Zt&&Ct()},Pe=(At,Ct)=>{Ct.stop(),t.mouseIsDown.set(!0),t.onDragStart(At,b(At))},Je=(At,Ct)=>{Ct.stop(),t.onDragEnd(At,b(At)),He(At)},It=At=>{js(At,t,"spectrum").map(Fn.focusIn)};return{uid:t.uid,dom:t.dom,components:r,behaviours:_i(t.sliderBehaviours,[Fn.config({mode:"special",focusIn:It}),ln.config({store:{mode:"manual",getValue:At=>B.value.get(),setValue:X}}),Dl.config({channels:{[uE()]:{onReceive:He}}})]),events:ir([Dt(d1(),(At,Ct)=>{oe(At,Ct.event.value)}),tr((At,Ct)=>{const Zt=B.getInitialValue();B.value.set(Zt);const Jt=b(At);j(At,Jt);const Ao=w(At);t.onInit(At,Jt,Ao,B.value.get())}),Dt(Df(),Pe),Dt(Im(),Je),Dt(bi(),(At,Ct)=>{It(At),Pe(At,Ct)}),Dt(Y2(),Je)]),apis:{resetToMin:Se,resetToMax:et,setValue:X,refresh:j},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,r,c)=>{t.setValue(r,c)},resetToMin:(t,r)=>{t.resetToMin(r)},resetToMax:(t,r)=>{t.resetToMax(r)},refresh:(t,r)=>{t.refresh(r)}}}),hv=bn("rgb-hex-update"),bO=bn("slider-update"),mv=bn("palette-update"),vO=(t,r)=>{const c=Ji.parts.spectrum({dom:{tag:"div",classes:[r("hue-slider-spectrum")],attributes:{role:"presentation"}}}),h=Ji.parts.thumb({dom:{tag:"div",classes:[r("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ji.sketch({dom:{tag:"div",classes:[r("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:G(0)},components:[c,h],sliderBehaviours:Kt([Jn.config({})]),onChange:(b,w,C)=>{on(b.element,"aria-valuenow",Math.floor(360-C*3.6)),Hn(b,bO,{value:C})}})},VB="form",YW=[yi("formBehaviours",[ln])],zB=t=>"<alloy.field."+t+">",XW=t=>{const r=(()=>{const w=[];return{field:(A,_)=>(w.push(A),TE(VB,zB(A),_)),record:G(w)}})(),c=t(r),h=r.record(),b=ue(h,w=>Ca({name:w,pname:zB(w)}));return PE(VB,YW,b,QW,c)},JW=(t,r)=>t.fold(()=>_o.error(r),_o.value),QW=(t,r)=>({uid:t.uid,dom:t.dom,components:r,behaviours:_i(t.formBehaviours,[ln.config({store:{mode:"manual",getValue:c=>{const h=w4(c,t);return pt(h,(b,w)=>b().bind(C=>{const A=qo.getCurrent(C);return JW(A,new Error(`Cannot find a current component to extract the value from for form part '${w}': `+Um(C.element)))}).map(ln.getValue))},setValue:(c,h)=>{Xe(h,(b,w)=>{js(c,t,w).each(C=>{qo.getCurrent(C).each(A=>{ln.setValue(A,b)})})})}}})]),apis:{getField:(c,h)=>js(c,t,h).bind(qo.getCurrent)}}),g1={getField:hp((t,r,c)=>t.getField(r,c)),sketch:XW},yO=bn("valid-input"),UB=bn("invalid-input"),cd=bn("validating-input"),p1="colorcustom.rgb.",ej=(t,r,c,h)=>{const b=(j,X)=>bc.config({invalidClass:r("invalid"),notify:{onValidate:oe=>{Hn(oe,cd,{type:j})},onValid:oe=>{Hn(oe,yO,{type:j,value:ln.getValue(oe)})},onInvalid:oe=>{Hn(oe,UB,{type:j,value:ln.getValue(oe)})}},validator:{validate:oe=>{const Se=ln.getValue(oe),et=X(Se)?_o.value(!0):_o.error(t("aria.input.invalid"));return ua.pure(et)},validateOnLoad:!1}}),w=(j,X,oe,Se,et)=>{const He=t(p1+"range"),Pe=As.parts.label({dom:{tag:"label",attributes:{"aria-label":Se}},components:[Br(oe)]}),Je=As.parts.field({data:et,factory:hg,inputAttributes:ie({type:"text"},X==="hex"?{"aria-live":"polite"}:{}),inputClasses:[r("textfield")],inputBehaviours:Kt([b(X,j),ar.config({})]),onSetValue:Zt=>{bc.isInvalid(Zt)&&bc.run(Zt).get(Z)}}),It=[Pe,Je],At=X!=="hex"?[As.parts["aria-descriptor"]({text:He})]:[],Ct=It.concat(At);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Ct}},C=(j,X)=>{const oe=l1(X);return g1.getField(j,"hex").each(Se=>{Jn.isFocused(Se)||ln.setValue(j,{hex:oe.value})}),oe},A=(j,X)=>{const oe=X.red,Se=X.green,et=X.blue;ln.setValue(j,{red:oe,green:Se,blue:et})},_=Es({dom:{tag:"div",classes:[r("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),R=(j,X)=>{_.getOpt(j).each(oe=>{Cn(oe.element,"background-color","#"+X.value)})};return Rl({factory:()=>{const j={red:qn(O.some(255)),green:qn(O.some(255)),blue:qn(O.some(255)),hex:qn(O.some("ffffff"))},X=(eo,Cs)=>{const zn=Jb(Cs);A(eo,zn),He(zn)},oe=eo=>j[eo].get(),Se=(eo,Cs)=>{j[eo].set(Cs)},et=()=>oe("red").bind(eo=>oe("green").bind(Cs=>oe("blue").map(zn=>Vh(eo,Cs,zn,1)))),He=eo=>{const Cs=eo.red,zn=eo.green,Jo=eo.blue;Se("red",O.some(Cs)),Se("green",O.some(zn)),Se("blue",O.some(Jo))},Pe=(eo,Cs)=>{const zn=Cs.event;zn.type!=="hex"?Se(zn.type,O.none()):h(eo)},Je=(eo,Cs)=>{c(eo);const zn=iN(Cs);Se("hex",O.some(zn.value));const Jo=Jb(zn);A(eo,Jo),He(Jo),Hn(eo,hv,{hex:zn}),R(eo,zn)},It=(eo,Cs,zn)=>{const Jo=parseInt(zn,10);Se(Cs,O.some(Jo)),et().each(Qt=>{const wn=C(eo,Qt);Hn(eo,hv,{hex:wn}),R(eo,wn)})},At=eo=>eo.type==="hex",Ct=(eo,Cs)=>{const zn=Cs.event;At(zn)?Je(eo,zn.value):It(eo,zn.type,zn.value)},Zt=eo=>({label:t(p1+eo+".label"),description:t(p1+eo+".description")}),Jt=Zt("red"),Ao=Zt("green"),hn=Zt("blue"),ro=Zt("hex");return $s(g1.sketch(eo=>({dom:{tag:"form",classes:[r("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[eo.field("red",As.sketch(w(vT,"red",Jt.label,Jt.description,255))),eo.field("green",As.sketch(w(vT,"green",Ao.label,Ao.description,255))),eo.field("blue",As.sketch(w(vT,"blue",hn.label,hn.description,255))),eo.field("hex",As.sketch(w(cN,"hex",ro.label,ro.description,"ffffff"))),_.asSpec()],formBehaviours:Kt([bc.config({invalidClass:r("form-invalid")}),Eo("rgb-form-events",[Dt(yO,Ct),Dt(UB,Pe),Dt(cd,Pe)])])})),{apis:{updateHex:(eo,Cs)=>{ln.setValue(eo,{hex:Cs.value}),X(eo,Cs),R(eo,Cs)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(j,X,oe)=>{j.updateHex(X,oe)}},extraApis:{}})},tj=(t,r)=>{const c=Ji.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[r("sv-palette-spectrum")]}}),h=Ji.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[r("sv-palette-thumb")],innerHtml:`<div class=${r("sv-palette-inner-thumb")} role="presentation"></div>`}}),b=(R,B)=>{const{width:H,height:j}=R,X=R.getContext("2d");if(X===null)return;X.fillStyle=B,X.fillRect(0,0,H,j);const oe=X.createLinearGradient(0,0,H,0);oe.addColorStop(0,"rgba(255,255,255,1)"),oe.addColorStop(1,"rgba(255,255,255,0)"),X.fillStyle=oe,X.fillRect(0,0,H,j);const Se=X.createLinearGradient(0,0,0,j);Se.addColorStop(0,"rgba(0,0,0,0)"),Se.addColorStop(1,"rgba(0,0,0,1)"),X.fillStyle=Se,X.fillRect(0,0,H,j)},w=(R,B)=>{const H=R.components()[0].element.dom,j=ev(B,100,100),X=pN(j);b(H,wT(X))},C=(R,B)=>{const H=eC(Jb(B));Ji.setValue(R,{x:H.saturation,y:100-H.value}),on(R.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",H.saturation,H.value]))};return Rl({factory:R=>{const B=G({x:0,y:0}),H=(oe,Se,et)=>{q(et)||on(oe.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(et.x),Math.floor(100-et.y)])),Hn(oe,mv,{value:et})},j=(oe,Se,et,He)=>{b(et.element.dom,wT(Fc))},X=Kt([qo.config({find:O.some}),Jn.config({})]);return Ji.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[r("sv-palette")]},model:{mode:"xy",getInitialValue:B},rounded:!1,components:[c,h],onChange:H,onInit:j,sliderBehaviours:X})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(R,B,H)=>{w(B,H)},setThumb:(R,B,H)=>{C(B,H)}},extraApis:{}})},WB=(t,r)=>{const c=b=>{const w=ej(t,r,b.onValidHex,b.onInvalidHex),C=tj(t,r),A=Ct=>(100-Ct)/100*360,_=Ct=>100-Ct/360*100,R={paletteRgba:qn(Fc),paletteHue:qn(0)},B=Es(vO(t,r)),H=Es(C.sketch({})),j=Es(w.sketch({})),X=(Ct,Zt,Jt)=>{H.getOpt(Ct).each(Ao=>{C.setHue(Ao,Jt)})},oe=(Ct,Zt)=>{j.getOpt(Ct).each(Jt=>{w.updateHex(Jt,Zt)})},Se=(Ct,Zt,Jt)=>{B.getOpt(Ct).each(Ao=>{Ji.setValue(Ao,_(Jt))})},et=(Ct,Zt)=>{H.getOpt(Ct).each(Jt=>{C.setThumb(Jt,Zt)})},He=(Ct,Zt)=>{const Jt=Jb(Ct);R.paletteRgba.set(Jt),R.paletteHue.set(Zt)},Pe=(Ct,Zt,Jt,Ao)=>{He(Zt,Jt),je(Ao,hn=>{hn(Ct,Zt,Jt)})},Je=()=>{const Ct=[oe];return(Zt,Jt)=>{const Ao=Jt.event.value,hn=R.paletteHue.get(),ro=ev(hn,Ao.x,100-Ao.y),eo=kN(ro);Pe(Zt,eo,hn,Ct)}},It=()=>{const Ct=[X,oe];return(Zt,Jt)=>{const Ao=A(Jt.event.value),hn=R.paletteRgba.get(),ro=eC(hn),eo=ev(Ao,ro.saturation,ro.value),Cs=kN(eo);Pe(Zt,Cs,Ao,Ct)}},At=()=>{const Ct=[X,Se,et];return(Zt,Jt)=>{const Ao=Jt.event.hex,hn=Bz(Ao);Pe(Zt,Ao,hn.hue,Ct)}};return{uid:b.uid,dom:b.dom,components:[H.asSpec(),B.asSpec(),j.asSpec()],behaviours:Kt([Eo("colour-picker-events",[Dt(hv,At()),Dt(mv,Je()),Dt(bO,It())]),qo.config({find:Ct=>j.getOpt(Ct)}),Fn.config({mode:"acyclic"})])}};return Rl({name:"ColourPicker",configFields:[Rt("dom"),tt("onValidHex",Z),tt("onInvalidHex",Z)],factory:c})},bl={self:()=>qo.config({find:O.some}),memento:t=>qo.config({find:t.getOpt}),childAt:t=>qo.config({find:r=>al(r.element,t).bind(c=>r.getSystem().getByDom(c).toOptional())})},gv=Ln([tt("preprocess",qe),tt("postprocess",qe)]),ZB=(t,r)=>{const c=Ya("RepresentingConfigs.memento processors",gv,r);return ln.config({store:{mode:"manual",getValue:h=>{const b=t.get(h),w=ln.getValue(b);return c.postprocess(w)},setValue:(h,b)=>{const w=c.preprocess(b),C=t.get(h);ln.setValue(C,w)}}})},Gh=(t,r,c)=>ln.config({store:Ot(ie({mode:"manual"},t.map(h=>({initialValue:h})).getOr({})),{getValue:r,setValue:c})}),xO=(t,r,c)=>Gh(t,h=>r(h.element),(h,b)=>c(h.element,b)),qB=t=>xO(t,ak,up),_C=t=>ln.config({store:{mode:"memory",initialValue:t}}),oj={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},sj=t=>r=>v(r)?t.translate(oj[r]):t.translate(r),rj=(t,r,c)=>{const h=_=>"tox-"+_,b=WB(sj(r),h),w=_=>{Hn(_,Jd,{name:"hex-valid",value:!0})},C=_=>{Hn(_,Jd,{name:"hex-valid",value:!1})},A=Es(b.sketch({dom:{tag:"div",classes:[h("color-picker-container")],attributes:{role:"presentation"}},onValidHex:w,onInvalidHex:C}));return{dom:{tag:"div"},components:[A.asSpec()],behaviours:Kt([Gh(c,_=>{const R=A.get(_);return qo.getCurrent(R).bind(j=>ln.getValue(j).hex).map(j=>"#"+tn(j,"#")).getOr("")},(_,R)=>{const B=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,H=O.from(B.exec(R)).bind(oe=>st(oe,1)),j=A.get(_);qo.getCurrent(j).fold(()=>{},oe=>{ln.setValue(oe,{hex:H.getOr("")}),g1.getField(oe,"hex").each(Se=>{ns(Se,Lm())})})}),bl.self()])}};var ij=tinymce.util.Tools.resolve("tinymce.Resource");const GB=t=>So(t,"init"),KB=t=>{const r=or(),c=Es({dom:{tag:t.tag}}),h=or();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Kt([Eo("custom-editor-events",[tr(b=>{c.getOpt(b).each(w=>{(GB(t)?t.init(w.element.dom):ij.load(t.scriptId,t.scriptUrl).then(C=>C(w.element.dom,t.settings))).then(C=>{h.on(A=>{C.setValue(A)}),h.clear(),r.set(C)})})})]),Gh(O.none(),()=>r.get().fold(()=>h.get().getOr(""),b=>b.getValue()),(b,w)=>{r.get().fold(()=>h.set(w),C=>C.setValue(w))}),bl.self()]),components:[c.asSpec()]}};var ah=tinymce.util.Tools.resolve("tinymce.util.Tools");const YB=(t,r)=>{const c=ah.explode(r.getOption("images_file_types")),h=b=>yt(c,w=>Lr(b.name.toLowerCase(),`.${w.toLowerCase()}`));return un(On(t),h)},aj=(t,r,c)=>{const h=(j,X)=>{X.stop()},b=j=>(X,oe)=>{je(j,Se=>{Se(X,oe)})},w=(j,X)=>{var oe;if(!Gn.isDisabled(j)){const Se=X.event.raw;A(j,(oe=Se.dataTransfer)===null||oe===void 0?void 0:oe.files)}},C=(j,X)=>{const oe=X.event.raw.target;A(j,oe.files)},A=(j,X)=>{X&&(ln.setValue(j,YB(X,r)),Hn(j,gl,{name:t.name}))},_=Es({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Kt([Eo("input-file-events",[Nf(Eh()),Nf(Gu())])])}),R=j=>({uid:j.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Kt([_C(c.getOr([])),bl.self(),Gn.config({}),Ro.config({toggleClass:"dragenter",toggleOnExecute:!1}),Eo("dropzone-events",[Dt("dragenter",b([h,Ro.toggle])),Dt("dragleave",b([h,Ro.toggle])),Dt("dragover",h),Dt("drop",b([h,w])),Dt(ip(),C)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Br(r.translate("Drop an image here"))]},Di.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Br(r.translate("Browse for an image")),_.asSpec()],action:X=>{_.get(X).element.dom.click()},buttonBehaviours:Kt([ar.config({}),ei.button(r.isDisabled),ri()])})]}]}),B=t.label.map(j=>Lc(j,r)),H=As.parts.field({factory:{sketch:R}});return rv(B,H,["tox-form__group--stretched"],[])},XB=(t,r)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:ue(t.items,r.interpreter)}),pv=(t,r)=>{let c=null,h=null;return{cancel:()=>{M(c)||(clearTimeout(c),c=null,h=null)},throttle:(...C)=>{h=C,M(c)&&(c=setTimeout(()=>{const A=h;c=null,h=null,t.apply(null,A)},r))}}},lj=(t,r)=>{let c=null;return{cancel:()=>{M(c)||(clearTimeout(c),c=null)},throttle:(...w)=>{M(c)&&(c=setTimeout(()=>{c=null,t.apply(null,w)},r))}}},DC=(t,r)=>{let c=null;const h=()=>{M(c)||(clearTimeout(c),c=null)};return{cancel:h,throttle:(...w)=>{h(),c=setTimeout(()=>{c=null,t.apply(null,w)},r)}}},CO=bn("alloy-fake-before-tabstop"),SO=bn("alloy-fake-after-tabstop"),JB=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Kt([Jn.config({ignore:!0}),ar.config({})])}),QB=(t,r)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[JB([CO]),r,JB([SO])],behaviours:Kt([bl.childAt(1)])}),kO=(t,r)=>{Hn(t,qu(),{raw:{which:9,shiftKey:r}})},cj=(t,r)=>{const c=r.element;vi(c,CO)?kO(t,!0):vi(c,SO)&&kO(t,!1)},b1=t=>ov(t,["."+CO,"."+SO].join(","),ne),v1=bn("update-dialog"),tf=bn("update-title"),MC=bn("update-body"),EO=bn("update-footer"),AO=bn("body-send-message"),y1=bn("dialog-focus-shifted"),PC=nu().browser,Kh=PC.isSafari(),eF=PC.isFirefox(),TO=Kh||eF,uj=PC.isChromium(),dj=({scrollTop:t,scrollHeight:r,clientHeight:c})=>Math.ceil(t)+c>=r,tF=(t,r)=>t.scrollTo(0,r==="bottom"?99999999:r),fj=(t,r)=>{const c=t.body;return O.from(!/^<!DOCTYPE (html|HTML)/.test(r)&&(!uj&&!Kh||Y(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},nF=(t,r,c)=>{const h=t.dom;O.from(h.contentDocument).fold(c,b=>{let w=0;const C=fj(b,r).map(_=>(w=_.scrollTop,_)).forall(dj),A=()=>{const _=h.contentWindow;Y(_)&&(C?tF(_,"bottom"):!C&&TO&&w!==0&&tF(_,w))};Kh&&h.addEventListener("load",A,{once:!0}),b.open(),b.write(r),b.close(),Kh||A()})},oF=Bn(TO,Kh?500:200).map(t=>pv(nF,t)),mj=(t,r)=>{const c=qn(t.getOr(""));return{getValue:h=>c.get(),setValue:(h,b)=>{if(c.get()!==b){const w=h.element,C=()=>on(w,"srcdoc",b);r?oF.fold(G(nF),A=>A.throttle)(w,b,C):C()}c.set(b)}}},gj=(t,r,c)=>{const h="tox-dialog__iframe",b=t.transparent?[]:[`${h}--opaque`],w=t.border?["tox-navobj-bordered"]:[],C=ie(ie(ie({},t.label.map(H=>({title:H})).getOr({})),c.map(H=>({srcdoc:H})).getOr({})),t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}),A=mj(c,t.streamContent),_=t.label.map(H=>Lc(H,r)),R=H=>QB(O.from(w),{uid:H.uid,dom:{tag:"iframe",attributes:C,classes:[h,...b]},behaviours:Kt([ar.config({}),Jn.config({}),Gh(c,A.getValue,A.setValue),Dl.config({channels:{[y1]:{onReceive:(j,X)=>{X.newFocus.each(oe=>{ma(j.element).each(Se=>{(vs(j.element,oe)?Qr:br)(Se,"tox-navobj-bordered-focus")})})}}}})])}),B=As.parts.field({factory:{sketch:R}});return rv(_,B,["tox-form__group--stretched"],[])},pj=t=>new Promise((r,c)=>{const h=()=>{w(),r(t)},b=[Qa(t,"load",h),Qa(t,"error",()=>{w(),c("Unable to load data from image: "+t.dom.src)})],w=()=>je(b,C=>C.unbind());t.dom.complete&&h()}),RC=(t,r,c,h,b)=>{const w=c*b,C=h*b,A=Math.max(0,t/2-w/2),_=Math.max(0,r/2-C/2);return{left:A.toString()+"px",top:_.toString()+"px",width:w.toString()+"px",height:C.toString()+"px"}},bj=(t,r,c)=>{const h=ee(t),b=rr(t);return Math.min(h/r,b/c,1)},vj=(t,r)=>{const c=qn(r.getOr({url:""})),h=Es({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:r.map(_=>({src:_.url})).getOr({})}}),b=Es({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[h.asSpec()]}),w=(_,R)=>{const B={url:R.url};R.zoom.each(j=>B.zoom=j),R.cachedWidth.each(j=>B.cachedWidth=j),R.cachedHeight.each(j=>B.cachedHeight=j),c.set(B);const H=()=>{const{cachedWidth:j,cachedHeight:X,zoom:oe}=B;if(!I(j)&&!I(X)){if(I(oe)){const et=bj(_.element,j,X);B.zoom=et}const Se=RC(ee(_.element),rr(_.element),j,X,B.zoom);b.getOpt(_).each(et=>{oi(et.element,Se)})}};h.getOpt(_).each(j=>{const X=j.element;R.url!==$r(X,"src")&&(on(X,"src",R.url),br(_.element,"tox-imagepreview__loaded")),H(),pj(X).then(oe=>{_.getSystem().isConnected()&&(Qr(_.element,"tox-imagepreview__loaded"),B.cachedWidth=oe.dom.naturalWidth,B.cachedHeight=oe.dom.naturalHeight,H())})})},C={};t.height.each(_=>C.height=_);const A=r.map(_=>({url:_.url,zoom:O.from(_.zoom),cachedWidth:O.from(_.cachedWidth),cachedHeight:O.from(_.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:C,attributes:{role:"presentation"}},components:[b.asSpec()],behaviours:Kt([bl.self(),Gh(A,()=>c.get(),w)])}},sF=(t,r)=>{const c="tox-label",h=t.align==="center"?[`${c}--center`]:[],b=t.align==="end"?[`${c}--end`]:[],w={dom:{tag:"label",classes:[c,...h,...b]},components:[Br(r.providers.translate(t.label))]},C=ue(t.items,r.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[w,...C],behaviours:Kt([bl.self(),vo.config({}),qB(O.none()),Fn.config({mode:"acyclic"})])}},OO=bn("toolbar.button.execute"),yj=t=>Ff((r,c)=>{pc(t,r)(h=>{Hn(r,OO,{buttonApi:h}),t.onAction(h)})}),xg=bn("common-button-display-events"),NC={[sc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],[Ku()]:["toolbar-button-events",xg],[bi()]:["focusing","alloy.base.behaviour",xg]},_O=t=>Cn(t.element,"width",Qs(t.element,"width")),DO=(t,r,c)=>pu(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},r),MO=(t,r)=>DO(t,r,[]),Yh=(t,r)=>DO(t,r,[vo.config({})]),rF=(t,r,c)=>({dom:{tag:"span",classes:[`${r}__select-label`]},components:[Br(c.translate(t))],behaviours:Kt([vo.config({})])}),vc=bn("update-menu-text"),Xh=bn("update-menu-icon"),PO=(t,r,c)=>{const h=qn(Z),b=t.text.map(j=>Es(rF(j,r,c.providers))),w=t.icon.map(j=>Es(Yh(j,c.providers.icons))),C=(j,X)=>{const oe=ln.getValue(j);return Jn.focus(oe),Hn(oe,"keydown",{raw:X.event.raw}),Ic.close(oe),O.some(!0)},A=t.role.fold(()=>({}),j=>({role:j})),_=t.tooltip.fold(()=>({}),j=>{const X=c.providers.translate(j);return{title:X,"aria-label":X}}),R=pu("chevron-down",{tag:"div",classes:[`${r}__select-chevron`]},c.providers.icons),B=bn("common-button-display-events");return Es(Ic.sketch(Ot(ie(ie({},t.uid?{uid:t.uid}:{}),A),{dom:{tag:"button",classes:[r,`${r}--select`].concat(ue(t.classes,j=>`${r}--${j}`)),attributes:ie({},_)},components:r1([w.map(j=>j.asSpec()),b.map(j=>j.asSpec()),O.some(R)]),matchWidth:!0,useMinWidth:!0,onOpen:(j,X,oe)=>{t.searchable&&CU(oe)},dropdownBehaviours:Kt([...t.dropdownBehaviours,ei.button(()=>t.disabled||c.providers.isDisabled()),ri(),lv.config({}),vo.config({}),Eo("dropdown-events",[Hh(t,h),Kd(t,h)]),Eo(B,[tr((j,X)=>_O(j))]),Eo("menubutton-update-display-text",[Dt(vc,(j,X)=>{b.bind(oe=>oe.getOpt(j)).each(oe=>{vo.set(oe,[Br(c.providers.translate(X.event.text))])})}),Dt(Xh,(j,X)=>{w.bind(oe=>oe.getOpt(j)).each(oe=>{vo.set(oe,[Yh(X.event.icon,c.providers.icons)])})})])]),eventOrder:$s(NC,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Ku()]:["toolbar-button-events","dropdown-events",B]}),sandboxBehaviours:Kt([Fn.config({mode:"special",onLeft:C,onRight:C}),Eo("dropdown-sandbox-events",[Dt(wR,(j,X)=>{bU(j),X.stop()}),Dt(xR,(j,X)=>{vU(j,X),X.stop()})])]),lazySink:c.getSink,toggleClass:`${r}--active`,parts:{menu:Ot(ie({},Jp(!1,t.columns,t.presets)),{fakeFocus:t.searchable,onHighlightItem:jT,onCollapseMenu:(j,X,oe)=>{ps.getHighlighted(oe).each(Se=>{jT(j,oe,Se)})},onDehighlightItem:xU})},getAnchorOverrides:()=>({maxHeightFunction:(j,X)=>{E3()(j,X-10)}}),fetch:j=>ua.nu($e(t.fetch,j))}))).asSpec()},wj=t=>v(t),iF=t=>t.type==="separator",xj=t=>So(t,"getSubmenuItems"),aF={type:"separator"},Cj=(t,r)=>{const c=Do(t,(h,b)=>wj(b)?b===""?h:b==="|"?h.length>0&&!iF(h[h.length-1])?h.concat([aF]):h:So(r,b.toLowerCase())?h.concat([r[b.toLowerCase()]]):h:h.concat([b]),[]);return c.length>0&&iF(c[c.length-1])&&c.pop(),c},lF=(t,r)=>{const c=t.getSubmenuItems(),h=cF(c,r),b=$s(h.menus,{[t.value]:h.items}),w=$s(h.expansions,{[t.value]:t.value});return{item:t,menus:b,expansions:w}},Sj=t=>{const r=$t(t,"value").getOrThunk(()=>bn("generated-menu-item"));return $s({value:r},t)},cF=(t,r)=>{const c=Cj(v(t)?t.split(" "):t,r);return oo(c,(h,b)=>{if(xj(b)){const w=Sj(b),C=lF(w,r);return{menus:$s(h.menus,C.menus),items:[C.item,...h.items],expansions:$s(h.expansions,C.expansions)}}else return Ot(ie({},h),{items:[b,...h.items]})},{menus:{},expansions:{},items:[]})},kj=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-field",placeholder:r.placeholder})),Ej=t=>t.search.fold(()=>({searchMode:"no-search"}),r=>({searchMode:"search-with-results"})),w1=(t,r,c,h)=>{const b=bn("primary-menu"),w=cF(t,c.shared.providers.menuItems());if(w.items.length===0)return O.none();const C=kj(h),A=qN(b,w.items,r,c,h.isHorizontalMenu,C),_=Ej(h),R=pt(w.menus,(H,j)=>qN(j,H,r,c,!1,_)),B=$s(R,oc(b,A));return O.from(Lh.tieredData(b,B,w.expansions))},RO=t=>!So(t,"items"),uF="data-value",dF=(t,r,c,h)=>ue(c,b=>RO(b)?{type:"togglemenuitem",text:b.text,value:b.value,active:b.value===h,onAction:()=>{ln.setValue(t,b.value),Hn(t,gl,{name:r}),Jn.focus(t)}}:{type:"nestedmenuitem",text:b.text,getSubmenuItems:()=>dF(t,r,b.items,h)}),NO=(t,r)=>ao(t,c=>RO(c)?Bn(c.value===r,c):NO(c.items,r)),BO=(t,r,c)=>{const h=r.shared.providers,b=c.bind(_=>NO(t.items,_)).orThunk(()=>en(t.items).filter(RO)),w=t.label.map(_=>Lc(_,h)),C=As.parts.field({dom:{},factory:{sketch:_=>PO({uid:_.uid,text:b.map(R=>R.text),icon:O.none(),tooltip:t.label,role:O.none(),fetch:(R,B)=>{const H=dF(R,t.name,t.items,ln.getValue(R));B(w1(H,id.CLOSE_ON_EXECUTE,r,{isHorizontalMenu:!1,search:O.none()}))},onSetup:G(Z),getApi:G({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ar.config({}),Gh(b.map(R=>R.value),R=>$r(R.element,uF),(R,B)=>{NO(t.items,B).each(H=>{on(R.element,uF,H.value),Hn(R,vc,{text:H.text})})})]},"tox-listbox",r.shared)}}),A={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return As.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:nt([w.toArray(),[A]]),fieldBehaviours:Kt([Gn.config({disabled:G(!t.enabled),onDisabled:_=>{As.getField(_).each(Gn.disable)},onEnabled:_=>{As.getField(_).each(Gn.enable)}})])})},Aj=(t,r)=>({dom:{tag:"div",classes:t.classes},components:ue(t.items,r.shared.interpreter)}),Tj=(t,r)=>{const c=ue(t.options,b=>({dom:{tag:"option",value:b.value,innerHtml:b.text}})),h=t.data.map(b=>oc("initialValue",b)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:_i(t.selectBehaviours,[Jn.config({}),ln.config({store:ie({mode:"manual",getValue:b=>Nd(b.element),setValue:(b,w)=>{const C=en(t.options);Qe(t.options,_=>_.value===w).isSome()?pp(b.element,w):b.element.dom.selectedIndex===-1&&w===""&&C.each(_=>pp(b.element,_.value))}},h)})])}},Oj=Rl({name:"HtmlSelect",configFields:[Rt("options"),yi("selectBehaviours",[Jn,ln]),tt("selectClasses",[]),tt("selectAttributes",{}),Ds("data")],factory:Tj}),bv=(t,r,c)=>{const h=ue(t.items,_=>({text:r.translate(_.text),value:_.value})),b=t.label.map(_=>Lc(_,r)),w=As.parts.field(Ot(ie({dom:{}},c.map(_=>({data:_})).getOr({})),{selectAttributes:{size:t.size},options:h,factory:Oj,selectBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||r.isDisabled()}),ar.config({}),Eo("selectbox-change",[Dt(ip(),(_,R)=>{Hn(_,gl,{name:t.name})})])])})),C=t.size>1?O.none():O.some(pu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},r.icons)),A={dom:{tag:"div",classes:["tox-selectfield"]},components:nt([[w],C.toArray()])};return As.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:nt([b.toArray(),[A]]),fieldBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:_=>{As.getField(_).each(Gn.disable)},onEnabled:_=>{As.getField(_).each(Gn.enable)}}),ri()])})},FO=G([tt("field1Name","field1"),tt("field2Name","field2"),Qu("onLockedChange"),_h(["lockClass"]),tt("locked",!1),du.field("coupledFieldBehaviours",[qo,ln])]),_j=(t,r,c)=>js(t,r,c).bind(qo.getCurrent),fF=(t,r)=>Ca({factory:As,name:t,overrides:c=>({fieldBehaviours:Kt([Eo("coupled-input-behaviour",[Dt(Lm(),h=>{_j(h,c,r).each(b=>{js(h,c,"lock").each(w=>{Ro.isOn(w)&&c.onLockedChange(h,b,w)})})})])])})}),IO=G([fF("field1","field2"),fF("field2","field1"),Ca({factory:Di,schema:[Rt("dom")],name:"lock",overrides:t=>({buttonBehaviours:Kt([Ro.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Dj=(t,r,c,h)=>({uid:t.uid,dom:t.dom,components:r,behaviours:du.augment(t.coupledFieldBehaviours,[qo.config({find:O.some}),ln.config({store:{mode:"manual",getValue:b=>{const w=eg(b,t,["field1","field2"]);return{[t.field1Name]:ln.getValue(w.field1()),[t.field2Name]:ln.getValue(w.field2())}},setValue:(b,w)=>{const C=eg(b,t,["field1","field2"]);Js(w,t.field1Name)&&ln.setValue(C.field1(),w[t.field1Name]),Js(w,t.field2Name)&&ln.setValue(C.field2(),w[t.field2Name])}}})]),apis:{getField1:b=>js(b,t,"field1"),getField2:b=>js(b,t,"field2"),getLock:b=>js(b,t,"lock")}}),vl=Sa({name:"FormCoupledInputs",configFields:FO(),partFields:IO(),factory:Dj,apis:{getField1:(t,r)=>t.getField1(r),getField2:(t,r)=>t.getField2(r),getLock:(t,r)=>t.getLock(r)}}),hF=t=>{const r={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=b=>b in r?r[b]:1;let h=t.value.toFixed(c(t.unit));return h.indexOf(".")!==-1&&(h=h.replace(/\.?0*$/,"")),h+t.unit},LO=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const h=parseFloat(c[1]),b=c[2];return _o.value({value:h,unit:b})}else return _o.error(t)},mF=(t,r)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},h=b=>So(c,b);return t.unit===r?O.some(t.value):h(t.unit)&&h(r)?c[t.unit]===c[r]?O.some(t.value):O.some(t.value/c[t.unit]*c[r]):O.none()},BC=t=>O.none(),gF=(t,r)=>c=>mF(c,r).map(h=>({value:h*t,unit:r})),Mj=(t,r)=>{const c=LO(t).toOptional(),h=LO(r).toOptional();return xr(c,h,(b,w)=>mF(b,w.unit).map(C=>w.value/C).map(C=>gF(C,w.unit)).getOr(BC)).getOr(BC)},pF=(t,r)=>{let c=BC;const h=bn("ratio-event"),b=H=>pu(H,{tag:"span",classes:["tox-icon","tox-lock-icon__"+H]},r.icons),w=vl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:r.translate(t.label.getOr("Constrain proportions"))}},components:[b("lock"),b("unlock")],buttonBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||r.isDisabled()}),ri(),ar.config({})])}),C=H=>({dom:{tag:"div",classes:["tox-form__group"]},components:H}),A=H=>As.parts.field({factory:hg,inputClasses:["tox-textfield"],inputBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||r.isDisabled()}),ri(),ar.config({}),Eo("size-input-events",[Dt(Pf(),(j,X)=>{Hn(j,h,{isField1:H})}),Dt(ip(),(j,X)=>{Hn(j,gl,{name:t.name})})])]),selectOnFocus:!1}),_=H=>({dom:{tag:"label",classes:["tox-label"]},components:[Br(r.translate(H))]}),R=vl.parts.field1(C([As.parts.label(_("Width")),A(!0)])),B=vl.parts.field2(C([As.parts.label(_("Height")),A(!1)]));return vl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[R,B,C([_(N7),w])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(H,j,X)=>{LO(ln.getValue(H)).each(oe=>{c(oe).each(Se=>{ln.setValue(j,hF(Se))})})},coupledFieldBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:H=>{vl.getField1(H).bind(As.getField).each(Gn.disable),vl.getField2(H).bind(As.getField).each(Gn.disable),vl.getLock(H).each(Gn.disable)},onEnabled:H=>{vl.getField1(H).bind(As.getField).each(Gn.enable),vl.getField2(H).bind(As.getField).each(Gn.enable),vl.getLock(H).each(Gn.enable)}}),ri(),Eo("size-input-events2",[Dt(h,(H,j)=>{const X=j.event.isField1,oe=X?vl.getField1(H):vl.getField2(H),Se=X?vl.getField2(H):vl.getField1(H),et=oe.map(ln.getValue).getOr(""),He=Se.map(ln.getValue).getOr("");c=Mj(et,He)})])])})},bF=(t,r,c)=>{const h=Ji.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Br(r.translate(t.label))]}),b=Ji.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),w=Ji.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ji.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:G(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[h,b,w],sliderBehaviours:Kt([bl.self(),Jn.config({})]),onChoose:(C,A,_)=>{Hn(C,gl,{name:t.name,value:_})}})},Pj=(t,r)=>{const c=A=>({dom:{tag:"th",innerHtml:r.translate(A)}}),h=A=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ue(A,c)}]}),b=A=>({dom:{tag:"td",innerHtml:r.translate(A)}}),w=A=>({dom:{tag:"tr"},components:ue(A,b)}),C=A=>({dom:{tag:"tbody"},components:ue(A,w)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[h(t.header),C(t.cells)],behaviours:Kt([ar.config({}),Jn.config({})])}},$O=(t,r)=>{const c=t.label.map(X=>Lc(X,r)),h=[Gn.config({disabled:()=>t.disabled||r.isDisabled()}),ri(),Fn.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:X=>(ns(X,av),O.some(!0))}),Eo("textfield-change",[Dt(Lm(),(X,oe)=>{Hn(X,gl,{name:t.name})}),Dt(Q2(),(X,oe)=>{Hn(X,gl,{name:t.name})})]),ar.config({})],b=t.validation.map(X=>bc.config({getRoot:oe=>ma(oe.element),invalidClass:"tox-invalid",validator:{validate:oe=>{const Se=ln.getValue(oe),et=X.validator(Se);return ua.pure(et===!0?_o.value(Se):_o.error(et))},validateOnLoad:X.validateOnLoad}})).toArray(),w=t.placeholder.fold(G({}),X=>({placeholder:r.translate(X)})),C=t.inputMode.fold(G({}),X=>({inputmode:X})),A=ie(ie({},w),C),_=As.parts.field(Ot(ie({tag:t.multiline===!0?"textarea":"input"},t.data.map(X=>({data:X})).getOr({})),{inputAttributes:A,inputClasses:[t.classname],inputBehaviours:Kt(nt([h,b])),selectOnFocus:!1,factory:hg})),R=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[_]}:_,H=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),j=[Gn.config({disabled:()=>t.disabled||r.isDisabled(),onDisabled:X=>{As.getField(X).each(Gn.disable)},onEnabled:X=>{As.getField(X).each(Gn.enable)}}),ri()];return rv(c,R,H,j)},vF=(t,r,c)=>$O({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:O.none(),maximized:t.maximized,data:c},r),yF=(t,r,c)=>$O({name:t.name,multiline:!0,label:t.label,inputMode:O.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:O.none(),maximized:t.maximized,data:c},r),vv=(t,r)=>r.getAnimationRoot.fold(()=>t.element,c=>c(t)),lh=t=>t.dimension.property,Cg=(t,r)=>t.dimension.getDimension(r),yv=(t,r)=>{const c=vv(t,r);au(c,[r.shrinkingClass,r.growingClass])},HO=(t,r)=>{br(t.element,r.openClass),Qr(t.element,r.closedClass),Cn(t.element,lh(r),"0px"),ll(t.element)},FC=(t,r)=>{br(t.element,r.closedClass),Qr(t.element,r.openClass),es(t.element,lh(r))},wF=(t,r,c,h)=>{c.setCollapsed(),Cn(t.element,lh(r),Cg(r,t.element)),yv(t,r),HO(t,r),r.onStartShrink(t),r.onShrunk(t)},Rj=(t,r,c,h)=>{const b=h.getOrThunk(()=>Cg(r,t.element));c.setCollapsed(),Cn(t.element,lh(r),b),ll(t.element);const w=vv(t,r);br(w,r.growingClass),Qr(w,r.shrinkingClass),HO(t,r),r.onStartShrink(t)},IC=(t,r,c)=>{const h=Cg(r,t.element);(h==="0px"?wF:Rj)(t,r,c,O.some(h))},xF=(t,r,c)=>{const h=vv(t,r),b=vi(h,r.shrinkingClass),w=Cg(r,t.element);FC(t,r);const C=Cg(r,t.element);(b?()=>{Cn(t.element,lh(r),w),ll(t.element)}:()=>{HO(t,r)})(),br(h,r.shrinkingClass),Qr(h,r.growingClass),FC(t,r),Cn(t.element,lh(r),C),c.setExpanded(),r.onStartGrow(t)},Nj=(t,r,c)=>{if(c.isExpanded()){es(t.element,lh(r));const h=Cg(r,t.element);Cn(t.element,lh(r),h)}},Bj=(t,r,c)=>{c.isExpanded()||xF(t,r,c)},CF=(t,r,c)=>{c.isExpanded()&&IC(t,r,c)},Fj=(t,r,c)=>{c.isExpanded()&&wF(t,r,c)},SF=(t,r,c)=>c.isExpanded(),Ij=(t,r,c)=>c.isCollapsed(),VO=(t,r,c)=>{const h=vv(t,r);return vi(h,r.growingClass)===!0},kF=(t,r,c)=>{const h=vv(t,r);return vi(h,r.shrinkingClass)===!0};var Lj=Object.freeze({__proto__:null,refresh:Nj,grow:Bj,shrink:CF,immediateShrink:Fj,hasGrown:SF,hasShrunk:Ij,isGrowing:VO,isShrinking:kF,isTransitioning:(t,r,c)=>VO(t,r)||kF(t,r),toggleGrow:(t,r,c)=>{(c.isExpanded()?IC:xF)(t,r,c)},disableTransitions:yv,immediateGrow:(t,r,c)=>{c.isExpanded()||(FC(t,r),Cn(t.element,lh(r),Cg(r,t.element)),yv(t,r),c.setExpanded(),r.onStartGrow(t),r.onGrown(t))}}),Hj=Object.freeze({__proto__:null,exhibit:(t,r,c)=>{const h=r.expanded;return iu(h?{classes:[r.openClass],styles:{}}:{classes:[r.closedClass],styles:oc(r.dimension.property,"0px")})},events:(t,r)=>ir([Bf(ap(),(c,h)=>{h.event.raw.propertyName===t.dimension.property&&(yv(c,t),r.isExpanded()&&es(c.element,t.dimension.property),(r.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),EF=[Rt("closedClass"),Rt("openClass"),Rt("shrinkingClass"),Rt("growingClass"),Ds("getAnimationRoot"),os("onShrunk"),os("onStartShrink"),os("onGrown"),os("onStartGrow"),tt("expanded",!1),Jl("dimension",gs("property",{width:[Ws("property","width"),Ws("getDimension",t=>ee(t)+"px")],height:[Ws("property","height"),Ws("getDimension",t=>rr(t)+"px")]}))],Vj=Object.freeze({__proto__:null,init:t=>{const r=qn(t.expanded),c=()=>"expanded: "+r.get();return rc({isExpanded:()=>r.get()===!0,isCollapsed:()=>r.get()===!1,setCollapsed:$e(r.set,!1),setExpanded:$e(r.set,!0),readState:c})}});const Il=Xi({fields:EF,name:"sliding",active:Hj,apis:Lj,state:Vj}),zO=t=>({isEnabled:()=>!Gn.isDisabled(t),setEnabled:r=>Gn.set(t,!r),setActive:r=>{const c=t.element;r?(Qr(c,"tox-tbtn--enabled"),on(c,"aria-pressed",!0)):(br(c,"tox-tbtn--enabled"),be(c,"aria-pressed"))},isActive:()=>vi(t.element,"tox-tbtn--enabled"),setText:r=>{Hn(t,vc,{text:r})},setIcon:r=>Hn(t,Xh,{icon:r})}),wv=(t,r,c,h,b=!0)=>PO({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:h,fetch:(w,C)=>{const A={pattern:t.search.isSome()?SU(w):""};t.fetch(_=>{C(w1(_,id.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},A,zO(w))},onSetup:t.onSetup,getApi:zO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[...b?[ar.config({})]:[]]},r,c.shared),zj=(t,r,c)=>{const h=w=>C=>{const A=!C.isActive();C.setActive(A),w.storage.set(A),c.shared.getSink().each(_=>{r().getOpt(_).each(R=>{lc(R.element),Hn(R,Jd,{name:w.name,value:w.storage.get()})})})},b=w=>C=>{C.setActive(w.storage.get())};return w=>{w(ue(t,C=>{const A=C.text.fold(()=>({}),_=>({text:_}));return Ot(ie({type:C.type,active:!1},A),{onAction:h(C),onSetup:b(C)})}))}},AF=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:t,"aria-label":t}},components:[Br(t)]}),UO=bn("leaf-label-event-id"),LC=({leaf:t,onLeafAction:r,visible:c,treeId:h,selectedId:b,backstage:w})=>{const C=t.menu.map(_=>wv(_,"tox-mbtn",w,O.none(),c)),A=[AF(t.title)];return C.each(_=>A.push(_)),Di.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:A,role:"treeitem",action:_=>{r(t.id),_.getSystem().broadcastOn([`update-active-item-${h}`],{value:t.id})},eventOrder:{[qu()]:[UO,"keying"]},buttonBehaviours:Kt([...c?[ar.config({})]:[],Ro.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Dl.config({channels:{[`update-active-item-${h}`]:{onReceive:(_,R)=>{(R.value===t.id?Ro.on:Ro.off)(_)}}}}),Eo(UO,[tr((_,R)=>{b.each(B=>{(B===t.id?Ro.on:Ro.off)(_)})}),Dt(qu(),(_,R)=>{const B=R.event.raw.code==="ArrowLeft",H=R.event.raw.code==="ArrowRight";B?(ic(_.element,".tox-tree--directory").each(j=>{_.getSystem().getByDom(j).each(X=>{mw(j,".tox-tree--directory__label").each(oe=>{X.getSystem().getByDom(oe).each(Jn.focus)})})}),R.stop()):H&&R.stop()})])])})},TF=(t,r,c)=>pu(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:c},r),$C=(t,r)=>TF(t,r,[]),OF=bn("directory-label-event-id"),Uj=({directory:t,visible:r,noChildren:c,backstage:h})=>{const b=t.menu.map(A=>wv(A,"tox-mbtn",h,O.none())),w=[{dom:{tag:"div",classes:["tox-chevron"]},components:[$C("chevron-right",h.shared.providers.icons)]},AF(t.title)];b.each(A=>{w.push(A)});const C=A=>{ic(A.element,".tox-tree--directory").each(_=>{A.getSystem().getByDom(_).each(R=>{const B=!Ro.isOn(R);Ro.toggle(R),Hn(A,"expand-tree-node",{expanded:B,node:t.id})})})};return Di.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(r?["tox-tree--directory__label--visible"]:[])},components:w,action:C,eventOrder:{[qu()]:[OF,"keying"]},buttonBehaviours:Kt([...r?[ar.config({})]:[],Eo(OF,[Dt(qu(),(A,_)=>{const R=_.event.raw.code==="ArrowRight",B=_.event.raw.code==="ArrowLeft";R&&c&&_.stop(),(R||B)&&ic(A.element,".tox-tree--directory").each(H=>{A.getSystem().getByDom(H).each(j=>{!Ro.isOn(j)&&R||Ro.isOn(j)&&B?(C(A),_.stop()):B&&!Ro.isOn(j)&&(ic(j.element,".tox-tree--directory").each(X=>{mw(X,".tox-tree--directory__label").each(oe=>{j.getSystem().getByDom(oe).each(Jn.focus)})}),_.stop())})})})])])})},Wj=({children:t,onLeafAction:r,visible:c,treeId:h,expandedIds:b,selectedId:w,backstage:C})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(A=>A.type==="leaf"?LC({leaf:A,selectedId:w,onLeafAction:r,visible:c,treeId:h,backstage:C}):HC({directory:A,expandedIds:b,selectedId:w,onLeafAction:r,labelTabstopping:c,treeId:h,backstage:C})),behaviours:Kt([Il.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),vo.config({})])}),jj=bn("directory-event-id"),HC=({directory:t,onLeafAction:r,labelTabstopping:c,treeId:h,backstage:b,expandedIds:w,selectedId:C})=>{const{children:A}=t,_=qn(w),R=H=>A.map(j=>j.type==="leaf"?LC({leaf:j,selectedId:C,onLeafAction:r,visible:H,treeId:h,backstage:b}):HC({directory:j,expandedIds:_.get(),selectedId:C,onLeafAction:r,labelTabstopping:H,treeId:h,backstage:b})),B=w.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[Uj({directory:t,visible:c,noChildren:t.children.length===0,backstage:b}),Wj({children:A,expandedIds:w,selectedId:C,onLeafAction:r,visible:B,treeId:h,backstage:b})],behaviours:Kt([Eo(jj,[tr((H,j)=>{Ro.set(H,B)}),Dt("expand-tree-node",(H,j)=>{const{expanded:X,node:oe}=j.event;_.set(X?[..._.get(),oe]:_.get().filter(Se=>Se!==oe))})]),Ro.config(Ot(ie({},t.children.length>0?{aria:{mode:"expanded"}}:{}),{toggleClass:"tox-tree--directory--expanded",onToggled:(H,j)=>{const X=H.components()[1],oe=R(j);j?Il.grow(X):Il.shrink(X),vo.set(X,oe)}}))])}},Zj=bn("tree-event-id"),qj=(t,r)=>{const c=t.onLeafAction.getOr(Z),h=t.onToggleExpand.getOr(Z),b=t.defaultExpandedIds,w=qn(b),C=qn(t.defaultSelectedId),A=bn("tree-id"),_=(R,B)=>t.items.map(H=>H.type==="leaf"?LC({leaf:H,selectedId:R,onLeafAction:c,visible:!0,treeId:A,backstage:r}):HC({directory:H,selectedId:R,onLeafAction:c,expandedIds:B,labelTabstopping:!0,treeId:A,backstage:r}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:_(C.get(),w.get()),behaviours:Kt([Fn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),Eo(Zj,[Dt("expand-tree-node",(R,B)=>{const{expanded:H,node:j}=B.event;w.set(H?[...w.get(),j]:w.get().filter(X=>X!==j)),h(w.get(),{expanded:H,node:j})})]),Dl.config({channels:{[`update-active-item-${A}`]:{onReceive:(R,B)=>{C.set(O.some(B.value)),vo.set(R,_(O.some(B.value),w.get()))}}}}),vo.config({})])}};var _F=Object.freeze({__proto__:null,events:(t,r)=>{const h=t.stream.streams.setup(t,r);return ir([Dt(t.event,h),Rd(()=>r.cancel())].concat(t.cancelEvent.map(b=>[Dt(b,()=>r.cancel())]).getOr([])))}});const WO=t=>{const r=qn(null);return rc({readState:()=>({timer:r.get()!==null?"set":"unset"}),setTimer:w=>{r.set(w)},cancel:()=>{const w=r.get();w!==null&&w.cancel()}})};var Gj=Object.freeze({__proto__:null,throttle:WO,init:t=>t.stream.streams.state(t)});const DF=(t,r)=>{const c=t.stream,h=DC(t.onStream,c.delay);return r.setTimer(h),(b,w)=>{h.throttle(b,w),c.stopEvent&&w.stop()}};var Kj=[Jl("stream",gs("mode",{throttle:[Rt("delay"),tt("stopEvent",!0),Ws("streams",{setup:DF,state:WO})]})),tt("event","input"),Ds("cancelEvent"),Qu("onStream")];const jO=Xi({fields:Kj,name:"streaming",active:_F,state:Gj}),no=(t,r,c)=>{const h=ln.getValue(c);ln.setValue(r,h),ZO(r)},x1=(t,r)=>{const c=t.element,h=Nd(c),b=c.dom;$r(c,"type")!=="number"&&r(b,h)},ZO=t=>{x1(t,(r,c)=>r.setSelectionRange(c.length,c.length))},MF=(t,r)=>{x1(t,(c,h)=>c.setSelectionRange(r,h.length))},PF=(t,r,c)=>{if(t.selectsOver){const h=ln.getValue(r),b=t.getDisplayText(h),w=ln.getValue(c);return t.getDisplayText(w).indexOf(b)===0?O.some(()=>{no(t,r,c),MF(r,b.length)}):O.none()}else return O.none()},VC=G("alloy.typeahead.itemexecute"),RF=(t,r,c,h)=>{const b=(H,j,X)=>{t.previewing.set(!1);const oe=Pr.getCoupled(H,"sandbox");if(ss.isOpen(oe))qo.getCurrent(oe).each(Se=>{ps.getHighlighted(Se).fold(()=>{X(Se)},()=>{ok(oe,Se.element,"keydown",j)})});else{const Se=et=>{qo.getCurrent(et).each(X)};lC(t,C(H),H,oe,h,Se,Ha.HighlightMenuAndItem).get(Z)}},w=ZA(t),C=H=>j=>j.map(X=>{const oe=cs(X.menus),Se=de(oe,He=>un(He.items,Pe=>Pe.type==="item"));return ln.getState(H).update(ue(Se,He=>He.data)),X}),A=H=>qo.getCurrent(H),_="typeaheadevents",R=[Jn.config({}),ln.config({onSetValue:t.onSetValue,store:ie({mode:"dataset",getDataKey:H=>Nd(H.element),getFallbackEntry:H=>({value:H,meta:{}}),setValue:(H,j)=>{pp(H.element,t.model.getDisplayText(j))}},t.initialData.map(H=>oc("initialValue",H)).getOr({}))}),jO.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(H,j)=>{const X=Pr.getCoupled(H,"sandbox");if(Jn.isFocused(H)&&Nd(H.element).length>=t.minChars){const Se=A(X).bind(He=>ps.getHighlighted(He).map(ln.getValue));t.previewing.set(!0);const et=He=>{A(X).each(Pe=>{Se.fold(()=>{t.model.selectsOver&&ps.highlightFirst(Pe)},Je=>{ps.highlightBy(Pe,It=>ln.getValue(It).value===Je.value),ps.getHighlighted(Pe).orThunk(()=>(ps.highlightFirst(Pe),O.none()))})})};lC(t,C(H),H,X,h,et,Ha.HighlightJustMenu).get(Z)}},cancelEvent:tk()}),Fn.config({mode:"special",onDown:(H,j)=>(b(H,j,ps.highlightFirst),O.some(!0)),onEscape:H=>{const j=Pr.getCoupled(H,"sandbox");return ss.isOpen(j)?(ss.close(j),O.some(!0)):O.none()},onUp:(H,j)=>(b(H,j,ps.highlightLast),O.some(!0)),onEnter:H=>{const j=Pr.getCoupled(H,"sandbox"),X=ss.isOpen(j);if(X&&!t.previewing.get())return A(j).bind(oe=>ps.getHighlighted(oe)).map(oe=>(Hn(H,VC(),{item:oe}),!0));{const oe=ln.getValue(H);return ns(H,tk()),t.onExecute(j,H,oe),X&&ss.close(j),O.some(!0)}}}),Ro.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Pr.config({others:{sandbox:H=>UT(t,H,{onOpen:()=>Ro.on(H),onClose:()=>{t.lazyTypeaheadComp.get().each(j=>be(j.element,"aria-activedescendant")),Ro.off(H)}})}}),Eo(_,[tr(H=>{t.lazyTypeaheadComp.set(O.some(H))}),Rd(H=>{t.lazyTypeaheadComp.set(O.none())}),Ff(H=>{const j=Z;zT(t,C(H),H,h,j,Ha.HighlightMenuAndItem).get(Z)}),Dt(VC(),(H,j)=>{const X=Pr.getCoupled(H,"sandbox");no(t.model,H,j.event.item),ns(H,tk()),t.onItemExecute(H,X,j.event.item,ln.getValue(H)),ss.close(X),ZO(H)})].concat(t.dismissOnBlur?[Dt(J2(),H=>{const j=Pr.getCoupled(H,"sandbox");cu(j.element).isNone()&&ss.close(j)})]:[]))],B=ie({[Hm()]:[ln.name(),jO.name(),_]},t.eventOrder);return{uid:t.uid,dom:Bx($s(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:ie(ie({},w),_i(t.typeaheadBehaviours,R)),eventOrder:B}},Yj=G([Ds("lazySink"),Rt("fetch"),tt("minChars",5),tt("responseTime",1e3),os("onOpen"),tt("getHotspot",O.some),tt("getAnchorOverrides",G({})),tt("layouts",O.none()),tt("eventOrder",{}),Pd("model",{},[tt("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),tt("selectsOver",!0),tt("populateFromBrowse",!0)]),os("onSetValue"),_l("onExecute"),os("onItemExecute"),tt("inputClasses",[]),tt("inputAttributes",{}),tt("inputStyles",{}),tt("matchWidth",!0),tt("useMinWidth",!1),tt("dismissOnBlur",!0),_h(["openClass"]),Ds("initialData"),yi("typeaheadBehaviours",[Jn,ln,jO,Fn,Ro,Pr]),Xr("lazyTypeaheadComp",()=>qn(O.none)),Xr("previewing",()=>qn(!0))].concat(Ub()).concat(WT())),xv=G([fu({schema:[pw()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(r,c,h)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(b=>{PF(t.model,b,h).fold(()=>{t.model.selectsOver?(ps.dehighlight(c,h),t.previewing.set(!0)):t.previewing.set(!1)},w=>{w(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(b=>{t.model.populateFromBrowse&&no(t.model,b,h),U(h.element,"id").each(w=>on(b.element,"aria-activedescendant",w))})},onExecute:(r,c)=>t.lazyTypeaheadComp.get().map(h=>(Hn(h,VC(),{item:c}),!0)),onHover:(r,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(h=>{t.model.populateFromBrowse&&no(t.model,h,c)})}})})]),Xj=Sa({name:"Typeahead",configFields:Yj(),partFields:xv(),factory:RF}),$c=t=>{const r=()=>$c(t.toCached()),c=_=>$c(t.bind(R=>R.fold(B=>ua.pure(_o.error(B)),B=>_(B)))),h=_=>$c(t.map(R=>R.bind(_))),b=_=>$c(t.map(R=>R.map(_))),w=_=>$c(t.map(R=>R.mapError(_))),C=(_,R)=>t.map(B=>B.fold(_,R)),A=(_,R)=>$c(ua.nu(B=>{let H=!1;const j=setTimeout(()=>{H=!0,B(_o.error(R()))},_);t.get(X=>{H||(clearTimeout(j),B(X))})}));return Ot(ie({},t),{toCached:r,bindFuture:c,bindResult:h,mapResult:b,mapError:w,foldResult:C,withTimeout:A})},NF=t=>$c(ua.nu(t)),BF=t=>$c(ua.pure(_o.value(t))),eZ={nu:NF,wrap:$c,pure:BF,value:BF,error:t=>$c(ua.pure(_o.error(t))),fromResult:t=>$c(ua.pure(t)),fromFuture:t=>$c(t.map(_o.value)),fromPromise:t=>NF(r=>{t.then(c=>{r(_o.value(c))},c=>{r(_o.error(c))})})},zC=(t,r,c=[],h,b,w)=>{const C=r.fold(()=>({}),R=>({action:R})),A=ie({buttonBehaviours:Kt([ei.button(()=>!t.enabled||w.isDisabled()),ri(),ar.config({}),Eo("button press",[rk("click"),rk("mousedown")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},C),_=$s(A,{dom:h});return $s(_,{components:b})},tZ=(t,r,c,h=[])=>{const b=t.tooltip.map(_=>({"aria-label":c.translate(_),title:c.translate(_)})).getOr({}),w={tag:"button",classes:["tox-tbtn"],attributes:b},C=t.icon.map(_=>MO(_,c.icons)),A=r1([C]);return zC(t,r,h,w,A,c)},qO=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},IF=(t,r,c,h=[],b=[])=>{const w=c.translate(t.text),C=t.icon.map(j=>MO(j,c.icons)),A=[C.getOrThunk(()=>Br(w))],_=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),H={tag:"button",classes:[...qO(_),...C.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...b],attributes:{title:w}};return zC(t,r,h,H,A,c)},GO=(t,r,c,h=[],b=[])=>{const w=IF(t,O.some(r),c,h,b);return Di.sketch(w)},LF=(t,r)=>c=>{r==="custom"?Hn(c,Jd,{name:t,value:{}}):r==="submit"?ns(c,av):r==="cancel"&&ns(c,jh)},nZ=(t,r)=>r==="menu",oZ=(t,r)=>r==="custom"||r==="cancel"||r==="submit",sZ=(t,r)=>r==="togglebutton",rZ=(t,r)=>{var c,h;const b=t.icon.map(Pe=>Yh(Pe,r.icons)).map(Es),w=Pe=>{Hn(Pe,Jd,{name:t.name,value:{setIcon:Je=>{b.map(It=>It.getOpt(Pe).each(At=>{vo.set(At,[Yh(Je,r.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),A=Ot(ie({},t),{name:(c=t.name)!==null&&c!==void 0?c:"",primary:C==="primary",tooltip:O.from(t.tooltip),enabled:(h=t.enabled)!==null&&h!==void 0?h:!1,borderless:!1}),_=A.tooltip.map(Pe=>({"aria-label":r.translate(Pe),title:r.translate(Pe)})).getOr({}),R=qO(C!=null?C:"secondary"),B=t.icon.isSome()&&t.text.isSome(),H={tag:"button",classes:[...R.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...B?["tox-button--icon-and-text"]:[]],attributes:_},j=[],X=r.translate(t.text.getOr("")),oe=Br(X),et=[...r1([b.map(Pe=>Pe.asSpec())]),...t.text.isSome()?[oe]:[]],He=zC(A,O.some(w),j,H,et,r);return Di.sketch(He)},UC=(t,r,c)=>{if(nZ(t,r)){const h=()=>C,b=t,w=Ot(ie({},t),{type:"menubutton",search:O.none(),onSetup:A=>(A.setEnabled(t.enabled),Z),fetch:zj(b.items,h,c)}),C=Es(wv(w,"tox-tbtn",c,O.none()));return C.asSpec()}else if(oZ(t,r)){const h=LF(t.name,r),b=Ot(ie({},t),{borderless:!1});return GO(b,h,c.shared.providers,[])}else{if(sZ(t,r))return rZ(t,c.shared.providers);throw new Error("Unknown footer button type")}},iZ=(t,r)=>{const c=LF(t.name,"custom");return ZU(O.none(),As.parts.field(ie({factory:Di},IF(t,O.some(c),r,[_C(""),bl.self()]))))},aZ={type:"separator"},lZ=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Z}),KO=(t,r)=>({type:"menuitem",value:r,text:t,meta:{attach:void 0},onAction:Z}),cZ=t=>ue(t,lZ),$F=(t,r)=>un(r,c=>c.type===t),HF=(t,r)=>cZ($F(t,r)),uZ=t=>HF("header",t.targets),dZ=t=>HF("anchor",t.targets),fZ=t=>O.from(t.anchorTop).map(r=>KO("<top>",r)).toArray(),hZ=t=>O.from(t.anchorBottom).map(r=>KO("<bottom>",r)).toArray(),mZ=t=>ue(t,r=>KO(r,r)),VF=t=>Do(t,(r,c)=>r.length===0||c.length===0?r.concat(c):r.concat(aZ,c),[]),YO=(t,r)=>{const c=t.toLowerCase();return un(r,h=>{var b;const w=h.meta!==void 0&&h.meta.text!==void 0?h.meta.text:h.text,C=(b=h.value)!==null&&b!==void 0?b:"";return bo(w.toLowerCase(),c)||bo(C.toLowerCase(),c)})},zF=(t,r,c)=>{var h,b;const w=ln.getValue(r),C=(b=(h=w==null?void 0:w.meta)===null||h===void 0?void 0:h.text)!==null&&b!==void 0?b:w.value;return c.getLinkInformation().fold(()=>[],_=>{const R=YO(C,mZ(c.getHistory(t)));return t==="file"?VF([R,YO(C,uZ(_)),YO(C,nt([fZ(_),dZ(_),hZ(_)]))]):R})},UF=bn("aria-invalid"),WF=(t,r,c,h)=>{const b=r.shared.providers,w=Pe=>{const Je=ln.getValue(Pe);c.addToHistory(Je.value,t.filetype)},C=Ot(ie({},h.map(Pe=>({initialData:Pe})).getOr({})),{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":UF,type:"url"},minChars:0,responseTime:0,fetch:Pe=>{const Je=zF(t.filetype,Pe,c),It=w1(Je,id.BUBBLE_TO_SANDBOX,r,{isHorizontalMenu:!1,search:O.none()});return ua.pure(It)},getHotspot:Pe=>oe.getOpt(Pe),onSetValue:(Pe,Je)=>{Pe.hasConfigured(bc)&&bc.run(Pe).get(Z)},typeaheadBehaviours:Kt([...c.getValidationHandler().map(Pe=>bc.config({getRoot:Je=>ma(Je.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Je,It)=>{B.getOpt(Je).each(At=>{on(At.element,"title",b.translate(It))})}},validator:{validate:Je=>{const It=ln.getValue(Je);return eZ.nu(At=>{Pe({type:t.filetype,url:It.value},Ct=>{if(Ct.status==="invalid"){const Zt=_o.error(Ct.message);At(Zt)}else{const Zt=_o.value(Ct.message);At(Zt)}})})},validateOnLoad:!1}})).toArray(),Gn.config({disabled:()=>!t.enabled||b.isDisabled()}),ar.config({}),Eo("urlinput-events",[Dt(Lm(),Pe=>{const Je=Nd(Pe.element),It=Je.trim();It!==Je&&pp(Pe.element,It),t.filetype==="file"&&Hn(Pe,gl,{name:t.name})}),Dt(ip(),Pe=>{Hn(Pe,gl,{name:t.name}),w(Pe)}),Dt(Q2(),Pe=>{Hn(Pe,gl,{name:t.name}),w(Pe)})])]),eventOrder:{[Lm()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:Pe=>Pe.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:r.shared.getSink,parts:{menu:Jp(!1,1,"normal")},onExecute:(Pe,Je,It)=>{Hn(Je,av,{})},onItemExecute:(Pe,Je,It,At)=>{w(Pe),Hn(Pe,gl,{name:t.name})}}),A=As.parts.field(Ot(ie({},C),{factory:Xj})),_=t.label.map(Pe=>Lc(Pe,b)),B=Es(((Pe,Je,It=Pe,At=Pe)=>pu(It,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+Pe],attributes:ie({title:b.translate(At),"aria-live":"polite"},Je.fold(()=>({}),Ct=>({id:Ct})))},b.icons))("invalid",O.some(UF),"warning")),H=Es({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[B.asSpec()]}),j=c.getUrlPicker(t.filetype),X=bn("browser.url.event"),oe=Es({dom:{tag:"div",classes:["tox-control-wrap"]},components:[A,H.asSpec()],behaviours:Kt([Gn.config({disabled:()=>!t.enabled||b.isDisabled()})])}),Se=Es(GO({name:t.name,icon:O.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:O.none(),borderless:!0},Pe=>ns(Pe,X),b,[],["tox-browse-url"])),et=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:nt([[oe.asSpec()],j.map(()=>Se.asSpec()).toArray()])}),He=Pe=>{qo.getCurrent(Pe).each(Je=>{const It=ln.getValue(Je),At=ie({fieldname:t.name},It);j.each(Ct=>{Ct(At).get(Zt=>{ln.setValue(Je,Zt),Hn(Pe,gl,{name:t.name})})})})};return As.sketch({dom:Dee(),components:_.toArray().concat([et()]),fieldBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||b.isDisabled(),onDisabled:Pe=>{As.getField(Pe).each(Gn.disable),Se.getOpt(Pe).each(Gn.disable)},onEnabled:Pe=>{As.getField(Pe).each(Gn.enable),Se.getOpt(Pe).each(Gn.enable)}}),ri(),Eo("url-input-events",[Dt(X,He)])])})},jF=(t,r)=>{const c=wA(t.icon,r.icons);return ad.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[Di.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:r.translate(t.iconTooltip)}},action:h=>Hn(h,Jd,{name:"alert-banner",value:t.url}),buttonBehaviours:Kt([Cx()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:r.translate(t.text)}}]})},XO=(t,r)=>{t.dom.checked=r},gZ=t=>t.dom.checked,ZF=(t,r,c)=>{const h=_=>(_.element.dom.click(),O.some(!0)),b=As.parts.field({factory:{sketch:qe},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Kt([bl.self(),Gn.config({disabled:()=>!t.enabled||r.isDisabled(),onDisabled:_=>{ma(_.element).each(R=>Qr(R,"tox-checkbox--disabled"))},onEnabled:_=>{ma(_.element).each(R=>br(R,"tox-checkbox--disabled"))}}),ar.config({}),Jn.config({}),xO(c,gZ,XO),Fn.config({mode:"special",onEnter:h,onSpace:h,stopSpaceKeyup:!0}),Eo("checkbox-events",[Dt(ip(),(_,R)=>{Hn(_,gl,{name:t.name})})])])}),w=As.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Br(r.translate(t.label))],behaviours:Kt([lv.config({})])}),C=_=>pu(_==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+_]},r.icons),A=Es({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[C("checked"),C("unchecked")]});return As.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[b,A.asSpec(),w],fieldBehaviours:Kt([Gn.config({disabled:()=>!t.enabled||r.isDisabled()}),ri()])})},qF=t=>t.presets==="presentation"?ad.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):ad.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Kt([ar.config({}),Jn.config({})])}),xi=t=>(r,c,h,b)=>$t(c,"name").fold(()=>t(c,b,O.none()),w=>r.field(w,t(c,b,$t(h,w)))),GF=t=>(r,c,h,b)=>{const w=$s(c,{source:"dynamic"});return xi(t)(r,w,h,b)},pZ={bar:xi((t,r)=>HU(t,r.shared)),collection:xi((t,r,c)=>GU(t,r.shared.providers,c)),alertbanner:xi((t,r)=>jF(t,r.shared.providers)),input:xi((t,r,c)=>vF(t,r.shared.providers,c)),textarea:xi((t,r,c)=>yF(t,r.shared.providers,c)),label:xi((t,r)=>sF(t,r.shared)),iframe:GF((t,r,c)=>gj(t,r.shared.providers,c)),button:xi((t,r)=>iZ(t,r.shared.providers)),checkbox:xi((t,r,c)=>ZF(t,r.shared.providers,c)),colorinput:xi((t,r,c)=>eW(t,r.shared,r.colorinput,c)),colorpicker:xi((t,r,c)=>rj(t,r.shared.providers,c)),dropzone:xi((t,r,c)=>aj(t,r.shared.providers,c)),grid:xi((t,r)=>XB(t,r.shared)),listbox:xi((t,r,c)=>BO(t,r,c)),selectbox:xi((t,r,c)=>bv(t,r.shared.providers,c)),sizeinput:xi((t,r)=>pF(t,r.shared.providers)),slider:xi((t,r,c)=>bF(t,r.shared.providers,c)),urlinput:xi((t,r,c)=>WF(t,r,r.urlinput,c)),customeditor:xi(KB),htmlpanel:xi(qF),imagepreview:xi((t,r,c)=>vj(t,c)),table:xi((t,r)=>Pj(t,r.shared.providers)),tree:xi((t,r)=>qj(t,r)),panel:xi((t,r)=>Aj(t,r))},bZ={field:(t,r)=>r,record:G([])},Su=(t,r,c,h)=>{const b=$s(h,{shared:{interpreter:w=>C1(t,w,c,b)}});return C1(t,r,c,b)},C1=(t,r,c,h)=>$t(pZ,r.type).fold(()=>r,b=>b(t,r,c,h)),Cv=(t,r,c)=>C1(bZ,t,r,c),Jh="layout-inset",Sv=t=>t.x,KF=(t,r)=>t.x+t.width/2-r.width/2,kv=(t,r)=>t.x+t.width-r.width,WC=t=>t.y,Ev=(t,r)=>t.y+t.height-r.height,YF=(t,r)=>t.y+t.height/2-r.height/2,Av=(t,r,c)=>Ai(kv(t,r),Ev(t,r),c.insetSouthwest(),Fd(),"southwest",Ar(t,{right:0,bottom:3}),Jh),Tv=(t,r,c)=>Ai(Sv(t),Ev(t,r),c.insetSoutheast(),ww(),"southeast",Ar(t,{left:1,bottom:3}),Jh),Sg=(t,r,c)=>Ai(kv(t,r),WC(t),c.insetNorthwest(),Ek(),"northwest",Ar(t,{right:0,top:2}),Jh),Ov=(t,r,c)=>Ai(Sv(t),WC(t),c.insetNortheast(),yw(),"northeast",Ar(t,{left:1,top:2}),Jh),ku=(t,r,c)=>Ai(KF(t,r),WC(t),c.insetNorth(),Dh(),"north",Ar(t,{top:2}),Jh),S1=(t,r,c)=>Ai(KF(t,r),Ev(t,r),c.insetSouth(),r3(),"south",Ar(t,{bottom:3}),Jh),XF=(t,r,c)=>Ai(kv(t,r),YF(t,r),c.insetEast(),X0(),"east",Ar(t,{right:0}),Jh),JF=(t,r,c)=>Ai(Sv(t),YF(t,r),c.insetWest(),bt(),"west",Ar(t,{left:1}),Jh),QF=t=>{switch(t){case"north":return ku;case"northeast":return Ov;case"northwest":return Sg;case"south":return S1;case"southeast":return Tv;case"southwest":return Av;case"east":return XF;case"west":return JF}},JO=(t,r,c,h,b)=>p3(h).map(QF).getOr(ku)(t,r,c,h,b),vZ=t=>{switch(t){case"north":return S1;case"northeast":return Tv;case"northwest":return Av;case"south":return ku;case"southeast":return Ov;case"southwest":return Sg;case"east":return JF;case"west":return XF}},yZ=(t,r,c,h,b)=>p3(h).map(vZ).getOr(ku)(t,r,c,h,b),_v={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},wZ=(t,r,c)=>{const b={maxHeightFunction:Sp()},w=()=>({type:"node",root:Ut(St(t())),node:O.from(t()),bubble:Hf(12,12,_v),layouts:{onRtl:()=>[Ov],onLtr:()=>[Sg]},overrides:b}),C=()=>({type:"hotspot",hotspot:r(),bubble:Hf(-12,12,_v),layouts:{onRtl:()=>[la,ca,Ti],onLtr:()=>[ca,la,Ti]},overrides:b});return()=>c()?w():C()},eI=(t,r,c,h)=>{const w={maxHeightFunction:Sp()},C=()=>({type:"node",root:Ut(St(r())),node:O.from(r()),bubble:Hf(12,12,_v),layouts:{onRtl:()=>[ku],onLtr:()=>[ku]},overrides:w}),A=()=>t?{type:"node",root:Ut(St(r())),node:O.from(r()),bubble:Hf(0,-Nu(r()),_v),layouts:{onRtl:()=>[Fa],onLtr:()=>[Fa]},overrides:w}:{type:"hotspot",hotspot:c(),bubble:Hf(0,0,_v),layouts:{onRtl:()=>[Fa],onLtr:()=>[Fa]},overrides:w};return()=>h()?C():A()},ud=(t,r,c)=>{const h=()=>({type:"node",root:Ut(St(t())),node:O.from(t()),layouts:{onRtl:()=>[ku],onLtr:()=>[ku]}}),b=()=>({type:"hotspot",hotspot:r(),layouts:{onRtl:()=>[Ti],onLtr:()=>[Ti]}});return()=>c()?h():b()},QO=(t,r)=>()=>({type:"selection",root:r(),getSelection:()=>{const c=t.selection.getRng(),h=t.model.table.getSelectedCells();if(h.length>1){const b=h[0],w=h[h.length-1],C={firstCell:Tt.fromDom(b),lastCell:Tt.fromDom(w)};return O.some(C)}return O.some(ob.range(Tt.fromDom(c.startContainer),c.startOffset,Tt.fromDom(c.endContainer),c.endOffset))}}),xZ=t=>r=>({type:"node",root:t(),node:r}),CZ=(t,r,c,h)=>{const b=Yp(t),w=()=>Tt.fromDom(t.getBody()),C=()=>Tt.fromDom(t.getContentAreaContainer()),A=()=>b||!h();return{inlineDialog:wZ(C,r,A),inlineBottomDialog:eI(t.inline,C,c,A),banner:ud(C,r,A),cursor:QO(t,w),node:xZ(w)}},SZ=t=>(r,c)=>{NN(t)(r,c)},kZ=t=>()=>ON(t),EZ=t=>r=>oC(t,r),tI=t=>r=>TN(t,r),nI=t=>({colorPicker:SZ(t),hasCustomColors:kZ(t),getColors:EZ(t),getColorCols:tI(t)}),Vee=t=>()=>MA(t),zee=t=>({isDraggableModal:Vee(t)}),da=t=>{const r=qn(BA(t)?"bottom":"top");return{isPositionedAtTop:()=>r.get()==="top",getDockingMode:r.get,setDockingMode:r.set}},jC=t=>Js(t,"items"),oI=t=>Js(t,"format"),Dv=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],AZ=t=>So(t,"items"),TZ=t=>So(t,"block"),OZ=t=>So(t,"inline"),_Z=t=>So(t,"selector"),sI=t=>Do(t,(r,c)=>{if(AZ(c)){const h=sI(c.items);return{customFormats:r.customFormats.concat(h.customFormats),formats:r.formats.concat([{title:c.title,items:h.formats}])}}else if(OZ(c)||TZ(c)||_Z(c)){const b=`custom-${v(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:r.customFormats.concat([{name:b,format:c}]),formats:r.formats.concat([{title:c.title,format:b,icon:c.icon}])}}else return Ot(ie({},r),{formats:r.formats.concat(c)})},{customFormats:[],formats:[]}),DZ=(t,r)=>{const c=sI(r),h=b=>{je(b,w=>{t.formatter.has(w.name)||t.formatter.register(w.name,w.format)})};return t.formatter?h(c.customFormats):t.on("init",()=>{h(c.customFormats)}),c.formats},rI=t=>KP(t).map(r=>{const c=DZ(t,r);return YP(t)?Dv.concat(c):c}).getOr(Dv),MZ=t=>{const r=Yn(t);return r.length===1&&Ue(r,"title")},e_=(t,r,c)=>Ot(ie({},t),{type:"formatter",isSelected:r(t.format),getStylePreview:c(t.format)}),Mv=(t,r,c,h)=>{const b=_=>e_(_,c,h),w=_=>{const R=A(_.items);return Ot(ie({},_),{type:"submenu",getStyleItems:G(R)})},C=_=>{const R=v(_.name)?_.name:bn(_.title),B=`custom-${R}`,H=Ot(ie({},_),{type:"formatter",format:B,isSelected:c(B),getStylePreview:h(B)});return t.formatter.register(R,H),H},A=_=>ue(_,R=>jC(R)?w(R):oI(R)?b(R):MZ(R)?Ot(ie({},R),{type:"separator"}):C(R));return A(r)},PZ=t=>{const r=A=>()=>t.formatter.match(A),c=A=>()=>{const _=t.formatter.get(A);return _!==void 0?O.some({tag:_.length>0&&(_[0].inline||_[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(A))}):O.none()},h=qn([]),b=qn([]),w=qn(!1);return t.on("PreInit",A=>{const _=rI(t),R=Mv(t,_,r,c);h.set(R)}),t.on("addStyleModifications",A=>{const _=Mv(t,A.items,r,c);b.set(_),w.set(A.replace)}),{getData:()=>{const A=w.get()?[]:h.get(),_=b.get();return A.concat(_)}}},iI=t=>Y(t)&&t.nodeType===1,RZ=ah.trim,t_=t=>r=>!!(iI(r)&&(r.contentEditable===t||r.getAttribute("data-mce-contenteditable")===t)),NZ=t_("true"),BZ=t_("false"),n_=(t,r,c,h,b)=>({type:t,title:r,url:c,level:h,attach:b}),Uee=t=>{let r=t;for(;r=r.parentNode;){const c=r.contentEditable;if(c&&c!=="inherit")return NZ(r)}return!1},Wee=(t,r)=>ue(Oi(Tt.fromDom(r),t),c=>c.dom),aI=t=>t.innerText||t.textContent,FZ=t=>t.id?t.id:bn("h"),IZ=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,lI=t=>IZ(t)&&cI(t),ZC=t=>t&&/^(H[1-6])$/.test(t.nodeName),cI=t=>Uee(t)&&!BZ(t),LZ=t=>ZC(t)&&cI(t),uI=t=>ZC(t)?parseInt(t.nodeName.substr(1),10):0,$Z=t=>{var r;const c=FZ(t),h=()=>{t.id=c};return n_("header",(r=aI(t))!==null&&r!==void 0?r:"","#"+c,uI(t),h)},HZ=t=>{const r=t.id||t.name,c=aI(t);return n_("anchor",c||"#"+r,"#"+r,0,Z)},VZ=t=>ue(un(t,LZ),$Z),zZ=t=>ue(un(t,lI),HZ),o_=t=>Wee("h1,h2,h3,h4,h5,h6,a:not([href])",t),dI=t=>RZ(t.title).length>0,UZ={find:t=>{const r=o_(t);return un(VZ(r).concat(zZ(r)),dI)}},fI="tinymce-url-history",hI=5,s_=t=>v(t)&&/^https?/.test(t),WZ=t=>T(t)&&t.length<=hI&&xe(t,s_),Pv=t=>x(t)&&Bo(t,r=>!WZ(r)).isNone(),mI=()=>{const t=zh.getItem(fI);if(t===null)return{};let r;try{r=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return{};throw c}return Pv(r)?r:{}},qC=t=>{if(!Pv(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));zh.setItem(fI,JSON.stringify(t))},jZ=t=>{const r=mI();return $t(r,t).getOr([])},r_=(t,r)=>{if(!s_(t))return;const c=mI(),h=$t(c,r).getOr([]),b=un(h,w=>w!==t);c[r]=[t].concat(b).slice(0,hI),qC(c)},k1=t=>!!t,gI=t=>pt(ah.makeMap(t,/[, ]/),k1),i_=t=>O.from(tR(t)),pI=t=>{const r=O.from(_A(t)).filter(k1).map(gI);return i_(t).fold(ne,c=>r.fold(ge,h=>Yn(h).length>0?h:!1))},bI=(t,r)=>{const c=pI(t);return N(c)?c?i_(t):O.none():c[r]?i_(t):O.none()},vI=(t,r)=>bI(t,r).map(c=>h=>ua.nu(b=>{const w=(A,_)=>{if(!v(A))throw new Error("Expected value to be string");if(_!==void 0&&!x(_))throw new Error("Expected meta to be a object");b({value:A,meta:_})},C=ie({filetype:r,fieldname:h.fieldname},O.from(h.meta).getOr({}));c.call(t,w,h.value,C)})),yI=t=>O.from(t).filter(v).getOrUndefined(),a_=t=>DA(t)?O.some({targets:UZ.find(t.getBody()),anchorTop:yI(Tx(t)),anchorBottom:yI(oR(t))}):O.none(),GC=t=>O.from(OA(t)),ZZ=t=>({getHistory:jZ,addToHistory:r_,getLinkInformation:()=>a_(t),getValidationHandler:()=>GC(t),getUrlPicker:r=>vI(t,r)}),qZ=(t,r,c,h)=>{const b=qn(!1),w=da(r),C={icons:()=>r.ui.registry.getAll().icons,menuItems:()=>r.ui.registry.getAll().menuItems,translate:mc.translate,isDisabled:()=>r.mode.isReadOnly()||!r.ui.isEnabled(),getOption:r.options.get},A=ZZ(r),_=PZ(r),R=nI(r),B=zee(r),H=()=>b.get(),j=et=>b.set(et),X={shared:{providers:C,anchors:CZ(r,c,h,w.isPositionedAtTop),header:w},urlinput:A,styles:_,colorinput:R,dialog:B,isContextMenuOpen:H,setContextMenuState:j},oe=Ot(ie({},X),{shared:Ot(ie({},X.shared),{interpreter:et=>Cv(et,{},oe),getSink:t.popup})}),Se=Ot(ie({},X),{shared:Ot(ie({},X.shared),{interpreter:et=>Cv(et,{},Se),getSink:t.dialog})});return{popup:oe,dialog:Se}},E1=(t,r,c)=>{const h=(Ct,Zt)=>{je([r,...c],Jt=>{Jt.broadcastEvent(Ct,Zt)})},b=(Ct,Zt)=>{je([r,...c],Jt=>{Jt.broadcastOn([Ct],Zt)})},w=Ct=>b($d(),{target:Ct.target}),C=Am(),A=Qa(C,"touchstart",w),_=Qa(C,"touchmove",Ct=>h(Jy(),Ct)),R=Qa(C,"touchend",Ct=>h(d8(),Ct)),B=Qa(C,"mousedown",w),H=Qa(C,"mouseup",Ct=>{Ct.raw.button===0&&b(uE(),{target:Ct.target})}),j=Ct=>b($d(),{target:Tt.fromDom(Ct.target)}),X=Ct=>{Ct.button===0&&b(uE(),{target:Tt.fromDom(Ct.target)})},oe=()=>{je(t.editorManager.get(),Ct=>{t!==Ct&&Ct.dispatch("DismissPopups",{relatedTarget:t})})},Se=Ct=>h(B0(),y3(Ct)),et=Ct=>{b(Qm(),{}),h(F0(),y3(Ct))},He=St(Tt.fromDom(t.getElement())),Pe=Ew(He,"scroll",Ct=>{requestAnimationFrame(()=>{const Zt=t.getContainer();if(Zt!=null){const Ao=Wh(t,r.element).map(hn=>[hn.element,...hn.others]).getOr([]);yt(Ao,hn=>vs(hn,Ct.target))&&(t.dispatch("ElementScroll",{target:Ct.target.dom}),h(FM(),Ct))}})}),Je=()=>b(Qm(),{}),It=Ct=>{Ct.state&&b($d(),{target:Tt.fromDom(t.getContainer())})},At=Ct=>{b($d(),{target:Tt.fromDom(Ct.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",j),t.on("tap",j),t.on("mouseup",X),t.on("mousedown",oe),t.on("ScrollWindow",Se),t.on("ResizeWindow",et),t.on("ResizeEditor",Je),t.on("AfterProgressState",It),t.on("DismissPopups",At)}),t.on("remove",()=>{t.off("click",j),t.off("tap",j),t.off("mouseup",X),t.off("mousedown",oe),t.off("ScrollWindow",Se),t.off("ResizeWindow",et),t.off("ResizeEditor",Je),t.off("AfterProgressState",It),t.off("DismissPopups",At),B.unbind(),A.unbind(),_.unbind(),R.unbind(),H.unbind(),Pe.unbind()}),t.on("detach",()=>{je([r,...c],Mp),je([r,...c],Ct=>Ct.destroy())})},Ci=SH,nf=g4,wI=G([tt("shell",!1),Rt("makeItem"),tt("setupItem",Z),du.field("listBehaviours",[vo])]),l_=fc({name:"items",overrides:()=>({behaviours:Kt([vo.config({})])})}),GZ=G([l_]),KZ=G("CustomList"),YZ=(t,r,c,h)=>{const b=(A,_)=>{C(A).fold(()=>{throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")},R=>{const B=vo.contents(R),H=_.length,j=H-B.length,X=j>0?Ie(j,()=>t.makeItem()):[],oe=B.slice(H);je(oe,et=>vo.remove(R,et)),je(X,et=>vo.append(R,et));const Se=vo.contents(R);je(Se,(et,He)=>{t.setupItem(A,et,_[He],He)})})},w=t.shell?{behaviours:[vo.config({})],components:[]}:{behaviours:[],components:r},C=A=>t.shell?O.some(A):js(A,t,"items");return{uid:t.uid,dom:t.dom,components:w.components,behaviours:_i(t.listBehaviours,w.behaviours),apis:{setItems:b}}},KC=Sa({name:KZ(),configFields:wI(),partFields:GZ(),factory:YZ,apis:{setItems:(t,r,c)=>{t.setItems(r,c)}}}),A1=G([Rt("dom"),tt("shell",!0),yi("toolbarBehaviours",[vo])]),XZ=G([fc({name:"groups",overrides:()=>({behaviours:Kt([vo.config({})])})})]),JZ=(t,r,c,h)=>{const b=(A,_)=>{w(A).fold(()=>{throw new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},R=>{vo.set(R,_)})},w=A=>t.shell?O.some(A):js(A,t,"groups"),C=t.shell?{behaviours:[vo.config({})],components:[]}:{behaviours:[],components:r};return{uid:t.uid,dom:t.dom,components:C.components,behaviours:_i(t.toolbarBehaviours,C.behaviours),apis:{setGroups:b,refresh:Z},domModification:{attributes:{role:"group"}}}},dd=Sa({name:"Toolbar",configFields:A1(),partFields:XZ(),factory:JZ,apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)}}}),QZ=Z,eq=ne,c_=G([]);var tq=Object.freeze({__proto__:null,setup:QZ,isDocked:eq,getBehaviours:c_});const kg=t=>(wr(zs(t,"position"),"fixed")?O.none():ga(t)).orThunk(()=>{const h=Tt.fromTag("span");return mi(t).bind(b=>{Ma(b,h);const w=ga(h);return Dc(h),w})}),CI=t=>kg(t).map(Ka).getOrThunk(()=>dr(0,0)),nq=(t,r)=>{const c=t.element;Qr(c,r.transitionClass),br(c,r.fadeOutClass),Qr(c,r.fadeInClass),r.onShow(t)},u_=(t,r)=>{const c=t.element;Qr(c,r.transitionClass),br(c,r.fadeInClass),Qr(c,r.fadeOutClass),r.onHide(t)},SI=(t,r)=>t.y<r.bottom&&t.bottom>r.y,kI=(t,r)=>t.y>=r.y,EI=(t,r)=>t.bottom<=r.bottom,d_=(t,r,c)=>({location:"top",leftX:r,topY:c.bounds.y-t.y}),f_=(t,r,c)=>({location:"bottom",leftX:r,bottomY:t.bottom-c.bounds.bottom}),h_=t=>t.box.x-t.win.x,oq=(t,r,c)=>{const h=r.win,b=r.box,w=h_(r);return ao(t,C=>{switch(C){case"bottom":return EI(b,c.bounds)?O.none():O.some(f_(h,w,c));case"top":return kI(b,c.bounds)?O.none():O.some(d_(h,w,c));default:return O.none()}}).getOr({location:"no-dock"})},sq=(t,r,c)=>xe(t,h=>{switch(h){case"bottom":return EI(r,c.bounds);case"top":return kI(r,c.bounds)}}),rq=(t,r)=>{const c=r.optScrollEnv.fold(G(t.bounds.y),h=>h.scrollElmTop+(t.bounds.y-h.currentScrollTop));return dr(t.bounds.x,c)},iq=(t,r)=>{const c=r.optScrollEnv.fold(G(t.y),h=>t.y+h.currentScrollTop-h.scrollElmTop);return dr(t.x,c)},AI=(t,r,c)=>c.getInitialPos().map(h=>{const b=rq(h,r);return{box:Kr(b.left,b.top,ee(t),rr(t)),location:h.location}}),TI=(t,r,c,h,b)=>{const w=iq(r,c),C=Kr(w.left,w.top,r.width,r.height);h.setInitialPos({style:qr(t),position:Qs(t,"position")||"static",bounds:C,location:b.location})},OI=(t,r,c,h,b)=>{h.getInitialPos().fold(()=>TI(t,r,c,h,b),()=>Z)},m_=(t,r,c)=>c.getInitialPos().bind(h=>{var b;switch(c.clearInitialPos(),h.position){case"static":return O.some({morph:"static"});case"absolute":const w=kg(t).getOr(ur()),C=Sr(w),A=(b=w.dom.scrollTop)!==null&&b!==void 0?b:0;return O.some({morph:"absolute",positionCss:cc("absolute",$t(h.style,"left").map(_=>r.x-C.x),$t(h.style,"top").map(_=>r.y-C.y+A),$t(h.style,"right").map(_=>C.right-r.right),$t(h.style,"bottom").map(_=>C.bottom-r.bottom))});default:return O.none()}}),YC=(t,r,c)=>AI(t,r,c).filter(({box:h})=>sq(c.getModes(),h,r)).bind(({box:h})=>m_(t,h,c)),XC=t=>{switch(t.location){case"top":return O.some({morph:"fixed",positionCss:cc("fixed",O.some(t.leftX),O.some(t.topY),O.none(),O.none())});case"bottom":return O.some({morph:"fixed",positionCss:cc("fixed",O.some(t.leftX),O.none(),O.none(),O.some(t.bottomY))});default:return O.none()}},aq=(t,r,c)=>{const h=Sr(t),b=Zi(),w=oq(c.getModes(),{win:b,box:h},r);return w.location==="top"||w.location==="bottom"?(TI(t,h,r,c,w),XC(w)):O.none()},lq=(t,r,c)=>YC(t,r,c).orThunk(()=>r.optScrollEnv.bind(h=>AI(t,r,c)).bind(({box:h,location:b})=>{const w=Zi(),C=h_({win:w,box:h}),A=b==="top"?d_(w,C,r):f_(w,C,r);return XC(A)})),cq=(t,r,c)=>{const h=t.element;return wr(zs(h,"position"),"fixed")?lq(h,r,c):aq(h,r,c)},uq=(t,r,c)=>{const h=t.element;return AI(h,r,c).bind(({box:b})=>m_(h,b,c))},dq=(t,r,c,h)=>{const b=Sr(t),w=Zi(),C=h_({win:w,box:b}),A=h(w,C,r);return A.location==="bottom"||A.location==="top"?(OI(t,b,r,c,A),XC(A)):O.none()},_I=(t,r,c)=>{c.setDocked(!1),je(["left","right","top","bottom","position"],h=>es(t.element,h)),r.onUndocked(t)},g_=(t,r,c,h)=>{const b=h.position==="fixed";c.setDocked(b),m3(t.element,h),(b?r.onDocked:r.onUndocked)(t)},p_=(t,r,c,h,b=!1)=>{r.contextual.each(w=>{w.lazyContext(t).each(C=>{const A=SI(C,h.bounds);A!==c.isVisible()&&(c.setVisible(A),b&&!A?(Ur(t.element,[w.fadeOutClass]),w.onHide(t)):(A?nq:u_)(t,w))})})},b_=(t,r,c,h,b)=>{p_(t,r,c,h,!0),g_(t,r,c,b.positionCss)},fq=(t,r,c,h,b)=>{switch(b.morph){case"static":return _I(t,r,c);case"absolute":return g_(t,r,c,b.positionCss);case"fixed":return b_(t,r,c,h,b)}},DI=(t,r,c)=>{const h=r.lazyViewport(t);p_(t,r,c,h),cq(t,h,c).each(b=>{fq(t,r,c,h,b)})},hq=(t,r,c)=>{const h=t.element;c.setDocked(!1);const b=r.lazyViewport(t);uq(t,b,c).each(w=>{switch(w.morph){case"static":{_I(t,r,c);break}case"absolute":{g_(t,r,c,w.positionCss);break}}}),c.setVisible(!0),r.contextual.each(w=>{au(h,[w.fadeInClass,w.fadeOutClass,w.transitionClass]),w.onShow(t)}),JC(t,r,c)},JC=(t,r,c)=>{t.getSystem().isConnected()&&DI(t,r,c)},MI=(t,r,c)=>{c.isDocked()&&hq(t,r,c)},Qh=t=>(r,c,h)=>{const b=c.lazyViewport(r);dq(r.element,b,h,t).each(C=>{b_(r,c,h,b,C)})},PI=Qh(d_),Rv=Qh(f_);var RI=Object.freeze({__proto__:null,refresh:JC,reset:MI,isDocked:(t,r,c)=>c.isDocked(),getModes:(t,r,c)=>c.getModes(),setModes:(t,r,c,h)=>c.setModes(h),forceDockToTop:PI,forceDockToBottom:Rv}),pq=Object.freeze({__proto__:null,events:(t,r)=>ir([Bf(ap(),(c,h)=>{t.contextual.each(b=>{vi(c.element,b.transitionClass)&&(au(c.element,[b.transitionClass,b.fadeInClass]),(r.isVisible()?b.onShown:b.onHidden)(c)),h.stop()})}),Dt(B0(),(c,h)=>{JC(c,t,r)}),Dt(FM(),(c,h)=>{JC(c,t,r)}),Dt(F0(),(c,h)=>{MI(c,t,r)})])}),bq=[ec("contextual",[xs("fadeInClass"),xs("fadeOutClass"),xs("transitionClass"),Wu("lazyContext"),os("onShow"),os("onShown"),os("onHide"),os("onHidden")]),$i("lazyViewport",()=>({bounds:Zi(),optScrollEnv:O.none()})),Zu("modes",["top","bottom"],Ki),os("onDocked"),os("onUndocked")],vq=Object.freeze({__proto__:null,init:t=>{const r=qn(!1),c=qn(!0),h=or(),b=qn(t.modes),w=()=>`docked:  ${r.get()}, visible: ${c.get()}, modes: ${b.get().join(",")}`;return rc({isDocked:r.get,setDocked:r.set,getInitialPos:h.get,setInitialPos:h.set,clearInitialPos:h.clear,isVisible:c.get,setVisible:c.set,getModes:b.get,setModes:b.set,readState:w})}});const Fr=Xi({fields:bq,name:"docking",active:pq,apis:RI,state:vq}),em=G(bn("toolbar-height-change")),yc={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},QC="tox-tinymce--toolbar-sticky-on",NI="tox-tinymce--toolbar-sticky-off",yq=(t,r)=>{const c=ji(r),b=_a(r).dom.innerHeight,w=Pa(c),C=Tt.fromDom(t.elm),A=ul(C),_=rr(C),R=A.y,B=R+_,H=Ka(r),j=rr(r),X=H.top,oe=X+j,Se=Math.abs(X-w.top)<2,et=Math.abs(oe-(w.top+b))<2;if(Se&&R<oe)$y(w.left,R-j,c);else if(et&&B>X){const He=R-b+_+j;$y(w.left,He,c)}},T1=(t,r)=>Ue(Fr.getModes(t),r),y_=t=>{const r=h=>Nu(h)+(parseInt(Qs(h,"margin-top"),10)||0)+(parseInt(Qs(h,"margin-bottom"),10)||0),c=t.element;ma(c).each(h=>{const b="padding-"+Fr.getModes(t)[0];if(Fr.isDocked(t)){const w=ee(h);Cn(c,"width",w+"px"),Cn(h,b,r(c)+"px")}else es(c,"width"),es(h,b)})},O1=(t,r)=>{r?(br(t,yc.fadeOutClass),Ur(t,[yc.transitionClass,yc.fadeInClass])):(br(t,yc.fadeInClass),Ur(t,[yc.fadeOutClass,yc.transitionClass]))},w_=(t,r)=>{const c=Tt.fromDom(t.getContainer());r?(Qr(c,QC),br(c,NI)):(Qr(c,NI),br(c,QC))},wq=(t,r)=>{const c=ji(r);Id(c).filter(h=>!vs(r,h)).filter(h=>vs(h,Tt.fromDom(c.dom.body))||ha(t,h)).each(()=>lc(r))},xq=(t,r)=>cu(t).orThunk(()=>r().toOptional().bind(c=>cu(c.element))),Cq=(t,r,c)=>{t.inline||(r.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(Fr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(y_)}),t.on("SkinLoaded",()=>{c().each(h=>{Fr.isDocked(h)?Fr.reset(h):Fr.refresh(h)})}),t.on("FullscreenStateChanged",()=>{c().each(Fr.reset)})),t.on("AfterScrollIntoView",h=>{c().each(b=>{Fr.refresh(b);const w=b.element;L4(w)&&yq(h,w)})}),t.on("PostRender",()=>{w_(t,!1)})},Sq=t=>t().map(Fr.isDocked).getOr(!1),kq=()=>[Dl.config({channels:{[em()]:{onReceive:y_}}})],BI=(t,r)=>{const c=or(),h=r.getSink,b=A=>{h().each(_=>A(_.element))},w=A=>{t.inline||y_(A),w_(t,Fr.isDocked(A)),A.getSystem().broadcastOn([Qm()],{}),h().each(_=>_.getSystem().broadcastOn([Qm()],{}))},C=t.inline?[]:kq();return[Jn.config({}),Fr.config({contextual:ie({lazyContext:A=>{const _=Nu(A.element),R=t.inline?t.getContentAreaContainer():t.getContainer();return O.from(R).map(B=>{const H=Sr(Tt.fromDom(B));return Wh(t,A.element).fold(()=>{const X=H.height-_,oe=H.y+(T1(A,"top")?0:_);return Kr(H.x,oe,H.width,X)},X=>{const oe=x0(H,c1(X)),Se=T1(A,"top")?oe.y:oe.y+_;return Kr(oe.x,Se,oe.width,oe.height-_)})})},onShow:()=>{b(A=>O1(A,!0))},onShown:A=>{b(_=>au(_,[yc.transitionClass,yc.fadeInClass])),c.get().each(_=>{wq(A.element,_),c.clear()})},onHide:A=>{xq(A.element,h).fold(c.clear,c.set),b(_=>O1(_,!1))},onHidden:()=>{b(A=>au(A,[yc.transitionClass]))}},yc),lazyViewport:A=>Wh(t,A.element).fold(()=>{const R=Zi(),B=Ex(t),H=R.y+(T1(A,"top")?B:0),j=R.height-(T1(A,"bottom")?B:0);return{bounds:Kr(R.x,H,R.width,j),optScrollEnv:O.none()}},R=>({bounds:c1(R),optScrollEnv:O.some({currentScrollTop:R.element.dom.scrollTop,scrollElmTop:Ka(R.element).top})})),modes:[r.header.getDockingMode()],onDocked:w,onUndocked:w}),...C]};var FI=Object.freeze({__proto__:null,setup:Cq,isDocked:Sq,getBehaviours:BI});const II=t=>{const r=t.editor,c=t.sticky?BI:c_;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Kt(c(r,t.sharedBackstage))}},x_=Ln([jr,Jl("items",xn([Dm([QA,Ql("items",Ki)]),Ki]))].concat(o1)),Eq=t=>Er("GroupToolbarButton",x_,t),eS=[Na("text"),Na("tooltip"),Na("icon"),Tl("search",!1,xn([zu,Ln([Na("placeholder")])],t=>N(t)?t?O.some({placeholder:O.none()}):O.none():O.some(t))),Wu("fetch"),$i("onSetup",()=>Z)],Nv=Ln([jr,...eS]),C_=t=>Er("menubutton",Nv,t),Aq=Ln([jr,jb,gc,qd,nT,OR,$h,tc("presets","normal",["normal","color","listpreview"]),MR(1),t1,YV]),Tq=t=>Er("SplitButton",Aq,t);var S_=Rl({factory:(t,r)=>{const c=(b,w)=>{const C=ue(w,A=>{const _={type:"menubutton",text:A.text,fetch:B=>{B(A.getItems())}},R=C_(_).mapError(B=>dl(B)).getOrDie();return wv(R,"tox-mbtn",r.backstage,O.some("menuitem"))});vo.set(b,C)},h={focus:Fn.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:Kt([vo.config({}),Eo("menubar-events",[tr(b=>{t.onSetup(b)}),Dt(Mf(),(b,w)=>{Wr(b.element,".tox-mbtn--active").each(C=>{Ju(w.event.target,".tox-mbtn").each(A=>{vs(C,A)||b.getSystem().getByDom(C).each(_=>{b.getSystem().getByDom(A).each(R=>{Ic.expand(R),Ic.close(_),Jn.focus(R)})})})})}),Dt(Qy(),(b,w)=>{w.event.prevFocus.bind(C=>b.getSystem().getByDom(C).toOptional()).each(C=>{w.event.newFocus.bind(A=>b.getSystem().getByDom(A).toOptional()).each(A=>{Ic.isOpen(C)&&(Ic.expand(A),Ic.close(C))})})})]),Fn.config({mode:"flow",selector:".tox-mbtn",onEscape:b=>(t.onEscape(b),O.some(!0))}),ar.config({})]),apis:h,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Rt("dom"),Rt("uid"),Rt("onEscape"),Rt("backstage"),tt("onSetup",Z)],apis:{focus:(t,r)=>{t.focus(r)},setMenus:(t,r,c)=>{t.setMenus(r,c)}}});const k_="⚡️Upgrade",E_="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",Oq=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:E_,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:k_}}]}),tS="container",_q=[yi("slotBehaviours",[])],LI=t=>"<alloy.field."+t+">",Dq=t=>{const r=(()=>{const w=[];return{slot:(A,_)=>(w.push(A),TE(tS,LI(A),_)),record:G(w)}})(),c=t(r),h=r.record(),b=ue(h,w=>Ca({name:w,pname:LI(w)}));return PE(tS,_q,b,Mq,c)},Mq=(t,r)=>{const c=Se=>_E(t),h=(Se,et)=>js(Se,t,et),b=(Se,et)=>(He,Pe)=>js(He,t,Pe).map(Je=>Se(Je,Pe)).getOr(et),w=Se=>(et,He)=>{je(He,Pe=>Se(et,Pe))},C=(Se,et)=>$r(Se.element,"aria-hidden")!=="true",A=(Se,et)=>{if(!C(Se)){const He=Se.element;es(He,"display"),be(He,"aria-hidden"),Hn(Se,I0(),{name:et,visible:!0})}},_=(Se,et)=>{if(C(Se)){const He=Se.element;Cn(He,"display","none"),on(He,"aria-hidden","true"),Hn(Se,I0(),{name:et,visible:!1})}},R=b(C,!1),B=b(_),H=w(B),j=Se=>H(Se,c()),X=b(A),oe={getSlotNames:c,getSlot:h,isShowing:R,hideSlot:B,hideAllSlots:j,showSlot:X};return{uid:t.uid,dom:t.dom,components:r,behaviours:Zf(t.slotBehaviours),apis:oe}},Pq=pt({getSlotNames:(t,r)=>t.getSlotNames(r),getSlot:(t,r,c)=>t.getSlot(r,c),isShowing:(t,r,c)=>t.isShowing(r,c),hideSlot:(t,r,c)=>t.hideSlot(r,c),hideAllSlots:(t,r)=>t.hideAllSlots(r),showSlot:(t,r,c)=>t.showSlot(r,c)},t=>hp(t)),za=Ot(ie({},Pq),{sketch:Dq}),Kee=Ln([gc,jb,$i("onShow",Z),$i("onHide",Z),$h]),$I=t=>Er("sidebar",Kee,t),Rq=t=>{const{sidebars:r}=t.ui.registry.getAll();je(Yn(r),c=>{const h=r[c],b=()=>wr(O.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:h.icon,tooltip:h.tooltip,onAction:w=>{t.execCommand("ToggleSidebar",!1,c),w.setActive(b())},onSetup:w=>{w.setActive(b());const C=()=>w.setActive(b());return t.on("ToggleSidebar",C),()=>{t.off("ToggleSidebar",C)}}})})},HI=t=>({element:()=>t.element.dom}),Nq=(t,r)=>{const c=ue(Yn(r),h=>{const b=r[h],w=Us($I(b));return{name:h,getApi:HI,onSetup:w.onSetup,onShow:w.onShow,onHide:w.onHide}});return ue(c,h=>{const b=qn(Z);return t.slot(h.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Gb.unnamedEvents([Hh(h,b),Kd(h,b),Dt(I0(),(w,C)=>{const A=C.event;Qe(c,R=>R.name===A.name).each(R=>{(A.visible?R.onShow:R.onHide)(R.getApi(w))})})])})})},Bq=t=>za.sketch(r=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:Nq(r,t),slotBehaviours:Gb.unnamedEvents([tr(c=>za.hideAllSlots(c))])})),Fq=(t,r,c)=>{qo.getCurrent(t).each(b=>{vo.set(b,[Bq(r)]);const w=c==null?void 0:c.toLowerCase();v(w)&&So(r,w)&&qo.getCurrent(b).each(C=>{za.showSlot(C,w),Il.immediateGrow(b),es(b.element,"width"),nS(t.element,"region")})})},nS=(t,r)=>{on(t,"role",r)},Iq=(t,r)=>{qo.getCurrent(t).each(h=>{qo.getCurrent(h).each(w=>{Il.hasGrown(h)?za.isShowing(w,r)?(Il.shrink(h),nS(t.element,"presentation")):(za.hideAllSlots(w),za.showSlot(w,r),nS(t.element,"region")):(za.hideAllSlots(w),za.showSlot(w,r),Il.grow(h),nS(t.element,"region"))})})},VI=t=>qo.getCurrent(t).bind(c=>Il.isGrowing(c)||Il.hasGrown(c)?qo.getCurrent(c).bind(w=>Qe(za.getSlotNames(w),C=>za.isShowing(w,C))):O.none()),A_=bn("FixSizeEvent"),T_=bn("AutoSizeEvent"),Lq=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Kt([ar.config({}),Jn.config({}),Il.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:r=>{qo.getCurrent(r).each(za.hideAllSlots),ns(r,T_)},onGrown:r=>{ns(r,T_)},onStartGrow:r=>{Hn(r,A_,{width:zs(r.element,"width").getOr("")})},onStartShrink:r=>{Hn(r,A_,{width:ee(r.element)+"px"})}}),vo.config({}),qo.config({find:r=>{const c=vo.contents(r);return en(c)}})])}],behaviours:Kt([bl.childAt(0),Eo("sidebar-sliding-events",[Dt(A_,(r,c)=>{Cn(r.element,"width",c.event.width)}),Dt(T_,(r,c)=>{es(r.element,"width")})])])});var zI=Object.freeze({__proto__:null,block:(t,r,c,h)=>{on(t.element,"aria-busy",!0);const b=r.getRoot(t).getOr(t),w=Kt([Fn.config({mode:"special",onTab:()=>O.some(!0),onShiftTab:()=>O.some(!0)}),Jn.config({})]),C=h(b,w),A=b.getSystem().build(C);vo.append(b,Pc(A)),A.hasConfigured(Fn)&&r.focus&&Fn.focusIn(A),c.isBlocked()||r.onBlock(t),c.blockWith(()=>vo.remove(b,A))},unblock:(t,r,c)=>{be(t.element,"aria-busy"),c.isBlocked()&&r.onUnblock(t),c.clear()},isBlocked:(t,r,c)=>c.isBlocked()}),Hq=[$i("getRoot",O.none),Li("focus",!0),os("onBlock"),os("onUnblock")],wc=Object.freeze({__proto__:null,init:()=>{const t=f7(),r=c=>{t.set({destroy:c})};return rc({readState:t.isSet,blockWith:r,clear:t.clear,isBlocked:t.isSet})}});const fd=Xi({fields:Hq,name:"blocking",apis:zI,state:wc}),UI=t=>(r,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Qf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),O_=t=>qo.getCurrent(t).each(r=>lc(r.element,!0)),Vq=(t,r)=>{const c="tabindex",h=`data-mce-${c}`;O.from(t.iframeElement).map(Tt.fromDom).each(b=>{r?(U(b,c).each(w=>on(b,h,w)),on(b,c,-1)):(be(b,c),U(b,h).each(w=>{on(b,c,w),be(b,h)}))})},Bv=(t,r,c,h)=>{const b=r.element;if(Vq(t,c),c)fd.block(r,UI(h)),es(b,"display"),be(b,"aria-hidden"),t.hasFocus()&&O_(r);else{const w=qo.getCurrent(r).exists(C=>Q0(C.element));fd.unblock(r),Cn(b,"display","none"),on(b,"aria-hidden","true"),w&&t.focus()}},zq=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Kt([vo.config({}),fd.config({focus:!1}),qo.config({find:r=>en(r.components())})]),components:[]}),oS=t=>t.type==="focusin",Uq=t=>oS(t)?(t.composed?en(t.composedPath()):O.from(t.target)).map(Tt.fromDom).filter(Po).exists(c=>vi(c,"mce-pastebin")):!1,sS=(t,r,c)=>{const h=qn(!1),b=or(),w=A=>{h.get()&&!Uq(A)&&(A.preventDefault(),O_(r()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",w),t.on("BeforeExecCommand",A=>{A.command.toLowerCase()==="mcefocus"&&A.value!==!0&&w(A)})});const C=A=>{A!==h.get()&&(h.set(A),Bv(t,r(),A,c.providers),yN(t,A))};t.on("ProgressState",A=>{if(b.on(clearTimeout),q(A.time)){const _=lg.setEditorTimeout(t,()=>C(A.state),A.time);b.set(_)}else C(A.state),b.clear()})},Wq=(t,r)=>Do(t,(b,w)=>r(w,b.len).fold(G(b),A=>({len:A.finish,list:b.list.concat([A])})),{len:0,list:[]}).list,__=(t,r,c)=>({within:t,extra:r,withinWidth:c}),xc=(t,r,c)=>{const h=Wq(t,(A,_)=>{const R=c(A);return O.some({element:A,start:_,finish:_+R,width:R})}),b=un(h,A=>A.finish<=r),w=oo(b,(A,_)=>A+_.width,0),C=h.slice(b.length);return{within:b,extra:C,withinWidth:w}},rS=t=>ue(t,r=>r.element),iS=(t,r,c)=>{const h=rS(t.concat(r));return __(h,[],c)},WI=(t,r,c,h)=>{const b=rS(t).concat([c]);return __(b,rS(r),h)},jI=(t,r,c)=>__(rS(t),[],c),jq=(t,r,c)=>{const h=xc(r,t,c);return h.extra.length===0?O.some(h):O.none()},ZI=(t,r,c,h)=>{const b=jq(t,r,c).getOrThunk(()=>xc(r,t-c(h),c)),w=b.within,C=b.extra,A=b.withinWidth;return C.length===1&&C[0].width<=c(h)?iS(w,C,A):C.length>=1?WI(w,C,h,A):jI(w,C,A)},qI=(t,r)=>{const c=ue(r,h=>Pc(h));dd.setGroups(t,c)},Zq=t=>ao(t,r=>cu(r.element).bind(c=>r.getSystem().getByDom(c).toOptional())),GI=(t,r,c)=>{const h=r.builtGroups.get();if(h.length===0)return;const b=Gf(t,r,"primary"),w=Pr.getCoupled(t,"overflowGroup");Cn(b.element,"visibility","hidden");const C=h.concat([w]),A=Zq(C);c([]),qI(b,C);const _=ee(b.element),R=ZI(_,r.builtGroups.get(),B=>ee(B.element),w);R.extra.length===0?(vo.remove(b,w),c([])):(qI(b,R.within),c(R.extra)),es(b.element,"visibility"),ll(b.element),A.each(Jn.focus)},KI=G([yi("splitToolbarBehaviours",[Pr]),Xr("builtGroups",()=>qn([]))]),qq=G([_h(["overflowToggledClass"]),Pm("getOverflowBounds"),Rt("lazySink"),Xr("overflowGroups",()=>qn([])),os("onOpened"),os("onClosed")].concat(KI())),Gq=G([Ca({factory:dd,schema:A1(),name:"primary"}),fu({schema:A1(),name:"overflow"}),fu({name:"overflow-button"}),fu({name:"overflow-group"})]),D_=G((t,r)=>{rt(t,Math.floor(r))}),YI=G([_h(["toggledClass"]),Rt("lazySink"),Wu("fetch"),Pm("getBounds"),ec("fireDismissalEventInstead",[tt("event",Vm())]),Mh(),os("onToggled")]),XI=G([fu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Kt([Ro.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),fu({factory:dd,schema:A1(),name:"toolbar",overrides:t=>({toolbarBehaviours:Kt([Fn.config({mode:"cyclic",onEscape:r=>(js(r,t,"button").each(Jn.focus),O.none())})])})})]),Fv=or(),Kq=(t,r)=>{Fv.set(!0),M_(t,r),Fv.clear()},M_=(t,r)=>{const c=Pr.getCoupled(t,"toolbarSandbox");ss.isOpen(c)?ss.close(c):ss.open(c,r.toolbar())},aS=(t,r,c,h)=>{const b=c.getBounds.map(C=>C()),w=c.lazySink(t).getOrDie();xa.positionWithinBounds(w,r,{anchor:{type:"hotspot",hotspot:t,layouts:h,overrides:{maxWidthFunction:D_()}}},b)},P_=(t,r,c,h,b)=>{dd.setGroups(r,b),aS(t,r,c,h),Ro.on(t)},JI=(t,r,c)=>{const h=qm(),b=(C,A)=>{const _=Fv.get().getOr(!1);c.fetch().get(R=>{P_(t,A,c,r.layouts,R),h.link(t.element),_||Fn.focusIn(A)})},w=()=>{Ro.off(t),Fv.get().getOr(!1)||Jn.focus(t),h.unlink(t.element)};return{dom:{tag:"div",attributes:{id:h.id}},behaviours:Kt([Fn.config({mode:"special",onEscape:C=>(ss.close(C),O.some(!0))}),ss.config({onOpen:b,onClose:w,isPartOf:(C,A,_)=>Oh(A,_)||Oh(t,_),getAttachPoint:()=>c.lazySink(t).getOrDie()}),Dl.config({channels:ie(ie({},dE(ie({isExtraPart:ne},c.fireDismissalEventInstead.map(C=>({fireEventInstead:{event:C.event}})).getOr({})))),fE({doReposition:()=>{ss.getState(Pr.getCoupled(t,"toolbarSandbox")).each(C=>{aS(t,C,c,r.layouts)})}}))})])}},tm=Sa({name:"FloatingToolbarButton",factory:(t,r,c,h)=>Ot(ie({},Di.sketch(Ot(ie({},h.button()),{action:b=>{M_(b,h)},buttonBehaviours:du.augment({dump:h.button().buttonBehaviours},[Pr.config({others:{toolbarSandbox:b=>JI(b,c,t)}})])}))),{apis:{setGroups:(b,w)=>{ss.getState(Pr.getCoupled(b,"toolbarSandbox")).each(C=>{P_(b,C,t,c.layouts,w)})},reposition:b=>{ss.getState(Pr.getCoupled(b,"toolbarSandbox")).each(w=>{aS(b,w,t,c.layouts)})},toggle:b=>{M_(b,h)},toggleWithoutFocusing:b=>{Kq(b,h)},getToolbar:b=>ss.getState(Pr.getCoupled(b,"toolbarSandbox")),isOpen:b=>ss.isOpen(Pr.getCoupled(b,"toolbarSandbox"))}}),configFields:YI(),partFields:XI(),apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggleWithoutFocusing(r)},getToolbar:(t,r)=>t.getToolbar(r),isOpen:(t,r)=>t.isOpen(r)}}),Yq=G([Rt("items"),_h(["itemSelector"]),yi("tgroupBehaviours",[Fn])]),QI=G([bb({name:"items",unit:"item"})]),Xq=(t,r,c,h)=>({uid:t.uid,dom:t.dom,components:r,behaviours:_i(t.tgroupBehaviours,[Fn.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),lS=Sa({name:"ToolbarGroup",configFields:Yq(),partFields:QI(),factory:Xq}),eL=t=>ue(t,r=>Pc(r)),tL=(t,r,c)=>{GI(t,c,h=>{c.overflowGroups.set(h),r.getOpt(t).each(b=>{tm.setGroups(b,eL(h))})})},Jq=(t,r,c,h)=>{const b=Es(tm.sketch({fetch:()=>ua.nu(w=>{w(eL(t.overflowGroups.get()))}),layouts:{onLtr:()=>[ca,la],onRtl:()=>[la,ca],onBottomLtr:()=>[wa,Ja],onBottomRtl:()=>[Ja,wa]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:h["overflow-button"](),toolbar:h.overflow()},onToggled:(w,C)=>t[C?"onOpened":"onClosed"](w)}));return{uid:t.uid,dom:t.dom,components:r,behaviours:_i(t.splitToolbarBehaviours,[Pr.config({others:{overflowGroup:()=>lS.sketch(Ot(ie({},h["overflow-group"]()),{items:[b.asSpec()]}))}})]),apis:{setGroups:(w,C)=>{t.builtGroups.set(ue(C,w.getSystem().build)),tL(w,b,t)},refresh:w=>tL(w,b,t),toggle:w=>{b.getOpt(w).each(C=>{tm.toggle(C)})},toggleWithoutFocusing:w=>{b.getOpt(w).each(tm.toggleWithoutFocusing)},isOpen:w=>b.getOpt(w).map(tm.isOpen).getOr(!1),reposition:w=>{b.getOpt(w).each(C=>{tm.reposition(C)})},getOverflow:w=>b.getOpt(w).bind(tm.getToolbar)},domModification:{attributes:{role:"group"}}}},nL=Sa({name:"SplitFloatingToolbar",configFields:qq(),partFields:Gq(),factory:Jq,apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)},refresh:(t,r)=>{t.refresh(r)},reposition:(t,r)=>{t.reposition(r)},toggle:(t,r)=>{t.toggle(r)},toggleWithoutFocusing:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r),getOverflow:(t,r)=>t.getOverflow(r)}}),Qq=G([_h(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),os("onOpened"),os("onClosed")].concat(KI())),eG=G([Ca({factory:dd,schema:A1(),name:"primary"}),Ca({factory:dd,schema:A1(),name:"overflow",overrides:t=>({toolbarBehaviours:Kt([Il.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:r=>{js(r,t,"overflow-button").each(c=>{Ro.off(c),Jn.focus(c)}),t.onClosed(r)},onGrown:r=>{Fn.focusIn(r),t.onOpened(r)},onStartGrow:r=>{js(r,t,"overflow-button").each(Ro.on)}}),Fn.config({mode:"acyclic",onEscape:r=>(js(r,t,"overflow-button").each(Jn.focus),O.some(!0))})])})}),fu({name:"overflow-button",overrides:t=>({buttonBehaviours:Kt([Ro.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),fu({name:"overflow-group"})]),tG=(t,r)=>js(t,r,"overflow").map(Il.hasGrown).getOr(!1),oL=(t,r)=>{js(t,r,"overflow-button").bind(()=>js(t,r,"overflow")).each(c=>{cS(t,r),Il.toggleGrow(c)})},cS=(t,r)=>{js(t,r,"overflow").each(c=>{GI(t,r,h=>{const b=ue(h,w=>Pc(w));dd.setGroups(c,b)}),js(t,r,"overflow-button").each(h=>{Il.hasGrown(c)&&Ro.on(h)}),Il.refresh(c)})},nG=(t,r,c,h)=>{const b="alloy.toolbar.toggle",w=(C,A)=>{const _=ue(A,C.getSystem().build);t.builtGroups.set(_)};return{uid:t.uid,dom:t.dom,components:r,behaviours:_i(t.splitToolbarBehaviours,[Pr.config({others:{overflowGroup:C=>lS.sketch(Ot(ie({},h["overflow-group"]()),{items:[Di.sketch(Ot(ie({},h["overflow-button"]()),{action:A=>{ns(C,b)}}))]}))}}),Eo("toolbar-toggle-events",[Dt(b,C=>{oL(C,t)})])]),apis:{setGroups:(C,A)=>{w(C,A),cS(C,t)},refresh:C=>cS(C,t),toggle:C=>oL(C,t),isOpen:C=>tG(C,t)},domModification:{attributes:{role:"group"}}}},R_=Sa({name:"SplitSlidingToolbar",configFields:Qq(),partFields:eG(),factory:nG,apis:{setGroups:(t,r,c)=>{t.setGroups(r,c)},refresh:(t,r)=>{t.refresh(r)},toggle:(t,r)=>{t.toggle(r)},isOpen:(t,r)=>t.isOpen(r)}}),uS=t=>{const r=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:ie({tag:"div",classes:["tox-toolbar__group"]},r),components:[lS.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:Kt([ar.config({}),Jn.config({})])}},dS=t=>lS.sketch(uS(t)),Iv=(t,r)=>{const c=tr(h=>{const b=ue(t.initGroups,dS);dd.setGroups(h,b)});return Kt([ei.toolbarButton(t.providers.isDisabled),ri(),Fn.config({mode:r,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Eo("toolbar-events",[c])])},sL=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":uS({title:O.none(),items:[]}),"overflow-button":tZ({name:"more",icon:O.some("more-drawer"),enabled:!0,tooltip:O.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:O.none(),borderless:!1},O.none(),t.providers)},splitToolbarBehaviours:Iv(t,r)}},rL=t=>{const r=sL(t),c=4,h=nL.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return nL.sketch(Ot(ie({},r),{lazySink:t.getSink,getOverflowBounds:()=>{const b=t.moreDrawerData.lazyHeader().element,w=ul(b),C=na(b),A=ul(C),_=Math.max(C.dom.scrollHeight,A.height);return Kr(w.x+c,A.y,w.width-c*2,_)},parts:Ot(ie({},r.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[h],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:b=>t.onToggled(b,!0),onClosed:b=>t.onToggled(b,!1)}))},oG=t=>{const r=R_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=R_.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),h=sL(t);return R_.sketch(Ot(ie({},h),{components:[r,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:b=>{b.getSystem().broadcastOn([em()],{type:"opened"}),t.onToggled(b,!0)},onClosed:b=>{b.getSystem().broadcastOn([em()],{type:"closed"}),t.onToggled(b,!1)}}))},fS=t=>{const r=t.cyclicKeying?"cyclic":"acyclic";return dd.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Fl.scrolling?["tox-toolbar--scrolling"]:[])},components:[dd.parts.groups({})],toolbarBehaviours:Iv(t,r)})},sG=[qd,gc,Na("tooltip"),tc("buttonType","secondary",["primary","secondary"]),Li("borderless",!1),Wu("onAction")],rG=[...sG,nh,Uu("type",["button"])],iG=[...sG,Li("active",!1),Uu("type",["togglebutton"])],hS={button:rG,togglebutton:iG},aG=[Uu("type",["group"]),Zu("buttons",[],gs("type",hS))],mS=gs("type",Ot(ie({},hS),{group:aG})),iL=Ln([Zu("buttons",[],mS),Wu("onShow"),Wu("onHide")]),aL=t=>Er("view",iL,t),N_=(t,r)=>{var c,h;const b=t.type==="togglebutton",w=t.icon.map(Je=>Yh(Je,r.icons)).map(Es),A=Je=>{const It=Zt=>{w.map(Jt=>Jt.getOpt(Je).each(Ao=>{vo.set(Ao,[Yh(Zt,r.icons)])}))},At=Zt=>{const Jt=Je.element;Zt?(Qr(Jt,"tox-button--enabled"),on(Jt,"aria-pressed",!0)):(br(Jt,"tox-button--enabled"),be(Jt,"aria-pressed"))},Ct=()=>vi(Je.element,"tox-button--enabled");if(b)return t.onAction({setIcon:It,setActive:At,isActive:Ct});if(t.type==="button")return t.onAction({setIcon:It})},_=Ot(ie({},t),{name:b?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:O.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless}),R=qO((h=t.buttonType)!==null&&h!==void 0?h:"secondary"),B=b?t.text.map(r.translate):O.some(r.translate(t.text)),H=B.map(Br),j=_.tooltip.or(B).map(Je=>({"aria-label":r.translate(Je),title:r.translate(Je)})).getOr({}),X=w.map(Je=>Je.asSpec()),oe=r1([X,H]),Se=t.icon.isSome()&&H.isSome(),et={tag:"button",classes:R.concat(...t.icon.isSome()&&!Se?["tox-button--icon"]:[]).concat(...Se?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:j},He=[],Pe=zC(_,O.some(A),He,et,oe,r);return Di.sketch(Pe)},lL=(t,r)=>N_(t,r),cL=(t,r)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ue(t.buttons,c=>lL(c,r))}),Eg=nu().deviceType,uL=Eg.isPhone(),lG=Eg.isTablet(),cG=t=>{let r=!1;const c=ue(t.buttons,h=>h.type==="group"?(r=!0,cL(h,t.providers)):lL(h,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[r?"tox-view__toolbar":"tox-view__header",...uL||lG?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:Kt([Jn.config({}),Fn.config({mode:"flow",selector:"button, .tox-button",focusInside:Nh.OnEnterOrSpaceMode})]),components:r?c:[ad.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),ad.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},uG=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),B_=(t,r,c,h)=>{const b={getPane:w=>Ci.getPart(w,t,"pane"),getOnShow:w=>t.viewConfig.onShow,getOnHide:w=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:r,apis:b}};var _1=Sa({name:"silver.View",configFields:[Rt("viewConfig")],partFields:[fc({factory:{sketch:cG},schema:[Rt("buttons"),Rt("providers")],name:"header"}),fc({factory:{sketch:uG},schema:[],name:"pane"})],factory:B_,apis:{getPane:(t,r)=>t.getPane(r),getOnShow:(t,r)=>t.getOnShow(r),getOnHide:(t,r)=>t.getOnHide(r)}});const dG=(t,r,c)=>Qo(r,(h,b)=>{const w=Us(aL(h));return t.slot(b,_1.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:w,components:[...w.buttons.length>0?[_1.parts.header({buttons:w.buttons,providers:c})]:[],_1.parts.pane({})]}))}),dL=(t,r)=>za.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:dG(c,t,r),slotBehaviours:Gb.unnamedEvents([tr(h=>za.hideAllSlots(h))])})),F_=t=>Qe(za.getSlotNames(t),r=>za.isShowing(t,r)),gS=t=>{const r=t.element;Cn(r,"display","none"),on(r,"aria-hidden","true")},I_=t=>{const r=t.element;es(r,"display"),be(r,"aria-hidden")},fG=t=>({getContainer:G(t)}),fL=(t,r,c)=>{za.getSlot(t,r).each(h=>{_1.getPane(h).each(b=>{c(h)(fG(b.element.dom))})})},hL=(t,r)=>fL(t,r,_1.getOnShow),hG=(t,r)=>fL(t,r,_1.getOnHide);var pS=Rl({factory:(t,r)=>{const w={setViews:(C,A)=>{vo.set(C,[dL(A,r.backstage.shared.providers)])},whichView:C=>qo.getCurrent(C).bind(F_),toggleView:(C,A,_,R)=>qo.getCurrent(C).exists(B=>{const H=F_(B),j=H.exists(oe=>R===oe),X=za.getSlot(B,R).isSome();return X&&(za.hideAllSlots(B),j?(gS(C),A()):(_(),I_(C),za.showSlot(B,R),hL(B,R)),H.each(oe=>hG(B,oe))),X})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:Kt([vo.config({}),qo.config({find:C=>{const A=vo.contents(C);return en(A)}})]),apis:w}},name:"silver.ViewWrapper",configFields:[Rt("backstage")],apis:{setViews:(t,r,c)=>t.setViews(r,c),toggleView:(t,r,c,h,b)=>t.toggleView(r,c,h,b),whichView:(t,r)=>t.whichView(r)}});const mL=(t,r,c)=>{let h=!1;const b={getSocket:w=>Ci.getPart(w,t,"socket"),setSidebar:(w,C,A)=>{Ci.getPart(w,t,"sidebar").each(_=>Fq(_,C,A))},toggleSidebar:(w,C)=>{Ci.getPart(w,t,"sidebar").each(A=>Iq(A,C))},whichSidebar:w=>Ci.getPart(w,t,"sidebar").bind(VI).getOrNull(),getHeader:w=>Ci.getPart(w,t,"header"),getToolbar:w=>Ci.getPart(w,t,"toolbar"),setToolbar:(w,C)=>{Ci.getPart(w,t,"toolbar").each(A=>{const _=ue(C,dS);A.getApis().setGroups(A,_)})},setToolbars:(w,C)=>{Ci.getPart(w,t,"multiple-toolbar").each(A=>{const _=ue(C,R=>ue(R,dS));KC.setItems(A,_)})},refreshToolbar:w=>{Ci.getPart(w,t,"toolbar").each(A=>A.getApis().refresh(A))},toggleToolbarDrawer:w=>{Ci.getPart(w,t,"toolbar").each(C=>{us(C.getApis().toggle,A=>A(C))})},toggleToolbarDrawerWithoutFocusing:w=>{Ci.getPart(w,t,"toolbar").each(C=>{us(C.getApis().toggleWithoutFocusing,A=>A(C))})},isToolbarDrawerToggled:w=>Ci.getPart(w,t,"toolbar").bind(C=>O.from(C.getApis().isOpen).map(A=>A(C))).getOr(!1),getThrobber:w=>Ci.getPart(w,t,"throbber"),focusToolbar:w=>{Ci.getPart(w,t,"toolbar").orThunk(()=>Ci.getPart(w,t,"multiple-toolbar")).each(A=>{Fn.focusIn(A)})},setMenubar:(w,C)=>{Ci.getPart(w,t,"menubar").each(A=>{S_.setMenus(A,C)})},focusMenubar:w=>{Ci.getPart(w,t,"menubar").each(C=>{S_.focus(C)})},setViews:(w,C)=>{Ci.getPart(w,t,"viewWrapper").each(A=>{pS.setViews(A,C)})},toggleView:(w,C)=>Ci.getPart(w,t,"viewWrapper").exists(A=>pS.toggleView(A,()=>b.showMainView(w),()=>b.hideMainView(w),C)),whichView:w=>Ci.getPart(w,t,"viewWrapper").bind(pS.whichView).getOrNull(),hideMainView:w=>{h=b.isToolbarDrawerToggled(w),h&&b.toggleToolbarDrawer(w),Ci.getPart(w,t,"editorContainer").each(C=>{const A=C.element;Cn(A,"display","none"),on(A,"aria-hidden","true")})},showMainView:w=>{h&&b.toggleToolbarDrawer(w),Ci.getPart(w,t,"editorContainer").each(C=>{const A=C.element;es(A,"display"),be(A,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:r,apis:b,behaviours:t.behaviours}},mG=nf.optional({factory:S_,name:"menubar",schema:[Rt("backstage")]}),gG=t=>t.type===Fl.sliding?oG:t.type===Fl.floating?rL:fS,L_=nf.optional({factory:{sketch:t=>KC.sketch({uid:t.uid,dom:t.dom,listBehaviours:Kt([Fn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>fS({type:t.type,uid:bn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),O.some(!0))}),setupItem:(r,c,h,b)=>{dd.setGroups(c,h)},shell:!0})},name:"multiple-toolbar",schema:[Rt("dom"),Rt("onEscape")]}),pG=nf.optional({factory:{sketch:t=>{const r=gG(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),O.some(!0)),onToggled:(h,b)=>t.onToolbarToggled(b),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return r(c)}},name:"toolbar",schema:[Rt("dom"),Rt("onEscape"),Rt("getSink")]}),bG=nf.optional({factory:{sketch:II},name:"header",schema:[Rt("dom")]}),gL=nf.optional({factory:{sketch:Oq},name:"promotion",schema:[Rt("dom")]}),vG=nf.optional({name:"socket",schema:[Rt("dom")]}),pL=nf.optional({factory:{sketch:Lq},name:"sidebar",schema:[Rt("dom")]}),yG=nf.optional({factory:{sketch:zq},name:"throbber",schema:[Rt("dom")]}),bL=nf.optional({factory:pS,name:"viewWrapper",schema:[Rt("backstage")]}),wG=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),xG=nf.optional({factory:{sketch:wG},name:"editorContainer",schema:[]});var Zs=Sa({name:"OuterContainer",factory:mL,configFields:[Rt("dom"),Rt("behaviours")],partFields:[bG,mG,pG,L_,vG,pL,gL,yG,bL,xG],apis:{getSocket:(t,r)=>t.getSocket(r),setSidebar:(t,r,c,h)=>{t.setSidebar(r,c,h)},toggleSidebar:(t,r,c)=>{t.toggleSidebar(r,c)},whichSidebar:(t,r)=>t.whichSidebar(r),getHeader:(t,r)=>t.getHeader(r),getToolbar:(t,r)=>t.getToolbar(r),setToolbar:(t,r,c)=>{t.setToolbar(r,c)},setToolbars:(t,r,c)=>{t.setToolbars(r,c)},refreshToolbar:(t,r)=>t.refreshToolbar(r),toggleToolbarDrawer:(t,r)=>{t.toggleToolbarDrawer(r)},toggleToolbarDrawerWithoutFocusing:(t,r)=>{t.toggleToolbarDrawerWithoutFocusing(r)},isToolbarDrawerToggled:(t,r)=>t.isToolbarDrawerToggled(r),getThrobber:(t,r)=>t.getThrobber(r),setMenubar:(t,r,c)=>{t.setMenubar(r,c)},focusMenubar:(t,r)=>{t.focusMenubar(r)},focusToolbar:(t,r)=>{t.focusToolbar(r)},setViews:(t,r,c)=>{t.setViews(r,c)},toggleView:(t,r,c)=>t.toggleView(r,c),whichView:(t,r)=>t.whichView(r)}});const vL="file edit view insert format tools table help",yL={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},CG=(t,r,c)=>{const h=AA(c).split(/[ ,]/);return{text:t.title,getItems:()=>de(t.items,b=>{const w=b.toLowerCase();return w.trim().length===0?[]:yt(h,C=>C===w)?[]:w==="separator"||w==="|"?[{type:"separator"}]:r.menuItems[w]?[r.menuItems[w]]:[]})}},$_=t=>t.split(" "),bS=(t,r)=>{const c=ie(ie({},yL),r.menus),h=Yn(r.menus).length>0,b=r.menubar===void 0||r.menubar===!0?$_(vL):$_(r.menubar===!1?"":r.menubar),w=un(b,A=>{const _=So(yL,A);return h?_||$t(r.menus,A).exists(R=>So(R,"items")):_}),C=ue(w,A=>{const _=c[A];return CG({title:_.title,items:$_(_.items)},r,t)});return un(C,A=>{const _=R=>v(R)||R.type!=="separator";return A.getItems().length>0&&yt(A.getItems(),_)})},H_=t=>{const r=()=>{t._skinLoaded=!0,Tz(t)};return()=>{t.initialized?r():t.on("init",r)}},SG=(t,r)=>()=>xT(t,{message:r}),wL=(t,r,c)=>(t.on("remove",()=>c.unload(r)),c.load(r)),V_=(t,r,c,h)=>(t.on("remove",()=>h.unloadRawCss(r)),h.loadRawCss(r,c)),kG=(t,r)=>jo(this,null,function*(){const h="ui/"+Px(t).getOr("default")+"/skin.css",b=tinymce.Resource.get(h);if(v(b))return Promise.resolve(V_(t,h,b,t.ui.styleSheetLoader));{const w=r+"/skin.min.css";return wL(t,w,t.ui.styleSheetLoader)}}),EG=(t,r)=>jo(this,null,function*(){if(Zn(Tt.fromDom(t.getElement()))){const b="ui/"+Px(t).getOr("default")+"/skin.shadowdom.css",w=tinymce.Resource.get(b);if(v(w))return V_(t,b,w,dg.DOM.styleSheetLoader),Promise.resolve();{const C=r+"/skin.shadowdom.min.css";return wL(t,C,dg.DOM.styleSheetLoader)}}}),AG=(t,r)=>jo(this,null,function*(){Px(r).fold(()=>{const h=Mx(r);h&&r.contentCSS.push(h+(t?"/content.inline":"/content")+".min.css")},h=>{const b="ui/"+h+(t?"/content.inline":"/content")+".css",w=tinymce.Resource.get(b);if(v(w))V_(r,b,w,r.ui.styleSheetLoader);else{const C=Mx(r);C&&r.contentCSS.push(C+(t?"/content.inline":"/content")+".min.css")}});const c=Mx(r);if(!RA(r)&&v(c))return Promise.all([kG(r,c),EG(r,c)]).then()}),xL=(t,r)=>AG(t,r).then(H_(r),SG(r,"Skin could not be loaded")),TG=$e(xL,!1),OG=$e(xL,!0),Ag=(t,r,c)=>t.translate([r,t.translate(c)]),vS=(t,r)=>{const c=(C,A,_,R)=>{const B=t.shared.providers.translate(C.title);if(C.type==="separator")return O.some({type:"separator",text:B});if(C.type==="submenu"){const H=de(C.getStyleItems(),j=>h(j,A,R));return A===0&&H.length<=0?O.none():O.some({type:"nestedmenuitem",text:B,enabled:H.length>0,getSubmenuItems:()=>de(C.getStyleItems(),j=>h(j,A,R))})}else return O.some(ie({type:"togglemenuitem",text:B,icon:C.icon,active:C.isSelected(R),enabled:!_,onAction:r.onAction(C)},C.getStylePreview().fold(()=>({}),H=>({meta:{style:H}}))))},h=(C,A,_)=>{const R=C.type==="formatter"&&r.isInvalid(C);return A===0?R?[]:c(C,A,!1,_).toArray():c(C,A,R,_).toArray()},b=C=>{const A=r.getCurrentValue(),_=r.shouldHide?0:1;return de(C,R=>h(R,_,A))};return{validateItems:b,getFetch:(C,A)=>(_,R)=>{const B=A(),H=b(B),j=w1(H,id.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:O.none()});R(j)}}},nm=(t,r,c)=>{const h=c.dataset,b=h.type==="basic"?()=>ue(h.data,w=>e_(w,c.isSelectedFor,c.getPreviewFor)):h.getData;return{items:vS(r,c),getStyleItems:b}},D1=(t,r,c,h,b)=>{const{items:w,getStyleItems:C}=nm(t,r,c),A=R=>({getComponent:G(R),setTooltip:B=>{const H=r.shared.providers.translate(B);Pu(R.element,{"aria-label":H,title:H})}}),_=R=>{const B=H=>R.setTooltip(Ag(t,h,H.value));return t.on(b,B),Qb(yu(t,"NodeChange",H=>{const j=H.getComponent();c.updateText(j),Gn.set(H.getComponent(),!t.selection.isEditable())})(R),()=>t.off(b,B))};return PO({text:c.icon.isSome()?O.none():c.text,icon:c.icon,tooltip:O.from(c.tooltip),role:O.none(),fetch:w.getFetch(r,C),onSetup:_,getApi:A,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",r.shared)},om=t=>ue(t,r=>{let c=r,h=r;const b=r.split("=");return b.length>1&&(c=b[0],h=b[1]),{title:c,format:h}}),CL=t=>({type:"basic",data:t});var M1;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(M1||(M1={}));const _G=(t,r)=>r===M1.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),z_=(t,r,c)=>{const h=t.options.get(r);return{type:"basic",data:om(_G(h,c))}},DG="Align",SL="Alignment {0}",kL="left",U_=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],W_=t=>{const r=()=>Qe(U_,A=>t.formatter.match(A.format)),c=A=>()=>t.formatter.match(A),h=A=>O.none,b=A=>{const R=r().fold(G(kL),B=>B.title.toLowerCase());Hn(A,Xh,{icon:`align-${R}`}),Mz(t,{value:R})},w=CL(U_),C=A=>()=>Qe(U_,_=>_.format===A.format).each(_=>t.execCommand(_.command));return{tooltip:Ag(t,SL,kL),text:O.none(),icon:O.some("align-left"),isSelectedFor:c,getCurrentValue:O.none,getPreviewFor:h,onAction:C,updateText:b,dataset:w,shouldHide:!1,isInvalid:A=>!t.formatter.canApply(A.format)}},MG=(t,r)=>D1(t,r,W_(t),SL,"AlignTextUpdate"),PG=(t,r)=>{const c=nm(t,r,W_(t));t.ui.registry.addNestedMenuItem("align",{text:r.shared.providers.translate(DG),onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},yS=(t,r)=>{const c=r(),h=ue(c,b=>b.format);return O.from(t.formatter.closest(h)).bind(b=>Qe(c,w=>w.format===b)).orThunk(()=>Bn(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},RG="Blocks",EL="Block {0}",j_="Paragraph",AL=t=>{const r=w=>()=>t.formatter.match(w),c=w=>()=>{const C=t.formatter.get(w);return C?O.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):O.none()},h=w=>{const A=yS(t,()=>b.data).fold(G(j_),_=>_.title);Hn(w,vc,{text:A}),xN(t,{value:A})},b=z_(t,"block_formats",M1.SemiColon);return{tooltip:Ag(t,EL,j_),text:O.some(j_),icon:O.none(),isSelectedFor:r,getCurrentValue:O.none,getPreviewFor:c,onAction:SN(t),updateText:h,dataset:b,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},NG=(t,r)=>D1(t,r,AL(t),EL,"BlocksTextUpdate"),BG=(t,r)=>{const c=nm(t,r,AL(t));t.ui.registry.addNestedMenuItem("blocks",{text:RG,onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},TL="Fonts",Z_="Font {0}",wS="System Font",FG=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],q_=t=>{const r=t.split(/\s*,\s*/);return ue(r,c=>c.replace(/^['"]+|['"]+$/g,""))},OL=(t,r)=>r.length>0&&xe(r,c=>t.indexOf(c.toLowerCase())>-1),IG=(t,r)=>{if(t.indexOf("-apple-system")===0||r.length>0){const c=q_(t.toLowerCase());return OL(c,FG)||OL(c,r)}else return!1},_L=t=>{const r=()=>{const _=oe=>oe?q_(oe)[0]:"",R=t.queryCommandValue("FontName"),B=A.data,H=R?R.toLowerCase():"",j=aR(t);return{matchOpt:Qe(B,oe=>{const Se=oe.format;return Se.toLowerCase()===H||_(Se).toLowerCase()===_(H).toLowerCase()}).orThunk(()=>Bn(IG(H,j),{title:wS,format:H})),font:R}},c=_=>R=>R.exists(B=>B.format===_),h=()=>{const{matchOpt:_}=r();return _},b=_=>()=>O.some({tag:"div",styles:_.indexOf("dings")===-1?{"font-family":_}:{}}),w=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,_.format)})},C=_=>{const{matchOpt:R,font:B}=r(),H=R.fold(G(B),j=>j.title);Hn(_,vc,{text:H}),CN(t,{value:H})},A=z_(t,"font_family_formats",M1.SemiColon);return{tooltip:Ag(t,Z_,wS),text:O.some(wS),icon:O.none(),isSelectedFor:c,getCurrentValue:h,getPreviewFor:b,onAction:w,updateText:C,dataset:A,shouldHide:!1,isInvalid:ne}},DL=(t,r)=>D1(t,r,_L(t),Z_,"FontFamilyTextUpdate"),LG=(t,r)=>{const c=nm(t,r,_L(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:r.shared.providers.translate(TL),onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},ML={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},$G=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),h="\\.",b=A=>`(?:${A})?`,C=`[+-]?(?:${["Infinity",t+h+b(t)+b(c),h+t+b(c),t+b(c)].join("|")})`;return new RegExp(`^(${C})(.*)$`)})(),HG=(t,r)=>yt(r,c=>yt(ML[c],h=>t===h)),xS=(t,r)=>O.from($G.exec(t)).bind(h=>{const b=Number(h[1]),w=h[2];return HG(w,r)?O.some({value:b,unit:w}):O.none()}),VG=(t,r)=>xS(t,r).map(({value:c,unit:h})=>c+h),PL={tab:G(9),escape:G(27),enter:G(13),backspace:G(8),delete:G(46),left:G(37),up:G(38),right:G(39),down:G(40),space:G(32),home:G(36),end:G(35),pageUp:G(33),pageDown:G(34)},zG=(t,r,c)=>{let h=O.none();const b=Pe=>Pe.map(Je=>ln.getValue(Je)).getOr(""),w=yu(t,"NodeChange SwitchMode",Pe=>{const Je=Pe.getComponent();h=O.some(Je),c.updateInputValue(Je),Gn.set(Je,!t.selection.isEditable())}),C=Pe=>({getComponent:G(Pe)}),A=qn(Z),_=bn("custom-number-input-events"),R=(Pe,Je,It)=>{const At=b(h),Ct=c.getNewValue(At,Pe),Zt=At.length-`${Ct}`.length,Jt=h.map(hn=>hn.element.dom.selectionStart-Zt),Ao=h.map(hn=>hn.element.dom.selectionEnd-Zt);c.onAction(Ct,It),h.each(hn=>{ln.setValue(hn,Ct),Je&&(Jt.each(ro=>hn.element.dom.selectionStart=ro),Ao.each(ro=>hn.element.dom.selectionEnd=ro))})},B=(Pe,Je)=>R((It,At)=>It-At,Pe,Je),H=(Pe,Je)=>R((It,At)=>It+At,Pe,Je),j=Pe=>ma(Pe.element).fold(O.none,Je=>(lc(Je),O.some(!0))),X=Pe=>Q0(Pe.element)?(Oc(Pe.element).each(Je=>lc(Je)),O.some(!0)):O.none(),oe=(Pe,Je,It,At)=>{const Ct=qn(Z),Zt=r.shared.providers.translate(It),Jt=bn("altExecuting"),Ao=yu(t,"NodeChange SwitchMode",ro=>{Gn.set(ro.getComponent(),!t.selection.isEditable())}),hn=ro=>{Gn.isDisabled(ro)||Pe(!0)};return Di.sketch({dom:{tag:"button",attributes:{title:Zt,"aria-label":Zt},classes:At.concat(Je)},components:[MO(Je,r.shared.providers.icons)],buttonBehaviours:Kt([Gn.config({}),Eo(Jt,[Hh({onSetup:Ao,getApi:C},Ct),Kd({getApi:C},Ct),Dt(qu(),(ro,eo)=>{(eo.event.raw.keyCode===PL.space()||eo.event.raw.keyCode===PL.enter())&&(Gn.isDisabled(ro)||Pe(!1))}),Dt(Eh(),hn),Dt(Im(),hn)])]),eventOrder:{[qu()]:[Jt,"keying"],[Eh()]:[Jt,"alloy.base.behaviour"],[Im()]:[Jt,"alloy.base.behaviour"]}})},Se=Es(oe(Pe=>B(!1,Pe),"minus","Decrease font size",[])),et=Es(oe(Pe=>H(!1,Pe),"plus","Increase font size",[])),He=Es({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[hg.sketch({inputBehaviours:Kt([Gn.config({}),Eo(_,[Hh({onSetup:w,getApi:C},A),Kd({getApi:C},A)]),Eo("input-update-display-text",[Dt(vc,(Pe,Je)=>{ln.setValue(Pe,Je.event.text)}),Dt(X2(),Pe=>{c.onAction(ln.getValue(Pe))}),Dt(ip(),Pe=>{c.onAction(ln.getValue(Pe))})]),Fn.config({mode:"special",onEnter:Pe=>(R(qe,!0,!0),O.some(!0)),onEscape:j,onUp:Pe=>(H(!0,!1),O.some(!0)),onDown:Pe=>(B(!0,!1),O.some(!0)),onLeft:(Pe,Je)=>(Je.cut(),O.none()),onRight:(Pe,Je)=>(Je.cut(),O.none())})])})],behaviours:Kt([Jn.config({}),Fn.config({mode:"special",onEnter:X,onSpace:X,onEscape:j}),Eo("input-wrapper-events",[Dt(Mf(),Pe=>{je([Se,et],Je=>{const It=Tt.fromDom(Je.get(Pe).element.dom);Q0(It)&&Ik(It)})})])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[Se.asSpec(),He.asSpec(),et.asSpec()],behaviours:Kt([Jn.config({}),Fn.config({mode:"flow",focusInside:Nh.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:Pe=>Q0(Pe.element)?O.none():(lc(Pe.element),O.some(!0))})])}},UG="Font sizes",G_="Font size {0}",RL="12pt",WG={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},jG={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZG=(t,r)=>{const c=Math.pow(10,r);return Math.round(t*c)/c},qG=(t,r)=>/[0-9.]+px$/.test(t)?ZG(parseInt(t,10)*72/96,r||0)+"pt":$t(jG,t).getOr(t),GG=t=>$t(WG,t).getOr(""),NL=t=>{const r=()=>{let _=O.none();const R=A.data,B=t.queryCommandValue("FontSize");if(B)for(let H=3;_.isNone()&&H>=0;H--){const j=qG(B,H),X=GG(j);_=Qe(R,oe=>oe.format===B||oe.format===j||oe.format===X)}return{matchOpt:_,size:B}},c=_=>R=>R.exists(B=>B.format===_),h=()=>{const{matchOpt:_}=r();return _},b=G(O.none),w=_=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,_.format)})},C=_=>{const{matchOpt:R,size:B}=r(),H=R.fold(G(B),j=>j.title);Hn(_,vc,{text:H}),Pz(t,{value:H})},A=z_(t,"font_size_formats",M1.Space);return{tooltip:Ag(t,G_,RL),text:O.some(RL),icon:O.none(),isSelectedFor:c,getPreviewFor:b,getCurrentValue:h,onAction:w,updateText:C,dataset:A,shouldHide:!1,isInvalid:ne}},BL=(t,r)=>D1(t,r,NL(t),G_,"FontSizeTextUpdate"),KG=t=>{var r;const c={step:1};return(r={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&r!==void 0?r:c},YG=16,FL=t=>t>=0,XG=t=>{const r=()=>t.queryCommandValue("FontSize");return{updateInputValue:h=>Hn(h,vc,{text:r()}),onAction:(h,b)=>t.execCommand("FontSize",!1,h,{skip_focus:!b}),getNewValue:(h,b)=>{xS(h,["unsupportedLength","empty"]);const w=r(),C=xS(h,["unsupportedLength","empty"]).or(xS(w,["unsupportedLength","empty"])),A=C.map(j=>j.value).getOr(YG),_=nR(t),R=C.map(j=>j.unit).filter(j=>j!=="").getOr(_),B=b(A,KG(R).step),H=`${FL(B)?B:A}${R}`;return H!==w&&Rz(t,{value:H}),H}}},IL=(t,r)=>zG(t,r,XG(t)),LL=(t,r)=>{const c=nm(t,r,NL(t));t.ui.registry.addNestedMenuItem("fontsize",{text:UG,onSetup:Va(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},JG="Formats",$L="Format {0}",HL=(t,r)=>{const c="Paragraph",h=C=>()=>t.formatter.match(C),b=C=>()=>{const A=t.formatter.get(C);return A!==void 0?O.some({tag:A.length>0&&(A[0].inline||A[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):O.none()},w=C=>{const A=H=>jC(H)?de(H.items,A):oI(H)?[{title:H.title,format:H.format}]:[],_=de(rI(t),A),B=yS(t,G(_)).fold(G(c),H=>H.title);Hn(C,vc,{text:B}),Dz(t,{value:B})};return{tooltip:Ag(t,$L,c),text:O.some(c),icon:O.none(),isSelectedFor:h,getCurrentValue:O.none,getPreviewFor:b,onAction:SN(t),updateText:w,shouldHide:XP(t),isInvalid:C=>!t.formatter.canApply(C.format),dataset:r}},P1=(t,r)=>{const c=ie({type:"advanced"},r.styles);return D1(t,r,HL(t,c),$L,"StylesTextUpdate")},QG=(t,r)=>{const c=ie({type:"advanced"},r.styles),h=nm(t,r,HL(t,c));t.ui.registry.addNestedMenuItem("styles",{text:JG,onSetup:Va(t),getSubmenuItems:()=>h.items.validateItems(h.getStyleItems())})},eK=G([Rt("toggleClass"),Rt("fetch"),Qu("onExecute"),tt("getHotspot",O.some),tt("getAnchorOverrides",G({})),Mh(),Qu("onItemExecute"),Ds("lazySink"),Rt("dom"),os("onOpen"),yi("splitDropdownBehaviours",[Pr,Fn,Jn]),tt("matchWidth",!1),tt("useMinWidth",!1),tt("eventOrder",{}),Ds("role")].concat(WT())),tK=Ca({factory:Di,schema:[Rt("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Kt([Jn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(Rf)},buttonBehaviours:Kt([Ro.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),nK=Ca({factory:Di,schema:[Rt("dom")],name:"button",defaults:()=>({buttonBehaviours:Kt([Jn.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:r=>{r.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,r)})}})}),oK=G([tK,nK,fc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[Rt("text")],name:"aria-descriptor"}),fu({schema:[pw()],name:"menu",defaults:t=>({onExecute:(r,c)=>{r.getSystem().getByUid(t.uid).each(h=>{t.onItemExecute(h,r,c)})}})}),zN()]),sK=(t,r,c,h)=>{const b=B=>{qo.getCurrent(B).each(H=>{ps.highlightFirst(H),Fn.focusIn(H)})},w=B=>{zT(t,qe,B,h,b,Ha.HighlightMenuAndItem).get(Z)},C=B=>(w(B),O.some(!0)),A=B=>{const H=Gf(B,t,"button");return Rf(H),O.some(!0)},_=ie(ie({},ir([tr((B,H)=>{js(B,t,"aria-descriptor").each(X=>{const oe=bn("aria");on(X.element,"id",oe),on(B.element,"aria-describedby",oe)})})])),od(O.some(w))),R={repositionMenus:B=>{Ro.isOn(B)&&ZN(B)}};return{uid:t.uid,dom:t.dom,components:r,apis:R,eventOrder:Ot(ie({},t.eventOrder),{[sc()]:["disabling","toggling","alloy.base.behaviour"]}),events:_,behaviours:_i(t.splitDropdownBehaviours,[Pr.config({others:{sandbox:B=>{const H=Gf(B,t,"arrow");return UT(t,B,{onOpen:()=>{Ro.on(H),Ro.on(B)},onClose:()=>{Ro.off(H),Ro.off(B)}})}}}),Fn.config({mode:"special",onSpace:A,onEnter:A,onDown:C}),Jn.config({}),Ro.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},CS=Sa({name:"SplitDropdown",configFields:eK(),partFields:oK(),factory:sK,apis:{repositionMenus:(t,r)=>t.repositionMenus(r)}}),VL=t=>({isEnabled:()=>!Gn.isDisabled(t),setEnabled:r=>Gn.set(t,!r),setText:r=>Hn(t,vc,{text:r}),setIcon:r=>Hn(t,Xh,{icon:r})}),K_=t=>({setActive:r=>{Ro.set(t,r)},isActive:()=>Ro.isOn(t),isEnabled:()=>!Gn.isDisabled(t),setEnabled:r=>Gn.set(t,!r),setText:r=>Hn(t,vc,{text:r}),setIcon:r=>Hn(t,Xh,{icon:r})}),zL=(t,r)=>t.map(c=>({"aria-label":r.translate(c),title:r.translate(c)})).getOr({}),UL=bn("focus-button"),SS=(t,r,c,h,b)=>{const w=r.map(A=>Es(rF(A,"tox-tbtn",b))),C=t.map(A=>Es(Yh(A,b.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(r.isSome()?["tox-tbtn--select"]:[]),attributes:zL(c,b)},components:r1([C.map(A=>A.asSpec()),w.map(A=>A.asSpec())]),eventOrder:{[bi()]:["focusing","alloy.base.behaviour",xg],[Ku()]:[xg,"toolbar-group-button-events"]},buttonBehaviours:Kt([ei.toolbarButton(b.isDisabled),ri(),Eo(xg,[tr((A,_)=>_O(A)),Dt(vc,(A,_)=>{w.bind(R=>R.getOpt(A)).each(R=>{vo.set(R,[Br(b.translate(_.event.text))])})}),Dt(Xh,(A,_)=>{C.bind(R=>R.getOpt(A)).each(R=>{vo.set(R,[Yh(_.event.icon,b.icons)])})}),Dt(bi(),(A,_)=>{_.event.prevent(),ns(A,UL)})])].concat(h.getOr([])))}},WL=(t,r,c,h)=>{const b=r.shared,w=qn(Z),C={toolbarButtonBehaviours:[],getApi:VL,onSetup:t.onSetup},A=[Eo("toolbar-group-button-events",[Hh(C,w),Kd(C,w)])];return tm.sketch({lazySink:b.getSink,fetch:()=>ua.nu(_=>{_(ue(c(t.items),dS))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:SS(t.icon,t.text,t.tooltip,O.some(A),b.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:h}}}})},jL=(t,r,c)=>{var h;const b=qn(Z),w=SS(t.icon,t.text,t.tooltip,O.none(),c);return Di.sketch({dom:w.dom,components:w.components,eventOrder:NC,buttonBehaviours:Ot(ie({},Kt([Eo("toolbar-button-events",[yj({onAction:t.onAction,getApi:r.getApi}),Hh(r,b),Kd(r,b)]),ei.toolbarButton(()=>!t.enabled||c.isDisabled()),ri()].concat(r.toolbarButtonBehaviours))),{[xg]:(h=w.buttonBehaviours)===null||h===void 0?void 0:h[xg]})})},rK=(t,r)=>ZL(t,r,[]),ZL=(t,r,c)=>jL(t,{toolbarButtonBehaviours:c.length>0?[Eo("toolbarButtonWith",c)]:[],getApi:VL,onSetup:t.onSetup},r),iK=(t,r)=>qL(t,r,[]),qL=(t,r,c)=>jL(t,{toolbarButtonBehaviours:[vo.config({}),Ro.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[Eo("toolbarToggleButtonWith",c)]:[]),getApi:K_,onSetup:t.onSetup},r),aK=(t,r,c)=>h=>ua.nu(b=>r.fetch(b)).map(b=>O.from(cC($s(BT(bn("menu-value"),b,w=>{r.onItemAction(t(h),w)},r.columns,r.presets,id.CLOSE_ON_EXECUTE,r.select.getOr(ne),c),{movement:rC(r.columns,r.presets),menuBehaviours:Gb.unnamedEvents(r.columns!=="auto"?[]:[tr((w,C)=>{lT(w,4,bR(r.presets)).each(({numRows:A,numColumns:_})=>{Fn.setGridSize(w,A,_)})})])})))),GL=(t,r)=>{const c=w=>({isEnabled:()=>!Gn.isDisabled(w),setEnabled:C=>Gn.set(w,!C),setIconFill:(C,A)=>{Wr(w.element,`svg path[class="${C}"], rect[class="${C}"]`).each(_=>{on(_,"fill",A)})},setActive:C=>{on(w.element,"aria-pressed",C),Wr(w.element,"span").each(A=>{w.getSystem().getByDom(A).each(_=>Ro.set(_,C))})},isActive:()=>Wr(w.element,"span").exists(C=>w.getSystem().getByDom(C).exists(Ro.isOn)),setText:C=>Wr(w.element,"span").each(A=>w.getSystem().getByDom(A).each(_=>Hn(_,vc,{text:C}))),setIcon:C=>Wr(w.element,"span").each(A=>w.getSystem().getByDom(A).each(_=>Hn(_,Xh,{icon:C}))),setTooltip:C=>{const A=r.providers.translate(C);Pu(w.element,{"aria-label":A,title:A})}}),h=qn(Z),b={getApi:c,onSetup:t.onSetup};return CS.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:ie({"aria-pressed":!1},zL(t.tooltip,r.providers))},onExecute:w=>{const C=c(w);C.isEnabled()&&t.onAction(C)},onItemExecute:(w,C,A)=>{},splitDropdownBehaviours:Kt([ei.splitButton(r.providers.isDisabled),ri(),Eo("split-dropdown-events",[tr((w,C)=>_O(w)),Dt(UL,Jn.focus),Hh(b,h),Kd(b,h)]),lv.config({})]),eventOrder:{[Ku()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:r.getSink,fetch:aK(c,t,r.providers),parts:{menu:Jp(!1,t.columns,t.presets)},components:[CS.parts.button(SS(t.icon,t.text,O.none(),O.some([Ro.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),r.providers)),CS.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:wA("chevron-down",r.providers.icons)},buttonBehaviours:Kt([ei.splitButton(r.providers.isDisabled),ri(),Cx()])}),CS.parts["aria-descriptor"]({text:r.providers.translate("To open the popup, press Shift+Enter")})]})},lK=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Lv=(t,r)=>(c,h,b)=>{const w=t(c).mapError(C=>dl(C)).getOrDie();return r(w,h,b)},cK={button:Lv(rT,(t,r)=>rK(t,r.shared.providers)),togglebutton:Lv(IR,(t,r)=>iK(t,r.shared.providers)),menubutton:Lv(C_,(t,r)=>wv(t,"tox-tbtn",r,O.none(),!1)),splitbutton:Lv(Tq,(t,r)=>GL(t,r.shared)),grouptoolbarbutton:Lv(Eq,(t,r,c)=>{const h=c.ui.registry.getAll().buttons,b=C=>AS(c,{buttons:h,toolbar:C,allowToolbarGroups:!1},r,O.none()),w={[_w]:r.shared.header.isPositionedAtTop()?Vf.TopToBottom:Vf.BottomToTop};switch(qp(c)){case Fl.floating:return WL(t,r,b,w);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},uK=(t,r,c)=>$t(cK,t.type).fold(()=>O.none(),h=>O.some(h(t,r,c))),$v={styles:P1,fontsize:BL,fontsizeinput:IL,fontfamily:DL,blocks:NG,align:MG},dK=t=>{const r=ue(lK,c=>{const h=un(c.items,b=>So(t,b)||So($v,b));return{name:c.name,items:h}});return un(r,c=>c.items.length>0)},kS=t=>{const r=t.split("|");return ue(r,c=>({items:c.trim().split(" ")}))},ES=t=>ae(t,r=>So(r,"name")&&So(r,"items")),KL=t=>{const r=t.toolbar,c=t.buttons;return r===!1?[]:r===void 0||r===!0?dK(c):v(r)?kS(r):ES(r)?r:[]},fK=(t,r,c,h,b,w)=>$t(r,c.toLowerCase()).orThunk(()=>w.bind(C=>ao(C,A=>$t(r,A+c.toLowerCase())))).fold(()=>$t($v,c.toLowerCase()).map(C=>C(t,b)),C=>C.type==="grouptoolbarbutton"&&!h?O.none():uK(C,b,t)),AS=(t,r,c,h)=>{const b=KL(r),w=ue(b,C=>{const A=de(C.items,_=>_.trim().length===0?[]:fK(t,r.buttons,_,r.allowToolbarGroups,c,h).toArray());return{title:O.from(t.translate(C.name)),items:A}});return un(w,C=>C.items.length>0)},YL=(t,r,c,h)=>{const b=r.mainUi.outerContainer,w=c.toolbar,C=c.buttons;if(ae(w,v)){const A=w.map(_=>{const R={toolbar:_,buttons:C,allowToolbarGroups:c.allowToolbarGroups};return AS(t,R,h,O.none())});Zs.setToolbars(b,A)}else Zs.setToolbar(b,AS(t,c,h,O.none()))},XL=nu(),hK=XL.os.isiOS()&&XL.os.version.major<=12,TS=(t,r)=>{const{uiMotherships:c}=r,h=t.dom;let b=t.getWin();const w=t.getDoc().documentElement,C=qn(dr(b.innerWidth,b.innerHeight)),A=qn(dr(w.offsetWidth,w.offsetHeight)),_=()=>{const j=C.get();(j.left!==b.innerWidth||j.top!==b.innerHeight)&&(C.set(dr(b.innerWidth,b.innerHeight)),Xx(t))},R=()=>{const j=t.getDoc().documentElement,X=A.get();(X.left!==j.offsetWidth||X.top!==j.offsetHeight)&&(A.set(dr(j.offsetWidth,j.offsetHeight)),Xx(t))},B=j=>{Oz(t,j)};h.bind(b,"resize",_),h.bind(b,"scroll",B);const H=Ew(Tt.fromDom(t.getBody()),"load",R);t.on("hide",()=>{je(c,j=>{Cn(j.element,"display","none")})}),t.on("show",()=>{je(c,j=>{es(j.element,"display")})}),t.on("NodeChange",R),t.on("remove",()=>{H.unbind(),h.unbind(b,"resize",_),h.unbind(b,"scroll",B),b=null})},JL=(t,r,c)=>{Wd(t)&&jf(c.mainUi.mothership.element,c.popupUi.mothership),Ml(r,c.dialogUi.mothership)};var QL=Object.freeze({__proto__:null,render:(t,r,c,h,b)=>{const{mainUi:w,uiMotherships:C}=r,A=qn(0),_=w.outerContainer;TG(t);const R=Tt.fromDom(b.targetNode),B=Ut(St(R));jf(R,w.mothership),JL(t,B,r),t.on("SkinLoaded",()=>{Zs.setSidebar(_,c.sidebar,_x(t)),YL(t,r,c,h),A.set(t.getWin().innerWidth),Zs.setMenubar(_,bS(t,c)),Zs.setViews(_,c.views),TS(t,r)});const H=Zs.getSocket(_).getOrDie("Could not find expected socket element");if(hK){oi(H.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const Se=lj(()=>{t.dispatch("ScrollContent")},20),et=Qa(H.element,"scroll",Se.throttle);t.on("remove",et.unbind)}eN(t,r),t.addCommand("ToggleSidebar",(Se,et)=>{Zs.toggleSidebar(_,et),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var Se;return(Se=Zs.whichSidebar(_))!==null&&Se!==void 0?Se:""}),t.addCommand("ToggleView",(Se,et)=>{if(Zs.toggleView(_,et)){const He=_.element;w.mothership.broadcastOn([$d()],{target:He}),je(C,Pe=>{Pe.broadcastOn([$d()],{target:He})}),M(Zs.whichView(_))&&(t.focus(),t.nodeChanged(),Zs.refreshToolbar(_))}}),t.addQueryValueHandler("ToggleView",()=>{var Se;return(Se=Zs.whichView(_))!==null&&Se!==void 0?Se:""});const j=qp(t),X=()=>{Zs.refreshToolbar(r.mainUi.outerContainer)};(j===Fl.sliding||j===Fl.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const Se=t.getWin().innerWidth;Se!==A.get()&&(X(),A.set(Se))});const oe={setEnabled:Se=>{qx(r,!Se)},isEnabled:()=>!Gn.isDisabled(_)};return{iframeContainer:H.element.dom,editorContainer:_.element.dom,api:oe}}});const OS=t=>/^[0-9\.]+(|px)$/i.test(""+t)?O.some(parseInt(""+t,10)):O.none(),Y_=t=>q(t)?t+"px":t,Hv=(t,r,c)=>{const h=r.filter(w=>t<w),b=c.filter(w=>t>w);return h.or(b).getOr(t)},gK=t=>{const r=Sx(t),c=Zp(t),h=EA(t);return OS(r).map(b=>Hv(b,c,h))},pK=t=>gK(t).getOr(Sx(t)),e5=t=>{const r=Lb(t),c=kA(t),h=kx(t);return OS(r).map(b=>Hv(b,c,h))},bK=t=>e5(t).getOr(Lb(t)),{ToolbarLocation:X_,ToolbarMode:R1}=BV,vK=40,yK=(t,r,c,h,b)=>{const{mainUi:w,uiMotherships:C}=c,A=dg.DOM,_=Yp(t),R=Vb(t),B=kx(t).or(e5(t)),H=h.shared.header,j=H.isPositionedAtTop,X=qp(t),oe=X===R1.sliding||X===R1.floating,Se=qn(!1),et=()=>Se.get()&&!t.removed,He=zn=>oe?zn.fold(G(0),Jo=>Jo.components().length>1?rr(Jo.components()[1].element):0):0,Pe=zn=>{switch($b(t)){case X_.auto:const Jo=Zs.getToolbar(w.outerContainer),Qt=He(Jo),wn=rr(zn.element)-Qt,io=Sr(r);if(io.y>wn)return"top";{const Un=na(r),yo=Math.max(Un.dom.scrollHeight,rr(Un));return io.bottom<yo-wn||Zi().bottom<io.bottom-wn?"bottom":"top"}case X_.bottom:return"bottom";case X_.top:default:return"top"}},Je=zn=>{b.on(Jo=>{Fr.setModes(Jo,[zn]),H.setDockingMode(zn);const Qt=j()?Vf.TopToBottom:Vf.BottomToTop;on(Jo.element,_w,Qt)})},It=()=>{b.on(zn=>{const Jo=B.getOrThunk(()=>{const Qt=OS(Qs(ur(),"margin-left")).getOr(0);return ee(ur())-Ka(r).left+Qt});Cn(zn.element,"max-width",Jo+"px")})},At=zn=>{b.on(Jo=>{const Qt=Zs.getToolbar(w.outerContainer),wn=He(Qt),io=Sr(r),{top:fo,left:Un}=Ct(t,w.outerContainer.element).fold(()=>({top:j()?Math.max(io.y-rr(Jo.element)+wn,0):io.bottom,left:io.x}),is=>{var Vi;const xl=Sr(is),jc=(Vi=is.dom.scrollTop)!==null&&Vi!==void 0?Vi:0,Au=vs(is,ur()),dm=Au?Math.max(io.y-rr(Jo.element)+wn,0):io.y-xl.y+jc-rr(Jo.element)+wn;return{top:j()?dm:io.bottom,left:Au?io.x:io.x-xl.x}}),yo={position:"absolute",left:Math.round(Un)+"px",top:Math.round(fo)+"px"},Ls=zn.map(is=>{const Vi=Pa(),xl=150,jc=window.innerWidth-(Un-Vi.left);return{width:Math.max(Math.min(is,jc),xl)+"px"}}).getOr({});oi(w.outerContainer.element,ie(ie({},yo),Ls))})},Ct=(zn,Jo)=>Wd(zn)?kg(Jo):O.none(),Zt=()=>{je(C,zn=>{zn.broadcastOn([Qm()],{})})},Jt=()=>{if(_)return O.none();if(Ka(w.outerContainer.element).left+pe(w.outerContainer.element)>=window.innerWidth-vK||zs(w.outerContainer.element,"width").isSome()){Cn(w.outerContainer.element,"position","absolute"),Cn(w.outerContainer.element,"left","0px"),es(w.outerContainer.element,"width");const Jo=pe(w.outerContainer.element);return O.some(Jo)}else return O.none()},Ao=zn=>{if(!et())return;_||It();const Jo=_?O.none():Jt();oe&&Zs.refreshToolbar(w.outerContainer),_||At(Jo),R&&b.on(zn),Zt()},hn=()=>_||!R||!et()?!1:b.get().exists(zn=>{const Jo=H.getDockingMode(),Qt=Pe(zn);return Qt!==Jo?(Je(Qt),!0):!1});return{isVisible:et,isPositionedAtTop:j,show:()=>{Se.set(!0),Cn(w.outerContainer.element,"display","flex"),A.addClass(t.getBody(),"mce-edit-focus"),je(C,zn=>{es(zn.element,"display")}),hn(),Wd(t)?Ao(zn=>Fr.isDocked(zn)?Fr.reset(zn):Fr.refresh(zn)):Ao(Fr.refresh)},hide:()=>{Se.set(!1),Cn(w.outerContainer.element,"display","none"),A.removeClass(t.getBody(),"mce-edit-focus"),je(C,zn=>{Cn(zn.element,"display","none")})},update:Ao,updateMode:()=>{hn()&&Ao(Fr.reset)},repositionPopups:Zt}},t5=(t,r)=>{const c=Sr(t);return{pos:r?c.y:c.bottom,bounds:c}},n5=(t,r,c,h)=>{const b=qn(t5(r,c.isPositionedAtTop())),w=R=>{const{pos:B,bounds:H}=t5(r,c.isPositionedAtTop()),{pos:j,bounds:X}=b.get(),oe=H.height!==X.height||H.width!==X.width;b.set({pos:B,bounds:H}),oe&&Xx(t,R),c.isVisible()&&(j!==B?c.update(Fr.reset):oe&&(c.updateMode(),c.repositionPopups()))};h||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(Fr.reset)),t.on("NodeChange keydown",R=>{requestAnimationFrame(()=>w(R))});let C=0;const A=DC(()=>c.update(Fr.refresh),33);t.on("ScrollWindow",()=>{const R=Pa().left;R!==C&&(C=R,A.throttle()),c.updateMode()}),Wd(t)&&t.on("ElementScroll",R=>{c.update(Fr.refresh)});const _=xp();_.set(Ew(Tt.fromDom(t.getBody()),"load",R=>w(R.raw))),t.on("remove",()=>{_.clear()})};var o5=Object.freeze({__proto__:null,render:(t,r,c,h,b)=>{const{mainUi:w}=r,C=or(),A=Tt.fromDom(b.targetNode),_=yK(t,A,r,h,C),R=eR(t);OG(t);const B=()=>{if(C.isSet()){_.show();return}C.set(Zs.getHeader(w.outerContainer).getOrDie());const j=FA(t);Wd(t)?(jf(A,w.mothership),jf(A,r.popupUi.mothership)):Ml(j,w.mothership),Ml(j,r.dialogUi.mothership),YL(t,r,c,h),Zs.setMenubar(w.outerContainer,bS(t,c)),_.show(),n5(t,A,_,R),t.nodeChanged()};t.on("show",B),t.on("hide",_.hide),R||(t.on("focus",B),t.on("blur",_.hide)),t.on("init",()=>{(t.hasFocus()||R)&&B()}),eN(t,r);const H={show:B,hide:_.hide,setEnabled:j=>{qx(r,!j)},isEnabled:()=>!Gn.isDisabled(w.outerContainer)};return{editorContainer:w.outerContainer.element.dom,api:H}}});const wK=()=>{const t=or(),r=or(),c=or();return{dialogUi:t,popupUi:r,mainUi:c,getUiMotherships:()=>{const w=t.get().map(A=>A.mothership),C=r.get().map(A=>A.mothership);return w.fold(()=>C.toArray(),A=>C.fold(()=>[A],_=>vs(A.element,_.element)?[A]:[A,_]))},lazyGetInOuterOrDie:(w,C)=>()=>c.get().bind(A=>C(A.outerContainer)).getOrDie(`Could not find ${w} element in OuterContainer`)}},xK="contexttoolbar-show",s5="contexttoolbar-hide",CK=t=>({hide:()=>ns(t,N0()),getValue:()=>ln.getValue(t)}),r5=(t,r)=>Dt(OO,(c,h)=>{const b=t.get(c),w=CK(b);r.onAction(w,h.event.buttonApi)}),Vv=(t,r,c)=>{const C=r.original,{primary:h}=C,b=sy(C,["primary"]),w=Us(rT(Ot(ie({},b),{type:"button",onAction:Z})));return ZL(w,c,[r5(t,r)])},i5=(t,r,c)=>{const C=r.original,{primary:h}=C,b=sy(C,["primary"]),w=Us(IR(Ot(ie({},b),{type:"togglebutton",onAction:Z})));return qL(w,c,[r5(t,r)])},SK=t=>t.type==="contextformtogglebutton",kK=(t,r,c)=>SK(r)?i5(t,r,c):Vv(t,r,c),a5=(t,r,c)=>{const h=ue(r,C=>Es(kK(t,C,c)));return{asSpecs:()=>ue(h,C=>C.asSpec()),findPrimary:C=>ao(r,(A,_)=>A.primary?O.from(h[_]).bind(R=>R.getOpt(C)).filter(le(Gn.isDisabled)):O.none())}},_S=(t,r)=>{const c=t.label.fold(()=>({}),w=>({"aria-label":w})),h=Es(hg.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:Kt([Fn.config({mode:"special",onEnter:w=>b.findPrimary(w).map(C=>(Rf(C),!0)),onLeft:(w,C)=>(C.cut(),O.none()),onRight:(w,C)=>(C.cut(),O.none())})])})),b=a5(h,t.commands,r);return[{title:O.none(),items:[h.asSpec()]},{title:O.none(),items:b.asSpecs()}]},l5={renderContextForm:(t,r,c)=>fS({type:t,uid:bn("context-toolbar"),initGroups:_S(r,c),onEscape:O.none,cyclicKeying:!0,providers:c}),buildInitGroups:_S},c5=(t,r,c)=>r.bottom-t.y>=c&&t.bottom-r.y>=c,N1=t=>{const r=t.getBoundingClientRect();if(r.height<=0&&r.width<=0){const c=Cd(Tt.fromDom(t.startContainer),t.startOffset).element;return(Io(c)?mi(c):O.some(c)).filter(Po).map(b=>b.dom.getBoundingClientRect()).getOr(r)}else return r},B1=t=>{const r=t.selection.getRng(),c=N1(r);if(t.inline){const h=Pa();return Kr(h.left+c.left,h.top+c.top,c.width,c.height)}else{const h=ul(Tt.fromDom(t.getBody()));return Kr(h.x+c.left,h.y+c.top,c.width,c.height)}},J_=(t,r)=>r.filter(c=>Wo(c)&&ql(c)).map(ul).getOrThunk(()=>B1(t)),u5=(t,r,c)=>{const h=Math.max(t.x+c,r.x),b=Math.min(t.right-c,r.right);return{x:h,width:b-h}},d5=(t,r,c,h,b,w)=>{const C=Tt.fromDom(t.getContainer()),A=Wr(C,".tox-editor-header").getOr(C),_=Sr(A),R=_.y>=r.bottom,B=h&&!R;if(t.inline&&B)return{y:Math.max(_.bottom+w,c.y),bottom:c.bottom};if(t.inline&&!B)return{y:c.y,bottom:Math.min(_.y-w,c.bottom)};const H=b==="line"?Sr(C):r;return B?{y:Math.max(_.bottom+w,c.y),bottom:Math.min(H.bottom-w,c.bottom)}:{y:Math.max(H.y+w,c.y),bottom:Math.min(_.y-w,c.bottom)}},f5=(t,r,c,h=0)=>{const b=ep(window),w=Sr(Tt.fromDom(t.getContentAreaContainer())),C=Kp(t)||Rx(t)||Hb(t),{x:A,width:_}=u5(w,b,h);if(t.inline&&!C)return Kr(A,b.y,_,b.height);{const R=r.header.isPositionedAtTop(),{y:B,bottom:H}=d5(t,w,b,R,c,h);return Kr(A,B,_,H-B)}},zv=12,h5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},m5={maxHeightFunction:Sp(),maxWidthFunction:D_()},AK=(t,r)=>{const c=t.selection.getRng(),h=Cd(Tt.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&vs(h.element,r)},TK=(t,r,c)=>{const h=zs(t,"position");Cn(t,"position",r);const b=c(t);return h.each(w=>Cn(t,"position",w)),b},g5=t=>t==="node",p5=(t,r,c,h,b)=>{const w=B1(t),C=h.lastElement().exists(A=>vs(c,A));if(AK(t,c))return C?JO:ku;if(C)return TK(r,h.getMode(),()=>c5(w,Sr(r),-20)&&!h.isReposition()?yZ:JO);{const A=h.getMode()==="fixed"?b.y+Pa().top:b.y,_=rr(r)+zv;return A+_<=w.y?ku:S1}},DS=(t,r,c,h)=>{const b=_=>(R,B,H,j,X)=>{const oe=p5(t,j,_,c,X),Se=Ot(ie({},R),{y:X.y,height:X.height});return Ot(ie({},oe(Se,B,H,j,X)),{alwaysFit:!0})},w=_=>g5(h)?[b(_)]:[];return r?{onLtr:_=>[Ti,la,ca,Ja,wa,Fa].concat(w(_)),onRtl:_=>[Ti,ca,la,wa,Ja,Fa].concat(w(_))}:{onLtr:_=>[Fa,Ti,Ja,la,wa,ca].concat(w(_)),onRtl:_=>[Fa,Ti,wa,ca,Ja,la].concat(w(_))}},b5=(t,r,c,h)=>r==="line"?{bubble:Hf(zv,0,h5),layouts:{onLtr:()=>[Dk],onRtl:()=>[J0]},overrides:m5}:{bubble:Hf(0,zv,h5,1/zv),layouts:DS(t,c,h,r),overrides:m5},MS=(t,r)=>{const c=un(r,w=>w.predicate(t.dom)),{pass:h,fail:b}=kn(c,w=>w.type==="contexttoolbar");return{contextToolbars:h,contextForms:b}},Q_=t=>{if(t.length<=1)return t;{const r=w=>yt(t,C=>C.position===w),c=w=>un(t,C=>C.position===w),h=r("selection"),b=r("node");if(h||b)if(b&&h){const w=c("node"),C=ue(c("selection"),A=>Ot(ie({},A),{position:"node"}));return w.concat(C)}else return c(h?"selection":"node");else return c("line")}},OK=t=>{if(t.length<=1)return t;{const r=h=>Qe(t,b=>b.position===h);return r("selection").orThunk(()=>r("node")).orThunk(()=>r("line")).map(h=>h.position).fold(()=>[],h=>un(t,b=>b.position===h))}},v5=(t,r,c)=>{const h=MS(t,r);if(h.contextForms.length>0)return O.some({elem:t,toolbars:[h.contextForms[0]]});{const b=MS(t,c);if(b.contextForms.length>0)return O.some({elem:t,toolbars:[b.contextForms[0]]});if(h.contextToolbars.length>0||b.contextToolbars.length>0){const w=Q_(h.contextToolbars.concat(b.contextToolbars));return O.some({elem:t,toolbars:w})}else return O.none()}},_K=(t,r,c)=>t(r)?O.none():MM(r,h=>{if(Po(h)){const{contextToolbars:b,contextForms:w}=MS(h,c.inNodeScope),C=w.length>0?w:OK(b);return C.length>0?O.some({elem:h,toolbars:C}):O.none()}else return O.none()},t),DK=(t,r)=>{const c=Tt.fromDom(r.getBody()),h=C=>vs(C,c),b=C=>!h(C)&&!ha(c,C),w=Tt.fromDom(r.selection.getNode());return b(w)?O.none():v5(w,t.inNodeScope,t.inEditorScope).orThunk(()=>_K(h,w,t))},PS=(t,r)=>{const c={},h=[],b=[],w={},C={},A=(B,H)=>{const j=Us(nz(H));c[B]=j,j.launch.map(X=>{w["form:"+B]=Ot(ie({},H.launch),{type:X.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{r(j)}})}),j.scope==="editor"?b.push(j):h.push(j),C[B]=j},_=(B,H)=>{sz(H).each(j=>{H.scope==="editor"?b.push(j):h.push(j),C[B]=j})},R=Yn(t);return je(R,B=>{const H=t[B];H.type==="contextform"?A(B,H):H.type==="contexttoolbar"&&_(B,H)}),{forms:c,inNodeScope:h,inEditorScope:b,lookupTable:C,formNavigators:w}},eD=bn("forward-slide"),y5=bn("backward-slide"),tD=bn("change-slide-event"),nD="tox-pop--resizing",MK=t=>{const r=qn([]);return gr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{r.set([]),gr.getContent(c).each(h=>{es(h.element,"visibility")}),br(c.element,nD),es(c.element,"width")},inlineBehaviours:Kt([Eo("context-toolbar-events",[Bf(ap(),(c,h)=>{h.event.raw.propertyName==="width"&&(br(c.element,nD),es(c.element,"width"))}),Dt(tD,(c,h)=>{const b=c.element;es(b,"width");const w=ee(b);gr.setContent(c,h.event.contents),Qr(b,nD);const C=ee(b);Cn(b,"width",w+"px"),gr.getContent(c).each(A=>{h.event.focus.bind(_=>(lc(_),cu(b))).orThunk(()=>(Fn.focusIn(A),Id(St(b))))}),setTimeout(()=>{Cn(c.element,"width",C+"px")},0)}),Dt(eD,(c,h)=>{gr.getContent(c).each(b=>{r.set(r.get().concat([{bar:b,focus:Id(St(c.element))}]))}),Hn(c,tD,{contents:h.event.forwardContents,focus:O.none()})}),Dt(y5,(c,h)=>{jn(r.get()).each(b=>{r.set(r.get().slice(0,r.get().length-1)),Hn(c,tD,{contents:Pc(b.bar),focus:b.focus})})})]),Fn.config({mode:"special",onEscape:c=>jn(r.get()).fold(()=>t.onEscape(),h=>(ns(c,y5),O.some(!0)))})]),lazySink:()=>_o.value(t.sink)})},oD="tox-pop--transition",w5=(t,r,c,h)=>{const b=h.backstage,w=b.shared,C=nu().deviceType.isTouch,A=or(),_=or(),R=or(),B=ya(MK({sink:c,onEscape:()=>(t.focus(),O.some(!0))})),H=()=>{const hn=R.get().getOr("node"),ro=g5(hn)?1:0;return f5(t,w,hn,ro)},j=()=>!t.removed&&!(C()&&b.isContextMenuOpen()),X=hn=>wr(xr(hn,A.get(),vs),!0),oe=()=>{if(j()){const hn=H(),ro=wr(R.get(),"node")?J_(t,A.get()):B1(t);return hn.height<=0||!c5(ro,hn,.01)}else return!0},Se=()=>{A.clear(),_.clear(),R.clear(),gr.hide(B)},et=()=>{if(gr.isOpen(B)){const hn=B.element;es(hn,"display"),oe()?Cn(hn,"display","none"):(_.set(0),gr.reposition(B))}},He=hn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[hn],behaviours:Kt([Fn.config({mode:"acyclic"}),Eo("pop-dialog-wrap-events",[tr(ro=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>Fn.focusIn(ro))}),Rd(ro=>{t.shortcuts.remove("ctrl+F9")})])])}),Pe=Et(()=>PS(r,hn=>{const ro=At([hn]);Hn(B,eD,{forwardContents:He(ro)})})),Je=(hn,ro)=>AS(t,{buttons:hn,toolbar:ro.items,allowToolbarGroups:!1},h.backstage,O.some(["form:"])),It=(hn,ro)=>l5.buildInitGroups(hn,ro),At=hn=>{const{buttons:ro}=t.ui.registry.getAll(),eo=Pe(),Cs=ie(ie({},ro),eo.formNavigators),zn=qp(t)===Fl.scrolling?Fl.scrolling:Fl.default,Jo=nt(ue(hn,Qt=>Qt.type==="contexttoolbar"?Je(Cs,Qt):It(Qt,w.providers)));return fS({type:zn,uid:bn("context-toolbar"),initGroups:Jo,onEscape:O.none,cyclicKeying:!0,providers:w.providers})},Ct=(hn,ro)=>{const eo=hn==="node"?w.anchors.node(ro):w.anchors.cursor(),Cs=b5(t,hn,C(),{lastElement:A.get,isReposition:()=>wr(_.get(),0),getMode:()=>xa.getMode(c)});return $s(eo,Cs)},Zt=(hn,ro)=>{if(Ao.cancel(),!j())return;const eo=At(hn),Cs=hn[0].position,zn=Ct(Cs,ro);R.set(Cs),_.set(1);const Jo=B.element;es(Jo,"display"),X(ro)||(br(Jo,oD),xa.reset(c,B)),gr.showWithinBounds(B,He(eo),{anchor:zn,transition:{classes:[oD],mode:"placement"}},()=>O.some(H())),ro.fold(A.clear,A.set),oe()&&Cn(Jo,"display","none")};let Jt=!1;const Ao=DC(()=>{if(!(!t.hasFocus()||t.removed||Jt))if(vi(B.element,oD))Ao.throttle();else{const hn=Pe();DK(hn,t).fold(Se,ro=>{Zt(ro.toolbars,O.some(ro.elem))})}},17);t.on("init",()=>{t.on("remove",Se),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",et),t.on("click keyup focus SetContent",Ao.throttle),t.on(s5,Se),t.on(xK,hn=>{const ro=Pe();$t(ro.lookupTable,hn.toolbarKey).each(eo=>{Zt([eo],Bn(hn.target!==t,hn.target)),gr.getContent(B).each(Fn.focusIn)})}),t.on("focusout",hn=>{lg.setEditorTimeout(t,()=>{cu(c.element).isNone()&&cu(B.element).isNone()&&Se()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&Se()}),t.on("AfterProgressState",hn=>{hn.state?Se():t.hasFocus()&&Ao.throttle()}),t.on("dragstart",()=>{Jt=!0}),t.on("dragend drop",()=>{Jt=!1}),t.on("NodeChange",hn=>{cu(B.element).fold(Ao.throttle,Z)})})},x5=t=>{je([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:ml(t,c.cmd),onSetup:Jx(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Va(t),onAction:ml(t,"JustifyNone")})},C5=(t,r)=>{const c=()=>{const h=r.getOptions(t),b=r.getCurrent(t).map(r.hash),w=or();return ue(h,C=>({type:"togglemenuitem",text:r.display(C),onSetup:A=>{const _=B=>{B&&(w.on(H=>H.setActive(!1)),w.set(A)),A.setActive(B)};_(wr(b,r.hash(C)));const R=r.watcher(t,C,_);return()=>{w.clear(),R()}},onAction:()=>r.setCurrent(t,C)}))};t.ui.registry.addMenuButton(r.name,{tooltip:r.text,icon:r.icon,fetch:h=>h(c()),onSetup:r.onToolbarSetup}),t.ui.registry.addNestedMenuItem(r.name,{type:"nestedmenuitem",text:r.text,getSubmenuItems:c,onSetup:r.onMenuSetup})},PK=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:lR,hash:r=>VG(r,["fixed","relative","empty"]).getOr(r),display:qe,watcher:(r,c,h)=>r.formatter.formatChanged("lineheight",h,!1,{value:c}).unbind,getCurrent:r=>O.from(r.queryCommandValue("LineHeight")),setCurrent:(r,c)=>r.execCommand("LineHeight",!1,c),onToolbarSetup:Va(t),onMenuSetup:Va(t)}),S5=t=>O.from(JP(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:G(c),hash:h=>I(h.customCode)?h.code:`${h.code}/${h.customCode}`,display:h=>h.title,watcher:(h,b,w)=>{var C;return h.formatter.formatChanged("lang",w,!1,{value:b.code,customValue:(C=b.customCode)!==null&&C!==void 0?C:null}).unbind},getCurrent:h=>{const b=Tt.fromDom(h.selection.getNode());return Fm(b,w=>O.some(w).filter(Po).bind(C=>U(C,"lang").map(_=>{const R=U(C,"data-mce-lang").getOrUndefined();return{code:_,customCode:R,title:""}})))},setCurrent:(h,b)=>h.execCommand("Lang",!1,b),onToolbarSetup:h=>{const b=xp();return h.setActive(t.formatter.match("lang",{},void 0,!0)),b.set(t.formatter.formatChanged("lang",h.setActive,!0)),Qb(b.clear,Va(t)(h))},onMenuSetup:Va(t)})),RK=t=>{C5(t,PK(t)),S5(t).each(r=>C5(t,r))},NK=(t,r)=>{PG(t,r),LG(t,r),QG(t,r),BG(t,r),LL(t,r)},BK=t=>yu(t,"NodeChange",r=>{r.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),FK=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:BK(t),onAction:ml(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Va(t),onAction:ml(t,"indent")})},IK=t=>{FK(t)},RS=(t,r)=>c=>{c.setActive(r.get());const h=b=>{r.set(b.state),c.setActive(b.state)};return t.on("PastePlainTextToggle",h),Qb(()=>t.off("PastePlainTextToggle",h),Va(t)(c))},LK=t=>{const r=qn(Ox(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:RS(t,r)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:RS(t,r)})},sD=(t,r)=>()=>{t.execCommand("mceToggleFormat",!1,r)},rD=t=>{ah.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(r,c)=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Jx(t,r.name),onAction:sD(t,r.name)})});for(let r=1;r<=6;r++){const c="h"+r;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+r,onSetup:Jx(t,c),onAction:sD(t,c)})}},k5=t=>{ah.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onAction:ml(t,r.action)})}),ah.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addButton(r.name,{tooltip:r.text,icon:r.icon,onSetup:Va(t),onAction:ml(t,r.action)})})},E5=t=>{ah.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],r=>{t.ui.registry.addToggleButton(r.name,{tooltip:r.text,icon:r.icon,onAction:ml(t,r.action),onSetup:Jx(t,r.name)})})},$K=t=>{rD(t),k5(t),E5(t)},HK=t=>{ah.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onAction:ml(t,r.action)})}),ah.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],r=>{t.ui.registry.addMenuItem(r.name,{text:r.text,icon:r.icon,shortcut:r.shortcut,onSetup:Va(t),onAction:ml(t,r.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Va(t),onAction:sD(t,"code")})},VK=t=>{$K(t),HK(t)},NS=(t,r)=>yu(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[r]())}),zK=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:NS(t,"hasUndo"),onAction:ml(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:NS(t,"hasRedo"),onAction:ml(t,"redo")})},iD=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:NS(t,"hasUndo"),onAction:ml(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:NS(t,"hasRedo"),onAction:ml(t,"redo")})},UK=t=>{zK(t),iD(t)},A5=t=>yu(t,"VisualAid",r=>{r.setActive(t.hasVisual)}),WK=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:A5(t),onAction:ml(t,"mceToggleVisualAid")})},jK=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:ml(t,"mceToggleVisualAid")})},aD=t=>{jK(t),WK(t)},ZK=(t,r)=>{x5(t),VK(t),NK(t,r),UK(t),BN(t),aD(t),IK(t),RK(t),LK(t)},T5=t=>v(t)?t.split(/[ ,]/):t,O5=t=>r=>r.options.get(t),qK=t=>{const r=t.options.register;r("contextmenu_avoid_overlap",{processor:"string",default:""}),r("contextmenu_never_use_native",{processor:"boolean",default:!1}),r("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:v(c)||ae(c,v)?{value:T5(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},BS=O5("contextmenu_never_use_native"),GK=O5("contextmenu_avoid_overlap"),KK=t=>_5(t).length===0,_5=t=>{const r=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:un(c,h=>So(r,h))},Uv=(t,r)=>({type:"makeshift",x:t,y:r}),YK=(t,r,c)=>Uv(t.x+r,t.y+c),lD=t=>t.type==="longpress"||t.type.indexOf("touch")===0,XK=t=>{if(lD(t)){const r=t.touches[0];return Uv(r.pageX,r.pageY)}else return Uv(t.pageX,t.pageY)},JK=t=>{if(lD(t)){const r=t.touches[0];return Uv(r.clientX,r.clientY)}else return Uv(t.clientX,t.clientY)},QK=(t,r)=>{const c=dg.DOM.getPos(t);return YK(r,c.x,c.y)},eY=(t,r)=>r.type==="contextmenu"||r.type==="longpress"?t.inline?XK(r):QK(t.getContentAreaContainer(),JK(r)):D5(t),D5=t=>({type:"selection",root:Tt.fromDom(t.selection.getNode())}),tY=t=>({type:"node",node:O.some(Tt.fromDom(t.selection.getNode())),root:Tt.fromDom(t.getBody())}),M5=(t,r,c)=>{switch(c){case"node":return tY(t);case"point":return eY(t,r);case"selection":return D5(t)}},nY=(t,r,c,h,b,w)=>{const C=c(),A=M5(t,r,w);w1(C,id.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:O.none()}).map(_=>{r.preventDefault(),gr.showMenuAt(b,{anchor:A},{menu:{markers:th("normal")},data:_})})},P5={onLtr:()=>[Ti,la,ca,Ja,wa,Fa,ku,S1,Ov,Tv,Sg,Av],onRtl:()=>[Ti,ca,la,wa,Ja,Fa,ku,S1,Sg,Av,Ov,Tv]},oY=12,R5={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},sY=(t,r)=>{const c=t.selection;if(c.isCollapsed()||r.touches.length<1)return!1;{const h=r.touches[0],b=c.getRng();return U3(t.getWin(),ob.domRange(b)).exists(C=>C.left<=h.clientX&&C.right>=h.clientX&&C.top<=h.clientY&&C.bottom>=h.clientY)}},rY=t=>{const r=t.selection.getRng(),c=()=>{lg.setEditorTimeout(t,()=>{t.selection.setRng(r)},10),w()};t.once("touchend",c);const h=C=>{C.preventDefault(),C.stopImmediatePropagation()};t.on("mousedown",h,!0);const b=()=>w();t.once("longpresscancel",b);const w=()=>{t.off("touchend",c),t.off("longpresscancel",b),t.off("mousedown",h)}},iY=(t,r,c)=>{const h=M5(t,r,c);return ie({bubble:Hf(0,c==="point"?oY:0,R5),layouts:P5,overrides:{maxWidthFunction:D_(),maxHeightFunction:Sp()}},h)},Tg=(t,r,c,h,b,w,C)=>{const A=iY(t,r,w);w1(c,id.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!0,search:O.none()}).map(_=>{r.preventDefault();const R=C?Ha.HighlightMenuAndItem:Ha.HighlightNone;gr.showMenuWithinBounds(b,{anchor:A},{menu:{markers:th("normal"),highlightOnOpen:R},data:_,type:"horizontal"},()=>O.some(f5(t,h.shared,w==="node"?"node":"selection"))),t.dispatch(s5)})},N5=(t,r,c,h,b,w)=>{const C=nu(),A=C.os.isiOS(),_=C.os.isMacOS(),R=C.os.isAndroid(),B=C.deviceType.isTouch(),H=()=>!(R||A||_&&B),j=()=>{const X=c();Tg(t,r,X,h,b,w,H())};if((_||A)&&w!=="node"){const X=()=>{rY(t),j()};sY(t,r)?X():(t.once("selectionchange",X),t.once("touchend",()=>t.off("selectionchange",X)))}else j()},B5=t=>v(t)?t==="|":t.type==="separator",cD={type:"separator"},F5=t=>{const r=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(v(t))return t;switch(t.type){case"separator":return cD;case"submenu":return Ot(ie({type:"nestedmenuitem"},r(t)),{getSubmenuItems:()=>{const h=t.getSubmenuItems();return v(h)?h:ue(h,F5)}});default:const c=t;return Ot(ie({type:"menuitem"},r(c)),{onAction:ce(c.onAction)})}},I5=(t,r)=>{if(r.length===0)return t;const h=jn(t).filter(b=>!B5(b)).fold(()=>[],b=>[cD]);return t.concat(h).concat(r).concat([cD])},L5=(t,r,c)=>{const h=Do(r,(b,w)=>$t(t,w.toLowerCase()).map(C=>{const A=C.update(c);if(v(A)&&ke(_r(A)))return I5(b,A.split(" "));if(T(A)&&A.length>0){const _=ue(A,F5);return I5(b,_)}else return b}).getOrThunk(()=>b.concat([w])),[]);return h.length>0&&B5(h[h.length-1])&&h.pop(),h},aY=(t,r)=>r.ctrlKey&&!BS(t),lY=t=>t.type==="longpress"||So(t,"touches"),$5=(t,r)=>!lY(r)&&(r.button!==2||r.target===t.getBody()&&r.pointerType===""),H5=(t,r)=>$5(t,r)?t.selection.getStart(!0):r.target,cY=(t,r)=>{const c=GK(t),h=$5(t,r)?"selection":"point";if(ke(c)){const b=H5(t,r);return ov(Tt.fromDom(b),c)?"node":h}else return h},uY=(t,r,c)=>{const b=nu().deviceType.isTouch,w=ya(gr.sketch({dom:{tag:"div"},lazySink:r,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Kt([Eo("dismissContextMenu",[Dt(Vm(),(_,R)=>{ss.close(_),t.focus()})])])})),C=()=>gr.hide(w),A=_=>{if(BS(t)&&_.preventDefault(),aY(t,_)||KK(t))return;const R=cY(t,_),B=()=>{const j=H5(t,_),X=t.ui.registry.getAll(),oe=_5(t);return L5(X.contextMenus,oe,j)};(b()?N5:nY)(t,_,B,c,w,R)};t.on("init",()=>{const _="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(b()?"":" ResizeWindow");t.on(_,C),t.on("longpress contextmenu",A)})},uD=Ol.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),FS=t=>r=>r.translate(-t.left,-t.top),IS=t=>r=>r.translate(t.left,t.top),ch=t=>(r,c)=>Do(t,(h,b)=>b(h),dr(r,c)),Wv=(t,r,c)=>t.fold(ch([IS(c),FS(r)]),ch([FS(r)]),ch([])),Og=(t,r,c)=>t.fold(ch([IS(c)]),ch([]),ch([IS(r)])),V5=(t,r,c)=>t.fold(ch([]),ch([FS(c)]),ch([IS(r),FS(c)])),jv=(t,r,c,h,b,w)=>{const C=Og(t,b,w),A=Og(r,b,w);return Math.abs(C.left-A.left)<=c&&Math.abs(C.top-A.top)<=h},dY=(t,r,c,h,b,w)=>{const C=Og(t,b,w),A=Og(r,b,w),_=Math.abs(C.left-A.left),R=Math.abs(C.top-A.top);return dr(_,R)},z5=(t,r,c)=>{const h=t.fold((b,w)=>({position:O.some("absolute"),left:O.some(b+"px"),top:O.some(w+"px")}),(b,w)=>({position:O.some("absolute"),left:O.some(b-c.left+"px"),top:O.some(w-c.top+"px")}),(b,w)=>({position:O.some("fixed"),left:O.some(b+"px"),top:O.some(w+"px")}));return ie({right:O.none(),bottom:O.none()},h)},dD=(t,r,c)=>t.fold((h,b)=>LS(h+r,b+c),(h,b)=>sm(h+r,b+c),(h,b)=>_g(h+r,b+c)),fD=(t,r,c,h)=>{const b=(w,C)=>(A,_)=>{const R=w(r,c,h);return C(A.getOr(R.left),_.getOr(R.top))};return t.fold(b(V5,LS),b(Og,sm),b(Wv,_g))},LS=uD.offset,sm=uD.absolute,_g=uD.fixed,U5=(t,r)=>{const c=$r(t,r);return I(c)?NaN:parseInt(c,10)},fY=(t,r)=>{const c=t.element,h=U5(c,r.leftAttr),b=U5(c,r.topAttr);return isNaN(h)||isNaN(b)?O.none():O.some(dr(h,b))},hY=(t,r,c)=>{const h=t.element;on(h,r.leftAttr,c.left+"px"),on(h,r.topAttr,c.top+"px")},mY=(t,r)=>{const c=t.element;be(c,r.leftAttr),be(c,r.topAttr)},gY=(t,r,c,h)=>fY(t,r).fold(()=>c,b=>_g(b.left+h.left,b.top+h.top)),pY=(t,r,c,h,b,w)=>{const C=gY(t,r,c,h),A=r.mustSnap?vY(t,r,C,b,w):yY(t,r,C,b,w),_=Wv(C,b,w);return hY(t,r,_),A.fold(()=>({coord:_g(_.left,_.top),extra:O.none()}),R=>({coord:R.output,extra:R.extra}))},bY=(t,r)=>{mY(t,r)},W5=(t,r,c,h)=>ao(t,b=>{const w=b.sensor;return jv(r,w,b.range.left,b.range.top,c,h)?O.some({output:fD(b.output,r,c,h),extra:b.extra}):O.none()}),vY=(t,r,c,h,b)=>{const w=r.getSnapPoints(t);return W5(w,c,h,b).orThunk(()=>Do(w,(_,R)=>{const B=R.sensor,H=dY(c,B,R.range.left,R.range.top,h,b);return _.deltas.fold(()=>({deltas:O.some(H),snap:O.some(R)}),j=>{const X=(H.left+H.top)/2,oe=(j.left+j.top)/2;return X<=oe?{deltas:O.some(H),snap:O.some(R)}:_})},{deltas:O.none(),snap:O.none()}).snap.map(_=>({output:fD(_.output,c,h,b),extra:_.extra})))},yY=(t,r,c,h,b)=>{const w=r.getSnapPoints(t);return W5(w,c,h,b)},wY=(t,r,c)=>({coord:fD(t.output,t.output,r,c),extra:t.extra});var xY=Object.freeze({__proto__:null,snapTo:(t,r,c,h)=>{const b=r.getTarget(t.element);if(r.repositionTarget){const w=ji(t.element),C=Pa(w),A=CI(b),_=wY(h,C,A),R=z5(_.coord,C,A);Lt(b,R)}}});const F1="data-initial-z-index",CY=t=>{mi(t.element).filter(Po).each(r=>{U(r,F1).fold(()=>es(r,"z-index"),c=>Cn(r,"z-index",c)),be(r,F1)})},SY=t=>{mi(t.element).filter(Po).each(r=>{zs(r,"z-index").each(c=>{on(r,F1,c)}),Cn(r,"z-index",Qs(t.element,"z-index"))})},j5=(t,r)=>{t.getSystem().addToGui(r),SY(r)},kY=t=>{CY(t),t.getSystem().removeFromGui(t)},Z5=(t,r,c)=>t.getSystem().build(ad.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[r]},events:c}));var EY=ec("snaps",[Rt("getSnapPoints"),os("onSensor"),Rt("leftAttr"),Rt("topAttr"),tt("lazyViewport",Zi),tt("mustSnap",!1)]);const $S=[tt("useFixed",ne),Rt("blockerClass"),tt("getTarget",qe),tt("onDrag",Z),tt("repositionTarget",!0),tt("onDrop",Z),$i("getBounds",Zi),EY],AY=t=>fi(zs(t,"left"),zs(t,"top"),zs(t,"position"),(r,c,h)=>(h==="fixed"?_g:LS)(parseInt(r,10),parseInt(c,10))).getOrThunk(()=>{const r=Ka(t);return sm(r.left,r.top)}),TY=(t,r,c,h,b)=>{const w=b.bounds,C=Og(r,c,h),A=ac(C.left,w.x,w.x+w.width-b.width),_=ac(C.top,w.y,w.y+w.height-b.height),R=sm(A,_);return r.fold(()=>{const B=V5(R,c,h);return LS(B.left,B.top)},G(R),()=>{const B=Wv(R,c,h);return _g(B.left,B.top)})},OY=(t,r,c,h,b,w,C)=>{const A=r.fold(()=>{const _=dD(c,w.left,w.top),R=Wv(_,h,b);return _g(R.left,R.top)},_=>{const R=pY(t,_,c,w,h,b);return R.extra.each(B=>{_.onSensor(t,B)}),R.coord});return TY(t,A,h,b,C)},_Y=(t,r,c,h)=>{const b=r.getTarget(t.element);if(r.repositionTarget){const w=ji(t.element),C=Pa(w),A=CI(b),_=AY(b),R=OY(t,r.snaps,_,C,A,h,c),B=z5(R,C,A);Lt(b,B)}r.onDrag(t,b,h)},q5=(t,r)=>({bounds:t.getBounds(),height:Nu(r.element),width:pe(r.element)}),Zv=(t,r,c,h,b)=>{const w=c.update(h,b),C=c.getStartData().getOrThunk(()=>q5(r,t));w.each(A=>{_Y(t,r,C,A)})},hD=(t,r,c,h)=>{r.each(kY),c.snaps.each(w=>{bY(t,w)});const b=c.getTarget(t.element);h.reset(),c.onDrop(t,b)},mD=t=>(r,c)=>{const h=b=>{c.setStartData(q5(r,b))};return ir([Dt(B0(),b=>{c.getStartData().each(()=>h(b))}),...t(r,c,h)])},DY=t=>ir([Dt(bi(),t.forceDrop),Dt(Y2(),t.drop),Dt(Ky(),(r,c)=>{t.move(c.event)}),Dt(R0(),t.delayDrop)]);var MY=Object.freeze({__proto__:null,getData:t=>O.from(dr(t.x,t.y)),getDelta:(t,r)=>dr(r.left-t.left,r.top-t.top)});const G5=(t,r,c)=>[Dt(bi(),(h,b)=>{if(b.event.raw.button!==0)return;b.stop();const C=()=>hD(h,O.some(R),t,r),A=YN(C,200),_={drop:C,delayDrop:A.schedule,forceDrop:C,move:H=>{A.cancel(),Zv(h,t,r,MY,H)}},R=Z5(h,t.blockerClass,DY(_));(()=>{c(h),j5(h,R)})()})],PY=[...$S,Ws("dragger",{handlers:mD(G5)})],RY=t=>ir([Dt(Df(),t.forceDrop),Dt(Im(),t.drop),Dt(NM(),t.drop),Dt(rp(),(r,c)=>{t.move(c.event)})]),NY=t=>{const r=t[0];return O.some(dr(r.clientX,r.clientY))};var K5=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?NY(c):O.none()},getDelta:(t,r)=>dr(r.left-t.left,r.top-t.top)});const Y5=(t,r,c)=>{const h=or(),b=w=>{hD(w,h.get(),t,r),h.clear()};return[Dt(Df(),(w,C)=>{C.stop();const A=()=>b(w),_={drop:A,delayDrop:Z,forceDrop:A,move:H=>{Zv(w,t,r,K5,H)}},R=Z5(w,t.blockerClass,RY(_));h.set(R),(()=>{c(w),j5(w,R)})()}),Dt(rp(),(w,C)=>{C.stop(),Zv(w,t,r,K5,C.event)}),Dt(Im(),(w,C)=>{C.stop(),b(w)}),Dt(NM(),b)]},BY=[...$S,Ws("dragger",{handlers:mD(Y5)})],FY=(t,r,c)=>[...G5(t,r,c),...Y5(t,r,c)],IY=[...$S,Ws("dragger",{handlers:mD(FY)})];var $Y=Object.freeze({__proto__:null,mouse:PY,touch:BY,mouseOrTouch:IY}),HY=Object.freeze({__proto__:null,init:()=>{let t=O.none(),r=O.none();const c=()=>{t=O.none(),r=O.none()},h=(_,R)=>{const B=t.map(H=>_.getDelta(H,R));return t=O.some(R),B},b=(_,R)=>_.getData(R).bind(B=>h(_,B)),w=_=>{r=O.some(_)},C=()=>r,A=G({});return rc({readState:A,reset:c,update:b,getStartData:C,setStartData:w})}});const Dg=Fk({branchKey:"mode",branches:$Y,name:"dragging",active:{events:(t,r)=>t.dragger.handlers(t,r)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:O.from(t.extra)})},state:HY,apis:xY}),gD=40,HS=gD/2,X5=(t,r,c,h,b,w)=>t.fold(()=>Dg.snap({sensor:sm(c-HS,h-HS),range:dr(b,w),output:sm(O.some(c),O.some(h)),extra:{td:r}}),C=>{const A=c-HS,_=h-HS,R=gD,B=gD,H=C.element.dom.getBoundingClientRect();return Dg.snap({sensor:sm(A,_),range:dr(R,B),output:sm(O.some(c-H.width/2),O.some(h-H.height/2)),extra:{td:r}})}),pD=(t,r,c)=>{const h=(b,w)=>b.exists(C=>vs(C,w));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(b,w)=>{const C=w.td;h(r.get(),C)||(r.set(C),c(C))},mustSnap:!0}},bD=t=>Es(Di.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Kt([Dg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),lv.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Mg=(t,r)=>{const c=qn([]),h=qn([]),b=qn(!1),w=or(),C=or(),A=Zt=>{const Jt=ul(Zt);return X5(X.getOpt(r),Zt,Jt.x,Jt.y,Jt.width,Jt.height)},_=()=>ue(c.get(),Zt=>A(Zt)),R=Zt=>{const Jt=ul(Zt);return X5(oe.getOpt(r),Zt,Jt.right,Jt.bottom,Jt.width,Jt.height)},B=()=>ue(h.get(),Zt=>R(Zt)),H=pD(_,w,Zt=>{C.get().each(Jt=>{t.dispatch("TableSelectorChange",{start:Zt,finish:Jt})})}),j=pD(B,C,Zt=>{w.get().each(Jt=>{t.dispatch("TableSelectorChange",{start:Jt,finish:Zt})})}),X=bD(H),oe=bD(j),Se=ya(X.asSpec()),et=ya(oe.asSpec()),He=(Zt,Jt,Ao,hn)=>{const ro=Jt.dom.getBoundingClientRect();es(Zt.element,"display");const eo=_a(Tt.fromDom(t.getBody())).dom.innerHeight,Cs=Ao(ro),zn=hn(ro,eo);(Cs||zn)&&Cn(Zt.element,"display","none")},Pe=(Zt,Jt,Ao,hn)=>{const ro=Ao(Jt);Dg.snapTo(Zt,ro),He(Zt,Jt,zn=>zn[hn]<0,(zn,Jo)=>zn[hn]>Jo)},Je=Zt=>Pe(Se,Zt,A,"top"),It=()=>w.get().each(Je),At=Zt=>Pe(et,Zt,R,"bottom"),Ct=()=>C.get().each(At);nu().deviceType.isTouch()&&(t.on("TableSelectionChange",Zt=>{b.get()||(Rh(r,Se),Rh(r,et),b.set(!0)),w.set(Zt.start),C.set(Zt.finish),Zt.otherCells.each(Jt=>{c.set(Jt.upOrLeftCells),h.set(Jt.downOrRightCells),Je(Zt.start),At(Zt.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{It(),Ct()}),t.on("TableSelectionClear",()=>{b.get()&&(Wf(Se),Wf(et),b.set(!1)),w.clear(),C.clear()}))};var VY=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const vD=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",VS=(t,r,c)=>{var h;const b=(h=r.delimiter)!==null&&h!==void 0?h:"›",w=(R,B,H)=>Di.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":H,"aria-level":H+1}},components:[Br(R)],action:j=>{t.focus(),t.selection.select(B),t.nodeChanged()},buttonBehaviours:Kt([ei.button(c.isDisabled),ri()])}),C=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Br(` ${b} `)]}),A=R=>Do(R,(B,H,j)=>{const X=w(H.name,H.element,j);return j===0?B.concat([X]):B.concat([C(),X])},[]),_=R=>{const B=[];let H=R.length;for(;H-- >0;){const j=R[H];if(j.nodeType===1&&!vD(j)){const X=wN(t,j);if(X.isDefaultPrevented()||B.push({name:X.name,element:j}),X.isPropagationStopped())break}}return B};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Kt([Fn.config({mode:"flow",selector:"div[role=button]"}),Gn.config({disabled:c.isDisabled}),ri(),ar.config({}),vo.config({}),Eo("elementPathEvents",[tr((R,B)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Fn.focusIn(R)),t.on("NodeChange",H=>{const j=_(H.parents),X=j.length>0?A(j):[];vo.set(R,X)})})])]),components:[]}};var rm;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(rm||(rm={}));const zY=(t,r,c,h,b)=>{const w={height:Hv(h+r.top,Zp(t),EA(t))};return c===rm.Both&&(w.width=Hv(b+r.left,kA(t),kx(t))),w},J5=(t,r,c)=>{const h=Tt.fromDom(t.getContainer()),b=zY(t,r,c,rr(h),ee(h));Xe(b,(w,C)=>{q(w)&&Cn(h,C,Y_(w))}),vN(t)},UY=t=>{const r=rR(t);return r===!1?rm.None:r==="both"?rm.Both:rm.Vertical},zS=(t,r,c,h)=>{const w=dr(c*20,h*20);return J5(t,w,r),O.some(!0)},Pg=(t,r)=>{const c=UY(t);if(c===rm.None)return O.none();const h=c===rm.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return O.some(pu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:r.translate("Resize"),"aria-label":r.translate(h)},behaviours:[Dg.config({mode:"mouse",repositionTarget:!1,onDrag:(b,w,C)=>J5(t,C,c),blockerClass:"tox-blocker"}),Fn.config({mode:"special",onLeft:()=>zS(t,c,-1,0),onRight:()=>zS(t,c,1,0),onUp:()=>zS(t,c,0,-1),onDown:()=>zS(t,c,0,1)}),ar.config({}),Jn.config({})]},r.icons))},Q5=(t,r)=>{const c=(h,b,w)=>vo.set(h,[Br(r.translate(["{0} "+w,b[w]]))]);return Di.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Kt([ei.button(r.isDisabled),ri(),ar.config({}),vo.config({}),ln.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Eo("wordcount-events",[Ff(h=>{const b=ln.getValue(h),w=b.mode==="words"?"characters":"words";ln.setValue(h,{mode:w,count:b.count}),c(h,b.count,w)}),tr(h=>{t.on("wordCountUpdate",b=>{const{mode:w}=ln.getValue(h);ln.setValue(h,{mode:w,count:b.wordCount}),c(h,b.wordCount,w)})})])]),eventOrder:{[sc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},WY=(t,r)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":mc.translate(["Powered by {0}","Tiny"])},innerHtml:VY.trim()},behaviours:Kt([Jn.config({})])}]}),h=()=>{const A=Gx("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Br(mc.translate(["Press {0} for help",A]))]}},b=()=>{const A=[];return t.hasPlugin("wordcount")&&A.push(Q5(t,r)),PA(t)&&A.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:A}},w=()=>{const A=[],_=Dx(t),R=Gp(t),B=PA(t)||t.hasPlugin("wordcount"),H=()=>{const j="tox-statusbar__text-container--flex-start",X="tox-statusbar__text-container--flex-end",oe="tox-statusbar__text-container--space-around";if(_){const Se="tox-statusbar__text-container-3-cols";return!B&&!R?[Se,oe]:B&&!R?[Se,X]:[Se,j]}return[B&&!R?X:j]};return R&&A.push(VS(t,{},r)),_&&A.push(h()),B&&A.push(b()),A.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...H()]},components:A}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const A=w(),_=Pg(t,r);return A.concat(_.toArray())})()}},e$=(t,r)=>r.get().getOrDie(`UI for ${t} has not been rendered`),jY=(t,r)=>{const c=t.inline,h=c?o5:QL,b=Vb(t)?FI:tq,w=wK(),C=or(),A=or(),_=or(),j=nu().deviceType.isTouch()?["tox-platform-touch"]:[],X=BA(t),oe=qp(t),Se=Es({dom:{tag:"div",classes:["tox-anchorbar"]}}),et=Es({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),He=()=>w.mainUi.get().map(Un=>Un.outerContainer).bind(Zs.getHeader),Pe=()=>_o.fromOption(w.dialogUi.get().map(Un=>Un.sink),"UI has not been rendered"),Je=()=>_o.fromOption(w.popupUi.get().map(Un=>Un.sink),"(popup) UI has not been rendered"),It=w.lazyGetInOuterOrDie("anchor bar",Se.getOpt),At=w.lazyGetInOuterOrDie("bottom anchor bar",et.getOpt),Ct=w.lazyGetInOuterOrDie("toolbar",Zs.getToolbar),Zt=w.lazyGetInOuterOrDie("throbber",Zs.getThrobber),Jt=qZ({popup:Je,dialog:Pe},t,It,At),Ao=()=>{const Un={attributes:{[_w]:X?Vf.BottomToTop:Vf.TopToBottom}},yo=Zs.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Jt.popup,onEscape:()=>{t.focus()}}),Ls=Zs.parts.toolbar(ie({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Jt.popup.shared.getSink,providers:Jt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:ty=>{_z(t,ty)},type:oe,lazyToolbar:Ct,lazyHeader:()=>He().getOrDie("Could not find header element")},Un)),is=Zs.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Jt.popup.shared.providers,onEscape:()=>{t.focus()},type:oe}),Vi=Hb(t),xl=Rx(t),jc=Kp(t),Au=iR(t),dm=hn(),Fg=Vi||xl||jc,gd=()=>Vi?[is]:xl?[Ls]:[],dh=Au?[dm,yo]:[yo];return Zs.parts.header({dom:ie({tag:"div",classes:["tox-editor-header"].concat(Fg?[]:["tox-editor-header--empty"])},Un),components:nt([jc?dh:[],gd(),Yp(t)?[]:[Se.asSpec()]]),sticky:Vb(t),editor:t,sharedBackstage:Jt.popup.shared})},hn=()=>Zs.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),ro=()=>{const Un=Zs.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),yo=Zs.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Un,yo]}},eo=()=>{const Un=FA(t),yo=vs(ur(),Un)&&Qs(Un,"display")==="grid",Ls={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(j),attributes:ie({},mc.isRtl()?{dir:"rtl"}:{})},behaviours:Kt([xa.config({useFixed:()=>b.isDocked(He)})])},is={dom:{styles:{width:document.body.clientWidth+"px"}},events:ir([Dt(F0(),jc=>{Cn(jc.element,"width",document.body.clientWidth+"px")})])},Vi=ya($s(Ls,yo?is:{})),xl=uC(Vi);return A.set(xl),{sink:Vi,mothership:xl}},Cs=()=>{const Un={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(j),attributes:ie({},mc.isRtl()?{dir:"rtl"}:{})},behaviours:Kt([xa.config({useFixed:()=>b.isDocked(He),getBounds:()=>r.getPopupSinkBounds()})])},yo=ya(Un),Ls=uC(yo);return _.set(Ls),{sink:yo,mothership:Ls}},zn=()=>{const Un=Ao(),yo=ro(),Ls=Zs.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Jt.popup}),is=Zs.parts.viewWrapper({backstage:Jt.popup}),Vi=sR(t)&&!c?O.some(WY(t,Jt.popup.shared.providers)):O.none(),xl=nt([X?[]:[Un],c?[]:[yo],X?[Un]:[]]),jc=Zs.parts.editorContainer({components:nt([xl,c?[]:[et.asSpec(),...Vi.toArray()]])}),Au=IA(t),dm=ie(ie({role:"application"},mc.isRtl()?{dir:"rtl"}:{}),Au?{"aria-hidden":"true"}:{}),Fg=ya(Zs.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(X?["tox-tinymce--toolbar-bottom"]:[]).concat(j),styles:ie({visibility:"hidden"},Au?{opacity:"0",border:"0"}:{}),attributes:dm},components:[jc,...c?[]:[is],Ls],behaviours:Kt([ri(),Gn.config({disableClass:"tox-tinymce--disabled"}),Fn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),gd=uC(Fg);return C.set(gd),{mothership:gd,outerContainer:Fg}},Jo=Un=>{const yo=Y_(pK(t)),Ls=Y_(bK(t));return t.inline||(Sd("div","width",Ls)&&Cn(Un.element,"width",Ls),Sd("div","height",yo)?Cn(Un.element,"height",yo):Cn(Un.element,"height","400px")),yo},Qt=Un=>{t.addShortcut("alt+F9","focus menubar",()=>{Zs.focusMenubar(Un)}),t.addShortcut("alt+F10","focus toolbar",()=>{Zs.focusToolbar(Un)}),t.addCommand("ToggleToolbarDrawer",(yo,Ls)=>{Ls!=null&&Ls.skipFocus?Zs.toggleToolbarDrawerWithoutFocusing(Un):Zs.toggleToolbarDrawer(Un)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Zs.isToolbarDrawerToggled(Un))},wn=Un=>{const{mainUi:yo,popupUi:Ls,uiMotherships:is}=Un;pt(QP(t),(Z1,e2)=>{t.ui.registry.addGroupToolbarButton(e2,Z1)});const{buttons:Vi,menuItems:xl,contextToolbars:jc,sidebars:Au,views:dm}=t.ui.registry.getAll(),Fg=NA(t),gd={menuItems:xl,menus:uR(t),menubar:TA(t),toolbar:Fg.getOrThunk(()=>Ax(t)),allowToolbarGroups:oe===Fl.floating,buttons:Vi,sidebar:Au,views:dm};Qt(yo.outerContainer),E1(t,yo.mothership,is),b.setup(t,Jt.popup.shared,He),ZK(t,Jt.popup),uY(t,Jt.popup.shared.getSink,Jt.popup),Rq(t),sS(t,Zt,Jt.popup.shared),w5(t,jc,Ls.sink,{backstage:Jt.popup}),Mg(t,Ls.sink);const dh=t.getElement(),ty=Jo(yo.outerContainer),OD={targetNode:dh,height:ty};return h.render(t,Un,gd,Jt.popup,OD)},io=Un=>(_.set(Un.mothership),Un),fo=()=>{const Un=zn(),yo=eo(),Ls=Wd(t)?Cs():io(yo);w.dialogUi.set(yo),w.popupUi.set(Ls),w.mainUi.set(Un);const is={popupUi:Ls,dialogUi:yo,mainUi:Un,uiMotherships:w.getUiMotherships()};return wn(is)};return{popups:{backstage:Jt.popup,getMothership:()=>e$("popups",_)},dialogs:{backstage:Jt.dialog,getMothership:()=>e$("dialogs",A)},renderUI:fo}},ZY=(t,r)=>{const c=U(t,"id").fold(()=>{const h=bn("dialog-label");return on(r,"id",h),h},qe);on(t,"aria-labelledby",c)},qY=G([Rt("lazySink"),Ds("dragBlockClass"),$i("getBounds",Zi),tt("useTabstopAt",ge),tt("firstTabstop",0),tt("eventOrder",{}),yi("modalBehaviours",[Fn]),_l("onExecute"),xk("onEscape")]),yD={sketch:qe},GY=G([fc({name:"draghandle",overrides:(t,r)=>({behaviours:Kt([Dg.config({mode:"mouse",getTarget:c=>ic(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(r,null,2)).message),getBounds:t.getDragBounds})])})}),Ca({schema:[Rt("dom")],name:"title"}),Ca({factory:yD,schema:[Rt("dom")],name:"close"}),Ca({factory:yD,schema:[Rt("dom")],name:"body"}),fc({factory:yD,schema:[Rt("dom")],name:"footer"}),fu({factory:{sketch:(t,r)=>Ot(ie({},t),{dom:r.dom,components:r.components})},schema:[tt("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),tt("components",[])],name:"blocker"})]),KY=(t,r,c,h)=>{const b=or(),w=X=>{b.set(X);const oe=t.lazySink(X).getOrDie(),Se=h.blocker(),et=oe.getSystem().build(Ot(ie({},Se),{components:Se.components.concat([Pc(X)]),behaviours:Kt([Jn.config({}),Eo("dialog-blocker-events",[Bf(Pf(),()=>{fd.isBlocked(X)?Z():Fn.focusIn(X)})])])}));Rh(oe,et),Fn.focusIn(X)},C=X=>{b.clear(),mi(X.element).each(oe=>{X.getSystem().getByDom(oe).each(Se=>{Wf(Se)})})},A=X=>Gf(X,t,"body"),_=X=>js(X,t,"footer"),R=(X,oe)=>{fd.block(X,oe)},B=X=>{fd.unblock(X)},H=bn("modal-events"),j=Ot(ie({},t.eventOrder),{[Ku()]:[H].concat(t.eventOrder["alloy.system.attached"]||[])});return{uid:t.uid,dom:t.dom,components:r,apis:{show:w,hide:C,getBody:A,getFooter:_,setIdle:B,setBusy:R},eventOrder:j,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:_i(t.modalBehaviours,[vo.config({}),Fn.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),fd.config({getRoot:b.get}),Eo(H,[tr(X=>{ZY(X.element,Gf(X,t,"title").element)})])])}},ti=Sa({name:"ModalDialog",configFields:qY(),partFields:GY(),factory:KY,apis:{show:(t,r)=>{t.show(r)},hide:(t,r)=>{t.hide(r)},getBody:(t,r)=>t.getBody(r),getFooter:(t,r)=>t.getFooter(r),setBusy:(t,r,c)=>{t.setBusy(r,c)},setIdle:(t,r)=>{t.setIdle(r)}}}),qv=Ln([jr,QA].concat(gg)),wD=zu,I1=[Wx("button"),gc,tc("align","end",["start","end"]),Gd,Nc,_M("buttonType",["primary","secondary"])],im=[...I1,nh],L1=[Uu("type",["submit","cancel","custom"]),...im],YY=[Uu("type",["menu"]),qd,jb,gc,Ql("items",qv),...I1],t$=[...I1,Uu("type",["togglebutton"]),xs("tooltip"),gc,qd,Li("active",!1)],n$=gs("type",{submit:L1,cancel:L1,custom:L1,menu:YY,togglebutton:t$}),o$=[jr,nh,Uu("level",["info","warn","error","success"]),eT,tt("url","")],XY=Ln(o$),JY=t=>[jr,t],QY=[jr,nh,Nc,Wx("button"),gc,DR,_M("buttonType",["primary","secondary","toolbar"]),Gd],lte=Ln(QY),Rg=[jr,QA],Hc=Rg.concat([zx]),eX=Rg.concat([Vx,Nc]),tX=Ln(eX),nX=zu,s$=Hc.concat([MR("auto")]),oX=Ln(s$),sX=Dm([e1,nh,eT]),rX=Hc.concat([_f("storageKey","default")]),xD=Ln(rX),CD=Ki,r$=Ln(Hc),iX=Ki,aX=Rg.concat([_f("tag","textarea"),xs("scriptId"),xs("scriptUrl"),t8("settings",void 0)]),i$=Rg.concat([_f("tag","textarea"),Wu("init")]),lX=T0(t=>Er("customeditor.old",er(i$),t).orThunk(()=>Er("customeditor.new",er(aX),t))),cX=Ki,a$=Ln(Hc),uX=Q6(),US=t=>[jr,D0("columns"),t],H1=[jr,xs("html"),tc("presets","presentation",["presentation","document"])],WS=Ln(H1),l$=Hc.concat([Li("border",!1),Li("sandboxed",!0),Li("streamContent",!1),Li("transparent",!0)]),jS=Ln(l$),yl=Ki,ZS=Ln(Rg.concat([Na("height")])),c$=Ln([xs("url"),M0("zoom"),M0("cachedWidth"),M0("cachedHeight")]),u$=Hc.concat([Na("inputMode"),Na("placeholder"),Li("maximized",!1),Nc]),dX=Ln(u$),fX=Ki,am=t=>[jr,Vx,t,tc("align","start",["start","center","end"])],ute=[nh,e1],hX=[nh,Ql("items",_0("items",()=>SD))],SD=xn([Ln(ute),Ln(hX)]),V1=Hc.concat([Ql("items",SD),Nc]),qS=Ln(V1),d$=Ki,mX=Hc.concat([G2("items",[nh,e1]),Bm("size",1),Nc]),gX=Ln(mX),pX=Ki,bX=Hc.concat([Li("constrain",!0),Nc]),z1=Ln(bX),vX=Ln([xs("width"),xs("height")]),yX=Rg.concat([Vx,Bm("min",0),Bm("max",0)]),wX=Ln(yX),dte=A0,xX=[jr,Ql("header",Ki),Ql("cells",Vu(Ki))],CX=Ln(xX),Gv=Hc.concat([Na("placeholder"),Li("maximized",!1),Nc]),SX=Ln(Gv),kX=Ki,kD=[Uu("type",["directory","leaf"]),TR,xs("id"),Md("menu",Nv)],EX=Ln(kD),e=kD.concat([Ql("children",_0("children",()=>Vt("type",{directory:n,leaf:EX})))]),n=Ln(e),s=Vt("type",{directory:n,leaf:EX}),a=[jr,Ql("items",s),Pm("onLeafAction"),Pm("onToggleExpand"),Zu("defaultExpandedIds",[],Ki),Na("defaultSelectedId")],f=Ln(a),g=Hc.concat([tc("filetype","file",["image","media","file"]),Nc,Na("picker_text")]),y=Ln(g),S=Ln([e1,Zb]),E=t=>ra("items","items",ks(),Vu(T0(r=>Er(`Checking item of ${t}`,P,r).fold(c=>_o.error(dl(c)),c=>_o.value(c))))),P=va(()=>Vt("type",{alertbanner:XY,bar:Ln(JY(E("bar"))),button:lte,checkbox:tX,colorinput:xD,colorpicker:r$,dropzone:a$,grid:Ln(US(E("grid"))),iframe:jS,input:dX,listbox:qS,selectbox:gX,sizeinput:z1,slider:wX,textarea:SX,urlinput:y,customeditor:lX,htmlpanel:WS,imagepreview:ZS,collection:oX,label:Ln(am(E("label"))),table:CX,tree:f,panel:$})),L=[jr,tt("classes",[]),Ql("items",P)],$=Ln(L),W=[Wx("tab"),TR,Ql("items",P)],re=[jr,G2("tabs",W)],fe=Ln(re),te=im,he=n$,Le=Ln([xs("title"),Jl("body",Vt("type",{panel:$,tabpanel:fe})),_f("size","normal"),Zu("buttons",[],he),tt("initialData",{}),$i("onAction",Z),$i("onChange",Z),$i("onSubmit",Z),$i("onClose",Z),$i("onCancel",Z),$i("onTabChange",Z)]),ze=t=>Er("dialog",Le,t),Ve=Ln([Uu("type",["cancel","custom"]),...te]),ot=Ln([xs("title"),xs("url"),M0("height"),M0("width"),Rm("buttons",Ve),$i("onAction",Z),$i("onCancel",Z),$i("onClose",Z),$i("onMessage",Z)]),Nt=t=>Er("dialog",ot,t),Wt=t=>x(t)?[t].concat(de(cs(t),Wt)):T(t)?de(t,Wt):[],sn=t=>v(t.type)&&v(t.name),vt={checkbox:nX,colorinput:CD,colorpicker:iX,dropzone:uX,input:fX,iframe:yl,imagepreview:c$,selectbox:pX,sizeinput:vX,slider:dte,listbox:d$,size:vX,textarea:kX,urlinput:S,customeditor:cX,collection:sX,togglemenuitem:wD},dt=t=>O.from(vt[t.type]),Mt=t=>un(Wt(t),sn),gn=t=>{const r=Mt(t),c=de(r,h=>dt(h).fold(()=>[],b=>[Jl(h.name,b)]));return Ln(c)},Mn=t=>{var r;const c=Us(ze(t)),h=gn(t),b=(r=t.initialData)!==null&&r!==void 0?r:{};return{internalDialog:c,dataValidator:h,initialData:b}},ko={open:(t,r)=>{const c=Mn(r);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,r)=>{const c=Us(Nt(r));return t(c)},redial:t=>Mn(t)};var Ms=Object.freeze({__proto__:null,events:(t,r)=>{const c=(h,b)=>{t.updateState.each(w=>{const C=w(h,b);r.set(C)}),t.renderComponents.each(w=>{const C=w(b,r.get());(t.reuseDom?uP:$a)(h,C)})};return ir([Dt($m(),(h,b)=>{const w=b;if(!w.universal){const C=t.channel;Ue(w.channels,C)&&c(h,w.data)}}),tr((h,b)=>{t.initialData.each(w=>{c(h,w)})})])}}),Tr=Object.freeze({__proto__:null,getState:(t,r,c)=>c}),Qi=[Rt("channel"),Ds("renderComponents"),Ds("updateState"),Ds("initialData"),Li("reuseDom",!0)],Xt=Object.freeze({__proto__:null,init:()=>{const t=qn(O.none()),r=()=>t.set(O.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:r}}});const cn=Xi({fields:Qi,name:"reflecting",active:Ms,apis:Tr,state:Xt}),as=t=>{const r=[],c={};return Xe(t,(h,b)=>{h.fold(()=>{r.push(b)},w=>{c[b]=w})}),r.length>0?_o.error(r):_o.value(c)},zo=(t,r,c)=>{const h=Es(g1.sketch(b=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:ue(t.items,w=>Su(b,w,r,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[h.asSpec()]}],behaviours:Kt([Fn.config({mode:"acyclic",useTabstopAt:le(b1)}),bl.memento(h),ZB(h,{postprocess:b=>as(b).fold(w=>({}),qe)}),Eo("dialog-body-panel",[Dt(Pf(),(b,w)=>{b.getSystem().broadcastOn([y1],{newFocus:O.some(w.event.target)})})])])}},yn=(t,r)=>({uid:t.uid,dom:t.dom,components:t.components,events:od(t.action),behaviours:_i(t.tabButtonBehaviours,[Jn.config({}),Fn.config({mode:"execution",useSpace:!0,useEnter:!0}),ln.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),co=Rl({name:"TabButton",configFields:[tt("uid",void 0),Rt("value"),ra("dom","dom",tp(()=>({attributes:{role:"tab",id:bn("aria"),"aria-selected":"false"}})),Gi()),Ds("action"),tt("domModification",{}),yi("tabButtonBehaviours",[Jn,Fn,ln]),Rt("view")],factory:yn}),Gt=G([Rt("tabs"),Rt("dom"),tt("clickToDismiss",!1),yi("tabbarBehaviours",[ps,Fn]),_h(["tabClass","selectedClass"])]),uo=bb({factory:co,name:"tabs",unit:"tab",overrides:t=>{const r=(h,b)=>{ps.dehighlight(h,b),Hn(h,ew(),{tabbar:h,button:b})},c=(h,b)=>{ps.highlight(h,b),Hn(h,IM(),{tabbar:h,button:b})};return{action:h=>{const b=h.getSystem().getByUid(t.uid).getOrDie(),w=ps.isHighlighted(b,h);(w&&t.clickToDismiss?r:w?Z:c)(b,h)},domModification:{classes:[t.markers.tabClass]}}}}),Ko=G([uo]),Is=(t,r,c,h)=>({uid:t.uid,dom:t.dom,components:r,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:_i(t.tabbarBehaviours,[ps.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(b,w)=>{on(w.element,"aria-selected","true")},onDehighlight:(b,w)=>{on(w.element,"aria-selected","false")}}),Fn.config({mode:"flow",getInitial:b=>ps.getHighlighted(b).map(w=>w.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),Ps=Sa({name:"Tabbar",configFields:Gt(),partFields:Ko(),factory:Is}),Mi=(t,r)=>({uid:t.uid,dom:t.dom,behaviours:_i(t.tabviewBehaviours,[vo.config({})]),domModification:{attributes:{role:"tabpanel"}}}),Eu=Rl({name:"Tabview",configFields:[yi("tabviewBehaviours",[vo])],factory:Mi}),of=G([tt("selectFirst",!0),os("onChangeTab"),os("onDismissTab"),tt("tabs",[]),yi("tabSectionBehaviours",[])]),nl=Ca({factory:Ps,schema:[Rt("dom"),ju("markers",[Rt("tabClass"),Rt("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),Vc=Ca({factory:Eu,name:"tabview"}),go=G([nl,Vc]),hs=(t,r,c,h)=>{const b=C=>{const A=ln.getValue(C);js(C,t,"tabview").each(_=>{Qe(t.tabs,B=>B.value===A).each(B=>{const H=B.view();U(C.element,"id").each(j=>{on(_.element,"aria-labelledby",j)}),vo.set(_,H),t.onChangeTab(_,C,H)})})},w=(C,A)=>{js(C,t,"tabbar").each(_=>{A(_).each(Rf)})};return{uid:t.uid,dom:t.dom,components:r,behaviours:Zf(t.tabSectionBehaviours),events:ir(nt([t.selectFirst?[tr((C,A)=>{w(C,ps.getFirst)})]:[],[Dt(IM(),(C,A)=>{const _=A.event.button;b(_)}),Dt(ew(),(C,A)=>{const _=A.event.button;t.onDismissTab(C,_)})]])),apis:{getViewItems:C=>js(C,t,"tabview").map(A=>vo.contents(A)).getOr([]),showTab:(C,A)=>{w(C,R=>{const B=ps.getCandidates(R);return Qe(B,j=>ln.getValue(j)===A).filter(j=>!ps.isHighlighted(R,j))})}}}},Ts=Sa({name:"TabSection",configFields:of(),partFields:go(),factory:hs,apis:{getViewItems:(t,r)=>t.getViewItems(r),showTab:(t,r,c)=>{t.showTab(r,c)}}}),Rr=(t,r,c)=>ue(t,(h,b)=>{vo.set(c,t[b].view());const w=r.dom.getBoundingClientRect();return vo.set(c,[]),w.height}),pr=t=>en(We(t,(r,c)=>r>c?-1:r<c?1:0)),wl=(t,r,c)=>{const h=na(t).dom,b=ic(t,".tox-dialog-wrap").getOr(t),w=Qs(b,"position")==="fixed";let C;w?C=Math.max(h.clientHeight,window.innerHeight):C=Math.max(h.offsetHeight,h.scrollHeight);const A=rr(r),R=r.dom.offsetLeft>=c.dom.offsetLeft+ee(c)?Math.max(rr(c),A):A,B=parseInt(Qs(t,"margin-top"),10)||0,H=parseInt(Qs(t,"margin-bottom"),10)||0,X=rr(t)+B+H-R;return C-X},hd=(t,r)=>{en(t).each(c=>Ts.showTab(r,c.value))},uh=(t,r)=>{Cn(t,"height",r+"px"),Cn(t,"flex-basis",r+"px")},Ng=(t,r,c)=>{ic(t,'[role="dialog"]').each(h=>{Wr(h,'[role="tablist"]').each(b=>{c.get().map(w=>(Cn(r,"height","0"),Cn(r,"flex-basis","0"),Math.min(w,wl(h,r,b)))).each(w=>{uh(r,w)})})})},U1=t=>Wr(t,'[role="tabpanel"]'),GS=t=>{const r=or();return{extraEvents:[tr(b=>{const w=b.element;U1(w).each(C=>{Cn(C,"visibility","hidden"),b.getSystem().getByDom(C).toOptional().each(A=>{const _=Rr(t,C,A);pr(_).fold(r.clear,r.set)}),Ng(w,C,r),es(C,"visibility"),hd(t,b),requestAnimationFrame(()=>{Ng(w,C,r)})})}),Dt(F0(),b=>{const w=b.element;U1(w).each(C=>{Ng(w,C,r)})}),Dt(aB,(b,w)=>{const C=b.element;U1(C).each(A=>{const _=Id(St(A));Cn(A,"visibility","hidden");const R=zs(A,"height").map(j=>parseInt(j,10));es(A,"height"),es(A,"flex-basis");const B=A.dom.getBoundingClientRect().height;R.forall(j=>B>j)?(r.set(B),Ng(C,A,r)):R.each(j=>{uh(A,j)}),es(A,"visibility"),_.each(lc)})})],selectFirst:!1}},Bg="send-data-to-section",Kv="send-data-to-view",W1=(t,r,c)=>{const h=qn({}),b=R=>{const B=ln.getValue(R),H=as(B).getOr({}),j=h.get(),X=$s(j,H);h.set(X)},w=R=>{const B=h.get();ln.setValue(R,B)},C=qn(null),A=ue(t.tabs,R=>({value:R.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Br(c.shared.providers.translate(R.title))],view:()=>[g1.sketch(B=>({dom:{tag:"div",classes:["tox-form"]},components:ue(R.items,H=>Su(B,H,r,c)),formBehaviours:Kt([Fn.config({mode:"acyclic",useTabstopAt:le(b1)}),Eo("TabView.form.events",[tr(w),Rd(b)]),Dl.config({channels:Ba([{key:Bg,value:{onReceive:b}},{key:Kv,value:{onReceive:w}}])})])}))]})),_=GS(A);return Ts.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(R,B,H)=>{const j=ln.getValue(B);Hn(R,iB,{name:j,oldName:C.get()}),C.set(j)},tabs:A,components:[Ts.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[Ps.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Kt([ar.config({})])}),Ts.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:_.selectFirst,tabSectionBehaviours:Kt([Eo("tabpanel",_.extraEvents),Fn.config({mode:"acyclic"}),qo.config({find:R=>en(Ts.getViewItems(R))}),Gh(O.none(),R=>(R.getSystem().broadcastOn([Bg],{}),h.get()),(R,B)=>{h.set(B),R.getSystem().broadcastOn([Kv],{})})])})},lm=(t,r,c,h,b)=>{const w=_=>{const R=_.body;switch(R.type){case"tabpanel":return[W1(R,_.initialData,h)];default:return[zo(R,_.initialData,h)]}},C=(_,R)=>O.some({isTabPanel:()=>R.body.type==="tabpanel"}),A={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:ie(ie({},c.map(_=>({id:_})).getOr({})),b?A:{})},components:[],behaviours:Kt([bl.childAt(0),cn.config({channel:`${MC}-${r}`,updateState:C,renderComponents:w,initialData:t})])}},md=(t,r,c,h,b)=>lm(t,r,O.some(c),h,b),sf=(t,r,c)=>{const h=lm(t,r,O.none(),c,!1);return ti.parts.body(h)},Yv=t=>{const r={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[QB(O.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Kt([ar.config({}),Jn.config({})])})]}],behaviours:Kt([Fn.config({mode:"acyclic",useTabstopAt:le(b1)})])};return ti.parts.body(r)},j1=jp.deviceType.isTouch(),Xv=(t,r)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,r]}),rf=(t,r)=>ti.parts.close(Di.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":r.translate("Close")}},action:t,buttonBehaviours:Kt([ar.config({})])})),KS=()=>ti.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Jv=(t,r)=>ti.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Qf(`<p>${bA(r.translate(t))}</p>`)}]}]}),fa=t=>ti.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),cm=(t,r)=>[ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),ad.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:r})],YS=t=>{const r="tox-dialog",c=r+"-wrap",h=c+"__backdrop",b=r+"__disable-scroll";return ti.sketch({lazySink:t.lazySink,onEscape:w=>(t.onEscape(w),O.some(!0)),useTabstopAt:w=>!b1(w),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[r].concat(t.extraClasses),styles:ie({position:"relative"},t.extraStyles)},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:Qf(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:j1?[h,h+"--opaque"]:[h]}}]}},dragBlockClass:c,modalBehaviours:Kt([Jn.config({}),Eo("dialog-events",t.dialogEvents.concat([Bf(Pf(),(w,C)=>{fd.isBlocked(w)?Z():Fn.focusIn(w)}),Dt(Qy(),(w,C)=>{w.getSystem().broadcastOn([y1],{newFocus:C.event.newFocus})})])),Eo("scroll-lock",[tr(()=>{Qr(ur(),b)}),Rd(()=>{br(ur(),b)})]),...t.extraBehaviours]),eventOrder:ie({[sc()]:["dialog-events"],[Ku()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Hm()]:["alloy.base.behaviour","dialog-events","scroll-lock"]},t.eventOrder)})},XS=t=>Di.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},buttonBehaviours:Kt([ar.config({})]),components:[pu("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:r=>{ns(r,jh)}}),Qv=(t,r,c,h)=>{const b=w=>[Br(h.translate(w.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:ie({},c.map(w=>({id:w})).getOr({}))},components:[],behaviours:Kt([cn.config({channel:`${tf}-${r}`,initialData:t,renderComponents:b})])}},af=()=>({dom:Qf('<div class="tox-dialog__draghandle"></div>')}),ey=(t,r,c,h)=>ad.sketch({dom:Qf('<div class="tox-dialog__header"></div>'),components:[Qv(t,r,O.some(c),h),af(),XS(h)],containerBehaviours:Kt([Dg.config({mode:"mouse",blockerClass:"blocker",getTarget:b=>Ju(b,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),it=(t,r,c)=>{const h=ti.parts.title(Qv(t,r,O.none(),c)),b=ti.parts.draghandle(af()),w=ti.parts.close(XS(c)),C=[h].concat(t.draggable?[b]:[]).concat([w]);return ad.sketch({dom:Qf('<div class="tox-dialog__header"></div>'),components:C})},at=(t,r,c)=>it({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},r,c.shared.providers),Yt=(t,r,c,h)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${h.getOr(0)}px`,position:"absolute"}},behaviours:r,components:[{dom:Qf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),zt=(t,r,c)=>({onClose:()=>c.closeWindow(),onBlock:h=>{const b=Wr(t().element,".tox-dialog__header").map(w=>rr(w));ti.setBusy(t(),(w,C)=>Yt(h.message,C,r,b))},onUnblock:()=>{ti.setIdle(t())}}),Dn="tox-dialog--fullscreen",Lo="tox-dialog--width-lg",fr="tox-dialog--width-md",Ua=t=>{switch(t){case"large":return O.some(Lo);case"medium":return O.some(fr);default:return O.none()}},ea=(t,r)=>{const c=Tt.fromDom(r.element.dom);vi(c,Dn)||(au(c,[Lo,fr]),Ua(t).each(h=>Qr(c,h)))},um=(t,r)=>{const c=Tt.fromDom(t.element.dom),h=dw(c),b=Qe(h,w=>w===Lo||w===fr).or(Ua(r));B8(c,[Dn,...b.toArray()])},zc=(t,r,c)=>ya(YS(Ot(ie({},t),{firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[_C({}),...t.extraBehaviours],onEscape:h=>{ns(h,jh)},dialogEvents:r,eventOrder:{[$m()]:[cn.name(),Dl.name()],[Ku()]:["scroll-lock",cn.name(),"messages","dialog-events","alloy.base.behaviour"],[Hm()]:["alloy.base.behaviour","dialog-events","messages",cn.name(),"scroll-lock"]}}))),JS=(t,r={})=>{const c=h=>{const b=ue(h.items,w=>{const C=$t(r,w.name).getOr(qn(!1));return Ot(ie({},w),{storage:C})});return Ot(ie({},h),{items:b})};return ue(t,h=>h.type==="menu"?c(h):h)},ED=t=>Do(t,(r,c)=>c.type==="menu"?Do(c.items,(b,w)=>(b[w.name]=w.storage,b),r):r,{}),AD=(t,r)=>[ik(Pf(),cj),t(u1,(c,h,b,w)=>{Id(St(w.element)).fold(Z,Ik),r.onClose(),h.onClose()}),t(jh,(c,h,b,w)=>{h.onCancel(c),ns(w,u1)}),Dt(KT,(c,h)=>r.onUnblock()),Dt(GT,(c,h)=>r.onBlock(h.event))],f$=(t,r)=>{const c=(b,w)=>Dt(b,(C,A)=>{h(C,(_,R)=>{w(t(),_,A.event,C)})}),h=(b,w)=>{cn.getState(b).get().each(C=>{w(C,b)})};return[...AD(c,r),c(Jd,(b,w,C)=>{w.onAction(b,{name:C.name})})]},h$=(t,r,c)=>{const h=(w,C)=>Dt(w,(A,_)=>{b(A,(R,B)=>{C(t(),R,_.event,A)})}),b=(w,C)=>{cn.getState(w).get().each(A=>{C(A.internalDialog,w)})};return[...AD(h,r),h(av,(w,C)=>C.onSubmit(w)),h(gl,(w,C,A)=>{C.onChange(w,{name:A.name})}),h(Jd,(w,C,A,_)=>{const R=()=>_.getSystem().isConnected()?Fn.focusIn(_):void 0,B=X=>se(X,"disabled")||U(X,"aria-disabled").exists(oe=>oe==="true"),H=St(_.element),j=Id(H);C.onAction(w,{name:A.name,value:A.value}),Id(H).fold(R,X=>{B(X)||j.exists(oe=>ha(X,oe)&&B(oe))?R():c().toOptional().filter(oe=>!ha(oe.element,X)).each(R)})}),h(iB,(w,C,A)=>{C.onTabChange(w,{newTabName:A.name,oldTabName:A.oldName})}),Rd(w=>{const C=t();ln.setValue(w,C.getData())})]},$o=(t,r)=>UC(t,t.type,r),mt=(t,r,c)=>Qe(r,h=>h.name===c).bind(h=>h.memento.getOpt(t)),Sn=(t,r)=>{const c=r.map(A=>A.footerButtons).getOr([]),h=kn(c,A=>A.align==="start"),b=(A,_)=>ad.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${A}`]},components:ue(_,R=>R.memento.asSpec())}),w=b("start",h.pass),C=b("end",h.fail);return[w,C]},Qn=(t,r,c)=>{const h=(b,w)=>{const C=ue(w.buttons,_=>{const R=Es($o(_,c));return{name:_.name,align:_.align,memento:R}}),A=_=>mt(b,C,_);return O.some({lookupByName:A,footerButtons:C})};return{dom:Qf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Kt([cn.config({channel:`${EO}-${r}`,initialData:t,updateState:h,renderComponents:Sn})])}},Ir=(t,r,c)=>Qn(t,r,c),Ea=(t,r,c)=>ti.parts.footer(Qn(t,r,c)),Uc=(t,r)=>{if(t.getRoot().getSystem().isConnected()){const h=qo.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return g1.getField(h,r).orThunk(()=>t.getFooter().bind(C=>cn.getState(C).get()).bind(C=>C.lookupByName(r)))}else return O.none()},Pi=(t,r)=>{const c=t.getRoot();return cn.getState(c).get().map(h=>Us(Er("data",h.dataValidator,r))).getOr(r)},Wc=(t,r,c)=>{const h=oe=>{const Se=t.getRoot();Se.getSystem().isConnected()&&oe(Se)},X={getData:()=>{const oe=t.getRoot(),Se=oe.getSystem().isConnected()?t.getFormWrapper():oe,et=ln.getValue(Se),He=pt(c,Pe=>Pe.get());return ie(ie({},et),He)},setData:oe=>{h(Se=>{const et=X.getData(),He=$s(et,oe),Pe=Pi(t,He),Je=t.getFormWrapper();ln.setValue(Je,Pe),Xe(c,(It,At)=>{So(He,At)&&It.set(He[At])})})},setEnabled:(oe,Se)=>{Uc(t,oe).each(Se?Gn.enable:Gn.disable)},focus:oe=>{Uc(t,oe).each(Jn.focus)},block:oe=>{if(!v(oe))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");h(Se=>{Hn(Se,GT,{message:oe})})},unblock:()=>{h(oe=>{ns(oe,KT)})},showTab:oe=>{h(Se=>{const et=t.getBody();cn.getState(et).get().exists(Pe=>Pe.isTabPanel())&&qo.getCurrent(et).each(Pe=>{Ts.showTab(Pe,oe)})})},redial:oe=>{h(Se=>{const et=t.getId(),He=r(oe),Pe=JS(He.internalDialog.buttons,c);Se.getSystem().broadcastOn([`${v1}-${et}`],He),Se.getSystem().broadcastOn([`${tf}-${et}`],He.internalDialog),Se.getSystem().broadcastOn([`${MC}-${et}`],He.internalDialog),Se.getSystem().broadcastOn([`${EO}-${et}`],Ot(ie({},He.internalDialog),{buttons:Pe})),X.setData(He.initialData)})},close:()=>{h(oe=>{ns(oe,u1)})},toggleFullscreen:t.toggleFullscreen};return X},TD=(t,r,c)=>{const h=bn("dialog"),b=t.internalDialog,w=at(b.title,h,c),C=qn(b.size),A=Ua(C.get()).toArray(),_=(Pe,Je)=>(C.set(Je.internalDialog.size),ea(Je.internalDialog.size,Pe),O.some(Je)),R=sf({body:b.body,initialData:b.initialData},h,c),B=JS(b.buttons),H=ED(B),j=Bn(B.length!==0,Ea({buttons:B},h,c)),X=h$(()=>He,zt(()=>Se,c.shared.providers,r),c.shared.getSink),oe={id:h,header:w,body:R,footer:j,extraClasses:A,extraBehaviours:[cn.config({channel:`${v1}-${h}`,updateState:_,initialData:t})],extraStyles:{}},Se=zc(oe,X,c),et=(()=>{const Pe=()=>{const It=ti.getBody(Se);return qo.getCurrent(It).getOr(It)},Je=()=>{um(Se,C.get())};return{getId:G(h),getRoot:G(Se),getBody:()=>ti.getBody(Se),getFooter:()=>ti.getFooter(Se),getFormWrapper:Pe,toggleFullscreen:Je}})(),He=Wc(et,r.redial,H);return{dialog:Se,instanceApi:He}},m$=(t,r,c,h=!1,b)=>{const w=bn("dialog"),C=bn("dialog-label"),A=bn("dialog-content"),_=t.internalDialog,R=qn(_.size),B=Ua(R.get()).toArray(),H=(Ct,Zt)=>(R.set(Zt.internalDialog.size),ea(Zt.internalDialog.size,Ct),b(),O.some(Zt)),j=Es(ey({title:_.title,draggable:!0},w,C,c.shared.providers)),X=Es(md({body:_.body,initialData:_.initialData},w,A,c,h)),oe=JS(_.buttons),Se=ED(oe),et=Bn(oe.length!==0,Es(Ir({buttons:oe},w,c))),He=h$(()=>At,{onBlock:Ct=>{fd.block(Je,(Zt,Jt)=>{const Ao=j.getOpt(Je).map(hn=>rr(hn.element));return Yt(Ct.message,Jt,c.shared.providers,Ao)})},onUnblock:()=>{fd.unblock(Je)},onClose:()=>r.closeWindow()},c.shared.getSink),Je=ya({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline",...B],attributes:{role:"dialog","aria-labelledby":C}},eventOrder:{[$m()]:[cn.name(),Dl.name()],[sc()]:["execute-on-form"],[Ku()]:["reflecting","execute-on-form"]},behaviours:Kt([Fn.config({mode:"cyclic",onEscape:Ct=>(ns(Ct,u1),O.some(!0)),useTabstopAt:Ct=>!b1(Ct)&&(Os(Ct)!=="button"||$r(Ct,"disabled")!=="disabled"),firstTabstop:1}),cn.config({channel:`${v1}-${w}`,updateState:H,initialData:t}),Jn.config({}),Eo("execute-on-form",He.concat([Bf(Pf(),(Ct,Zt)=>{Fn.focusIn(Ct)}),Dt(Qy(),(Ct,Zt)=>{Ct.getSystem().broadcastOn([y1],{newFocus:Zt.event.newFocus})})])),fd.config({getRoot:()=>O.some(Je)}),vo.config({}),_C({})]),components:[j.asSpec(),X.asSpec(),...et.map(Ct=>Ct.asSpec()).toArray()]}),It=()=>{um(Je,R.get())},At=Wc({getId:G(w),getRoot:G(Je),getFooter:()=>et.map(Ct=>Ct.get(Je)),getBody:()=>X.get(Je),getFormWrapper:()=>{const Ct=X.get(Je);return qo.getCurrent(Ct).getOr(Ct)},toggleFullscreen:It},r.redial,Se);return{dialog:Je,instanceApi:At}};var QS=tinymce.util.Tools.resolve("tinymce.util.URI");const hte=t=>{const r=C=>{t.getSystem().isConnected()&&C(t)};return{block:C=>{if(!v(C))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");r(A=>{Hn(A,GT,{message:C})})},unblock:()=>{r(C=>{ns(C,KT)})},close:()=>{r(C=>{ns(C,u1)})},sendMessage:C=>{r(A=>{A.getSystem().broadcastOn([AO],C)})}}},kae=["insertContent","setContent","execCommand","close","block","unblock"],mte=t=>x(t)&&kae.indexOf(t.mceAction)!==-1,Eae=t=>!mte(t)&&x(t)&&So(t,"mceAction"),Aae=(t,r,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const h=N(c.ui)?c.ui:!1;t.execCommand(c.cmd,h,c.value);break;case"close":r.close();break;case"block":r.block(c.message);break;case"unblock":r.unblock();break}},Tae=(t,r,c,h)=>{const b=bn("dialog"),w=at(t.title,b,h),C=Yv(t),A=t.buttons.bind(Je=>Je.length===0?O.none():O.some(Ea({buttons:Je},b,h))),_=f$(()=>Pe,zt(()=>He,h.shared.providers,r)),R=ie(ie({},t.height.fold(()=>({}),Je=>({height:Je+"px","max-height":Je+"px"}))),t.width.fold(()=>({}),Je=>({width:Je+"px","max-width":Je+"px"}))),B=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],H=new QS(t.url,{base_uri:new QS(window.location.href)}),j=`${H.protocol}://${H.host}${H.port?":"+H.port:""}`,X=xp(),oe=(Je,It)=>O.some(It),Se=[cn.config({channel:`${v1}-${b}`,updateState:oe,initialData:t}),Eo("messages",[tr(()=>{const Je=Qa(Tt.fromDom(window),"message",It=>{if(H.isSameOrigin(new QS(It.raw.origin))){const At=It.raw.data;mte(At)?Aae(c,Pe,At):Eae(At)&&t.onMessage(Pe,At)}});X.set(Je)}),Rd(X.clear)]),Dl.config({channels:{[AO]:{onReceive:(Je,It)=>{Wr(Je.element,"iframe").each(At=>{const Ct=At.dom.contentWindow;Y(Ct)&&Ct.postMessage(It,j)})}}}})],He=zc({id:b,header:w,body:C,footer:A,extraClasses:B,extraBehaviours:Se,extraStyles:R},_,h),Pe=hte(He);return{dialog:He,instanceApi:Pe}},Oae=t=>{const r=t.shared;return{open:(h,b)=>{const w=()=>{ti.hide(R),b()},C=Es(UC({name:"close-alert",text:"OK",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"cancel",t)),A=KS(),_=rf(w,r.providers),R=ya(YS({lazySink:()=>r.getSink(),header:Xv(A,_),body:Jv(h,r.providers),footer:O.some(fa(cm([],[C.asSpec()]))),onEscape:w,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Dt(jh,w)],eventOrder:{}}));ti.show(R);const B=C.get(R);Jn.focus(B)}}},_ae=t=>{const r=t.shared;return{open:(h,b)=>{const w=j=>{ti.hide(B),b(j)},C=Es(UC({name:"yes",text:"Yes",primary:!0,buttonType:O.some("primary"),align:"end",enabled:!0,icon:O.none()},"submit",t)),A=UC({name:"no",text:"No",primary:!1,buttonType:O.some("secondary"),align:"end",enabled:!0,icon:O.none()},"cancel",t),_=KS(),R=rf(()=>w(!1),r.providers),B=ya(YS({lazySink:()=>r.getSink(),header:Xv(_,R),body:Jv(h,r.providers),footer:O.some(fa(cm([],[A,C.asSpec()]))),onEscape:()=>w(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Dt(jh,()=>w(!1)),Dt(av,()=>w(!0))],eventOrder:{}}));ti.show(B);const H=C.get(B);Jn.focus(H)}}},gte=(t,r)=>Us(Er("data",r,t)),pte=t=>ov(t,".tox-alert-dialog")||ov(t,".tox-confirm-dialog"),Dae=(t,r,c)=>r&&c?[]:[Fr.config({contextual:{lazyContext:()=>O.some(Sr(Tt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:h=>Wh(t,h.element).map(w=>({bounds:c1(w),optScrollEnv:O.some({currentScrollTop:w.element.dom.scrollTop,scrollElmTop:Ka(w.element).top})})).getOrThunk(()=>({bounds:Zi(),optScrollEnv:O.none()}))})],Mae=t=>{const r=t.editor,c=Vb(r),h=Oae(t.backstages.dialog),b=_ae(t.backstages.dialog),w=(oe,Se,et)=>{if(!I(Se)){if(Se.inline==="toolbar")return R(oe,t.backstages.popup.shared.anchors.inlineDialog(),et,Se);if(Se.inline==="bottom")return B(oe,t.backstages.popup.shared.anchors.inlineBottomDialog(),et,Se);if(Se.inline==="cursor")return R(oe,t.backstages.popup.shared.anchors.cursor(),et,Se)}return _(oe,et)},C=(oe,Se)=>A(oe,Se),A=(oe,Se)=>{const et=He=>{const Pe=Tae(He,{closeWindow:()=>{ti.hide(Pe.dialog),Se(Pe.instanceApi)}},r,t.backstages.dialog);return ti.show(Pe.dialog),Pe.instanceApi};return ko.openUrl(et,oe)},_=(oe,Se)=>{const et=(He,Pe,Je)=>{const It=Pe,Ct=TD({dataValidator:Je,initialData:It,internalDialog:He},{redial:ko.redial,closeWindow:()=>{ti.hide(Ct.dialog),Se(Ct.instanceApi)}},t.backstages.dialog);return ti.show(Ct.dialog),Ct.instanceApi.setData(It),Ct.instanceApi};return ko.open(et,oe)},R=(oe,Se,et,He)=>{const Pe=(Je,It,At)=>{const Ct=gte(It,At),Zt=or(),Jt=t.backstages.popup.shared.header.isPositionedAtTop(),Ao={dataValidator:At,initialData:Ct,internalDialog:Je},hn=()=>Zt.on(zn=>{gr.reposition(zn),(!c||!Jt)&&Fr.refresh(zn)}),ro=m$(Ao,{redial:ko.redial,closeWindow:()=>{Zt.on(gr.hide),r.off("ResizeEditor",hn),Zt.clear(),et(ro.instanceApi)}},t.backstages.popup,He.ariaAttrs,hn),eo=ya(gr.sketch(Ot(ie({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:He.persistent?{event:"doNotDismissYet"}:{}},Jt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Kt([Eo("window-manager-inline-events",[Dt(Vm(),(zn,Jo)=>{ns(ro.dialog,jh)})]),...Dae(r,c,Jt)]),isExtraPart:(zn,Jo)=>pte(Jo)})));Zt.set(eo);const Cs=()=>{const zn=r.inline?ur():Tt.fromDom(r.getContainer()),Jo=Sr(zn);return O.some(Jo)};return gr.showWithinBounds(eo,Pc(ro.dialog),{anchor:Se},Cs),(!c||!Jt)&&(Fr.refresh(eo),r.on("ResizeEditor",hn)),ro.instanceApi.setData(Ct),Fn.focusIn(ro.dialog),ro.instanceApi};return ko.open(Pe,oe)},B=(oe,Se,et,He)=>{const Pe=(Je,It,At)=>{const Ct=gte(It,At),Zt=or(),Jt=t.backstages.popup.shared.header.isPositionedAtTop(),Ao={dataValidator:At,initialData:Ct,internalDialog:Je},hn=()=>Zt.on(zn=>{gr.reposition(zn),Fr.refresh(zn)}),ro=m$(Ao,{redial:ko.redial,closeWindow:()=>{Zt.on(gr.hide),r.off("ResizeEditor ScrollWindow ElementScroll",hn),Zt.clear(),et(ro.instanceApi)}},t.backstages.popup,He.ariaAttrs,hn),eo=ya(gr.sketch(Ot(ie({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:He.persistent?{event:"doNotDismissYet"}:{}},Jt?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Kt([Eo("window-manager-inline-events",[Dt(Vm(),(zn,Jo)=>{ns(ro.dialog,jh)})]),Fr.config({contextual:{lazyContext:()=>O.some(Sr(Tt.fromDom(r.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:zn=>Wh(r,zn.element).map(Qt=>({bounds:c1(Qt),optScrollEnv:O.some({currentScrollTop:Qt.element.dom.scrollTop,scrollElmTop:Ka(Qt.element).top})})).getOrThunk(()=>({bounds:Zi(),optScrollEnv:O.none()}))})]),isExtraPart:(zn,Jo)=>pte(Jo)})));Zt.set(eo);const Cs=()=>t.backstages.popup.shared.getSink().toOptional().bind(zn=>{const Jo=Wh(r,zn.element),Qt=15,wn=Jo.map(Un=>c1(Un)).getOr(Zi()),io=Sr(Tt.fromDom(r.getContentAreaContainer())),fo=x0(io,wn);return O.some(Kr(fo.x,fo.y,fo.width,fo.height-Qt))});return gr.showWithinBounds(eo,Pc(ro.dialog),{anchor:Se},Cs),Fr.refresh(eo),r.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",hn),ro.instanceApi.setData(Ct),Fn.focusIn(ro.dialog),ro.instanceApi};return ko.open(Pe,oe)};return{open:w,openUrl:C,alert:(oe,Se)=>{h.open(oe,Se)},close:oe=>{oe.close()},confirm:(oe,Se)=>{b.open(oe,Se)}}},Pae=t=>{qP(t),Lz(t),qK(t)};var Rae=()=>{Ef.add("silver",t=>{Pae(t);let r=()=>Zi();const{dialogs:c,popups:h,renderUI:b}=jY(t,{getPopupSinkBounds:()=>r()}),w=()=>{const _=b();return Wh(t,h.getMothership().element).each(B=>{r=()=>c1(B)}),_};OU.register(t,h.backstage.shared);const C=Mae({editor:t,backstages:{popup:h.backstage,dialog:c.backstage}}),A=()=>SA(t,{backstage:h.backstage},h.getMothership());return{renderUI:w,getWindowManagerImpl:G(C),getNotificationManagerImpl:A}})};Rae()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(ne,ge,O)=>{const Ye=ge==="UL"?"InsertUnorderedList":"InsertOrderedList";ne.execCommand(Ye,!1,O===!1?null:{"list-style-type":O})},i=ne=>{ne.addCommand("ApplyUnorderedListStyle",(ge,O)=>{o(ne,"UL",O["list-style-type"])}),ne.addCommand("ApplyOrderedListStyle",(ge,O)=>{o(ne,"OL",O["list-style-type"])})},l=ne=>ge=>ge.options.get(ne),d=ne=>{const ge=ne.options.register;ge("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),ge("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},m=l("advlist_number_styles"),p=l("advlist_bullet_styles"),v=ne=>ne==null,x=ne=>!v(ne);var k=tinymce.util.Tools.resolve("tinymce.util.Tools");class T{constructor(ge,O){this.tag=ge,this.value=O}static some(ge){return new T(!0,ge)}static none(){return T.singletonNone}fold(ge,O){return this.tag?O(this.value):ge()}isSome(){return this.tag}isNone(){return!this.tag}map(ge){return this.tag?T.some(ge(this.value)):T.none()}bind(ge){return this.tag?ge(this.value):T.none()}exists(ge){return this.tag&&ge(this.value)}forall(ge){return!this.tag||ge(this.value)}filter(ge){return!this.tag||ge(this.value)?this:T.none()}getOr(ge){return this.tag?this.value:ge}or(ge){return this.tag?this:ge}getOrThunk(ge){return this.tag?this.value:ge()}orThunk(ge){return this.tag?this:ge()}getOrDie(ge){if(this.tag)return this.value;throw new Error(ge!=null?ge:"Called getOrDie on None")}static from(ge){return x(ge)?T.some(ge):T.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ge){this.tag&&ge(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}T.singletonNone=new T(!1);const M=(ne,ge,O)=>{for(let Ye=0,me=ne.length;Ye<me;Ye++){const lt=ne[Ye];if(ge(lt,Ye))return T.some(lt);if(O(lt,Ye))break}return T.none()},N=ne=>/\btox\-/.test(ne.className),I=(ne,ge)=>ne.dom.isChildOf(ge,ne.getBody()),z=ne=>ge=>x(ge)&&ne.test(ge.nodeName),Y=z(/^(OL|UL|DL)$/),J=z(/^(TH|TD)$/),q=(ne,ge,O)=>M(ge,Ye=>Y(Ye)&&!N(Ye),J).exists(Ye=>Ye.nodeName===O&&I(ne,Ye)),ae=ne=>{const ge=ne.dom.getParent(ne.selection.getNode(),"ol,ul"),O=ne.dom.getStyle(ge,"listStyleType");return T.from(O)},Z=(ne,ge)=>ge!==null&&!ne.dom.isEditable(ge),ce=(ne,ge)=>{const O=ne.dom.getParent(ge,"ol,ul,dl");return Z(ne,O)&&ne.selection.isEditable()},_e=(ne,ge)=>{const O=ne.selection.getNode();return ge({parents:ne.dom.getParents(O),element:O}),ne.on("NodeChange",ge),()=>ne.off("NodeChange",ge)},De=ne=>ne.replace(/\-/g," ").replace(/\b\w/g,ge=>ge.toUpperCase()),G=ne=>v(ne)||ne==="default"?"":ne,qe=(ne,ge)=>O=>{const Ye=(lt,qt)=>{const Be=lt.selection.getStart(!0);O.setActive(q(lt,qt,ge)),O.setEnabled(!ce(lt,Be)&&lt.selection.isEditable())};return _e(ne,lt=>Ye(ne,lt.parents))},Re=(ne,ge,O,Ye,me,lt)=>{ne.ui.registry.addSplitButton(ge,{tooltip:O,icon:me==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:qt=>{const Be=k.map(lt,Ue=>{const yt=me==="OL"?"num":"bull",Ie=Ue==="disc"||Ue==="decimal"?"default":Ue,wt=G(Ue),ue=De(Ue);return{type:"choiceitem",value:wt,icon:"list-"+yt+"-"+Ie,text:ue}});qt(Be)},onAction:()=>ne.execCommand(Ye),onItemAction:(qt,Be)=>{o(ne,me,Be)},select:qt=>ae(ne).map(Ue=>qt===Ue).getOr(!1),onSetup:qe(ne,me)})},$e=(ne,ge,O,Ye,me,lt)=>{ne.ui.registry.addToggleButton(ge,{active:!1,tooltip:O,icon:me==="OL"?"ordered-list":"unordered-list",onSetup:qe(ne,me),onAction:()=>ne.queryCommandState(Ye)||lt===""?ne.execCommand(Ye):o(ne,me,lt)})},le=(ne,ge,O,Ye,me,lt)=>{lt.length>1?Re(ne,ge,O,Ye,me,lt):$e(ne,ge,O,Ye,me,G(lt[0]))},Ee=ne=>{le(ne,"numlist","Numbered list","InsertOrderedList","OL",m(ne)),le(ne,"bullist","Bullet list","InsertUnorderedList","UL",p(ne))};var ft=()=>{u.add("advlist",ne=>{ne.hasPlugin("lists")&&(d(ne),Ee(ne),i(ne))})};ft()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");const l=ne=>ge=>ge.options.get(ne),d=ne=>{const ge=ne.options.register;ge("allow_html_in_named_anchor",{processor:"boolean",default:!1})},m=l("allow_html_in_named_anchor"),p="a:not([href])",v=ne=>!ne,x=ne=>ne.getAttribute("id")||ne.getAttribute("name")||"",k=ne=>ne.nodeName.toLowerCase()==="a",T=ne=>k(ne)&&!ne.getAttribute("href")&&x(ne)!=="",M=ne=>T(ne)&&!ne.firstChild,N=ne=>{const ge=ne.dom;o(ge).walk(ne.selection.getRng(),O=>{i.each(O,Ye=>{M(Ye)&&ge.remove(Ye,!1)})})},I=ne=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(ne),z=ne=>ne.dom.getParent(ne.selection.getStart(),p),Y=ne=>{const ge=z(ne);return ge?x(ge):""},J=(ne,ge)=>{ne.undoManager.transact(()=>{m(ne)||ne.selection.collapse(!0),ne.selection.isCollapsed()?ne.insertContent(ne.dom.createHTML("a",{id:ge})):(N(ne),ne.formatter.remove("namedAnchor",void 0,void 0,!0),ne.formatter.apply("namedAnchor",{value:ge}),ne.addVisual())})},q=(ne,ge,O)=>{O.removeAttribute("name"),O.id=ge,ne.addVisual(),ne.undoManager.add()},ae=(ne,ge)=>{const O=z(ne);O?q(ne,ge,O):J(ne,ge),ne.focus()},Z=(ne,ge)=>I(ge)?(ae(ne,ge),!0):(ne.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),ce=ne=>{const ge=Y(ne);ne.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:ge},onSubmit:O=>{Z(ne,O.getData().id)&&O.close()}})},_e=ne=>{ne.addCommand("mceAnchor",()=>{ce(ne)})},De=ne=>v(ne.attr("href"))&&!v(ne.attr("id")||ne.attr("name")),G=ne=>De(ne)&&!ne.firstChild,qe=ne=>ge=>{for(let O=0;O<ge.length;O++){const Ye=ge[O];G(Ye)&&Ye.attr("contenteditable",ne)}},Re=ne=>{ne.on("PreInit",()=>{ne.parser.addNodeFilter("a",qe("false")),ne.serializer.addNodeFilter("a",qe(null))})},$e=ne=>{ne.formatter.register("namedAnchor",{inline:"a",selector:p,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(ge,O,Ye)=>T(ge)})},le=ne=>ge=>{const O=()=>{ge.setEnabled(ne.selection.isEditable())};return ne.on("NodeChange",O),O(),()=>{ne.off("NodeChange",O)}},Ee=ne=>{const ge=()=>ne.execCommand("mceAnchor");ne.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:ge,onSetup:O=>{const Ye=ne.selection.selectorChangedWithUnbind("a:not([href])",O.setActive).unbind,me=le(ne)(O);return()=>{Ye(),me()}}}),ne.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:ge,onSetup:le(ne)})};var ft=()=>{u.add("anchor",ne=>{d(ne),Re(ne),_e(ne),Ee(ne),ne.on("PreInit",()=>{$e(ne)})})};ft()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,i=Ie=>wt=>wt.options.get(Ie),l=Ie=>{const wt=Ie.options.register;wt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+o().source+"$","i")}),wt("link_default_target",{processor:"string"}),wt("link_default_protocol",{processor:"string",default:"https"})},d=i("autolink_pattern"),m=i("link_default_target"),p=i("link_default_protocol"),v=i("allow_unsafe_link_target"),x=(Ie,wt,ue)=>{var je;return ue(Ie,wt.prototype)?!0:((je=Ie.constructor)===null||je===void 0?void 0:je.name)===wt.name},k=Ie=>{const wt=typeof Ie;return Ie===null?"null":wt==="object"&&Array.isArray(Ie)?"array":wt==="object"&&x(Ie,String,(ue,je)=>je.isPrototypeOf(ue))?"string":wt},T=Ie=>wt=>k(wt)===Ie,M=Ie=>wt=>Ie===wt,N=T("string"),I=M(void 0),z=Ie=>Ie==null,Y=Ie=>!z(Ie),J=Ie=>wt=>!Ie(wt),q=Object.hasOwnProperty,ae=(Ie,wt)=>q.call(Ie,wt),Z=(Ie,wt,ue)=>Ie.length>=wt.length&&Ie.substr(ue,ue+wt.length)===wt,ce=(Ie,wt,ue=0,je)=>{const V=Ie.indexOf(wt,ue);return V!==-1?I(je)?!0:V+wt.length<=je:!1},_e=(Ie,wt)=>Z(Ie,wt,0),De="\uFEFF",G=Ie=>Ie===De,qe=Ie=>Ie.replace(/\uFEFF/g,"");var Re=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const $e=Ie=>Ie.nodeType===3,le=Ie=>Ie.nodeType===1,Ee=Ie=>/^[(\[{ \u00a0]$/.test(Ie),ft=Ie=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Ie),ne=Ie=>/[?!,.;:]/.test(Ie),ge=(Ie,wt,ue)=>{for(let je=wt-1;je>=0;je--){const V=Ie.charAt(je);if(!G(V)&&ue(V))return je}return-1},O=(Ie,wt)=>{let ue=Ie,je=wt;for(;le(ue)&&ue.childNodes[je];)ue=ue.childNodes[je],je=$e(ue)?ue.data.length:ue.childNodes.length;return{container:ue,offset:je}},Ye=(Ie,wt)=>{var ue;const je=Ie.schema.getVoidElements(),V=d(Ie),{dom:kn,selection:un}=Ie;if(kn.getParent(un.getNode(),"a[href]")!==null)return null;const oo=un.getRng(),Do=Re(kn,ve=>kn.isBlock(ve)||ae(je,ve.nodeName.toLowerCase())||kn.getContentEditable(ve)==="false"),{container:Ss,offset:Qe}=O(oo.endContainer,oo.endOffset),Bt=(ue=kn.getParent(Ss,kn.isBlock))!==null&&ue!==void 0?ue:kn.getRoot(),nt=Do.backwards(Ss,Qe+wt,(ve,We)=>{const st=ve.data,en=ge(st,We,J(Ee));return en===-1||ne(st[en])?en:en+1},Bt);if(!nt)return null;let de=nt.container;const xe=Do.backwards(nt.container,nt.offset,(ve,We)=>{de=ve;const st=ge(ve.data,We,Ee);return st===-1?st:st+1},Bt),Fe=kn.createRng();xe?Fe.setStart(xe.container,xe.offset):Fe.setStart(de,0),Fe.setEnd(nt.container,nt.offset);const kt=qe(Fe.toString()).match(V);if(kt){let ve=kt[0];return _e(ve,"www.")?ve=p(Ie)+"://"+ve:ce(ve,"@")&&!ft(ve)&&(ve="mailto:"+ve),{rng:Fe,url:ve}}else return null},me=(Ie,wt)=>{const{dom:ue,selection:je}=Ie,{rng:V,url:kn}=wt,un=je.getBookmark();je.setRng(V);const oo="createlink",Do={command:oo,ui:!1,value:kn};if(!Ie.dispatch("BeforeExecCommand",Do).isDefaultPrevented()){Ie.getDoc().execCommand(oo,!1,kn),Ie.dispatch("ExecCommand",Do);const Qe=m(Ie);if(N(Qe)){const Bt=je.getNode();ue.setAttrib(Bt,"target",Qe),Qe==="_blank"&&!v(Ie)&&ue.setAttrib(Bt,"rel","noopener")}}je.moveToBookmark(un),Ie.nodeChanged()},lt=Ie=>{const wt=Ye(Ie,-1);Y(wt)&&me(Ie,wt)},qt=lt,Be=Ie=>{const wt=Ye(Ie,0);Y(wt)&&me(Ie,wt)},Ue=Ie=>{Ie.on("keydown",wt=>{wt.keyCode===13&&!wt.isDefaultPrevented()&&Be(Ie)}),Ie.on("keyup",wt=>{wt.keyCode===32?lt(Ie):(wt.keyCode===48&&wt.shiftKey||wt.keyCode===221)&&qt(Ie)})};var yt=()=>{u.add("autolink",Ie=>{l(Ie),Ue(Ie)})};yt()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(me,lt,qt)=>{var Be;return qt(me,lt.prototype)?!0:((Be=me.constructor)===null||Be===void 0?void 0:Be.name)===lt.name},i=me=>{const lt=typeof me;return me===null?"null":lt==="object"&&Array.isArray(me)?"array":lt==="object"&&o(me,String,(qt,Be)=>Be.isPrototypeOf(qt))?"string":lt},l=me=>lt=>i(lt)===me,d=me=>lt=>me===lt,m=l("string"),p=d(void 0);var v=tinymce.util.Tools.resolve("tinymce.util.Delay"),x=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),k=tinymce.util.Tools.resolve("tinymce.util.Tools");const T=me=>me.dispatch("RestoreDraft"),M=me=>me.dispatch("StoreDraft"),N=me=>me.dispatch("RemoveDraft"),I=me=>{const lt={s:1e3,m:6e4},qt=/^(\d+)([ms]?)$/.exec(me);return(qt&&qt[2]?lt[qt[2]]:1)*parseInt(me,10)},z=me=>lt=>lt.options.get(me),Y=me=>{const lt=me.options.register,qt=Be=>{const Ue=m(Be);return Ue?{value:I(Be),valid:Ue}:{valid:!1,message:"Must be a string."}};lt("autosave_ask_before_unload",{processor:"boolean",default:!0}),lt("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),lt("autosave_restore_when_empty",{processor:"boolean",default:!1}),lt("autosave_interval",{processor:qt,default:"30s"}),lt("autosave_retention",{processor:qt,default:"20m"})},J=z("autosave_ask_before_unload"),q=z("autosave_restore_when_empty"),ae=z("autosave_interval"),Z=z("autosave_retention"),ce=me=>{const lt=document.location;return me.options.get("autosave_prefix").replace(/{path}/g,lt.pathname).replace(/{query}/g,lt.search).replace(/{hash}/g,lt.hash).replace(/{id}/g,me.id)},_e=(me,lt)=>{if(p(lt))return me.dom.isEmpty(me.getBody());{const qt=k.trim(lt);if(qt==="")return!0;{const Be=new DOMParser().parseFromString(qt,"text/html");return me.dom.isEmpty(Be)}}},De=me=>{var lt;const qt=parseInt((lt=x.getItem(ce(me)+"time"))!==null&&lt!==void 0?lt:"0",10)||0;return new Date().getTime()-qt>Z(me)?(G(me,!1),!1):!0},G=(me,lt)=>{const qt=ce(me);x.removeItem(qt+"draft"),x.removeItem(qt+"time"),lt!==!1&&N(me)},qe=me=>{const lt=ce(me);!_e(me)&&me.isDirty()&&(x.setItem(lt+"draft",me.getContent({format:"raw",no_events:!0})),x.setItem(lt+"time",new Date().getTime().toString()),M(me))},Re=me=>{var lt;const qt=ce(me);De(me)&&(me.setContent((lt=x.getItem(qt+"draft"))!==null&&lt!==void 0?lt:"",{format:"raw"}),T(me))},$e=me=>{const lt=ae(me);v.setEditorInterval(me,()=>{qe(me)},lt)},le=me=>{me.undoManager.transact(()=>{Re(me),G(me)}),me.focus()},Ee=me=>({hasDraft:()=>De(me),storeDraft:()=>qe(me),restoreDraft:()=>Re(me),removeDraft:lt=>G(me,lt),isEmpty:lt=>_e(me,lt)});var ft=tinymce.util.Tools.resolve("tinymce.EditorManager");const ne=me=>{me.editorManager.on("BeforeUnload",lt=>{let qt;k.each(ft.get(),Be=>{Be.plugins.autosave&&Be.plugins.autosave.storeDraft(),!qt&&Be.isDirty()&&J(Be)&&(qt=Be.translate("You have unsaved changes are you sure you want to navigate away?"))}),qt&&(lt.preventDefault(),lt.returnValue=qt)})},ge=me=>lt=>{lt.setEnabled(De(me));const qt=()=>lt.setEnabled(De(me));return me.on("StoreDraft RestoreDraft RemoveDraft",qt),()=>me.off("StoreDraft RestoreDraft RemoveDraft",qt)},O=me=>{$e(me);const lt=()=>{le(me)};me.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:lt,onSetup:ge(me)}),me.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:lt,onSetup:ge(me)})};var Ye=()=>{u.add("autosave",me=>(Y(me),ne(me),O(me),me.on("init",()=>{q(me)&&me.dom.isEmpty(me.getBody())&&Re(me)}),Ee(me)))};Ye()})();(function(){const u=Z=>{let ce=Z;return{get:()=>ce,set:G=>{ce=G}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=Z=>()=>Z;var l=tinymce.util.Tools.resolve("tinymce.Env");const d=Z=>Z.dispatch("ResizeEditor"),m=Z=>ce=>ce.options.get(Z),p=Z=>{const ce=Z.options.register;ce("autoresize_overflow_padding",{processor:"number",default:1}),ce("autoresize_bottom_margin",{processor:"number",default:50})},v=m("min_height"),x=m("max_height"),k=m("autoresize_overflow_padding"),T=m("autoresize_bottom_margin"),M=Z=>Z.plugins.fullscreen&&Z.plugins.fullscreen.isFullscreen(),N=(Z,ce)=>{const _e=Z.getBody();_e&&(_e.style.overflowY=ce?"":"hidden",ce||(_e.scrollTop=0))},I=(Z,ce,_e,De)=>{var G;const qe=parseInt((G=Z.getStyle(ce,_e,De))!==null&&G!==void 0?G:"",10);return isNaN(qe)?0:qe},z=Z=>{if((Z==null?void 0:Z.type.toLowerCase())==="setcontent"){const ce=Z;return ce.selection===!0||ce.paste===!0}else return!1},Y=(Z,ce,_e,De)=>{var G;const qe=Z.dom,Re=Z.getDoc();if(!Re)return;if(M(Z)){N(Z,!0);return}const $e=Re.documentElement,le=De?De():k(Z),Ee=(G=v(Z))!==null&&G!==void 0?G:Z.getElement().offsetHeight;let ft=Ee;const ne=I(qe,$e,"margin-top",!0),ge=I(qe,$e,"margin-bottom",!0);let O=$e.offsetHeight+ne+ge+le;O<0&&(O=0);const Ye=Z.getContainer().offsetHeight,me=Z.getContentAreaContainer().offsetHeight,lt=Ye-me;O+lt>Ee&&(ft=O+lt);const qt=x(Z);if(qt&&ft>qt?(ft=qt,N(Z,!0)):N(Z,!1),ft!==ce.get()){const Be=ft-ce.get();if(qe.setStyle(Z.getContainer(),"height",ft+"px"),ce.set(ft),d(Z),l.browser.isSafari()&&(l.os.isMacOS()||l.os.isiOS())){const Ue=Z.getWin();Ue.scrollTo(Ue.pageXOffset,Ue.pageYOffset)}Z.hasFocus()&&z(_e)&&Z.selection.scrollIntoView(),(l.browser.isSafari()||l.browser.isChromium())&&Be<0&&Y(Z,ce,_e,De)}},J=(Z,ce)=>{let _e=()=>T(Z),De,G;Z.on("init",qe=>{De=0;const Re=k(Z),$e=Z.dom;$e.setStyles(Z.getDoc().documentElement,{height:"auto"}),l.browser.isEdge()||l.browser.isIE()?$e.setStyles(Z.getBody(),{paddingLeft:Re,paddingRight:Re,"min-height":0}):$e.setStyles(Z.getBody(),{paddingLeft:Re,paddingRight:Re}),Y(Z,ce,qe,_e),De+=1}),Z.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",qe=>{if(De===1)G=Z.getContainer().offsetHeight,Y(Z,ce,qe,_e),De+=1;else if(De===2){const Re=G<Z.getContainer().offsetHeight;if(Re){const $e=Z.dom,le=Z.getDoc();$e.setStyles(le.documentElement,{"min-height":0}),$e.setStyles(Z.getBody(),{"min-height":"inherit"})}_e=Re?i(0):_e,De+=1}else Y(Z,ce,qe,_e)})},q=(Z,ce)=>{Z.addCommand("mceAutoResize",()=>{Y(Z,ce)})};var ae=()=>{o.add("autoresize",Z=>{if(p(Z),Z.options.isSet("resize")||Z.options.set("resize",!1),!Z.inline){const ce=u(0);q(Z,ce),J(Z,ce)}})};ae()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(v,x)=>{v.focus(),v.undoManager.transact(()=>{v.setContent(x)}),v.selection.setCursorLocation(),v.nodeChanged()},i=v=>v.getContent({source_view:!0}),l=v=>{const x=i(v);v.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:x},onSubmit:k=>{o(v,k.getData().code),k.close()}})},d=v=>{v.addCommand("mceCodeEditor",()=>{l(v)})},m=v=>{const x=()=>v.execCommand("mceCodeEditor");v.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:x}),v.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:x})};var p=()=>{u.add("code",v=>(d(v),m(v),{}))};p()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=O=>O==null,i=O=>!o(O),l=()=>{},d=O=>()=>O;class m{constructor(Ye,me){this.tag=Ye,this.value=me}static some(Ye){return new m(!0,Ye)}static none(){return m.singletonNone}fold(Ye,me){return this.tag?me(this.value):Ye()}isSome(){return this.tag}isNone(){return!this.tag}map(Ye){return this.tag?m.some(Ye(this.value)):m.none()}bind(Ye){return this.tag?Ye(this.value):m.none()}exists(Ye){return this.tag&&Ye(this.value)}forall(Ye){return!this.tag||Ye(this.value)}filter(Ye){return!this.tag||Ye(this.value)?this:m.none()}getOr(Ye){return this.tag?this.value:Ye}or(Ye){return this.tag?this:Ye}getOrThunk(Ye){return this.tag?this.value:Ye()}orThunk(Ye){return this.tag?this:Ye()}getOrDie(Ye){if(this.tag)return this.value;throw new Error(Ye!=null?Ye:"Called getOrDie on None")}static from(Ye){return i(Ye)?m.some(Ye):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ye){this.tag&&Ye(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}m.singletonNone=new m(!1);const p=(O,Ye)=>Ye>=0&&Ye<O.length?m.some(O[Ye]):m.none(),v=O=>p(O,0);var x=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const k=typeof window!="undefined"?window:Function("return this;")(),T=function(O,Ye,me){const lt=window.Prism;window.Prism={manual:!0};var qt=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{},Be=function(Ue){var yt=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,Ie=0,wt={},ue={manual:Ue.Prism&&Ue.Prism.manual,disableWorkerMessageHandler:Ue.Prism&&Ue.Prism.disableWorkerMessageHandler,util:{encode:function de(xe){return xe instanceof je?new je(xe.type,de(xe.content),xe.alias):Array.isArray(xe)?xe.map(de):xe.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(de){return Object.prototype.toString.call(de).slice(8,-1)},objId:function(de){return de.__id||Object.defineProperty(de,"__id",{value:++Ie}),de.__id},clone:function de(xe,Fe){Fe=Fe||{};var Ne,kt;switch(ue.util.type(xe)){case"Object":if(kt=ue.util.objId(xe),Fe[kt])return Fe[kt];Ne={},Fe[kt]=Ne;for(var ve in xe)xe.hasOwnProperty(ve)&&(Ne[ve]=de(xe[ve],Fe));return Ne;case"Array":return kt=ue.util.objId(xe),Fe[kt]?Fe[kt]:(Ne=[],Fe[kt]=Ne,xe.forEach(function(We,st){Ne[st]=de(We,Fe)}),Ne);default:return xe}},getLanguage:function(de){for(;de;){var xe=yt.exec(de.className);if(xe)return xe[1].toLowerCase();de=de.parentElement}return"none"},setLanguage:function(de,xe){de.className=de.className.replace(RegExp(yt,"gi"),""),de.classList.add("language-"+xe)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Ne){var de=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Ne.stack)||[])[1];if(de){var xe=document.getElementsByTagName("script");for(var Fe in xe)if(xe[Fe].src==de)return xe[Fe]}return null}},isActive:function(de,xe,Fe){for(var Ne="no-"+xe;de;){var kt=de.classList;if(kt.contains(xe))return!0;if(kt.contains(Ne))return!1;de=de.parentElement}return!!Fe}},languages:{plain:wt,plaintext:wt,text:wt,txt:wt,extend:function(de,xe){var Fe=ue.util.clone(ue.languages[de]);for(var Ne in xe)Fe[Ne]=xe[Ne];return Fe},insertBefore:function(de,xe,Fe,Ne){Ne=Ne||ue.languages;var kt=Ne[de],ve={};for(var We in kt)if(kt.hasOwnProperty(We)){if(We==xe)for(var st in Fe)Fe.hasOwnProperty(st)&&(ve[st]=Fe[st]);Fe.hasOwnProperty(We)||(ve[We]=kt[We])}var en=Ne[de];return Ne[de]=ve,ue.languages.DFS(ue.languages,function(jn,On){On===en&&jn!=de&&(this[jn]=ve)}),ve},DFS:function de(xe,Fe,Ne,kt){kt=kt||{};var ve=ue.util.objId;for(var We in xe)if(xe.hasOwnProperty(We)){Fe.call(xe,We,xe[We],Ne||We);var st=xe[We],en=ue.util.type(st);en==="Object"&&!kt[ve(st)]?(kt[ve(st)]=!0,de(st,Fe,null,kt)):en==="Array"&&!kt[ve(st)]&&(kt[ve(st)]=!0,de(st,Fe,We,kt))}}},plugins:{},highlightAll:function(de,xe){ue.highlightAllUnder(document,de,xe)},highlightAllUnder:function(de,xe,Fe){var Ne={callback:Fe,container:de,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};ue.hooks.run("before-highlightall",Ne),Ne.elements=Array.prototype.slice.apply(Ne.container.querySelectorAll(Ne.selector)),ue.hooks.run("before-all-elements-highlight",Ne);for(var kt=0,ve;ve=Ne.elements[kt++];)ue.highlightElement(ve,xe===!0,Ne.callback)},highlightElement:function(de,xe,Fe){var Ne=ue.util.getLanguage(de),kt=ue.languages[Ne];ue.util.setLanguage(de,Ne);var ve=de.parentElement;ve&&ve.nodeName.toLowerCase()==="pre"&&ue.util.setLanguage(ve,Ne);var We=de.textContent,st={element:de,language:Ne,grammar:kt,code:We};function en(On){st.highlightedCode=On,ue.hooks.run("before-insert",st),st.element.innerHTML=st.highlightedCode,ue.hooks.run("after-highlight",st),ue.hooks.run("complete",st),Fe&&Fe.call(st.element)}if(ue.hooks.run("before-sanity-check",st),ve=st.element.parentElement,ve&&ve.nodeName.toLowerCase()==="pre"&&!ve.hasAttribute("tabindex")&&ve.setAttribute("tabindex","0"),!st.code){ue.hooks.run("complete",st),Fe&&Fe.call(st.element);return}if(ue.hooks.run("before-highlight",st),!st.grammar){en(ue.util.encode(st.code));return}if(xe&&Ue.Worker){var jn=new Worker(ue.filename);jn.onmessage=function(On){en(On.data)},jn.postMessage(JSON.stringify({language:st.language,code:st.code,immediateClose:!0}))}else en(ue.highlight(st.code,st.grammar,st.language))},highlight:function(de,xe,Fe){var Ne={code:de,grammar:xe,language:Fe};if(ue.hooks.run("before-tokenize",Ne),!Ne.grammar)throw new Error('The language "'+Ne.language+'" has no grammar.');return Ne.tokens=ue.tokenize(Ne.code,Ne.grammar),ue.hooks.run("after-tokenize",Ne),je.stringify(ue.util.encode(Ne.tokens),Ne.language)},tokenize:function(de,xe){var Fe=xe.rest;if(Fe){for(var Ne in Fe)xe[Ne]=Fe[Ne];delete xe.rest}var kt=new un;return oo(kt,kt.head,de),kn(de,kt,xe,kt.head,0),Ss(kt)},hooks:{all:{},add:function(de,xe){var Fe=ue.hooks.all;Fe[de]=Fe[de]||[],Fe[de].push(xe)},run:function(de,xe){var Fe=ue.hooks.all[de];if(!(!Fe||!Fe.length))for(var Ne=0,kt;kt=Fe[Ne++];)kt(xe)}},Token:je};Ue.Prism=ue;function je(de,xe,Fe,Ne){this.type=de,this.content=xe,this.alias=Fe,this.length=(Ne||"").length|0}je.stringify=function de(xe,Fe){if(typeof xe=="string")return xe;if(Array.isArray(xe)){var Ne="";return xe.forEach(function(en){Ne+=de(en,Fe)}),Ne}var kt={type:xe.type,content:de(xe.content,Fe),tag:"span",classes:["token",xe.type],attributes:{},language:Fe},ve=xe.alias;ve&&(Array.isArray(ve)?Array.prototype.push.apply(kt.classes,ve):kt.classes.push(ve)),ue.hooks.run("wrap",kt);var We="";for(var st in kt.attributes)We+=" "+st+'="'+(kt.attributes[st]||"").replace(/"/g,"&quot;")+'"';return"<"+kt.tag+' class="'+kt.classes.join(" ")+'"'+We+">"+kt.content+"</"+kt.tag+">"};function V(de,xe,Fe,Ne){de.lastIndex=xe;var kt=de.exec(Fe);if(kt&&Ne&&kt[1]){var ve=kt[1].length;kt.index+=ve,kt[0]=kt[0].slice(ve)}return kt}function kn(de,xe,Fe,Ne,kt,ve){for(var We in Fe)if(!(!Fe.hasOwnProperty(We)||!Fe[We])){var st=Fe[We];st=Array.isArray(st)?st:[st];for(var en=0;en<st.length;++en){if(ve&&ve.cause==We+","+en)return;var jn=st[en],On=jn.inside,ao=!!jn.lookbehind,Yn=!!jn.greedy,ls=jn.alias;if(Yn&&!jn.pattern.global){var Xe=jn.pattern.toString().match(/[imsuy]*$/)[0];jn.pattern=RegExp(jn.pattern.source,Xe+"g")}for(var pt=jn.pattern||jn,Pt=Ne.next,jt=kt;Pt!==xe.tail&&!(ve&&jt>=ve.reach);jt+=Pt.value.length,Pt=Pt.next){var vn=Pt.value;if(xe.length>de.length)return;if(!(vn instanceof je)){var so=1,lo;if(Yn){if(lo=V(pt,jt,de,ao),!lo||lo.index>=de.length)break;var $t=lo.index,Qo=lo.index+lo[0].length,Bo=jt;for(Bo+=Pt.value.length;$t>=Bo;)Pt=Pt.next,Bo+=Pt.value.length;if(Bo-=Pt.value.length,jt=Bo,Pt.value instanceof je)continue;for(var cs=Pt;cs!==xe.tail&&(Bo<Qo||typeof cs.value=="string");cs=cs.next)so++,Bo+=cs.value.length;so--,vn=de.slice(jt,Bo),lo.index-=jt}else if(lo=V(pt,0,vn,ao),!lo)continue;var $t=lo.index,So=lo[0],Js=vn.slice(0,$t),wr=vn.slice($t+So.length),Zr=jt+vn.length;ve&&Zr>ve.reach&&(ve.reach=Zr);var hr=Pt.prev;Js&&(hr=oo(xe,hr,Js),jt+=Js.length),Do(xe,hr,so);var di=new je(We,On?ue.tokenize(So,On):So,ls,So);if(Pt=oo(xe,hr,di),wr&&oo(xe,Pt,wr),so>1){var xr={cause:We+","+en,reach:Zr};kn(de,xe,Fe,Pt.prev,jt,xr),ve&&xr.reach>ve.reach&&(ve.reach=xr.reach)}}}}}}function un(){var de={value:null,prev:null,next:null},xe={value:null,prev:de,next:null};de.next=xe,this.head=de,this.tail=xe,this.length=0}function oo(de,xe,Fe){var Ne=xe.next,kt={value:Fe,prev:xe,next:Ne};return xe.next=kt,Ne.prev=kt,de.length++,kt}function Do(de,xe,Fe){for(var Ne=xe.next,kt=0;kt<Fe&&Ne!==de.tail;kt++)Ne=Ne.next;xe.next=Ne,Ne.prev=xe,de.length-=kt}function Ss(de){for(var xe=[],Fe=de.head.next;Fe!==de.tail;)xe.push(Fe.value),Fe=Fe.next;return xe}if(!Ue.document)return Ue.addEventListener&&(ue.disableWorkerMessageHandler||Ue.addEventListener("message",function(de){var xe=JSON.parse(de.data),Fe=xe.language,Ne=xe.code,kt=xe.immediateClose;Ue.postMessage(ue.highlight(Ne,ue.languages[Fe],Fe)),kt&&Ue.close()},!1)),ue;var Qe=ue.util.currentScript();Qe&&(ue.filename=Qe.src,Qe.hasAttribute("data-manual")&&(ue.manual=!0));function Bt(){ue.manual||ue.highlightAll()}if(!ue.manual){var nt=document.readyState;nt==="loading"||nt==="interactive"&&Qe&&Qe.defer?document.addEventListener("DOMContentLoaded",Bt):window.requestAnimationFrame?window.requestAnimationFrame(Bt):window.setTimeout(Bt,16)}return ue}(qt);return Be.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Ue){function yt(Ie,wt){return"___"+Ie.toUpperCase()+wt+"___"}Object.defineProperties(Ue.languages["markup-templating"]={},{buildPlaceholders:{value:function(Ie,wt,ue,je){if(Ie.language===wt){var V=Ie.tokenStack=[];Ie.code=Ie.code.replace(ue,function(kn){if(typeof je=="function"&&!je(kn))return kn;for(var un=V.length,oo;Ie.code.indexOf(oo=yt(wt,un))!==-1;)++un;return V[un]=kn,oo}),Ie.grammar=Ue.languages.markup}}},tokenizePlaceholders:{value:function(Ie,wt){if(Ie.language!==wt||!Ie.tokenStack)return;Ie.grammar=Ue.languages[wt];var ue=0,je=Object.keys(Ie.tokenStack);function V(kn){for(var un=0;un<kn.length&&!(ue>=je.length);un++){var oo=kn[un];if(typeof oo=="string"||oo.content&&typeof oo.content=="string"){var Do=je[ue],Ss=Ie.tokenStack[Do],Qe=typeof oo=="string"?oo:oo.content,Bt=yt(wt,Do),nt=Qe.indexOf(Bt);if(nt>-1){++ue;var de=Qe.substring(0,nt),xe=new Ue.Token(wt,Ue.tokenize(Ss,Ie.grammar),"language-"+wt,Ss),Fe=Qe.substring(nt+Bt.length),Ne=[];de&&Ne.push.apply(Ne,V([de])),Ne.push(xe),Fe&&Ne.push.apply(Ne,V([Fe])),typeof oo=="string"?kn.splice.apply(kn,[un,1].concat(Ne)):oo.content=Ne}}else oo.content&&V(oo.content)}return kn}V(Ie.tokens)}}})}(Be),Be.languages.c=Be.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Be.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Be.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Be.languages.c.string],char:Be.languages.c.char,comment:Be.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Be.languages.c}}}}),Be.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Be.languages.c.boolean,function(Ue){var yt=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,Ie=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return yt.source});Ue.languages.cpp=Ue.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return yt.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:yt,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Ue.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return Ie})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Ue.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Ue.languages.cpp}}}}),Ue.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Ue.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Ue.languages.extend("cpp",{})}}),Ue.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Ue.languages.cpp["base-clause"])}(Be),function(Ue){function yt(lo,Qo){return lo.replace(/<<(\d+)>>/g,function(Bo,cs){return"(?:"+Qo[+cs]+")"})}function Ie(lo,Qo,Bo){return RegExp(yt(lo,Qo),"")}function wt(lo,Qo){for(var Bo=0;Bo<Qo;Bo++)lo=lo.replace(/<<self>>/g,function(){return"(?:"+lo+")"});return lo.replace(/<<self>>/g,"[^\\s\\S]")}var ue={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function je(lo){return"\\b(?:"+lo.trim().replace(/ /g,"|")+")\\b"}var V=je(ue.typeDeclaration),kn=RegExp(je(ue.type+" "+ue.typeDeclaration+" "+ue.contextual+" "+ue.other)),un=je(ue.typeDeclaration+" "+ue.contextual+" "+ue.other),oo=je(ue.type+" "+ue.typeDeclaration+" "+ue.other),Do=wt(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),Ss=wt(/\((?:[^()]|<<self>>)*\)/.source,2),Qe=/@?\b[A-Za-z_]\w*\b/.source,Bt=yt(/<<0>>(?:\s*<<1>>)?/.source,[Qe,Do]),nt=yt(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[un,Bt]),de=/\[\s*(?:,\s*)*\]/.source,xe=yt(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[nt,de]),Fe=yt(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[Do,Ss,de]),Ne=yt(/\(<<0>>+(?:,<<0>>+)+\)/.source,[Fe]),kt=yt(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[Ne,nt,de]),ve={keyword:kn,punctuation:/[<>()?,.:[\]]/},We=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,st=/"(?:\\.|[^\\"\r\n])*"/.source,en=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Ue.languages.csharp=Ue.languages.extend("clike",{string:[{pattern:Ie(/(^|[^$\\])<<0>>/.source,[en]),lookbehind:!0,greedy:!0},{pattern:Ie(/(^|[^@$\\])<<0>>/.source,[st]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:Ie(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[nt]),lookbehind:!0,inside:ve},{pattern:Ie(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[Qe,kt]),lookbehind:!0,inside:ve},{pattern:Ie(/(\busing\s+)<<0>>(?=\s*=)/.source,[Qe]),lookbehind:!0},{pattern:Ie(/(\b<<0>>\s+)<<1>>/.source,[V,Bt]),lookbehind:!0,inside:ve},{pattern:Ie(/(\bcatch\s*\(\s*)<<0>>/.source,[nt]),lookbehind:!0,inside:ve},{pattern:Ie(/(\bwhere\s+)<<0>>/.source,[Qe]),lookbehind:!0},{pattern:Ie(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[xe]),lookbehind:!0,inside:ve},{pattern:Ie(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[kt,oo,Qe]),inside:ve}],keyword:kn,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Ue.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Ue.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:Ie(/([(,]\s*)<<0>>(?=\s*:)/.source,[Qe]),lookbehind:!0,alias:"punctuation"}}),Ue.languages.insertBefore("csharp","class-name",{namespace:{pattern:Ie(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[Qe]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:Ie(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[Ss]),lookbehind:!0,alias:"class-name",inside:ve},"return-type":{pattern:Ie(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[kt,nt]),inside:ve,alias:"class-name"},"constructor-invocation":{pattern:Ie(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[kt]),lookbehind:!0,inside:ve,alias:"class-name"},"generic-method":{pattern:Ie(/<<0>>\s*<<1>>(?=\s*\()/.source,[Qe,Do]),inside:{function:Ie(/^<<0>>/.source,[Qe]),generic:{pattern:RegExp(Do),alias:"class-name",inside:ve}}},"type-list":{pattern:Ie(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[V,Bt,Qe,kt,kn.source,Ss,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:Ie(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[Bt,Ss]),lookbehind:!0,greedy:!0,inside:Ue.languages.csharp},keyword:kn,"class-name":{pattern:RegExp(kt),greedy:!0,inside:ve},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var jn=st+"|"+We,On=yt(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[jn]),ao=wt(yt(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[On]),2),Yn=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,ls=yt(/<<0>>(?:\s*\(<<1>>*\))?/.source,[nt,ao]);Ue.languages.insertBefore("csharp","class-name",{attribute:{pattern:Ie(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[Yn,ls]),lookbehind:!0,greedy:!0,inside:{target:{pattern:Ie(/^<<0>>(?=\s*:)/.source,[Yn]),alias:"keyword"},"attribute-arguments":{pattern:Ie(/\(<<0>>*\)/.source,[ao]),inside:Ue.languages.csharp},"class-name":{pattern:RegExp(nt),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var Xe=/:[^}\r\n]+/.source,pt=wt(yt(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[On]),2),Pt=yt(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[pt,Xe]),jt=wt(yt(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[jn]),2),vn=yt(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[jt,Xe]);function so(lo,Qo){return{interpolation:{pattern:Ie(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[lo]),lookbehind:!0,inside:{"format-string":{pattern:Ie(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Qo,Xe]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Ue.languages.csharp}}},string:/[\s\S]+/}}Ue.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:Ie(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Pt]),lookbehind:!0,greedy:!0,inside:so(Pt,pt)},{pattern:Ie(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[vn]),lookbehind:!0,greedy:!0,inside:so(vn,jt)}],char:{pattern:RegExp(We),greedy:!0}}),Ue.languages.dotnet=Ue.languages.cs=Ue.languages.csharp}(Be),function(Ue){var yt=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Ue.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+yt.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+yt.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+yt.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+yt.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:yt,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Ue.languages.css.atrule.inside.rest=Ue.languages.css;var Ie=Ue.languages.markup;Ie&&(Ie.tag.addInlined("style","css"),Ie.tag.addAttribute("style","css"))}(Be),function(Ue){var yt=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,Ie=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,wt={pattern:RegExp(/(^|[^\w.])/.source+Ie+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Ue.languages.java=Ue.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[wt,{pattern:RegExp(/(^|[^\w.])/.source+Ie+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:wt.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+Ie+/[A-Z]\w*\b/.source),lookbehind:!0,inside:wt.inside}],keyword:yt,function:[Ue.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),Ue.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Ue.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":wt,keyword:yt,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+Ie+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:wt.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+Ie+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:wt.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return yt.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Be),Be.languages.javascript=Be.languages.extend("clike",{"class-name":[Be.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Be.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Be.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Be.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Be.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Be.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Be.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Be.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Be.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Be.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Be.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Be.languages.markup&&(Be.languages.markup.tag.addInlined("script","javascript"),Be.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Be.languages.js=Be.languages.javascript,Be.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Be.languages.markup.tag.inside["attr-value"].inside.entity=Be.languages.markup.entity,Be.languages.markup.doctype.inside["internal-subset"].inside=Be.languages.markup,Be.hooks.add("wrap",function(Ue){Ue.type==="entity"&&(Ue.attributes.title=Ue.content.replace(/&amp;/,"&"))}),Object.defineProperty(Be.languages.markup.tag,"addInlined",{value:function(yt,Ie){var wt={};wt["language-"+Ie]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Be.languages[Ie]},wt.cdata=/^<!\[CDATA\[|\]\]>$/i;var ue={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:wt}};ue["language-"+Ie]={pattern:/[\s\S]+/,inside:Be.languages[Ie]};var je={};je[yt]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return yt}),"i"),lookbehind:!0,greedy:!0,inside:ue},Be.languages.insertBefore("markup","cdata",je)}}),Object.defineProperty(Be.languages.markup.tag,"addAttribute",{value:function(Ue,yt){Be.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Ue+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[yt,"language-"+yt],inside:Be.languages[yt]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Be.languages.html=Be.languages.markup,Be.languages.mathml=Be.languages.markup,Be.languages.svg=Be.languages.markup,Be.languages.xml=Be.languages.extend("markup",{}),Be.languages.ssml=Be.languages.xml,Be.languages.atom=Be.languages.xml,Be.languages.rss=Be.languages.xml,function(Ue){var yt=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,Ie=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],wt=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,ue=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,je=/[{}\[\](),:;]/;Ue.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:yt,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:Ie,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:wt,operator:ue,punctuation:je};var V={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Ue.languages.php},kn=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:V}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:V}}];Ue.languages.insertBefore("php","variable",{string:kn,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:yt,string:kn,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:Ie,number:wt,operator:ue,punctuation:je}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Ue.hooks.add("before-tokenize",function(un){if(/<\?/.test(un.code)){var oo=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Ue.languages["markup-templating"].buildPlaceholders(un,"php",oo)}}),Ue.hooks.add("after-tokenize",function(un){Ue.languages["markup-templating"].tokenizePlaceholders(un,"php")})}(Be),Be.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Be.languages.python["string-interpolation"].inside.interpolation.inside.rest=Be.languages.python,Be.languages.py=Be.languages.python,function(Ue){Ue.languages.ruby=Ue.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Ue.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var yt={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Ue.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Ue.languages.ruby.function;var Ie="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",wt=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Ue.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+Ie+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:yt,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:yt,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+wt),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+wt+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Ue.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+Ie),greedy:!0,inside:{interpolation:yt,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:yt,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:yt,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+Ie),greedy:!0,inside:{interpolation:yt,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:yt,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Ue.languages.ruby.string,Ue.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Ue.languages.rb=Ue.languages.ruby}(Be),window.Prism=lt,Be}(),M=O=>Ye=>Ye.options.get(O),N=O=>{const Ye=O.options.register;Ye("codesample_languages",{processor:"object[]"}),Ye("codesample_global_prismjs",{processor:"boolean",default:!1})},I=M("codesample_languages"),z=M("codesample_global_prismjs"),Y=O=>k.Prism&&z(O)?k.Prism:T,J=O=>i(O)&&O.nodeName==="PRE"&&O.className.indexOf("language-")!==-1,q=O=>{const Ye=O.selection?O.selection.getNode():null;return J(Ye)?m.some(Ye):m.none()},ae=(O,Ye,me)=>{const lt=O.dom;O.undoManager.transact(()=>{const qt=q(O);return me=x.DOM.encode(me),qt.fold(()=>{O.insertContent('<pre id="__new" class="language-'+Ye+'">'+me+"</pre>");const Be=lt.select("#__new")[0];lt.setAttrib(Be,"id",null),O.selection.select(Be)},Be=>{lt.setAttrib(Be,"class","language-"+Ye),Be.innerHTML=me,Y(O).highlightElement(Be),O.selection.select(Be)})})},Z=O=>q(O).bind(me=>m.from(me.textContent)).getOr(""),ce=O=>{const Ye=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],me=I(O);return me||Ye},_e=(O,Ye)=>q(O).fold(()=>Ye,lt=>{const qt=lt.className.match(/language-(\w+)/);return qt?qt[1]:Ye}),De=O=>{const Ye=ce(O),me=v(Ye).fold(d(""),Be=>Be.value),lt=_e(O,me),qt=Z(O);O.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"listbox",name:"language",label:"Language",items:Ye},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:lt,code:qt},onSubmit:Be=>{const Ue=Be.getData();ae(O,Ue.language,Ue.code),Be.close()}})},G=O=>{O.addCommand("codesample",()=>{const Ye=O.selection.getNode();O.selection.isCollapsed()||J(Ye)?De(O):O.formatter.toggle("code")})},Re=(O=>Ye=>Ye.replace(O,""))(/^\s+|\s+$/g);var $e=tinymce.util.Tools.resolve("tinymce.util.Tools");const le=O=>{O.on("PreProcess",Ye=>{const me=O.dom,lt=me.select("pre[contenteditable=false]",Ye.node);$e.each($e.grep(lt,J),qt=>{const Be=qt.textContent;me.setAttrib(qt,"class",Re(me.getAttrib(qt,"class"))),me.setAttrib(qt,"contentEditable",null),me.setAttrib(qt,"data-mce-highlighted",null);let Ue;for(;Ue=qt.firstChild;)qt.removeChild(Ue);const yt=me.add(qt,"code");yt.textContent=Be})}),O.on("SetContent",()=>{const Ye=O.dom,me=$e.grep(Ye.select("pre"),lt=>J(lt)&&Ye.getAttrib(lt,"data-mce-highlighted")!=="true");me.length&&O.undoManager.transact(()=>{$e.each(me,lt=>{var qt;$e.each(Ye.select("br",lt),Be=>{Ye.replace(O.getDoc().createTextNode(`
`),Be)}),lt.innerHTML=Ye.encode((qt=lt.textContent)!==null&&qt!==void 0?qt:""),Y(O).highlightElement(lt),Ye.setAttrib(lt,"data-mce-highlighted",!0),lt.className=Re(lt.className)})})}),O.on("PreInit",()=>{O.parser.addNodeFilter("pre",Ye=>{var me;for(let lt=0,qt=Ye.length;lt<qt;lt++){const Be=Ye[lt];((me=Be.attr("class"))!==null&&me!==void 0?me:"").indexOf("language-")!==-1&&(Be.attr("contenteditable","false"),Be.attr("data-mce-highlighted","false"))}})})},Ee=(O,Ye=l)=>me=>{const lt=()=>{me.setEnabled(O.selection.isEditable()),Ye(me)};return O.on("NodeChange",lt),lt(),()=>{O.off("NodeChange",lt)}},ft=O=>{const Ye=O.selection.getStart();return O.dom.is(Ye,'pre[class*="language-"]')},ne=O=>{const Ye=()=>O.execCommand("codesample");O.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Ye,onSetup:Ee(O,me=>{me.setActive(ft(O))})}),O.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Ye,onSetup:Ee(O)})};var ge=()=>{u.add("codesample",O=>{N(O),le(O),ne(O),G(O),O.on("dblclick",Ye=>{J(Ye.target)&&De(O)})})};ge()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(Xe,pt,Pt)=>{var jt;return Pt(Xe,pt.prototype)?!0:((jt=Xe.constructor)===null||jt===void 0?void 0:jt.name)===pt.name},i=Xe=>{const pt=typeof Xe;return Xe===null?"null":pt==="object"&&Array.isArray(Xe)?"array":pt==="object"&&o(Xe,String,(Pt,jt)=>jt.isPrototypeOf(Pt))?"string":pt},l=Xe=>pt=>i(pt)===Xe,d=Xe=>pt=>typeof pt===Xe,m=l("string"),p=d("boolean"),v=Xe=>Xe==null,x=Xe=>!v(Xe),k=d("function"),T=d("number"),M=(Xe,pt)=>Pt=>Xe(pt(Pt)),I=(Xe=>()=>Xe)(!1);class z{constructor(pt,Pt){this.tag=pt,this.value=Pt}static some(pt){return new z(!0,pt)}static none(){return z.singletonNone}fold(pt,Pt){return this.tag?Pt(this.value):pt()}isSome(){return this.tag}isNone(){return!this.tag}map(pt){return this.tag?z.some(pt(this.value)):z.none()}bind(pt){return this.tag?pt(this.value):z.none()}exists(pt){return this.tag&&pt(this.value)}forall(pt){return!this.tag||pt(this.value)}filter(pt){return!this.tag||pt(this.value)?this:z.none()}getOr(pt){return this.tag?this.value:pt}or(pt){return this.tag?this:pt}getOrThunk(pt){return this.tag?this.value:pt()}orThunk(pt){return this.tag?this:pt()}getOrDie(pt){if(this.tag)return this.value;throw new Error(pt!=null?pt:"Called getOrDie on None")}static from(pt){return x(pt)?z.some(pt):z.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(pt){this.tag&&pt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}z.singletonNone=new z(!1);const Y=(Xe,pt)=>{const Pt=Xe.length,jt=new Array(Pt);for(let vn=0;vn<Pt;vn++){const so=Xe[vn];jt[vn]=pt(so,vn)}return jt},J=(Xe,pt)=>{for(let Pt=0,jt=Xe.length;Pt<jt;Pt++){const vn=Xe[Pt];pt(vn,Pt)}},q=(Xe,pt)=>{const Pt=[];for(let jt=0,vn=Xe.length;jt<vn;jt++){const so=Xe[jt];pt(so,jt)&&Pt.push(so)}return Pt},ae=9,Z=11,ce=1,_e=3,De=(Xe,pt)=>{const jt=(pt||document).createElement("div");if(jt.innerHTML=Xe,!jt.hasChildNodes()||jt.childNodes.length>1){const vn="HTML does not have a single root node";throw new Error(vn)}return Re(jt.childNodes[0])},G=(Xe,pt)=>{const jt=(pt||document).createElement(Xe);return Re(jt)},qe=(Xe,pt)=>{const jt=(pt||document).createTextNode(Xe);return Re(jt)},Re=Xe=>{if(Xe==null)throw new Error("Node cannot be null or undefined");return{dom:Xe}},le={fromHtml:De,fromTag:G,fromText:qe,fromDom:Re,fromPoint:(Xe,pt,Pt)=>z.from(Xe.dom.elementFromPoint(pt,Pt)).map(Re)},Ee=(Xe,pt)=>{const Pt=Xe.dom;if(Pt.nodeType!==ce)return!1;{const jt=Pt;if(jt.matches!==void 0)return jt.matches(pt);if(jt.msMatchesSelector!==void 0)return jt.msMatchesSelector(pt);if(jt.webkitMatchesSelector!==void 0)return jt.webkitMatchesSelector(pt);if(jt.mozMatchesSelector!==void 0)return jt.mozMatchesSelector(pt);throw new Error("Browser lacks native selectors")}};typeof window!="undefined"||Function("return this;")();const ft=Xe=>Xe.dom.nodeName.toLowerCase(),ne=Xe=>Xe.dom.nodeType,ge=Xe=>pt=>ne(pt)===Xe,O=ge(ce),Ye=ge(_e),me=ge(ae),lt=ge(Z),qt=Xe=>pt=>O(pt)&&ft(pt)===Xe,Be=Xe=>le.fromDom(Xe.dom.ownerDocument),Ue=Xe=>me(Xe)?Xe:Be(Xe),yt=Xe=>z.from(Xe.dom.parentNode).map(le.fromDom),Ie=Xe=>Y(Xe.dom.childNodes,le.fromDom),wt=(Xe,pt,Pt)=>{if(m(Pt)||p(Pt)||T(Pt))Xe.setAttribute(pt,Pt+"");else throw new Error("Attribute value was not simple")},ue=(Xe,pt,Pt)=>{wt(Xe.dom,pt,Pt)},je=(Xe,pt)=>{Xe.dom.removeAttribute(pt)},V=Xe=>lt(Xe)&&x(Xe.dom.host),un=k(Element.prototype.attachShadow)&&k(Node.prototype.getRootNode)?Xe=>le.fromDom(Xe.dom.getRootNode()):Ue,oo=Xe=>{const pt=un(Xe);return V(pt)?z.some(pt):z.none()},Do=Xe=>le.fromDom(Xe.dom.host),Ss=Xe=>{const pt=Ye(Xe)?Xe.dom.parentNode:Xe.dom;if(pt==null||pt.ownerDocument===null)return!1;const Pt=pt.ownerDocument;return oo(le.fromDom(pt)).fold(()=>Pt.body.contains(pt),M(Ss,Do))},Qe=(Xe,pt,Pt)=>{let jt=Xe.dom;const vn=k(Pt)?Pt:I;for(;jt.parentNode;){jt=jt.parentNode;const so=le.fromDom(jt);if(pt(so))return z.some(so);if(vn(so))break}return z.none()},Bt=(Xe,pt,Pt)=>Qe(Xe,jt=>Ee(jt,pt),Pt),nt=Xe=>Xe.style!==void 0&&k(Xe.style.getPropertyValue),de=(Xe,pt)=>{const Pt=Xe.dom,vn=window.getComputedStyle(Pt).getPropertyValue(pt);return vn===""&&!Ss(Xe)?xe(Pt,pt):vn},xe=(Xe,pt)=>nt(Xe)?Xe.style.getPropertyValue(pt):"",Fe=Xe=>de(Xe,"direction")==="rtl"?"rtl":"ltr",Ne=(Xe,pt)=>q(Ie(Xe),pt),kt=(Xe,pt)=>Ne(Xe,Pt=>Ee(Pt,pt)),ve=Xe=>yt(Xe).filter(O),We=(Xe,pt)=>(pt?Bt(Xe,"ol,ul"):z.some(Xe)).getOr(Xe),st=qt("li"),en=(Xe,pt,Pt)=>{J(pt,jt=>{const vn=le.fromDom(jt),so=st(vn),lo=We(vn,so);ve(lo).each(Bo=>{if(Xe.setStyle(lo.dom,"direction",null),Fe(Bo)===Pt?je(lo,"dir"):ue(lo,"dir",Pt),Fe(lo)!==Pt&&Xe.setStyle(lo.dom,"direction",Pt),so){const $t=kt(lo,"li[dir],li[style]");J($t,So=>{je(So,"dir"),Xe.setStyle(So.dom,"direction",null)})}})})},jn=(Xe,pt)=>{Xe.selection.isEditable()&&(en(Xe.dom,Xe.selection.getSelectedBlocks(),pt),Xe.nodeChanged())},On=Xe=>{Xe.addCommand("mceDirectionLTR",()=>{jn(Xe,"ltr")}),Xe.addCommand("mceDirectionRTL",()=>{jn(Xe,"rtl")})},ao=(Xe,pt)=>Pt=>{const jt=vn=>{const so=le.fromDom(vn.element);Pt.setActive(Fe(so)===pt),Pt.setEnabled(Xe.selection.isEditable())};return Xe.on("NodeChange",jt),Pt.setEnabled(Xe.selection.isEditable()),()=>Xe.off("NodeChange",jt)},Yn=Xe=>{Xe.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Xe.execCommand("mceDirectionLTR"),onSetup:ao(Xe,"ltr")}),Xe.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Xe.execCommand("mceDirectionRTL"),onSetup:ao(Xe,"rtl")})};var ls=()=>{u.add("directionality",Xe=>{On(Xe),Yn(Xe)})};ls()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=xe=>Fe=>xe===Fe,i=o(null),l=o(void 0),d=xe=>xe==null,m=xe=>!d(xe),p=()=>{},x=(xe=>()=>xe)(!1);class k{constructor(Fe,Ne){this.tag=Fe,this.value=Ne}static some(Fe){return new k(!0,Fe)}static none(){return k.singletonNone}fold(Fe,Ne){return this.tag?Ne(this.value):Fe()}isSome(){return this.tag}isNone(){return!this.tag}map(Fe){return this.tag?k.some(Fe(this.value)):k.none()}bind(Fe){return this.tag?Fe(this.value):k.none()}exists(Fe){return this.tag&&Fe(this.value)}forall(Fe){return!this.tag||Fe(this.value)}filter(Fe){return!this.tag||Fe(this.value)?this:k.none()}getOr(Fe){return this.tag?this.value:Fe}or(Fe){return this.tag?this:Fe}getOrThunk(Fe){return this.tag?this.value:Fe()}orThunk(Fe){return this.tag?this:Fe()}getOrDie(Fe){if(this.tag)return this.value;throw new Error(Fe!=null?Fe:"Called getOrDie on None")}static from(Fe){return m(Fe)?k.some(Fe):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Fe){this.tag&&Fe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const T=(xe,Fe)=>{for(let Ne=0,kt=xe.length;Ne<kt;Ne++){const ve=xe[Ne];if(Fe(ve,Ne))return!0}return!1},M=(xe,Fe)=>{const Ne=xe.length,kt=new Array(Ne);for(let ve=0;ve<Ne;ve++){const We=xe[ve];kt[ve]=Fe(We,ve)}return kt},N=(xe,Fe)=>{for(let Ne=0,kt=xe.length;Ne<kt;Ne++){const ve=xe[Ne];Fe(ve,Ne)}},I=xe=>{let Fe=xe;return{get:()=>Fe,set:ve=>{Fe=ve}}},z=(xe,Fe)=>{let Ne=null;const kt=()=>{i(Ne)||(clearTimeout(Ne),Ne=null)};return{cancel:kt,throttle:(...We)=>{kt(),Ne=setTimeout(()=>{Ne=null,xe.apply(null,We)},Fe)}}},Y=(xe,Fe)=>{xe.insertContent(Fe)},J=Object.keys,q=Object.hasOwnProperty,ae=(xe,Fe)=>{const Ne=J(xe);for(let kt=0,ve=Ne.length;kt<ve;kt++){const We=Ne[kt],st=xe[We];Fe(st,We)}},Z=(xe,Fe)=>ce(xe,(Ne,kt)=>({k:kt,v:Fe(Ne,kt)})),ce=(xe,Fe)=>{const Ne={};return ae(xe,(kt,ve)=>{const We=Fe(kt,ve);Ne[We.k]=We.v}),Ne},_e=(xe,Fe)=>q.call(xe,Fe),qe=(xe=>(...Fe)=>{if(Fe.length===0)throw new Error("Can't merge zero objects");const Ne={};for(let kt=0;kt<Fe.length;kt++){const ve=Fe[kt];for(const We in ve)_e(ve,We)&&(Ne[We]=xe(Ne[We],ve[We]))}return Ne})((xe,Fe)=>Fe),Re=xe=>{const Fe=I(k.none()),Ne=()=>Fe.get().each(xe);return{clear:()=>{Ne(),Fe.set(k.none())},isSet:()=>Fe.get().isSome(),get:()=>Fe.get(),set:en=>{Ne(),Fe.set(k.some(en))}}},$e=()=>{const xe=Re(p),Fe=Ne=>xe.get().each(Ne);return Ot(ie({},xe),{on:Fe})},le=(xe,Fe,Ne)=>Fe===""||xe.length>=Fe.length&&xe.substr(Ne,Ne+Fe.length)===Fe,Ee=(xe,Fe,Ne=0,kt)=>{const ve=xe.indexOf(Fe,Ne);return ve!==-1?l(kt)?!0:ve+Fe.length<=kt:!1},ft=(xe,Fe)=>le(xe,Fe,0);var ne=tinymce.util.Tools.resolve("tinymce.Resource");const ge="tinymce.plugins.emoticons",O=xe=>Fe=>Fe.options.get(xe),Ye=(xe,Fe)=>{const Ne=xe.options.register;Ne("emoticons_database",{processor:"string",default:"emojis"}),Ne("emoticons_database_url",{processor:"string",default:`${Fe}/js/${me(xe)}${xe.suffix}.js`}),Ne("emoticons_database_id",{processor:"string",default:ge}),Ne("emoticons_append",{processor:"object",default:{}}),Ne("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})},me=O("emoticons_database"),lt=O("emoticons_database_url"),qt=O("emoticons_database_id"),Be=O("emoticons_append"),Ue=O("emoticons_images_url"),yt="All",Ie={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},wt=(xe,Fe)=>_e(xe,Fe)?xe[Fe]:Fe,ue=xe=>{const Fe=Be(xe);return Z(Fe,Ne=>ie({keywords:[],category:"user"},Ne))},je=(xe,Fe,Ne)=>{const kt=$e(),ve=$e(),We=Ue(xe),st=Xe=>ft(Xe.char,"<img")?Xe.char.replace(/src="([^"]+)"/,(pt,Pt)=>`src="${We}${Pt}"`):Xe.char,en=Xe=>{const pt={},Pt=[];ae(Xe,(jt,vn)=>{const so={title:vn,keywords:jt.keywords,char:st(jt),category:wt(Ie,jt.category)},lo=pt[so.category]!==void 0?pt[so.category]:[];pt[so.category]=lo.concat([so]),Pt.push(so)}),kt.set(pt),ve.set(Pt)};xe.on("init",()=>{ne.load(Ne,Fe).then(Xe=>{const pt=ue(xe);en(qe(Xe,pt))},Xe=>{kt.set({}),ve.set([])})});const jn=Xe=>Xe===yt?On():kt.get().bind(pt=>k.from(pt[Xe])).getOr([]),On=()=>ve.get().getOr([]),ao=()=>[yt].concat(J(kt.get().getOr({}))),Yn=()=>ls()?Promise.resolve(!0):new Promise((Xe,pt)=>{let Pt=15;const jt=setInterval(()=>{ls()?(clearInterval(jt),Xe(!0)):(Pt--,Pt<0&&(clearInterval(jt),pt(!1)))},100)}),ls=()=>kt.isSet()&&ve.isSet();return{listCategories:ao,hasLoaded:ls,waitForLoad:Yn,listAll:On,listCategory:jn}},V=(xe,Fe)=>Ee(xe.title.toLowerCase(),Fe)||T(xe.keywords,Ne=>Ee(Ne.toLowerCase(),Fe)),kn=(xe,Fe,Ne)=>{const kt=[],ve=Fe.toLowerCase(),We=Ne.fold(()=>x,st=>en=>en>=st);for(let st=0;st<xe.length&&!((Fe.length===0||V(xe[st],ve))&&(kt.push({value:xe[st].char,text:xe[st].title,icon:xe[st].char}),We(kt.length)));st++);return kt},un="pattern",oo=(xe,Fe)=>{const Ne={pattern:"",results:kn(Fe.listAll(),"",k.some(300))},kt=I(yt),ve=ao=>{const Yn=ao.getData(),ls=kt.get(),Xe=Fe.listCategory(ls),pt=kn(Xe,Yn[un],ls===yt?k.some(300):k.none());ao.setData({results:pt})},We=z(ao=>{ve(ao)},200),st={label:"Search",type:"input",name:un},en={type:"collection",name:"results"},jn=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:M(Fe.listCategories(),Yn=>({title:Yn,name:Yn,items:[st,en]}))},initialData:Ne,onTabChange:(Yn,ls)=>{kt.set(ls.newTabName),We.throttle(Yn)},onChange:We.throttle,onAction:(Yn,ls)=>{ls.name==="results"&&(Y(xe,ls.value),Yn.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),On=xe.windowManager.open(jn());On.focus(un),Fe.hasLoaded()||(On.block("Loading emojis..."),Fe.waitForLoad().then(()=>{On.redial(jn()),We.throttle(On),On.focus(un),On.unblock()}).catch(ao=>{On.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),On.focus(un),On.unblock()}))},Do=(xe,Fe)=>{xe.addCommand("mceEmoticons",()=>oo(xe,Fe))},Ss=xe=>{xe.on("PreInit",()=>{xe.parser.addAttributeFilter("data-emoticon",Fe=>{N(Fe,Ne=>{Ne.attr("data-mce-resize","false"),Ne.attr("data-mce-placeholder","1")})})})},Qe=(xe,Fe)=>{xe.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(Ne,kt)=>Fe.waitForLoad().then(()=>{const ve=Fe.listAll();return kn(ve,Ne,k.some(kt))}),onAction:(Ne,kt,ve)=>{xe.selection.setRng(kt),xe.insertContent(ve),Ne.hide()}})},Bt=xe=>Fe=>{const Ne=()=>{Fe.setEnabled(xe.selection.isEditable())};return xe.on("NodeChange",Ne),Ne(),()=>{xe.off("NodeChange",Ne)}},nt=xe=>{const Fe=()=>xe.execCommand("mceEmoticons");xe.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:Fe,onSetup:Bt(xe)}),xe.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:Fe,onSetup:Bt(xe)})};var de=()=>{u.add("emoticons",(xe,Fe)=>{Ye(xe,Fe);const Ne=lt(xe),kt=qt(xe),ve=je(xe,Ne,kt);Do(xe,ve),nt(xe),Qe(xe,ve),Ss(xe)})};de()})();(function(){const u=ee=>{let pe=ee;return{get:()=>pe,set:pn=>{pe=pn}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=ee=>({isFullscreen:()=>ee.get()!==null}),l=(ee,pe,rt)=>{var Et;return rt(ee,pe.prototype)?!0:((Et=ee.constructor)===null||Et===void 0?void 0:Et.name)===pe.name},d=ee=>{const pe=typeof ee;return ee===null?"null":pe==="object"&&Array.isArray(ee)?"array":pe==="object"&&l(ee,String,(rt,Et)=>Et.isPrototypeOf(rt))?"string":pe},m=ee=>pe=>d(pe)===ee,p=ee=>pe=>typeof pe===ee,v=ee=>pe=>ee===pe,x=m("string"),k=m("object"),T=m("array"),M=v(null),N=p("boolean"),I=v(void 0),z=ee=>ee==null,Y=ee=>!z(ee),J=p("function"),q=p("number"),ae=()=>{},Z=(ee,pe)=>(...rt)=>ee(pe.apply(null,rt)),ce=(ee,pe)=>rt=>ee(pe(rt)),_e=ee=>()=>ee;function De(ee,...pe){return(...rt)=>{const Et=pe.concat(rt);return ee.apply(null,Et)}}const G=_e(!1),qe=_e(!0);class Re{constructor(pe,rt){this.tag=pe,this.value=rt}static some(pe){return new Re(!0,pe)}static none(){return Re.singletonNone}fold(pe,rt){return this.tag?rt(this.value):pe()}isSome(){return this.tag}isNone(){return!this.tag}map(pe){return this.tag?Re.some(pe(this.value)):Re.none()}bind(pe){return this.tag?pe(this.value):Re.none()}exists(pe){return this.tag&&pe(this.value)}forall(pe){return!this.tag||pe(this.value)}filter(pe){return!this.tag||pe(this.value)?this:Re.none()}getOr(pe){return this.tag?this.value:pe}or(pe){return this.tag?this:pe}getOrThunk(pe){return this.tag?this.value:pe()}orThunk(pe){return this.tag?this:pe()}getOrDie(pe){if(this.tag)return this.value;throw new Error(pe!=null?pe:"Called getOrDie on None")}static from(pe){return Y(pe)?Re.some(pe):Re.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(pe){this.tag&&pe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Re.singletonNone=new Re(!1);const $e=Array.prototype.push,le=(ee,pe)=>{const rt=ee.length,Et=new Array(rt);for(let pn=0;pn<rt;pn++){const Oo=ee[pn];Et[pn]=pe(Oo,pn)}return Et},Ee=(ee,pe)=>{for(let rt=0,Et=ee.length;rt<Et;rt++){const pn=ee[rt];pe(pn,rt)}},ft=(ee,pe)=>{const rt=[];for(let Et=0,pn=ee.length;Et<pn;Et++){const Oo=ee[Et];pe(Oo,Et)&&rt.push(Oo)}return rt},ne=(ee,pe,rt)=>{for(let Et=0,pn=ee.length;Et<pn;Et++){const Oo=ee[Et];if(pe(Oo,Et))return Re.some(Oo);if(rt(Oo,Et))break}return Re.none()},ge=(ee,pe)=>ne(ee,pe,G),O=ee=>{const pe=[];for(let rt=0,Et=ee.length;rt<Et;++rt){if(!T(ee[rt]))throw new Error("Arr.flatten item "+rt+" was not an array, input: "+ee);$e.apply(pe,ee[rt])}return pe},Ye=(ee,pe)=>O(le(ee,pe)),me=(ee,pe)=>pe>=0&&pe<ee.length?Re.some(ee[pe]):Re.none(),lt=ee=>me(ee,0),qt=(ee,pe)=>{for(let rt=0;rt<ee.length;rt++){const Et=pe(ee[rt],rt);if(Et.isSome())return Et}return Re.none()},Be=(ee,pe,rt)=>ee.isSome()&&pe.isSome()?Re.some(rt(ee.getOrDie(),pe.getOrDie())):Re.none(),Ue=ee=>{const pe=u(Re.none()),rt=()=>pe.get().each(ee);return{clear:()=>{rt(),pe.set(Re.none())},isSet:()=>pe.get().isSome(),get:()=>pe.get(),set:ba=>{rt(),pe.set(Re.some(ba))}}},yt=()=>Ue(ee=>ee.unbind()),Ie=()=>{const ee=Ue(ae),pe=rt=>ee.get().each(rt);return Ot(ie({},ee),{on:pe})},wt=(ee,pe)=>{let rt=null;return{cancel:()=>{M(rt)||(clearTimeout(rt),rt=null)},throttle:(...Oo)=>{M(rt)&&(rt=setTimeout(()=>{rt=null,ee.apply(null,Oo)},pe))}}},ue=Object.keys,je=(ee,pe)=>{const rt=ue(ee);for(let Et=0,pn=rt.length;Et<pn;Et++){const Oo=rt[Et],Cr=ee[Oo];pe(Cr,Oo)}},V=typeof window!="undefined"?window:Function("return this;")(),kn=(ee,pe)=>{let rt=pe!=null?pe:V;for(let Et=0;Et<ee.length&&rt!==void 0&&rt!==null;++Et)rt=rt[ee[Et]];return rt},un=(ee,pe)=>{const rt=ee.split(".");return kn(rt,pe)},oo=(ee,pe)=>un(ee,pe),Do=(ee,pe)=>{const rt=oo(ee,pe);if(rt==null)throw new Error(ee+" not available on this browser");return rt},Ss=Object.getPrototypeOf,Qe=ee=>Do("HTMLElement",ee),Bt=ee=>{const pe=un("ownerDocument.defaultView",ee);return k(ee)&&(Qe(pe).prototype.isPrototypeOf(ee)||/^HTML\w*Element$/.test(Ss(ee).constructor.name))},nt=9,de=11,xe=1,Fe=3,Ne=ee=>ee.dom.nodeType,kt=ee=>pe=>Ne(pe)===ee,ve=ee=>We(ee)&&Bt(ee.dom),We=kt(xe),st=kt(Fe),en=kt(nt),jn=kt(de),On=(ee,pe,rt)=>{if(x(rt)||N(rt)||q(rt))ee.setAttribute(pe,rt+"");else throw new Error("Attribute value was not simple")},ao=(ee,pe,rt)=>{On(ee.dom,pe,rt)},Yn=(ee,pe)=>{const rt=ee.dom.getAttribute(pe);return rt===null?void 0:rt},ls=(ee,pe)=>{ee.dom.removeAttribute(pe)},Xe=ee=>ee.dom.classList!==void 0,pt=(ee,pe)=>Xe(ee)&&ee.dom.classList.contains(pe),Pt=(ee,pe,rt=0,Et)=>{const pn=ee.indexOf(pe,rt);return pn!==-1?I(Et)?!0:pn+pe.length<=Et:!1},jt=ee=>ee.style!==void 0&&J(ee.style.getPropertyValue),vn=(ee,pe)=>{const Et=(pe||document).createElement("div");if(Et.innerHTML=ee,!Et.hasChildNodes()||Et.childNodes.length>1){const pn="HTML does not have a single root node";throw new Error(pn)}return Qo(Et.childNodes[0])},so=(ee,pe)=>{const Et=(pe||document).createElement(ee);return Qo(Et)},lo=(ee,pe)=>{const Et=(pe||document).createTextNode(ee);return Qo(Et)},Qo=ee=>{if(ee==null)throw new Error("Node cannot be null or undefined");return{dom:ee}},cs={fromHtml:vn,fromTag:so,fromText:lo,fromDom:Qo,fromPoint:(ee,pe,rt)=>Re.from(ee.dom.elementFromPoint(pe,rt)).map(Qo)},$t=(ee,pe)=>{const rt=ee.dom;if(rt.nodeType!==xe)return!1;{const Et=rt;if(Et.matches!==void 0)return Et.matches(pe);if(Et.msMatchesSelector!==void 0)return Et.msMatchesSelector(pe);if(Et.webkitMatchesSelector!==void 0)return Et.webkitMatchesSelector(pe);if(Et.mozMatchesSelector!==void 0)return Et.mozMatchesSelector(pe);throw new Error("Browser lacks native selectors")}},So=ee=>ee.nodeType!==xe&&ee.nodeType!==nt&&ee.nodeType!==de||ee.childElementCount===0,Js=(ee,pe)=>{const rt=document;return So(rt)?[]:le(rt.querySelectorAll(ee),cs.fromDom)},wr=(ee,pe)=>ee.dom===pe.dom,Zr=ee=>cs.fromDom(ee.dom.ownerDocument),hr=ee=>en(ee)?ee:Zr(ee),di=ee=>Re.from(ee.dom.parentNode).map(cs.fromDom),xr=(ee,pe)=>{const rt=J(pe)?pe:G;let Et=ee.dom;const pn=[];for(;Et.parentNode!==null&&Et.parentNode!==void 0;){const Oo=Et.parentNode,Cr=cs.fromDom(Oo);if(pn.push(Cr),rt(Cr)===!0)break;Et=Oo}return pn},fi=ee=>{const pe=rt=>ft(rt,Et=>!wr(ee,Et));return di(ee).map(Bn).map(pe).getOr([])},us=ee=>Re.from(ee.dom.nextSibling).map(cs.fromDom),Bn=ee=>le(ee.dom.childNodes,cs.fromDom),hi=ee=>jn(ee)&&Y(ee.dom.host),Ke=J(Element.prototype.attachShadow)&&J(Node.prototype.getRootNode),ht=_e(Ke),tn=Ke?ee=>cs.fromDom(ee.dom.getRootNode()):hr,In=ee=>{const pe=tn(ee);return hi(pe)?Re.some(pe):Re.none()},bo=ee=>cs.fromDom(ee.dom.host),Ks=ee=>{if(ht()&&Y(ee.target)){const pe=cs.fromDom(ee.target);if(We(pe)&&Lr(pe)&&ee.composed&&ee.composedPath){const rt=ee.composedPath();if(rt)return lt(rt)}}return Re.from(ee.target)},Lr=ee=>Y(ee.dom.shadowRoot),mr=ee=>{const pe=st(ee)?ee.dom.parentNode:ee.dom;if(pe==null||pe.ownerDocument===null)return!1;const rt=pe.ownerDocument;return In(cs.fromDom(pe)).fold(()=>rt.body.contains(pe),ce(mr,bo))},_r=ee=>{const pe=ee.dom.body;if(pe==null)throw new Error("Body is not available yet");return cs.fromDom(pe)},ke=(ee,pe,rt)=>{if(!x(rt))throw new Error("CSS value must be a string: "+rt);jt(ee)&&ee.style.setProperty(pe,rt)},Ae=(ee,pe,rt)=>{const Et=ee.dom;ke(Et,pe,rt)},ut=(ee,pe)=>{const rt=ee.dom;je(pe,(Et,pn)=>{ke(rt,pn,Et)})},xt=(ee,pe)=>{const rt=ee.dom,pn=window.getComputedStyle(rt).getPropertyValue(pe);return pn===""&&!mr(ee)?En(rt,pe):pn},En=(ee,pe)=>jt(ee)?ee.style.getPropertyValue(pe):"",Rn=(ee,pe,rt,Et,pn,Oo,Cr)=>({target:ee,x:pe,y:rt,stop:Et,prevent:pn,kill:Oo,raw:Cr}),Mo=ee=>{const pe=cs.fromDom(Ks(ee).getOr(ee.target)),rt=()=>ee.stopPropagation(),Et=()=>ee.preventDefault(),pn=Z(Et,rt);return Rn(pe,ee.clientX,ee.clientY,rt,Et,pn,ee)},Vs=(ee,pe)=>rt=>{ee(rt)&&pe(Mo(rt))},Tt=(ee,pe,rt,Et,pn)=>{const Oo=Vs(rt,Et);return ee.dom.addEventListener(pe,Oo,pn),{unbind:De(Ce,ee,pe,Oo,pn)}},Fo=(ee,pe,rt,Et)=>Tt(ee,pe,rt,Et,!1),Ce=(ee,pe,rt,Et)=>{ee.dom.removeEventListener(pe,rt,Et)},Te=qe,_t=(ee,pe,rt)=>Fo(ee,pe,Te,rt),nn=ee=>{let pe=!1,rt;return(...Et)=>(pe||(pe=!0,rt=ee.apply(null,Et)),rt)},an=(ee,pe,rt,Et)=>{const pn=ee.isiOS()&&/ipad/i.test(rt)===!0,Oo=ee.isiOS()&&!pn,Cr=ee.isiOS()||ee.isAndroid(),ba=Cr||Et("(pointer:coarse)"),Hr=pn||!Oo&&Cr&&Et("(min-device-width:768px)"),oa=Oo||Cr&&!Hr,Xs=pe.isSafari()&&ee.isiOS()&&/safari/i.test(rt)===!1,Vr=!oa&&!Hr&&!Xs;return{isiPad:_e(pn),isiPhone:_e(Oo),isTablet:_e(Hr),isPhone:_e(oa),isTouch:_e(ba),isAndroid:ee.isAndroid,isiOS:ee.isiOS,isWebView:_e(Xs),isDesktop:_e(Vr)}},_n=(ee,pe)=>{for(let rt=0;rt<ee.length;rt++){const Et=ee[rt];if(Et.test(pe))return Et}},Pn=(ee,pe)=>{const rt=_n(ee,pe);if(!rt)return{major:0,minor:0};const Et=pn=>Number(pe.replace(rt,"$"+pn));return Vn(Et(1),Et(2))},An=(ee,pe)=>{const rt=String(pe).toLowerCase();return ee.length===0?$n():Pn(ee,rt)},$n=()=>Vn(0,0),Vn=(ee,pe)=>({major:ee,minor:pe}),Xo={nu:Vn,detect:An,unknown:$n},Os=(ee,pe)=>qt(pe.brands,rt=>{const Et=rt.brand.toLowerCase();return ge(ee,pn=>{var Oo;return Et===((Oo=pn.brand)===null||Oo===void 0?void 0:Oo.toLowerCase())}).map(pn=>({current:pn.name,version:Xo.nu(parseInt(rt.version,10),0)}))}),Bi=(ee,pe)=>{const rt=String(pe).toLowerCase();return ge(ee,Et=>Et.search(rt))},Oa=(ee,pe)=>Bi(ee,pe).map(rt=>{const Et=Xo.detect(rt.versionRegexes,pe);return{current:rt.name,version:Et}}),ql=(ee,pe)=>Bi(ee,pe).map(rt=>{const Et=Xo.detect(rt.versionRegexes,pe);return{current:rt.name,version:Et}}),Po=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Io=ee=>pe=>Pt(pe,ee),ds=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:ee=>Pt(ee,"edge/")&&Pt(ee,"chrome")&&Pt(ee,"safari")&&Pt(ee,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Po],search:ee=>Pt(ee,"chrome")&&!Pt(ee,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:ee=>Pt(ee,"msie")||Pt(ee,"trident")},{name:"Opera",versionRegexes:[Po,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Io("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Io("firefox")},{name:"Safari",versionRegexes:[Po,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:ee=>(Pt(ee,"safari")||Pt(ee,"mobile/"))&&Pt(ee,"applewebkit")}],Wi=[{name:"Windows",search:Io("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:ee=>Pt(ee,"iphone")||Pt(ee,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Io("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Io("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Io("linux"),versionRegexes:[]},{name:"Solaris",search:Io("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Io("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Io("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Fi={browsers:_e(ds),oses:_e(Wi)},Dr="Edge",il="Chromium",ki="IE",Ac="Opera",vs="Firefox",ha="Safari",ji=()=>qa({current:void 0,version:Xo.unknown()}),qa=ee=>{const pe=ee.current,rt=ee.version,Et=pn=>()=>pe===pn;return{current:pe,version:rt,isEdge:Et(Dr),isChromium:Et(il),isIE:Et(ki),isOpera:Et(Ac),isFirefox:Et(vs),isSafari:Et(ha)}},na={unknown:ji,nu:qa,edge:_e(Dr),chromium:_e(il),ie:_e(ki),opera:_e(Ac),firefox:_e(vs),safari:_e(ha)},_a="Windows",mi="iOS",Tc="Android",ma="Linux",eu="macOS",ga="Solaris",Gl="FreeBSD",Ii="ChromeOS",al=()=>Oc({current:void 0,version:Xo.unknown()}),Oc=ee=>{const pe=ee.current,rt=ee.version,Et=pn=>()=>pe===pn;return{current:pe,version:rt,isWindows:Et(_a),isiOS:Et(mi),isAndroid:Et(Tc),isMacOS:Et(eu),isLinux:Et(ma),isSolaris:Et(ga),isFreeBSD:Et(Gl),isChromeOS:Et(Ii)}},tu={unknown:al,nu:Oc,windows:_e(_a),ios:_e(mi),android:_e(Tc),linux:_e(ma),macos:_e(eu),solaris:_e(ga),freebsd:_e(Gl),chromeos:_e(Ii)},Q={detect:(ee,pe,rt)=>{const Et=Fi.browsers(),pn=Fi.oses(),Oo=pe.bind(Hr=>Os(Et,Hr)).orThunk(()=>Oa(Et,ee)).fold(na.unknown,na.nu),Cr=ql(pn,ee).fold(tu.unknown,tu.nu),ba=an(Cr,Oo,ee,rt);return{browser:Oo,os:Cr,deviceType:ba}}},Oe=ee=>window.matchMedia(ee).matches;let Ze=nn(()=>Q.detect(navigator.userAgent,Re.from(navigator.userAgentData),Oe));const St=()=>Ze(),Ut=(ee,pe)=>({left:ee,top:pe,translate:(Et,pn)=>Ut(ee+Et,pe+pn)}),Zn=Ut,_s=ee=>{const pe=ee!==void 0?ee.dom:document,rt=pe.body.scrollLeft||pe.documentElement.scrollLeft,Et=pe.body.scrollTop||pe.documentElement.scrollTop;return Zn(rt,Et)},Rs=ee=>{const pe=ee===void 0?window:ee;return St().browser.isFirefox()?Re.none():Re.from(pe.visualViewport)},ys=(ee,pe,rt,Et)=>({x:ee,y:pe,width:rt,height:Et,right:ee+rt,bottom:pe+Et}),Ys=ee=>{const pe=ee===void 0?window:ee,rt=pe.document,Et=_s(cs.fromDom(rt));return Rs(pe).fold(()=>{const pn=pe.document.documentElement,Oo=pn.clientWidth,Cr=pn.clientHeight;return ys(Et.left,Et.top,Oo,Cr)},pn=>ys(Math.max(pn.pageLeft,Et.left),Math.max(pn.pageTop,Et.top),pn.width,pn.height))},Wo=(ee,pe,rt)=>Rs(rt).map(Et=>{const pn=Oo=>pe(Mo(Oo));return Et.addEventListener(ee,pn),{unbind:()=>Et.removeEventListener(ee,pn)}}).getOrThunk(()=>({unbind:ae}));var ur=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ei=tinymce.util.Tools.resolve("tinymce.Env");const Mu=(ee,pe)=>{ee.dispatch("FullscreenStateChanged",{state:pe}),ee.dispatch("ResizeEditor")},on=ee=>pe=>pe.options.get(ee),Pu=ee=>{const pe=ee.options.register;pe("fullscreen_native",{processor:"boolean",default:!1})},$r=on("fullscreen_native"),U=ee=>{const pe=cs.fromDom(ee.getElement());return In(pe).map(bo).getOrThunk(()=>_r(Zr(pe)))},se=ee=>ee.fullscreenElement!==void 0?ee.fullscreenElement:ee.msFullscreenElement!==void 0?ee.msFullscreenElement:ee.webkitFullscreenElement!==void 0?ee.webkitFullscreenElement:null,be=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",ct=ee=>{const pe=ee.dom;pe.requestFullscreen?pe.requestFullscreen():pe.msRequestFullscreen?pe.msRequestFullscreen():pe.webkitRequestFullScreen&&pe.webkitRequestFullScreen()},dn=ee=>{const pe=ee.dom;pe.exitFullscreen?pe.exitFullscreen():pe.msExitFullscreen?pe.msExitFullscreen():pe.webkitCancelFullScreen&&pe.webkitCancelFullScreen()},Vo=ee=>ee.dom===se(Zr(ee).dom),Cn=(ee,pe,rt)=>ft(xr(ee,rt),pe),oi=(ee,pe)=>ft(fi(ee),pe),Lt=ee=>Js(ee),Qs=(ee,pe,rt)=>Cn(ee,Et=>$t(Et,pe),rt),pa=(ee,pe)=>oi(ee,rt=>$t(rt,pe)),zs="data-ephox-mobile-fullscreen-style",qr="display:none!important;",Sd="position:absolute!important;",es="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",ll="background-color:rgb(255,255,255)!important;",Ga=Ei.os.isAndroid(),Ru=ee=>{const pe=xt(ee,"background-color");return pe!==void 0&&pe!==""?"background-color:"+pe+"!important":ll},rr=(ee,pe,rt)=>{const Et=oa=>pa(oa,"*:not(.tox-silver-sink)"),pn=oa=>Xs=>{const Vr=Yn(Xs,"style"),gi=Vr===void 0?"no-styles":Vr.trim();gi!==oa&&(ao(Xs,zs,gi),ut(Xs,ee.parseStyle(oa)))},Oo=Qs(pe,"*"),Cr=Ye(Oo,Et),ba=Ru(rt);Ee(Cr,pn(qr)),Ee(Oo,pn(Sd+es+ba)),pn((Ga===!0?"":Sd)+es+ba)(pe)},Nu=ee=>{const pe=Lt("["+zs+"]");Ee(pe,rt=>{const Et=Yn(rt,zs);Et&&Et!=="no-styles"?ut(rt,ee.parseStyle(Et)):ls(rt,"style"),ls(rt,zs)})},Gg=ur.DOM,Kg=()=>Ys(window),dr=ee=>window.scrollTo(ee.x,ee.y),Sm=Rs().fold(()=>({bind:ae,unbind:ae}),ee=>{const pe=Ie(),rt=yt(),Et=yt(),pn=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},Oo=()=>{window.requestAnimationFrame(()=>{pe.on(oa=>ut(oa,{top:ee.offsetTop+"px",left:ee.offsetLeft+"px",height:ee.height+"px",width:ee.width+"px"}))})},Cr=wt(()=>{pn(),Oo()},50);return{bind:oa=>{pe.set(oa),Cr.throttle(),rt.set(Wo("resize",Cr.throttle)),Et.set(Wo("scroll",Cr.throttle))},unbind:()=>{pe.on(()=>{rt.clear(),Et.clear()}),pe.clear()}}}),kd=(ee,pe)=>{const rt=document.body,Et=document.documentElement,pn=ee.getContainer(),Oo=cs.fromDom(pn),Cr=us(Oo).filter(Gr=>ve(Gr)&&pt(Gr,"tox-silver-sink")),ba=U(ee),Hr=pe.get(),oa=cs.fromDom(ee.getBody()),Xs=Ei.deviceType.isTouch(),Vr=pn.style,gi=ee.iframeElement,Da=gi==null?void 0:gi.style,Ed=Gr=>{Gr(rt,"tox-fullscreen"),Gr(Et,"tox-fullscreen"),Gr(pn,"tox-fullscreen"),In(Oo).map(Kl=>bo(Kl).dom).each(Kl=>{Gr(Kl,"tox-fullscreen"),Gr(Kl,"tox-shadowhost")})},Nr=()=>{Xs&&Nu(ee.dom),Ed(Gg.removeClass),Sm.unbind(),Re.from(pe.get()).each(Gr=>Gr.fullscreenChangeHandler.unbind())};if(Hr)Hr.fullscreenChangeHandler.unbind(),$r(ee)&&Vo(ba)&&dn(Zr(ba)),Da.width=Hr.iframeWidth,Da.height=Hr.iframeHeight,Vr.width=Hr.containerWidth,Vr.height=Hr.containerHeight,Vr.top=Hr.containerTop,Vr.left=Hr.containerLeft,Be(Cr,Hr.sinkCssPosition,(Gr,Kl)=>{Ae(Gr,"position",Kl)}),Nr(),dr(Hr.scrollPos),pe.set(null),Mu(ee,!1),ee.off("remove",Nr);else{const Gr=_t(Zr(ba),be(),Ad=>{$r(ee)&&!Vo(ba)&&pe.get()!==null&&kd(ee,pe)}),Kl={scrollPos:Kg(),containerWidth:Vr.width,containerHeight:Vr.height,containerTop:Vr.top,containerLeft:Vr.left,iframeWidth:Da.width,iframeHeight:Da.height,fullscreenChangeHandler:Gr,sinkCssPosition:Cr.map(Ad=>xt(Ad,"position"))};Xs&&rr(ee.dom,Oo,oa),Da.width=Da.height="100%",Vr.width=Vr.height="",Ed(Gg.addClass),Cr.each(Ad=>{Ae(Ad,"position","fixed")}),Sm.bind(Oo),ee.on("remove",Nr),pe.set(Kl),$r(ee)&&ct(ba),Mu(ee,!0)}},Ka=(ee,pe)=>{ee.addCommand("mceFullScreen",()=>{kd(ee,pe)})},cl=(ee,pe)=>rt=>{rt.setActive(pe.get()!==null);const Et=pn=>rt.setActive(pn.state);return ee.on("FullscreenStateChanged",Et),()=>ee.off("FullscreenStateChanged",Et)},xf=(ee,pe)=>{const rt=()=>ee.execCommand("mceFullScreen");ee.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:rt,onSetup:cl(ee,pe)}),ee.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:rt,onSetup:cl(ee,pe)})};var ts=()=>{o.add("fullscreen",ee=>{const pe=u(null);return ee.inline||(Pu(ee),Ka(ee,pe),xf(ee,pe),ee.addShortcut("Meta+Shift+F","","mceFullScreen")),i(pe)})};ts()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=De=>G=>G.options.get(De),i=De=>{const G=De.options.register;G("insertdatetime_dateformat",{processor:"string",default:De.translate("%Y-%m-%d")}),G("insertdatetime_timeformat",{processor:"string",default:De.translate("%H:%M:%S")}),G("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),G("insertdatetime_element",{processor:"boolean",default:!1})},l=o("insertdatetime_dateformat"),d=o("insertdatetime_timeformat"),m=o("insertdatetime_formats"),p=o("insertdatetime_element"),v=De=>{const G=m(De);return G.length>0?G[0]:d(De)},x="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),k="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),T="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),M="January February March April May June July August September October November December".split(" "),N=(De,G)=>{if(De=""+De,De.length<G)for(let qe=0;qe<G-De.length;qe++)De="0"+De;return De},I=(De,G,qe=new Date)=>(G=G.replace("%D","%m/%d/%Y"),G=G.replace("%r","%I:%M:%S %p"),G=G.replace("%Y",""+qe.getFullYear()),G=G.replace("%y",""+qe.getYear()),G=G.replace("%m",N(qe.getMonth()+1,2)),G=G.replace("%d",N(qe.getDate(),2)),G=G.replace("%H",""+N(qe.getHours(),2)),G=G.replace("%M",""+N(qe.getMinutes(),2)),G=G.replace("%S",""+N(qe.getSeconds(),2)),G=G.replace("%I",""+((qe.getHours()+11)%12+1)),G=G.replace("%p",qe.getHours()<12?"AM":"PM"),G=G.replace("%B",""+De.translate(M[qe.getMonth()])),G=G.replace("%b",""+De.translate(T[qe.getMonth()])),G=G.replace("%A",""+De.translate(k[qe.getDay()])),G=G.replace("%a",""+De.translate(x[qe.getDay()])),G=G.replace("%%","%"),G),z=(De,G,qe,Re)=>{const $e=De.dom.create("time",{datetime:qe},Re);De.dom.replace($e,G),De.selection.select($e,!0),De.selection.collapse(!1)},Y=(De,G)=>{if(p(De)){const qe=I(De,G);let Re;/%[HMSIp]/.test(G)?Re=I(De,"%Y-%m-%dT%H:%M"):Re=I(De,"%Y-%m-%d");const $e=De.dom.getParent(De.selection.getStart(),"time");$e?z(De,$e,Re,qe):De.insertContent('<time datetime="'+Re+'">'+qe+"</time>")}else De.insertContent(I(De,G))},J=De=>{De.addCommand("mceInsertDate",(G,qe)=>{Y(De,qe!=null?qe:l(De))}),De.addCommand("mceInsertTime",(G,qe)=>{Y(De,qe!=null?qe:d(De))})},q=De=>{let G=De;return{get:()=>G,set:$e=>{G=$e}}};var ae=tinymce.util.Tools.resolve("tinymce.util.Tools");const Z=De=>G=>{const qe=()=>{G.setEnabled(De.selection.isEditable())};return De.on("NodeChange",qe),qe(),()=>{De.off("NodeChange",qe)}},ce=De=>{const G=m(De),qe=q(v(De)),Re=le=>De.execCommand("mceInsertDate",!1,le);De.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:le=>le===qe.get(),fetch:le=>{le(ae.map(G,Ee=>({type:"choiceitem",text:I(De,Ee),value:Ee})))},onAction:le=>{Re(qe.get())},onItemAction:(le,Ee)=>{qe.set(Ee),Re(Ee)},onSetup:Z(De)});const $e=le=>()=>{qe.set(le),Re(le)};De.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>ae.map(G,le=>({type:"menuitem",text:I(De,le),onAction:$e(le)})),onSetup:Z(De)})};var _e=()=>{u.add("insertdatetime",De=>{i(De),J(De),ce(De)})};_e()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(Q,Oe,Ze)=>{var St;return Ze(Q,Oe.prototype)?!0:((St=Q.constructor)===null||St===void 0?void 0:St.name)===Oe.name},i=Q=>{const Oe=typeof Q;return Q===null?"null":Oe==="object"&&Array.isArray(Q)?"array":Oe==="object"&&o(Q,String,(Ze,St)=>St.isPrototypeOf(Ze))?"string":Oe},l=Q=>Oe=>i(Oe)===Q,d=Q=>Oe=>typeof Oe===Q,m=Q=>Oe=>Q===Oe,p=l("string"),v=l("object"),x=l("array"),k=m(null),T=d("boolean"),M=Q=>Q==null,N=Q=>!M(Q),I=d("function"),z=(Q,Oe)=>{if(x(Q)){for(let Ze=0,St=Q.length;Ze<St;++Ze)if(!Oe(Q[Ze]))return!1;return!0}return!1},Y=()=>{},J=Q=>()=>Q,q=(Q,Oe)=>Q===Oe;class ae{constructor(Oe,Ze){this.tag=Oe,this.value=Ze}static some(Oe){return new ae(!0,Oe)}static none(){return ae.singletonNone}fold(Oe,Ze){return this.tag?Ze(this.value):Oe()}isSome(){return this.tag}isNone(){return!this.tag}map(Oe){return this.tag?ae.some(Oe(this.value)):ae.none()}bind(Oe){return this.tag?Oe(this.value):ae.none()}exists(Oe){return this.tag&&Oe(this.value)}forall(Oe){return!this.tag||Oe(this.value)}filter(Oe){return!this.tag||Oe(this.value)?this:ae.none()}getOr(Oe){return this.tag?this.value:Oe}or(Oe){return this.tag?this:Oe}getOrThunk(Oe){return this.tag?this.value:Oe()}orThunk(Oe){return this.tag?this:Oe()}getOrDie(Oe){if(this.tag)return this.value;throw new Error(Oe!=null?Oe:"Called getOrDie on None")}static from(Oe){return N(Oe)?ae.some(Oe):ae.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Oe){this.tag&&Oe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ae.singletonNone=new ae(!1);const Z=Array.prototype.indexOf,ce=Array.prototype.push,_e=(Q,Oe)=>Z.call(Q,Oe),De=(Q,Oe)=>_e(Q,Oe)>-1,G=(Q,Oe)=>{const Ze=Q.length,St=new Array(Ze);for(let Ut=0;Ut<Ze;Ut++){const Zn=Q[Ut];St[Ut]=Oe(Zn,Ut)}return St},qe=(Q,Oe)=>{for(let Ze=0,St=Q.length;Ze<St;Ze++){const Ut=Q[Ze];Oe(Ut,Ze)}},Re=(Q,Oe,Ze)=>(qe(Q,(St,Ut)=>{Ze=Oe(Ze,St,Ut)}),Ze),$e=Q=>{const Oe=[];for(let Ze=0,St=Q.length;Ze<St;++Ze){if(!x(Q[Ze]))throw new Error("Arr.flatten item "+Ze+" was not an array, input: "+Q);ce.apply(Oe,Q[Ze])}return Oe},le=(Q,Oe)=>$e(G(Q,Oe)),Ee=(Q,Oe)=>{for(let Ze=0;Ze<Q.length;Ze++){const St=Oe(Q[Ze],Ze);if(St.isSome())return St}return ae.none()},ft=(Q,Oe,Ze=q)=>Q.exists(St=>Ze(St,Oe)),ne=Q=>{const Oe=[],Ze=St=>{Oe.push(St)};for(let St=0;St<Q.length;St++)Q[St].each(Ze);return Oe},ge=(Q,Oe)=>Q?ae.some(Oe):ae.none(),O=Q=>Oe=>Oe.options.get(Q),Ye=Q=>{const Oe=Q.options.register;Oe("link_assume_external_targets",{processor:Ze=>{const St=p(Ze)||T(Ze);return St?Ze===!0?{value:1,valid:St}:Ze==="http"||Ze==="https"?{value:Ze,valid:St}:{value:0,valid:St}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),Oe("link_context_toolbar",{processor:"boolean",default:!1}),Oe("link_list",{processor:Ze=>p(Ze)||I(Ze)||z(Ze,v)}),Oe("link_default_target",{processor:"string"}),Oe("link_default_protocol",{processor:"string",default:"https"}),Oe("link_target_list",{processor:Ze=>T(Ze)||z(Ze,v),default:!0}),Oe("link_rel_list",{processor:"object[]",default:[]}),Oe("link_class_list",{processor:"object[]",default:[]}),Oe("link_title",{processor:"boolean",default:!0}),Oe("allow_unsafe_link_target",{processor:"boolean",default:!1}),Oe("link_quicklink",{processor:"boolean",default:!1})},me=O("link_assume_external_targets"),lt=O("link_context_toolbar"),qt=O("link_list"),Be=O("link_default_target"),Ue=O("link_default_protocol"),yt=O("link_target_list"),Ie=O("link_rel_list"),wt=O("link_class_list"),ue=O("link_title"),je=O("allow_unsafe_link_target"),V=O("link_quicklink");var kn=tinymce.util.Tools.resolve("tinymce.util.Tools");const un=Q=>p(Q.value)?Q.value:"",oo=Q=>p(Q.text)?Q.text:p(Q.title)?Q.title:"",Do=(Q,Oe)=>{const Ze=[];return kn.each(Q,St=>{const Ut=oo(St);if(St.menu!==void 0){const Zn=Do(St.menu,Oe);Ze.push({text:Ut,items:Zn})}else{const Zn=Oe(St);Ze.push({text:Ut,value:Zn})}}),Ze},Ss=(Q=un)=>Oe=>ae.from(Oe).map(Ze=>Do(Ze,Q)),nt={sanitize:Q=>Ss(un)(Q),sanitizeWith:Ss,createUi:(Q,Oe)=>Ze=>({name:Q,type:"listbox",label:Oe,items:Ze}),getValue:un},de=Object.keys,xe=Object.hasOwnProperty,Fe=(Q,Oe)=>{const Ze=de(Q);for(let St=0,Ut=Ze.length;St<Ut;St++){const Zn=Ze[St],_s=Q[Zn];Oe(_s,Zn)}},Ne=Q=>(Oe,Ze)=>{Q[Ze]=Oe},kt=(Q,Oe,Ze,St)=>{Fe(Q,(Ut,Zn)=>{(Oe(Ut,Zn)?Ze:St)(Ut,Zn)})},ve=(Q,Oe)=>{const Ze={};return kt(Q,Oe,Ne(Ze),Y),Ze},We=(Q,Oe)=>xe.call(Q,Oe),st=(Q,Oe)=>We(Q,Oe)&&Q[Oe]!==void 0&&Q[Oe]!==null;var en=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),jn=tinymce.util.Tools.resolve("tinymce.util.URI");const On=Q=>N(Q)&&Q.nodeName.toLowerCase()==="a",ao=Q=>On(Q)&&!!Xe(Q),Yn=(Q,Oe)=>{if(Q.collapsed)return[];{const Ze=Q.cloneContents(),St=Ze.firstChild,Ut=new en(St,Ze),Zn=[];let _s=St;do Oe(_s)&&Zn.push(_s);while(_s=Ut.next());return Zn}},ls=Q=>/^\w+:/i.test(Q),Xe=Q=>{var Oe,Ze;return(Ze=(Oe=Q.getAttribute("data-mce-href"))!==null&&Oe!==void 0?Oe:Q.getAttribute("href"))!==null&&Ze!==void 0?Ze:""},pt=(Q,Oe)=>{const Ze=["noopener"],St=Q?Q.split(/\s+/):[],Ut=ys=>kn.trim(ys.sort().join(" ")),Zn=ys=>(ys=_s(ys),ys.length>0?ys.concat(Ze):Ze),_s=ys=>ys.filter(Ys=>kn.inArray(Ze,Ys)===-1),Rs=Oe?Zn(St):_s(St);return Rs.length>0?Ut(Rs):""},Pt=Q=>Q.replace(/\uFEFF/g,""),jt=(Q,Oe)=>(Oe=Oe||lo(Q.selection.getRng())[0]||Q.selection.getNode(),So(Oe)?ae.from(Q.dom.select("a[href]",Oe)[0]):ae.from(Q.dom.getParent(Oe,"a[href]"))),vn=(Q,Oe)=>jt(Q,Oe).isSome(),so=(Q,Oe)=>{const Ze=Oe.fold(()=>Q.getContent({format:"text"}),St=>St.innerText||St.textContent||"");return Pt(Ze)},lo=Q=>Yn(Q,ao),Qo=Q=>kn.grep(Q,ao),Bo=Q=>Qo(Q).length>0,cs=Q=>lo(Q).length>0,$t=Q=>{const Oe=Q.schema.getTextInlineElements(),Ze=Zn=>Zn.nodeType===1&&!On(Zn)&&!We(Oe,Zn.nodeName.toLowerCase());if(jt(Q).exists(Zn=>Zn.hasAttribute("data-mce-block")))return!1;const Ut=Q.selection.getRng();return Ut.collapsed?!0:Yn(Ut,Ze).length===0},So=Q=>N(Q)&&Q.nodeName==="FIGURE"&&/\bimage\b/i.test(Q.className),Js=Q=>Re(["title","rel","class","target"],(Ze,St)=>(Q[St].each(Ut=>{Ze[St]=Ut.length>0?Ut:null}),Ze),{href:Q.href}),wr=(Q,Oe)=>(Oe==="http"||Oe==="https")&&!ls(Q)?Oe+"://"+Q:Q,Zr=(Q,Oe)=>{const Ze=ie({},Oe);if(Ie(Q).length===0&&!je(Q)){const St=pt(Ze.rel,Ze.target==="_blank");Ze.rel=St||null}return ae.from(Ze.target).isNone()&&yt(Q)===!1&&(Ze.target=Be(Q)),Ze.href=wr(Ze.href,me(Q)),Ze},hr=(Q,Oe,Ze,St)=>{Ze.each(Ut=>{We(Oe,"innerText")?Oe.innerText=Ut:Oe.textContent=Ut}),Q.dom.setAttribs(Oe,St),Q.selection.select(Oe)},di=(Q,Oe,Ze,St)=>{const Ut=Q.dom;So(Oe)?In(Ut,Oe,St):Ze.fold(()=>{Q.execCommand("mceInsertLink",!1,St)},Zn=>{Q.insertContent(Ut.createHTML("a",St,Ut.encode(Zn)))})},xr=(Q,Oe,Ze)=>{const St=Q.selection.getNode(),Ut=jt(Q,St),Zn=Zr(Q,Js(Ze));Q.undoManager.transact(()=>{Ze.href===Oe.href&&Oe.attach(),Ut.fold(()=>{di(Q,St,Ze.text,Zn)},_s=>{Q.focus(),hr(Q,_s,Ze.text,Zn)})})},fi=Q=>{const Oe=Q.dom,Ze=Q.selection,St=Ze.getBookmark(),Ut=Ze.getRng().cloneRange(),Zn=Oe.getParent(Ut.startContainer,"a[href]",Q.getBody()),_s=Oe.getParent(Ut.endContainer,"a[href]",Q.getBody());Zn&&Ut.setStartBefore(Zn),_s&&Ut.setEndAfter(_s),Ze.setRng(Ut),Q.execCommand("unlink"),Ze.moveToBookmark(St)},us=Q=>{Q.undoManager.transact(()=>{const Oe=Q.selection.getNode();So(Oe)?tn(Q,Oe):fi(Q),Q.focus()})},Bn=Q=>{const{class:Oe,href:Ze,rel:St,target:Ut,text:Zn,title:_s}=Q;return ve({class:Oe.getOrNull(),href:Ze,rel:St.getOrNull(),target:Ut.getOrNull(),text:Zn.getOrNull(),title:_s.getOrNull()},(Rs,ys)=>k(Rs)===!1)},hi=(Q,Oe)=>{const Ze=Q.options.get,St={allow_html_data_urls:Ze("allow_html_data_urls"),allow_script_urls:Ze("allow_script_urls"),allow_svg_data_urls:Ze("allow_svg_data_urls")},Ut=Oe.href;return Ot(ie({},Oe),{href:jn.isDomSafe(Ut,"a",St)?Ut:""})},Ke=(Q,Oe,Ze)=>{const St=hi(Q,Ze);Q.hasPlugin("rtc",!0)?Q.execCommand("createlink",!1,Bn(St)):xr(Q,Oe,St)},ht=Q=>{Q.hasPlugin("rtc",!0)?Q.execCommand("unlink"):us(Q)},tn=(Q,Oe)=>{var Ze;const St=Q.dom.select("img",Oe)[0];if(St){const Ut=Q.dom.getParents(St,"a[href]",Oe)[0];Ut&&((Ze=Ut.parentNode)===null||Ze===void 0||Ze.insertBefore(St,Ut),Q.dom.remove(Ut))}},In=(Q,Oe,Ze)=>{var St;const Ut=Q.select("img",Oe)[0];if(Ut){const Zn=Q.create("a",Ze);(St=Ut.parentNode)===null||St===void 0||St.insertBefore(Zn,Ut),Zn.appendChild(Ut)}},bo=Q=>st(Q,"items"),Ks=(Q,Oe)=>Ee(Oe,Ze=>bo(Ze)?Ks(Q,Ze.items):ge(Ze.value===Q,Ze)),Lr=(Q,Oe,Ze,St)=>{const Ut=St[Oe],Zn=Q.length>0;return Ut!==void 0?Ks(Ut,Ze).map(_s=>({url:{value:_s.value,meta:{text:Zn?Q:_s.text,attach:Y}},text:Zn?Q:_s.text})):ae.none()},mr=(Q,Oe)=>Oe==="link"?Q.link:Oe==="anchor"?Q.anchor:ae.none(),ke={init:(Q,Oe)=>{const Ze={text:Q.text,title:Q.title},St=ys=>{var Ys;return ge(Ze.title.length<=0,ae.from((Ys=ys.meta)===null||Ys===void 0?void 0:Ys.title).getOr(""))},Ut=ys=>{var Ys;return ge(Ze.text.length<=0,ae.from((Ys=ys.meta)===null||Ys===void 0?void 0:Ys.text).getOr(ys.value))},Zn=ys=>{const Ys=Ut(ys.url),Wo=St(ys.url);return Ys.isSome()||Wo.isSome()?ae.some(ie(ie({},Ys.map(ur=>({text:ur})).getOr({})),Wo.map(ur=>({title:ur})).getOr({}))):ae.none()},_s=(ys,Ys)=>{const Wo=mr(Oe,Ys).getOr([]);return Lr(Ze.text,Ys,Wo,ys)};return{onChange:(ys,Ys)=>{const Wo=Ys.name;return Wo==="url"?Zn(ys()):De(["anchor","link"],Wo)?_s(ys(),Wo):((Wo==="text"||Wo==="title")&&(Ze[Wo]=ys()[Wo]),ae.none())}}},getDelta:Lr};var Ae=tinymce.util.Tools.resolve("tinymce.util.Delay");const ut=(Q,Oe,Ze)=>{const St=Q.selection.getRng();Ae.setEditorTimeout(Q,()=>{Q.windowManager.confirm(Oe,Ut=>{Q.selection.setRng(St),Ze(Ut)})})},xt=Q=>{const Oe=Q.href;return Oe.indexOf("@")>0&&Oe.indexOf("/")===-1&&Oe.indexOf("mailto:")===-1?ae.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:St=>Ot(ie({},St),{href:"mailto:"+Oe})}):ae.none()},En=(Q,Oe)=>Ze=>{const St=Ze.href;return Q===1&&!ls(St)||Q===0&&/^\s*www(\.|\d\.)/i.test(St)?ae.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${Oe}:// prefix?`,preprocess:Zn=>Ot(ie({},Zn),{href:Oe+"://"+St})}):ae.none()},Mo={preprocess:(Q,Oe)=>Ee([xt,En(me(Q),Ue(Q))],Ze=>Ze(Oe)).fold(()=>Promise.resolve(Oe),Ze=>new Promise(St=>{ut(Q,Ze.message,Ut=>{St(Ut?Ze.preprocess(Oe):Oe)})}))},Tt={getAnchors:Q=>{const Oe=Q.dom.select("a:not([href])"),Ze=le(Oe,St=>{const Ut=St.name||St.id;return Ut?[{text:Ut,value:"#"+Ut}]:[]});return Ze.length>0?ae.some([{text:"None",value:""}].concat(Ze)):ae.none()}},Ce={getClasses:Q=>{const Oe=wt(Q);return Oe.length>0?nt.sanitize(Oe):ae.none()}},Te=Q=>{try{return ae.some(JSON.parse(Q))}catch(Oe){return ae.none()}},nn={getLinks:Q=>{const Oe=St=>Q.convertURL(St.value||St.url||"","href"),Ze=qt(Q);return new Promise(St=>{p(Ze)?fetch(Ze).then(Ut=>Ut.ok?Ut.text().then(Te):Promise.reject()).then(St,()=>St(ae.none())):I(Ze)?Ze(Ut=>St(ae.some(Ut))):St(ae.from(Ze))}).then(St=>St.bind(nt.sanitizeWith(Oe)).map(Ut=>Ut.length>0?[{text:"None",value:""}].concat(Ut):Ut))}},_n={getRels:(Q,Oe)=>{const Ze=Ie(Q);if(Ze.length>0){const St=ft(Oe,"_blank"),Ut=je(Q)===!1,Zn=Rs=>pt(nt.getValue(Rs),St);return(Ut?nt.sanitizeWith(Zn):nt.sanitize)(Ze)}return ae.none()}},Pn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],$n={getTargets:Q=>{const Oe=yt(Q);return x(Oe)?nt.sanitize(Oe).orThunk(()=>ae.some(Pn)):Oe===!1?ae.none():ae.some(Pn)}},Vn=(Q,Oe,Ze)=>{const St=Q.getAttrib(Oe,Ze);return St!==null&&St.length>0?ae.some(St):ae.none()},Xo=(Q,Oe)=>{const Ze=Q.dom,Ut=$t(Q)?ae.some(so(Q.selection,Oe)):ae.none(),Zn=Oe.bind(Wo=>ae.from(Ze.getAttrib(Wo,"href"))),_s=Oe.bind(Wo=>ae.from(Ze.getAttrib(Wo,"target"))),Rs=Oe.bind(Wo=>Vn(Ze,Wo,"rel")),ys=Oe.bind(Wo=>Vn(Ze,Wo,"class")),Ys=Oe.bind(Wo=>Vn(Ze,Wo,"title"));return{url:Zn,text:Ut,title:Ys,target:_s,rel:Rs,linkClass:ys}},Bi={collect:(Q,Oe)=>nn.getLinks(Q).then(Ze=>{const St=Xo(Q,Oe);return{anchor:St,catalogs:{targets:$n.getTargets(Q),rels:_n.getRels(Q,St.target),classes:Ce.getClasses(Q),anchor:Tt.getAnchors(Q),link:Ze},optNode:Oe,flags:{titleEnabled:ue(Q)}}})},Oa=(Q,Oe)=>Ze=>{const St=Ze.getData();if(!St.url.value){ht(Q),Ze.close();return}const Ut=Rs=>ae.from(St[Rs]).filter(ys=>!ft(Oe.anchor[Rs],ys)),Zn={href:St.url.value,text:Ut("text"),target:Ut("target"),rel:Ut("rel"),class:Ut("linkClass"),title:Ut("title")},_s={href:St.url.value,attach:St.url.meta!==void 0&&St.url.meta.attach?St.url.meta.attach:Y};Mo.preprocess(Q,Zn).then(Rs=>{Ke(Q,_s,Rs)}),Ze.close()},ql=Q=>{const Oe=jt(Q);return Bi.collect(Q,Oe)},Po=(Q,Oe)=>{const Ze=Q.anchor,St=Ze.url.getOr("");return{url:{value:St,meta:{original:{value:St}}},text:Ze.text.getOr(""),title:Ze.title.getOr(""),anchor:St,link:St,rel:Ze.rel.getOr(""),target:Ze.target.or(Oe).getOr(""),linkClass:Ze.linkClass.getOr("")}},Io=(Q,Oe,Ze)=>{const St=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Ut=Q.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Zn=Q.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],_s=ae.from(Be(Ze)),Rs=Po(Q,_s),ys=Q.catalogs,Ys=ke.init(Rs,ys);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:$e([St,Ut,Zn,ne([ys.anchor.map(nt.createUi("anchor","Anchors")),ys.rels.map(nt.createUi("rel","Rel")),ys.targets.map(nt.createUi("target","Open link in...")),ys.link.map(nt.createUi("link","Link list")),ys.classes.map(nt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Rs,onChange:(ur,{name:Ei})=>{Ys.onChange(ur.getData,{name:Ei}).each(Mu=>{ur.setData(Mu)})},onSubmit:Oe}},ds=Q=>{ql(Q).then(Ze=>{const St=Oa(Q,Ze);return Io(Ze,St,Q)}).then(Ze=>{Q.windowManager.open(Ze)})},Wi=Q=>{Q.addCommand("mceLink",(Oe,Ze)=>{(Ze==null?void 0:Ze.dialog)===!0||!V(Q)?ds(Q):Q.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Fi=tinymce.util.Tools.resolve("tinymce.util.VK");const Dr=(Q,Oe)=>{document.body.appendChild(Q),Q.dispatchEvent(Oe),document.body.removeChild(Q)},il=Q=>{const Oe=document.createElement("a");Oe.target="_blank",Oe.href=Q,Oe.rel="noreferrer noopener";const Ze=document.createEvent("MouseEvents");Ze.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Dr(Oe,Ze)},ki=(Q,Oe)=>Q.dom.getParent(Oe,"a[href]"),Ac=Q=>ki(Q,Q.selection.getStart()),vs=Q=>Q.altKey===!0&&Q.shiftKey===!1&&Q.ctrlKey===!1&&Q.metaKey===!1,ha=(Q,Oe)=>{if(Oe){const Ze=Xe(Oe);if(/^#/.test(Ze)){const St=Q.dom.select(Ze);St.length&&Q.selection.scrollIntoView(St[0],!0)}else il(Oe.href)}},ji=Q=>()=>{Q.execCommand("mceLink",!1,{dialog:!0})},qa=Q=>()=>{ha(Q,Ac(Q))},na=Q=>{Q.on("click",Oe=>{const Ze=ki(Q,Oe.target);Ze&&Fi.metaKeyPressed(Oe)&&(Oe.preventDefault(),ha(Q,Ze))}),Q.on("keydown",Oe=>{if(!Oe.isDefaultPrevented()&&Oe.keyCode===13&&vs(Oe)){const Ze=Ac(Q);Ze&&(Oe.preventDefault(),ha(Q,Ze))}})},_a=(Q,Oe)=>(Q.on("NodeChange",Oe),()=>Q.off("NodeChange",Oe)),mi=Q=>Oe=>{const Ze=()=>{Oe.setActive(!Q.mode.isReadOnly()&&vn(Q,Q.selection.getNode())),Oe.setEnabled(Q.selection.isEditable())};return Ze(),_a(Q,Ze)},Tc=Q=>Oe=>{const Ze=()=>{Oe.setEnabled(Q.selection.isEditable())};return Ze(),_a(Q,Ze)},ma=Q=>(Q.selection.isCollapsed()?Qo(Q.dom.getParents(Q.selection.getStart())):lo(Q.selection.getRng())).length===1,eu=Q=>Oe=>{const Ze=()=>Oe.setEnabled(ma(Q));return Ze(),_a(Q,Ze)},ga=Q=>Oe=>{const Ze=Zn=>Bo(Zn)||cs(Q.selection.getRng()),St=Q.dom.getParents(Q.selection.getStart()),Ut=Zn=>{Oe.setEnabled(Ze(Zn)&&Q.selection.isEditable())};return Ut(St),_a(Q,Zn=>Ut(Zn.parents))},Gl=Q=>{Q.addShortcut("Meta+K","",()=>{Q.execCommand("mceLink")})},Ii=Q=>{Q.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ji(Q),onSetup:mi(Q)}),Q.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:qa(Q),onSetup:eu(Q)}),Q.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ht(Q),onSetup:ga(Q)})},al=Q=>{Q.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:qa(Q),onSetup:eu(Q)}),Q.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:Tc(Q),onAction:ji(Q)}),Q.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ht(Q),onSetup:ga(Q)})},Oc=Q=>{const Oe="link unlink openlink",Ze="link";Q.ui.registry.addContextMenu("link",{update:St=>Q.dom.isEditable(St)?Bo(Q.dom.getParents(St,"a"))?Oe:Ze:""})},tu=Q=>{const Oe=Ut=>{Ut.selection.collapse(!1)},Ze=Ut=>{const Zn=Q.selection.getNode();return Ut.setEnabled(vn(Q,Zn)),Y},St=Ut=>{const Zn=jt(Q),_s=$t(Q);if(Zn.isNone()&&_s){const Rs=so(Q.selection,Zn);return ge(Rs.length===0,Ut)}else return ae.none()};Q.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:mi(Q)},label:"Link",predicate:Ut=>lt(Q)&&vn(Q,Ut),initValue:()=>jt(Q).fold(J(""),Xe),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Ut=>{const Zn=Q.selection.getNode();return Ut.setActive(vn(Q,Zn)),mi(Q)(Ut)},onAction:Ut=>{const Zn=Ut.getValue(),_s=St(Zn);Ke(Q,{href:Zn,attach:Y},{href:Zn,text:_s,title:ae.none(),rel:ae.none(),target:ae.none(),class:ae.none()}),Oe(Q),Ut.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Ze,onAction:Ut=>{ht(Q),Ut.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Ze,onAction:Ut=>{qa(Q)(),Ut.hide()}}]})};var Cd=()=>{u.add("link",Q=>{Ye(Q),Ii(Q),al(Q),Oc(Q),tu(Q),na(Q),Wi(Q),Gl(Q)})};Cd()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(D,F,K)=>{var we;return K(D,F.prototype)?!0:((we=D.constructor)===null||we===void 0?void 0:we.name)===F.name},i=D=>{const F=typeof D;return D===null?"null":F==="object"&&Array.isArray(D)?"array":F==="object"&&o(D,String,(K,we)=>we.isPrototypeOf(K))?"string":F},l=D=>F=>i(F)===D,d=D=>F=>typeof F===D,m=l("string"),p=l("object"),v=l("array"),x=d("boolean"),k=D=>D==null,T=D=>!k(D),M=d("function"),N=d("number"),I=()=>{},z=(D,F)=>K=>D(F(K)),Y=D=>()=>D,J=(D,F)=>D===F;function q(D,...F){return(...K)=>{const we=F.concat(K);return D.apply(null,we)}}const ae=D=>F=>!D(F),Z=Y(!1);class ce{constructor(F,K){this.tag=F,this.value=K}static some(F){return new ce(!0,F)}static none(){return ce.singletonNone}fold(F,K){return this.tag?K(this.value):F()}isSome(){return this.tag}isNone(){return!this.tag}map(F){return this.tag?ce.some(F(this.value)):ce.none()}bind(F){return this.tag?F(this.value):ce.none()}exists(F){return this.tag&&F(this.value)}forall(F){return!this.tag||F(this.value)}filter(F){return!this.tag||F(this.value)?this:ce.none()}getOr(F){return this.tag?this.value:F}or(F){return this.tag?this:F}getOrThunk(F){return this.tag?this.value:F()}orThunk(F){return this.tag?this:F()}getOrDie(F){if(this.tag)return this.value;throw new Error(F!=null?F:"Called getOrDie on None")}static from(F){return T(F)?ce.some(F):ce.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(F){this.tag&&F(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ce.singletonNone=new ce(!1);const _e=Array.prototype.slice,De=Array.prototype.indexOf,G=Array.prototype.push,qe=(D,F)=>De.call(D,F),Re=(D,F)=>qe(D,F)>-1,$e=(D,F)=>{for(let K=0,we=D.length;K<we;K++){const Me=D[K];if(F(Me,K))return!0}return!1},le=(D,F)=>{const K=D.length,we=new Array(K);for(let Me=0;Me<K;Me++){const Ht=D[Me];we[Me]=F(Ht,Me)}return we},Ee=(D,F)=>{for(let K=0,we=D.length;K<we;K++){const Me=D[K];F(Me,K)}},ft=(D,F)=>{const K=[];for(let we=0,Me=D.length;we<Me;we++){const Ht=D[we];F(Ht,we)&&K.push(Ht)}return K},ne=(D,F)=>{if(D.length===0)return[];{let K=F(D[0]);const we=[];let Me=[];for(let Ht=0,Nn=D.length;Ht<Nn;Ht++){const wo=D[Ht],xo=F(wo);xo!==K&&(we.push(Me),Me=[]),K=xo,Me.push(wo)}return Me.length!==0&&we.push(Me),we}},ge=(D,F,K)=>(Ee(D,(we,Me)=>{K=F(K,we,Me)}),K),O=(D,F,K)=>{for(let we=0,Me=D.length;we<Me;we++){const Ht=D[we];if(F(Ht,we))return ce.some(Ht);if(K(Ht,we))break}return ce.none()},Ye=(D,F)=>O(D,F,Z),me=D=>{const F=[];for(let K=0,we=D.length;K<we;++K){if(!v(D[K]))throw new Error("Arr.flatten item "+K+" was not an array, input: "+D);G.apply(F,D[K])}return F},lt=(D,F)=>me(le(D,F)),qt=D=>{const F=_e.call(D,0);return F.reverse(),F},Be=(D,F)=>F>=0&&F<D.length?ce.some(D[F]):ce.none(),Ue=D=>Be(D,0),yt=D=>Be(D,D.length-1),Ie=(D,F)=>{const K=[],we=M(F)?Me=>$e(K,Ht=>F(Ht,Me)):Me=>Re(K,Me);for(let Me=0,Ht=D.length;Me<Ht;Me++){const Nn=D[Me];we(Nn)||K.push(Nn)}return K},wt=(D,F,K=J)=>D.exists(we=>K(we,F)),ue=(D,F,K=J)=>je(D,F,K).getOr(D.isNone()&&F.isNone()),je=(D,F,K)=>D.isSome()&&F.isSome()?ce.some(K(D.getOrDie(),F.getOrDie())):ce.none(),V=8,kn=9,un=11,oo=1,Do=3,Ss=(D,F)=>{const we=(F||document).createElement("div");if(we.innerHTML=D,!we.hasChildNodes()||we.childNodes.length>1){const Me="HTML does not have a single root node";throw new Error(Me)}return nt(we.childNodes[0])},Qe=(D,F)=>{const we=(F||document).createElement(D);return nt(we)},Bt=(D,F)=>{const we=(F||document).createTextNode(D);return nt(we)},nt=D=>{if(D==null)throw new Error("Node cannot be null or undefined");return{dom:D}},xe={fromHtml:Ss,fromTag:Qe,fromText:Bt,fromDom:nt,fromPoint:(D,F,K)=>ce.from(D.dom.elementFromPoint(F,K)).map(nt)},Fe=(D,F)=>{const K=D.dom;if(K.nodeType!==oo)return!1;{const we=K;if(we.matches!==void 0)return we.matches(F);if(we.msMatchesSelector!==void 0)return we.msMatchesSelector(F);if(we.webkitMatchesSelector!==void 0)return we.webkitMatchesSelector(F);if(we.mozMatchesSelector!==void 0)return we.mozMatchesSelector(F);throw new Error("Browser lacks native selectors")}},Ne=(D,F)=>D.dom===F.dom,kt=(D,F)=>{const K=D.dom,we=F.dom;return K===we?!1:K.contains(we)},ve=Fe,We=typeof window!="undefined"?window:Function("return this;")(),st=(D,F)=>{let K=F!=null?F:We;for(let we=0;we<D.length&&K!==void 0&&K!==null;++we)K=K[D[we]];return K},en=(D,F)=>{const K=D.split(".");return st(K,F)},jn=(D,F)=>en(D,F),On=(D,F)=>{const K=jn(D,F);if(K==null)throw new Error(D+" not available on this browser");return K},ao=Object.getPrototypeOf,Yn=D=>On("HTMLElement",D),ls=D=>{const F=en("ownerDocument.defaultView",D);return p(D)&&(Yn(F).prototype.isPrototypeOf(D)||/^HTML\w*Element$/.test(ao(D).constructor.name))},Xe=D=>D.dom.nodeName.toLowerCase(),pt=D=>D.dom.nodeType,Pt=D=>F=>pt(F)===D,jt=D=>pt(D)===V||Xe(D)==="#comment",vn=D=>so(D)&&ls(D.dom),so=Pt(oo),lo=Pt(Do),Qo=Pt(kn),Bo=Pt(un),cs=D=>F=>so(F)&&Xe(F)===D,$t=D=>xe.fromDom(D.dom.ownerDocument),So=D=>Qo(D)?D:$t(D),Js=D=>ce.from(D.dom.parentNode).map(xe.fromDom),wr=D=>ce.from(D.dom.parentElement).map(xe.fromDom),Zr=D=>ce.from(D.dom.nextSibling).map(xe.fromDom),hr=D=>le(D.dom.childNodes,xe.fromDom),di=(D,F)=>{const K=D.dom.childNodes;return ce.from(K[F]).map(xe.fromDom)},xr=D=>di(D,0),fi=D=>di(D,D.dom.childNodes.length-1),us=D=>Bo(D)&&T(D.dom.host),hi=M(Element.prototype.attachShadow)&&M(Node.prototype.getRootNode)?D=>xe.fromDom(D.dom.getRootNode()):So,Ke=D=>{const F=hi(D);return us(F)?ce.some(F):ce.none()},ht=D=>xe.fromDom(D.dom.host),tn=D=>{const F=lo(D)?D.dom.parentNode:D.dom;if(F==null||F.ownerDocument===null)return!1;const K=F.ownerDocument;return Ke(xe.fromDom(F)).fold(()=>K.body.contains(F),z(tn,ht))};var In=(D,F,K,we,Me)=>D(K,we)?ce.some(K):M(Me)&&Me(K)?ce.none():F(K,we,Me);const bo=(D,F,K)=>{let we=D.dom;const Me=M(K)?K:Z;for(;we.parentNode;){we=we.parentNode;const Ht=xe.fromDom(we);if(F(Ht))return ce.some(Ht);if(Me(Ht))break}return ce.none()},Ks=(D,F,K)=>In((Me,Ht)=>Ht(Me),bo,D,F,K),Lr=(D,F,K)=>bo(D,we=>Fe(we,F),K),mr=(D,F,K)=>In((Me,Ht)=>Fe(Me,Ht),Lr,D,F,K),_r=D=>mr(D,"[contenteditable]"),ke=(D,F=!1)=>tn(D)?D.dom.isContentEditable:_r(D).fold(Y(F),K=>Ae(K)==="true"),Ae=D=>D.dom.contentEditable,ut=(D,F)=>{Js(D).each(we=>{we.dom.insertBefore(F.dom,D.dom)})},xt=(D,F)=>{Zr(D).fold(()=>{Js(D).each(Me=>{Rn(Me,F)})},we=>{ut(we,F)})},En=(D,F)=>{xr(D).fold(()=>{Rn(D,F)},we=>{D.dom.insertBefore(F.dom,we.dom)})},Rn=(D,F)=>{D.dom.appendChild(F.dom)},Mo=(D,F)=>{Ee(F,K=>{ut(D,K)})},Vs=(D,F)=>{Ee(F,K=>{Rn(D,K)})},Tt=D=>{D.dom.textContent="",Ee(hr(D),F=>{Fo(F)})},Fo=D=>{const F=D.dom;F.parentNode!==null&&F.parentNode.removeChild(F)};var Ce=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Te=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),_t=tinymce.util.Tools.resolve("tinymce.util.VK");const nn=D=>le(D,xe.fromDom),an=Object.keys,_n=(D,F)=>{const K=an(D);for(let we=0,Me=K.length;we<Me;we++){const Ht=K[we],Nn=D[Ht];F(Nn,Ht)}},Pn=D=>(F,K)=>{D[K]=F},An=(D,F,K,we)=>{_n(D,(Me,Ht)=>{(F(Me,Ht)?K:we)(Me,Ht)})},$n=(D,F)=>{const K={};return An(D,F,Pn(K),I),K},Vn=(D,F,K)=>{if(m(K)||x(K)||N(K))D.setAttribute(F,K+"");else throw new Error("Attribute value was not simple")},Xo=(D,F)=>{const K=D.dom;_n(F,(we,Me)=>{Vn(K,Me,we)})},Os=D=>ge(D.dom.attributes,(F,K)=>(F[K.name]=K.value,F),{}),Bi=(D,F)=>xe.fromDom(D.dom.cloneNode(F)),Oa=D=>Bi(D,!0),ql=(D,F)=>{const K=xe.fromTag(F),we=Os(D);return Xo(K,we),K},Po=(D,F)=>{const K=ql(D,F);xt(D,K);const we=hr(D);return Vs(K,we),Fo(D),K};var Io=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ds=tinymce.util.Tools.resolve("tinymce.util.Tools");const Wi=D=>F=>T(F)&&F.nodeName.toLowerCase()===D,Fi=D=>F=>T(F)&&D.test(F.nodeName),Dr=D=>T(D)&&D.nodeType===3,il=D=>T(D)&&D.nodeType===1,ki=Fi(/^(OL|UL|DL)$/),Ac=Fi(/^(OL|UL)$/),vs=Wi("ol"),ha=Fi(/^(LI|DT|DD)$/),ji=Fi(/^(DT|DD)$/),qa=Fi(/^(TH|TD)$/),na=Wi("br"),_a=D=>{var F;return((F=D.parentNode)===null||F===void 0?void 0:F.firstChild)===D},mi=(D,F)=>T(F)&&F.nodeName in D.schema.getTextBlockElements(),Tc=(D,F)=>T(D)&&D.nodeName in F,ma=(D,F)=>T(F)&&F.nodeName in D.schema.getVoidElements(),eu=(D,F)=>na(F)?D.isBlock(F.nextSibling)&&!na(F.previousSibling):!1,ga=(D,F,K)=>{const we=D.isEmpty(F);return K&&D.select("span[data-mce-type=bookmark]",F).length>0?!1:we},Gl=(D,F)=>D.isChildOf(F,D.getRoot()),Ii=D=>F=>F.options.get(D),al=D=>{const F=D.options.register;F("lists_indent_on_tab",{processor:"boolean",default:!0})},Oc=Ii("lists_indent_on_tab"),tu=Ii("forced_root_block"),Cd=Ii("forced_root_block_attrs"),Q=(D,F)=>{const K=D.dom,we=D.schema.getBlockElements(),Me=K.createFragment(),Ht=tu(D),Nn=Cd(D);let wo,xo,to=!1;for(xo=K.create(Ht,Nn),Tc(F.firstChild,we)||Me.appendChild(xo);wo=F.firstChild;){const kr=wo.nodeName;!to&&(kr!=="SPAN"||wo.getAttribute("data-mce-type")!=="bookmark")&&(to=!0),Tc(wo,we)?(Me.appendChild(wo),xo=null):(xo||(xo=K.create(Ht,Nn),Me.appendChild(xo)),xo.appendChild(wo))}return!to&&xo&&xo.appendChild(K.create("br",{"data-mce-bogus":"1"})),Me},Oe=Io.DOM,Ze=(D,F,K)=>{const we=to=>{const kr=to.parentNode;kr&&ds.each(Me,qi=>{kr.insertBefore(qi,K.parentNode)}),Oe.remove(to)},Me=Oe.select('span[data-mce-type="bookmark"]',F),Ht=Q(D,K),Nn=Oe.createRng();Nn.setStartAfter(K),Nn.setEndAfter(F);const wo=Nn.extractContents();for(let to=wo.firstChild;to;to=to.firstChild)if(to.nodeName==="LI"&&D.dom.isEmpty(to)){Oe.remove(to);break}D.dom.isEmpty(wo)||Oe.insertAfter(wo,F),Oe.insertAfter(Ht,F);const xo=K.parentElement;xo&&ga(D.dom,xo)&&we(xo),Oe.remove(K),ga(D.dom,F)&&Oe.remove(F)},St=cs("dd"),Ut=cs("dt"),Zn=(D,F)=>{St(F)?Po(F,"dt"):Ut(F)&&wr(F).each(K=>Ze(D,K.dom,F.dom))},_s=D=>{Ut(D)&&Po(D,"dd")},Rs=(D,F,K)=>{F==="Indent"?Ee(K,_s):Ee(K,we=>Zn(D,we))},ys=(D,F)=>{if(Dr(D))return{container:D,offset:F};const K=Ce.getNode(D,F);return Dr(K)?{container:K,offset:F>=D.childNodes.length?K.data.length:0}:K.previousSibling&&Dr(K.previousSibling)?{container:K.previousSibling,offset:K.previousSibling.data.length}:K.nextSibling&&Dr(K.nextSibling)?{container:K.nextSibling,offset:0}:{container:D,offset:F}},Ys=D=>{const F=D.cloneRange(),K=ys(D.startContainer,D.startOffset);F.setStart(K.container,K.offset);const we=ys(D.endContainer,D.endOffset);return F.setEnd(we.container,we.offset),F},Wo=["OL","UL","DL"],ur=Wo.join(","),Ei=(D,F)=>{const K=F||D.selection.getStart(!0);return D.dom.getParent(K,ur,dn(D,K))},Mu=(D,F)=>T(D)&&F.length===1&&F[0]===D,on=D=>ft(D.querySelectorAll(ur),ki),Pu=D=>{const F=Ei(D),K=D.selection.getSelectedBlocks();return Mu(F,K)?on(F):ft(K,we=>ki(we)&&F!==we)},$r=(D,F)=>{const K=ds.map(F,we=>{const Me=D.dom.getParent(we,"li,dd,dt",dn(D,we));return Me||we});return Ie(K)},U=D=>{const F=D.selection.getSelectedBlocks();return ft($r(D,F),ha)},se=D=>ft(U(D),ji),be=(D,F)=>{const K=D.dom.getParents(F,"TD,TH");return K.length>0?K[0]:D.getBody()},ct=(D,F)=>!ki(F)&&!ha(F)&&$e(Wo,K=>D.isValidChild(F.nodeName,K)),dn=(D,F)=>{const K=D.dom.getParents(F,D.dom.isBlock);return Ye(K,Me=>ct(D.schema,Me)).getOr(D.getBody())},Vo=D=>Js(D).exists(F=>ha(F.dom)&&xr(F).exists(K=>!ki(K.dom))&&fi(F).exists(K=>!ki(K.dom))),Cn=(D,F)=>{const K=D.dom.getParents(F,"ol,ul",dn(D,F));return yt(K)},oi=D=>{const F=Cn(D,D.selection.getStart()),K=ft(D.selection.getSelectedBlocks(),Ac);return F.toArray().concat(K)},Lt=D=>{const F=D.selection.getStart();return D.dom.getParents(F,"ol,ul",dn(D,F))},Qs=D=>{const F=oi(D),K=Lt(D);return Ye(K,we=>Vo(xe.fromDom(we))).fold(()=>pa(D,F),we=>[we])},pa=(D,F)=>{const K=le(F,we=>Cn(D,we).getOr(we));return Ie(K)},zs=D=>/\btox\-/.test(D.className),qr=(D,F)=>O(D,ki,qa).exists(K=>K.nodeName===F&&!zs(K)),Sd=(D,F)=>F!==null&&!D.dom.isEditable(F),es=D=>{const F=Ei(D);return Sd(D,F)},ll=(D,F)=>{const K=D.dom.getParent(F,"ol,ul,dl");return Sd(D,K)},Ga=(D,F)=>{const K=D.selection.getNode();return F({parents:D.dom.getParents(K),element:K}),D.on("NodeChange",F),()=>D.off("NodeChange",F)},Ru=(D,F)=>{const we=document.createDocumentFragment();return Ee(D,Me=>{we.appendChild(Me.dom)}),xe.fromDom(we)},rr=(D,F,K)=>D.dispatch("ListMutation",{action:F,element:K}),Gg=(D=>F=>F.replace(D,""))(/^\s+|\s+$/g),Kg=D=>D.length>0,dr=D=>!Kg(D),Sm=D=>D.style!==void 0&&M(D.style.getPropertyValue),kd=(D,F,K)=>{if(!m(K))throw new Error("CSS value must be a string: "+K);Sm(D)&&D.style.setProperty(F,K)},Ka=(D,F,K)=>{const we=D.dom;kd(we,F,K)},cl=D=>ve(D,"OL,UL"),xf=D=>ve(D,"LI"),ts=D=>xr(D).exists(cl),ee=D=>fi(D).exists(cl),pe=D=>"listAttributes"in D,rt=D=>"isComment"in D,Et=D=>"isFragment"in D,pn=D=>D.depth>0,Oo=D=>D.isSelected,Cr=D=>{const F=hr(D),K=ee(D)?F.slice(0,-1):F;return le(K,Oa)},ba=(D,F,K)=>Js(D).filter(so).map(we=>({depth:F,dirty:!1,isSelected:K,content:Cr(D),itemAttributes:Os(D),listAttributes:Os(we),listType:Xe(we),isInPreviousLi:!1})),Hr=(D,F)=>{Rn(D.item,F.list)},oa=D=>{for(let F=1;F<D.length;F++)Hr(D[F-1],D[F])},Xs=(D,F)=>{je(yt(D),Ue(F),Hr)},Vr=(D,F)=>{const K={list:xe.fromTag(F,D),item:xe.fromTag("li",D)};return Rn(K.list,K.item),K},gi=(D,F,K)=>{const we=[];for(let Me=0;Me<K;Me++)we.push(Vr(D,pe(F)?F.listType:F.parentListType));return we},Da=(D,F)=>{for(let K=0;K<D.length-1;K++)Ka(D[K].item,"list-style-type","none");yt(D).each(K=>{pe(F)&&(Xo(K.list,F.listAttributes),Xo(K.item,F.itemAttributes)),Vs(K.item,F.content)})},Ed=(D,F)=>{Xe(D.list)!==F.listType&&(D.list=Po(D.list,F.listType)),Xo(D.list,F.listAttributes)},Nr=(D,F,K)=>{const we=xe.fromTag("li",D);return Xo(we,F),Vs(we,K),we},Gr=(D,F)=>{Rn(D.list,F),D.item=F},Kl=(D,F,K)=>{const we=F.slice(0,K.depth);return yt(we).each(Me=>{if(pe(K)){const Ht=Nr(D,K.itemAttributes,K.content);Gr(Me,Ht),Ed(Me,K)}else if(Et(K))Vs(Me.item,K.content);else{const Ht=xe.fromHtml(`<!--${K.content}-->`);Rn(Me.list,Ht)}}),we},Ad=(D,F,K)=>{const we=gi(D,K,K.depth-F.length);return oa(we),Da(we,K),Xs(F,we),F.concat(we)},_y=(D,F)=>{let K=ce.none();const we=ge(F,(Me,Ht,Nn)=>rt(Ht)?Nn===0?(K=ce.some(Ht),Me):Kl(D,Me,Ht):Ht.depth>Me.length?Ad(D,Me,Ht):Kl(D,Me,Ht),[]);return K.each(Me=>{const Ht=xe.fromHtml(`<!--${Me.content}-->`);Ue(we).each(Nn=>{En(Nn.list,Ht)})}),Ue(we).map(Me=>Me.list)},Dy=(D,F)=>{switch(D){case"Indent":F.depth++;break;case"Outdent":F.depth--;break;case"Flatten":F.depth=0}F.dirty=!0},ph=(D,F)=>{pe(D)&&pe(F)&&(D.listType=F.listType,D.listAttributes=ie({},F.listAttributes))},p0=D=>{D.listAttributes=$n(D.listAttributes,(F,K)=>K!=="start")},b0=(D,F)=>{const K=D[F].depth,we=Ht=>Ht.depth===K&&!Ht.dirty,Me=Ht=>Ht.depth<K;return O(qt(D.slice(0,F)),we,Me).orThunk(()=>O(D.slice(F+1),we,Me))},Yg=D=>(Ee(D,(F,K)=>{b0(D,K).fold(()=>{F.dirty&&pe(F)&&p0(F)},we=>ph(F,we))}),D),My=D=>{let F=D;return{get:()=>F,set:Me=>{F=Me}}},Cf=(D,F,K,we)=>{var Me;if(jt(we))return[{depth:D+1,content:(Me=we.dom.nodeValue)!==null&&Me!==void 0?Me:"",dirty:!1,isSelected:!1,isComment:!0}];F.each(wo=>{Ne(wo.start,we)&&K.set(!0)});const Ht=ba(we,D,K.get());F.each(wo=>{Ne(wo.end,we)&&K.set(!1)});const Nn=fi(we).filter(cl).map(wo=>Bu(D,F,K,wo)).getOr([]);return Ht.toArray().concat(Nn)},v0=(D,F,K,we)=>xr(we).filter(cl).fold(()=>Cf(D,F,K,we),Me=>{const Ht=ge(hr(we),(Nn,wo,xo)=>{if(xo===0)return Nn;if(xf(wo))return Nn.concat(Cf(D,F,K,wo));{const to={isFragment:!0,depth:D,content:[wo],isSelected:!1,dirty:!1,parentListType:Xe(Me)};return Nn.concat(to)}},[]);return Bu(D,F,K,Me).concat(Ht)}),Bu=(D,F,K,we)=>lt(hr(we),Me=>{const Ht=cl(Me)?Bu:v0,Nn=D+1;return Ht(Nn,F,K,Me)}),Py=(D,F)=>{const K=My(!1),we=0;return le(D,Me=>({sourceList:Me,entries:Bu(we,F,K,Me)}))},Xg=(D,F)=>{const K=Yg(F);return le(K,we=>{const Me=rt(we)?Ru([xe.fromHtml(`<!--${we.content}-->`)]):Ru(we.content);return xe.fromDom(Q(D,Me.dom))})},Ry=(D,F)=>{const K=Yg(F);return _y(D.contentDocument,K).toArray()},Ny=(D,F)=>lt(ne(F,pn),K=>Ue(K).exists(pn)?Ry(D,K):Xg(D,K)),By=(D,F)=>{Ee(ft(D,Oo),K=>Dy(F,K))},bh=D=>{const F=le(U(D),xe.fromDom);return je(Ye(F,ae(ts)),Ye(qt(F),ae(ts)),(K,we)=>({start:K,end:we}))},B2=(D,F,K)=>{const we=Py(F,bh(D));Ee(we,Me=>{By(Me.entries,K);const Ht=Ny(D,Me.entries);Ee(Ht,Nn=>{rr(D,K==="Indent"?"IndentList":"OutdentList",Nn.dom)}),Mo(Me.sourceList,Ht),Fo(Me.sourceList)})},ye=(D,F)=>{const K=nn(Qs(D)),we=nn(se(D));let Me=!1;if(K.length||we.length){const Ht=D.selection.getBookmark();B2(D,K,F),Rs(D,F,we),D.selection.moveToBookmark(Ht),D.selection.setRng(Ys(D.selection.getRng())),D.nodeChanged(),Me=!0}return Me},Jg=(D,F)=>!es(D)&&ye(D,F),El=D=>Jg(D,"Indent"),km=D=>Jg(D,"Outdent"),y0=D=>Jg(D,"Flatten"),F2="\uFEFF",ws=D=>D===F2,Fu=(D,F,K)=>bo(D,F,K).isSome(),nu=(D,F)=>Fu(D,q(Ne,F));var Iu=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Sf=Io.DOM,ou=D=>{const F={},K=we=>{let Me=D[we?"startContainer":"endContainer"],Ht=D[we?"startOffset":"endOffset"];if(il(Me)){const Nn=Sf.create("span",{"data-mce-type":"bookmark"});Me.hasChildNodes()?(Ht=Math.min(Ht,Me.childNodes.length-1),we?Me.insertBefore(Nn,Me.childNodes[Ht]):Sf.insertAfter(Nn,Me.childNodes[Ht])):Me.appendChild(Nn),Me=Nn,Ht=0}F[we?"startContainer":"endContainer"]=Me,F[we?"startOffset":"endOffset"]=Ht};return K(!0),D.collapsed||K(),F},sa=D=>{const F=we=>{const Me=wo=>{var xo;let to=(xo=wo.parentNode)===null||xo===void 0?void 0:xo.firstChild,kr=0;for(;to;){if(to===wo)return kr;(!il(to)||to.getAttribute("data-mce-type")!=="bookmark")&&kr++,to=to.nextSibling}return-1};let Ht=D[we?"startContainer":"endContainer"],Nn=D[we?"startOffset":"endOffset"];if(Ht){if(il(Ht)&&Ht.parentNode){const wo=Ht;Nn=Me(Ht),Ht=Ht.parentNode,Sf.remove(wo),!Ht.hasChildNodes()&&Sf.isBlock(Ht)&&Ht.appendChild(Sf.create("br"))}D[we?"startContainer":"endContainer"]=Ht,D[we?"startOffset":"endOffset"]=Nn}};F(!0),F();const K=Sf.createRng();return K.setStart(D.startContainer,D.startOffset),D.endContainer&&K.setEnd(D.endContainer,D.endOffset),Ys(K)},Lu=D=>{switch(D){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Fy=(D,F,K)=>{const we=K["list-style-type"]?K["list-style-type"]:null;D.setStyle(F,"list-style-type",we)},Iy=(D,F)=>{ds.each(F,(K,we)=>{D.setAttribute(we,K)})},_c=(D,F,K)=>{Iy(F,K["list-attributes"]),ds.each(D.select("li",F),we=>{Iy(we,K["list-item-attributes"])})},su=(D,F,K)=>{Fy(D,F,K),_c(D,F,K)},Ly=(D,F,K)=>{ds.each(K,we=>D.setStyle(F,we,""))},Ma=(D,F)=>T(F)&&!Tc(F,D.schema.getBlockElements()),pi=(D,F,K,we)=>{let Me=F[K?"startContainer":"endContainer"];const Ht=F[K?"startOffset":"endOffset"];il(Me)&&(Me=Me.childNodes[Math.min(Ht,Me.childNodes.length-1)]||Me),!K&&na(Me.nextSibling)&&(Me=Me.nextSibling);const Nn=xo=>{for(;!D.dom.isBlock(xo)&&xo.parentNode&&we!==xo;)xo=xo.parentNode;return xo},wo=(xo,to)=>{var kr;const qi=new Te(xo,Nn(xo)),Xl=to?"next":"prev";let _d;for(;_d=qi[Xl]();)if(!(ma(D,_d)||ws(_d.textContent)||((kr=_d.textContent)===null||kr===void 0?void 0:kr.length)===0))return ce.some(_d);return ce.none()};if(K&&Dr(Me))if(ws(Me.textContent))Me=wo(Me,!1).getOr(Me);else for(Me.parentNode!==null&&Ma(D,Me.parentNode)&&(Me=Me.parentNode);Me.previousSibling!==null&&(Ma(D,Me.previousSibling)||Dr(Me.previousSibling));)Me=Me.previousSibling;if(!K&&Dr(Me))if(ws(Me.textContent))Me=wo(Me,!0).getOr(Me);else for(Me.parentNode!==null&&Ma(D,Me.parentNode)&&(Me=Me.parentNode);Me.nextSibling!==null&&(Ma(D,Me.nextSibling)||Dr(Me.nextSibling));)Me=Me.nextSibling;for(;Me.parentNode!==we;){const xo=Me.parentNode;if(mi(D,Me)||/^(TD|TH)$/.test(xo.nodeName))return Me;Me=xo}return Me},kf=(D,F,K)=>{const we=[],Me=D.dom,Ht=pi(D,F,!0,K),Nn=pi(D,F,!1,K);let wo;const xo=[];for(let to=Ht;to&&(xo.push(to),to!==Nn);to=to.nextSibling);return ds.each(xo,to=>{var kr;if(mi(D,to)){we.push(to),wo=null;return}if(Me.isBlock(to)||na(to)){na(to)&&Me.remove(to),wo=null;return}const qi=to.nextSibling;if(Iu.isBookmarkNode(to)&&(ki(qi)||mi(D,qi)||!qi&&to.parentNode===K)){wo=null;return}wo||(wo=Me.create("p"),(kr=to.parentNode)===null||kr===void 0||kr.insertBefore(wo,to),we.push(wo)),wo.appendChild(to)}),we},Em=(D,F,K)=>{const we=D.getStyle(F,"list-style-type");let Me=K?K["list-style-type"]:"";return Me=Me===null?"":Me,we===Me},Dc=(D,F)=>{const K=D.selection.getStart(!0),we=pi(D,F,!0,D.getBody());return nu(xe.fromDom(we),xe.fromDom(F.commonAncestorContainer))?F.commonAncestorContainer:K},Pa=(D,F,K)=>{const we=D.selection.getRng();let Me="LI";const Ht=dn(D,Dc(D,we)),Nn=D.dom;if(Nn.getContentEditable(D.selection.getNode())==="false")return;F=F.toUpperCase(),F==="DL"&&(Me="DT");const wo=ou(we),xo=ft(kf(D,we,Ht),D.dom.isEditable);ds.each(xo,to=>{let kr;const qi=to.previousSibling,Xl=to.parentNode;ha(Xl)||(qi&&ki(qi)&&qi.nodeName===F&&Em(Nn,qi,K)?(kr=qi,to=Nn.rename(to,Me),qi.appendChild(to)):(kr=Nn.create(F),Xl.insertBefore(kr,to),kr.appendChild(to),to=Nn.rename(to,Me)),Ly(Nn,to,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),su(Nn,kr,K),Am(D.dom,kr))}),D.selection.setRng(sa(wo))},$y=(D,F)=>ki(D)&&D.nodeName===(F==null?void 0:F.nodeName),I2=(D,F,K)=>{const we=D.getStyle(F,"list-style-type",!0),Me=D.getStyle(K,"list-style-type",!0);return we===Me},Qg=(D,F)=>D.className===F.className,ep=(D,F,K)=>$y(F,K)&&I2(D,F,K)&&Qg(F,K),Am=(D,F)=>{let K,we=F.nextSibling;if(ep(D,F,we)){const Me=we;for(;K=Me.firstChild;)F.appendChild(K);D.remove(Me)}if(we=F.previousSibling,ep(D,F,we)){const Me=we;for(;K=Me.lastChild;)F.insertBefore(K,F.firstChild);D.remove(Me)}},$u=(D,F,K,we)=>{if(F.nodeName!==K){const Me=D.dom.rename(F,K);su(D.dom,Me,we),rr(D,Lu(K),Me)}else su(D.dom,F,we),rr(D,Lu(K),F)},w0=(D,F,K,we)=>{if(F.classList.forEach((Me,Ht,Nn)=>{Me.startsWith("tox-")&&(Nn.remove(Me),Nn.length===0&&F.removeAttribute("class"))}),F.nodeName!==K){const Me=D.dom.rename(F,K);su(D.dom,Me,we),rr(D,Lu(K),Me)}else su(D.dom,F,we),rr(D,Lu(K),F)},kM=(D,F,K,we,Me)=>{const Ht=ki(F);if(Ht&&F.nodeName===we&&!L2(Me)&&!zs(F))y0(D);else{Pa(D,we,Me);const Nn=ou(D.selection.getRng()),wo=Ht?[F,...K]:K,xo=Ht&&zs(F)?w0:$u;ds.each(wo,to=>{xo(D,to,we,Me)}),D.selection.setRng(sa(Nn))}},L2=D=>"list-style-type"in D,$2=(D,F,K,we)=>{if(F!==D.getBody())if(F)if(F.nodeName===K&&!L2(we)&&!zs(F))y0(D);else{const Me=ou(D.selection.getRng());zs(F)&&F.classList.forEach((Nn,wo,xo)=>{Nn.startsWith("tox-")&&(xo.remove(Nn),xo.length===0&&F.removeAttribute("class"))}),su(D.dom,F,we);const Ht=D.dom.rename(F,K);Am(D.dom,Ht),D.selection.setRng(sa(Me)),Pa(D,K,we),rr(D,Lu(K),Ht)}else Pa(D,K,we),rr(D,Lu(K),F)},vh=(D,F,K)=>{const we=Ei(D);if(ll(D,we))return;const Me=Pu(D),Ht=p(K)?K:{};Me.length>0?kM(D,we,Me,F,Ht):$2(D,we,F,Ht)},Hy=Io.DOM,yh=(D,F)=>{const K=F.parentElement;if(K&&K.nodeName==="LI"&&K.firstChild===F){const we=K.previousSibling;we&&we.nodeName==="LI"?(we.appendChild(F),ga(D,K)&&Hy.remove(K)):Hy.setStyle(K,"listStyleType","none")}if(ki(K)){const we=K.previousSibling;we&&we.nodeName==="LI"&&we.appendChild(F)}},Kr=(D,F)=>{const K=ds.grep(D.select("ol,ul",F));ds.each(K,we=>{yh(D,we)})},Sr=(D,F,K,we)=>{let Me=F.startContainer;const Ht=F.startOffset;if(Dr(Me)&&(K?Ht<Me.data.length:Ht>0))return Me;const Nn=D.schema.getNonEmptyElements();il(Me)&&(Me=Ce.getNode(Me,Ht));const wo=new Te(Me,we);K&&eu(D.dom,Me)&&wo.next();const xo=K?wo.next.bind(wo):wo.prev2.bind(wo);for(;Me=xo();)if(Me.nodeName==="LI"&&!Me.hasChildNodes()||Nn[Me.nodeName]||Dr(Me)&&Me.data.length>0)return Me;return null},ul=(D,F)=>{const K=F.childNodes;return K.length===1&&!ki(K[0])&&D.isBlock(K[0])},x0=D=>ce.from(D).map(xe.fromDom).filter(vn).exists(F=>ke(F)&&!Re(["details"],Xe(F))),H2=(D,F)=>{ul(D,F)&&x0(F.firstChild)&&D.remove(F.firstChild,!0)},Zi=(D,F,K)=>{let we;const Me=ul(D,K)?K.firstChild:K;if(H2(D,F),!ga(D,F,!0))for(;we=F.firstChild;)Me.appendChild(we)},Ef=(D,F,K)=>{let we;const Me=F.parentNode;if(!Gl(D,F)||!Gl(D,K))return;ki(K.lastChild)&&(we=K.lastChild),Me===K.lastChild&&na(Me.previousSibling)&&D.remove(Me.previousSibling);const Ht=K.lastChild;Ht&&na(Ht)&&F.hasChildNodes()&&D.remove(Ht),ga(D,K,!0)&&Tt(xe.fromDom(K)),Zi(D,F,K),we&&K.appendChild(we);const wo=kt(xe.fromDom(K),xe.fromDom(F))?D.getParents(F,ki,K):[];D.remove(F),Ee(wo,xo=>{ga(D,xo)&&xo!==D.getRoot()&&D.remove(xo)})},wh=(D,F,K)=>{Tt(xe.fromDom(K)),Ef(D.dom,F,K),D.selection.setCursorLocation(K,0)},Td=(D,F,K,we)=>{const Me=D.dom;if(Me.isEmpty(we))wh(D,K,we);else{const Ht=ou(F);Ef(Me,K,we),D.selection.setRng(sa(Ht))}},EM=(D,F,K,we)=>{const Me=ou(F);Ef(D.dom,K,we);const Ht=sa(Me);D.selection.setRng(Ht)},_o=(D,F)=>{const K=D.dom,we=D.selection,Me=we.getStart(),Ht=be(D,Me),Nn=K.getParent(we.getStart(),"LI",Ht);if(Nn){const wo=Nn.parentElement;if(wo===D.getBody()&&ga(K,wo))return!0;const xo=Ys(we.getRng()),to=K.getParent(Sr(D,xo,F,Ht),"LI",Ht),kr=to&&(F?K.isChildOf(Nn,to):K.isChildOf(to,Nn));if(to&&to!==Nn&&!kr)return D.undoManager.transact(()=>{F?Td(D,xo,to,Nn):_a(Nn)?km(D):EM(D,xo,Nn,to)}),!0;if(kr&&!F&&to!==Nn)return D.undoManager.transact(()=>{if(xo.commonAncestorContainer.parentElement){const qi=ou(xo),Xl=xo.commonAncestorContainer.parentElement;Zi(K,xo.commonAncestorContainer.parentElement,to),Xl.remove();const _d=sa(qi);D.selection.setRng(_d)}}),!0;if(!to&&!F&&xo.startOffset===0&&xo.endOffset===0)return D.undoManager.transact(()=>{y0(D)}),!0}return!1},Al=(D,F,K)=>{const we=D.getParent(F.parentNode,D.isBlock,K);D.remove(F),we&&D.isEmpty(we)&&D.remove(we)},Af=(D,F)=>{const K=D.dom,we=D.selection.getStart(),Me=be(D,we),Ht=K.getParent(we,K.isBlock,Me);if(Ht&&K.isEmpty(Ht)){const Nn=Ys(D.selection.getRng()),wo=K.getParent(Sr(D,Nn,F,Me),"LI",Me);if(wo){const xo=Xl=>Re(["td","th","caption"],Xe(Xl)),to=Xl=>Xl.dom===Me,kr=Ks(xe.fromDom(wo),xo,to),qi=Ks(xe.fromDom(Nn.startContainer),xo,to);return ue(kr,qi,Ne)?(D.undoManager.transact(()=>{const Xl=wo.parentNode;Al(K,Ht,Me),Am(K,Xl),D.selection.select(wo,!0),D.selection.collapse(F)}),!0):!1}}return!1},Vy=(D,F)=>_o(D,F)||Af(D,F),zy=D=>{const F=D.selection.getStart(),K=be(D,F);return D.dom.getParent(F,"LI,DT,DD",K)||U(D).length>0},Uy=D=>zy(D)?(D.undoManager.transact(()=>{D.execCommand("Delete"),Kr(D.dom,D.getBody())}),!0):!1,xh=(D,F)=>{const K=D.selection;return!ll(D,K.getNode())&&(K.isCollapsed()?Vy(D,F):Uy(D))},ru=D=>{D.on("ExecCommand",F=>{const K=F.command.toLowerCase();(K==="delete"||K==="forwarddelete")&&zy(D)&&Kr(D.dom,D.getBody())}),D.on("keydown",F=>{F.keyCode===_t.BACKSPACE?xh(D,!1)&&F.preventDefault():F.keyCode===_t.DELETE&&xh(D,!0)&&F.preventDefault()})},C0=D=>({backspaceDelete:F=>{xh(D,F)}}),Tm=(D,F)=>{const K=Ei(D);K===null||ll(D,K)||D.undoManager.transact(()=>{p(F.styles)&&D.dom.setStyles(K,F.styles),p(F.attrs)&&_n(F.attrs,(we,Me)=>D.dom.setAttrib(K,Me,we))})},S0=D=>{const F=qt(Gg(D).split("")),K=le(F,(we,Me)=>{const Ht=we.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Me)*Ht});return ge(K,(we,Me)=>we+Me,0)},k0=D=>{if(D--,D<0)return"";{const F=D%26,K=Math.floor(D/26),we=k0(K),Me=String.fromCharCode(65+F);return we+Me}},zr=D=>/^[A-Z]+$/.test(D),Ra=D=>/^[a-z]+$/.test(D),Hu=D=>/^[0-9]+$/.test(D),Om=D=>Hu(D)?2:zr(D)?0:Ra(D)?1:dr(D)?3:4,Yr=D=>{switch(Om(D)){case 2:return ce.some({listStyleType:ce.none(),start:D});case 0:return ce.some({listStyleType:ce.some("upper-alpha"),start:S0(D).toString()});case 1:return ce.some({listStyleType:ce.some("lower-alpha"),start:S0(D).toString()});case 3:return ce.some({listStyleType:ce.none(),start:""});case 4:return ce.none()}},Wy=D=>{const F=parseInt(D.start,10);return wt(D.listStyleType,"upper-alpha")?k0(F):wt(D.listStyleType,"lower-alpha")?k0(F).toLowerCase():D.start},jy=D=>{const F=Ei(D);!vs(F)||ll(D,F)||D.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Wy({start:D.dom.getAttrib(F,"start","1"),listStyleType:ce.from(D.dom.getStyle(F,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:K=>{const we=K.getData();Yr(we.start).each(Me=>{D.execCommand("mceListUpdate",!1,{attrs:{start:Me.start==="1"?"":Me.start},styles:{"list-style-type":Me.listStyleType.getOr("")}})}),K.close()}})},$s=(D,F)=>()=>{const K=Ei(D);return T(K)&&K.nodeName===F},Od=D=>{D.addCommand("mceListProps",()=>{jy(D)})},ks=D=>{D.on("BeforeExecCommand",F=>{const K=F.command.toLowerCase();K==="indent"?El(D):K==="outdent"&&km(D)}),D.addCommand("InsertUnorderedList",(F,K)=>{vh(D,"UL",K)}),D.addCommand("InsertOrderedList",(F,K)=>{vh(D,"OL",K)}),D.addCommand("InsertDefinitionList",(F,K)=>{vh(D,"DL",K)}),D.addCommand("RemoveList",()=>{y0(D)}),Od(D),D.addCommand("mceListUpdate",(F,K)=>{p(K)&&Tm(D,K)}),D.addQueryStateHandler("InsertUnorderedList",$s(D,"UL")),D.addQueryStateHandler("InsertOrderedList",$s(D,"OL")),D.addQueryStateHandler("InsertDefinitionList",$s(D,"DL"))};var Yl=tinymce.util.Tools.resolve("tinymce.html.Node");const _m=D=>D.type===3,Ch=D=>D.length===0,tp=D=>{const F=(Me,Ht)=>{const Nn=Yl.create("li");Ee(Me,wo=>Nn.append(wo)),Ht?D.insert(Nn,Ht,!0):D.append(Nn)},K=(Me,Ht)=>_m(Ht)?[...Me,Ht]:!Ch(Me)&&!_m(Ht)?(F(Me,Ht),[]):Me,we=ge(D.children(),K,[]);Ch(we)||F(we)},np=D=>{D.on("PreInit",()=>{const{parser:F}=D;F.addNodeFilter("ul,ol",K=>Ee(K,tp))})},V2=D=>{D.on("keydown",F=>{F.keyCode!==_t.TAB||_t.metaKeyPressed(F)||D.undoManager.transact(()=>{(F.shiftKey?km(D):El(D))&&F.preventDefault()})})},Zy=D=>{Oc(D)&&V2(D),ru(D)},z2=(D,F)=>K=>{const we=Me=>{K.setActive(qr(Me.parents,F)),K.setEnabled(!ll(D,Me.element)&&D.selection.isEditable())};return K.setEnabled(D.selection.isEditable()),Ga(D,we)},AM=D=>{const F=K=>()=>D.execCommand(K);D.hasPlugin("advlist")||(D.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:F("InsertOrderedList"),onSetup:z2(D,"OL")}),D.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:F("InsertUnorderedList"),onSetup:z2(D,"UL")}))},qy=(D,F)=>K=>Ga(D,Me=>K.setEnabled(qr(Me.parents,F)&&!ll(D,Me.element))),E0=D=>{const F={text:"List properties...",icon:"ordered-list",onAction:()=>D.execCommand("mceListProps"),onSetup:qy(D,"OL")};D.ui.registry.addMenuItem("listprops",F),D.ui.registry.addContextMenu("lists",{update:K=>{const we=Ei(D,K);return vs(we)?["listprops"]:[]}})};var U2=()=>{u.add("lists",D=>(al(D),np(D),D.hasPlugin("rtc",!0)?Od(D):(Zy(D),ks(D)),AM(D),E0(D),C0(D)))};U2()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(ke,Ae,ut)=>{var xt;return ut(ke,Ae.prototype)?!0:((xt=ke.constructor)===null||xt===void 0?void 0:xt.name)===Ae.name},i=ke=>{const Ae=typeof ke;return ke===null?"null":Ae==="object"&&Array.isArray(ke)?"array":Ae==="object"&&o(ke,String,(ut,xt)=>xt.isPrototypeOf(ut))?"string":Ae},l=ke=>Ae=>i(Ae)===ke,d=l("string"),m=l("object"),p=l("array"),v=ke=>ke==null,x=ke=>!v(ke);class k{constructor(Ae,ut){this.tag=Ae,this.value=ut}static some(Ae){return new k(!0,Ae)}static none(){return k.singletonNone}fold(Ae,ut){return this.tag?ut(this.value):Ae()}isSome(){return this.tag}isNone(){return!this.tag}map(Ae){return this.tag?k.some(Ae(this.value)):k.none()}bind(Ae){return this.tag?Ae(this.value):k.none()}exists(Ae){return this.tag&&Ae(this.value)}forall(Ae){return!this.tag||Ae(this.value)}filter(Ae){return!this.tag||Ae(this.value)?this:k.none()}getOr(Ae){return this.tag?this.value:Ae}or(Ae){return this.tag?this:Ae}getOrThunk(Ae){return this.tag?this.value:Ae()}orThunk(Ae){return this.tag?this:Ae()}getOrDie(Ae){if(this.tag)return this.value;throw new Error(Ae!=null?Ae:"Called getOrDie on None")}static from(Ae){return x(Ae)?k.some(Ae):k.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ae){this.tag&&Ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}k.singletonNone=new k(!1);const T=Array.prototype.push,M=(ke,Ae)=>{for(let ut=0,xt=ke.length;ut<xt;ut++){const En=ke[ut];Ae(En,ut)}},N=ke=>{const Ae=[];for(let ut=0,xt=ke.length;ut<xt;++ut){if(!p(ke[ut]))throw new Error("Arr.flatten item "+ut+" was not an array, input: "+ke);T.apply(Ae,ke[ut])}return Ae},I=ke=>{let Ae=ke;return{get:()=>Ae,set:En=>{Ae=En}}},z=Object.keys,Y=Object.hasOwnProperty,J=(ke,Ae)=>{const ut=z(ke);for(let xt=0,En=ut.length;xt<En;xt++){const Rn=ut[xt],Mo=ke[Rn];Ae(Mo,Rn)}},q=(ke,Ae)=>ae(ke,Ae)?k.from(ke[Ae]):k.none(),ae=(ke,Ae)=>Y.call(ke,Ae),Z=ke=>Ae=>Ae.options.get(ke),ce=ke=>{const Ae=ke.options.register;Ae("audio_template_callback",{processor:"function"}),Ae("video_template_callback",{processor:"function"}),Ae("iframe_template_callback",{processor:"function"}),Ae("media_live_embeds",{processor:"boolean",default:!0}),Ae("media_filter_html",{processor:"boolean",default:!0}),Ae("media_url_resolver",{processor:"function"}),Ae("media_alt_source",{processor:"boolean",default:!0}),Ae("media_poster",{processor:"boolean",default:!0}),Ae("media_dimensions",{processor:"boolean",default:!0})},_e=Z("audio_template_callback"),De=Z("video_template_callback"),G=Z("iframe_template_callback"),qe=Z("media_live_embeds"),Re=Z("media_filter_html"),$e=Z("media_url_resolver"),le=Z("media_alt_source"),Ee=Z("media_poster"),ft=Z("media_dimensions");var ne=tinymce.util.Tools.resolve("tinymce.util.Tools"),ge=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),O=tinymce.util.Tools.resolve("tinymce.html.DomParser");const Ye=ge.DOM,me=ke=>ke.replace(/px$/,""),lt=ke=>{const Ae=ke.attr("style"),ut=Ae?Ye.parseStyle(Ae):{};return{type:"ephox-embed-iri",source:ke.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:q(ut,"max-width").map(me).getOr(""),height:q(ut,"max-height").map(me).getOr("")}},qt=(ke,Ae)=>{let ut={};const En=O({validate:!1,forced_root_block:!1},Ae).parse(ke);for(let Rn=En;Rn;Rn=Rn.walk())if(Rn.type===1){const Mo=Rn.name;if(Rn.attr("data-ephox-embed-iri")){ut=lt(Rn);break}else!ut.source&&Mo==="param"&&(ut.source=Rn.attr("movie")),(Mo==="iframe"||Mo==="object"||Mo==="embed"||Mo==="video"||Mo==="audio")&&(ut.type||(ut.type=Mo),ut=ne.extend(Rn.attributes.map,ut)),Mo==="source"&&(ut.source?ut.altsource||(ut.altsource=Rn.attr("src")):ut.source=Rn.attr("src")),Mo==="img"&&!ut.poster&&(ut.poster=Rn.attr("src"))}return ut.source=ut.source||ut.src||"",ut.altsource=ut.altsource||"",ut.poster=ut.poster||"",ut},Be=ke=>{var Ae;const ut={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},xt=(Ae=ke.toLowerCase().split(".").pop())!==null&&Ae!==void 0?Ae:"";return q(ut,xt).getOr("")};var Ue=tinymce.util.Tools.resolve("tinymce.html.Node"),yt=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Ie=(ke,Ae={})=>O(ie({forced_root_block:!1,validate:!1,allow_conditional_comments:!0},Ae),ke),wt=ge.DOM,ue=ke=>/^[0-9.]+$/.test(ke)?ke+"px":ke,je=(ke,Ae)=>{const ut=Ae.attr("style"),xt=ut?wt.parseStyle(ut):{};x(ke.width)&&(xt["max-width"]=ue(ke.width)),x(ke.height)&&(xt["max-height"]=ue(ke.height)),Ae.attr("style",wt.serializeStyle(xt))},V=["source","altsource"],kn=(ke,Ae,ut,xt)=>{let En=0,Rn=0;const Mo=Ie(xt);Mo.addNodeFilter("source",Tt=>En=Tt.length);const Vs=Mo.parse(ke);for(let Tt=Vs;Tt;Tt=Tt.walk())if(Tt.type===1){const Fo=Tt.name;if(Tt.attr("data-ephox-embed-iri")){je(Ae,Tt);break}else{switch(Fo){case"video":case"object":case"embed":case"img":case"iframe":Ae.height!==void 0&&Ae.width!==void 0&&(Tt.attr("width",Ae.width),Tt.attr("height",Ae.height));break}if(ut)switch(Fo){case"video":Tt.attr("poster",Ae.poster),Tt.attr("src",null);for(let Te=En;Te<2;Te++)if(Ae[V[Te]]){const _t=new Ue("source",1);_t.attr("src",Ae[V[Te]]),_t.attr("type",Ae[V[Te]+"mime"]||null),Tt.append(_t)}break;case"iframe":Tt.attr("src",Ae.source);break;case"object":const Ce=Tt.getAll("img").length>0;if(Ae.poster&&!Ce){Tt.attr("src",Ae.poster);const Te=new Ue("img",1);Te.attr("src",Ae.poster),Te.attr("width",Ae.width),Te.attr("height",Ae.height),Tt.append(Te)}break;case"source":if(Rn<2&&(Tt.attr("src",Ae[V[Rn]]),Tt.attr("type",Ae[V[Rn]+"mime"]||null),!Ae[V[Rn]])){Tt.remove();continue}Rn++;break;case"img":Ae.poster||Tt.remove();break}}}return yt({},xt).serialize(Vs)},un=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],oo=ke=>{const Ae=ke.match(/^(https?:\/\/|www\.)(.+)$/i);return Ae&&Ae.length>1?Ae[1]==="www."?"https://":Ae[1]:"https://"},Do=(ke,Ae)=>{const ut=oo(Ae),xt=ke.regex.exec(Ae);let En=ut+ke.url;if(x(xt))for(let Rn=0;Rn<xt.length;Rn++)En=En.replace("$"+Rn,()=>xt[Rn]?xt[Rn]:"");return En.replace(/\?$/,"")},Ss=ke=>{const Ae=un.filter(ut=>ut.regex.test(ke));return Ae.length>0?ne.extend({},Ae[0],{url:Do(Ae[0],ke)}):null},Qe=(ke,Ae)=>{if(Ae)return Ae(ke);{const ut=ke.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+ke.source+'" width="'+ke.width+'" height="'+ke.height+'"'+ut+"></iframe>"}},Bt=ke=>{let Ae='<object data="'+ke.source+'" width="'+ke.width+'" height="'+ke.height+'" type="application/x-shockwave-flash">';return ke.poster&&(Ae+='<img src="'+ke.poster+'" width="'+ke.width+'" height="'+ke.height+'" />'),Ae+="</object>",Ae},nt=(ke,Ae)=>Ae?Ae(ke):'<audio controls="controls" src="'+ke.source+'">'+(ke.altsource?`
<source src="`+ke.altsource+'"'+(ke.altsourcemime?' type="'+ke.altsourcemime+'"':"")+` />
`:"")+"</audio>",de=(ke,Ae)=>Ae?Ae(ke):'<video width="'+ke.width+'" height="'+ke.height+'"'+(ke.poster?' poster="'+ke.poster+'"':"")+` controls="controls">
<source src="`+ke.source+'"'+(ke.sourcemime?' type="'+ke.sourcemime+'"':"")+` />
`+(ke.altsource?'<source src="'+ke.altsource+'"'+(ke.altsourcemime?' type="'+ke.altsourcemime+'"':"")+` />
`:"")+"</video>",xe=(ke,Ae)=>{var ut;const xt=ne.extend({},Ae);if(!xt.source&&(ne.extend(xt,qt((ut=xt.embed)!==null&&ut!==void 0?ut:"",ke.schema)),!xt.source))return"";xt.altsource||(xt.altsource=""),xt.poster||(xt.poster=""),xt.source=ke.convertURL(xt.source,"source"),xt.altsource=ke.convertURL(xt.altsource,"source"),xt.sourcemime=Be(xt.source),xt.altsourcemime=Be(xt.altsource),xt.poster=ke.convertURL(xt.poster,"poster");const En=Ss(xt.source);if(En&&(xt.source=En.url,xt.type=En.type,xt.allowfullscreen=En.allowFullscreen,xt.width=xt.width||String(En.w),xt.height=xt.height||String(En.h)),xt.embed)return kn(xt.embed,xt,!0,ke.schema);{const Rn=_e(ke),Mo=De(ke),Vs=G(ke);return xt.width=xt.width||"300",xt.height=xt.height||"150",ne.each(xt,(Tt,Fo)=>{xt[Fo]=ke.dom.encode(""+Tt)}),xt.type==="iframe"?Qe(xt,Vs):xt.sourcemime==="application/x-shockwave-flash"?Bt(xt):xt.sourcemime.indexOf("audio")!==-1?nt(xt,Rn):de(xt,Mo)}},Fe=ke=>ke.hasAttribute("data-mce-object")||ke.hasAttribute("data-ephox-embed-iri"),Ne=ke=>{ke.on("click keyup touchend",()=>{const Ae=ke.selection.getNode();Ae&&ke.dom.hasClass(Ae,"mce-preview-object")&&ke.dom.getAttrib(Ae,"data-mce-selected")&&Ae.setAttribute("data-mce-selected","2")}),ke.on("ObjectResized",Ae=>{const ut=Ae.target;if(ut.getAttribute("data-mce-object")){let xt=ut.getAttribute("data-mce-html");xt&&(xt=unescape(xt),ut.setAttribute("data-mce-html",escape(kn(xt,{width:String(Ae.width),height:String(Ae.height)},!1,ke.schema))))}})},kt={},ve=(ke,Ae,ut)=>new Promise((xt,En)=>{const Rn=Mo=>(Mo.html&&(kt[ke.source]=Mo),xt({url:ke.source,html:Mo.html?Mo.html:Ae(ke)}));kt[ke.source]?Rn(kt[ke.source]):ut({url:ke.source},Rn,En)}),We=(ke,Ae)=>Promise.resolve({html:Ae(ke),url:ke.source}),st=ke=>Ae=>xe(ke,Ae),en=(ke,Ae)=>{const ut=$e(ke);return ut?ve(Ae,st(ke),ut):We(Ae,st(ke))},jn=ke=>ae(kt,ke),On=(ke,Ae)=>q(Ae,ke).bind(ut=>q(ut,"meta")),ao=(ke,Ae,ut)=>xt=>{const En=()=>q(ke,xt),Rn=()=>q(Ae,xt),Mo=Fo=>q(Fo,"value").bind(Ce=>Ce.length>0?k.some(Ce):k.none()),Vs=()=>En().bind(Fo=>m(Fo)?Mo(Fo).orThunk(Rn):Rn().orThunk(()=>k.from(Fo))),Tt=()=>Rn().orThunk(()=>En().bind(Fo=>m(Fo)?Mo(Fo):k.from(Fo)));return{[xt]:(xt===ut?Vs():Tt()).getOr("")}},Yn=(ke,Ae)=>{const ut={};return q(ke,"dimensions").each(xt=>{M(["width","height"],En=>{q(Ae,En).orThunk(()=>q(xt,En)).each(Rn=>ut[En]=Rn)})}),ut},ls=(ke,Ae)=>{const ut=Ae&&Ae!=="dimensions"?On(Ae,ke).getOr({}):{},xt=ao(ke,ut,Ae);return ie(ie(ie(ie(ie({},xt("source")),xt("altsource")),xt("poster")),xt("embed")),Yn(ke,ut))},Xe=ke=>{const Ae=Ot(ie({},ke),{source:{value:q(ke,"source").getOr("")},altsource:{value:q(ke,"altsource").getOr("")},poster:{value:q(ke,"poster").getOr("")}});return M(["width","height"],ut=>{q(ke,ut).each(xt=>{const En=Ae.dimensions||{};En[ut]=xt,Ae.dimensions=En})}),Ae},pt=ke=>Ae=>{const ut=Ae&&Ae.msg?"Media embed handler error: "+Ae.msg:"Media embed handler threw unknown error.";ke.notificationManager.open({type:"error",text:ut})},Pt=ke=>{const Ae=ke.selection.getNode(),ut=Fe(Ae)?ke.serializer.serialize(Ae,{selection:!0}):"",xt=qt(ut,ke.schema),Rn=(()=>{if(lo(xt.source,xt.type)){const Mo=ke.dom.getRect(Ae);return{width:Mo.w.toString().replace(/px$/,""),height:Mo.h.toString().replace(/px$/,"")}}else return{}})();return ie(ie({embed:ut},xt),Rn)},jt=(ke,Ae)=>ut=>{if(d(ut.url)&&ut.url.trim().length>0){const xt=ut.html,En=qt(xt,Ae.schema),Rn=Ot(ie({},En),{source:ut.url,embed:xt});ke.setData(Xe(Rn))}},vn=(ke,Ae)=>{const ut=ke.dom.select("*[data-mce-object]");for(let xt=0;xt<Ae.length;xt++)for(let En=ut.length-1;En>=0;En--)Ae[xt]===ut[En]&&ut.splice(En,1);ke.selection.select(ut[0])},so=(ke,Ae)=>{const ut=ke.dom.select("*[data-mce-object]");ke.insertContent(Ae),vn(ke,ut),ke.nodeChanged()},lo=(ke,Ae)=>x(Ae)&&Ae==="ephox-embed-iri"&&x(Ss(ke)),Qo=(ke,Ae)=>((xt,En)=>xt.width!==En.width||xt.height!==En.height)(ke,Ae)&&lo(Ae.source,ke.type),Bo=(ke,Ae,ut)=>{var xt;Ae.embed=Qo(ke,Ae)&&ft(ut)?xe(ut,Ot(ie({},Ae),{embed:""})):kn((xt=Ae.embed)!==null&&xt!==void 0?xt:"",Ae,!1,ut.schema),Ae.embed&&(ke.source===Ae.source||jn(Ae.source))?so(ut,Ae.embed):en(ut,Ae).then(En=>{so(ut,En.html)}).catch(pt(ut))},cs=ke=>{const Ae=Pt(ke),ut=I(Ae),xt=Xe(Ae),En=(An,$n)=>{const Vn=ls($n.getData(),"source");An.source!==Vn.source&&(jt(Pn,ke)({url:Vn.source,html:""}),en(ke,Vn).then(jt(Pn,ke)).catch(pt(ke)))},Rn=An=>{var $n;const Vn=ls(An.getData()),Xo=qt(($n=Vn.embed)!==null&&$n!==void 0?$n:"",ke.schema);An.setData(Xe(Xo))},Mo=(An,$n,Vn)=>{const Xo=ls(An.getData(),$n),Os=Qo(Vn,Xo)&&ft(ke)?Ot(ie({},Xo),{embed:""}):Xo,Bi=xe(ke,Os);An.setData(Xe(Ot(ie({},Os),{embed:Bi})))},Vs=[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],Tt=ft(ke)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],Fo={title:"General",name:"general",items:N([Vs,Tt])},Te={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},_t=[];le(ke)&&_t.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),Ee(ke)&&_t.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const nn={title:"Advanced",name:"advanced",items:_t},an=[Fo,Te];_t.length>0&&an.push(nn);const _n={type:"tabpanel",tabs:an},Pn=ke.windowManager.open({title:"Insert/Edit Media",size:"normal",body:_n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:An=>{const $n=ls(An.getData());Bo(ut.get(),$n,ke),An.close()},onChange:(An,$n)=>{switch($n.name){case"source":En(ut.get(),An);break;case"embed":Rn(An);break;case"dimensions":case"altsource":case"poster":Mo(An,$n.name,ut.get());break}ut.set(ls(An.getData()))},initialData:xt})},$t=ke=>({showDialog:()=>{cs(ke)}}),So=ke=>{const Ae=()=>{cs(ke)};ke.addCommand("mceMedia",Ae)},Js=(ke,Ae,ut)=>ke.length>=Ae.length&&ke.substr(ut,ut+Ae.length)===Ae,wr=(ke,Ae)=>Js(ke,Ae,0);var Zr=tinymce.util.Tools.resolve("tinymce.Env");const hr=ke=>{const Ae=ke.name;return Ae==="iframe"||Ae==="video"||Ae==="audio"},di=(ke,Ae,ut,xt=null)=>{const En=ke.attr(ut);return x(En)?En:ae(Ae,ut)?null:xt},xr=(ke,Ae,ut)=>{const xt=Ae.name==="img"||ke.name==="video",En=xt?"300":null,Rn=ke.name==="audio"?"30":"150",Mo=xt?Rn:null;Ae.attr({width:di(ke,ut,"width",En),height:di(ke,ut,"height",Mo)})},fi=(ke,Ae,ut,xt)=>{const En=Ie(ke.schema).parse(xt,{context:Ae});for(;En.firstChild;)ut.append(En.firstChild)},us=(ke,Ae)=>{const ut=Ae.name,xt=new Ue("img",1);return hi(ke,Ae,xt),xr(Ae,xt,{}),xt.attr({style:Ae.attr("style"),src:Zr.transparentSrc,"data-mce-object":ut,class:"mce-object mce-object-"+ut}),xt},Bn=(ke,Ae)=>{var ut;const xt=Ae.name,En=new Ue("span",1);En.attr({contentEditable:"false",style:Ae.attr("style"),"data-mce-object":xt,class:"mce-preview-object mce-object-"+xt}),hi(ke,Ae,En);const Rn=ke.dom.parseStyle((ut=Ae.attr("style"))!==null&&ut!==void 0?ut:""),Mo=new Ue(xt,1);if(xr(Ae,Mo,Rn),Mo.attr({src:Ae.attr("src"),style:Ae.attr("style"),class:Ae.attr("class")}),xt==="iframe")Mo.attr({allowfullscreen:Ae.attr("allowfullscreen"),frameborder:"0",sandbox:Ae.attr("sandbox")});else{M(["controls","crossorigin","currentTime","loop","muted","poster","preload"],Ce=>{Mo.attr(Ce,Ae.attr(Ce))});const Fo=En.attr("data-mce-html");x(Fo)&&fi(ke,xt,Mo,unescape(Fo))}const Vs=new Ue("span",1);return Vs.attr("class","mce-shim"),En.append(Mo),En.append(Vs),En},hi=(ke,Ae,ut)=>{var xt;const En=(xt=Ae.attributes)!==null&&xt!==void 0?xt:[];let Rn=En.length;for(;Rn--;){const Fo=En[Rn].name;let Ce=En[Rn].value;Fo!=="width"&&Fo!=="height"&&Fo!=="style"&&!wr(Fo,"data-mce-")&&((Fo==="data"||Fo==="src")&&(Ce=ke.convertURL(Ce,Fo)),ut.attr("data-mce-p-"+Fo,Ce))}const Mo=yt({inner:!0},ke.schema),Vs=new Ue("div",1);M(Ae.children(),Fo=>Vs.append(Fo));const Tt=Mo.serialize(Vs);Tt&&(ut.attr("data-mce-html",escape(Tt)),ut.empty())},Ke=ke=>{const Ae=ke.attr("class");return d(Ae)&&/\btiny-pageembed\b/.test(Ae)},ht=ke=>{let Ae=ke;for(;Ae=Ae.parent;)if(Ae.attr("data-ephox-embed-iri")||Ke(Ae))return!0;return!1},tn=ke=>Ae=>{let ut=Ae.length,xt;for(;ut--;)xt=Ae[ut],xt.parent&&(xt.parent.attr("data-mce-object")||(hr(xt)&&qe(ke)?ht(xt)||xt.replace(Bn(ke,xt)):ht(xt)||xt.replace(us(ke,xt))))},In=(ke,Ae,ut)=>{const xt=ke.options.get,En=xt("xss_sanitization"),Rn=Re(ke);return Ie(ke.schema,{sanitize:En,validate:Rn}).parse(ut,{context:Ae})},bo=ke=>{ke.on("PreInit",()=>{const{schema:Ae,serializer:ut,parser:xt}=ke,En=Ae.getBoolAttrs();M("webkitallowfullscreen mozallowfullscreen".split(" "),Rn=>{En[Rn]={}}),J({embed:["wmode"]},(Rn,Mo)=>{const Vs=Ae.getElementRule(Mo);Vs&&M(Rn,Tt=>{Vs.attributes[Tt]={},Vs.attributesOrder.push(Tt)})}),xt.addNodeFilter("iframe,video,audio,object,embed",tn(ke)),ut.addAttributeFilter("data-mce-object",(Rn,Mo)=>{var Vs;let Tt=Rn.length;for(;Tt--;){const Fo=Rn[Tt];if(!Fo.parent)continue;const Ce=Fo.attr(Mo),Te=new Ue(Ce,1);if(Ce!=="audio"){const _n=Fo.attr("class");_n&&_n.indexOf("mce-preview-object")!==-1&&Fo.firstChild?Te.attr({width:Fo.firstChild.attr("width"),height:Fo.firstChild.attr("height")}):Te.attr({width:Fo.attr("width"),height:Fo.attr("height")})}Te.attr({style:Fo.attr("style")});const _t=(Vs=Fo.attributes)!==null&&Vs!==void 0?Vs:[];let nn=_t.length;for(;nn--;){const _n=_t[nn].name;_n.indexOf("data-mce-p-")===0&&Te.attr(_n.substr(11),_t[nn].value)}const an=Fo.attr("data-mce-html");if(an){const _n=In(ke,Ce,unescape(an));M(_n.children(),Pn=>Te.append(Pn))}Fo.replace(Te)}})}),ke.on("SetContent",()=>{const Ae=ke.dom;M(Ae.select("span.mce-preview-object"),ut=>{Ae.select("span.mce-shim",ut).length===0&&Ae.add(ut,"span",{class:"mce-shim"})})})},Ks=ke=>{ke.on("ResolveName",Ae=>{let ut;Ae.target.nodeType===1&&(ut=Ae.target.getAttribute("data-mce-object"))&&(Ae.name=ut)})},Lr=ke=>Ae=>{const ut=()=>{Ae.setEnabled(ke.selection.isEditable())};return ke.on("NodeChange",ut),ut(),()=>{ke.off("NodeChange",ut)}},mr=ke=>{const Ae=()=>ke.execCommand("mceMedia");ke.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:Ae,onSetup:ut=>{const xt=ke.selection;ut.setActive(Fe(xt.getNode()));const En=xt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",ut.setActive).unbind,Rn=Lr(ke)(ut);return()=>{En(),Rn()}}}),ke.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:Ae,onSetup:Lr(ke)})};var _r=()=>{u.add("media",ke=>(ce(ke),So(ke),mr(ke),Ks(ke),bo(ke),Ne(ke),$t(ke)))};_r()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=q=>ae=>typeof ae===q,i=o("boolean"),l=o("number"),d=q=>ae=>ae.options.get(q),m=q=>{const ae=q.options.register;ae("nonbreaking_force_tab",{processor:Z=>i(Z)?{value:Z?3:0,valid:!0}:l(Z)?{value:Z,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),ae("nonbreaking_wrap",{processor:"boolean",default:!0})},p=d("nonbreaking_force_tab"),v=d("nonbreaking_wrap"),x=(q,ae)=>{let Z="";for(let ce=0;ce<ae;ce++)Z+=q;return Z},k=q=>q.plugins.visualchars?q.plugins.visualchars.isEnabled():!1,T=(q,ae)=>{const Z=()=>k(q)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",ce=()=>`<span class="${Z()}" contenteditable="false">${x("&nbsp;",ae)}</span>`,De=v(q)||q.plugins.visualchars?ce():x("&nbsp;",ae);q.undoManager.transact(()=>q.insertContent(De))},M=q=>{q.addCommand("mceNonBreaking",()=>{T(q,1)})};var N=tinymce.util.Tools.resolve("tinymce.util.VK");const I=q=>{const ae=p(q);ae>0&&q.on("keydown",Z=>{if(Z.keyCode===N.TAB&&!Z.isDefaultPrevented()){if(Z.shiftKey)return;Z.preventDefault(),Z.stopImmediatePropagation(),T(q,ae)}})},z=q=>ae=>{const Z=()=>{ae.setEnabled(q.selection.isEditable())};return q.on("NodeChange",Z),Z(),()=>{q.off("NodeChange",Z)}},Y=q=>{const ae=()=>q.execCommand("mceNonBreaking");q.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:ae,onSetup:z(q)}),q.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:ae,onSetup:z(q)})};var J=()=>{u.add("nonbreaking",q=>{m(q),M(q),Y(q),I(q)})};J()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env");const i=z=>Y=>Y.options.get(z),l=z=>{const Y=z.options.register;Y("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Y("pagebreak_split_block",{processor:"boolean",default:!1})},d=i("pagebreak_separator"),m=i("pagebreak_split_block"),p="mce-pagebreak",v=z=>{const Y=`<img src="${o.transparentSrc}" class="${p}" data-mce-resize="false" data-mce-placeholder />`;return z?`<p>${Y}</p>`:Y},x=z=>{const Y=d(z),J=()=>m(z),q=new RegExp(Y.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,ae=>"\\"+ae),"gi");z.on("BeforeSetContent",ae=>{ae.content=ae.content.replace(q,v(J()))}),z.on("PreInit",()=>{z.serializer.addNodeFilter("img",ae=>{let Z=ae.length,ce,_e;for(;Z--;)if(ce=ae[Z],_e=ce.attr("class"),_e&&_e.indexOf(p)!==-1){const De=ce.parent;if(De&&z.schema.getBlockElements()[De.name]&&J()){De.type=3,De.value=Y,De.raw=!0,ce.remove();continue}ce.type=3,ce.value=Y,ce.raw=!0}})})},k=z=>{z.addCommand("mcePageBreak",()=>{z.insertContent(v(m(z)))})},T=z=>{z.on("ResolveName",Y=>{Y.target.nodeName==="IMG"&&z.dom.hasClass(Y.target,p)&&(Y.name="pagebreak")})},M=z=>Y=>{const J=()=>{Y.setEnabled(z.selection.isEditable())};return z.on("NodeChange",J),J(),()=>{z.off("NodeChange",J)}},N=z=>{const Y=()=>z.execCommand("mcePageBreak");z.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Y,onSetup:M(z)}),z.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Y,onSetup:M(z)})};var I=()=>{u.add("pagebreak",z=>{l(z),k(z),N(z),x(z),T(z)})};I()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),i=tinymce.util.Tools.resolve("tinymce.util.Tools");const l=I=>z=>z.options.get(I),d=l("content_style"),m=l("content_css_cors"),p=l("body_class"),v=l("body_id"),x=I=>{var z;let Y="";const J=I.dom.encode,q=(z=d(I))!==null&&z!==void 0?z:"";Y+='<base href="'+J(I.documentBaseURI.getURI())+'">';const ae=m(I)?' crossorigin="anonymous"':"";i.each(I.contentCSS,$e=>{Y+='<link type="text/css" rel="stylesheet" href="'+J(I.documentBaseURI.toAbsolute($e))+'"'+ae+">"}),q&&(Y+='<style type="text/css">'+q+"</style>");const Z=v(I),ce=p(I),De='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(o.os.isMacOS()||o.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",G=I.getBody().dir,qe=G?' dir="'+J(G)+'"':"";return"<!DOCTYPE html><html><head>"+Y+'</head><body id="'+J(Z)+'" class="mce-content-body '+J(ce)+'"'+qe+">"+I.getContent()+De+"</body></html>"},k=I=>{const z=x(I);I.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:z}}).focus("close")},T=I=>{I.addCommand("mcePreview",()=>{k(I)})},M=I=>{const z=()=>I.execCommand("mcePreview");I.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:z}),I.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:z})};var N=()=>{u.add("preview",I=>{T(I),M(I)})};N()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(q=>ae=>typeof ae===q)("function");var l=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=tinymce.util.Tools.resolve("tinymce.util.Tools");const m=q=>ae=>ae.options.get(q),p=q=>{const ae=q.options.register;ae("save_enablewhendirty",{processor:"boolean",default:!0}),ae("save_onsavecallback",{processor:"function"}),ae("save_oncancelcallback",{processor:"function"})},v=m("save_enablewhendirty"),x=m("save_onsavecallback"),k=m("save_oncancelcallback"),T=(q,ae)=>{q.notificationManager.open({text:ae,type:"error"})},M=q=>{const ae=l.DOM.getParent(q.id,"form");if(v(q)&&!q.isDirty())return;q.save();const Z=x(q);if(i(Z)){Z.call(q,q),q.nodeChanged();return}ae?(q.setDirty(!1),(!ae.onsubmit||ae.onsubmit())&&(typeof ae.submit=="function"?ae.submit():T(q,"Error: Form submit field collision.")),q.nodeChanged()):T(q,"Error: No form element found.")},N=q=>{const ae=d.trim(q.startContent),Z=k(q);if(i(Z)){Z.call(q,q);return}q.resetContent(ae)},I=q=>{q.addCommand("mceSave",()=>{M(q)}),q.addCommand("mceCancel",()=>{N(q)})},z=q=>ae=>{const Z=()=>{ae.setEnabled(!v(q)||q.isDirty())};return Z(),q.on("NodeChange dirty",Z),()=>q.off("NodeChange dirty",Z)},Y=q=>{q.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>q.execCommand("mceSave"),onSetup:z(q)}),q.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>q.execCommand("mceCancel"),onSetup:z(q)}),q.addShortcut("Meta+S","","mceSave")};var J=()=>{u.add("save",q=>{p(q),Y(q),I(q)})};J()})();(function(){const u=Ce=>{let Te=Ce;return{get:()=>Te,set:an=>{Te=an}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(Ce,Te,_t)=>{var nn;return _t(Ce,Te.prototype)?!0:((nn=Ce.constructor)===null||nn===void 0?void 0:nn.name)===Te.name},l=Ce=>{const Te=typeof Ce;return Ce===null?"null":Te==="object"&&Array.isArray(Ce)?"array":Te==="object"&&i(Ce,String,(_t,nn)=>nn.isPrototypeOf(_t))?"string":Te},d=Ce=>Te=>l(Te)===Ce,m=Ce=>Te=>typeof Te===Ce,p=d("string"),v=d("array"),x=m("boolean"),k=Ce=>Ce==null,T=Ce=>!k(Ce),M=m("number"),N=()=>{},I=Ce=>()=>Ce,z=I(!0),J=I("[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class q{constructor(Te,_t){this.tag=Te,this.value=_t}static some(Te){return new q(!0,Te)}static none(){return q.singletonNone}fold(Te,_t){return this.tag?_t(this.value):Te()}isSome(){return this.tag}isNone(){return!this.tag}map(Te){return this.tag?q.some(Te(this.value)):q.none()}bind(Te){return this.tag?Te(this.value):q.none()}exists(Te){return this.tag&&Te(this.value)}forall(Te){return!this.tag||Te(this.value)}filter(Te){return!this.tag||Te(this.value)?this:q.none()}getOr(Te){return this.tag?this.value:Te}or(Te){return this.tag?this:Te}getOrThunk(Te){return this.tag?this.value:Te()}orThunk(Te){return this.tag?this:Te()}getOrDie(Te){if(this.tag)return this.value;throw new Error(Te!=null?Te:"Called getOrDie on None")}static from(Te){return T(Te)?q.some(Te):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Te){this.tag&&Te(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const ae=J;var Z=tinymce.util.Tools.resolve("tinymce.Env"),ce=tinymce.util.Tools.resolve("tinymce.util.Tools");const _e=Array.prototype.slice,De=Array.prototype.push,G=(Ce,Te)=>{const _t=Ce.length,nn=new Array(_t);for(let an=0;an<_t;an++){const _n=Ce[an];nn[an]=Te(_n,an)}return nn},qe=(Ce,Te)=>{for(let _t=0,nn=Ce.length;_t<nn;_t++){const an=Ce[_t];Te(an,_t)}},Re=(Ce,Te)=>{for(let _t=Ce.length-1;_t>=0;_t--){const nn=Ce[_t];Te(nn,_t)}},$e=(Ce,Te)=>{if(Ce.length===0)return[];{let _t=Te(Ce[0]);const nn=[];let an=[];for(let _n=0,Pn=Ce.length;_n<Pn;_n++){const An=Ce[_n],$n=Te(An);$n!==_t&&(nn.push(an),an=[]),_t=$n,an.push(An)}return an.length!==0&&nn.push(an),nn}},le=(Ce,Te,_t)=>(qe(Ce,(nn,an)=>{_t=Te(_t,nn,an)}),_t),Ee=Ce=>{const Te=[];for(let _t=0,nn=Ce.length;_t<nn;++_t){if(!v(Ce[_t]))throw new Error("Arr.flatten item "+_t+" was not an array, input: "+Ce);De.apply(Te,Ce[_t])}return Te},ft=(Ce,Te)=>Ee(G(Ce,Te)),ne=(Ce,Te)=>{const _t=_e.call(Ce,0);return _t.sort(Te),_t},ge=Object.hasOwnProperty,O=(Ce,Te)=>ge.call(Ce,Te);typeof window!="undefined"||Function("return this;")();const Ye=9,me=11,lt=1,qt=3,Be=Ce=>Ce.dom.nodeType,yt=(Ce=>Te=>Be(Te)===Ce)(qt),Ie=(Ce,Te,_t)=>{if(p(_t)||x(_t)||M(_t))Ce.setAttribute(Te,_t+"");else throw new Error("Attribute value was not simple")},wt=(Ce,Te,_t)=>{Ie(Ce.dom,Te,_t)},ue=(Ce,Te)=>{const nn=(Te||document).createElement("div");if(nn.innerHTML=Ce,!nn.hasChildNodes()||nn.childNodes.length>1){const an="HTML does not have a single root node";throw new Error(an)}return kn(nn.childNodes[0])},je=(Ce,Te)=>{const nn=(Te||document).createElement(Ce);return kn(nn)},V=(Ce,Te)=>{const nn=(Te||document).createTextNode(Ce);return kn(nn)},kn=Ce=>{if(Ce==null)throw new Error("Node cannot be null or undefined");return{dom:Ce}},oo={fromHtml:ue,fromTag:je,fromText:V,fromDom:kn,fromPoint:(Ce,Te,_t)=>q.from(Ce.dom.elementFromPoint(Te,_t)).map(kn)},Do=Ce=>Ce.nodeType!==lt&&Ce.nodeType!==Ye&&Ce.nodeType!==me||Ce.childElementCount===0,Ss=(Ce,Te)=>{const _t=Te===void 0?document:Te.dom;return Do(_t)?[]:G(_t.querySelectorAll(Ce),oo.fromDom)},Qe=Ce=>q.from(Ce.dom.parentNode).map(oo.fromDom),Bt=Ce=>G(Ce.dom.childNodes,oo.fromDom),nt=(Ce,Te)=>({element:Ce,offset:Te}),de=(Ce,Te)=>{const _t=Bt(Ce);return _t.length>0&&Te<_t.length?nt(_t[Te],0):nt(Ce,Te)},xe=(Ce,Te)=>{Qe(Ce).each(nn=>{nn.dom.insertBefore(Te.dom,Ce.dom)})},Fe=(Ce,Te)=>{Ce.dom.appendChild(Te.dom)},Ne=(Ce,Te)=>{xe(Ce,Te),Fe(Te,Ce)},ve=((Ce,Te)=>{const _t=_n=>{if(!Ce(_n))throw new Error("Can only get "+Te+" value of a "+Te+" node");return nn(_n).getOr("")},nn=_n=>Ce(_n)?q.from(_n.dom.nodeValue):q.none();return{get:_t,getOption:nn,set:(_n,Pn)=>{if(!Ce(_n))throw new Error("Can only set raw "+Te+" value of a "+Te+" node");_n.dom.nodeValue=Pn}}})(yt,"text"),We=Ce=>ve.get(Ce),st=(Ce,Te,_t)=>(Ce.compareDocumentPosition(Te)&_t)!==0,en=(Ce,Te)=>st(Ce,Te,Node.DOCUMENT_POSITION_PRECEDING),jn=(Ce,Te)=>Ss(Te,Ce);var On=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ao=(Ce,Te)=>Ce.isBlock(Te)||O(Ce.schema.getVoidElements(),Te.nodeName),Yn=(Ce,Te)=>!Ce.isEditable(Te),ls=(Ce,Te)=>Ce.getContentEditable(Te)==="true"&&Te.parentNode&&!Ce.isEditable(Te.parentNode),Xe=(Ce,Te)=>!Ce.isBlock(Te)&&O(Ce.schema.getWhitespaceElements(),Te.nodeName),pt=(Ce,Te)=>ao(Ce,Te)||Yn(Ce,Te)||Xe(Ce,Te)||ls(Ce,Te),Pt=Ce=>Ce.nodeType===3,jt=()=>({sOffset:0,fOffset:0,elements:[]}),vn=(Ce,Te)=>de(oo.fromDom(Ce),Te),so=(Ce,Te,_t,nn,an,_n=!0)=>{let Pn=_n?Te(!1):_t;for(;Pn;){const An=Yn(Ce,Pn);if(An||Xe(Ce,Pn)){if(An?nn.cef(Pn):nn.boundary(Pn))break;Pn=Te(!0);continue}else if(ao(Ce,Pn)){if(nn.boundary(Pn))break}else Pt(Pn)&&nn.text(Pn);if(Pn===an)break;Pn=Te(!1)}},lo=(Ce,Te,_t,nn,an)=>{var _n;if(pt(Ce,_t))return;const Pn=(_n=Ce.getParent(nn,Ce.isBlock))!==null&&_n!==void 0?_n:Ce.getRoot(),An=new On(_t,Pn),$n=an?An.next.bind(An):An.prev.bind(An);so(Ce,$n,_t,{boundary:z,cef:z,text:Vn=>{an?Te.fOffset+=Vn.length:Te.sOffset+=Vn.length,Te.elements.push(oo.fromDom(Vn))}})},Qo=(Ce,Te,_t,nn,an,_n=!0)=>{const Pn=new On(_t,Te),An=[];let $n=jt();lo(Ce,$n,_t,Te,!1);const Vn=()=>($n.elements.length>0&&(An.push($n),$n=jt()),!1);return so(Ce,Pn.next.bind(Pn),_t,{boundary:Vn,cef:Xo=>(Vn(),an&&An.push(...an.cef(Xo)),!1),text:Xo=>{$n.elements.push(oo.fromDom(Xo)),an&&an.text(Xo,$n)}},nn,_n),nn&&lo(Ce,$n,nn,Te,!0),Vn(),An},Bo=(Ce,Te)=>{const _t=vn(Te.startContainer,Te.startOffset),nn=_t.element.dom,an=vn(Te.endContainer,Te.endOffset),_n=an.element.dom;return Qo(Ce,Te.commonAncestorContainer,nn,_n,{text:(Pn,An)=>{Pn===_n?An.fOffset+=Pn.length-an.offset:Pn===nn&&(An.sOffset+=_t.offset)},cef:Pn=>{const An=ft(jn(oo.fromDom(Pn),"*[contenteditable=true]"),$n=>{const Vn=$n.dom;return Qo(Ce,Vn,Vn)});return ne(An,($n,Vn)=>en($n.elements[0].dom,Vn.elements[0].dom)?1:-1)}},!1)},cs=(Ce,Te)=>Te.collapsed?[]:Bo(Ce,Te),$t=(Ce,Te)=>{const _t=Ce.createRng();return _t.selectNode(Te),cs(Ce,_t)},So=(Ce,Te)=>ft(Te,_t=>$t(Ce,_t)),Js=(Ce,Te,_t=0,nn=Ce.length)=>{const an=Te.regex;an.lastIndex=_t;const _n=[];let Pn;for(;Pn=an.exec(Ce);){const An=Pn[Te.matchIndex],$n=Pn.index+Pn[0].indexOf(An),Vn=$n+An.length;if(Vn>nn)break;_n.push({start:$n,finish:Vn}),an.lastIndex=Vn}return _n},wr=(Ce,Te)=>{const _t=le(Ce,(nn,an)=>{const _n=We(an),Pn=nn.last,An=Pn+_n.length,$n=ft(Te,(Vn,Xo)=>Vn.start<An&&Vn.finish>Pn?[{element:an,start:Math.max(Pn,Vn.start)-Pn,finish:Math.min(An,Vn.finish)-Pn,matchId:Xo}]:[]);return{results:nn.results.concat($n),last:An}},{results:[],last:0}).results;return $e(_t,nn=>nn.matchId)},Zr=(Ce,Te)=>ft(Te,_t=>{const nn=_t.elements,an=G(nn,We).join(""),_n=Js(an,Ce,_t.sOffset,an.length-_t.fOffset);return wr(nn,_n)}),hr=(Ce,Te)=>{Re(Ce,(_t,nn)=>{Re(_t,an=>{const _n=oo.fromDom(Te.cloneNode(!1));wt(_n,"data-mce-index",nn);const Pn=an.element.dom;if(Pn.length===an.finish&&an.start===0)Ne(an.element,_n);else{Pn.length!==an.finish&&Pn.splitText(an.finish);const An=Pn.splitText(an.start);Ne(oo.fromDom(An),_n)}})})},di=(Ce,Te,_t,nn)=>{const an=$t(Ce,_t),_n=Zr(Te,an);return hr(_n,nn),_n.length},xr=(Ce,Te,_t,nn)=>{const an=_t.getBookmark(),_n=Ce.select("td[data-mce-selected],th[data-mce-selected]"),Pn=_n.length>0?So(Ce,_n):cs(Ce,_t.getRng()),An=Zr(Te,Pn);return hr(An,nn),_t.moveToBookmark(an),An.length},fi=Ce=>Ce.getAttribute("data-mce-index"),us=(Ce,Te,_t,nn)=>{const an=Ce.dom.create("span",{"data-mce-bogus":1});an.className="mce-match-marker";const _n=Ce.getBody();return _r(Ce,Te,!1),nn?xr(Ce.dom,_t,Ce.selection,an):di(Ce.dom,_t,_n,an)},Bn=Ce=>{var Te;const _t=Ce.parentNode;Ce.firstChild&&_t.insertBefore(Ce.firstChild,Ce),(Te=Ce.parentNode)===null||Te===void 0||Te.removeChild(Ce)},hi=(Ce,Te)=>{const _t=[],nn=ce.toArray(Ce.getBody().getElementsByTagName("span"));if(nn.length)for(let an=0;an<nn.length;an++){const _n=fi(nn[an]);_n===null||!_n.length||_n===Te.toString()&&_t.push(nn[an])}return _t},Ke=(Ce,Te,_t)=>{const nn=Te.get();let an=nn.index;const _n=Ce.dom;_t?an+1===nn.count?an=0:an++:an-1===-1?an=nn.count-1:an--,_n.removeClass(hi(Ce,nn.index),"mce-match-marker-selected");const Pn=hi(Ce,an);return Pn.length?(_n.addClass(hi(Ce,an),"mce-match-marker-selected"),Ce.selection.scrollIntoView(Pn[0]),an):-1},ht=(Ce,Te)=>{const _t=Te.parentNode;Ce.remove(Te),_t&&Ce.isEmpty(_t)&&Ce.remove(_t)},tn=(Ce,Te)=>{const nn="("+Ce.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return Te?`(?:^|\\s|${ae()})`+nn+`(?=$|\\s|${ae()})`:nn},In=(Ce,Te,_t,nn,an,_n)=>{const Pn=Ce.selection,An=tn(_t,an),$n=Pn.isForward(),Vn={regex:new RegExp(An,nn?"g":"gi"),matchIndex:1},Xo=us(Ce,Te,Vn,_n);if(Z.browser.isSafari()&&Pn.setRng(Pn.getRng(),$n),Xo){const Os=Ke(Ce,Te,!0);Te.set({index:Os,count:Xo,text:_t,matchCase:nn,wholeWord:an,inSelection:_n})}return Xo},bo=(Ce,Te)=>{const _t=Ke(Ce,Te,!0);Te.set(Ot(ie({},Te.get()),{index:_t}))},Ks=(Ce,Te)=>{const _t=Ke(Ce,Te,!1);Te.set(Ot(ie({},Te.get()),{index:_t}))},Lr=Ce=>{const Te=fi(Ce);return Te!==null&&Te.length>0},mr=(Ce,Te,_t,nn,an)=>{const _n=Te.get(),Pn=_n.index;let An,$n=Pn;nn=nn!==!1;const Vn=Ce.getBody(),Xo=ce.grep(ce.toArray(Vn.getElementsByTagName("span")),Lr);for(let Os=0;Os<Xo.length;Os++){const Bi=fi(Xo[Os]);let Oa=An=parseInt(Bi,10);if(an||Oa===_n.index){for(_t.length?(Xo[Os].innerText=_t,Bn(Xo[Os])):ht(Ce.dom,Xo[Os]);Xo[++Os];)if(Oa=parseInt(fi(Xo[Os]),10),Oa===An)ht(Ce.dom,Xo[Os]);else{Os--;break}nn&&$n--}else An>Pn&&Xo[Os].setAttribute("data-mce-index",String(An-1))}return Te.set(Ot(ie({},_n),{count:an?0:_n.count-1,index:$n})),nn?bo(Ce,Te):Ks(Ce,Te),!an&&Te.get().count>0},_r=(Ce,Te,_t)=>{let nn,an;const _n=Te.get(),Pn=ce.toArray(Ce.getBody().getElementsByTagName("span"));for(let An=0;An<Pn.length;An++){const $n=fi(Pn[An]);$n!==null&&$n.length&&($n===_n.index.toString()&&(nn||(nn=Pn[An].firstChild),an=Pn[An].firstChild),Bn(Pn[An]))}if(Te.set(Ot(ie({},_n),{index:-1,count:0,text:""})),nn&&an){const An=Ce.dom.createRng();return An.setStart(nn,0),An.setEnd(an,an.data.length),_t!==!1&&Ce.selection.setRng(An),An}else return},ke=(Ce,Te)=>Te.get().count>1,Ae=(Ce,Te)=>Te.get().count>1,ut=(Ce,Te)=>({done:An=>_r(Ce,Te,An),find:(An,$n,Vn,Xo=!1)=>In(Ce,Te,An,$n,Vn,Xo),next:()=>bo(Ce,Te),prev:()=>Ks(Ce,Te),replace:(An,$n,Vn)=>mr(Ce,Te,An,$n,Vn)}),xt=Ce=>{const Te=u(q.none()),_t=()=>Te.get().each(Ce);return{clear:()=>{_t(),Te.set(q.none())},isSet:()=>Te.get().isSome(),get:()=>Te.get(),set:An=>{_t(),Te.set(q.some(An))}}},En=()=>{const Ce=xt(N),Te=_t=>Ce.get().each(_t);return Ot(ie({},Ce),{on:Te})},Rn=(Ce,Te)=>{const _t=En();Ce.undoManager.add();const nn=ce.trim(Ce.selection.getContent({format:"text"})),an=Po=>{Po.setEnabled("next",ke(Ce,Te)),Po.setEnabled("prev",Ae(Ce,Te))},_n=Po=>{const Io=Po.getData(),ds=Te.get();Te.set(Ot(ie({},ds),{matchCase:Io.matchcase,wholeWord:Io.wholewords,inSelection:Io.inselection}))},Pn=(Po,Io)=>{qe(["replace","replaceall","prev","next"],Fi=>Po.setEnabled(Fi,!Io))},An=(Po,Io)=>{Io.redial(ql(Po,Io.getData()))},$n=(Po,Io)=>{Z.browser.isSafari()&&Z.deviceType.isTouch()&&(Io==="find"||Io==="replace"||Io==="replaceall")&&Po.focus(Io)},Vn=Po=>{_r(Ce,Te,!1),Pn(Po,!0),an(Po)},Xo=Po=>{const Io=Po.getData(),ds=Te.get();if(!Io.findtext.length){Vn(Po);return}if(ds.text===Io.findtext&&ds.matchCase===Io.matchcase&&ds.wholeWord===Io.wholewords)bo(Ce,Te);else{const Wi=In(Ce,Te,Io.findtext,Io.matchcase,Io.wholewords,Io.inselection);Wi<=0&&An(!0,Po),Pn(Po,Wi===0)}an(Po)},Os=Te.get(),Bi={findtext:nn,replacetext:"",wholewords:Os.wholeWord,matchcase:Os.matchCase,inselection:Os.inSelection},Oa=Po=>{const Io=[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}];return Po&&Io.push({type:"alertbanner",level:"error",text:"Could not find the specified string.",icon:"warning"}),Io},ql=(Po,Io)=>({title:"Find and Replace",size:"normal",body:{type:"panel",items:Oa(Po)},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:Io,onChange:(ds,Wi)=>{Po&&An(!1,ds),Wi.name==="findtext"&&Te.get().count>0&&Vn(ds)},onAction:(ds,Wi)=>{const Fi=ds.getData();switch(Wi.name){case"find":Xo(ds);break;case"replace":mr(Ce,Te,Fi.replacetext)?an(ds):Vn(ds);break;case"replaceall":mr(Ce,Te,Fi.replacetext,!0,!0),Vn(ds);break;case"prev":Ks(Ce,Te),an(ds);break;case"next":bo(Ce,Te),an(ds);break;case"matchcase":case"wholewords":case"inselection":An(!1,ds),_n(ds),Vn(ds);break}$n(ds,Wi.name)},onSubmit:ds=>{Xo(ds),$n(ds,"find")},onClose:()=>{Ce.focus(),_r(Ce,Te),Ce.undoManager.add()}});_t.set(Ce.windowManager.open(ql(!1,Bi),{inline:"toolbar"}))},Mo=(Ce,Te)=>{Ce.addCommand("SearchReplace",()=>{Rn(Ce,Te)})},Vs=(Ce,Te)=>()=>{Rn(Ce,Te)},Tt=(Ce,Te)=>{Ce.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:Vs(Ce,Te),icon:"search"}),Ce.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:Vs(Ce,Te),icon:"search"}),Ce.shortcuts.add("Meta+F","",Vs(Ce,Te))};var Fo=()=>{o.add("searchreplace",Ce=>{const Te=u({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return Mo(Ce,Te),Tt(Ce,Te),ut(Ce,Te)})};Fo()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=(ve,We,st)=>{var en;return st(ve,We.prototype)?!0:((en=ve.constructor)===null||en===void 0?void 0:en.name)===We.name},i=ve=>{const We=typeof ve;return ve===null?"null":We==="object"&&Array.isArray(ve)?"array":We==="object"&&o(ve,String,(st,en)=>en.isPrototypeOf(st))?"string":We},l=ve=>We=>i(We)===ve,d=ve=>We=>typeof We===ve,m=l("string"),p=l("object"),v=l("array"),x=ve=>ve==null,k=ve=>!x(ve),T=d("function"),M=(ve,We)=>{if(v(ve)){for(let st=0,en=ve.length;st<en;++st)if(!We(ve[st]))return!1;return!0}return!1},N=ve=>()=>ve;function I(ve,...We){return(...st)=>{const en=We.concat(st);return ve.apply(null,en)}}const z=N(!1),Y=ve=>ve.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var J=tinymce.util.Tools.resolve("tinymce.util.Tools");const q=ve=>We=>We.options.get(ve),ae=ve=>{const We=ve.options.register;We("template_cdate_classes",{processor:"string",default:"cdate"}),We("template_mdate_classes",{processor:"string",default:"mdate"}),We("template_selected_content_classes",{processor:"string",default:"selcontent"}),We("template_preview_replace_values",{processor:"object"}),We("template_replace_values",{processor:"object"}),We("templates",{processor:st=>m(st)||M(st,p)||T(st),default:[]}),We("template_cdate_format",{processor:"string",default:ve.translate("%Y-%m-%d")}),We("template_mdate_format",{processor:"string",default:ve.translate("%Y-%m-%d")})},Z=q("template_cdate_classes"),ce=q("template_mdate_classes"),_e=q("template_selected_content_classes"),De=q("template_preview_replace_values"),G=q("template_replace_values"),qe=q("templates"),Re=q("template_cdate_format"),$e=q("template_mdate_format"),le=q("content_style"),Ee=q("content_css_cors"),ft=q("body_class"),ne=(ve,We)=>{if(ve=""+ve,ve.length<We)for(let st=0;st<We-ve.length;st++)ve="0"+ve;return ve},ge=(ve,We,st=new Date)=>{const en="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),jn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),On="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ao="January February March April May June July August September October November December".split(" ");return We=We.replace("%D","%m/%d/%Y"),We=We.replace("%r","%I:%M:%S %p"),We=We.replace("%Y",""+st.getFullYear()),We=We.replace("%y",""+st.getYear()),We=We.replace("%m",ne(st.getMonth()+1,2)),We=We.replace("%d",ne(st.getDate(),2)),We=We.replace("%H",""+ne(st.getHours(),2)),We=We.replace("%M",""+ne(st.getMinutes(),2)),We=We.replace("%S",""+ne(st.getSeconds(),2)),We=We.replace("%I",""+((st.getHours()+11)%12+1)),We=We.replace("%p",st.getHours()<12?"AM":"PM"),We=We.replace("%B",""+ve.translate(ao[st.getMonth()])),We=We.replace("%b",""+ve.translate(On[st.getMonth()])),We=We.replace("%A",""+ve.translate(jn[st.getDay()])),We=We.replace("%a",""+ve.translate(en[st.getDay()])),We=We.replace("%%","%"),We};class O{constructor(We,st){this.tag=We,this.value=st}static some(We){return new O(!0,We)}static none(){return O.singletonNone}fold(We,st){return this.tag?st(this.value):We()}isSome(){return this.tag}isNone(){return!this.tag}map(We){return this.tag?O.some(We(this.value)):O.none()}bind(We){return this.tag?We(this.value):O.none()}exists(We){return this.tag&&We(this.value)}forall(We){return!this.tag||We(this.value)}filter(We){return!this.tag||We(this.value)?this:O.none()}getOr(We){return this.tag?this.value:We}or(We){return this.tag?this:We}getOrThunk(We){return this.tag?this.value:We()}orThunk(We){return this.tag?this:We()}getOrDie(We){if(this.tag)return this.value;throw new Error(We!=null?We:"Called getOrDie on None")}static from(We){return k(We)?O.some(We):O.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(We){this.tag&&We(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}O.singletonNone=new O(!1);const Ye=(ve,We)=>{for(let st=0,en=ve.length;st<en;st++){const jn=ve[st];if(We(jn,st))return!0}return!1},me=(ve,We)=>{const st=ve.length,en=new Array(st);for(let jn=0;jn<st;jn++){const On=ve[jn];en[jn]=We(On,jn)}return en},lt=(ve,We,st)=>{for(let en=0,jn=ve.length;en<jn;en++){const On=ve[en];if(We(On,en))return O.some(On);if(st(On,en))break}return O.none()},qt=(ve,We)=>lt(ve,We,z),Be=Object.hasOwnProperty,Ue=(ve,We)=>yt(ve,We)?O.from(ve[We]):O.none(),yt=(ve,We)=>Be.call(ve,We);var Ie=tinymce.util.Tools.resolve("tinymce.html.Serializer");const wt={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},ue=ve=>ve.replace(/["'<>&]/g,We=>Ue(wt,We).getOr(We)),je=(ve,We,st)=>Ye(st.split(/\s+/),en=>ve.hasClass(We,en)),V=(ve,We)=>Ie({validate:!0},ve.schema).serialize(ve.parser.parse(We,{insert:!0})),kn=(ve,We)=>()=>{const st=qe(ve);T(st)?st(We):m(st)?fetch(st).then(en=>{en.ok&&en.json().then(We)}):We(st)},un=(ve,We)=>(J.each(We,(st,en)=>{T(st)&&(st=st(en)),ve=ve.replace(new RegExp("\\{\\$"+Y(en)+"\\}","g"),st)}),ve),oo=(ve,We)=>{const st=ve.dom,en=G(ve);J.each(st.select("*",We),jn=>{J.each(en,(On,ao)=>{st.hasClass(jn,ao)&&T(On)&&On(jn)})})},Do=(ve,We,st)=>{const en=ve.dom,jn=ve.selection.getContent();st=un(st,G(ve));let On=en.create("div",{},V(ve,st));const ao=en.select(".mceTmpl",On);ao&&ao.length>0&&(On=en.create("div"),On.appendChild(ao[0].cloneNode(!0))),J.each(en.select("*",On),Yn=>{je(en,Yn,Z(ve))&&(Yn.innerHTML=ge(ve,Re(ve))),je(en,Yn,ce(ve))&&(Yn.innerHTML=ge(ve,$e(ve))),je(en,Yn,_e(ve))&&(Yn.innerHTML=jn)}),oo(ve,On),ve.execCommand("mceInsertContent",!1,On.innerHTML),ve.addVisual()};var Ss=tinymce.util.Tools.resolve("tinymce.Env");const Qe=(ve,We)=>{var st;let en=V(ve,We);if(We.indexOf("<html>")===-1){let jn="";const On=(st=le(ve))!==null&&st!==void 0?st:"",ao=Ee(ve)?' crossorigin="anonymous"':"";J.each(ve.contentCSS,vn=>{jn+='<link type="text/css" rel="stylesheet" href="'+ve.documentBaseURI.toAbsolute(vn)+'"'+ao+">"}),On&&(jn+='<style type="text/css">'+On+"</style>");const Yn=ft(ve),ls=ve.dom.encode,pt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Ss.os.isMacOS()||Ss.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Pt=ve.getBody().dir,jt=Pt?' dir="'+ls(Pt)+'"':"";en='<!DOCTYPE html><html><head><base href="'+ls(ve.documentBaseURI.getURI())+'">'+jn+pt+'</head><body class="'+ls(Yn)+'"'+jt+">"+en+"</body></html>"}return un(en,De(ve))},Bt=(ve,We)=>{const st=()=>{if(!We||We.length===0){const Pt=ve.translate("No templates defined.");return ve.notificationManager.open({text:Pt,type:"info"}),O.none()}return O.from(J.map(We,(Pt,jt)=>{const vn=so=>so.url!==void 0;return{selected:jt===0,text:Pt.title,value:{url:vn(Pt)?O.from(Pt.url):O.none(),content:vn(Pt)?O.none():O.from(Pt.content),description:Pt.description}}}))},en=Pt=>me(Pt,jt=>({text:jt.text,value:jt.text})),jn=(Pt,jt)=>qt(Pt,vn=>vn.text===jt),On=Pt=>{ve.windowManager.alert("Could not load the specified template.",()=>Pt.focus("template"))},ao=Pt=>Pt.value.url.fold(()=>Promise.resolve(Pt.value.content.getOr("")),jt=>fetch(jt).then(vn=>vn.ok?vn.text():Promise.reject())),Yn=(Pt,jt)=>(vn,so)=>{if(so.name==="template"){const lo=vn.getData().template;jn(Pt,lo).each(Qo=>{vn.block("Loading..."),ao(Qo).then(Bo=>{jt(vn,Qo,Bo)}).catch(()=>{jt(vn,Qo,""),vn.setEnabled("save",!1),On(vn)})})}},ls=Pt=>jt=>{const vn=jt.getData();jn(Pt,vn.template).each(so=>{ao(so).then(lo=>{ve.execCommand("mceInsertTemplate",!1,lo),jt.close()}).catch(()=>{jt.setEnabled("save",!1),On(jt)})})},Xe=Pt=>{const jt=en(Pt),vn=(Qo,Bo)=>({title:"Insert Template",size:"large",body:{type:"panel",items:Qo},initialData:Bo,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:ls(Pt),onChange:Yn(Pt,so)}),so=(Qo,Bo,cs)=>{const $t=Qe(ve,cs),So=[{type:"listbox",name:"template",label:"Templates",items:jt},{type:"htmlpanel",html:`<p aria-live="polite">${ue(Bo.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],Js={template:Bo.text,preview:$t};Qo.unblock(),Qo.redial(vn(So,Js)),Qo.focus("template")},lo=ve.windowManager.open(vn([],{template:"",preview:""}));lo.block("Loading..."),ao(Pt[0]).then(Qo=>{so(lo,Pt[0],Qo)}).catch(()=>{so(lo,Pt[0],""),lo.setEnabled("save",!1),On(lo)})};st().each(Xe)},nt=ve=>We=>{Bt(ve,We)},de=ve=>{ve.addCommand("mceInsertTemplate",I(Do,ve)),ve.addCommand("mceTemplate",kn(ve,nt(ve)))},xe=ve=>{ve.on("PreProcess",We=>{const st=ve.dom,en=$e(ve);J.each(st.select("div",We.node),jn=>{st.hasClass(jn,"mceTmpl")&&(J.each(st.select("*",jn),On=>{je(st,On,ce(ve))&&(On.innerHTML=ge(ve,en))}),oo(ve,jn))})})},Fe=ve=>We=>{const st=()=>{We.setEnabled(ve.selection.isEditable())};return ve.on("NodeChange",st),st(),()=>{ve.off("NodeChange",st)}},Ne=ve=>{const We=()=>ve.execCommand("mceTemplate");ve.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onSetup:Fe(ve),onAction:We}),ve.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onSetup:Fe(ve),onAction:We})};var kt=()=>{u.add("template",ve=>{ae(ve),Ne(ve),de(ve),xe(ve)})};kt()})();(function(){const u=N=>{let I=N;return{get:()=>I,set:J=>{I=J}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(N,I)=>{N.dispatch("VisualBlocks",{state:I})},l=(N,I,z)=>{N.dom.toggleClass(N.getBody(),"mce-visualblocks"),z.set(!z.get()),i(N,z.get())},d=(N,I,z)=>{N.addCommand("mceVisualBlocks",()=>{l(N,I,z)})},m=N=>I=>I.options.get(N),p=N=>{const I=N.options.register;I("visualblocks_default_state",{processor:"boolean",default:!1})},v=m("visualblocks_default_state"),x=(N,I,z)=>{N.on("PreviewFormats AfterPreviewFormats",Y=>{z.get()&&N.dom.toggleClass(N.getBody(),"mce-visualblocks",Y.type==="afterpreviewformats")}),N.on("init",()=>{v(N)&&l(N,I,z)})},k=(N,I)=>z=>{z.setActive(I.get());const Y=J=>z.setActive(J.state);return N.on("VisualBlocks",Y),()=>N.off("VisualBlocks",Y)},T=(N,I)=>{const z=()=>N.execCommand("mceVisualBlocks");N.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:z,onSetup:k(N,I)}),N.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:z,onSetup:k(N,I)})};var M=()=>{o.add("visualblocks",(N,I)=>{p(N);const z=u(!1);d(N,I,z),T(N,z),x(N,I,z)})};M()})();(function(){const u=Ke=>{let ht=Ke;return{get:()=>ht,set:bo=>{ht=bo}}};var o=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=Ke=>({isEnabled:()=>Ke.get()}),l=(Ke,ht)=>Ke.dispatch("VisualChars",{state:ht}),d=(Ke,ht,tn)=>{var In;return tn(Ke,ht.prototype)?!0:((In=Ke.constructor)===null||In===void 0?void 0:In.name)===ht.name},m=Ke=>{const ht=typeof Ke;return Ke===null?"null":ht==="object"&&Array.isArray(Ke)?"array":ht==="object"&&d(Ke,String,(tn,In)=>In.isPrototypeOf(tn))?"string":ht},p=Ke=>ht=>m(ht)===Ke,v=Ke=>ht=>typeof ht===Ke,x=Ke=>ht=>Ke===ht,k=p("string"),T=p("object"),M=x(null),N=v("boolean"),I=Ke=>Ke==null,z=Ke=>!I(Ke),Y=v("number");class J{constructor(ht,tn){this.tag=ht,this.value=tn}static some(ht){return new J(!0,ht)}static none(){return J.singletonNone}fold(ht,tn){return this.tag?tn(this.value):ht()}isSome(){return this.tag}isNone(){return!this.tag}map(ht){return this.tag?J.some(ht(this.value)):J.none()}bind(ht){return this.tag?ht(this.value):J.none()}exists(ht){return this.tag&&ht(this.value)}forall(ht){return!this.tag||ht(this.value)}filter(ht){return!this.tag||ht(this.value)?this:J.none()}getOr(ht){return this.tag?this.value:ht}or(ht){return this.tag?this:ht}getOrThunk(ht){return this.tag?this.value:ht()}orThunk(ht){return this.tag?this:ht()}getOrDie(ht){if(this.tag)return this.value;throw new Error(ht!=null?ht:"Called getOrDie on None")}static from(ht){return z(ht)?J.some(ht):J.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ht){this.tag&&ht(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}J.singletonNone=new J(!1);const q=(Ke,ht)=>{const tn=Ke.length,In=new Array(tn);for(let bo=0;bo<tn;bo++){const Ks=Ke[bo];In[bo]=ht(Ks,bo)}return In},ae=(Ke,ht)=>{for(let tn=0,In=Ke.length;tn<In;tn++){const bo=Ke[tn];ht(bo,tn)}},Z=(Ke,ht)=>{const tn=[];for(let In=0,bo=Ke.length;In<bo;In++){const Ks=Ke[In];ht(Ks,In)&&tn.push(Ks)}return tn},ce=Object.keys,_e=(Ke,ht)=>{const tn=ce(Ke);for(let In=0,bo=tn.length;In<bo;In++){const Ks=tn[In],Lr=Ke[Ks];ht(Lr,Ks)}},De=typeof window!="undefined"?window:Function("return this;")(),G=(Ke,ht)=>{let tn=ht!=null?ht:De;for(let In=0;In<Ke.length&&tn!==void 0&&tn!==null;++In)tn=tn[Ke[In]];return tn},qe=(Ke,ht)=>{const tn=Ke.split(".");return G(tn,ht)},Re=(Ke,ht)=>qe(Ke,ht),$e=(Ke,ht)=>{const tn=Re(Ke,ht);if(tn==null)throw new Error(Ke+" not available on this browser");return tn},le=Object.getPrototypeOf,Ee=Ke=>$e("HTMLElement",Ke),ft=Ke=>{const ht=qe("ownerDocument.defaultView",Ke);return T(Ke)&&(Ee(ht).prototype.isPrototypeOf(Ke)||/^HTML\w*Element$/.test(le(Ke).constructor.name))},ne=1,ge=3,O=Ke=>Ke.dom.nodeType,Ye=Ke=>Ke.dom.nodeValue,me=Ke=>ht=>O(ht)===Ke,lt=Ke=>qt(Ke)&&ft(Ke.dom),qt=me(ne),Be=me(ge),Ue=(Ke,ht,tn)=>{if(k(tn)||N(tn)||Y(tn))Ke.setAttribute(ht,tn+"");else throw new Error("Attribute value was not simple")},yt=(Ke,ht,tn)=>{Ue(Ke.dom,ht,tn)},Ie=(Ke,ht)=>{const tn=Ke.dom.getAttribute(ht);return tn===null?void 0:tn},wt=(Ke,ht)=>{Ke.dom.removeAttribute(ht)},ue=(Ke,ht)=>{const tn=Ie(Ke,ht);return tn===void 0||tn===""?[]:tn.split(" ")},je=(Ke,ht,tn)=>{const bo=ue(Ke,ht).concat([tn]);return yt(Ke,ht,bo.join(" ")),!0},V=(Ke,ht,tn)=>{const In=Z(ue(Ke,ht),bo=>bo!==tn);return In.length>0?yt(Ke,ht,In.join(" ")):wt(Ke,ht),!1},kn=Ke=>Ke.dom.classList!==void 0,un=Ke=>ue(Ke,"class"),oo=(Ke,ht)=>je(Ke,"class",ht),Do=(Ke,ht)=>V(Ke,"class",ht),Ss=(Ke,ht)=>{kn(Ke)?Ke.dom.classList.add(ht):oo(Ke,ht)},Qe=Ke=>{(kn(Ke)?Ke.dom.classList:un(Ke)).length===0&&wt(Ke,"class")},Bt=(Ke,ht)=>{kn(Ke)?Ke.dom.classList.remove(ht):Do(Ke,ht),Qe(Ke)},nt=(Ke,ht)=>{const In=(ht||document).createElement("div");if(In.innerHTML=Ke,!In.hasChildNodes()||In.childNodes.length>1){const bo="HTML does not have a single root node";throw new Error(bo)}return Fe(In.childNodes[0])},de=(Ke,ht)=>{const In=(ht||document).createElement(Ke);return Fe(In)},xe=(Ke,ht)=>{const In=(ht||document).createTextNode(Ke);return Fe(In)},Fe=Ke=>{if(Ke==null)throw new Error("Node cannot be null or undefined");return{dom:Ke}},kt={fromHtml:nt,fromTag:de,fromText:xe,fromDom:Fe,fromPoint:(Ke,ht,tn)=>J.from(Ke.dom.elementFromPoint(ht,tn)).map(Fe)},ve={" ":"nbsp","­":"shy"},We=(Ke,ht)=>{let tn="";return _e(Ke,(In,bo)=>{tn+=bo}),new RegExp("["+tn+"]",ht?"g":"")},st=Ke=>{let ht="";return _e(Ke,tn=>{ht&&(ht+=","),ht+="span.mce-"+tn}),ht},en=We(ve),jn=We(ve,!0),On=st(ve),ao="mce-nbsp",Yn=Ke=>Ke.dom.contentEditable,ls=Ke=>'<span data-mce-bogus="1" class="mce-'+ve[Ke]+'">'+Ke+"</span>",Xe=Ke=>Ke.nodeName.toLowerCase()==="span"&&Ke.classList.contains("mce-nbsp-wrap"),pt=Ke=>{const ht=Ye(Ke);return Be(Ke)&&k(ht)&&en.test(ht)},Pt=Ke=>lt(Ke)&&Yn(Ke)==="false",jt=(Ke,ht)=>{if(lt(Ke)&&!Xe(Ke.dom)){const tn=Yn(Ke);if(tn==="true")return!0;if(tn==="false")return!1}return ht},vn=(Ke,ht,tn)=>{let In=[];const bo=Ke.dom,Ks=q(bo.childNodes,kt.fromDom),Lr=mr=>Xe(mr.dom)||!Pt(mr);return ae(Ks,mr=>{tn&&Lr(mr)&&ht(mr)&&(In=In.concat([mr])),In=In.concat(vn(mr,ht,jt(mr,tn)))}),In},so=(Ke,ht)=>{for(;Ke.parentNode;){if(Ke.parentNode===ht)return ht;Ke=Ke.parentNode}},lo=Ke=>Ke.replace(jn,ls),Qo=(Ke,ht)=>{const tn=Ke.dom,In=vn(kt.fromDom(ht),pt,Ke.dom.isEditable(ht));ae(In,bo=>{var Ks;const Lr=bo.dom.parentNode;if(Xe(Lr))Ss(kt.fromDom(Lr),ao);else{const mr=lo(tn.encode((Ks=Ye(bo))!==null&&Ks!==void 0?Ks:"")),_r=tn.create("div",{},mr);let ke;for(;ke=_r.lastChild;)tn.insertAfter(ke,bo.dom);Ke.dom.remove(bo.dom)}})},Bo=(Ke,ht)=>{const tn=Ke.dom.select(On,ht);ae(tn,In=>{Xe(In)?Bt(kt.fromDom(In),ao):Ke.dom.remove(In,!0)})},cs=Ke=>{const ht=Ke.getBody(),tn=Ke.selection.getBookmark();let In=so(Ke.selection.getNode(),ht);In=In!==void 0?In:ht,Bo(Ke,In),Qo(Ke,In),Ke.selection.moveToBookmark(tn)},$t=(Ke,ht)=>{l(Ke,ht.get());const tn=Ke.getBody();ht.get()===!0?Qo(Ke,tn):Bo(Ke,tn)},So=(Ke,ht)=>{ht.set(!ht.get());const tn=Ke.selection.getBookmark();$t(Ke,ht),Ke.selection.moveToBookmark(tn)},Js=(Ke,ht)=>{Ke.addCommand("mceVisualChars",()=>{So(Ke,ht)})},wr=Ke=>ht=>ht.options.get(Ke),Zr=Ke=>{const ht=Ke.options.register;ht("visualchars_default_state",{processor:"boolean",default:!1})},hr=wr("visualchars_default_state"),di=(Ke,ht)=>{Ke.on("init",()=>{$t(Ke,ht)})},xr=(Ke,ht)=>{let tn=null;return{cancel:()=>{M(tn)||(clearTimeout(tn),tn=null)},throttle:(...Ks)=>{M(tn)&&(tn=setTimeout(()=>{tn=null,Ke.apply(null,Ks)},ht))}}},fi=(Ke,ht)=>{const tn=xr(()=>{cs(Ke)},300);Ke.on("keydown",In=>{ht.get()===!0&&(In.keyCode===13?cs(Ke):tn.throttle())}),Ke.on("remove",tn.cancel)},us=(Ke,ht)=>tn=>{tn.setActive(ht.get());const In=bo=>tn.setActive(bo.state);return Ke.on("VisualChars",In),()=>Ke.off("VisualChars",In)},Bn=(Ke,ht)=>{const tn=()=>Ke.execCommand("mceVisualChars");Ke.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:tn,onSetup:us(Ke,ht)}),Ke.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:tn,onSetup:us(Ke,ht)})};var hi=()=>{o.add("visualchars",Ke=>{Zr(Ke);const ht=u(hr(Ke));return Js(Ke,ht),Bn(Ke,ht),fi(Ke,ht),di(Ke,ht),i(ht)})};hi()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const i=(Qe=>Bt=>Qe===Bt)(null),l=Qe=>Qe,d=(Qe,Bt)=>{const nt=Qe.length,de=new Array(nt);for(let xe=0;xe<nt;xe++){const Fe=Qe[xe];de[xe]=Bt(Fe,xe)}return de},p={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[~№|!-*+-\\/:;?@\\[-`{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},v={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},x=[new RegExp(p.aletter),new RegExp(p.midnumlet),new RegExp(p.midletter),new RegExp(p.midnum),new RegExp(p.numeric),new RegExp(p.cr),new RegExp(p.lf),new RegExp(p.newline),new RegExp(p.extend),new RegExp(p.format),new RegExp(p.katakana),new RegExp(p.extendnumlet),new RegExp("@")],k="",T=new RegExp("^"+p.punctuation+"$"),M=/^\s+$/,N=x,I=v.OTHER,z=Qe=>{let Bt=I;const nt=N.length;for(let de=0;de<nt;++de){const xe=N[de];if(xe&&xe.test(Qe)){Bt=de;break}}return Bt},Y=Qe=>{const Bt={};return nt=>{if(Bt[nt])return Bt[nt];{const de=Qe(nt);return Bt[nt]=de,de}}},J=Qe=>{const Bt=Y(z);return d(Qe,Bt)},q=(Qe,Bt)=>{const nt=Qe[Bt],de=Qe[Bt+1];if(Bt<0||Bt>Qe.length-1&&Bt!==0||nt===v.ALETTER&&de===v.ALETTER)return!1;const xe=Qe[Bt+2];if(nt===v.ALETTER&&(de===v.MIDLETTER||de===v.MIDNUMLET||de===v.AT)&&xe===v.ALETTER)return!1;const Fe=Qe[Bt-1];return(nt===v.MIDLETTER||nt===v.MIDNUMLET||de===v.AT)&&de===v.ALETTER&&Fe===v.ALETTER||(nt===v.NUMERIC||nt===v.ALETTER)&&(de===v.NUMERIC||de===v.ALETTER)||(nt===v.MIDNUM||nt===v.MIDNUMLET)&&de===v.NUMERIC&&Fe===v.NUMERIC||nt===v.NUMERIC&&(de===v.MIDNUM||de===v.MIDNUMLET)&&xe===v.NUMERIC||(nt===v.EXTEND||nt===v.FORMAT)&&(de===v.ALETTER||de===v.NUMERIC||de===v.KATAKANA||de===v.EXTEND||de===v.FORMAT)||(de===v.EXTEND||de===v.FORMAT&&(xe===v.ALETTER||xe===v.NUMERIC||xe===v.KATAKANA||xe===v.EXTEND||xe===v.FORMAT))&&(nt===v.ALETTER||nt===v.NUMERIC||nt===v.KATAKANA||nt===v.EXTEND||nt===v.FORMAT)||nt===v.CR&&de===v.LF?!1:nt===v.NEWLINE||nt===v.CR||nt===v.LF||de===v.NEWLINE||de===v.CR||de===v.LF?!0:!(nt===v.KATAKANA&&de===v.KATAKANA||de===v.EXTENDNUMLET&&(nt===v.ALETTER||nt===v.NUMERIC||nt===v.KATAKANA||nt===v.EXTENDNUMLET)||nt===v.EXTENDNUMLET&&(de===v.ALETTER||de===v.NUMERIC||de===v.KATAKANA)||nt===v.AT)},ae=k,Z=M,ce=T,_e=Qe=>Qe==="http"||Qe==="https",De=(Qe,Bt)=>{let nt;for(nt=Bt;nt<Qe.length&&!Z.test(Qe[nt]);nt++);return nt},G=(Qe,Bt)=>{const nt=De(Qe,Bt+1);return Qe.slice(Bt+1,nt).join(ae).substr(0,3)==="://"?nt:Bt},qe=(Qe,Bt,nt,de)=>{const xe=[],Fe=[];let Ne=[];for(let kt=0;kt<nt.length;++kt)if(Ne.push(Qe[kt]),q(nt,kt)){const ve=Bt[kt];if((de.includeWhitespace||!Z.test(ve))&&(de.includePunctuation||!ce.test(ve))){const We=kt-Ne.length+1,st=kt+1,en=Bt.slice(We,st).join(ae);if(_e(en)){const jn=G(Bt,kt),On=Qe.slice(st,jn);Array.prototype.push.apply(Ne,On),kt=jn}xe.push(Ne),Fe.push({start:We,end:st})}Ne=[]}return{words:xe,indices:Fe}},Re=()=>({includeWhitespace:!1,includePunctuation:!1}),$e=(Qe,Bt,nt)=>{nt=ie(ie({},Re()),nt);const de=d(Qe,Bt),xe=J(de);return qe(Qe,de,xe,nt)},Ee=(Qe,Bt,nt)=>$e(Qe,Bt,nt).words,ft=Qe=>Qe.replace(/\uFEFF/g,"");var ne=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const ge=(Qe,Bt)=>{const nt=Bt.getBlockElements(),de=Bt.getVoidElements(),xe=We=>nt[We.nodeName]||de[We.nodeName],Fe=[];let Ne="";const kt=new ne(Qe,Qe);let ve;for(;ve=kt.next();)ve.nodeType===3?Ne+=ft(ve.data):xe(ve)&&Ne.length&&(Fe.push(Ne),Ne="");return Ne.length&&Fe.push(Ne),Fe},O=Qe=>Qe.replace(/\u200B/g,""),Ye=Qe=>Qe.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,me=(Qe,Bt)=>{const nt=O(ge(Qe,Bt).join(`
`));return Ee(nt.split(""),l).length},lt=(Qe,Bt)=>{const nt=ge(Qe,Bt).join("");return Ye(nt)},qt=(Qe,Bt)=>{const nt=ge(Qe,Bt).join("").replace(/\s/g,"");return Ye(nt)},Be=(Qe,Bt)=>()=>Bt(Qe.getBody(),Qe.schema),Ue=(Qe,Bt)=>()=>Bt(Qe.selection.getRng().cloneContents(),Qe.schema),yt=Qe=>Be(Qe,me),Ie=Qe=>({body:{getWordCount:yt(Qe),getCharacterCount:Be(Qe,lt),getCharacterCountWithoutSpaces:Be(Qe,qt)},selection:{getWordCount:Ue(Qe,me),getCharacterCount:Ue(Qe,lt),getCharacterCountWithoutSpaces:Ue(Qe,qt)},getCount:yt(Qe)}),wt=(Qe,Bt)=>{Qe.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(Bt.body.getWordCount()),String(Bt.selection.getWordCount())],["Characters (no spaces)",String(Bt.body.getCharacterCountWithoutSpaces()),String(Bt.selection.getCharacterCountWithoutSpaces())],["Characters",String(Bt.body.getCharacterCount()),String(Bt.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},ue=(Qe,Bt)=>{Qe.addCommand("mceWordCount",()=>wt(Qe,Bt))},je=(Qe,Bt)=>{let nt=null;return{cancel:()=>{i(nt)||(clearTimeout(nt),nt=null)},throttle:(...Fe)=>{i(nt)&&(nt=setTimeout(()=>{nt=null,Qe.apply(null,Fe)},Bt))}}};var V=tinymce.util.Tools.resolve("tinymce.util.Delay");const kn=(Qe,Bt)=>{Qe.dispatch("wordCountUpdate",{wordCount:{words:Bt.body.getWordCount(),characters:Bt.body.getCharacterCount(),charactersWithoutSpaces:Bt.body.getCharacterCountWithoutSpaces()}})},un=(Qe,Bt)=>{kn(Qe,Bt)},oo=(Qe,Bt,nt)=>{const de=je(()=>un(Qe,Bt),nt);Qe.on("init",()=>{un(Qe,Bt),V.setEditorTimeout(Qe,()=>{Qe.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",de.throttle)},0),Qe.on("remove",de.cancel)})},Do=Qe=>{const Bt=()=>Qe.execCommand("mceWordCount");Qe.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:Bt}),Qe.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:Bt})};var Ss=(Qe=300)=>{u.add("wordcount",Bt=>{const nt=Ie(Bt);return ue(Bt,nt),Do(Bt),oo(Bt,nt,Qe),nt})};Ss()})();(function(){var u=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=Object.getPrototypeOf,i=(U,se,be)=>{var ct;return be(U,se.prototype)?!0:((ct=U.constructor)===null||ct===void 0?void 0:ct.name)===se.name},l=U=>{const se=typeof U;return U===null?"null":se==="object"&&Array.isArray(U)?"array":se==="object"&&i(U,String,(be,ct)=>ct.isPrototypeOf(be))?"string":se},d=U=>se=>l(se)===U,m=U=>se=>typeof se===U,p=U=>se=>U===se,v=(U,se)=>k(U)&&i(U,se,(be,ct)=>o(be)===ct),x=d("string"),k=d("object"),T=U=>v(U,Object),M=d("array"),N=p(null),I=m("boolean"),z=U=>U==null,Y=U=>!z(U),J=m("function"),q=m("number"),ae=(U,se)=>{if(M(U)){for(let be=0,ct=U.length;be<ct;++be)if(!se(U[be]))return!1;return!0}return!1},Z=()=>{};class ce{constructor(se,be){this.tag=se,this.value=be}static some(se){return new ce(!0,se)}static none(){return ce.singletonNone}fold(se,be){return this.tag?be(this.value):se()}isSome(){return this.tag}isNone(){return!this.tag}map(se){return this.tag?ce.some(se(this.value)):ce.none()}bind(se){return this.tag?se(this.value):ce.none()}exists(se){return this.tag&&se(this.value)}forall(se){return!this.tag||se(this.value)}filter(se){return!this.tag||se(this.value)?this:ce.none()}getOr(se){return this.tag?this.value:se}or(se){return this.tag?this:se}getOrThunk(se){return this.tag?this.value:se()}orThunk(se){return this.tag?this:se()}getOrDie(se){if(this.tag)return this.value;throw new Error(se!=null?se:"Called getOrDie on None")}static from(se){return Y(se)?ce.some(se):ce.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(se){this.tag&&se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ce.singletonNone=new ce(!1);const _e=Object.keys,De=Object.hasOwnProperty,G=(U,se)=>{const be=_e(U);for(let ct=0,dn=be.length;ct<dn;ct++){const Vo=be[ct],Cn=U[Vo];se(Cn,Vo)}},qe=U=>(se,be)=>{U[be]=se},Re=(U,se,be,ct)=>{G(U,(dn,Vo)=>{(se(dn,Vo)?be:ct)(dn,Vo)})},$e=(U,se)=>{const be={};return Re(U,se,qe(be),Z),be},le=(U,se)=>De.call(U,se),Ee=(U,se)=>le(U,se)&&U[se]!==void 0&&U[se]!==null,ft=Array.prototype.push,ne=U=>{const se=[];for(let be=0,ct=U.length;be<ct;++be){if(!M(U[be]))throw new Error("Arr.flatten item "+be+" was not an array, input: "+U);ft.apply(se,U[be])}return se},ge=(U,se)=>se>=0&&se<U.length?ce.some(U[se]):ce.none(),O=U=>ge(U,0),Ye=(U,se)=>{for(let be=0;be<U.length;be++){const ct=se(U[be],be);if(ct.isSome())return ct}return ce.none()};typeof window!="undefined"||Function("return this;")();const me=(U,se,be)=>{if(x(be)||I(be)||q(be))U.setAttribute(se,be+"");else throw new Error("Attribute value was not simple")},lt=(U,se,be)=>{me(U.dom,se,be)},qt=(U,se)=>{U.dom.removeAttribute(se)},Be=(U,se)=>{const ct=(se||document).createElement("div");if(ct.innerHTML=U,!ct.hasChildNodes()||ct.childNodes.length>1){const dn="HTML does not have a single root node";throw new Error(dn)}return Ie(ct.childNodes[0])},Ue=(U,se)=>{const ct=(se||document).createElement(U);return Ie(ct)},yt=(U,se)=>{const ct=(se||document).createTextNode(U);return Ie(ct)},Ie=U=>{if(U==null)throw new Error("Node cannot be null or undefined");return{dom:U}},ue={fromHtml:Be,fromTag:Ue,fromText:yt,fromDom:Ie,fromPoint:(U,se,be)=>ce.from(U.dom.elementFromPoint(se,be)).map(Ie)};var je=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),V=tinymce.util.Tools.resolve("tinymce.util.URI");const kn=U=>U.length>0,un=U=>se=>se.options.get(U),oo=U=>{const se=U.options.register;se("image_dimensions",{processor:"boolean",default:!0}),se("image_advtab",{processor:"boolean",default:!1}),se("image_uploadtab",{processor:"boolean",default:!0}),se("image_prepend_url",{processor:"string",default:""}),se("image_class_list",{processor:"object[]"}),se("image_description",{processor:"boolean",default:!0}),se("image_title",{processor:"boolean",default:!1}),se("image_caption",{processor:"boolean",default:!1}),se("image_list",{processor:be=>{const ct=be===!1||x(be)||ae(be,k)||J(be);return ct?{value:be,valid:ct}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},Do=un("image_dimensions"),Ss=un("image_advtab"),Qe=un("image_uploadtab"),Bt=un("image_prepend_url"),nt=un("image_class_list"),de=un("image_description"),xe=un("image_title"),Fe=un("image_caption"),Ne=un("image_list"),kt=un("a11y_advanced_options"),ve=un("automatic_uploads"),We=U=>kn(U.options.get("images_upload_url")),st=U=>Y(U.options.get("images_upload_handler")),en=(U,se)=>Math.max(parseInt(U,10),parseInt(se,10)),jn=U=>new Promise(se=>{const be=document.createElement("img"),ct=Vo=>{be.onload=be.onerror=null,be.parentNode&&be.parentNode.removeChild(be),se(Vo)};be.onload=()=>{const Vo=en(be.width,be.clientWidth),Cn=en(be.height,be.clientHeight),oi={width:Vo,height:Cn};ct(Promise.resolve(oi))},be.onerror=()=>{ct(Promise.reject(`Failed to get image dimensions for: ${U}`))};const dn=be.style;dn.visibility="hidden",dn.position="fixed",dn.bottom=dn.left="0px",dn.width=dn.height="auto",document.body.appendChild(be),be.src=U}),On=U=>(U&&(U=U.replace(/px$/,"")),U),ao=U=>(U.length>0&&/^[0-9]+$/.test(U)&&(U+="px"),U),Yn=U=>{if(U.margin){const se=String(U.margin).split(" ");switch(se.length){case 1:U["margin-top"]=U["margin-top"]||se[0],U["margin-right"]=U["margin-right"]||se[0],U["margin-bottom"]=U["margin-bottom"]||se[0],U["margin-left"]=U["margin-left"]||se[0];break;case 2:U["margin-top"]=U["margin-top"]||se[0],U["margin-right"]=U["margin-right"]||se[1],U["margin-bottom"]=U["margin-bottom"]||se[0],U["margin-left"]=U["margin-left"]||se[1];break;case 3:U["margin-top"]=U["margin-top"]||se[0],U["margin-right"]=U["margin-right"]||se[1],U["margin-bottom"]=U["margin-bottom"]||se[2],U["margin-left"]=U["margin-left"]||se[1];break;case 4:U["margin-top"]=U["margin-top"]||se[0],U["margin-right"]=U["margin-right"]||se[1],U["margin-bottom"]=U["margin-bottom"]||se[2],U["margin-left"]=U["margin-left"]||se[3]}delete U.margin}return U},ls=(U,se)=>{const be=Ne(U);x(be)?fetch(be).then(ct=>{ct.ok&&ct.json().then(se)}):J(be)?be(se):se(be)},Xe=(U,se,be)=>{const ct=()=>{be.onload=be.onerror=null,U.selection&&(U.selection.select(be),U.nodeChanged())};be.onload=()=>{!se.width&&!se.height&&Do(U)&&U.dom.setAttribs(be,{width:String(be.clientWidth),height:String(be.clientHeight)}),ct()},be.onerror=ct},pt=U=>new Promise((se,be)=>{const ct=new FileReader;ct.onload=()=>{se(ct.result)},ct.onerror=()=>{var dn;be((dn=ct.error)===null||dn===void 0?void 0:dn.message)},ct.readAsDataURL(U)}),Pt=U=>U.nodeName==="IMG"&&(U.hasAttribute("data-mce-object")||U.hasAttribute("data-mce-placeholder")),jt=(U,se)=>{const be=U.options.get;return V.isDomSafe(se,"img",{allow_html_data_urls:be("allow_html_data_urls"),allow_script_urls:be("allow_script_urls"),allow_svg_data_urls:be("allow_svg_data_urls")})},vn=je.DOM,so=U=>U.style.marginLeft&&U.style.marginRight&&U.style.marginLeft===U.style.marginRight?On(U.style.marginLeft):"",lo=U=>U.style.marginTop&&U.style.marginBottom&&U.style.marginTop===U.style.marginBottom?On(U.style.marginTop):"",Qo=U=>U.style.borderWidth?On(U.style.borderWidth):"",Bo=(U,se)=>{var be;return U.hasAttribute(se)&&(be=U.getAttribute(se))!==null&&be!==void 0?be:""},cs=U=>U.parentNode!==null&&U.parentNode.nodeName==="FIGURE",$t=(U,se,be)=>{be===""||be===null?U.removeAttribute(se):U.setAttribute(se,be)},So=U=>{const se=vn.create("figure",{class:"image"});vn.insertAfter(se,U),se.appendChild(U),se.appendChild(vn.create("figcaption",{contentEditable:"true"},"Caption")),se.contentEditable="false"},Js=U=>{const se=U.parentNode;Y(se)&&(vn.insertAfter(U,se),vn.remove(se))},wr=U=>{cs(U)?Js(U):So(U)},Zr=(U,se)=>{const be=U.getAttribute("style"),ct=se(be!==null?be:"");ct.length>0?(U.setAttribute("style",ct),U.setAttribute("data-mce-style",ct)):U.removeAttribute("style")},hr=(U,se)=>(be,ct,dn)=>{const Vo=be.style;Vo[ct]?(Vo[ct]=ao(dn),Zr(be,se)):$t(be,ct,dn)},di=(U,se)=>U.style[se]?On(U.style[se]):Bo(U,se),xr=(U,se)=>{const be=ao(se);U.style.marginLeft=be,U.style.marginRight=be},fi=(U,se)=>{const be=ao(se);U.style.marginTop=be,U.style.marginBottom=be},us=(U,se)=>{const be=ao(se);U.style.borderWidth=be},Bn=(U,se)=>{U.style.borderStyle=se},hi=U=>{var se;return(se=U.style.borderStyle)!==null&&se!==void 0?se:""},Ke=U=>Y(U)&&U.nodeName==="FIGURE",ht=U=>U.nodeName==="IMG",tn=U=>vn.getAttrib(U,"alt").length===0&&vn.getAttrib(U,"role")==="presentation",In=U=>tn(U)?"":Bo(U,"alt"),bo=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Ks=(U,se)=>{var be;const ct=document.createElement("img");return $t(ct,"style",se.style),(so(ct)||se.hspace!=="")&&xr(ct,se.hspace),(lo(ct)||se.vspace!=="")&&fi(ct,se.vspace),(Qo(ct)||se.border!=="")&&us(ct,se.border),(hi(ct)||se.borderStyle!=="")&&Bn(ct,se.borderStyle),U((be=ct.getAttribute("style"))!==null&&be!==void 0?be:"")},Lr=(U,se)=>{const be=document.createElement("img");if(xt(U,Ot(ie({},se),{caption:!1}),be),ke(be,se.alt,se.isDecorative),se.caption){const ct=vn.create("figure",{class:"image"});return ct.appendChild(be),ct.appendChild(vn.create("figcaption",{contentEditable:"true"},"Caption")),ct.contentEditable="false",ct}else return be},mr=(U,se)=>({src:Bo(se,"src"),alt:In(se),title:Bo(se,"title"),width:di(se,"width"),height:di(se,"height"),class:Bo(se,"class"),style:U(Bo(se,"style")),caption:cs(se),hspace:so(se),vspace:lo(se),border:Qo(se),borderStyle:hi(se),isDecorative:tn(se)}),_r=(U,se,be,ct,dn)=>{be[ct]!==se[ct]&&dn(U,ct,String(be[ct]))},ke=(U,se,be)=>{if(be){vn.setAttrib(U,"role","presentation");const ct=ue.fromDom(U);lt(ct,"alt","")}else{if(N(se)){const ct=ue.fromDom(U);qt(ct,"alt")}else{const ct=ue.fromDom(U);lt(ct,"alt",se)}vn.getAttrib(U,"role")==="presentation"&&vn.setAttrib(U,"role","")}},Ae=(U,se,be)=>{(be.alt!==se.alt||be.isDecorative!==se.isDecorative)&&ke(U,be.alt,be.isDecorative)},ut=(U,se)=>(be,ct,dn)=>{U(be,dn),Zr(be,se)},xt=(U,se,be)=>{const ct=mr(U,be);_r(be,ct,se,"caption",(dn,Vo,Cn)=>wr(dn)),_r(be,ct,se,"src",$t),_r(be,ct,se,"title",$t),_r(be,ct,se,"width",hr("width",U)),_r(be,ct,se,"height",hr("height",U)),_r(be,ct,se,"class",$t),_r(be,ct,se,"style",ut((dn,Vo)=>$t(dn,"style",Vo),U)),_r(be,ct,se,"hspace",ut(xr,U)),_r(be,ct,se,"vspace",ut(fi,U)),_r(be,ct,se,"border",ut(us,U)),_r(be,ct,se,"borderStyle",ut(Bn,U)),Ae(be,ct,se)},En=(U,se)=>{const be=U.dom.styles.parse(se),ct=Yn(be),dn=U.dom.styles.parse(U.dom.styles.serialize(ct));return U.dom.styles.serialize(dn)},Rn=U=>{const se=U.selection.getNode(),be=U.dom.getParent(se,"figure.image");return be?U.dom.select("img",be)[0]:se&&(se.nodeName!=="IMG"||Pt(se))?null:se},Mo=(U,se)=>{var be;const ct=U.dom,dn=$e(U.schema.getTextBlockElements(),(Cn,oi)=>!U.schema.isValidChild(oi,"figure")),Vo=ct.getParent(se.parentNode,Cn=>Ee(dn,Cn.nodeName),U.getBody());return Vo&&(be=ct.split(Vo,se))!==null&&be!==void 0?be:se},Vs=U=>{const se=Rn(U);return se?mr(be=>En(U,be),se):bo()},Tt=(U,se)=>{const be=Lr(dn=>En(U,dn),se);U.dom.setAttrib(be,"data-mce-id","__mcenew"),U.focus(),U.selection.setContent(be.outerHTML);const ct=U.dom.select('*[data-mce-id="__mcenew"]')[0];if(U.dom.setAttrib(ct,"data-mce-id",null),Ke(ct)){const dn=Mo(U,ct);U.selection.select(dn)}else U.selection.select(ct)},Fo=(U,se)=>{U.dom.setAttrib(se,"src",se.getAttribute("src"))},Ce=(U,se)=>{if(se){const be=U.dom.is(se.parentNode,"figure.image")?se.parentNode:se;U.dom.remove(be),U.focus(),U.nodeChanged(),U.dom.isEmpty(U.getBody())&&(U.setContent(""),U.selection.setCursorLocation())}},Te=(U,se)=>{const be=Rn(U);if(be)if(xt(ct=>En(U,ct),se,be),Fo(U,be),Ke(be.parentNode)){const ct=be.parentNode;Mo(U,ct),U.selection.select(be.parentNode)}else U.selection.select(be),Xe(U,se,be)},_t=(U,se)=>{const be=se.src;return Ot(ie({},se),{src:jt(U,be)?be:""})},nn=(U,se)=>{const be=Rn(U);if(be){const ct=mr(Cn=>En(U,Cn),be),dn=ie(ie({},ct),se),Vo=_t(U,dn);dn.src?Te(U,Vo):Ce(U,be)}else se.src&&Tt(U,ie(ie({},bo()),se))},Pn=(U=>(...se)=>{if(se.length===0)throw new Error("Can't merge zero objects");const be={};for(let ct=0;ct<se.length;ct++){const dn=se[ct];for(const Vo in dn)le(dn,Vo)&&(be[Vo]=U(be[Vo],dn[Vo]))}return be})((U,se)=>T(U)&&T(se)?Pn(U,se):se);var An=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),$n=tinymce.util.Tools.resolve("tinymce.util.Tools");const Vn=U=>x(U.value)?U.value:"",Xo=U=>x(U.text)?U.text:x(U.title)?U.title:"",Os=(U,se)=>{const be=[];return $n.each(U,ct=>{const dn=Xo(ct);if(ct.menu!==void 0){const Vo=Os(ct.menu,se);be.push({text:dn,items:Vo})}else{const Vo=se(ct);be.push({text:dn,value:Vo})}}),be},Bi=(U=Vn)=>se=>se?ce.from(se).map(be=>Os(be,U)):ce.none(),Oa=U=>Bi(Vn)(U),ql=U=>le(U,"items"),Po=(U,se)=>Ye(U,be=>ql(be)?Po(be.items,se):be.value===se?ce.some(be):ce.none()),ds={sanitizer:Bi,sanitize:Oa,findEntry:(U,se)=>U.bind(be=>Po(be,se))},Fi={makeTab:U=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Dr=U=>{const se=ds.sanitizer(Ga=>U.convertURL(Ga.value||Ga.url||"","src")),be=new Promise(Ga=>{ls(U,Ru=>{Ga(se(Ru).map(rr=>ne([[{text:"None",value:""}],rr])))})}),ct=ds.sanitize(nt(U)),dn=Ss(U),Vo=Qe(U),Cn=We(U),oi=st(U),Lt=Vs(U),Qs=de(U),pa=xe(U),zs=Do(U),qr=Fe(U),Sd=kt(U),es=ve(U),ll=ce.some(Bt(U)).filter(Ga=>x(Ga)&&Ga.length>0);return be.then(Ga=>({image:Lt,imageList:Ga,classList:ct,hasAdvTab:dn,hasUploadTab:Vo,hasUploadUrl:Cn,hasUploadHandler:oi,hasDescription:Qs,hasImageTitle:pa,hasDimensions:zs,hasImageCaption:qr,prependURL:ll,hasAccessibilityOptions:Sd,automaticUploads:es}))},il=U=>{const se={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},be=U.imageList.map(pa=>({name:"images",type:"listbox",label:"Image list",items:pa})),ct={name:"alt",type:"input",label:"Alternative description",enabled:!(U.hasAccessibilityOptions&&U.image.isDecorative)},dn={name:"title",type:"input",label:"Image title"},Vo={name:"dimensions",type:"sizeinput"},Cn={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},oi=U.classList.map(pa=>({name:"classes",type:"listbox",label:"Class",items:pa})),Lt={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Qs=pa=>pa?{type:"grid",columns:2}:{type:"panel"};return ne([[se],be.toArray(),U.hasAccessibilityOptions&&U.hasDescription?[Cn]:[],U.hasDescription?[ct]:[],U.hasImageTitle?[dn]:[],U.hasDimensions?[Vo]:[],[Ot(ie({},Qs(U.classList.isSome()&&U.hasImageCaption)),{items:ne([oi.toArray(),U.hasImageCaption?[Lt]:[]])})]])},Ac={makeTab:U=>({title:"General",name:"general",items:il(U)}),makeItems:il},ha={makeTab:U=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},ji=U=>({prevImage:ds.findEntry(U.imageList,U.image.src),prevAlt:U.image.alt,open:!0}),qa=U=>({src:{value:U.src,meta:{}},images:U.src,alt:U.alt,title:U.title,dimensions:{width:U.width,height:U.height},classes:U.class,caption:U.caption,style:U.style,vspace:U.vspace,border:U.border,hspace:U.hspace,borderstyle:U.borderStyle,fileinput:[],isDecorative:U.isDecorative}),na=(U,se)=>({src:U.src.value,alt:(U.alt===null||U.alt.length===0)&&se?null:U.alt,title:U.title,width:U.dimensions.width,height:U.dimensions.height,class:U.classes,style:U.style,caption:U.caption,hspace:U.hspace,vspace:U.vspace,border:U.border,borderStyle:U.borderstyle,isDecorative:U.isDecorative}),_a=(U,se)=>/^(?:[a-zA-Z]+:)?\/\//.test(se)?ce.none():U.prependURL.bind(be=>se.substring(0,be.length)!==be?ce.some(be+se):ce.none()),mi=(U,se)=>{const be=se.getData();_a(U,be.src.value).each(ct=>{se.setData({src:{value:ct,meta:be.src.meta}})})},Tc=(U,se,be)=>{U.hasDescription&&x(be.alt)&&(se.alt=be.alt),U.hasAccessibilityOptions&&(se.isDecorative=be.isDecorative||se.isDecorative||!1),U.hasImageTitle&&x(be.title)&&(se.title=be.title),U.hasDimensions&&(x(be.width)&&(se.dimensions.width=be.width),x(be.height)&&(se.dimensions.height=be.height)),x(be.class)&&ds.findEntry(U.classList,be.class).each(ct=>{se.classes=ct.value}),U.hasImageCaption&&I(be.caption)&&(se.caption=be.caption),U.hasAdvTab&&(x(be.style)&&(se.style=be.style),x(be.vspace)&&(se.vspace=be.vspace),x(be.border)&&(se.border=be.border),x(be.hspace)&&(se.hspace=be.hspace),x(be.borderstyle)&&(se.borderstyle=be.borderstyle))},ma=(U,se)=>{const be=se.getData(),ct=be.src.meta;if(ct!==void 0){const dn=Pn({},be);Tc(U,dn,ct),se.setData(dn)}},eu=(U,se,be,ct)=>{const dn=ct.getData(),Vo=dn.src.value,Cn=dn.src.meta||{};!Cn.width&&!Cn.height&&se.hasDimensions&&(kn(Vo)?U.imageSize(Vo).then(oi=>{be.open&&ct.setData({dimensions:oi})}).catch(oi=>{}):ct.setData({dimensions:{width:"",height:""}}))},ga=(U,se,be)=>{const ct=be.getData(),dn=ds.findEntry(U.imageList,ct.src.value);se.prevImage=dn,be.setData({images:dn.map(Vo=>Vo.value).getOr("")})},Gl=(U,se,be,ct)=>{mi(se,ct),ma(se,ct),eu(U,se,be,ct),ga(se,be,ct)},Ii=(U,se,be,ct)=>{const dn=ct.getData(),Vo=ds.findEntry(se.imageList,dn.images);Vo.each(Cn=>{dn.alt===""||be.prevImage.map(Lt=>Lt.text===dn.alt).getOr(!1)?Cn.value===""?ct.setData({src:Cn,alt:be.prevAlt}):ct.setData({src:Cn,alt:Cn.text}):ct.setData({src:Cn})}),be.prevImage=Vo,Gl(U,se,be,ct)},al=(U,se,be,ct)=>{const dn=ct.getData();ct.block("Uploading image"),O(dn.fileinput).fold(()=>{ct.unblock()},Vo=>{const Cn=URL.createObjectURL(Vo),oi=()=>{ct.unblock(),URL.revokeObjectURL(Cn)},Lt=Qs=>{ct.setData({src:{value:Qs,meta:{}}}),ct.showTab("general"),Gl(U,se,be,ct)};pt(Vo).then(Qs=>{const pa=U.createBlobCache(Vo,Cn,Qs);se.automaticUploads?U.uploadImage(pa).then(zs=>{Lt(zs.url),oi()}).catch(zs=>{oi(),U.alertErr(zs)}):(U.addToBlobCache(pa),Lt(pa.blobUri()),ct.unblock())})})},Oc=(U,se,be)=>(ct,dn)=>{dn.name==="src"?Gl(U,se,be,ct):dn.name==="images"?Ii(U,se,be,ct):dn.name==="alt"?be.prevAlt=ct.getData().alt:dn.name==="fileinput"?al(U,se,be,ct):dn.name==="isDecorative"&&ct.setEnabled("alt",!ct.getData().isDecorative)},tu=U=>()=>{U.open=!1},Cd=U=>U.hasAdvTab||U.hasUploadUrl||U.hasUploadHandler?{type:"tabpanel",tabs:ne([[Ac.makeTab(U)],U.hasAdvTab?[Fi.makeTab(U)]:[],U.hasUploadTab&&(U.hasUploadUrl||U.hasUploadHandler)?[ha.makeTab(U)]:[]])}:{type:"panel",items:Ac.makeItems(U)},Q=(U,se,be)=>ct=>{const dn=Pn(qa(se.image),ct.getData()),Vo=Ot(ie({},dn),{style:Ks(be.normalizeCss,na(dn,!1))});U.execCommand("mceUpdateImage",!1,na(Vo,se.hasAccessibilityOptions)),U.editorUpload.uploadImagesAuto(),ct.close()},Oe=U=>se=>jt(U,se)?jn(U.documentBaseURI.toAbsolute(se)).then(be=>({width:String(be.width),height:String(be.height)})):Promise.resolve({width:"",height:""}),Ze=U=>(se,be,ct)=>{var dn;return U.editorUpload.blobCache.create({blob:se,blobUri:be,name:(dn=se.name)===null||dn===void 0?void 0:dn.replace(/\.[^\.]+$/,""),filename:se.name,base64:ct.split(",")[1]})},St=U=>se=>{U.editorUpload.blobCache.add(se)},Ut=U=>se=>{U.windowManager.alert(se)},Zn=U=>se=>En(U,se),_s=U=>se=>U.dom.parseStyle(se),Rs=U=>(se,be)=>U.dom.serializeStyle(se,be),ys=U=>se=>An(U).upload([se],!1).then(be=>{var ct;return be.length===0?Promise.reject("Failed to upload image"):be[0].status===!1?Promise.reject((ct=be[0].error)===null||ct===void 0?void 0:ct.message):be[0]}),Ys=U=>{const se={imageSize:Oe(U),addToBlobCache:St(U),createBlobCache:Ze(U),alertErr:Ut(U),normalizeCss:Zn(U),parseStyle:_s(U),serializeStyle:Rs(U),uploadImage:ys(U)};return{open:()=>{Dr(U).then(ct=>{const dn=ji(ct);return{title:"Insert/Edit Image",size:"normal",body:Cd(ct),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:qa(ct.image),onSubmit:Q(U,ct,se),onChange:Oc(se,ct,dn),onClose:tu(dn)}}).then(U.windowManager.open)}}},Wo=U=>{U.addCommand("mceImage",Ys(U).open),U.addCommand("mceUpdateImage",(se,be)=>{U.undoManager.transact(()=>nn(U,be))})},ur=U=>{const se=U.attr("class");return Y(se)&&/\bimage\b/.test(se)},Ei=U=>se=>{let be=se.length;const ct=dn=>{dn.attr("contenteditable",U?"true":null)};for(;be--;){const dn=se[be];ur(dn)&&(dn.attr("contenteditable",U?"false":null),$n.each(dn.getAll("figcaption"),ct))}},Mu=U=>{U.on("PreInit",()=>{U.parser.addNodeFilter("figure",Ei(!0)),U.serializer.addNodeFilter("figure",Ei(!1))})},on=U=>se=>{const be=()=>{se.setEnabled(U.selection.isEditable())};return U.on("NodeChange",be),be(),()=>{U.off("NodeChange",be)}},Pu=U=>{U.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Ys(U).open,onSetup:se=>{se.setActive(Y(Rn(U)));const be=U.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",se.setActive).unbind,ct=on(U)(se);return()=>{be(),ct()}}}),U.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Ys(U).open,onSetup:on(U)}),U.ui.registry.addContextMenu("image",{update:se=>U.selection.isEditable()&&(Ke(se)||ht(se)&&!Pt(se))?["image"]:[]})};var $r=()=>{u.add("image",U=>{oo(U),Mu(U),Pu(U),Wo(U)})};$r()})();const $1e=ui({__name:"ImgUpload",props:{fullscreen:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:["uploading","done","error"],setup(u,{emit:o}){const i=u,l=o;let d=!1;const{uploadUrl:m}=ale(),p=lle(),{t:v}=Qc(),{prefixCls:x}=_2("tinymce-img-upload"),k=ms(()=>{const{disabled:N}=i;return{disabled:N}}),T={Authorization:p.getToken};function M(N){var q,ae;const I=N.file,z=I==null?void 0:I.status,Y=(ae=(q=I==null?void 0:I.response)==null?void 0:q.data)==null?void 0:ae.url,J=I==null?void 0:I.name;z==="uploading"?d||(l("uploading",J),d=!0):z==="done"?(l("done",J,Y),d=!1):z==="error"&&(l("error"),d=!1)}return(N,I)=>{const z=zl("a-button");return No(),ai("div",{class:o0([Ge(x),{fullscreen:u.fullscreen}])},[Xn(Ge(r6),{name:"file",multiple:"",onChange:M,action:Ge(m),headers:T,showUploadList:!1,accept:".jpg,.jpeg,.gif,.png,.webp"},{default:Yo(()=>[Xn(z,Ui({type:"primary",preIcon:"material-symbols:image-sharp",class:"mt-1",iconSize:14},ie({},k.value)),{default:Yo(()=>[ja(Za(Ge(v)("component.upload.imgUpload")),1)]),_:1},16)]),_:1},8,["action"])],2)}}}),H1e=D2($1e,[["__scopeId","data-v-722ad40c"]]),V1e=["advlist","anchor","autolink","autosave","autoresize","code","codesample","directionality","fullscreen","insertdatetime","link","lists","media","nonbreaking","pagebreak","preview","save","searchreplace","visualblocks","visualchars","wordcount","image"],z1e=["fontsizeselect lineheight searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link  preview anchor pagebreak insertdatetime media image forecolor backcolor fullscreen"],U1e=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],W1e=u=>U1e.indexOf(u)!==-1,j1e=(u,o,i)=>{Object.keys(o).filter(W1e).forEach(l=>{const d=o[l];typeof d=="function"&&(l==="onInit"?d(u,i):i.on(l.substring(2),m=>d(m,i)))})},Z1e=["id"],q1e=ui({inheritAttrs:!1,__name:"Editor",props:{options:{type:Object,default:()=>({})},value:{type:String},toolbar:{type:Array,default:z1e},plugins:{type:Array,default:V1e},modelValue:{type:String},height:{type:[Number,String],required:!1,default:400},width:{type:[Number,String],required:!1,default:"auto"},showImageUpload:{type:Boolean,default:!0}},emits:["change","update:modelValue","inited","init-error"],setup(u,{emit:o}){const i=u,l=o,d=cQ(),m=mo(null),p=mo(!1),v=mo(Vte("tiny-vue")),x=mo(null),{prefixCls:k}=_2("tinymce-container"),T=zoe();ms(()=>i.modelValue);const M=ms(()=>{const Re=i.width;return hQ(Re)?`${Re}px`:Re}),N=ms(()=>T.getDarkMode==="light"?"oxide":"oxide-dark"),I=ms(()=>T.getDarkMode==="light"?"default":"dark"),z=ms(()=>{const Re=cle().getLocale.value;return Re==="zh_CN"?"zh-Hans":Re}),Y=ms(()=>{const{height:Re,options:$e,toolbar:le,plugins:Ee}=i,ft="/";return Ot(ie({selector:`#${Ge(v)}`,height:Re,toolbar:le,menubar:"file edit insert view format table",plugins:Ee,language_url:ft+"resource/tinymce/langs/"+z.value+".js",language:z.value,branding:!1,default_link_target:"_blank",link_title:!1,object_resizing:!1,auto_focus:!0,skin:N.value,promotion:!1,model_url:ft+"resource/tinymce/models/dom/model.min.js",skin_url:ft+"resource/tinymce/skins/ui/"+N.value,content_css:ft+"resource/tinymce/skins/content/"+I.value+"/content.min.css"},$e),{setup:ne=>{m.value=ne,ne.on("init",ge=>Z(ge))}})}),J=ms(()=>{const{options:Re}=i,$e=Re&&Reflect.get(Re,"readonly"),le=Ge(m);return le&&le.mode.set($e?"readonly":"design"),$e!=null?$e:!1});sr(()=>d.disabled,()=>{const Re=Ge(m);Re&&Re.mode.set(d.disabled?"readonly":"design")}),Xle(()=>{Y.value.inline||(v.value=Vte("tiny-vue")),yy(()=>{setTimeout(()=>{ae()},30)})}),Loe(()=>{q()}),Yae(()=>{q()});function q(){var Re;iy!==null&&((Re=iy==null?void 0:iy.remove)==null||Re.call(iy,Ge(Y).selector))}function ae(){const Re=Ge(x);Re&&(Re.style.visibility=""),iy.init(Ge(Y)).then($e=>{l("inited",$e)}).catch($e=>{l("init-error",$e)})}function Z(Re){const $e=Ge(m);if(!$e)return;const le=i.modelValue||"";$e.setContent(le),_e($e),j1e(Re,d,Ge(m))}function ce(Re,$e,le){Re&&typeof $e=="string"&&$e!==le&&$e!==Re.getContent({format:d.outputFormat})&&Re.setContent($e)}function _e(Re){const $e=d.modelEvents?d.modelEvents:null,le=Array.isArray($e)?$e.join(" "):$e;sr(()=>i.modelValue,(Ee,ft)=>{ce(Re,Ee,ft)}),sr(()=>i.value,(Ee,ft)=>{ce(Re,Ee,ft)},{immediate:!0}),Re.on(le||"change keyup undo redo",()=>{const Ee=Re.getContent({format:d.outputFormat});l("update:modelValue",Ee),l("change",Ee)}),Re.on("FullscreenStateChanged",Ee=>{p.value=Ee.state})}function De(Re){var Ee;const $e=Ge(m);if(!$e)return;$e.execCommand("mceInsertContent",!1,qe(Re));const le=(Ee=$e==null?void 0:$e.getContent())!=null?Ee:"";ce($e,le)}function G(Re,$e){var ne,ge;const le=Ge(m);if(!le)return;const Ee=(ne=le==null?void 0:le.getContent())!=null?ne:"",ft=(ge=Ee==null?void 0:Ee.replace(qe(Re),`<img src="${$e}"/>`))!=null?ge:"";ce(le,ft)}function qe(Re){return`[uploading:${Re}]`}return(Re,$e)=>(No(),ai("div",{class:o0(Ge(k)),style:F6({width:M.value})},[u.showImageUpload?$oe((No(),cr(H1e,{key:0,fullscreen:p.value,onUploading:De,onDone:G,disabled:J.value},null,8,["fullscreen","disabled"])),[[Hoe,m.value]]):ol("",!0),Y.value.inline?Gc(Re.$slots,"default",{key:2}):(No(),ai("textarea",{key:1,id:v.value,ref_key:"elRef",ref:x,style:{visibility:"hidden"}},null,8,Z1e))],6))}}),G1e=I6(q1e),bs=new Map;bs.set("Input",M2);bs.set("InputGroup",M2.Group);bs.set("InputPassword",M2.Password);bs.set("InputSearch",M2.Search);bs.set("InputTextArea",M2.TextArea);bs.set("InputNumber",Ple);bs.set("AutoComplete",Rle);bs.set("ImageUpload",Kce);bs.set("Select",L6);bs.set("ApiSelect",oce);bs.set("ApiTree",sce);bs.set("TreeSelect",Woe);bs.set("ApiTreeSelect",rce);bs.set("ApiRadioGroup",tce);bs.set("Switch",Nle);bs.set("RadioButtonGroup",nce);bs.set("RadioGroup",s6.Group);bs.set("Checkbox",Yoe);bs.set("CheckboxGroup",Yoe.Group);bs.set("ApiCascader",ice);bs.set("Cascader",joe);bs.set("Slider",Ble);bs.set("Rate",Fle);bs.set("Transfer",Zoe);bs.set("ApiTransfer",ace);bs.set("DatePicker",mM);bs.set("MonthPicker",mM.MonthPicker);bs.set("RangePicker",mM.RangePicker);bs.set("WeekPicker",mM.WeekPicker);bs.set("TimePicker",dQ);bs.set("TimeRangePicker",dQ.TimeRangePicker);bs.set("StrengthMeter",Yle);bs.set("IconPicker",cue);bs.set("InputCountDown",nle);bs.set("Upload",Yce);bs.set("Divider",fQ);bs.set("CropperAvatar",Kle);bs.set("BasicTitle",ese);bs.set("BasicTree",$le);bs.set("ApiMultipleSelect",uce);bs.set("DictionarySelect",dce);bs.set("CodeEditor",I1e);bs.set("Tinymce",G1e);bs.set("SimpleTimePicker",lce);bs.set("SimpleRangePicker",cce);const{t:lJ}=Qc();function Boe(u){return u.includes("Input")||u.includes("Complete")?lJ("common.inputText"):u.includes("Picker")||u.includes("Select")||u.includes("Cascader")||u.includes("Checkbox")||u.includes("Radio")||u.includes("Switch")?lJ("common.chooseText"):""}const K1e=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function Y1e(){return[...K1e,"RangePicker"]}function X1e(u,o,i){Reflect.has(u,"type")||(["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(o)?u.type=i?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(o)?u.type="array":["InputNumber"].includes(o)&&(u.type="number"))}const J1e=["Input","InputPassword","InputNumber","InputSearch","InputTextArea"],vae=Y1e(),Foe=["Upload","ApiTransfer","ApiTree","ApiSelect","ApiMultipleSelect","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup","ImageUpload","SimpleTimePicker","SimpleRangePicker"],Q1e=["Divider","BasicTitle"];function GD(u){return Q1e.includes(u||"")}function e0e(u,o){return ms(()=>{const i=Ge(u),{labelCol:l={},wrapperCol:d={}}=i.itemProps||{},{labelWidth:m,disabledLabelWidth:p}=i,{labelWidth:v,labelCol:x,wrapperCol:k,layout:T}=Ge(o);if(!v&&!m&&!x||p)return l.style={textAlign:"left"},{labelCol:l,wrapperCol:d};let M=m||v;const N=ie(ie({},x),l),I=ie(ie({},k),d);return M&&(M=hQ(M)?`${M}px`:M),{labelCol:ie({style:{width:M}},N),wrapperCol:ie({style:{width:T==="vertical"?"100%":`calc(100% - ${M})`}},I)}})}function Z$(u){return typeof u=="function"||Object.prototype.toString.call(u)==="[object Object]"&&!Xae(u)}const t0e=ui({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(u,{slots:o}){const{t:i}=Qc(),{schema:l,formProps:d}=lQ(u);l.value.component==="CropperAvatar"&&typeof d.value.size=="string"&&(d.value.size=void 0);const m=e0e(l,d),p=ms(()=>{const{allDefaultValues:Y,formModel:J,schema:q}=u,{mergeDynamicData:ae}=u.formProps;return{field:q.field,model:J,values:ie(ie(ie({},ae),Y),J),schema:q}}),v=ms(()=>{var ce;const{schema:Y,tableAction:J,formModel:q,formActionType:ae}=u;let{componentProps:Z={}}=Y;return vr(Z)&&(Z=(ce=Z({schema:Y,tableAction:J,formModel:q,formActionType:ae}))!=null?ce:{}),GD(Y.component)&&(Z=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},Z)),Z}),x=ms(()=>{const{disabled:Y}=u.formProps,{dynamicDisabled:J}=u.schema,{disabled:q=!1}=Ge(v);let ae=Y||q;return ly(J)&&(ae=J),vr(J)&&(ae=J(Ge(p))),ae}),k=ms(()=>{const{readonly:Y}=u.formProps,{dynamicReadonly:J}=u.schema,{readonly:q=!1}=Ge(v);let ae=Y||q;return ly(J)&&(ae=J),vr(J)&&(ae=J(Ge(p))),ae});function T(){const{show:Y,ifShow:J}=u.schema,{showAdvancedButton:q}=u.formProps,ae=q&&ly(u.isAdvanced)?u.isAdvanced:!0;let Z=!0,ce=!0;return ly(Y)&&(Z=Y),ly(J)&&(ce=J),vr(Y)&&(Z=Y(Ge(p))),vr(J)&&(ce=J(Ge(p))),Z=Z&&ae,{isShow:Z,isIfShow:ce}}function M(){var ne;const{rules:Y=[],component:J,rulesMessageJoinLabel:q,label:ae,dynamicRules:Z,required:ce}=u.schema;if(vr(Z))return Z(Ge(p));let _e=py(Y);const{rulesMessageJoinLabel:De}=u.formProps,qe=(Reflect.has(u.schema,"rulesMessageJoinLabel")?q:De)?vr(ae)?"":ae:"",Re=J?Boe(J)+qe:qe;function $e(ge,O){const Ye=ge.message||Re;return O===void 0||J1(O)||fh(O)&&O.length===0||typeof O=="string"&&O.trim()===""||typeof O=="object"&&Reflect.has(O,"checked")&&Reflect.has(O,"halfChecked")&&Array.isArray(O.checked)&&Array.isArray(O.halfChecked)&&O.checked.length===0&&O.halfChecked.length===0?Promise.reject(Ye):Promise.resolve()}const le=vr(ce)?ce(Ge(p)):ce;if(le)if(!_e||_e.length===0){const ge=Foe.includes(J||"Input")?"blur":"change";_e=[{required:le,validator:$e,trigger:ge}]}else _e.findIndex(O=>Reflect.has(O,"required"))===-1&&_e.push({required:le,validator:$e});const Ee=_e.findIndex(ge=>Reflect.has(ge,"required")&&!Reflect.has(ge,"validator"));if(Ee!==-1){const ge=_e[Ee],{isShow:O}=T();if(O||(ge.required=!1),J){ge.message=ge.message||Re,(J.includes("Input")||J.includes("Textarea"))&&(ge.whitespace=!0);const Ye=(ne=Ge(v))==null?void 0:ne.valueFormat;X1e(ge,J,Ye)}}const ft=_e.findIndex(ge=>ge.max);return ft!==-1&&!_e[ft].validator&&(_e[ft].message=_e[ft].message||i("component.form.maxTip",[_e[ft].max])),_e}function N(){var ge;if(!ece(u.schema))return null;const{renderComponentContent:Y,component:J,field:q,changeEvent:ae="change",valueField:Z}=u.schema,ce=J&&["Switch","Checkbox"].includes(J),_e=`on${ule(ae)}`,De={[_e]:(...O)=>{const[Ye]=O;$e[_e]&&$e[_e](...O);const me=Ye?Ye.target:null,lt=me?ce?me.checked:me.value:Ye;u.setFormModel(q,lt,u.schema)}},G=bs.get(J),{autoSetPlaceHolder:qe,size:Re}=u.formProps,$e=Ot(ie({allowClear:!0,size:Re},Ge(v)),{disabled:Ge(x),readonly:Ge(k)});!$e.disabled&&qe&&J!=="RangePicker"&&J&&($e.placeholder=((ge=Ge(v))==null?void 0:ge.placeholder)||Boe(J)),$e.codeField=q,$e.formValues=Ge(p);const Ee={[Z||(ce?"checked":"value")]:u.formModel[q]},ft=ie(ie(ie({},$e),De),Ee);if(!Y)return Xn(G,ft,null);const ne=vr(Y)?ie({},Y(Ge(p),{disabled:Ge(x),readonly:Ge(k)})):{default:()=>Y};return Xn(G,ft,Z$(ne)?ne:{default:()=>[ne]})}function I(){const{label:Y,helpMessage:J,helpComponentProps:q,subLabel:ae}=u.schema,Z=vr(Y)?Y(Ge(p)):Y,ce=ae?Xn("span",null,[Z,ja(" "),Xn("span",{class:"text-secondary"},[ae])]):Z,_e=vr(J)?J(Ge(p)):J;return!_e||Array.isArray(_e)&&_e.length===0?ce:Xn("span",null,[ce,Xn(Wle,Ui({placement:"top",class:"mx-1",text:_e},q),null)])}function z(){const{itemProps:Y,slot:J,render:q,field:ae,suffix:Z,component:ce,prefix:_e}=u.schema,{labelCol:De,wrapperCol:G}=Ge(m),{colon:qe}=u.formProps,Re={disabled:Ge(x),readonly:Ge(k)};if(ce==="Divider"){let $e;return Xn(i6,{span:24},{default:()=>[Xn(fQ,Ge(v),Z$($e=I())?$e:{default:()=>[$e]})]})}else if(ce==="BasicTitle"){let $e;return Xn(a6.Item,{labelCol:De,wrapperCol:G,name:ae,class:{"suffix-item":!!Z,"prefix-item":!!_e}},{default:()=>[Xn(ese,Ge(v),Z$($e=I())?$e:{default:()=>[$e]})]})}else{const $e=()=>J?Lte(o,J,Ge(p),Re):q?q(Ge(p),Re):N(),le=!!Z,Ee=vr(Z)?Z(Ge(p)):Z,ft=!!_e,ne=vr(_e)?_e(Ge(p)):_e;return ce&&Foe.includes(ce)&&u.schema&&(u.schema.itemProps=ie({autoLink:!1},u.schema.itemProps)),Xn(a6.Item,Ui({name:ae,colon:qe,class:{"suffix-item":le,"prefix-item":ft}},Y,{label:I(),rules:M(),labelCol:De,wrapperCol:G}),{default:()=>[Xn("div",{style:"display:flex"},[ft&&Xn("span",{class:"prefix"},[ne]),Xn("div",{style:"flex:1;"},[$e()]),le&&Xn("span",{class:"suffix"},[Ee])])]})}}return()=>{let Y;const{colProps:J={},colSlot:q,renderColContent:ae,component:Z,slot:ce}=u.schema;if(!(Z&&bs.has(Z)||ce))return null;const{baseColProps:_e={}}=u.formProps,De=ie(ie({},_e),J),{isIfShow:G,isShow:qe}=T(),Re=Ge(p),$e={disabled:Ge(x),readonly:Ge(k)};return G&&$oe(Xn(i6,De,Z$(Y=q?Lte(o,q,Re,$e):ae?ae(Re,$e):z())?Y:{default:()=>[Y]}),[[Hoe,qe]])}}}),yae=Symbol();function n0e(u){return dle(u,yae)}function o0e(){return fle(yae)}const s0e=ui({name:"BasicFormAction",components:{FormItem:a6.Item,Button:hle,BasicArrow:jle,[i6.name]:i6},props:{showActionButtonGroup:Wn.bool.def(!0),showResetButton:Wn.bool.def(!0),showSubmitButton:Wn.bool.def(!0),showAdvancedButton:Wn.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:Wn.number.def(6),isAdvanced:Wn.bool,hideAdvanceBtn:Wn.bool},emits:["toggle-advanced"],setup(u,{emit:o}){const{t:i}=Qc(),l=ms(()=>{const{showAdvancedButton:v,actionSpan:x,actionColOptions:k}=u,T=24-x,M=v?{span:T<6?24:T}:{};return ie(ie({style:{textAlign:"right"},span:v?6:4},M),k)}),d=ms(()=>Object.assign({text:i("common.resetText")},u.resetButtonOptions)),m=ms(()=>Object.assign({text:i("common.queryText")},u.submitButtonOptions));function p(){o("toggle-advanced")}return ie({t:i,actionColOpt:l,getResetBtnOptions:d,getSubmitBtnOptions:m,toggleAdvanced:p},o0e())}});function r0e(u,o,i,l,d,m){const p=zl("Button"),v=zl("BasicArrow"),x=zl("FormItem"),k=zl("a-col");return u.showActionButtonGroup?(No(),cr(k,a0(Ui({key:0},u.actionColOpt)),{default:Yo(()=>[pf("div",{style:F6([{width:"100%"},{textAlign:u.actionColOpt.style.textAlign}])},[Xn(x,null,{default:Yo(()=>[Gc(u.$slots,"resetBefore"),u.showResetButton?(No(),cr(p,Ui({key:0,type:"default",class:"mr-2"},u.getResetBtnOptions,{onClick:u.resetAction}),{default:Yo(()=>[ja(Za(u.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):ol("",!0),Gc(u.$slots,"submitBefore"),u.showSubmitButton?(No(),cr(p,Ui({key:1,type:"primary",class:"mr-2"},u.getSubmitBtnOptions,{onClick:u.submitAction}),{default:Yo(()=>[ja(Za(u.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):ol("",!0),Gc(u.$slots,"advanceBefore"),u.showAdvancedButton&&!u.hideAdvanceBtn?(No(),cr(p,{key:2,type:"link",size:"small",onClick:u.toggleAdvanced},{default:Yo(()=>[ja(Za(u.isAdvanced?u.t("component.form.putAway"):u.t("component.form.unfold"))+" ",1),Xn(v,{class:"ml-1",expand:!u.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):ol("",!0),Gc(u.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):ol("",!0)}const i0e=D2(s0e,[["render",r0e]]);function a0e(u,o,i){const l=/^\[(.+)\]$/;if(l.test(u)){const d=u.match(l);if(d&&d[1]){const m=d[1].split(",");return o=Array.isArray(o)?o:[o],m.forEach((p,v)=>{i=c6(i,p.trim(),o[v])}),!0}}}function l0e(u,o,i){const l=/^\{(.+)\}$/;if(l.test(u)){const d=u.match(l);if(d&&d[1]){const m=d[1].split(",");return o=Hg(o)?o:{},m.forEach(p=>{i=c6(i,p.trim(),o[p.trim()])}),!0}}}function c0e({defaultValueRef:u,getSchema:o,formModel:i,getProps:l}){function d(x){if(!Hg(x))return{};const k={};for(const T of Object.entries(x)){let[,M]=T;const[N]=T;if(!N||fh(M)&&M.length===0||vr(M))continue;const I=Ge(l).transformDateFunc;Hg(M)&&(M=I==null?void 0:I(M)),fh(M)&&M.length===2&&yd.isDayjs(M[0])&&yd.isDayjs(M[1])&&(M=M.map(z=>I==null?void 0:I(z))),gy(M)&&(M=M.trim()),!a0e(N,M,k)&&!l0e(N,M,k)&&(k[N]=M)}return m(k)}function m(x){const k=Ge(l).fieldMapToTime;if(!k||!Array.isArray(k))return x;for(const[T,[M,N],I="YYYY-MM-DD"]of k){if(!T||!M||!N)continue;if(BX(dJ(x,[T]))){x=wy(x,[T]);continue}const[z,Y]=dJ(x,[T]).map(ae=>ae),[J,q]=Array.isArray(I)?I:[I,I];!J1(z)&&!BX(z)&&(x=c6(x,M,p(z,J))),!J1(Y)&&!BX(Y)&&(x=c6(x,N,p(Y,q))),x=wy(x,[T])}return x}function p(x,k){return k==="timestamp"?X1(x).unix():k==="timestampStartDay"?X1(x).startOf("day").unix():X1(x).format(k)}function v(){const x=Ge(o),k={};x.forEach(T=>{const{defaultValue:M,defaultValueObj:N,componentProps:I={}}=T,z=Object.keys(N||{});if(z.length&&z.forEach(Y=>{k[Y]=N[Y],i[Y]===void 0&&(i[Y]=N[Y])}),!J1(M)){k[T.field]=M,i[T.field]===void 0&&(i[T.field]=M);return}J1(I==null?void 0:I.defaultValue)||(k[T.field]=I==null?void 0:I.defaultValue,i[T.field]===void 0&&(i[T.field]=I==null?void 0:I.defaultValue))}),u.value=py(k)}return{handleFormValues:d,initDefault:v}}const ay=24;function u0e({advanceState:u,emit:o,getProps:i,getSchema:l,formModel:d,defaultValueRef:m}){const p=Qae(),{realWidthRef:v,screenEnum:x,screenRef:k}=mle(),T=ms(()=>{if(!u.isAdvanced)return 0;const J=Ge(i).emptySpan||0;if(hQ(J))return J;if(Hg(J)){const{span:q=0}=J,ae=Ge(k);return J[ae.toLowerCase()]||q||0}return 0}),M=uQ(z,30);sr([()=>Ge(l),()=>u.isAdvanced,()=>Ge(v)],()=>{const{showAdvancedButton:J}=Ge(i);J&&M()},{immediate:!0});function N(J,q=0,ae=!1){const Z=Ge(v),ce=parseInt(J.md)||parseInt(J.xs)||parseInt(J.sm)||J.span||ay,_e=parseInt(J.lg)||ce,De=parseInt(J.xl)||_e,G=parseInt(J.xxl)||De;return Z<=x.LG?q+=ce:Z<x.XL?q+=_e:Z<x.XXL?q+=De:q+=G,ae?(u.hideAdvanceBtn=!1,q<=ay*2?(u.hideAdvanceBtn=!0,u.isAdvanced=!0):q>ay*2&&q<=ay*(Ge(i).autoAdvancedLine||3)?u.hideAdvanceBtn=!1:u.isLoad||(u.isLoad=!0,u.isAdvanced=!u.isAdvanced),{isAdvanced:u.isAdvanced,itemColSum:q}):q>ay*(Ge(i).alwaysShowLines||1)?{isAdvanced:u.isAdvanced,itemColSum:q}:{isAdvanced:!0,itemColSum:q}}const I=Jae({});function z(){var Z;let J=0,q=0;const{baseColProps:ae={}}=Ge(i);for(const ce of Ge(l)){const{show:_e,colProps:De}=ce;let G=!0;if(ly(_e)&&(G=_e),vr(_e)&&(G=_e({schema:ce,model:d,field:ce.field,values:ie(ie({},Ge(m)),d)})),G&&(De||ae)){const{itemColSum:qe,isAdvanced:Re}=N(ie(ie({},ae),De),J);J=qe||0,Re&&(q=J),I[ce.field]=Re}}(Z=p==null?void 0:p.proxy)==null||Z.$forceUpdate(),u.actionSpan=q%ay+Ge(T),N(Ge(i).actionColOptions||{span:ay},J,!0),o("advanced-change")}function Y(){u.isAdvanced=!u.isAdvanced}return{handleToggleAdvanced:Y,fieldsIsAdvancedMap:I}}function d0e(u,o={}){const i=/^\[(.+)\]$/;if(i.test(u)){const l=u.match(i);if(l&&l[1]){const d=l[1].split(",");if(!d.length)return;const m=[];return d.forEach((p,v)=>{m[v]=o[p.trim()]}),m.filter(Boolean).length?m:void 0}}}function f0e({emit:u,getProps:o,formModel:i,getSchema:l,defaultValueRef:d,formElRef:m,schemaRef:p,handleFormValues:v}){function x(){return jo(this,null,function*(){const{resetFunc:le,submitOnReset:Ee}=Ge(o);le&&vr(le)&&(yield le()),Ge(m)&&(Object.keys(i).forEach(ne=>{const ge=Ge(l).find(me=>me.field===ne),O=ge==null?void 0:ge.defaultValueObj,Ye=Object.keys(O||{});Ye.length&&Ye.forEach(me=>{i[me]=O[me]}),i[ne]=h0e(ge,d,ne)}),yy(()=>G()),u("reset",KD(i)),Ee&&(yield Re()))})}const k=()=>Ge(l).map(le=>[...le.fields||[],le.field]).flat(1).filter(Boolean);function T(le){return jo(this,null,function*(){if(Object.keys(le).length===0)return;const Ee=k(),ft=[];Ee.forEach(ne=>{const ge=Ge(l).find(Ue=>Ue.field===ne),O=Kc(le,ne),Ye=gle(le).includes(ne),{componentProps:me}=ge||{};let lt=me;typeof me=="function"&&(lt=lt({formModel:Ge(i),formActionType:$e}));let qt;const Be=Ue=>Ue?lt!=null&&lt.valueFormat?Ue:X1(Ue):null;if(Z(ge==null?void 0:ge.component)&&(qt=d0e(ne,le),qt)){const Ue=qt||O;if(Array.isArray(Ue)){const yt=[];for(const Ie of Ue)yt.push(Be(Ie));Ge(i)[ne]=yt,ft.push(ne)}else Ge(i)[ne]=Be(Ue),ft.push(ne)}if(Ye){qt=Kc(O,ne);const Ue=qt||O;Ge(i)[ne]=Ue,lt!=null&&lt.onChange&&(lt==null||lt.onChange(Ue)),ft.push(ne)}}),ce(ft).catch(ne=>{})})}function M(le){if(!Array.isArray(le)||Array.isArray(le)&&le.length===0)return;const Ee=[],ft=Object.keys(Ge(i));ft&&(le.forEach(ne=>{ft.includes(ne)&&(Ee.push(ne),Ge(i)[ne]=py(Ge(dJ(d.value,ne))))}),ce(Ee).catch(ne=>{}))}function N(le){return jo(this,null,function*(){const Ee=py(Ge(l));if(!le)return;let ft=gy(le)?[le]:le;gy(le)&&(ft=[le]);for(const ne of ft)I(ne,Ee);p.value=Ee})}function I(le,Ee){if(gy(le)){const ft=Ee.findIndex(ne=>ne.field===le);ft!==-1&&(delete i[le],Ee.splice(ft,1))}}function z(le,Ee,ft=!1){return jo(this,null,function*(){const ne=py(Ge(l)),ge=Array.isArray(le)?le.map(me=>me.field):[le.field];if(ne.find(me=>ge.includes(me.field))){q$("There are schemas that have already been added");return}const O=ne.findIndex(me=>me.field===Ee),Ye=Hg(le)?[le]:le;!Ee||O===-1||ft?ft?ne.unshift(...Ye):ne.push(...Ye):O!==-1&&ne.splice(O+1,0,...Ye),p.value=ne,q(le)})}function Y(le){return jo(this,null,function*(){let Ee=[];if(Hg(le)&&Ee.push(le),fh(le)&&(Ee=[...le]),!Ee.every(ne=>GD(ne.component)||Reflect.has(ne,"field")&&ne.field)){q$("All children of the form Schema array that need to be updated must contain the `field` field");return}p.value=Ee})}function J(le){return jo(this,null,function*(){let Ee=[];if(Hg(le)&&Ee.push(le),fh(le)&&(Ee=[...le]),!Ee.every(O=>GD(O.component)||Reflect.has(O,"field")&&O.field)){q$("All children of the form Schema array that need to be updated must contain the `field` field");return}const ne=[],ge=[];Ge(l).forEach(O=>{const Ye=Ee.find(me=>O.field===me.field);if(Ye){const me=Uoe(O,Ye);ge.push(me),ne.push(me)}else ne.push(O)}),q(ge),p.value=qle(ne,O=>O.field)})}function q(le){let Ee=[];Hg(le)&&Ee.push(le),fh(le)&&(Ee=[...le]);const ft={},ne=ae();Ee.forEach(ge=>{!GD(ge.component)&&Reflect.has(ge,"field")&&ge.field&&!J1(ge.defaultValue)&&(!(ge.field in ne)||J1(ne[ge.field]))&&(ft[ge.field]=ge.defaultValue)}),T(ft)}function ae(){return Ge(m)?v(KD(Ge(i))):{}}function Z(le){return vae.includes(le)}function ce(le){return jo(this,null,function*(){var ft;const Ee=yield(ft=Ge(m))==null?void 0:ft.validateFields(le);return v(Ee)})}function _e(le){return jo(this,null,function*(){var Ee;yield(Ee=Ge(m))==null?void 0:Ee.setProps(le)})}function De(le){return jo(this,null,function*(){var ne;let Ee;le===void 0?Ee=k():Ee=le===Array.isArray(le)?le:void 0;const ft=yield(ne=Ge(m))==null?void 0:ne.validate(Ee);return v(ft)})}function G(le){return jo(this,null,function*(){var Ee;yield(Ee=Ge(m))==null?void 0:Ee.clearValidate(le)})}function qe(le,Ee){return jo(this,null,function*(){var ft;yield(ft=Ge(m))==null?void 0:ft.scrollToField(le,Ee)})}function Re(le){return jo(this,null,function*(){le&&le.preventDefault();const{submitFunc:Ee}=Ge(o);if(Ee&&vr(Ee)){yield Ee();return}if(Ge(m))try{const ne=yield De();u("submit",ne)}catch(ne){if((ne==null?void 0:ne.outOfDate)===!1&&(ne!=null&&ne.errorFields))return;throw new Error(ne)}})}const $e={getFieldsValue:ae,setFieldsValue:T,resetFields:x,updateSchema:J,resetSchema:Y,setProps:_e,removeSchemaByField:N,appendSchemaByField:z,clearValidate:G,validateFields:ce,validate:De,submit:Re,scrollToField:qe};return{handleSubmit:Re,clearValidate:G,validate:De,validateFields:ce,getFieldsValue:ae,updateSchema:J,resetSchema:Y,appendSchemaByField:z,removeSchemaByField:N,resetFields:x,setFieldsValue:T,scrollToField:qe,resetDefaultField:M}}function h0e(u,o,i){let l=py(o.value[i]);return g0e(u)?J1(l)?void 0:l:(!l&&u&&m0e(u)&&(l=[0,0]),!l&&u&&u.component==="ApiTree"&&(l=[]),l)}function m0e(u){if(u.component==="Slider"&&u.componentProps&&"range"in u.componentProps)return!0}function g0e(u){return(u==null?void 0:u.component)&&J1e.includes(u.component)}function p0e(d){return jo(this,arguments,function*({getSchema:u,getProps:o,formElRef:i,isInitedDefault:l}){hM(()=>jo(this,null,function*(){if(Ge(l)||!Ge(o).autoFocusFirstItem)return;yield yy();const m=Ge(u),p=Ge(i),v=p==null?void 0:p.$el;if(!p||!v||!m||m.length===0)return;const x=m[0];if(!x.component||!x.component.includes("Input"))return;const k=v.querySelector(".ant-row:first-child input");k&&(k==null||k.focus())}))})}const b0e={model:{type:Object,default:()=>({})},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},compact:Wn.bool,schemas:{type:Array,default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:Wn.bool.def(!0),autoSubmitOnEnter:Wn.bool.def(!1),submitOnReset:Wn.bool,submitOnChange:Wn.bool,size:Wn.oneOf(["default","small","large"]).def("default"),disabled:Wn.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:Wn.bool,transformDateFunc:{type:Function,default:u=>{var o,i;return(i=(o=u==null?void 0:u.format)==null?void 0:o.call(u,"YYYY-MM-DD HH:mm:ss"))!=null?i:u}},rulesMessageJoinLabel:Wn.bool.def(!0),autoAdvancedLine:Wn.number.def(3),alwaysShowLines:Wn.number.def(1),showActionButtonGroup:Wn.bool.def(!0),actionColOptions:Object,showResetButton:Wn.bool.def(!0),autoFocusFirstItem:Wn.bool,resetButtonOptions:Object,showSubmitButton:Wn.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:Wn.bool,labelCol:Object,layout:Wn.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:Object,colon:Wn.bool,labelAlign:Wn.string,rowProps:Object},K0e=ui({name:"BasicForm",__name:"BasicForm",props:b0e,emits:["advanced-change","reset","submit","register","field-value-change"],setup(u,{expose:o,emit:i}){const l=u,d=i,m=cQ(),p=cJ({}),v=Xoe(),x=cJ({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),k=mo({}),T=mo(!1),M=mo(),N=mo(null),I=mo(null),{prefixCls:z}=_2("basic-form"),Y=ms(()=>ie(ie({},l),Ge(M))),J=ms(()=>[z,{[`${z}--compact`]:Ge(Y).compact}]),q=ms(()=>{const{baseRowStyle:ue={},rowProps:je}=Ge(Y);return ie({style:ue},je)}),ae=ms(()=>ie(ie(ie({},m),l),Ge(Y))),Z=ms(()=>{var je;const ue=py(Ge(N)||Ge(Y).schemas);for(const V of ue){const{defaultValue:kn,component:un,componentProps:oo={},isHandleDateDefaultValue:Do=!0}=V;if(Do&&kn&&un&&vae.includes(un)){const Ss={schema:V,tableAction:(je=l.tableAction)!=null?je:{},formModel:p,formActionType:{}},Qe=oo?typeof oo=="function"?oo(Ss).valueFormat:oo.valueFormat:null;if(!Array.isArray(kn))V.defaultValue=Qe?X1(kn).format(Qe):X1(kn);else{const Bt=[];kn.forEach(nt=>{Bt.push(Qe?X1(nt).format(Qe):X1(nt))}),V.defaultValue=Bt}}}return Ge(Y).showAdvancedButton?ue.filter(V=>!GD(V.component)):ue}),{handleToggleAdvanced:ce,fieldsIsAdvancedMap:_e}=u0e({advanceState:x,emit:d,getProps:Y,getSchema:Z,formModel:p,defaultValueRef:k}),{handleFormValues:De,initDefault:G}=c0e({getProps:Y,defaultValueRef:k,getSchema:Z,formModel:p});p0e({getSchema:Z,getProps:Y,isInitedDefault:T,formElRef:I});const{handleSubmit:qe,setFieldsValue:Re,clearValidate:$e,validate:le,validateFields:Ee,getFieldsValue:ft,updateSchema:ne,resetSchema:ge,appendSchemaByField:O,removeSchemaByField:Ye,resetFields:me,scrollToField:lt,resetDefaultField:qt}=f0e({emit:d,getProps:Y,formModel:p,getSchema:Z,defaultValueRef:k,formElRef:I,schemaRef:N,handleFormValues:De});n0e({resetAction:me,submitAction:qe}),sr(()=>Ge(Y).model,()=>{const{model:ue}=Ge(Y);ue&&Re(ue)},{immediate:!0}),sr(()=>l.schemas,ue=>{ge(ue!=null?ue:[])}),sr(()=>Z.value,ue=>{yy(()=>{var je;(je=v==null?void 0:v.redoModalHeight)==null||je.call(v)}),!Ge(T)&&ue!=null&&ue.length&&(G(),T.value=!0)}),sr(()=>p,uQ(()=>{Ge(Y).submitOnChange&&qe()},300),{deep:!0});function Be(ue){return jo(this,null,function*(){M.value=Uoe(Ge(M)||{},ue)})}function Ue(ue,je,V){p[ue]=je,d("field-value-change",ue,je),V&&V.itemProps&&!V.itemProps.autoLink&&Ee([ue]).catch(kn=>{})}function yt(ue){const{autoSubmitOnEnter:je}=Ge(Y);if(je&&ue.key==="Enter"&&ue.target&&ue.target instanceof HTMLElement){const V=ue.target;V&&V.tagName&&V.tagName.toUpperCase()==="INPUT"&&qe()}}const Ie={getFieldsValue:ft,setFieldsValue:Re,resetFields:me,updateSchema:ne,resetSchema:ge,setProps:Be,removeSchemaByField:Ye,appendSchemaByField:O,clearValidate:$e,validateFields:Ee,validate:le,submit:qe,scrollToField:lt,resetDefaultField:qt},wt=ms(()=>ie(ie({},Y.value),x));return o(ie({},Ie)),Ty(()=>{G(),d("register",Ie)}),(ue,je)=>(No(),cr(Ge(a6),Ui(ae.value,{class:J.value,ref_key:"formElRef",ref:I,model:p,onKeypress:ele(yt,["enter"])}),{default:Yo(()=>[Xn(Ge(Ile),a0(vy(q.value)),{default:Yo(()=>[Gc(ue.$slots,"formHeader"),(No(!0),ai(ff,null,gf(Z.value,V=>(No(),cr(t0e,{key:V.field,isAdvanced:Ge(_e)[V.field],tableAction:ue.tableAction,formActionType:Ie,schema:V,formProps:Y.value,allDefaultValues:k.value,formModel:p,setFormModel:Ue},i0({_:2},[gf(Object.keys(ue.$slots),kn=>({name:kn,fn:Yo(un=>[Gc(ue.$slots,kn,Ui({ref_for:!0},un||{}))])}))]),1032,["isAdvanced","tableAction","schema","formProps","allDefaultValues","formModel"]))),128)),Xn(i0e,Ui(wt.value,{onToggleAdvanced:Ge(ce)}),i0({_:2},[gf(["resetBefore","submitBefore","advanceBefore","advanceAfter"],V=>({name:V,fn:Yo(kn=>[Gc(ue.$slots,V,a0(vy(kn||{})))])}))]),1040,["onToggleAdvanced"]),Gc(ue.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model"]))}});function Y0e(u){const o=mo(null),i=mo(!1);function l(){return jo(this,null,function*(){const p=Ge(o);return p||q$("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield yy(),p})}function d(p){tle(()=>{o.value=null,i.value=null}),!(Ge(i)&&ple()&&p===Ge(o))&&(o.value=p,i.value=!0,sr(()=>u,()=>{u&&p.setProps(ble(u))},{immediate:!0,deep:!0}))}return[d,{scrollToField:(p,v)=>jo(this,null,function*(){yield(yield l()).scrollToField(p,v)}),setProps:p=>jo(this,null,function*(){yield(yield l()).setProps(p)}),updateSchema:p=>jo(this,null,function*(){yield(yield l()).updateSchema(p)}),resetSchema:p=>jo(this,null,function*(){yield(yield l()).resetSchema(p)}),clearValidate:p=>jo(this,null,function*(){yield(yield l()).clearValidate(p)}),resetFields:()=>new Promise(p=>{l().then(v=>jo(this,null,function*(){yield v.resetFields(),p()}))}),removeSchemaByField:p=>jo(this,null,function*(){var v;(v=Ge(o))==null||v.removeSchemaByField(p)}),getFieldsValue:()=>{var p;return(p=Ge(o))==null?void 0:p.getFieldsValue()},setFieldsValue:p=>jo(this,null,function*(){yield(yield l()).setFieldsValue(p)}),appendSchemaByField:(p,v,x)=>jo(this,null,function*(){yield(yield l()).appendSchemaByField(p,v,x)}),submit:()=>jo(this,null,function*(){return(yield l()).submit()}),validate:p=>jo(this,null,function*(){return(yield l()).validate(p)}),validateFields:p=>jo(this,null,function*(){return(yield l()).validateFields(p)}),resetDefaultField:p=>jo(this,null,function*(){var v;(v=Ge(o))==null||v.resetDefaultField(p)})}]}export{kce as A,Yce as B,U0e as D,$0e as F,W0e as I,L0e as P,F0e as R,oce as _,rse as a,Y0e as b,K0e as c,I0e as d,rce as e,nce as f,tce as g,pce as h,Pce as i,V0e as j,z0e as k,H0e as l,B0e as m,c6 as s,Bce as u};
