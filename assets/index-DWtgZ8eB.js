var u=(f,t,a)=>new Promise((c,n)=>{var p=e=>{try{r(a.next(e))}catch(i){n(i)}},l=e=>{try{r(a.throw(e))}catch(i){n(i)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(p,l);r((a=a.apply(f,t)).next())});import{u as x,_ as R}from"./useTable-C1zHh-l8.js";import{a as k}from"./useForm-BzgFlAKs.js";import{u as D}from"./index-CaWdKrxn.js";import{c as S,_ as v}from"./RoleDrawer.vue_vue_type_script_setup_true_lang-B5sZEtgf.js";import{v as I,ar as T}from"./entry/index-BPNJPE-d-1727367563404.js";import{g as M,d as N}from"./role-DKToNsWF.js";import{P as U}from"./index-CU2O72Tc.js";import{d as V,ae as $,S as g,U as C,X as m,k as d,u as o,G as A,ac as B,Z as L}from"./vue-D0RdBkD6.js";import"./index-LAC3wiAG.js";import"./antd-CnnxMtH0.js";import"./isBoolean-Dou3jA6I.js";import"./index-BoOgNZ_b.js";import"./useWindowSizeFn-C71HDhub.js";import"./isDeepEqual-DIYWxe5x.js";import"./isNumber-j3SIk7av.js";import"./index-DDNUB-iW.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CyX9qi6i.js";import"./sortable.esm-BEDva30o.js";import"./index-DgmEQ_L6.js";import"./copyTextToClipboard-DU2l1C12.js";import"./useSortable-s3dauH_p.js";import"./index-BLETcaq3.js";import"./index-CBEN6l7B.js";import"./useContentViewHeight-b3bBSljJ.js";const ce=V({name:"RoleManagement",__name:"index",setup(f){const{t}=I.useI18n(),{createMessage:a}=T(),[c,{openDrawer:n}]=D(),[p,{reload:l}]=x({title:t("sys.role.roleList"),api:M,columns:S,formConfig:{labelWidth:120},useSearchForm:!1,showTableSetting:!0,bordered:!0,showIndexColumn:!1,actionColumn:{width:80,title:t("common.action"),dataIndex:"action",fixed:void 0}});function r(){n(!0,{isUpdate:!1})}function e(s){n(!0,{record:s,isUpdate:!0})}function i(s){return u(this,null,function*(){if(s.id===1){a.warn(t("common.notAllowDeleteAdminData"));return}(yield N({ids:[s.id]})).code===0&&(yield l())})}function w(){return u(this,null,function*(){yield l()})}return(s,b)=>{const h=$("a-button");return g(),C(o(U),null,{default:m(()=>[d(o(R),{onRegister:o(p)},{toolbar:m(()=>[d(h,{type:"primary",onClick:r},{default:m(()=>[A(B(o(t)("sys.role.addRole")),1)]),_:1})]),bodyCell:m(({column:y,record:_})=>[y.key==="action"?(g(),C(o(k),{key:0,actions:[{icon:"clarity:note-edit-line",onClick:e.bind(null,_)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:o(t)("common.deleteConfirm"),placement:"left",confirm:i.bind(null,_)}}]},null,8,["actions"])):L("",!0)]),_:1},8,["onRegister"]),d(v,{onRegister:o(c),onSuccess:w},null,8,["onRegister"])]),_:1})}}});export{ce as default};
