var D=Object.defineProperty;var g=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var P=(e,s,r)=>s in e?D(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,h=(e,s)=>{for(var r in s||(s={}))I.call(s,r)&&P(e,r,s[r]);if(g)for(var r of g(s))M.call(s,r)&&P(e,r,s[r]);return e};var v=(e,s,r)=>new Promise((n,m)=>{var d=a=>{try{l(r.next(a))}catch(c){m(c)}},p=a=>{try{l(r.throw(a))}catch(c){m(c)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(d,p);l((r=r.apply(e,s)).next())});import{b as R,c as C}from"./useForm-BzgFlAKs.js";import{a as u,b as k,e as B,as as F,v as q}from"./entry/index-BPNJPE-d-1727367563404.js";import{l as x,d as L,f as T,c as A,u as i,S as U,U as V,X as G,k as K,a0 as N}from"./vue-D0RdBkD6.js";import{Q as $}from"./antd-CnnxMtH0.js";import{a as j,B as H}from"./index-CaWdKrxn.js";const Z=(e,s="notice")=>u.post({url:"/sys-api/sms_provider/list",params:e},{errorMessageMode:s}),O=(e,s="notice")=>u.post({url:"/sys-api/sms_provider/create",params:e},{errorMessageMode:s,successMessageMode:s}),b=(e,s="notice")=>u.post({url:"/sys-api/sms_provider/update",params:e},{errorMessageMode:s,successMessageMode:s}),ee=(e,s="notice")=>u.post({url:"/sys-api/sms_provider/delete",params:e},{errorMessageMode:s,successMessageMode:s}),{t}=k(),se=[{title:t("mcms.smsProvider.name"),dataIndex:"name",width:50},{title:t("mcms.smsProvider.isDefault"),dataIndex:"isDefault",width:20,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),x($,{checked:e.isDefault===!0,checkedChildren:t("common.yes"),unCheckedChildren:t("common.no"),loading:e.pendingStatus,onChange(s,r){e.pendingStatus=!0,b({id:e.id,isDefault:s}).then(()=>{e.isDefault=s,B()()}).finally(()=>{e.pendingStatus=!1})}}))},{title:t("common.createTime"),dataIndex:"createdAt",width:30,customRender:({record:e})=>F(e.createdAt)}],te=[{field:"name",label:t("mcms.smsProvider.name"),component:"Select",colProps:{span:8},componentProps:{options:[{label:t("mcms.smsProvider.tencent"),value:"tencent"},{label:t("mcms.smsProvider.aliyun"),value:"aliyun"},{label:t("mcms.smsProvider.uni"),value:"uni"}]}}],Q=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:t("mcms.smsProvider.name"),component:"Select",required:!0,componentProps:{options:[{label:t("mcms.smsProvider.tencent"),value:"tencent"},{label:t("mcms.smsProvider.aliyun"),value:"aliyun"},{label:t("mcms.smsProvider.uni"),value:"uni"}]}},{field:"secretId",label:t("mcms.smsProvider.secretId"),component:"Input",required:!0},{field:"secretKey",label:t("mcms.smsProvider.secretKey"),component:"Input",required:!0},{field:"region",label:t("mcms.smsProvider.region"),component:"Input",required:!0},{field:"isDefault",label:t("mcms.smsProvider.isDefault"),component:"RadioButtonGroup",required:!0,defaultValue:!1,componentProps:{options:[{label:t("common.yes"),value:!0},{label:t("common.no"),value:!1}]}}],re=L({__name:"SmsProviderDrawer",emits:["success","register"],setup(e,{emit:s}){const r=s,n=T(!0),{t:m}=q.useI18n(),[d,{resetFields:p,setFieldsValue:l,validate:a}]=R({labelWidth:140,baseColProps:{span:24},layout:"vertical",schemas:Q,showActionButtonGroup:!1}),[c,{setDrawerProps:f,closeDrawer:w}]=j(o=>v(this,null,function*(){yield p(),f({confirmLoading:!1}),n.value=!!(o!=null&&o.isUpdate),i(n)&&(yield l(h({},o.record)))})),S=A(()=>i(n)?m("mcms.smsProvider.editSmsProvider"):m("mcms.smsProvider.addSmsProvider"));function _(){return v(this,null,function*(){const o=yield a();f({confirmLoading:!0}),o.id=i(n)?Number(o.id):0,(i(n)?yield b(o):yield O(o)).code===0&&(w(),r("success")),f({confirmLoading:!1})})}return(o,y)=>(U(),V(i(H),N(o.$attrs,{onRegister:i(c),showFooter:"",title:S.value,width:"35%",onOk:_}),{default:G(()=>[K(i(C),{onRegister:i(d)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{re as _,se as c,ee as d,Z as g,te as s};
