var D=Object.defineProperty;var P=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var w=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,g=(e,t)=>{for(var r in t||(t={}))M.call(t,r)&&w(e,r,t[r]);if(P)for(var r of P(t))T.call(t,r)&&w(e,r,t[r]);return e};var v=(e,t,r)=>new Promise((l,m)=>{var p=i=>{try{d(r.next(i))}catch(u){m(u)}},f=i=>{try{d(r.throw(i))}catch(u){m(u)}},d=i=>i.done?l(i.value):Promise.resolve(i.value).then(p,f);d((r=r.apply(e,t)).next())});import{b as q,c as A}from"./useForm-BzgFlAKs.js";import{a as c,b as R,as as C,v as B}from"./entry/index-BPNJPE-d-1727367563404.js";import{l as E,d as k,f as x,c as F,u as o,S as N,U as L,X as V,k as G,a0 as U}from"./vue-D0RdBkD6.js";import{Q as $}from"./antd-CnnxMtH0.js";import{a as j,B as H}from"./index-CaWdKrxn.js";const Z=(e,t="notice")=>c.post({url:"/sys-api/email_provider/list",params:e},{errorMessageMode:t}),O=(e,t="notice")=>c.post({url:"/sys-api/email_provider/create",params:e},{errorMessageMode:t,successMessageMode:t}),b=(e,t="notice")=>c.post({url:"/sys-api/email_provider/update",params:e},{errorMessageMode:t,successMessageMode:t}),ee=(e,t="notice")=>c.post({url:"/sys-api/email_provider/delete",params:e},{errorMessageMode:t,successMessageMode:t}),{t:a}=R(),te=[{title:a("mcms.emailProvider.name"),dataIndex:"name",width:50},{title:a("mcms.emailProvider.emailAddr"),dataIndex:"emailAddr",width:50},{title:a("mcms.emailProvider.isDefault"),dataIndex:"isDefault",width:20,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),E($,{checked:e.isDefault===!0,checkedChildren:a("common.yes"),unCheckedChildren:a("common.no"),loading:e.pendingStatus,onChange(t,r){e.pendingStatus=!0,b({id:e.id,isDefault:t}).then(()=>{e.isDefault=t}).finally(()=>{e.pendingStatus=!1})}}))},{title:a("common.createTime"),dataIndex:"createdAt",width:20,customRender:({record:e})=>C(e.createdAt)}],ae=[{field:"name",label:a("mcms.emailProvider.name"),component:"Input",colProps:{span:8}},{field:"emailAddr",label:a("mcms.emailProvider.emailAddr"),component:"Input",colProps:{span:8}}],n=e=>e===1,Q=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:a("mcms.emailProvider.name"),component:"Input",required:!0},{field:"authType",label:a("mcms.emailProvider.authType"),component:"Select",required:!0,componentProps:{options:[{label:"plain",value:1},{label:"CRAMMD5",value:2}]}},{field:"emailAddr",label:a("mcms.emailProvider.emailAddr"),component:"Input",required:!0,ifShow:({values:e})=>n(e.authType)},{field:"password",label:a("mcms.emailProvider.password"),component:"Input",required:!0,ifShow:({values:e})=>n(e.authType)},{field:"hostName",label:a("mcms.emailProvider.hostName"),component:"Input",required:!0,ifShow:({values:e})=>n(e.authType)},{field:"identify",label:a("mcms.emailProvider.identify"),component:"Input",required:!0,ifShow:({values:e})=>!n(e.authType)},{field:"secret",label:a("mcms.emailProvider.secret"),component:"Input",required:!0,ifShow:({values:e})=>!n(e.authType)},{field:"port",label:a("mcms.emailProvider.port"),component:"InputNumber",required:!0,ifShow:({values:e})=>n(e.authType)},{field:"tls",label:a("mcms.emailProvider.tls"),component:"RadioButtonGroup",required:!0,defaultValue:!1,componentProps:{options:[{label:a("common.yes"),value:!0},{label:a("common.no"),value:!1}]}},{field:"isDefault",label:a("mcms.emailProvider.isDefault"),component:"RadioButtonGroup",required:!0,defaultValue:!1,componentProps:{options:[{label:a("common.yes"),value:!0},{label:a("common.no"),value:!1}]}}],re=k({__name:"EmailProviderDrawer",emits:["success","register"],setup(e,{emit:t}){const r=t,l=x(!0),{t:m}=B.useI18n(),[p,{resetFields:f,setFieldsValue:d,validate:i}]=q({labelWidth:140,baseColProps:{span:24},layout:"vertical",schemas:Q,showActionButtonGroup:!1}),[u,{setDrawerProps:h,closeDrawer:y}]=j(s=>v(this,null,function*(){yield f(),h({confirmLoading:!1}),l.value=!!(s!=null&&s.isUpdate),o(l)&&(yield d(g({},s.record)))})),I=F(()=>o(l)?m("mcms.emailProvider.editEmailProvider"):m("mcms.emailProvider.addEmailProvider"));function S(){return v(this,null,function*(){const s=yield i();h({confirmLoading:!0}),s.id=o(l)?Number(s.id):0,(o(l)?yield b(s):yield O(s)).code===0&&(y(),r("success")),h({confirmLoading:!1})})}return(s,_)=>(N(),L(o(H),U(s.$attrs,{onRegister:o(u),showFooter:"",title:I.value,width:"35%",onOk:S}),{default:V(()=>[G(o(A),{onRegister:o(p)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{re as _,te as c,ee as d,Z as g,ae as s};
