var v=Object.defineProperty;var g=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var h=(e,a,t)=>a in e?v(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,w=(e,a)=>{for(var t in a||(a={}))T.call(a,t)&&h(e,t,a[t]);if(g)for(var t of g(a))D.call(a,t)&&h(e,t,a[t]);return e};var p=(e,a,t)=>new Promise((o,m)=>{var u=r=>{try{l(t.next(r))}catch(c){m(c)}},d=r=>{try{l(t.throw(r))}catch(c){m(c)}},l=r=>r.done?o(r.value):Promise.resolve(r.value).then(u,d);l((t=t.apply(e,a)).next())});import{b as R,c as C}from"./useForm-BzgFlAKs.js";import{b as x,as as B,v as F}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as b,c as P}from"./fileTag-BmLQAhlo.js";import{l as y,d as A,f as L,c as U,u as i,S as V,U as G,X as N,k as $,a0 as j}from"./vue-D0RdBkD6.js";import{Q as q}from"./antd-CnnxMtH0.js";import{a as O,B as Q}from"./index-CaWdKrxn.js";const{t:s}=x(),Y=[{title:s("fms.tag.name"),dataIndex:"name",width:100},{title:s("fms.tag.remark"),dataIndex:"remark",width:100},{title:s("common.status"),dataIndex:"status",width:50,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),y(q,{checked:e.status===1,checkedChildren:s("common.on"),unCheckedChildren:s("common.off"),loading:e.pendingStatus,onChange(a,t){e.pendingStatus=!0;const o=a?1:2;b({id:e.id,status:o}).then(()=>{e.status=o}).finally(()=>{e.pendingStatus=!1})}}))},{title:s("common.createTime"),dataIndex:"createdAt",width:70,customRender:({record:e})=>B(e.createdAt)}],Z=[{field:"name",label:s("fms.tag.name"),component:"Input",colProps:{span:8}},{field:"remark",label:s("fms.tag.remark"),component:"Input",colProps:{span:8}}],W=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:s("fms.tag.name"),component:"Input",required:!0},{field:"remark",label:s("fms.tag.remark"),component:"Input"},{field:"status",label:s("fms.tag.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:s("common.on"),value:1},{label:s("common.off"),value:2}]}}],ee=A({__name:"TagDrawer",emits:["success","register"],setup(e,{emit:a}){const t=a,o=L(!0),{t:m}=F.useI18n(),[u,{resetFields:d,setFieldsValue:l,validate:r}]=R({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:W,showActionButtonGroup:!1}),[c,{setDrawerProps:f,closeDrawer:I}]=O(n=>p(this,null,function*(){yield d(),f({confirmLoading:!1}),o.value=!!(n!=null&&n.isUpdate),i(o)&&(yield l(w({},n.record)))})),k=U(()=>i(o)?m("fms.tag.editTag"):m("fms.tag.addTag"));function _(){return p(this,null,function*(){const n=yield r();f({confirmLoading:!0}),n.id=i(o)?Number(n.id):0,(i(o)?yield b(n):yield P(n)).code===0&&(I(),t("success")),f({confirmLoading:!1})})}return(n,S)=>(V(),G(i(Q),j(n.$attrs,{onRegister:i(c),showFooter:"",title:k.value,width:"35%",onOk:_}),{default:N(()=>[$(i(C),{onRegister:i(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ee as _,Y as c,Z as s};
