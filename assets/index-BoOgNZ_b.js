var he=Object.defineProperty,ye=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var oe=(a,s,n)=>s in a?he(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,k=(a,s)=>{for(var n in s||(s={}))be.call(s,n)&&oe(a,n,s[n]);if(te)for(var n of te(s))He.call(s,n)&&oe(a,n,s[n]);return a},L=(a,s)=>ye(a,ve(s));var z=(a,s,n)=>new Promise((r,i)=>{var c=d=>{try{o(n.next(d))}catch(u){i(u)}},e=d=>{try{o(n.throw(d))}catch(u){i(u)}},o=d=>d.done?r(d.value):Promise.resolve(d.value).then(c,e);o((n=n.apply(a,s)).next())});import{b as ie,o as Ce,a$ as Me,y as Se,x as ke,b0 as Fe,f as ce,aF as q,w as ue,d as Be,aQ as we,aR as de,an as Oe,am as _e}from"./entry/index-BPNJPE-d-1727367563404.js";import{h as Y,u as t,d as R,I as Te,k as F,i as Pe,f as g,c as B,w as pe,o as $e,b as fe,y as P,S as H,U as N,X as y,m as Ne,a8 as X,Y as $,aa as xe,n as De,F as Re,Z as G,a9 as We,G as J,ac as K,a0 as I,ae as Ee,K as je,z as Le,af as ne,ad as ae,_ as le,$ as se,g as Z,r as me,J as V}from"./vue-D0RdBkD6.js";import{M as Ie,y as Ae,T as U,F as ze,as as qe}from"./antd-CnnxMtH0.js";import{S as Ve,B as Xe}from"./index-LAC3wiAG.js";import{u as Ye}from"./useWindowSizeFn-C71HDhub.js";import{i as Ue}from"./isDeepEqual-DIYWxe5x.js";const{t:re}=ie(),Ge={open:{type:Boolean},scrollTop:{type:Boolean,default:!0},height:{type:Number},minHeight:{type:Number},draggable:{type:Boolean,default:!0},centered:{type:Boolean},cancelText:{type:String,default:re("common.cancelText")},okText:{type:String,default:re("common.okText")},closeFunc:Function},ee=Object.assign({},Ge,{defaultFullscreen:{type:Boolean},canFullscreen:{type:Boolean,default:!0},wrapperFooterOffset:{type:Number,default:0},helpMessage:[String,Array],useWrapper:{type:Boolean,default:!0},loading:{type:Boolean},loadingTip:{type:String},showCancelBtn:{type:Boolean,default:!0},showOkBtn:{type:Boolean,default:!0},wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:{type:Boolean},destroyOnClose:{type:Boolean},footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},open:{type:Boolean},width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number}});function Je(a){const s=(i,c)=>getComputedStyle(i)[c],n=i=>{if(!i)return;i.setAttribute("data-drag",t(a.draggable));const c=i.querySelector(".ant-modal-header"),e=i.querySelector(".ant-modal");!c||!e||!t(a.draggable)||(c.style.cursor="move",c.onmousedown=o=>{if(!o)return;const d=o.clientX,u=o.clientY,C=document.body.clientWidth,b=document.documentElement.clientHeight,v=e.offsetWidth,p=e.offsetHeight,f=e.offsetLeft,m=C-e.offsetLeft-v,h=e.offsetTop,w=b-e.offsetTop-p,M=s(e,"left"),S=s(e,"top");let W=+M,E=+S;M.includes("%")?(W=+document.body.clientWidth*(+M.replace(/%/g,"")/100),E=+document.body.clientHeight*(+S.replace(/%/g,"")/100)):(W=+M.replace(/px/g,""),E=+S.replace(/px/g,"")),document.onmousemove=function(A){let _=A.clientX-d,T=A.clientY-u;-_>f?_=-f:_>m&&(_=m),-T>h?T=-h:T>w&&(T=w),e.style.cssText+=`;left:${_+W}px;top:${T+E}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})},r=()=>{const i=document.querySelectorAll(".ant-modal-wrap");for(const c of Array.from(i)){if(!c)continue;const e=s(c,"display"),o=c.getAttribute("data-drag");e!=="none"&&(o===null||t(a.destroyOnClose))&&n(c)}};Y(()=>{!t(a.open)||!t(a.draggable)||Ce(()=>{r()},30)})}function Ke(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!Pe(a)}const Qe=R({name:"Modal",inheritAttrs:!1,props:ee,emits:["cancel"],setup(a,{slots:s,emit:n,attrs:r}){const{open:i,draggable:c,destroyOnClose:e}=Te(a);Je({open:i,destroyOnClose:e,draggable:c});const o=d=>{n("cancel",d)};return()=>{let d;const u=L(k(k({},t(r)),a),{onCancel:o});return F(Ie,u,Ke(d=Me(s))?d:{default:()=>[d]})}}}),ge=Symbol();function Ze(a){return ke(a,ge)}function mt(){return Se(ge)}const et=["loading-tip"],tt=R({inheritAttrs:!1,__name:"ModalWrapper",props:{loading:{type:Boolean},useWrapper:{type:Boolean,default:!0},modalHeaderHeight:{type:Number,default:57},modalFooterHeight:{type:Number,default:74},minHeight:{type:Number,default:200},height:{type:Number},footerOffset:{type:Number,default:0},open:{type:Boolean},fullScreen:{type:Boolean},loadingTip:{type:String}},emits:["height-change","ext-height"],setup(a,{expose:s,emit:n}){const r=a,i=n,c=g(null),e=g(null),o=g(0),d=g(0),u=g(0);Ye(v.bind(null)),Fe(e,()=>{v()},{attributes:!0,subtree:!0}),Ze({redoModalHeight:v});const C=B(()=>({minHeight:`${r.minHeight}px`,[r.fullScreen?"height":"maxHeight"]:`${t(o)}px`}));Y(()=>{r.useWrapper&&v()}),pe(()=>r.fullScreen,p=>{v(),p?d.value=o.value:o.value=d.value}),$e(()=>{const{modalHeaderHeight:p,modalFooterHeight:f}=r;i("ext-height",p+f)}),fe(()=>{});function b(){return z(this,null,function*(){P(()=>{var f;const p=t(c);p&&((f=p==null?void 0:p.scrollTo)==null||f.call(p,0))})})}function v(){return z(this,null,function*(){if(!r.open)return;const p=t(c);if(!p)return;const f=p.$el.parentElement;if(f){f.style.padding="0",yield P();try{const m=f.parentElement&&f.parentElement.parentElement;if(!m)return;const h=getComputedStyle(m).top,w=Number.parseInt(h);let M=window.innerHeight-w*2+(r.footerOffset||0)-r.modalFooterHeight-r.modalHeaderHeight;w<40&&(M-=26),yield P();const S=t(e);if(!S)return;yield P(),u.value=S.scrollHeight,r.fullScreen?o.value=window.innerHeight-r.modalFooterHeight-r.modalHeaderHeight-28:o.value=r.height?r.height:u.value>M?M:u.value,i("height-change",t(o))}catch(m){}}})}return s({scrollTop:b,setModalHeight:v}),(p,f)=>{const m=De("loading");return H(),N(t(Ve),{ref_key:"wrapperRef",ref:c,scrollHeight:u.value},{default:y(()=>[Ne((H(),X("div",{ref_key:"spinRef",ref:e,style:xe(C.value),"loading-tip":r.loadingTip},[$(p.$slots,"default")],12,et)),[[m,r.loading]])]),_:3},8,["scrollHeight"])}}}),ot=R({__name:"ModalClose",props:{canFullscreen:{type:Boolean,default:!0},fullScreen:{type:Boolean}},emits:["cancel","fullscreen"],setup(a,{emit:s}){const n=a,r=s,{prefixCls:i}=ce("basic-modal-close"),{t:c}=ie(),e=B(()=>[i,`${i}--custom`,{[`${i}--can-full`]:n.canFullscreen}]);function o(u){r("cancel",u)}function d(u){u==null||u.stopPropagation(),u==null||u.preventDefault(),r("fullscreen")}return(u,C)=>(H(),X("div",{class:We(e.value)},[a.canFullscreen?(H(),X(Re,{key:0},[a.fullScreen?(H(),N(t(U),{key:0,title:t(c)("component.modal.restore"),placement:"bottom"},{default:y(()=>[F(t(Ae),{role:"full",onClick:d})]),_:1},8,["title"])):(H(),N(t(U),{key:1,title:t(c)("component.modal.maximize"),placement:"bottom"},{default:y(()=>[F(t(ze),{role:"close",onClick:d})]),_:1},8,["title"]))],64)):G("",!0),F(t(U),{title:t(c)("component.modal.close"),placement:"bottom"},{default:y(()=>[F(t(qe),{onClick:o})]),_:1},8,["title"])],2))}}),nt=R({__name:"ModalFooter",props:ee,emits:["ok","cancel"],setup(a,{emit:s}){const n=a,r=s;function i(e){r("ok",e)}function c(e){r("cancel",e)}return(e,o)=>{const d=Ee("a-button");return H(),X("div",null,[$(e.$slots,"insertFooter"),n.showCancelBtn?(H(),N(d,I({key:0},n.cancelButtonProps,{onClick:c}),{default:y(()=>[J(K(n.cancelText),1)]),_:1},16)):G("",!0),$(e.$slots,"centerFooter"),n.showOkBtn?(H(),N(d,I({key:1,type:n.okType,onClick:i,loading:n.confirmLoading},n.okButtonProps),{default:y(()=>[J(K(n.okText),1)]),_:1},16,["type","loading"])):G("",!0),$(e.$slots,"appendFooter")])}}}),at=R({__name:"ModalHeader",props:{helpMessage:{type:[String,Array]},title:{type:String}},setup(a){const s=a;return(n,r)=>(H(),N(t(Xe),{helpMessage:s.helpMessage},{default:y(()=>[J(K(s.title),1)]),_:1},8,["helpMessage"]))}});function lt(a){const s=g(!1),n=B(()=>{const i=t(a.wrapClassName)||"";return t(s)?`fullscreen-modal ${i} `:t(i)});function r(i){i&&i.stopPropagation(),s.value=!t(s)}return{getWrapClassName:n,handleFullScreen:r,fullScreenRef:s}}const st=R({inheritAttrs:!1,__name:"BasicModal",props:ee,emits:["open-change","height-change","cancel","ok","register","update:open"],setup(a,{emit:s}){const n=a,r=s,i=je(),c=g(!1),e=g(null),o=g(null),{prefixCls:d}=ce("basic-modal"),u=g(0),C={setModalProps:W,emitOpen:void 0,redoModalHeight:()=>{P(()=>{t(o)&&t(o).setModalHeight()})}},b=Z();b&&r("register",C,b.uid);const v=B(()=>k(k({},n),t(e))),{handleFullScreen:p,getWrapClassName:f,fullScreenRef:m}=lt({modalWrapperRef:o,extHeightRef:u,wrapClassName:Le(v.value,"wrapClassName")}),h=B(()=>{const l=L(k({},t(v)),{open:t(c),okButtonProps:void 0,cancelButtonProps:void 0,title:void 0});return L(k({},l),{wrapClassName:t(f)})}),w=B(()=>{const l=L(k(k({},i),t(v)),{open:t(c)});return l.wrapClassName=`${(l==null?void 0:l.wrapClassName)||""} ${t(f)}vben-basic-modal-wrap`,t(m)?q(l,["height","title"]):q(l,["title"])}),M=B(()=>{if(!t(m))return t(h).height});Y(()=>{c.value=!!n.open,m.value=!!n.defaultFullscreen}),pe(()=>t(c),l=>{var x;r("open-change",l),r("update:open",l),b&&((x=C.emitOpen)==null||x.call(C,l,b.uid)),P(()=>{n.scrollTop&&l&&t(o)&&t(o).scrollTop()})},{immediate:!1});function S(l){return z(this,null,function*(){var x,O;if(l==null||l.stopPropagation(),!((O=(x=l.target)==null?void 0:x.classList)!=null&&O.contains(d+"-close--custom"))){if(n.closeFunc&&ue(n.closeFunc)){const j=yield n.closeFunc();c.value=!j;return}c.value=!1,r("cancel",l)}})}function W(l){e.value=Be(t(e)||{},l),Reflect.has(l,"open")&&(c.value=!!l.open),Reflect.has(l,"defaultFullscreen")&&(m.value=!!l.defaultFullscreen)}function E(l){r("ok",l)}function A(l){r("height-change",l)}function _(l){u.value=l}function T(l){n.canFullscreen&&(l.stopPropagation(),p(l))}return(l,x)=>(H(),N(t(Qe),I(w.value,{onCancel:S}),ne({default:y(()=>[F(tt,I({useWrapper:h.value.useWrapper,footerOffset:l.wrapperFooterOffset,fullScreen:t(m),ref_key:"modalWrapperRef",ref:o,loading:h.value.loading,"loading-tip":h.value.loadingTip,minHeight:h.value.minHeight,height:M.value,open:c.value,modalFooterHeight:l.footer!==void 0&&!l.footer?0:void 0},h.value.wrapperProps?t(q)(h.value.wrapperProps,["open","height","modalFooterHeight"]):{},{onExtHeight:_,onHeightChange:A}),{default:y(()=>[$(l.$slots,"default")]),_:3},16,["useWrapper","footerOffset","fullScreen","loading","loading-tip","minHeight","height","open","modalFooterHeight"])]),_:2},[l.$slots.closeIcon?void 0:{name:"closeIcon",fn:y(()=>[F(ot,{canFullscreen:h.value.canFullscreen,fullScreen:t(m),onCancel:S,onFullscreen:t(p)},null,8,["canFullscreen","fullScreen","onFullscreen"])]),key:"0"},l.$slots.title?void 0:{name:"title",fn:y(()=>[F(at,{helpMessage:h.value.helpMessage,title:v.value.title,onDblclick:T},null,8,["helpMessage","title"])]),key:"1"},l.$slots.footer?void 0:{name:"footer",fn:y(()=>[F(nt,I(w.value,{onOk:E,onCancel:S}),ne({_:2},[ae(Object.keys(l.$slots),O=>({name:O,fn:y(j=>[$(l.$slots,O,le(se(j||{})))])}))]),1040)]),key:"2"},ae(Object.keys(t(q)(l.$slots,["default"])),O=>({name:O,fn:y(j=>[$(l.$slots,O,le(se(j||{})))])}))]),1040))}}),D=me({}),Q=me({});function gt(){const a=g(null),s=g(!1),n=g(0);function r(e,o){if(!Z())throw new Error("useModal() can only be used inside setup() or functional components!");n.value=o,fe(()=>{a.value=null,s.value=!1,D[String(t(n))]=null}),!(t(s)&&we()&&e===t(a))&&(a.value=e,s.value=!0,e.emitOpen=(d,u)=>{Q[u]=d})}const i=()=>{const e=t(a);return e||de("useModal instance is undefined!"),e},c={setModalProps:e=>{var o;(o=i())==null||o.setModalProps(e)},getOpen:B(()=>Q[~~t(n)]),redoModalHeight:()=>{var e,o;(o=(e=i())==null?void 0:e.redoModalHeight)==null||o.call(e)},openModal:(e=!0,o,d=!0)=>{var b;if((b=i())==null||b.setModalProps({open:e}),!o)return;const u=t(n);if(d){D[u]=null,D[u]=V(o);return}Ue(V(D[u]),V(o))||(D[u]=V(o))},closeModal:()=>{var e;(e=i())==null||e.setModalProps({open:!1})}};return[r,c]}const ht=a=>{const s=g(null),n=Z(),r=g(0),i=()=>{const e=t(s);return e||de("useModalInner instance is undefined!"),e},c=(e,o)=>{Oe(()=>{s.value=null}),r.value=o,s.value=e,n==null||n.emit("register",e,o)};return Y(()=>{const e=D[t(r)];e&&(!a||!ue(a)||P(()=>{a(e)}))}),[c,{changeLoading:(e=!0)=>{var o;(o=i())==null||o.setModalProps({loading:e})},getOpen:B(()=>Q[~~t(r)]),changeOkLoading:(e=!0)=>{var o;(o=i())==null||o.setModalProps({confirmLoading:e})},closeModal:()=>{var e;(e=i())==null||e.setModalProps({open:!1})},setModalProps:e=>{var o;(o=i())==null||o.setModalProps(e)},redoModalHeight:()=>{var o;const e=(o=i())==null?void 0:o.redoModalHeight;e&&e()}}]},yt=_e(st);export{yt as B,ht as a,gt as b,mt as u};
