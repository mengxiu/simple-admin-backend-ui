var l=(_,o,a)=>new Promise((s,c)=>{var u=t=>{try{r(a.next(t))}catch(i){c(i)}},p=t=>{try{r(a.throw(t))}catch(i){c(i)}},r=t=>t.done?s(t.value):Promise.resolve(t.value).then(u,p);r((a=a.apply(_,o)).next())});import{i as N}from"./index-D0CbPeO-.js";import{u as E,_ as U}from"./useTable-C1zHh-l8.js";import{a as V}from"./useForm-BzgFlAKs.js";import{v as $,aq as F}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as L}from"./index-CaWdKrxn.js";import{c as M,s as O,_ as W}from"./DictionaryDetailDrawer.vue_vue_type_script_setup_true_lang-CnuBJW7m.js";import{g as j,d as C}from"./copyTextToClipboard-DU2l1C12.js";import{d as q,f as g,a7 as G,r as X,u as e,ae as Z,S as y,a8 as z,k as d,X as m,U as w,G as D,ac as b,Z as k}from"./vue-D0RdBkD6.js";import{M as A}from"./antd-CnnxMtH0.js";import"./ExclamationCircleOutlined-m2nOMvaL.js";import"./index-LAC3wiAG.js";import"./isBoolean-Dou3jA6I.js";import"./index-BoOgNZ_b.js";import"./useWindowSizeFn-C71HDhub.js";import"./isDeepEqual-DIYWxe5x.js";import"./isNumber-j3SIk7av.js";import"./index-DDNUB-iW.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CyX9qi6i.js";import"./sortable.esm-BEDva30o.js";import"./index-DgmEQ_L6.js";import"./useSortable-s3dauH_p.js";import"./index-BLETcaq3.js";import"./index-CBEN6l7B.js";import"./dictionary-HzT8O3R9.js";const we=q({name:"DictionaryDetail",__name:"index",setup(_){const{t:o}=$.useI18n(),a=g(),s=g(!1),{currentRoute:c}=G(),u=X({dictionaryId:Number(e(c).params.dictionaryId)}),[p,{openDrawer:r}]=L(),[t,{reload:i}]=E({title:o("sys.dictionary.dictionaryDetailList"),api:j,columns:M,formConfig:{labelWidth:120,schemas:O},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:30,title:o("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",columnWidth:20,onChange:(n,f)=>{a.value=n,s.value=n.length>0}}});function I(){r(!0,{dictionaryId:Number(e(c).params.dictionaryId),isUpdate:!1})}function v(n){r(!0,{record:n,isUpdate:!0})}function x(n){return l(this,null,function*(){(yield C({ids:[n.id]})).code===0&&(yield i())})}function S(){return l(this,null,function*(){A.confirm({title:o("common.deleteConfirm"),icon:d(N.ExclamationCircleOutlined),onOk(){return l(this,null,function*(){(yield C({ids:a.value},"modal")).code===0&&(s.value=!1,yield i())})},onCancel(){}})})}function R(){return l(this,null,function*(){yield i()})}return(n,f)=>{const B=Z("a-button");return y(),z("div",null,[d(e(U),{onRegister:e(t),searchInfo:u},{tableTitle:m(()=>[s.value?(y(),w(e(F),{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:S},{default:m(()=>[D(b(e(o)("common.delete")),1)]),_:1})):k("",!0)]),toolbar:m(()=>[d(B,{type:"primary",onClick:I},{default:m(()=>[D(b(e(o)("sys.dictionary.addDictionaryDetail")),1)]),_:1})]),bodyCell:m(({column:T,record:h})=>[T.key==="action"?(y(),w(e(V),{key:0,actions:[{icon:"clarity:note-edit-line",onClick:v.bind(null,h)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:e(o)("common.deleteConfirm"),placement:"left",confirm:x.bind(null,h)}}]},null,8,["actions"])):k("",!0)]),_:1},8,["onRegister","searchInfo"]),d(W,{onRegister:e(p),onSuccess:R},null,8,["onRegister"])])}}});export{we as default};
