var l=(_,t,a)=>new Promise((i,m)=>{var d=e=>{try{r(a.next(e))}catch(s){m(s)}},p=e=>{try{r(a.throw(e))}catch(s){m(s)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(d,p);r((a=a.apply(_,t)).next())});import{i as I}from"./index-D0CbPeO-.js";import{u as T,_ as R}from"./useTable-C1zHh-l8.js";import{a as E}from"./useForm-BzgFlAKs.js";import{v as M,aq as N}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as U}from"./index-CaWdKrxn.js";import{c as V,s as $,_ as F}from"./StorageProviderDrawer.vue_vue_type_script_setup_true_lang-c8lJUI_6.js";import{g as L,d as C}from"./storageProvider-CFOQ3JK-.js";import{M as O}from"./antd-CnnxMtH0.js";import{d as W,f as v,ae as j,S as g,a8 as q,k as u,X as c,U as w,u as o,G as y,ac as b,Z as k}from"./vue-D0RdBkD6.js";import"./ExclamationCircleOutlined-m2nOMvaL.js";import"./index-LAC3wiAG.js";import"./isBoolean-Dou3jA6I.js";import"./index-BoOgNZ_b.js";import"./useWindowSizeFn-C71HDhub.js";import"./isDeepEqual-DIYWxe5x.js";import"./isNumber-j3SIk7av.js";import"./index-DDNUB-iW.js";import"./object-BY_VTB7H.js";import"./onMountedOrActivated-CyX9qi6i.js";import"./sortable.esm-BEDva30o.js";import"./index-DgmEQ_L6.js";import"./copyTextToClipboard-DU2l1C12.js";import"./useSortable-s3dauH_p.js";import"./index-BLETcaq3.js";import"./index-CBEN6l7B.js";const _e=W({name:"StorageProviderManagement",__name:"index",setup(_){const{t}=M.useI18n(),a=v(),i=v(!1),[m,{openDrawer:d}]=U(),[p,{reload:r}]=T({title:t("fms.storageProvider.storageProviderList"),api:L,columns:V,formConfig:{labelWidth:120,schemas:$},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:30,title:t("common.action"),dataIndex:"action",fixed:void 0},rowKey:"id",rowSelection:{type:"checkbox",columnWidth:20,onChange:(n,f)=>{a.value=n,i.value=n.length>0}}});function e(){d(!0,{isUpdate:!1})}function s(n){d(!0,{record:n,isUpdate:!0})}function S(n){return l(this,null,function*(){(yield C({ids:[n.id]})).code===0&&(yield r())})}function x(){return l(this,null,function*(){O.confirm({title:t("common.deleteConfirm"),icon:u(I.ExclamationCircleOutlined),onOk(){return l(this,null,function*(){(yield C({ids:a.value})).code===0&&(i.value=!1,yield r())})},onCancel(){}})})}function D(){return l(this,null,function*(){yield r()})}return(n,f)=>{const P=j("a-button");return g(),q("div",null,[u(o(R),{onRegister:o(p)},{tableTitle:c(()=>[i.value?(g(),w(o(N),{key:0,type:"primary",danger:"",preIcon:"ant-design:delete-outlined",onClick:x},{default:c(()=>[y(b(o(t)("common.delete")),1)]),_:1})):k("",!0)]),toolbar:c(()=>[u(P,{type:"primary",onClick:e},{default:c(()=>[y(b(o(t)("fms.storageProvider.addStorageProvider")),1)]),_:1})]),bodyCell:c(({column:B,record:h})=>[B.key==="action"?(g(),w(o(E),{key:0,actions:[{icon:"clarity:note-edit-line",onClick:s.bind(null,h)},{icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:o(t)("common.deleteConfirm"),placement:"left",confirm:S.bind(null,h)}}]},null,8,["actions"])):k("",!0)]),_:1},8,["onRegister"]),u(F,{onRegister:o(m),onSuccess:D},null,8,["onRegister"])])}}});export{_e as default};
