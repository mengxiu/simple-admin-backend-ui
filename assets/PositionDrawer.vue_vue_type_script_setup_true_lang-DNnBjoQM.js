var _=Object.defineProperty;var h=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var w=(e,o,t)=>o in e?_(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,b=(e,o)=>{for(var t in o||(o={}))P.call(o,t)&&w(e,t,o[t]);if(h)for(var t of h(o))S.call(o,t)&&w(e,t,o[t]);return e};var f=(e,o,t)=>new Promise((n,m)=>{var u=i=>{try{l(t.next(i))}catch(c){m(c)}},d=i=>{try{l(t.throw(i))}catch(c){m(c)}},l=i=>i.done?n(i.value):Promise.resolve(i.value).then(u,d);l((t=t.apply(e,o)).next())});import{b as v,c as D}from"./useForm-BzgFlAKs.js";import{b as R,as as C,v as B}from"./entry/index-BPNJPE-d-1727367563404.js";import{u as g,c as F}from"./position-C1YWIXu5.js";import{l as T,d as q,f as A,c as L,u as r,S as N,U,X as V,k as G,a0 as $}from"./vue-D0RdBkD6.js";import{Q as j}from"./antd-CnnxMtH0.js";import{a as O,B as Q}from"./index-CaWdKrxn.js";const{t:s}=R(),Y=[{title:s("sys.position.name"),dataIndex:"trans",width:80},{title:s("sys.position.code"),dataIndex:"code",width:40},{title:s("common.remark"),dataIndex:"remark",width:80},{title:s("common.sort"),dataIndex:"sort",width:20},{title:s("common.status"),dataIndex:"status",width:50,customRender:({record:e})=>(Reflect.has(e,"pendingStatus")||(e.pendingStatus=!1),T(j,{checked:e.status===1,checkedChildren:s("common.on"),unCheckedChildren:s("common.off"),loading:e.pendingStatus,onChange(o,t){e.pendingStatus=!0;const n=o?1:2;g({id:e.id,status:n}).then(()=>{e.status=n}).finally(()=>{e.pendingStatus=!1})}}))},{title:s("common.createTime"),dataIndex:"createdAt",width:70,customRender:({record:e})=>C(e.createdAt)}],Z=[{field:"name",label:s("sys.position.name"),component:"Input",colProps:{span:8},rules:[{max:50}]},{field:"code",label:s("sys.position.code"),component:"Input",colProps:{span:8},rules:[{max:20}]},{field:"remark",label:s("common.remark"),component:"Input",colProps:{span:8},rules:[{max:200}]}],W=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:s("sys.position.name"),component:"Input",required:!0,rules:[{max:50}]},{field:"code",label:s("sys.position.code"),component:"Input",required:!0,rules:[{max:20}]},{field:"sort",label:s("common.sort"),component:"InputNumber",required:!0,rules:[{type:"number",max:1e4}]},{field:"remark",label:s("common.remark"),component:"Input",rules:[{max:200}]},{field:"status",label:s("common.status"),component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:s("common.on"),value:1},{label:s("common.off"),value:2}]}}],ee=q({__name:"PositionDrawer",emits:["success","register"],setup(e,{emit:o}){const t=o,n=A(!0),{t:m}=B.useI18n(),[u,{resetFields:d,setFieldsValue:l,validate:i}]=v({labelWidth:160,baseColProps:{span:24},layout:"vertical",schemas:W,showActionButtonGroup:!1}),[c,{setDrawerProps:p,closeDrawer:I}]=O(a=>f(this,null,function*(){yield d(),p({confirmLoading:!1}),n.value=!!(a!=null&&a.isUpdate),r(n)&&(yield l(b({},a.record)))})),x=L(()=>r(n)?m("sys.position.editPosition"):m("sys.position.addPosition"));function k(){return f(this,null,function*(){const a=yield i();p({confirmLoading:!0}),a.id=r(n)?Number(a.id):0,(r(n)?yield g(a):yield F(a)).code===0&&(I(),t("success")),p({confirmLoading:!1})})}return(a,y)=>(N(),U(r(Q),$(a.$attrs,{onRegister:r(c),showFooter:"",title:x.value,width:"35%",onOk:k}),{default:V(()=>[G(r(D),{onRegister:r(u)},null,8,["onRegister"])]),_:1},16,["onRegister","title"]))}});export{ee as _,Y as c,Z as s};
